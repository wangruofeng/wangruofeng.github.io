{"meta":{"title":"ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢","subtitle":"ä¸–ç•Œå°½å¤´ã®å†·é…·ä»™å¢ƒ","description":"ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢","author":"ç‹è‹¥é£","url":"https://blog.wangruofeng007.com","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2024-11-02T05:43:56.000Z","updated":"2024-11-02T05:46:10.309Z","comments":true,"path":"categories/index.html","permalink":"https://blog.wangruofeng007.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2024-11-02T05:44:19.000Z","updated":"2024-11-02T05:46:14.793Z","comments":true,"path":"tags/index.html","permalink":"https://blog.wangruofeng007.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Hexo å‡çº§åˆ° V7.3","slug":"Hexo-å‡çº§åˆ°-V7-3","date":"2024-11-02T06:04:25.000Z","updated":"2024-11-02T06:28:43.336Z","comments":true,"path":"2024/11/02/Hexo-å‡çº§åˆ°-V7-3/","permalink":"https://blog.wangruofeng007.com/2024/11/02/Hexo-%E5%8D%87%E7%BA%A7%E5%88%B0-V7-3/","excerpt":"æœ€è¿‘æ¢äº†å° Apple M2 ç”µè„‘ï¼Œæ•´ä¸ªè½¯ä»¶éƒ½è¿›è¡Œé‡è£…ï¼ŒHexo å¹´ä¹…å¤±ä¿®ï¼Œåœ¨è®¾ç½®çš„æ—¶å€™å‡ºç°å¾ˆå¤šè­¦å‘Š âš ï¸ï¼Œçœ‹äº†ä¸€ä¸‹æ—¥å¿—ä¸»è¦åŸå› æ˜¯ä»¥å‰ç‰ˆæœ¬ä¾èµ–çš„ node ç‰ˆæœ¬å¤ªä½äº†ï¼Œè¿˜æœ‰ç›¸å…³ä¾èµ–åº“å› ä¸ºå¤ªæ—§æœ‰ä¸å°‘å®‰å…¨æ¼æ´ï¼ŒæŸ¥äº†ä¸€ä¸‹ Hexo æœ€æ–°å‘å¸ƒçš„ä¸º 7.3 ç‰ˆæœ¬ ï¼Œäºæ˜¯æ‰“ç®—æ•´ä½“è¿ç§»ä¸€ä¸‹ã€‚","text":"æœ€è¿‘æ¢äº†å° Apple M2 ç”µè„‘ï¼Œæ•´ä¸ªè½¯ä»¶éƒ½è¿›è¡Œé‡è£…ï¼ŒHexo å¹´ä¹…å¤±ä¿®ï¼Œåœ¨è®¾ç½®çš„æ—¶å€™å‡ºç°å¾ˆå¤šè­¦å‘Š âš ï¸ï¼Œçœ‹äº†ä¸€ä¸‹æ—¥å¿—ä¸»è¦åŸå› æ˜¯ä»¥å‰ç‰ˆæœ¬ä¾èµ–çš„ node ç‰ˆæœ¬å¤ªä½äº†ï¼Œè¿˜æœ‰ç›¸å…³ä¾èµ–åº“å› ä¸ºå¤ªæ—§æœ‰ä¸å°‘å®‰å…¨æ¼æ´ï¼ŒæŸ¥äº†ä¸€ä¸‹ Hexo æœ€æ–°å‘å¸ƒçš„ä¸º 7.3 ç‰ˆæœ¬ ï¼Œäºæ˜¯æ‰“ç®—æ•´ä½“è¿ç§»ä¸€ä¸‹ã€‚ å®‰è£… Hexo 7.3é¦–å…ˆ Hexo çš„å®‰è£…å¯ä»¥ç”¨ brew äº†ã€‚ä½¿ç”¨ brew install hexo å®‰è£…ï¼Œå®‰è£…å¥½ä¹‹å Hexo åœ¨ /opt/homebrew/Cellar/hexo/7.3.0 ä¸‹ã€‚ ä½¿ç”¨ Hexo çš„å¦‚ä¸‹æŒ‡ä»¤å®Œæˆå»ºç«™ 123hexo init blogcd blognpm install å½“å‰ç¯å¢ƒé…ç½®å¦‚ä¸‹ï¼š 1234hexo: 7.3.0nodeï¼šv22.11.0npmï¼š10.9.0brewï¼š4.4.2 åŸºæœ¬é…ç½®èµ„æºè¿ç§»ï¼šå»ºå®Œç«™ä¹‹åï¼ŒæŠŠä¹‹å‰çš„æ–‡ç« ï¼ˆsource&#x2F;_postsï¼‰å’Œé™æ€èµ„æºï¼ˆä¾‹å¦‚å›¾ç‰‡ source&#x2F;imagesï¼‰éƒ½è¿ç§»è¿‡å»ã€‚ å¦‚æœåšå®¢æœ‰æ˜ å°„è‡ªå·±çš„åŸŸåï¼Œè®°å¾—æŠŠ CNAME æ–‡ä»¶ä¹Ÿè¿ç§»ä¸€ä¸‹ é…ç½®ä¸»é¢˜ï¼šç”±äºæˆ‘å®šåˆ¶è¿‡ Next ä¸»é¢˜ï¼Œå°±ç›´æ¥æŠŠæ—§é¡¹ç›®çš„ä¸»é¢˜ç›´æ¥æ‹·è´åˆ°æ–°é¡¹ç›®çš„ themes&#x2F;next ç›®å½•å³å¯ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å»ºç«™éœ€è¦åœ¨ themes ç›®å½•ä¸‹æŠŠ Next clone ä¸‹æ¥ï¼š 1git clone https://github.com/next-theme/hexo-theme-next.git next é…ç½® _config.yml ä¸»é¢˜ä¸º nextï¼š 1theme: next é…ç½®è¯­è¨€ï¼šåœ¨_config.ymlä¸­æ›´æ–°åšå®¢è¯­è¨€é…ç½®ï¼Œé»˜è®¤ä¸ºè‹±è¯­ 1language: zh-CN é…ç½®é“¾æ¥é£æ ¼ï¼šä¿®æ”¹ _config.yml çš„ permalink ç”Ÿæˆæ ¼å¼ï¼Œè¿™é‡Œé…ç½®æˆçŸ­é“¾é£æ ¼ï¼Œå¦‚ä¸‹å†…å®¹ï¼š 12345# é»˜è®¤é£æ ¼# permalink: :year/:month/:day/:title/# å°†æ–‡ç«  url é£æ ¼è°ƒæ•´æˆçŸ­é“¾é£permalink: posts/:abbrlink/ é…ç½®åˆ†ç±»è¿™æ­¥é…ç½®å¯ä»¥å‚è€ƒè¿™ä¸ªå¸–å­ æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥åšå®¢é¡¹ç›®æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 1hexo new page categories æˆåŠŸä¼šæœ‰æç¤º 1INFO Created: ~/path_to_blog/source/categories/index.md è¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½äº†åˆ†ç±»é¡µé¢äº†ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¸»é¢˜è¿˜ä¸ä¼šè¯†åˆ«è¿™ä¸ªé¡µé¢ä¸ºåˆ†ç±»é¡µï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–è¾‘è¿™ä¸ªæ–°å»ºçš„é¡µé¢ï¼Œè®©ä¸»é¢˜è¯†åˆ«è¿™ä¸ªé¡µé¢ï¼Œå¹¶è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºåˆ†ç±»ã€‚ ç¼–è¾‘index.mdåœ¨æ–‡ä»¶ä¸­æ·»åŠ  type: â€œcategoriesâ€ 12345---title: åˆ†ç±»date: 2024-11-02 13:43:56type: &quot;categories&quot;--- é…ç½®æ ‡ç­¾åŒç† é…ç½® tags 1hexo new page tags æˆåŠŸä¼šæœ‰æç¤º 1INFO Created: ~/path_to_blog/source/tags/index.md ç¼–è¾‘index.mdåœ¨æ–‡ä»¶ä¸­æ·»åŠ  type: â€œtagsâ€ 12345---title: æ ‡ç­¾date: 2024-11-02 13:44:19type: &quot;tags&quot;--- å®‰è£…æ’ä»¶ç«™å†…æœç´¢å®‰è£… hexo-generator-searchdb æ’ä»¶ 1npm install hexo-generator-searchdb --save åœ¨ _config.yml ä¸­æ·»åŠ é…ç½®ï¼š 123456# searchsearch: path: search.json field: post format: html limit: 1000 å­—æ•°ç»Ÿè®¡å®‰è£… npm install hexo-word-counter æ’ä»¶ , å‚è€ƒ 12npm install hexo-word-counterhexo clean å‘å¸ƒæ’ä»¶ç„¶åéœ€è¦åœ¨ blog æ ¹ç›®å½•ä¸‹å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š 1npm install hexo-deployer-git --save å› ä¸ºæˆ‘åœ¨ config.yml ä¸­é…ç½®å¥½äº† deploy ä¿¡æ¯ï¼š 1234567# Deploymentdeploy: type: git message: &quot;Site updated: &#123;&#123; now(&#x27;YYYY-MM-DD HH:mm&#x27;) &#125;&#125;&quot; repo: github: git@github.com:wangruofeng/wangruofeng.github.io.git branch: master å¸¸ç”¨å‘½ä»¤1234567891011121314# å‘å¸ƒæ–°æ–‡ç« hexo new &quot;My New Post&quot;# é¢„è§ˆhexo s# ç”Ÿæˆæ–‡ä»¶åˆ° public ç›®å½•hexo g# å‘å¸ƒåˆ° Github Pageshexo d# æ¸…é™¤ç¼“å­˜hexo clean éœ€è¦æ³¨æ„ï¼Œå¦‚æœæ”¹äº†æ–‡ä»¶å‘å¸ƒçš„è¯ï¼Œè¦å…ˆ hexo g ï¼Œç„¶åå† hexo d ã€‚","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://blog.wangruofeng007.com/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.wangruofeng007.com/tags/Hexo/"}]},{"title":"ç‰©è”ç½‘é€šè®¯åè®®","slug":"ç‰©è”ç½‘é€šè®¯åè®®","date":"2024-02-24T04:16:29.000Z","updated":"2024-11-02T03:36:52.416Z","comments":true,"path":"2024/02/24/ç‰©è”ç½‘é€šè®¯åè®®/","permalink":"https://blog.wangruofeng007.com/2024/02/24/%E7%89%A9%E8%81%94%E7%BD%91%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE/","excerpt":"ç‰©è”ç½‘åè®®åˆ†ç±»ï¼š æ¥å…¥åè®®ã€é€šè®¯åè®® æ¥å…¥åè®®ï¼šä¸€èˆ¬è´Ÿè´£å­ç½‘å†…è®¾å¤‡é—´çš„ç»„ç½‘åŠé€šä¿¡ã€‚ é€šè®¯åè®®ï¼šä¸»è¦æ˜¯è¿è¡Œåœ¨ä¼ ç»Ÿäº’è”ç½‘TCP&#x2F;IPåè®®ä¹‹ä¸Šçš„è®¾å¤‡é€šè®¯åè®®ï¼Œè´Ÿè´£è®¾å¤‡é€šè¿‡äº’è”ç½‘è¿›è¡Œæ•°æ®äº¤æ¢åŠé€šä¿¡ã€‚","text":"ç‰©è”ç½‘åè®®åˆ†ç±»ï¼š æ¥å…¥åè®®ã€é€šè®¯åè®® æ¥å…¥åè®®ï¼šä¸€èˆ¬è´Ÿè´£å­ç½‘å†…è®¾å¤‡é—´çš„ç»„ç½‘åŠé€šä¿¡ã€‚ é€šè®¯åè®®ï¼šä¸»è¦æ˜¯è¿è¡Œåœ¨ä¼ ç»Ÿäº’è”ç½‘TCP&#x2F;IPåè®®ä¹‹ä¸Šçš„è®¾å¤‡é€šè®¯åè®®ï¼Œè´Ÿè´£è®¾å¤‡é€šè¿‡äº’è”ç½‘è¿›è¡Œæ•°æ®äº¤æ¢åŠé€šä¿¡ã€‚ ä¸€ã€ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚åè®®1. è¿œè·ç¦»èœ‚çªé€šè®¯ 2Gã€3Gã€4Gé€šè®¯åè®® NB-loT (Narrow Brand Internet of Things) çª„å¸¦ç‰©è”ç½‘ 5G 2. è¿œè·ç¦»éèœ‚çªé€šè®¯ WiFi ZigBee LoRaï¼ˆLongRangeï¼‰ 3. è¿‘è·ç¦»é€šè®¯ RFIDï¼ˆRadio Frequency Identificationï¼‰å°„é¢‘è¯†åˆ« NFC Bluetoothï¼ˆBLEï¼‰ UWB ï¼ˆUltra Widebandï¼‰æ— è½½æ³¢æ— çº¿é€šè®¯æŠ€æœ¯ 4. æœ‰çº¿é€šä¿¡ USBï¼ˆUniversal Series Busï¼‰é€šç”¨ä¸²è¡Œæ€»çº¿ ä¸²å£é€šè®¯åè®®ï¼ŒRS-232ã€RS-422 å’Œ RS-485 ä»¥å¤ªç½‘ MBusï¼ˆsymphonic mbusï¼‰è¿œç¨‹æŠ„è¡¨ç³»ç»Ÿ äºŒã€ç½‘ç»œå±‚ã€ä¼ è¾“åè®® IPv4 IPv6 TCPï¼ˆTransmission Control Protocolï¼‰ä¼ è¾“æ§åˆ¶åè®® 6LowPAN ä¸‰ã€åº”ç”¨å±‚åè®® MQTTï¼ˆMessage Queue Telemetry Transportï¼‰é¥æµ‹ä¼ è¾“åè®® CoAPï¼ˆConstrained Application Protocolï¼‰åè®® REST &#x2F; HTTPåè®® DDSï¼ˆData Distribution Serviceï¼‰åˆ†å¸ƒå¼å®æ—¶æ•°æ®åˆ†å‘æœåŠ¡ä¸­é—´ä»¶åè®® AMQPï¼ˆAdvanced Message Queuing Protocolï¼‰é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®® XMPPï¼ˆExtensible messaging and presence protocol åŸºäºXMLåè®®ï¼‰å¯æ‰©å±•é€šè®¯å’Œè¡¨ç¤ºåè®® å››ã€éƒ¨åˆ†åè®®æ¯”è¾ƒ1. NB-IoTåè®®å’ŒLoRaåè®®æ¯”è¾ƒç¬¬ä¸€ï¼Œé¢‘æ®µã€‚LoRa å·¥ä½œåœ¨ 1GHz ä»¥ä¸‹çš„éæˆæƒé¢‘æ®µï¼Œåœ¨åº”ç”¨æ—¶ä¸éœ€è¦é¢å¤–ä»˜è´¹ï¼ŒNB-IoT å’Œèœ‚çªé€šä¿¡ä½¿ç”¨ 1GHz ä»¥ä¸‹çš„é¢‘æ®µæ˜¯2113æˆæƒçš„ï¼Œæ˜¯éœ€è¦æ”¶è´¹çš„ã€‚ ç¬¬äºŒï¼Œç”µæ± ä¾›ç”µå¯¿å‘½ã€‚LoRaæ¨¡å—åœ¨å¤„ç†å¹²æ‰°ã€ç½‘ç»œ5261é‡è¿­ã€å¯ä¼¸ç¼©æ€§ç­‰æ–¹é¢å…·æœ‰ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œä½†å´ä¸èƒ½æä¾›åƒèœ‚çªåè®®ä¸€æ ·çš„æœåŠ¡è´¨é‡4102ã€‚NB-IoTå‡ºäºå¯¹æœåŠ¡è´¨é‡çš„è€ƒè™‘ï¼Œä¸èƒ½æä¾›ç±»ä¼¼LoRaä¸€æ ·çš„ç”µæ± å¯¿å‘½ã€‚ ç¬¬ä¸‰ï¼Œè®¾å¤‡æˆæœ¬ã€‚å¯¹ç»ˆç«¯èŠ‚ç‚¹æ¥è¯´ï¼ŒLoRaåè®®æ¯”NB-IoTæ›´ç®€å•ï¼Œæ›´å®¹æ˜“å¼€å‘å¹¶ä¸”1653å¯¹äºå¾®å¤„ç†å™¨çš„é€‚ç”¨å’Œå…¼å®¹æ€§æ›´å¥½ã€‚åŒæ—¶ä½æˆæœ¬ã€æŠ€æœ¯ç›¸å¯¹æˆç†Ÿçš„LoRaæ¨¡å—å·²ç»å¯ä»¥åœ¨å¸‚åœºä¸Šæ‰¾åˆ°äº†ï¼Œå¹¶ä¸”è¿˜ä¼šæœ‰å‡çº§ç‰ˆæœ¬é™†ç»­å‡ºæ¥ã€‚ ç¬¬å››ï¼Œç½‘ç»œè¦†ç›–å’Œéƒ¨ç½²æ—¶é—´è¡¨ã€‚NB-IoTæ ‡å‡†åœ¨2016å¹´å…¬å¸ƒï¼Œé™¤å›ç½‘ç»œéƒ¨ç½²ä¹‹å¤–ï¼Œç›¸åº”çš„å•†ä¸šåŒ–å’Œäº§ä¸šé“¾çš„å»ºç«‹è¿˜éœ€è¦æ›´é•¿çš„æ—¶é—´å’ŒåŠªåŠ›å»æ¢ç´¢ã€‚LoRaçš„æ•´ä¸ªäº§ä¸šé“¾ç›¸å¯¹å·²ç»è¾ƒä¸ºæˆç†Ÿäº†ï¼Œäº§å“ä¹Ÿå¤„äºâ€œè“„åŠ¿å¾…ç­”å‘â€çš„çŠ¶æ€ï¼ŒåŒæ—¶å…¨çƒå¾ˆå¤šå›½å®¶æ­£åœ¨è¿›è¡Œæˆ–è€…å·²ç»å®Œæˆäº†å…¨å›½æ€§çš„ç½‘ç»œéƒ¨ç½²ã€‚ 2. è“ç‰™ã€WiFiã€ZigBeeåè®®æ¯”è¾ƒç›®å‰æ¥è¯´ï¼ŒWiFiçš„ä¼˜åŠ¿æ˜¯åº”ç”¨å¹¿æ³›ï¼Œå·²ç»æ™®åŠåˆ°åƒå®¶ä¸‡æˆ·ï¼›ZigBeeçš„ä¼˜åŠ¿æ˜¯ä½åŠŸè€—å’Œè‡ªç»„ç½‘ï¼›UWBæ— è½½æ³¢æ— çº¿é€šä¿¡æŠ€æœ¯çš„ä¼˜åŠ¿æ˜¯ä¼ è¾“é€Ÿç‡ï¼›è“ç‰™çš„ä¼˜åŠ¿ç»„ç½‘ç®€å•ã€‚ç„¶è€Œï¼Œè¿™3ç§æŠ€æœ¯ï¼Œä¹Ÿéƒ½æœ‰å„è‡ªçš„ä¸è¶³ï¼Œæ²¡æœ‰ä¸€ç§æŠ€æœ¯èƒ½å®Œå…¨æ»¡è¶³æ™ºèƒ½å®¶å±…çš„å…¨éƒ¨è¦æ±‚ã€‚ è“ç‰™æŠ€æœ¯çš„å‡ºç°ä½¿å¾—çŸ­è·ç¦»æ— çº¿é€šä¿¡æˆä¸ºå¯èƒ½ï¼Œä½†å…¶åè®®è¾ƒå¤æ‚ã€åŠŸè€—é«˜ã€æˆæœ¬é«˜ç­‰ç‰¹ç‚¹ä¸å¤ªé€‚ç”¨äºè¦æ±‚ä½æˆæœ¬ã€ä½åŠŸè€—çš„å·¥ä¸šæ§åˆ¶å’Œå®¶åº­ç½‘ç»œã€‚å°¤å…¶è“ç‰™æœ€å¤§çš„éšœç¢åœ¨äºä¼ è¾“èŒƒå›´å—é™ï¼Œä¸€èˆ¬æœ‰æ•ˆçš„èŒƒå›´åœ¨10ç±³å·¦å³ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›ä¸å¼ºã€ä¿¡æ¯å®‰å…¨é—®é¢˜ç­‰é—®é¢˜ä¹Ÿæ˜¯åˆ¶çº¦å…¶è¿›ä¸€æ­¥å‘å±•å’Œå¤§è§„æ¨¡åº”ç”¨çš„ä¸»è¦å› ç´ ã€‚ WiFiä¹Ÿæ˜¯æ˜¯ä¸€ç§çŸ­è·ç¦»æ— çº¿ä¼ è¾“æŠ€æœ¯ï¼Œå¯ä»¥éšæ—¶æ¥å…¥æ— çº¿ä¿¡å·ï¼Œç§»åŠ¨æ€§å¼ºï¼Œæ¯”è¾ƒé€‚åˆåœ¨åŠå…¬å®¤åŠå®¶åº­çš„ç¯å¢ƒä¸‹åº”ç”¨ã€‚å½“ç„¶WiFiä¹Ÿå­˜åœ¨ä¸€ä¸ªè‡´å‘½ç¼ºç‚¹ã€‚ç”±äºWiFié‡‡ç”¨çš„æ˜¯å°„é¢‘æŠ€æœ¯ï¼Œé€šè¿‡ç©ºæ°”å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä½¿ç”¨æ— çº¿ç”µæ³¢ä¼ è¾“æ•°æ®ä¿¡å·ï¼Œæ¯”è¾ƒå®¹æ˜“å—åˆ°å¤–ç•Œçš„å¹²æ‰°ã€‚ ZigBeeåˆ™æ˜¯å›½é™…é€šè¡Œçš„æ— çº¿é€šè®¯æŠ€æœ¯ï¼Œå®ƒçš„æ¯ä¸ªç½‘ç»œç«¯å£å¯ä»¥æœ€å¤šæ¥å…¥6.5ä¸‡å¤šä¸ªç«¯å£ï¼Œé€‚åˆå®¶å±…ã€å·¥ä¸šã€å†œä¸šç­‰å¤šä¸ªé¢†åŸŸä½¿ç”¨ï¼Œè€Œè“ç‰™å’ŒWiFiç½‘ç«¯åªèƒ½æ¥å…¥10ä¸ªç«¯å£ï¼Œæ˜¾ç„¶ä¸èƒ½é€‚åº”å®¶åº­éœ€è¦ã€‚ZigBeeè¿˜å…·æœ‰ä½åŠŸè€—å’Œä½æˆæœ¬ä¼˜åŠ¿ã€‚ 3. MQTTåè®®å’ŒCoAPåè®®æ¯”è¾ƒMQTTæ˜¯å¤šå¯¹å¤šé€šè®¯åè®®ç”¨äºåœ¨ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡ä¸­é—´ä»£ç†ä¼ é€æ¶ˆæ¯ï¼Œè§£è€¦ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ï¼Œé€šè¿‡ä½¿å¾—å®¢æˆ·ç«¯å‘å¸ƒï¼Œè®©ä»£ç†å†³å®šè·¯ç”±å¹¶ä¸”æ‹·è´æ¶ˆæ¯ã€‚è™½ç„¶MQTTæ”¯æŒä¸€äº›æŒä¹…åŒ–ï¼Œæœ€å¥½è¿˜æ˜¯ä½œä¸ºå®æ—¶æ•°æ®é€šè®¯æ€»çº¿ã€‚ CoAPä¸»è¦æ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹åè®®ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“çŠ¶æ€ä¿¡æ¯ã€‚è™½ç„¶æ”¯æŒè§‚å¯Ÿèµ„æºï¼ŒCoAPæœ€å¥½é€‚åˆçŠ¶æ€ä¼ è¾“æ¨¡å‹ï¼Œä¸æ˜¯å®Œå…¨åŸºäºäº‹ä»¶ã€‚ MQTTå®¢æˆ·ç«¯å»ºç«‹é•¿è¿æ¥TCPï¼Œè¿™é€šå¸¸è¡¨ç¤ºæ²¡æœ‰é—®é¢˜ï¼ŒCoAPå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨éƒ½å‘é€ä¸æ¥æ”¶UDPæ•°æ®åŒ…ï¼Œåœ¨NATç¯å¢ƒä¸­ï¼Œéš§é“æˆ–è€…ç«¯å£è½¬å‘å¯ä»¥ç”¨äºå…è®¸CoAPï¼Œæˆ–è€…åƒLWM2Mï¼Œè®¾å¤‡ä¹Ÿè®¸ä¼šå…ˆåˆå§‹åŒ–å‰ç«¯è¿æ¥ã€‚ MQTTä¸æä¾›æ”¯æŒæ¶ˆæ¯æ‰“ç±»å‹æ ‡è®°æˆ–è€…å…¶ä»–å…ƒæ•°æ®å¸®åŠ©å®¢æˆ·ç«¯ç†è§£ï¼ŒMQTTæ¶ˆæ¯å¯ç”¨äºä»»ä½•ç›®çš„ï¼Œä½†æ˜¯æ‰€æœ‰çš„å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“å‘ä¸Šçš„æ•°æ®æ ¼å¼ä»¥å…è®¸é€šè®¯ï¼ŒCoAPï¼Œç›¸ååœ°ï¼Œæä¾›å†…ç½®æ”¯æŒå†…å®¹åå•†ä¸å‘ç°ï¼Œå…è®¸è®¾å¤‡ç›¸äº’æ¢æµ‹ä»¥æ‰¾åˆ°äº¤æ¢æ•°æ®çš„æ–¹å¼ã€‚ ä¸¤ç§åè®®å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„å–å†³äºè‡ªå·±çš„åº”ç”¨ã€‚ å‚è€ƒ ã€çŸ¥è¯†åˆ†äº«ã€‘æ‚¨äº†è§£ç‰©è”ç½‘é€šä¿¡åè®®5Gã€NB-Iotã€LoRaã€ZigBeeã€NFCâ€¦â€¦.éƒ½æ˜¯å•¥å—ï¼Ÿ","categories":[],"tags":[{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%89%A9%E8%81%94%E7%BD%91/"}]},{"title":"å‡ åˆ†é’Ÿå†…æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒ","slug":"å‡ åˆ†é’Ÿå†…æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒ","date":"2023-07-31T15:04:59.000Z","updated":"2024-11-02T03:36:52.416Z","comments":true,"path":"2023/07/31/å‡ åˆ†é’Ÿå†…æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒ/","permalink":"https://blog.wangruofeng007.com/2023/07/31/%E5%87%A0%E5%88%86%E9%92%9F%E5%86%85%E6%9C%AC%E5%9C%B0%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAChatGPT%E7%8E%AF%E5%A2%83/","excerpt":"ç®€ä»‹ä½¿ç”¨Dockerè™šæ‹Ÿæœºï¼Œå‡ æ­¥åœ¨æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒï¼Œå…APIï¼Œå…ç¿»å¢™ï¼Œå³å¯ä½¿ç”¨çº¯æ­£OpenAIçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®Œå…¨å…è´¹ï¼","text":"ç®€ä»‹ä½¿ç”¨Dockerè™šæ‹Ÿæœºï¼Œå‡ æ­¥åœ¨æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒï¼Œå…APIï¼Œå…ç¿»å¢™ï¼Œå³å¯ä½¿ç”¨çº¯æ­£OpenAIçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®Œå…¨å…è´¹ï¼ æ­£æ–‡ä¸‹è½½å®‰è£…Dockerå®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://www.docker.com/ æ‹‰å–pandoraé•œåƒpandoraæºç åœ°å€ï¼šhttps://github.com/pengzhile/pandora å®‰è£…å¥½Dockeråï¼Œæ‰“å¼€Macç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ 1docker pull pengzhile/pandora å¯åŠ¨pandoraé•œåƒç­‰ä¸Šé¢é•œåƒä¸‹è½½å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ 1docker run -e PANDORA_CLOUD=cloud -e PANDORA_SERVER=0.0.0.0:8899 -p 8899:8899 -d pengzhile/pandora æˆåŠŸè¿è¡Œæ•ˆæœ è·å–AccessTokené€šè¿‡ç™»å½•OpenAIå®˜æ–¹APIï¼Œç™»å½•æˆåŠŸåï¼Œç„¶åè®¿é—® è¿™é‡Œ å³å¯æ‹¿åˆ°å®˜æ–¹çš„Access Tokenï¼ˆpsï¼šè¿™ä¸€æ­¥éœ€è¦ç¿»å¢™æ‰èƒ½å®Œæˆï¼‰ è·å–æˆåŠŸåæ•ˆæœå›¾ æ³¨æ„ï¼šTokenç›®å‰çœ‹æœ‰æ•ˆæœŸæ˜¯ä¸€ä¸ªæœˆï¼Œä¸€ä¸ªæœˆåéœ€è¦é‡æ–°è·å– è®¿é—®æœ¬åœ°é“¾æ¥http://127.0.0.1:8899 ä½¿ç”¨ä¸Šä¸€æ­¥è·å–çš„Access Tokenç™»å½•å³å¯ ç™»å½•æˆåŠŸåï¼Œå³å¯ä½¿ç”¨OpenAIçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®Œå…¨å…è´¹ï¼ğŸ‰ğŸ‰ğŸ‰","categories":[],"tags":[{"name":"ChatGPT, OpenAI, AIGC","slug":"ChatGPT-OpenAI-AIGC","permalink":"https://blog.wangruofeng007.com/tags/ChatGPT-OpenAI-AIGC/"}]},{"title":"Flutteræœ€ä½³å®è·µæ•´ç†","slug":"Flutteræœ€ä½³å®è·µæ•´ç†","date":"2021-03-28T04:10:21.000Z","updated":"2024-11-02T03:36:52.414Z","comments":true,"path":"2021/03/28/Flutteræœ€ä½³å®è·µæ•´ç†/","permalink":"https://blog.wangruofeng007.com/2021/03/28/Flutter%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%95%B4%E7%90%86/","excerpt":"","text":"Text ä»¥å­—ç¬¦çš„æ–¹å¼æˆªæ–­https://github.com/flutter/flutter/issues/52869 åœ¨flutterä¸­ï¼ŒTextæ§ä»¶é»˜è®¤çš„æº¢å‡ºæ˜¾ç¤ºæ¨¡å¼æ˜¯TextOverflow.fade ,å°±æ˜¯æ·¡å‡º åœ¨iOSæˆ–è€…Androidå¹³å°é»˜è®¤çš„æ–‡ä»¶æˆªæ–­æ¨¡å¼ä¸€èˆ¬æ˜¯â€¦çœç•¥ï¼Œflutteré‡Œé¢å¯¹åº”çš„æˆªæ–­æ¨¡å¼ä¸ºTextOverflow.ellipsis ,ä¸è¿‡è¿™é‡Œçš„æˆªæ–­æ˜¯è‹±æ–‡æŒ‰ç…§å•è¯æ¥çš„ï¼Œè¿™æ ·çš„æ¨¡å¼ä¼šå¯¼è‡´å¦‚æœæœ€åä¸€ä¸ªå•è¯å¾ˆé•¿æ—¶ï¼Œæˆªæ–­æ˜¾ç¤ºä¼šæ•´ç†çœç•¥è€Œä¸æ˜¯æœ€åè¶…å‡ºçš„å­—ç¬¦çœç•¥ï¼Œå¯¼è‡´æ¨¡å—å¯èƒ½æœ‰ä¸€å¤§å—ç©ºç™½ã€‚ Dartç³»ç»Ÿå®šä¹‰çš„æˆªæ–­æ¨¡å¼ 1234567891011121314151617/// How overflowing text should be handled.////// A [TextOverflow] can be passed to [Text] and [RichText] via their/// [Text.overflow] and [RichText.overflow] properties respectively.enum TextOverflow &#123; /// Clip the overflowing text to fix its container. clip, /// Fade the overflowing text to transparent. fade, /// Use an ellipsis to indicate that the text has overflowed. ellipsis, /// Render overflowing text outside of its container. visible,&#125; å¦‚ä½•è§£å†³è‹±æ–‡å•è¯è¢«æ•´ä½“æˆªæ–­å‘¢ï¼Ÿ å°†å•è¯çš„æ¯ä¸ªå­—ç¬¦åˆ‡å‰²å¼€ï¼Œæ’å…¥å®½åº¦0çš„å ä½å­—ç¬¦ï¼Œæ‰“ç ´ç³»ç»Ÿé»˜è®¤çš„æœºåˆ¶ï¼Œè¿™æ ·å°±å¯ä»¥ä»¥å­—ç¬¦ä¸ºå•ä½çœç•¥äº† éœ€è¦æ³¨æ„ã€‚è¿™ç§æ–¹å¼ç›¸å½“äºä¿®æ”¹äº†æ–‡æœ¬çš„å†…å®¹ï¼Œä¸€èˆ¬æ–‡æœ¬æœ€å¤§ä¸€è¡Œæ˜¾ç¤ºå¯ä»¥ç”¨ï¼Œå¦‚æœæ–‡æœ¬æ”¯æŒ2è¡Œä»¥åŠä»¥ä¸Šçš„æ˜¾ç¤ºçš„è¯ï¼Œå°†ä¼šå¯¼è‡´æ¢è¡Œä¸å†æŒ‰ç…§å­—ç¬¦è¿›è¡Œè€ŒæŒ‰ç…§å•è¯è¿›è¡Œ ä¸‹é¢æ˜¯Exampleå®ç° 123456789101112131415extension TextOverflowUtil on String &#123; /// å°†flutterç³»ç»Ÿé»˜è®¤çš„å•è¯æˆªæ–­æ¨¡å¼è½¬æ¢æˆå­—ç¬¦æˆªæ–­æ¨¡å¼ /// é€šè¿‡å‘æ–‡æœ¬ä¸­æ’å…¥å®½åº¦ä¸º0çš„ç©ºæ ¼å®ç° static String toCharacterBreakStr(String word) &#123; if (word == null || word.isEmpty) &#123; return word; &#125; String breakWord = &#x27;&#x27;; word.runes.forEach((element) &#123; breakWord += String.fromCharCode(element); breakWord += &#x27;\\u200B&#x27;; &#125;); return breakWord; &#125;&#125; æ–‡æœ¬åˆ’çº¿é€šè¿‡Textçš„decorationå±æ€§æ¥å®ç°åˆ’çº¿ TextDecoration.none æ²¡æœ‰ TextDecoration.underline ä¸‹åˆ’çº¿ TextDecoration.overline ä¸Šåˆ’çº¿ TextDecoration.lineThrough ä¸­é—´çš„çº¿ï¼ˆåˆ é™¤çº¿ï¼‰ &#x2F;&#x2F; åˆ’çº¿ç›¸å…³çš„å±æ€§è®¾ç½®decorationColor decorationåˆ’çº¿çš„é¢œè‰²decorationStyle decorationåˆ’çº¿çš„æ ·å¼ TextDecorationStyle.solid å®çº¿ TextDecorationStyle.double ç”»ä¸¤æ¡çº¿ TextDecorationStyle.dotted ç‚¹çº¿ï¼ˆä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„ï¼‰ TextDecorationStyle.dashed è™šçº¿ï¼ˆä¸€ä¸ªé•¿æ–¹å½¢ä¸€ä¸ªé•¿æ–¹å½¢çš„çº¿ï¼‰ TextDecorationStyle.wavy æ­£ç„æ›² æ•ˆæœå›¾å¦‚ä¸‹ VS Codeå®ç°ä¿å­˜æ—¶è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–VS Codeä¸­ä»£ç æ ¼å¼åŒ–é»˜è®¤å¿«æ·é”®ï¼šã€Shiftã€‘+ã€Altã€‘+ F å®ç°æ‰‹åŠ¨ä¿å­˜ï¼ˆCtril + Sï¼‰æ—¶è‡ªåŠ¨è§¦å‘ä»£ç æ ¼å¼åŒ–ï¼š 1ï¼‰Code â†’ Perference â†’ Settting ç‚¹å‡»å³ä¸Šè§’ï¼ˆOpen Setting(JSON) ï¼‰ 2ï¼‰åœ¨settings.jsonä¸‹çš„ã€å·¥ä½œåŒºè®¾ç½®ã€‘ä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼š 12&quot;editor.formatOnType&quot;: true,&quot;editor.formatOnSave&quot;: true è§£å†³ setState() called after diapose()ç½‘ç»œè¯·æ±‚æˆåŠŸå‰é€€å‡ºäº†é¡µé¢ï¼Œè¯¥ State è¢«ä»å¯¹è±¡æ ‘å¸è½½æ‰ï¼Œè€Œè¿™æ—¶å›è°ƒäº†ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­å¸¦æœ‰ setState çš„è°ƒç”¨ï¼Œä¹Ÿå°±å¯¼è‡´äº†è¯¥é—®é¢˜ã€‚ 12345if (mounted) &#123; setState(() &#123; this._books = dataModel.books; &#125;);&#125; Waiting for another flutter command to release the startup lockâ€¦ç­‰å¾…å¦ä¸€ä¸ªflutterå‘½ä»¤é‡Šæ”¾å¯åŠ¨é” é€€å‡º VS Codeã€‚ æ‰“å¼€ flutter å®‰è£…ç›®å½• å¦‚ï¼šâ€¦\\flutter\\flutter\\bin\\cache åˆ é™¤é‡Œé¢çš„ lockfileã€‚ é‡å¯æ‰“å¼€VS Codeã€‚ åŸå› ï¼šå½“ä½ çš„é¡¹ç›®å¼‚å¸¸å…³é—­ï¼Œä¸‹æ¬¡å¯åŠ¨å°±ä¼šå‡ºç°ä¸Šé¢çš„ä¸€è¡Œè¯ï¼Œæ­¤æ—¶éœ€è¦æ‰“å¼€ flutter&#x2F;bin&#x2F;cache&#x2F;lockfileï¼Œåˆ é™¤å°±è¡Œäº†ï¼Œæˆ–è€…ç›´æ¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼šrm .&#x2F;flutter&#x2F;bin&#x2F;cache&#x2F;lockfileã€‚ åœ¨Statelessæ§ä»¶å†…éƒ¨æˆ–è€…æµ®å±‚å†…éƒ¨åˆ·æ–°ï¼Œå¯ä»¥ä½¿ç”¨StatefullBuilder123456789101112131415161718192021222324showDialog&lt;void&gt;( context: context, builder: (BuildContext context) &#123; int selectedRadio = 0; return AlertDialog( content: StatefulBuilder( builder: (BuildContext context, StateSetter setState) &#123; return Column( mainAxisSize: MainAxisSize.min, children: List&lt;Widget&gt;.generate(4, (int index) &#123; return Radio&lt;int&gt;( value: index, groupValue: selectedRadio, onChanged: (int value) &#123; setState(() =&gt; selectedRadio = value); &#125;, ); &#125;), ); &#125;, ), ); &#125;,); è¿™é‡Œé€šè¿‡selectedRadioå˜é‡è®°å½•Radioçš„æ˜¯å¦é€‰ä¸­çš„çŠ¶æ€ å¹³å°ç›¸å…³çš„åˆ¤æ–­åªå…³å¿ƒæ˜¯å¦æ˜¯iOSå’ŒAndroidçš„æƒ…å†µä¸‹ä¸éœ€è¦ä¾èµ–contextï¼Œä¼˜å…ˆä½¿ç”¨Platform 12Platform.isAndroidPlatform.isIOS éœ€è¦è¯¦ç»†çŸ¥é“å…·ä½“å“ªä¸ªå¹³å°æ‰ä½¿ç”¨TargetPlatform è¿™ä¸ªAPIçš„ç¼ºç‚¹æ˜¯éœ€è¦ä¾èµ–contextè¿™ä¸ªå‚æ•° 1234567final platform = Theme.of(context).platform;if (platform == TargetPlatform.android) &#123; ...&#125; else if (platform == TargetPlatform.iOS) &#123; ...&#125; ScrollView æ»‘åŠ¨éšè—é”®ç›˜https://stackoverflow.com/questions/55306855/hide-keyboard-on-scroll-in-flutter ä½¿ç”¨ScrollViewçš„keyboardDismissBehaviorå±æ€§ 123ListView( keyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.onDrag) å›è°ƒå†™æ³•a.æ— å‚æ•°å›è°ƒVoidCallback b.æœ‰ä¸€ä¸ªå‚æ•°å›è°ƒValueChanged c.å‚æ•°å¤§äºä¸€ä¸ªå¯ä»¥é€šè¿‡typedefè‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•° ä¸‹é¢æ˜¯Exampleç”¨æ³• 123final VoidCallback onPressed;final ValueChanged&lt;T&gt; onSelectHandler;typedef ImageSwiperOnTap = void Function(int index, List&lt;String&gt; imgUrls); flutter pub get is stuckå¯ä»¥é€šè¿‡åˆ‡æ¢flutteré•œåƒåˆ°ä¸­æ–‡ç«™ç‚¹æ¥è§£å†³ ä½¿ç”¨ç³»ç»Ÿshellï¼Œè¯·ç¼–è¾‘ ä½¿ç”¨oh_my_zsh, éœ€è¦ç¼–è¾‘.zshrc 12export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn ä¿å­˜æ–‡ä»¶åï¼Œå…³é—­ï¼Œä¸‹æ¬¡é‡æ–°æ‰“å¼€ç»ˆç«¯ç”Ÿæ•ˆ å†æ‰§è¡Œflutter pub get æŸ¥çœ‹é€Ÿåº¦æ˜¯å¦æ­£å¸¸","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"Flutterç²¾åèµ„æ–™æ”¶é›†","slug":"flutterç²¾åèµ„æ–™æ”¶é›†","date":"2020-10-19T13:16:37.000Z","updated":"2024-11-02T03:36:52.415Z","comments":true,"path":"2020/10/19/flutterç²¾åèµ„æ–™æ”¶é›†/","permalink":"https://blog.wangruofeng007.com/2020/10/19/flutter%E7%B2%BE%E5%8D%8E%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/","excerpt":"","text":"è¯´æ˜æ­¤æ–‡ç”¨äºè®°å½•æ—¥å¸¸flutterå¼€å‘ä¸­ä½¿ç”¨åˆ°æˆ–è€…çœ‹åˆ°çš„ç²¾åæ–‡ç« æˆ–è€…èµ„æºï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜… æ–‡ç« Flutterè¿›é˜¶ è®©FlutterçœŸæ­£æ”¯æŒViewçº§åˆ«çš„æ··åˆå¼€å‘ Dart Souls -ã€ŠDart ä¹‹é­‚ã€‹ Flutterå®Œæ•´å¼€å‘å®æˆ˜è¯¦è§£ç³»åˆ— æ·±å…¥ç†è§£Flutter Platform Channel Flutter å¸ƒå±€æ§ä»¶å®Œç»“ç¯‡ è¶…è¯¦è§£æFlutteræ¸²æŸ“å¼•æ“|ä¸šåŠ¡æƒ³åˆ›æ–°ï¼Œä¸äº†è§£åº•å±‚åŸç†æ€ä¹ˆè¡Œï¼Ÿ â€“ from æ·˜ç³»æŠ€æœ¯ æ·±å…¥ç†è§£Flutterå¼•æ“çº¿ç¨‹æ¨¡å¼ Flutter çš„æ€§èƒ½åˆ†æã€å·¥ç¨‹æ¶æ„ä¸ç»†èŠ‚å¤„ç† â€“ fromæœ‰é“äº‘ Flutter å›¾ç‰‡æ§ä»¶é€‚é…ä¹‹è·¯ â€“ from ç½‘æ˜“äº‘éŸ³ä¹ ä¸šç•ŒåŠ¨æ€ Flutter åœ¨å“ˆå•°å‡ºè¡Œ B ç«¯åˆ›æ–°ä¸šåŠ¡çš„å®è·µ Flutteråœ¨PLUSä¸šåŠ¡ä¸­çš„æ¢ç´¢å’Œå®è·µ &quot;é›¶&quot;å­¦ä¹ æˆæœ¬ï¼šä½¿ç”¨ Web æ ‡å‡†å¼€å‘åŠ¨æ€åŒ– Flutter åº”ç”¨ äº¬ä¸œæŠ€æœ¯ä¸­å°çš„ Flutter å®è·µä¹‹è·¯ æ‰“ç ´é‡é‡é˜»ç¢ï¼ŒFlutter å’Œ Web ç”Ÿæ€å¦‚ä½•å¯¹æ¥ï¼Ÿ æ€§èƒ½ä¼˜åŒ– Flutteræ€§èƒ½ä¼˜åŒ–å®è·µ â€”â€” UIç¯‡ Flutter åŠ¨æ€ Dart: å¥å…¨çš„ç©ºå®‰å…¨æ¦‚è§ˆ æ·±å…¥ç†è§£ Dart ç©ºå®‰å…¨ nullsafety dartpad è§‚æ‘©ï¼Flutter 1.22 æ­£å¼å‘å¸ƒ ç½‘ç«™ Flutter å®˜ç½‘ Flutter ä¸­æ–‡ç½‘ Flutter ä¸­æ–‡å¼€å‘æ–‡æ¡£ Flutteræ•™ç¨‹ç½‘ è§†é¢‘ Introducing Widget of the Week! Flutter by Google AliFlutterç¬¬äºŒæœŸç›´æ’­å›æ”¾ é˜¿é‡Œå·´å·´é—²é±¼æŠ€æœ¯å›¢é˜Ÿå®¢æˆ·ç«¯è´Ÿè´£äººä¸€èµ·æ¢è®¨Flutterçš„è¡Œä¸šç°çŠ¶ä¸æœªæ¥ åšå®¢ å’¸é±¼æŠ€æœ¯ - Flutter Lokiçš„åšå®¢ â€” ç›®å‰å°±èŒäºåŒ—äº¬è…¾è®¯ï¼Œåšå®¢é‡Œé¢æœ‰å¾ˆflutteræ€»ç»“çš„æ–‡ç«  è€å­Ÿflutter â€” æ•´ç†äº†å‡ ä¹æ‰€æœ‰çš„widgetï¼ŒåŒ…å«ä½¿ç”¨çš„ä¾‹å­ï¼Œè¿˜æœ‰éƒ¨åˆ†å®æˆ˜é¡¹ç›® GuruMeditation â€” æœ‰ä¸€äº›å…³äºflutteræ¶æ„æ–¹é¢çš„æ–‡ç«  æ˜é‡‘åšä¸» Vadaski å¼ é£æ·ç‰¹çƒˆ YYDev è€å­ŸFlutter é—²é±¼æŠ€æœ¯ ç”µå­ä¹¦ Flutter å®æˆ˜ â€” æ¥è‡ªduwen æ˜¯dioã€flyã€dsBridgeç­‰å¤šä¸ªçŸ¥åå¼€æºé¡¹ç›®ä½œè€… å·¥å…· flutteråœ¨çº¿ç¼–è¾‘å·¥å…·CodePen Dart åœ¨çº¿ç¼–è¾‘å·¥å…· DartPad åœ¨çº¿JSON To Dart ä»£ç ç”Ÿæˆ Json to Dart built_value class converter 2020å¹´20ä¸ªFlutteræœ€æ¼‚äº®çš„UIåº“å’Œé¡¹ç›® ä¼˜ç§€é¡¹ç›® &amp; App GSYGithubAppFlutter â€” å¤§å‹flutteré¡¹ç›®ï¼Œ Star 10.8k Developer_quest â€” Google å®˜æ–¹æ¼”ç¤ºæ¸¸æˆDemoï¼ŒStar 2.6k Flutter Go â€” Aliå¼€å‘çš„flutterç»„ä»¶demoæ¼”ç¤ºå’Œæ–°é—»èµ„è®¯ Flutter Samples â€” Flutter å®˜æ–¹ Demoï¼ŒStar 7.3k awesome-flutter â€” Flutter ç›¸å…³çš„èµ„æ–™é›†åˆï¼ŒStar 28.3k Flutter-Notebook â€” FlutterDemoåˆé›†, Star 5.7k FlutterUnit â€” ç»„ä»¶æ¼”ç¤ºé¡¹ç›®ï¼Œ Star 1.8k flutter-samples â€” Flutter æ¼”ç¤ºé¡¹ç›®ï¼Œå¾ˆå¤šåŠ¨ç”»æ•ˆæœ , Star 1.5k flutter_deer â€” Flutter ç»ƒæ‰‹é¡¹ç›® ,åŠŸèƒ½å¾ˆä¸°å¯Œï¼Œ Star 4.1k FlutterExampleApps â€” Flutter ç¤ºä¾‹Appï¼ŒåŒ…å«å¸¸è§æµè¡Œä½œå“ï¼ˆWhatsAppï¼ŒInstagramç­‰ï¼‰, Star 13.8k PPT AliFlutterå›¾ç‰‡è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ– UC FlutteræŠ€æœ¯å®è·µåˆ†äº«","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"flutter","slug":"flutter","permalink":"https://blog.wangruofeng007.com/tags/flutter/"}]},{"title":"Flutter å¼€å‘Tips ï¼ˆç¬¬äºŒæœŸï¼‰","slug":"Flutter-å¼€å‘Tips-ï¼ˆç¬¬äºŒæœŸï¼‰","date":"2020-09-16T18:51:21.000Z","updated":"2024-11-02T03:36:52.414Z","comments":true,"path":"2020/09/17/Flutter-å¼€å‘Tips-ï¼ˆç¬¬äºŒæœŸï¼‰/","permalink":"https://blog.wangruofeng007.com/2020/09/17/Flutter-%E5%BC%80%E5%8F%91Tips-%EF%BC%88%E7%AC%AC%E4%BA%8C%E6%9C%9F%EF%BC%89/","excerpt":"","text":"æé«˜flutter attachçš„æˆåŠŸç‡æ–¹æ¡ˆ1æ–­å¼€wifiï¼Œæ‰§è¡Œflutter attachï¼ŒattachæˆåŠŸåå†é“¾æ¥wifi æ–¹æ¡ˆ2é€šè¿‡æŒ‡å®šè®¾å¤‡uuidè¿›è¡Œattach é€šè¿‡flutter devicesæŸ¥æ‰¾å·²é“¾æ¥è®¾å¤‡åˆ—è¡¨ï¼Œè·å–é“¾æ¥è®¾å¤‡çš„uuid flutter attach -d &lt;#uuid#&gt; æŒ‡å®šæƒ³è¦attachçš„è®¾å¤‡è¿›è¡Œè¿æ¥ï¼Œä¾‹å¦‚flutter attach -d AE5D772C-6D56-43AD-83F2-0554257B16C4 æ–¹æ¡ˆ3é€šè¿‡æŒ‡å®šåº”ç”¨çš„app-idè¿›è¡Œattach åŒä¸€wifiç¯å¢ƒä¸‹å¦‚æœæœ‰å¤šå°ç›¸åŒé¡¹ç›®è®¾å¤‡è¿æ¥ä¸­ï¼Œæ‰¾åˆ°ä½ éœ€è¦attachçš„app-idè¿›è¡Œè¿æ¥ æ‰§è¡Œï¼šflutter attach --app-id &lt;#app_id#&gt; ä¾‹å¦‚ï¼šflutter attach --app-id com.xxx.xxx ä»packageä¸­åŠ è½½jsonæ–‡ä»¶èƒŒæ™¯ä¾‹å¦‚æˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªflutterçš„demoé¡¹ç›®å«flutter_demo_package_json_loadï¼Œåœ¨æ ¹ç›®å½•é€šè¿‡å‘½ä»¤ï¼šflutter create --template=package json_test_package,åˆ›å»ºäº†ä¸€ä¸ªåä¸ºjson_test_packageçš„packageï¼Œåœ¨packageçš„assetsä¸­æœ‰ä¸€ä¸ªä¸ºtest2.jsonæ–‡ä»¶ï¼Œç°åœ¨éœ€è¦åœ¨packageä¸­åŠ è½½åˆ°æ”¹æ–‡ä»¶ã€‚ ä»å·¥ç¨‹åŠ è½½jsonå¯¹äºæ™®é€šé¡¹ç›®çš„jsonæ–‡ä»¶ï¼ŒåŠ è½½æ–¹å¼å¦‚ä¸‹ï¼š åœ¨é¡¹ç›®ä¸­æ·»åŠ jsonæ–‡ä»¶ï¼Œä¾‹å¦‚é¡¹ç›®çš„assetsä¸‹æœ‰ä¸€ä¸ªåä¸ºtest1.jsonçš„æ–‡ä»¶ æˆ‘ä»¬åœ¨yamlä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ– 12345678# åªåŠ è½½assetsä¸‹çš„test1.jsonæ–‡ä»¶assets: - assets/test1.json# æˆ–è€…# åŠ è½½assetsä¸‹çš„æ‰€æœ‰æ–‡ä»¶ assets: - assets/ é€šè¿‡rootBundleåŠ è½½ 1234Future&lt;String&gt; _loadFromProjectAsset() async &#123; // json file in project,is ok return rootBundle.loadString(&quot;assets/test1.json&quot;);&#125; ä½†æ˜¯å¯¹äºpackageä¸‹é¢jsonæ–‡ä»¶ä¸Šé¢çš„æ–¹æ³•å¤±æ•ˆäº†ï¼Œä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•åŠ è½½å°†ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š é”™è¯¯åŸå› æ˜¯èµ„æºè·¯å¾„ä¸å¯¹ï¼ŒåŠ è½½ä¸åˆ°ï¼Œå› ä¸ºrootBundleç±»æ²¡æœ‰æä¾›package nameçš„å‚æ•°ï¼Œæˆ‘ä»¬åªèƒ½æŠŠpackage nameä¿¡æ¯æ”¾åœ¨èµ„æºè·¯å¾„é‡Œé¢ã€‚ ä»packageåŠ è½½jsonçµæ„Ÿæ¥è‡ªhttps://pub.dev/packages/lottieåº“çš„`Lottie.asset(â€œassetsPathâ€,package: â€œpackage_nameâ€)&#96;æ–¹æ³•ï¼Œå› ä¸ºlottieå®ç°åŠ¨ç”»çš„åŸç†ä¹Ÿæ˜¯åŠ è½½ä¸€ä»½jsoné…ç½®ï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ³•æ”¯æŒæŒ‡å®špackageé…ç½®ã€‚ è¿™é‡Œçš„keyNameå°±æ˜¯æˆ‘ä»¬rootBundleç±»é‡Œé¢éœ€è¦ç”¨çš„èµ„æºè·¯å¾„ï¼ŒåŒ…å«å¸¦packageçš„æƒ…å†µã€‚ æ­£ç¡®çš„æ–¹å¼å¦‚ä¸‹ï¼š ç¬¬ä¸€æ­¥å’Œä¸Šé¢ä¸€æ ·ï¼Œå°†jsonæ–‡ä»¶æ·»åŠ åˆ°å·¥ç¨‹ä¸­ï¼Œå‡å¦‚è¿™é‡Œæˆ‘ä»¬packageé‡Œé¢çš„jsonæ–‡ä»¶åä¸ºtest2.json åœ¨yamlä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–12345678# åªåŠ è½½assetsä¸‹çš„test2.jsonæ–‡ä»¶assets: - assets/test2.json# æˆ–è€…# åŠ è½½assetsä¸‹çš„æ‰€æœ‰æ–‡ä»¶assets: - assets/ é€šè¿‡rootBundleåŠ è½½ï¼Œä½†æ˜¯pathçš„æ ¼å¼ä¸º packages/&lt;#package_name#&gt;/&lt;#file_path#&gt; è¿™é‡Œä¸º 123456// json file in package,this is workFuture&lt;String&gt; _loadFromPackageAsset() async &#123; // ã€importanceã€‘ packag json file need use this formate: // `packages/$package/$assetName` return rootBundle.loadString(&quot;packages/json_test_package/assets/test2.json&quot;);&#125; é€šè¿‡DefaultAssetBundleä¹Ÿæ˜¯ä¸€æ ·å¯ä»¥ 1234567// This is work too.Future&lt;String&gt; testLoadJsonFileByDefaultAssetBundle(BuildContext context) &#123; // ã€importanceã€‘ packag json file need use this formate: // `packages/$package/$assetName` return DefaultAssetBundle.of(context) .loadString(&#x27;packages/json_test_package/assets/test2.json&#x27;);&#125; Demoé“¾æ¥ flutter analyseé…ç½®æ­¥éª¤ åœ¨é¡¹ç›®æ›´ç›®å½•æ·»åŠ analysis_options.yamlæ–‡ä»¶å¯ä»¥é…ç½®lintè§„åˆ™å’Œanalyzerè¡Œä¸º å…·ä½“æ”¯æŒçš„lintè§„åˆ™å‚è€ƒhttps://dart-lang.github.io/linter/lints/ ç›®å‰æœ‰3ç±»å·²ç»å®šä¹‰çš„å¸¸ç”¨è§„åˆ™ Many lints are included in various predefined rulesets: pedantic for rules enforced internally at Google effective_dart for rules corresponding to the Effective Dart style guide flutter for rules used in flutter analyze æ¨èä½¿ç”¨googleå›¢é˜Ÿå†…éƒ¨çš„è§„åˆ™åº“pedantic åœ¨yamlé‡Œé¢æ·»åŠ ä¾èµ– pedantic: ^1.8.0+1 åœ¨analysis_options.yamlé‡Œé¢å¼•å…¥ä½¿ç”¨ include: package:pedantic/analysis_options.1.8.0.yaml ä½¿ç”¨é…ç½®å¥½analysis_options.yamlæ–‡ä»¶çš„è§„åˆ™å,æ‰§è¡Œflutter analyseå‘½ä»¤å°†å¯¹ä½ æ•´ä¸ªé¡¹ç›®æˆ–è€…packageçš„ä»£ç è¿›è¡Œé™æ€åˆ†æ ä¿®å¤ æ ¹æ®æç¤ºä¿®å¤ ç‚¹å‡»æç¤ºçš„è§„åˆ™ï¼Œå°±ä¼šè·³è½¬åˆ°éœ€è¦ä¿®å¤ä½ç½®ï¼ŒæŒ‰ç…§lintè§„åˆ™çš„è¯´æ˜å’Œä¾‹å­å°±å¯ä»¥ä¿®æ­£äº†ã€‚ åˆ©ç”¨VSCodeå¿«é€Ÿä¿®å¤ åœ¨æç¤ºæœ‰é—®é¢˜çš„ä»£ç çš„åœ°æ–¹Ctrl +., å°±ä¼šè‡ªåŠ¨å¼¹å‡ºå¿«é€Ÿä¿®å¤ï¼Œæ¯”å¦‚å›¾ä¸­ä¸ºå¢åŠ constæ ‡è¯†ã€‚ æ˜¯ä¸æ˜¯å¿«å¤šäº†ã€‚ å‚è€ƒé…ç½®å½“ç„¶ä½ è¿˜å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å®šåˆ¶è‡ªå·±çš„é™æ€åˆ†æè§„åˆ™ï¼Œä¸‹é¢æ˜¯æœ€è¿‘ä½¿ç”¨çš„ä¸€å¥—é…ç½®ï¼Œä»…ä¾›ä½ å‚è€ƒï¼š analysis_options.yamlå‚è€ƒé…ç½® dartfmt å‘½ä»¤ dartfmt ./ -w é™æ€åˆ†æä»£ç ï¼Œå¹¶å°è¯•è‡ªåŠ¨ä¿®å¤ dartfmt ./ -n é™æ€åˆ†æä»£ç ï¼Œä¸ä¼šä¿®å¤ä»£ç  DevToolä»‹ç»flutteræä¾›äº†ä¸€ä¸ªdevToolç³»åˆ—å·¥å…·ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œè°ƒè¯•ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼Œç½‘ç»œè¯·æ±‚ï¼Œæ€§èƒ½ç­‰ä¿¡æ¯ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚è€ƒDevTools Install DevTools Install from command line Install and run DevTools from Android Studio Install from VS Code Launch the DevTools application serverå¯åŠ¨æœ¬åœ°webæœåŠ¡ 1pub global run devtools # If you have `pub` on your path. or 1flutter pub global run devtools # If you have `flutter` on your path. åœ¨å‘½ä»¤è¡Œï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢è¾“å‡ºï¼Œè¡¨æ˜æœåŠ¡å¯åŠ¨æˆåŠŸ 1Serving DevTools at http://127.0.0.1:9100 Start an application to debugè¿è¡Œapp 12cd path/to/flutter/appflutter run ä¸€æ—¦ä½ æˆåŠŸè¿è¡Œèµ·æ¥ä½ çš„appï¼Œä½ å°†åœ¨ç»ˆç«¯æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹ç±»ä¼¼çš„ä¿¡æ¯ ç”¨æµè§ˆå™¨æ‰“å¼€é‡Œé¢çš„åœ°å€ï¼Œæ ¼å¼å¦‚ä¸‹ http://127.0.0.1:59681/fVO-_3yziG8=/ æ‰“å¼€å°†ä¼šçœ‹åˆ°ä¸‹é¢çš„è°ƒè¯•é¢æ¿ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œè°ƒè¯• è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œã€debugã€‘ æ‰“å¼€é¡µé¢å¯ä»¥æŸ¥çœ‹æ–­ç‚¹çš„å¸§å’Œæ§åˆ¶å°çš„æ—¥å¿—ã€‚ Open DevTools and connect to the target appä¸€æ—¦å·¥ç¨‹è¿è¡Œèµ·æ¥äº†ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:9100ï¼Œæ‰“å¼€DevToolså®Œæ•´ç‰ˆæœ¬ è¾“å…¥ä¸Šé¢çš„åœ°å€ï¼Œç‚¹å‡»Connectï¼Œè·³è½¬åˆ°å®Œæ•´devTools è¿™é‡Œçš„åŠŸèƒ½éå¸¸å¼ºå¤§å’Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ flutter è°ƒè¯•è¿™é‡Œä»¥VSCodeä¸ºä¾‹ çº¯flutteré¡¹ç›®çº¯flutteré¡¹ç›®æ¯”è¾ƒç®€å•ï¼ŒVSCodeæ”¯æŒå„ç§devtoolï¼Œä½¿ç”¨debugæ¨¡å¼è¿è¡Œappï¼Œæˆ–è€…ç›´æ¥æŒ‰F5 è¿è¡ŒæˆåŠŸåä¼šå‡ºç°ä¸€ä¸‹å·¥å…·æ¡ æ§åˆ¶å°è¾“å‡ºä»¥ä¸‹å†…å®¹ ä¾‹å¦‚è¿™é‡Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶107è¡Œç›´æ¥ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œä»£ç æ‰§è¡Œåˆ°æ—¶ä¼šè§¦å‘æ–­ç‚¹ æ­¤æ—¶å·¥å…·æ å˜æˆä¸‹é¢çš„æ ·å¼ å¯ä»¥é€šè¿‡ç›¸å…³çš„æŒ‰é’®è¿›è¡Œæ–­ç‚¹è°ƒè¯• æ··åˆé¡¹ç›®(åŸç”Ÿ+flutter) æ‰“å¼€å·²ç»ç¼–è¯‘è¿è¡Œè¿‡çš„åŸç”Ÿç«¯App é€šè¿‡VSCodeæ‰“å¼€å£³å·¥ç¨‹ï¼Œè¿›å…¥å£³å·¥ç¨‹æ ¹ç›®å½• é€‰æ‹©main.dartæ–‡ä»¶ æ‰§è¡Œcmd+shift+p,å‘¼å‡ºVSCodeå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥&gt;attach to flutter onDevice é€‰æ‹©ä¸‹é¢çš„å¯¹åº”çš„å‘½ä»¤æ‰§è¡Œ å¦‚æœattachä¸ä¸Šè¯·æ–­å¼€wifié‡è¯• Attach æˆåŠŸçš„è¯ä¼šæ˜¾ç¤ºä¸‹é¢ä¸€æ¡æ‚¬æµ®å·¥å…·æ å’Œçº¯flutterç›¸æ¯”é‡Œé¢å¤šäº†ä¸€ä¸ªç±»ä¼¼æ’å¤´çš„æŒ‰é’® Debug Consoleæ§åˆ¶å°ä¹Ÿä¼šè¾“å‡ºä¸‹é¢ä¿¡æ¯ å‰©ä¸‹çš„è°ƒè¯•å’Œä¸Šé¢DevToolä»‹ç»çš„æµç¨‹ä¸€è‡´ åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢å¯ä»¥ç›´æ¥å¯¹å¼•ç”¨åˆ°çš„ä»£ç è¿›è¡Œæ–­ç‚¹è°ƒè¯• å‚è€ƒ analyzer dartfmt Flutter Analysis Options Customizing static analysis How to access assets in package DevTools","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"Flutter å¼€å‘Tips ï¼ˆç¬¬ä¸€æœŸï¼‰","slug":"Flutter-å¼€å‘Tips-ï¼ˆç¬¬ä¸€æœŸï¼‰","date":"2020-09-06T17:00:18.000Z","updated":"2024-11-02T03:36:52.413Z","comments":true,"path":"2020/09/07/Flutter-å¼€å‘Tips-ï¼ˆç¬¬ä¸€æœŸï¼‰/","permalink":"https://blog.wangruofeng007.com/2020/09/07/Flutter-%E5%BC%80%E5%8F%91Tips-%EF%BC%88%E7%AC%AC%E4%B8%80%E6%9C%9F%EF%BC%89/","excerpt":"","text":"â€¦å»¶å±•æ“ä½œç¬¦(...)å¯ä»¥å¯¹æ•°ç»„æˆ–è€…å­—å…¸è¿›è¡Œæ“ä½œ 12345678910111213141516171819202122// åˆå¹¶æ•°ç»„test1() &#123; var list = [1, 2, 3]; var list2 = [0, ...list, 4]; print(list2); // [0, 1, 2, 3, 4]&#125;// åˆå¹¶å­—å…¸test2() &#123; var map1 = &#123; &quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;, &#125;; var map2 = &#123; &quot;key3&quot;: &quot;value3&quot;, &quot;key4&quot;: &quot;value4&quot;, &#125;; var map3 = &#123;...map1, ...map2&#125;; print(map3); // &#123;key1: value1, key2: value2, key3: value3, key4: value4&#125;&#125; for ()â€¦[]åˆå¹¶widgetsåˆ°é›†åˆä¸­ï¼Œä½¿ç”¨for ()...[]èŒƒå¼ï¼Œä½¿ç”¨å»¶å±•æ“ä½œç¬¦(...)æ¥åˆå¹¶ä¸€ä¸ªæ•°ç»„çš„widgetsåˆ°ä¸€ä¸ªå­˜åœ¨çš„é›†åˆä¸­ã€‚ä¾‹å¦‚åœ¨æ„é€ Rowæˆ–è€…Columnçš„childrenæ—¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334List&lt;Food&gt; foods = [ Food(name: &#x27;apple&#x27;, isVegetarian: true), Food(name: &#x27;nuts&#x27;, isVegetarian: true), Food(name: &#x27;eggs&#x27;, isVegetarian: true), Food(name: &#x27;chicken&#x27;, isVegetarian: false),];class Food &#123; Food(&#123; this.name, this.isVegetarian, &#125;); String name; bool isVegetarian;&#125;class HomePage extends StatelessWidget &#123; const HomePage(&#123;Key key&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return Container( child: Column( children: [ Container(), for (final food in foods) ...[ if (food.isVegetarian) ListTile(title: Text(food.name)), SizedBox(height: 50.0), ], ], ), ); &#125; () {} ()ç«‹å³æ‰§è¡Œä¸€ä¸ªåŒ¿åå‡½æ•°ï¼š() &#123;&#125; (),ç›¸å½“äºå£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°å¹¶ä¸”é‡Œé¢æ‰§è¡Œï¼Œè¿™ç§èŒƒå¼åœ¨å¤„ç†ä¸€ä¸ªwidgetå¯èƒ½æœ‰å¤šç§è¾“å‡ºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚è€Œä¸æ˜¯ä½¿ç”¨é•¶åµŒçš„ä¸‰ç›®è¿ç®—ç¬¦æˆ–è€…é€šè¿‡ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œè¿™ä¸ªä»£ç è·Ÿå†…è”ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š 123456789101112131415161718192021T getRandomElement&lt;T&gt;(List&lt;T&gt; list) =&gt; list[Random().nextInt(list.length)];Column( children: [ Container( color: () &#123; switch (getRandomElement(foods).name) &#123; case &#x27;apple&#x27;: return Colors.green; case &#x27;nuts&#x27;: return Colors.brown; case &#x27;eggs&#x27;: return Colors.yellow; default: return Colors.transparent; &#125; &#125;(), child: Text(&#x27;Food of the Day&#x27;), ), ], ) ä»£ç é™æ€åˆ†æåœ¨æäº¤ä»£ç æ—¶ä¸ºäº†æé«˜ä»£ç è´¨é‡ï¼Œä¿æŒå›¢é˜Ÿçš„ä»£ç é£æ ¼ä¸€è‡´ï¼Œéœ€è¦è¿›è¡Œä»£ç é™æ€åˆ†æï¼Œä¸€èˆ¬é€šè¿‡ä¸‹é¢2ç§æ–¹æ³•æ¥è¿›è¡Œ flutter analyzeä½¿ç”¨flutter analyzeè¿›è¡Œä»£ç é™æ€åˆ†æ,æ­¤å‘½ä»¤ä¼šæ ¹æ®analysis_options.yamlå®šä¹‰çš„è§„åˆ™è¿›è¡Œé™æ€åˆ†æ dartfmtä½¿ç”¨dartfmt ./ -wå¯¹å½“å‰ç›®å½•ä»¥åŠå­ç›®å½•çš„dartä»£ç è¿›è¡Œä»£ç ,-wé€‰é¡¹ä¼šè‡ªåŠ¨é‡å†™æ–‡ä»¶ä½¿å…¶ç¬¦åˆè§„èŒƒã€‚ ä½¿ç”¨dartfmt ./ -næ˜¾ç¤ºå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•çš„dartä»£ç æ ¼å¼å¯ä»¥ä¿®æ”¹çš„æ–‡ä»¶ä½†æ˜¯ä¸åšä¿®æ”¹ï¼Œå¯ä»¥é…åˆciåˆ†æä»£ç æ ¼å¼é—®é¢˜ã€‚ æ›´å¤šé€‰é¡¹è¯·ä½¿ç”¨dartfmt --helpæŸ¥çœ‹ Push &amp; present &amp; Pop1234567891011121314151617// Push by routeNavigator.pushNamed(context, &#x27;/b&#x27;) // push Navigator.of(context).push(MaterialPageRoute(builder: (BuildContext context) =&gt; MyPage()));// presentNavigator.of(context).push(MaterialPageRoute(builder: (BuildContext context) =&gt; MyPage(),fullscreenDialog: true));// popNavigator.pop(context) // pop + pushNavigator.of(context) ..pop() ..pop() ..pushNamed(&#x27;/settings&#x27;); API 123456789// pushFuture push(BuildContext context, Route route)// popbool pop(BuildContext context, [ result ]) // ä¸‹é¢ä¸¤ç§æ˜¯ç­‰æ•ˆçš„Navigator.push(BuildContext context, Route route)Navigator.of(context).push(Route route) è·å–widgetçš„ä½ç½®å’Œå®½é«˜123final RenderBox box = keyContext.findRenderObject();final size = box.size;final topLeftPosition = box.localToGlobal(Offset.zero); See more How to get a height of a Widget? Flutter : Widget Size and Position Model To JSONjson_serializable å¼•å…¥ 12345678dependencies: # Your other regular dependencies here json_annotation: ^2.0.0dev_dependencies: # Your other dev_dependencies here build_runner: ^1.0.0 json_serializable: ^2.0.0 ä½¿ç”¨ 1234567891011121314151617import &#x27;package:json_annotation/json_annotation.dart&#x27;;// user.g.dart å°†åœ¨æˆ‘ä»¬è¿è¡Œç”Ÿæˆå‘½ä»¤åè‡ªåŠ¨ç”Ÿæˆpart &#x27;user.g.dart&#x27;;///è¿™ä¸ªæ ‡æ³¨æ˜¯å‘Šè¯‰ç”Ÿæˆå™¨ï¼Œè¿™ä¸ªç±»æ˜¯éœ€è¦ç”ŸæˆModelç±»çš„@JsonSerializable()class User&#123; User(this.name, this.email); String name; String email; //ä¸åŒçš„ç±»ä½¿ç”¨ä¸åŒçš„mixinå³å¯ factory User.fromJson(Map&lt;String, dynamic&gt; json) =&gt; _$UserFromJson(json); Map&lt;String, dynamic&gt; toJson() =&gt; _$UserToJson(this);&#125; å•æ¬¡è§£æï¼šflutter packages pub run build_runner build æŒç»­é›†æˆï¼šflutter packages pub run build_runner watch json_serializable åœ¨çº¿jsonè½¬dart modelå·¥å…· Built value åœ¨çº¿jsonè½¬build value æ¨¡æ¿å·¥å…· https://charafau.github.io/json2builtvalue/ VSCode built value æ’ä»¶ Sample code 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// interface modelimport &#x27;package:built_value/built_value.dart&#x27;;part &#x27;user.g.dart&#x27;;abstract class User implements Built&lt;User, UserBuilder&gt; &#123; String get name; @nullable String get nickname; User._(); factory User([updates(UserBuilder b)]) = _$User;&#125;// initvar user1 = new User((b) =&gt; b ..name = &#x27;John Smith&#x27; ..nickname = &#x27;Joe&#x27;);// updatevar user2 = user.rebuild((b) =&gt; b ..nickname = &#x27;Jojo&#x27;);// updatevar updatedStructuredData = structuredData.rebuild((b) =&gt; b ..user.update((b) =&gt; b ..name = &#x27;Johnathan Smith&#x27;) ..credentials.phone.update((b) =&gt; b ..country = Country.switzerland ..number = &#x27;555 01234 555&#x27;));// nested buildersabstract class Node implements Built&lt;Node, NodeBuilder&gt; &#123; @nullable String get label; @nullable Node get left; @nullable Node get right; Node._(); factory Node([updates(NodeBuilder b)]) = _$Node;&#125;// new or updatevar node = new Node((b) =&gt; b ..left.left.left.right.left.right.label = &#x27;Iâ€™m a leaf!&#x27; ..left.left.right.right.label = &#x27;Iâ€™m also a leaf!&#x27;);var updatedNode = node.rebuild((b) =&gt; b ..left.left.right.right.label = &#x27;Iâ€™m not a leaf any more!&#x27; ..left.left.right.right.right.label = &#x27;Iâ€™m the leaf now!&#x27;); å‚è€ƒ 3 cool Dart patterns built_collection - pub.dev Dartâ€™s built_collection for Immutable Collections dartfmt Customizing static analysis","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"å¼€å‘Flutteræœ‰å“ªäº›å¥½ç”¨çš„VSCodeæ’ä»¶","slug":"å¼€å‘Flutteræœ‰å“ªäº›å¥½ç”¨çš„VSCodeæ’ä»¶","date":"2020-07-31T15:18:49.000Z","updated":"2024-11-02T03:36:52.416Z","comments":true,"path":"2020/07/31/å¼€å‘Flutteræœ‰å“ªäº›å¥½ç”¨çš„VSCodeæ’ä»¶/","permalink":"https://blog.wangruofeng007.com/2020/07/31/%E5%BC%80%E5%8F%91Flutter%E6%9C%89%E5%93%AA%E4%BA%9B%E5%A5%BD%E7%94%A8%E7%9A%84VSCode%E6%8F%92%E4%BB%B6/","excerpt":"","text":"ç®€ä»‹è¿™é‡Œæ•´ç†äº†æ—¥å¸¸ä½¿ç”¨vscodeå¼€å‘flutterç›¸å…³çš„æ’ä»¶ï¼Œä¹Ÿæœ‰éƒ¨åˆ†é€šç”¨ç±»å‹çš„æ’ä»¶ Flutter &amp; Dartè¿™2ä¸ªæ˜¯flutterå®˜æ–¹æ’ä»¶ï¼Œå¼€å‘flutterè£…æœºå¿…å¤‡ï¼Œä¸ç”¨å¤šè¯´ã€‚ Awesome Flutter Snippets Awesome Flutter Snippets is a collection snippets and shortcuts for commonly used Flutter functions and classes è¿™é‡Œé¢åŒ…å«Flutterä¸­éå¸¸å¸¸ç”¨çš„ä»£ç ç‰‡æ®µ Bracket Pair Colorizer 2 A customizable extension for colorizing matching brackets è¿™ä¸ªæ’ä»¶å¯ä»¥ä½¿æˆå¯¹çš„æ‹¬å·å¸¦ä¸Šä¸åŒé¢œè‰²ï¼Œç‰¹åˆ«é€‚åˆdartè¿™ç§åµŒå¥—å±‚çº§å¾ˆæ·±å£°æ˜å¼è¯­è¨€ï¼Œ è¿™ä¸ªæ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„åŒºåˆ†æ‹¬å·çš„å¼€å§‹å’Œæˆªæ­¢ä½ç½® ![Bracket _Pair_Colorizer_2](&#x2F;images&#x2F;flutter_plugin&#x2F;Bracket _Pair_Colorizer_2.jpg) GitLens Supercharge the Git capabilities built into Visual Studio Code â€” Visualize code authorship at a glance via Git blame annotations and code lens, seamlessly navigate and explore Git repositories, gain valuable insights via powerful comparison commands, and so much more æœ€å¥½ç”¨çš„featureæ˜¯åœ¨è¯¥è¡Œæœ«å°¾çš„å¼•äººæ³¨ç›®çš„å½“å‰è¡Œè´£ä»»æ³¨é‡Šï¼Œå¯é€šè¿‡æ‚¬åœè·å–è¯¦ç»†çš„è´£ä»»ä¿¡æ¯ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„featureï¼Œè¯·è‡ªè¡Œæ¢ç´¢ã€‚ gitç›¸å…³çš„å³é”®èœå• Color Highlight Highlight web colors in your editor webé¢œè‰²é«˜äº®ï¼Œç›´æ¥å°†é¢œè‰²å¯¹åº”çš„cssæ˜¾ç¤ºå‡ºæ¥ï¼Œéå¸¸ç›´è§‚ Image Preview Shows image preview in the gutter and on hover å•é¼ æ ‡æ‚¬æµ®åœ¨å¸¦æœ‰å›¾ç‰‡çš„è¶…é“¾æ¥ä¸Šä¼šæ˜¾ç¤ºé¢„è§ˆå›¾ç‰‡ pubspec assist Easily add and update dependencies to your Dart and Flutter project. ä¸‹é¢æ˜¯å®˜æ–¹çš„æ¼”ç¤ºæ•ˆæœï¼Œå¯ä»¥ç›´æ¥å‘½ä»¤æœç´¢flutterç›¸å…³åº“ Material Icon Theme Material Design Icons for Visual Studio Code é’ˆå¯¹ä¸åŒçš„æ–‡ä»¶iconå’Œæ–‡ä»¶å¤¹iconè®¾è®¡äº†ä¸€å¥—ä¸»é¢˜å›¾æ ‡ Error lens Improve highlighting of errors, warnings and other language diagnostics. å¢å¼ºäº†è¯­è¨€ä¸­çš„é”™è¯¯é«˜äº®æ•ˆæœï¼Œä½¿é”™è¯¯æç¤ºåœ¨ä»£ç åé¢æ˜¾ç¤º flutter-stylizer Flutter Stylizer organizes your Flutter classes in an opinionated and consistent manner. ä½¿flutterä¸­çš„ä»£ç æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ’åºï¼Œæ–¹ä¾¿ç»Ÿä¸€çº¦æŸå›¢é˜Ÿä»£ç çš„ç»“æ„ 1234567891011&quot;flutterStylizer.memberOrdering&quot;: [ &quot;public-constructor&quot;, &quot;named-constructors&quot;, &quot;public-static-variables&quot;, &quot;public-instance-variables&quot;, &quot;private-static-variables&quot;, &quot;private-instance-variables&quot;, &quot;public-override-methods&quot;, &quot;public-other-methods&quot;, &quot;build-method&quot;,], å½“ç„¶è¿™åªæ˜¯é»˜è®¤é¡ºåºï¼Œå…·ä½“çš„é¡ºåºå¯ä»¥è‡ªè¡Œè°ƒæ•´,æ’ä»¶å®‰è£…å®Œæˆåï¼Œé€šè¿‡å¿«æ·é”®æ ¼å¼åŒ–å½“å‰çš„æ–‡ä»¶ RESTClient REST Client for Visual Studio Code åœ¨VSCodeé‡Œé¢ç›´æ¥å‘é€è¯·æ±‚ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«.httpå’Œ.reståç¼€çš„æ–‡ä»¶ ç‚¹å‡»Send Requestå¼€å§‹å‘é€è¯·æ±‚ã€‚","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"Flutterä¸­Keyçš„ä½œç”¨","slug":"Flutterä¸­Keyçš„ä½œç”¨","date":"2020-07-26T09:44:33.000Z","updated":"2024-11-02T03:36:52.414Z","comments":true,"path":"2020/07/26/Flutterä¸­Keyçš„ä½œç”¨/","permalink":"https://blog.wangruofeng007.com/2020/07/26/Flutter%E4%B8%ADKey%E7%9A%84%E4%BD%9C%E7%94%A8/","excerpt":"","text":"keyçš„å®šä¹‰Key Classå®˜æ–¹ä»‹ç»ï¼š A [Key] is an identifier for [Widget]s, [Element]s and [SemanticsNode]s. A new widget will only be used to update an existing element if its key is the same as the key of the current widget associated with the element. {@youtube 560 315 https://www.youtube.com/watch?v=kn0EOS-ZiIc} Keys must be unique amongst the [Element]s with the same parent. Subclasses of [Key] should either subclass [LocalKey] or [GlobalKey]. ç¿»è¯‘è¿‡æ¥ï¼š ä¸€ä¸ªKeyæ˜¯Widgetï¼ŒElementä»¥åŠSemanticsNodeçš„æ ‡è¯†ã€‚ ä¸€ä¸ªæ–°widgetå°†ä»…ç”¨æ¥æ›´æ–°ä¸€ä¸ªå·²å­˜åœ¨çš„elementå‡å¦‚å®ƒçš„keyå’Œå½“å‰widgetå…³è”çš„å…ƒç´ ä¸€è‡´ã€‚ å®˜æ–¹ä»‹ç»è§†é¢‘ https://www.youtube.com/watch?v=kn0EOS-ZiIc åœ¨æœ‰ç€ç›¸åŒçˆ¶èŠ‚ç‚¹çš„elementä¸­ï¼ŒKeyå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ Keyçš„å­ç±»è¦ä¹ˆæ˜¯LocalKeyï¼Œè¦ä¹ˆæ˜¯GlobalKeyã€‚ Key å®˜æ–¹ä»‹ç»ï¼š Controls how one widget replaces another widget in the tree. If the runtimeType and key properties of the two widgets are operator&#x3D;&#x3D;, respectively, then the new widget replaces the old widget by updating the underlying element (i.e., by calling Element.updatewith the new widget). Otherwise, the old element is removed from the tree, the new widget is inflated into an element, and the new element is inserted into the tree. In addition, using a GlobalKey as the widgetâ€™s key allows the element to be moved around the tree (changing parent) without losing state. When a new widget is found (its key and type do not match a previous widget in the same location), but there was a widget with that same global key elsewhere in the tree in the previous frame, then that widgetâ€™s element is moved to the new location. Generally, a widget that is the only child of another widget does not need an explicit key. ç¿»è¯‘è¿‡æ¥ï¼š æ§åˆ¶ä¸€ä¸ªå°éƒ¨ä»¶å¦‚ä½•æ›¿æ¢æ ‘ä¸­çš„å¦ä¸€ä¸ªå°éƒ¨ä»¶ã€‚ å¦‚æœä¸¤ä¸ªwidgetçš„runtimeTypeå’Œkeyå±æ€§åˆ†åˆ«æ˜¯ç›¸ç­‰çš„(&#x3D;&#x3D;)ï¼Œåˆ™æ–°widgeté€šè¿‡æ›´æ–°åŸºç¡€elementï¼ˆå³ï¼Œé€šè¿‡ä½¿ç”¨æ–°çš„widgetè°ƒç”¨Element.updateï¼‰æ¥æ›¿æ¢æ—§widgetã€‚å¦åˆ™ï¼Œå°†ä»æ ‘ä¸­åˆ é™¤æ—§elementï¼Œå°†æ–°widgetæ”¾å¤§ä¸ºä¸€ä¸ªelementï¼Œç„¶åå°†æ–°elementæ’å…¥åˆ°æ ‘ä¸­ã€‚ å¦å¤–ï¼Œä½¿ç”¨GlobalKeyä½œä¸ºçª—å£å°éƒ¨ä»¶çš„keyå…è®¸è¯¥elementåœ¨æ ‘ä¸Šç§»åŠ¨ï¼ˆæ›´æ”¹çˆ¶çº§ï¼‰è€Œä¸ä¼šä¸¢å¤±çŠ¶æ€ã€‚å½“æ‰¾åˆ°æ–°çš„widgetï¼ˆå…¶é”®å’Œç±»å‹ä¸ç›¸åŒä½ç½®çš„å…ˆå‰widgetä¸åŒ¹é…ï¼‰ï¼Œä½†æ˜¯åœ¨å‰ä¸€å¸§çš„æ ‘ä¸­å…¶ä»–ä½ç½®æœ‰ä¸€ä¸ªå…·æœ‰ç›¸åŒå…¨å±€é”®çš„widgetæ—¶ï¼Œè¯¥widgetçš„elementå°†ç§»è‡³æ–°ä½ç½®ã€‚ é€šå¸¸ï¼Œä½œä¸ºå¦ä¸€ä¸ªwidgetçš„å”¯ä¸€childçš„widgetä¸éœ€è¦æ˜¾å¼keyã€‚ Keyçš„ä½œç”¨å¤§å¤šæ•°æ—¶å€™å¹¶ä¸éœ€è¦ä½¿ç”¨keyã€‚ å½“éœ€è¦åœ¨ä¸€ä¸ªStatefulWidgeté›†åˆä¸­è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€é‡æ’åºç­‰æ“ä½œæ—¶ï¼Œæ‰æ˜¯keyç™»åœºçš„æ—¶å€™ã€‚ æ— çŠ¶æ€ç»„ä»¶ä¸‹é¢è¿™æ®µä»£ç åœ¨ä¸€ä¸ªRowä¸­å±•ç¤ºäº†ä¸¤ä¸ªå½©è‰²æ–¹ç‰‡ï¼ˆStatelessContainerï¼‰ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šäº¤æ¢ä¸¤ä¸ªæ–¹ç‰‡çš„ä½ç½®ï¼š ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import &#x27;dart:math&#x27;;import &#x27;package:flutter/material.dart&#x27;;class StatelessContainer extends StatelessWidget &#123; final Color color = Color.fromRGBO( Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1); @override Widget build(BuildContext context) &#123; return Container( width: 100, height: 100, color: color, ); &#125;&#125;class Screen extends StatefulWidget &#123; @override _ScreenState createState() =&gt; _ScreenState();&#125;class _ScreenState extends State&lt;Screen&gt; &#123; List&lt;Widget&gt; widgets = [ StatelessContainer(), StatelessContainer(), ]; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Row( mainAxisAlignment: MainAxisAlignment.center, children: widgets, ), ), floatingActionButton: FloatingActionButton( onPressed: switchWidget, child: Icon(Icons.undo), ), ); &#125; switchWidget() &#123; widgets.insert(0, widgets.removeAt(1)); setState(() &#123;&#125;); &#125;&#125; æœ‰çŠ¶æ€ç»„ä»¶æœ‰çŠ¶æ€ç»„ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼ˆå¦‚é¢œè‰²ï¼‰é€šå¸¸æ˜¯å­˜å‚¨åœ¨stateä¸­çš„ï¼Œè€Œstateæ˜¯å­˜å‚¨åœ¨elementæ ‘ä¸­çš„ã€‚ é‚£ä¹ˆKeyåˆ°åº•åº”è¯¥ç”¨åˆ°å“ªå‘¢ï¼Ÿæˆ‘ä»¬å†æ¥ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æŠŠè‰²å—ç”¨PaddingåŒ…è£…ä¸€ä¸‹ã€‚è¿è¡Œä¹‹åä¼šå‘ç°ï¼Œè‰²å—å¹¶æ²¡æœ‰äº¤æ¢ï¼Œè€Œæ˜¯ä»¥éšæœºçš„å½¢å¼åœ¨å˜æ¢é¢œè‰²ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import &#x27;dart:math&#x27;;import &#x27;package:flutter/material.dart&#x27;;class Screen extends StatefulWidget &#123; Screen(&#123;Key key&#125;) : super(key: key); @override _ScreenState createState() =&gt; _ScreenState();&#125;class _ScreenState extends State&lt;Screen&gt; &#123; List&lt;Widget&gt; widgets = [ Padding( padding: const EdgeInsets.all(8.0), child: StatefulContainer(key: UniqueKey()), ), Padding( padding: const EdgeInsets.all(8.0), child: StatefulContainer(key: UniqueKey()), ), ]; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Row( mainAxisAlignment: MainAxisAlignment.center, children: widgets, ), ), floatingActionButton: FloatingActionButton( onPressed: switchWidget, child: Icon(Icons.undo), ), ); &#125; switchWidget() &#123; widgets.insert(0, widgets.removeAt(1)); setState(() &#123;&#125;); print(&#x27;$&#123;widgets[0]&#125;, $&#123;widgets[1]&#125;&#x27;); &#125;&#125;class StatefulContainer extends StatefulWidget &#123; StatefulContainer(&#123;Key key&#125;) : super(key: key); @override _StatefulContainerState createState() =&gt; _StatefulContainerState();&#125;class _StatefulContainerState extends State&lt;StatefulContainer&gt; &#123; final Color color = Color.fromRGBO( Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1); @override Widget build(BuildContext context) &#123; return Container( color: color, width: 100, height: 100, ); &#125;&#125; ç»“åˆæˆ‘ä»¬ä¸Šé¢çš„ç†è®ºï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™æ¬¡çš„Widget Tree å’Œ Element Treeï¼Œå½“æˆ‘ä»¬äº¤æ¢å…ƒç´ åï¼ŒFlutter element-to-widget matching algorithm,(å…ƒç´ -ç»„ä»¶åŒ¹é…ç®—æ³•)ï¼Œå¼€å§‹è¿›è¡Œå¯¹æ¯”ï¼Œç®—æ³•æ¯æ¬¡åªå¯¹æ¯”ä¸€å±‚ï¼Œå³Paddingè¿™ä¸€å±‚ã€‚æ˜¾ç„¶ï¼ŒPaddingå¹¶æ²¡æœ‰å‘ç”Ÿæœ¬è´¨çš„å˜åŒ–ã€‚ äºæ˜¯å¼€å§‹è¿›è¡Œç¬¬äºŒå±‚å¯¹æ¯”ï¼Œåœ¨å¯¹æ¯”æ—¶Flutterå‘ç°å…ƒç´ ä¸ç»„ä»¶çš„Keyå¹¶ä¸åŒ¹é…ï¼Œäºæ˜¯ï¼ŒæŠŠå®ƒè®¾ç½®æˆä¸å¯ç”¨çŠ¶æ€ï¼Œä½†æ˜¯è¿™é‡Œæ‰€ä½¿ç”¨çš„Keyåªæ˜¯æœ¬åœ°Keyï¼ˆLocal Keyï¼‰ï¼ŒFlutterå¹¶ä¸èƒ½æ‰¾åˆ°å¦ä¸€å±‚é‡Œé¢çš„Keyï¼ˆå³å¦å¤–ä¸€ä¸ªPadding Widgetä¸­çš„Keyï¼‰æ‰€ä»¥ï¼ŒFlutterå°±åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Widgetï¼Œè€Œè¿™ä¸ªWidgetçš„é¢œè‰²å°±æˆäº†æˆ‘ä»¬çœ‹åˆ°çš„ã€éšæœºè‰²ã€ã€‚ é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬èƒ½æ˜æ˜¾çš„çœ‹å‡ºï¼Œæˆ‘ä»¬çš„Keyè¦è®¾ç½®åˆ°ç»„ä»¶æ ‘çš„ é¡¶å±‚ï¼Œè€Œè¿™ä¸€å±‚åœ¨æ”¹å˜æ—¶ï¼Œæ‰èƒ½å¤ç”¨æˆ–è€…æ›´æ–°çŠ¶æ€ã€‚ ä¿®æ­£ç‰ˆæœ¬ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import &#x27;dart:math&#x27;;import &#x27;package:flutter/material.dart&#x27;;class Screen extends StatefulWidget &#123; Screen(&#123;Key key&#125;) : super(key: key); @override _ScreenState createState() =&gt; _ScreenState();&#125;class _ScreenState extends State&lt;Screen&gt; &#123; List&lt;Widget&gt; widgets = [ Padding( key: UniqueKey(), padding: const EdgeInsets.all(8.0), child: StatefulContainer(), ), Padding( key: UniqueKey(), padding: const EdgeInsets.all(8.0), child: StatefulContainer(), ), ]; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Row( mainAxisAlignment: MainAxisAlignment.center, children: widgets, ), ), floatingActionButton: FloatingActionButton( onPressed: switchWidget, child: Icon(Icons.undo), ), ); &#125; switchWidget() &#123; widgets.insert(0, widgets.removeAt(1)); setState(() &#123;&#125;); print(&#x27;$&#123;widgets[0]&#125;, $&#123;widgets[1]&#125;&#x27;); &#125;&#125;class StatelessContainer extends StatelessWidget &#123; final Color color = Color.fromRGBO( Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1); @override Widget build(BuildContext context) &#123; return Container( color: color, width: 100, height: 100, ); &#125;&#125;class StatefulContainer extends StatefulWidget &#123; StatefulContainer(&#123;Key key&#125;) : super(key: key); @override _StatefulContainerState createState() =&gt; _StatefulContainerState();&#125;class _StatefulContainerState extends State&lt;StatefulContainer&gt; &#123; final Color color = Color.fromRGBO( Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1); @override Widget build(BuildContext context) &#123; return Container( color: color, width: 100, height: 100, ); &#125;&#125; Keyçš„åˆ†ç±» ValueKey:ä»¥ä¸€ä¸ªå€¼ä¸ºkeyã€‚ ObjectKey:ä»¥ä¸€ä¸ªå¯¹è±¡ä¸ºkeyã€‚ UniqueKey:ç”Ÿæˆå”¯ä¸€çš„éšæœºæ•°ä½œä¸ºkeyã€‚ PageStorageKey:ä¸“ç”¨äºå­˜å‚¨é¡µé¢æ»šåŠ¨ä½ç½®çš„keyã€‚ GlobalKey:è§åæ–‡ã€‚ ä½•æ—¶ä½¿ç”¨keyValueKeyå¦‚æœæ‚¨æœ‰ä¸€ä¸ª Todo List åº”ç”¨ç¨‹åºï¼Œå®ƒå°†ä¼šè®°å½•ä½ éœ€è¦å®Œæˆçš„äº‹æƒ…ã€‚æˆ‘ä»¬å‡è®¾æ¯ä¸ª Todo äº‹æƒ…éƒ½å„ä¸ç›¸åŒï¼Œè€Œä½ æƒ³è¦å¯¹æ¯ä¸ª Todo è¿›è¡Œæ»‘åŠ¨åˆ é™¤æ“ä½œã€‚ è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ ValueKeyï¼ 1234567return TodoItem( key: ValueKey(todo.task), todo: todo, onDismissed: (direction)&#123; _removeTodo(context, todo); &#125;,); ObjectKeyå¦‚æœä½ æœ‰ä¸€ä¸ªç”Ÿæ—¥åº”ç”¨ï¼Œå®ƒå¯ä»¥è®°å½•æŸä¸ªäººçš„ç”Ÿæ—¥ï¼Œå¹¶ç”¨åˆ—è¡¨æ˜¾ç¤ºå‡ºæ¥ï¼ŒåŒæ ·çš„è¿˜æ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ»‘åŠ¨åˆ é™¤æ“ä½œã€‚ æˆ‘ä»¬çŸ¥é“äººåå¯èƒ½ä¼šé‡å¤ï¼Œè¿™æ—¶å€™ä½ æ— æ³•ä¿è¯ç»™ Key çš„å€¼æ¯æ¬¡éƒ½ä¼šä¸åŒã€‚ä½†æ˜¯ï¼Œå½“äººåå’Œç”Ÿæ—¥ç»„åˆèµ·æ¥çš„ Object å°†å…·æœ‰å”¯ä¸€æ€§ã€‚ è¿™æ—¶å€™ä½ éœ€è¦ä½¿ç”¨ ObjectKeyï¼ UniqueKeyå¦‚æœç»„åˆçš„ Object éƒ½æ— æ³•æ»¡è¶³å”¯ä¸€æ€§çš„æ—¶å€™ï¼Œä½ æƒ³è¦ç¡®ä¿æ¯ä¸€ä¸ª Key éƒ½å…·æœ‰å”¯ä¸€æ€§ã€‚é‚£ä¹ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ UniqueKeyã€‚å®ƒå°†ä¼šé€šè¿‡è¯¥å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå…·æœ‰å”¯ä¸€æ€§çš„ hash ç ã€‚ ä¸è¿‡è¿™æ ·åšï¼Œæ¯æ¬¡ Widget è¢«æ„å»ºæ—¶éƒ½ä¼šå»é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ UniqueKeyï¼Œå¤±å»äº†ä¸€è‡´æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ çš„å°éƒ¨ä»¶è¿˜æ˜¯ä¼šæ”¹å˜ã€‚ï¼ˆè¿˜ä¸å¦‚ä¸ç”¨ğŸ˜‚ï¼‰ PageStorageKeyå½“ä½ æœ‰ä¸€ä¸ªæ»‘åŠ¨åˆ—è¡¨ï¼Œä½ é€šè¿‡æŸä¸€ä¸ª Item è·³è½¬åˆ°äº†ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œå½“ä½ è¿”å›ä¹‹å‰çš„åˆ—è¡¨é¡µé¢æ—¶ï¼Œä½ å‘ç°æ»‘åŠ¨çš„è·ç¦»å›åˆ°äº†é¡¶éƒ¨ã€‚è¿™æ—¶å€™ï¼Œç»™ Sliver ä¸€ä¸ª PageStorageKeyï¼å®ƒå°†èƒ½å¤Ÿä¿æŒ Sliver çš„æ»šåŠ¨çŠ¶æ€ã€‚ GlobalKeyæ¯ä¸ªglobalkeyéƒ½æ˜¯ä¸€ä¸ªåœ¨æ•´ä¸ªåº”ç”¨å†…å”¯ä¸€çš„keyã€‚ globalkeyç›¸å¯¹è€Œè¨€æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œå¦‚æœä½ å¹¶ä¸éœ€è¦globalkeyçš„æŸäº›ç‰¹æ€§ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨Keyã€ValueKeyã€ObjectKeyæˆ–UniqueKeyã€‚ ç”¨é€”1å…è®¸widgetåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•ä½ç½®æ›´æ”¹å…¶parentè€Œä¸ä¸¢å¤±å…¶çŠ¶æ€ã€‚åº”ç”¨åœºæ™¯ï¼šåœ¨ä¸¤ä¸ªä¸åŒçš„å±å¹•ä¸Šæ˜¾ç¤ºç›¸åŒçš„widgetï¼Œå¹¶ä¿æŒçŠ¶æ€ç›¸åŒã€‚ ç”¨é€”2GlobalKey èƒ½å¤Ÿè·¨ Widget è®¿é—®çŠ¶æ€ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Switcher å°éƒ¨ä»¶ï¼Œå®ƒå¯ä»¥é€šè¿‡ changeState æ”¹å˜å®ƒçš„çŠ¶æ€ã€‚ 12345678910111213141516171819202122class SwitcherScreenState extends State&lt;SwitcherScreen&gt; &#123; bool isActive = false; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Switch.adaptive( value: isActive, onChanged: (bool currentStatus) &#123; isActive = currentStatus; setState(() &#123;&#125;); &#125;), ), ); &#125; changeState() &#123; isActive = !isActive; setState(() &#123;&#125;); &#125;&#125; ä½†æ˜¯æˆ‘ä»¬æƒ³è¦åœ¨å¤–éƒ¨æ”¹å˜è¯¥çŠ¶æ€ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ GlobalKeyã€‚ 123456789101112131415class _ScreenState extends State&lt;Screen&gt; &#123; final GlobalKey&lt;SwitcherScreenState&gt; key = GlobalKey&lt;SwitcherScreenState&gt;(); @override Widget build(BuildContext context) &#123; return Scaffold( body: SwitcherScreen( key: key, ), floatingActionButton: FloatingActionButton(onPressed: () &#123; key.currentState.changeState(); &#125;), ); &#125;&#125; è¿™é‡Œæˆ‘ä»¬é€šè¿‡å®šä¹‰äº†ä¸€ä¸ª GlobalKey å¹¶ä¼ é€’ç»™ SwitcherScreenã€‚ç„¶åæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡è¿™ä¸ª key æ‹¿åˆ°å®ƒæ‰€ç»‘å®šçš„ SwitcherState å¹¶åœ¨å¤–éƒ¨è°ƒç”¨ changeState æ”¹å˜çŠ¶æ€äº†ã€‚ å‚è€ƒèµ„æ–™ ä½•æ—¶ä½¿ç”¨å¯†é’¥ - Flutterå°éƒ¨ä»¶ 101 ç¬¬å››é›† widgets-intro#keys Flutter | æ·±å…¥æµ…å‡ºKey Flutterä¸­çš„Keyå’ŒGlobalKey","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"flutter","slug":"flutter","permalink":"https://blog.wangruofeng007.com/tags/flutter/"}]},{"title":"Flutter factory ä½¿ç”¨æ€»ç»“","slug":"Flutter-factory-ä½¿ç”¨æ€»ç»“","date":"2020-07-26T08:54:39.000Z","updated":"2024-11-02T03:36:52.413Z","comments":true,"path":"2020/07/26/Flutter-factory-ä½¿ç”¨æ€»ç»“/","permalink":"https://blog.wangruofeng007.com/2020/07/26/Flutter-factory-%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/","excerpt":"","text":"0x01å®˜æ–¹æè¿° Use the factory keyword when implementing a constructor that doesnâ€™t always create a new instance of its class. For example, a factory constructor might return an instance from a cache, or it might return an instance of a subtype. å½“å®ç°å¹¶éæ€»æ˜¯åˆ›å»ºå…¶ç±»çš„æ–°å®ä¾‹çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¯·ä½¿ç”¨â€œ factoryâ€å…³é”®å­—ã€‚ä¾‹å¦‚ï¼Œå·¥å‚æ„é€ å‡½æ•°å¯èƒ½ä¼šä»ç¼“å­˜è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œæˆ–è€…å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªå­ç±»å‹çš„å®ä¾‹ã€‚ 0x02ä½¿ç”¨åœºæ™¯ é¿å…åˆ›å»ºè¿‡å¤šçš„é‡å¤å®ä¾‹ï¼Œå¦‚æœè¯¥å®ä¾‹å·²åˆ›å»ºï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜è·å–ã€‚ è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°(å·¥å‚æ¨¡å¼ factory patternï¼‰ å®ç°å•ä¾‹æ¨¡å¼(singleton pattern) 0x03 Demoåˆ›å»ºç¼“å­˜å®ä¾‹ å¼•ç”¨è‡ª https://dart.dev/guides/language/language-tour#factory-constructors 123456789101112131415161718192021222324252627class Logger &#123; final String name; // ç¼“å­˜Map static final Map&lt;String, Logger&gt; _cache = &lt;String, Logger&gt;&#123;&#125;; factory Logger(String name) &#123; // nameå¯¹åº”çš„keyåœ¨_cacheä¸å­˜åœ¨ï¼Œæ‰§è¡ŒLogger._internal(name)ï¼Œå¦åˆ™ç›´æ¥è¿”å› return _cache.putIfAbsent(name, () =&gt; Logger._internal(name)); &#125; // ç§æœ‰æ„é€ å‡½æ•° Logger._internal(this.name) &#123; print(&#x27;ç”Ÿæˆæ–°å®ä¾‹:$name&#x27;); &#125;&#125;void main(List&lt;String&gt; args) &#123; var p1 = Logger(&#x27;1&#x27;); var p2 = Logger(&#x27;2&#x27;); var p3 = Logger(&#x27;1&#x27;); print(identical(p1, p2)); print(identical(p1, p3)); // ç”Ÿæˆæ–°å®ä¾‹:1 // ç”Ÿæˆæ–°å®ä¾‹:2 // false // true&#125; è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243abstract class Animal extends Object &#123; String name; void getNoise(); factory Animal(String type, String name) &#123; switch (type) &#123; case &#x27;cat&#x27;: return Cat(name); break; case &#x27;dog&#x27;: return Dog(name); break; default: throw &quot;The &#x27;$type&#x27; is not an animal&quot;; &#125; &#125;&#125;class Cat implements Animal &#123; String name; Cat(this.name); @override void getNoise() &#123; print(&#x27;$&#123;this.name&#125;:mew~&#x27;); &#125;&#125;class Dog implements Animal &#123; String name; Dog(this.name); @override void getNoise() &#123; print(&#x27;$&#123;this.name&#125;:wang~&#x27;); &#125;&#125;void main(List&lt;String&gt; args) &#123; var cat = Animal(&#x27;cat&#x27;, &#x27;haha&#x27;); var dog = Animal(&#x27;dog&#x27;, &#x27;hehe&#x27;); cat.getNoise(); dog.getNoise(); // haha:mew~ // hehe:wang~&#125; å®ç°å•ä¾‹æ¨¡å¼12345678910111213141516class Singleton &#123; static final Singleton _singleton = Singleton._internal(); factory Singleton() &#123; return _singleton; &#125; Singleton._internal();&#125;void main(List&lt;String&gt; args) &#123; var s1 = Singleton(); var s2 = Singleton(); print(identical(s1, s2)); // true&#125;","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"flutter","slug":"flutter","permalink":"https://blog.wangruofeng007.com/tags/flutter/"}]},{"title":"Flutter ShapeBorder ä½¿ç”¨æ‰‹å†Œ","slug":"Flutter-ShapeBorder-ä½¿ç”¨æ‰‹å†Œ","date":"2020-07-12T11:09:55.000Z","updated":"2024-11-02T03:36:52.413Z","comments":true,"path":"2020/07/12/Flutter-ShapeBorder-ä½¿ç”¨æ‰‹å†Œ/","permalink":"https://blog.wangruofeng007.com/2020/07/12/Flutter-ShapeBorder-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","excerpt":"ç®€ä»‹ShapeBorder ç”¨äºè®¾ç½®å½¢çŠ¶å’Œè½®å»“ï¼Œæ¯”å¦‚åœ†å½¢ï¼ŒçŸ©å½¢ï¼Œåœ†è§’çŸ©å½¢ç­‰ã€‚å¸¸ç”¨äº Container ä¸­ã€‚","text":"ç®€ä»‹ShapeBorder ç”¨äºè®¾ç½®å½¢çŠ¶å’Œè½®å»“ï¼Œæ¯”å¦‚åœ†å½¢ï¼ŒçŸ©å½¢ï¼Œåœ†è§’çŸ©å½¢ç­‰ã€‚å¸¸ç”¨äº Container ä¸­ã€‚ ç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼š ShapeBorderã€abstractã€‘ BeveledRectangleBorder BoxBorderã€abstractã€‘ Border BorderDirectional CircleBorder ContinuousRectangleBorder RoundedRectangleBorder StadiumBorder InputBorderã€abstractã€‘ OutlineInputBorder UnderlineInputBorder å…¶ä¸­ ShapeBorderã€BoxBorderã€InputBorder æ˜¯æŠ½è±¡çˆ¶ç±»ã€‚InputBorder é€šå¸¸ç”¨äºè¾“å…¥æ¡†ç›¸å…³çš„ã€‚ ç±»çš„å…³ç³»å›¾ BeveledRectangleBorderæ–œé¢åœ†è§’çŸ©å½¢ ç»§æ‰¿å…³ç³»: BeveledRectangleBorder &gt; ShapeBorder 1234567891011121314151617181920212223Widget _beveledRectangleBorder() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: BeveledRectangleBorder( borderRadius: BorderRadius.circular(20), side: BorderSide( width: 2, color: Colors.blue, style: BorderStyle.solid, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š BoxBorderBoxBorderä¸»è¦æŒç®¡è¾¹çº¿æ–¹é¢çš„äº‹ï¼Œè‡ªèº«æ˜¯abstractï¼Œä¸èƒ½ç›´æ¥ç”¨ BoxBorderå®˜æ–¹è¯´æ˜ Base class for box borders that can paint as rectangles, circles, or rounded rectangles. Borderç»§æ‰¿å…³ç³»: Border &gt; BoxBorder &gt; ShapeBorder Borderå®˜æ–¹è¯´æ˜ A border of a box, comprised of four sides: top, right, bottom, left. 12345678910111213141516171819202122Widget _border() &#123; return Center( child: Container( margin: EdgeInsets.all(16), padding: EdgeInsets.all(16), decoration: ShapeDecoration( color: Colors.orange, shape: Border( top: BorderSide(width: 6.0, color: Colors.black12), left: BorderSide(width: 6.0, color: Colors.black12), right: BorderSide(width: 6.0, color: Colors.black26), bottom: BorderSide(width: 6.0, color: Colors.black26), ), ), child: Text( &quot;Border&quot;, style: TextStyle(color: Colors.white, fontSize: 20), ), ), );&#125; æ•ˆæœå›¾ï¼š BorderDirectionalç»§æ‰¿å…³ç³»: BorderDirectional &gt; BoxBorder &gt; ShapeBorder BorderDirectional é€šè¿‡ top,bottom,start,endåˆ†åˆ«æ§åˆ¶ä¸Šä¸‹å·¦å³çš„è¾¹çº¿è¾¹çº¿å¯¹è±¡BorderSide 12345678910111213141516171819202122232425Widget _borderDirectional() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: BorderDirectional( start: BorderSide(color: Colors.black, width: 15), end: BorderSide(color: Colors.black, width: 15), top: BorderSide( color: Colors.black, ), bottom: BorderSide( color: Colors.black, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š åªè®¾ç½®å·¦å³çš„BorderSide 12345678910111213141516171819Widget _borderDirectional2() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: BorderDirectional( start: BorderSide(color: Colors.black, width: 15), end: BorderSide(color: Colors.black, width: 15), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š CircleBorderåœ†å½¢è¾¹æ¡†ã€‚ ç»§æ‰¿å…³ç³»: CircleBorder &gt; ShapeBorder 123456789101112131415161718Widget _circleBorder1() &#123; return Center( child: Container( width: 120, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: CircleBorder( side: BorderSide(), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š ä¸Šé¢çš„æ˜¯ä½¿ç”¨é»˜è®¤å‚æ•°çš„æ•ˆæœ é€šè¿‡è®¾ç½®BorderSideæ¥è®¾ç½®è¾¹æ¡†é¢œè‰²å’Œå®½åº¦ï¼Œä»¥åŠæ˜¯å¦æ˜¾ç¤ºè¾¹æ¡† 1234567891011121314151617181920212223Widget _circleBorder2() &#123; return Center( child: Container( width: 120, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: CircleBorder( side: BorderSide( width: 10, color: Colors.blue, style: BorderStyle.solid, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š ContinuousRectangleBorderå¹³æ»‘è¿‡æ¸¡çš„çŸ©å½¢è¾¹æ¡† ç»§æ‰¿å…³ç³»: ContinuousRectangleBorder &gt; ShapeBorder 123456789101112131415161718192021222324Widget _continuousRectangleBorder() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: ContinuousRectangleBorder( borderRadius: BorderRadius.circular(40), side: BorderSide( width: 2, color: Colors.blue, style: BorderStyle.solid, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š RoundedRectangleBorderåœ†è§’çŸ©å½¢ã€‚ ç»§æ‰¿å…³ç³»: RoundedRectangleBorder &gt; ShapeBorder 1234567891011121314151617181920212223Widget _roundedRectangleBorder() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: RoundedRectangleBorder( borderRadius: BorderRadius.circular(20), side: BorderSide( width: 2, color: Colors.blue, style: BorderStyle.solid, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š StadiumBorderä½“è‚²åœºå½¢çŠ¶ã€‚å³ä¸¤è¾¹æ˜¯åŠåœ†ã€‚ ç»§æ‰¿å…³ç³»: StadiumBorder &gt; ShapeBorder 12345678910111213141516171819202122Widget _stadiumBorder() &#123; return Center( child: Container( width: 240, height: 120, margin: EdgeInsets.all(16), decoration: ShapeDecoration( image: DecorationImage( image: AssetImage(&#x27;lib/assets/img_flutter.png&#x27;), fit: BoxFit.cover, ), shape: StadiumBorder( side: BorderSide( width: 2, color: Colors.blue, style: BorderStyle.solid, ), ), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š InputBorderç»§æ‰¿å…³ç³»: InputBorder &gt; ShapeBorder å®˜æ–¹è¯´æ˜ï¼š Defines the appearance of an [InputDecorator]â€™s border. An input decoratorâ€™s border is specified by [InputDecoration.border]. The border is drawn relative to the input decoratorâ€™s â€œcontainerâ€ which is the optionally filled area above the decoratorâ€™s helper, error,and counter. å¸¸ç”¨çš„è¾“å…¥è¾¹æ¡†ï¼Œæœ‰2ä¸ªè¡ç”Ÿå­ç±»OutlineInputBorder å’ŒUnderlineInputBorder OutlineInputBorderç»§æ‰¿å…³ç³»: OutlineInputBorder &gt; InputBorder &gt; ShapeBorder 12345678910111213141516171819Widget _outlineInputBorder() &#123; return Center( child: Container( margin: EdgeInsets.all(16), padding: EdgeInsets.all(16), decoration: ShapeDecoration( color: Colors.orange, shape: OutlineInputBorder( borderSide: BorderSide(width: 2.0, color: Colors.purple), borderRadius: BorderRadius.circular(20.0), ), ), child: Text( &quot;OutlineInputBorder&quot;, style: TextStyle(color: Colors.white, fontSize: 20), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š UnderlineInputBorderç»§æ‰¿å…³ç³»: UnderlineInputBorder &gt; InputBorder &gt; ShapeBorder 12345678910111213141516171819Widget _underlineInputBorder() &#123; return Center( child: Container( margin: EdgeInsets.all(16), padding: EdgeInsets.all(16), decoration: ShapeDecoration( color: Colors.orange, shape: UnderlineInputBorder( borderSide: BorderSide(width: 2.0, color: Colors.purple), borderRadius: BorderRadius.circular(20.0), ), ), child: Text( &quot;UnderlineInputBorder&quot;, style: TextStyle(color: Colors.white, fontSize: 20), ), ), );&#125; æ•ˆæœå¦‚ä¸‹ï¼š","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"flutter","slug":"flutter","permalink":"https://blog.wangruofeng007.com/tags/flutter/"}]},{"title":"VSCode Snippets ä½¿ç”¨æ‰‹å†Œ","slug":"VSCode-Snippets-ä½¿ç”¨æ‰‹å†Œ","date":"2020-06-13T08:09:53.000Z","updated":"2024-11-02T03:36:52.415Z","comments":true,"path":"2020/06/13/VSCode-Snippets-ä½¿ç”¨æ‰‹å†Œ/","permalink":"https://blog.wangruofeng007.com/2020/06/13/VSCode-Snippets-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","excerpt":"VSCode Snippets ä½¿ç”¨æ‰‹å†Œå‰è¨€å½“æˆ‘ä»¬ä¸ºäº†å‡å°‘æ¨¡æ¿ä»£ç ï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªå¾ˆå¯èƒ½æƒ³åˆ°ä½¿ç”¨Code Snippets,å¾ˆå¤šIDEå’Œæ–‡ä»¶ç¼–è¾‘å™¨å·²ç»ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé¢„è£…çš„ä»£ç ç‰‡æ®µï¼Œå½“é¢„è£…çš„ä»£ç ç‰‡æ®µä¸èƒ½ç’ç€æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè‡ªå·±å®šåˆ¶ä¸€äº›è‡ªå·±çš„ä¸“æœ‰ä»£ç ä»£ç ç‰‡æ®µï¼Œä¸‹é¢å°±ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•åœ¨VSCodeå®šåˆ¶è‡ªå·±çš„ä»£ç ç‰‡æ®µä»¥åŠä¸€äº›å°æŠ€å·§ã€‚","text":"VSCode Snippets ä½¿ç”¨æ‰‹å†Œå‰è¨€å½“æˆ‘ä»¬ä¸ºäº†å‡å°‘æ¨¡æ¿ä»£ç ï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªå¾ˆå¯èƒ½æƒ³åˆ°ä½¿ç”¨Code Snippets,å¾ˆå¤šIDEå’Œæ–‡ä»¶ç¼–è¾‘å™¨å·²ç»ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé¢„è£…çš„ä»£ç ç‰‡æ®µï¼Œå½“é¢„è£…çš„ä»£ç ç‰‡æ®µä¸èƒ½ç’ç€æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè‡ªå·±å®šåˆ¶ä¸€äº›è‡ªå·±çš„ä¸“æœ‰ä»£ç ä»£ç ç‰‡æ®µï¼Œä¸‹é¢å°±ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•åœ¨VSCodeå®šåˆ¶è‡ªå·±çš„ä»£ç ç‰‡æ®µä»¥åŠä¸€äº›å°æŠ€å·§ã€‚ å¦‚ä½•æ·»åŠ æ–¹æ³•ä¸€ï¼šé€šè¿‡æ§åˆ¶å° æ‰“å¼€VSCode,æŒ‰ä¸‹å¿«æ·é”®ç»„åˆshift+command+på‘¼å‡ºæ§åˆ¶å° åœ¨æ§åˆ¶å°è¾“å…¥ï¼š Configure User Snippetsé€‰æ‹© è¾“å…¥newï¼Œæ‰¾åˆ°æ–°å»ºä»£ç ç‰‡æ®µå‘½ä»¤ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©åˆ›å»ºå…¨å±€çš„æˆ–è€…ä¸ºæŸä¸ªé¡¹ç›®ä¸“å±çš„ä»£ç ç‰‡æ®µ,è¿™é‡Œæˆ‘ä»¬é€‰æ‹©New Global Snippets file...ã€‚ ç»™ç‰‡æ®µèµ·ä¸€ä¸ªæ˜“äºç†è§£çš„å‘½åï¼Œå›è½¦ ç¼–è¾‘ä»£ç ç‰‡æ®µçš„å†…å®¹ ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå·±åå­—çš„TODO, ç±»ä¼¼è¿™æ ·çš„é£æ ¼ï¼š// TODO(ruofeng): some comment æœ€ç»ˆç‰ˆæœ¬å¦‚ä¸‹ï¼š æ•ˆæœå›¾ æ–¹æ³•äºŒï¼šé€šè¿‡é¦–é€‰é¡¹ Code -&gt; Preferences-&gt;User Snippets åé¢çš„æ­¥éª¤å’Œç¬¬ä¸€ç§çš„4ï¼Œ5ä¸€æ ·ï¼Œè¿™é‡Œä¸å†èµ˜è¿° ä½¿ç”¨æµ‹è¯•æ–°å»ºä¸€ä¸ª.dartç»“å°¾çš„æ–‡ä»¶,è¿™é‡Œå°±å«test.dart ,è¾“å…¥todoï¼Œå‡ºç°äº†æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ä»£ç ç‰‡æ®µ é€‰æ‹©todo,å‡ºç°æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ä»£ç ç‰‡æ®µ å¸¸ç”¨è¯­æ³• å˜é‡ï¼Œ æ ¼å¼ $+num, ä¾‹å¦‚ï¼š &quot;console.log(&#39;$1&#39;);&quot; å˜é‡å ä½æè¿°,æ ¼å¼$&#123;num:desc&#125;,ä¾‹å¦‚ï¼š &quot;$&#123;1:label&#125;, $&#123;2:another&#125;;&quot; ç¼©è¿›ï¼Œ\\t,æ³¨æ„ç¼©è¿›çš„å¯¹ç§°æ€§ å˜é‡ ä¸ºäº†è·Ÿè¿›ç¯å¢ƒåŠ¨æ€å®šåˆ¶ä¸€äº›ç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œå®˜æ–¹ä»‹ç» ç¤ºä¾‹ï¼š æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªXcodeç‰ˆæœ¬çš„OCé»˜è®¤é£æ ¼ä»£ç ç‰‡æ®µ æ–°å»ºä¸€ä¸ªtest.dartæ–‡ä»¶ï¼Œåœ¨é‡Œé¢è¾“å…¥copywrightï¼Œé€‰æ‹©åˆšæ‰æˆ‘ä»¬çš„æ·»åŠ çš„ä»£ç ç‰‡æ®µï¼Œæ•ˆæœå¦‚ä¸‹ å˜é‡è½¬æ¢è¯­æ³•è¯´æ˜ï¼š 1234567891011121314151617181920any ::= tabstop | placeholder | choice | variable | texttabstop ::= &#x27;$&#x27; int | &#x27;$&#123;&#x27; int &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int transform &#x27;&#125;&#x27;placeholder ::= &#x27;$&#123;&#x27; int &#x27;:&#x27; any &#x27;&#125;&#x27;choice ::= &#x27;$&#123;&#x27; int &#x27;|&#x27; text (&#x27;,&#x27; text)* &#x27;|&#125;&#x27;variable ::= &#x27;$&#x27; var | &#x27;$&#123;&#x27; var &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; var &#x27;:&#x27; any &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; var transform &#x27;&#125;&#x27;transform ::= &#x27;/&#x27; regex &#x27;/&#x27; (format | text)+ &#x27;/&#x27; optionsformat ::= &#x27;$&#x27; int | &#x27;$&#123;&#x27; int &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int &#x27;:&#x27; &#x27;/upcase&#x27; | &#x27;/downcase&#x27; | &#x27;/capitalize&#x27; &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int &#x27;:+&#x27; if &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int &#x27;:?&#x27; if &#x27;:&#x27; else &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int &#x27;:-&#x27; else &#x27;&#125;&#x27; | &#x27;$&#123;&#x27; int &#x27;:&#x27; else &#x27;&#125;&#x27;regex ::= JavaScript Regular Expression value (ctor-string)options ::= JavaScript Regular Expression option (ctor-options)var ::= [_a-zA-Z] [_a-zA-Z0-9]*int ::= [0-9]+text ::= .* ä¸‹é¢å°†å®ç°è¯»å–æ–‡ä»¶åç§°æˆªå–æ‰æ–‡ä»¶çš„åç¼€æ•ˆæœï¼š foo.text &#x3D;&#x3D;&gt; foo 1234567891011$&#123;TM_FILENAME/(.*)\\\\..+$/$1/&#125; | | | | | | | |-&gt; no options | | | | | |-&gt; references the contents of the first | | capture group | | | |-&gt; regex to capture everything before | the final `.suffix` | |-&gt; resolves to the filename Transform Exampleï¼š Example Output Explanation &quot;$&#123;TM_FILENAME/[\\\\.]/_/&#125;&quot; example-123_456-TEST.js Replace the first . with _ &quot;$&#123;TM_FILENAME/[\\\\.-]/_/g&#125;&quot; example_123_456_TEST_js Replace each . or - with _ &quot;$&#123;TM_FILENAME/(.*)/$&#123;1:/upcase&#125;/&#125;&quot; EXAMPLE-123.456-TEST.JS Change to all uppercase &quot;$&#123;TM_FILENAME/[^0-9^a-z]//gi&#125;&quot; example123456TESTjs Remove non-alphanumeric characters Build value ä»£ç ç‰‡æ®µæ’ä»¶bvtf çš„å®ç°bvtfï¼Œæ˜¯ä¸Šé¢å˜é‡å’Œå˜é‡è½¬æ¢çš„ç»¼åˆåº”ç”¨ï¼Œå®ç°äº†ä¸‹é¢åŠŸèƒ½ è‡ªåŠ¨è¯†åˆ«æ–‡ä»¶åç§° å°†æ–‡ä»¶åç§°å»æ‰åç¼€ï¼Œè½¬æ¢ä¸ºå¤§å†™é©¼å³°æ³•ï¼ˆpascalcaseï¼‰ æºç è·å–æ­¥éª¤ï¼š å»githubå®˜ç½‘ä¸‹è½½å®ƒçš„æºç ï¼Œbuilt-value-snippets åœ¨vscode-&gt;snippets-&gt;snippets.json æ‰¾åˆ°å¯¹åº”çš„æºç ï¼Œå¦‚ä¸‹ 12345678910111213141516171819&#123;&quot;Built Value Type File&quot;: &#123; &quot;prefix&quot;: &quot;bvtf&quot;, &quot;body&quot;: [ &quot;import &#x27;package:built_collection/built_collection.dart&#x27;;&quot;, &quot;import &#x27;package:built_value/built_value.dart&#x27;;&quot;, &quot;&quot;, &quot;part &#x27;$TM_FILENAME_BASE.g.dart&#x27;;&quot;, &quot;&quot;, &quot;abstract class $&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125; implements Built&lt;$&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;, $&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;Builder&gt; &#123;&quot;, &quot; $&#123;2&#125;&quot;, &quot;&quot;, &quot; $&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;._();&quot;, &quot; factory $&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;([void Function($&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;Builder) updates]) = _$$&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;;&quot;, &quot;&#125;&quot; ], &quot;description&quot;: &quot;Built Value Type File whose name corresponds to the file name&quot; &#125;&#125; æ ¸å¿ƒçš„å˜é‡å¦‚ä¸‹ï¼š 12// file name: home_page.dart =&gt; HomePage&quot;$&#123;TM_FILENAME_BASE/(.*)$/$&#123;1:/pascalcase&#125;/&#125;&quot; é€šè¿‡ä¸Šé¢çš„å­¦ä¹ æˆ‘ä»¬å‡ ä¹å¯èƒ½ç¼–å†™æˆ‘ä»¬çš„æ—¥å¸¸éœ€è¦å„ç§ä»£ç ç‰‡æ®µ å¼•ç”¨ built-value-snippets Built Value Snippets VSCode æ’ä»¶ Snippets in Visual Studio Code","categories":[{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"ç”¨Typoraçš„MarkDownç»˜åˆ¶Diagrams(å›¾è§£)","slug":"ç”¨Typoraçš„MarkDownç»˜åˆ¶Diagrams-å›¾è§£","date":"2019-11-29T08:38:05.000Z","updated":"2024-11-02T03:36:52.416Z","comments":true,"path":"2019/11/29/ç”¨Typoraçš„MarkDownç»˜åˆ¶Diagrams-å›¾è§£/","permalink":"https://blog.wangruofeng007.com/2019/11/29/%E7%94%A8Typora%E7%9A%84MarkDown%E7%BB%98%E5%88%B6Diagrams-%E5%9B%BE%E8%A7%A3/","excerpt":"ç®€ä»‹æœ€è¿‘åœ¨ç ”ç©¶è½¯ä»¶è®¾è®¡é¢†åŸŸå¸¸ç”¨å„ç§å›¾è§£ï¼Œå‘ç°Typoradå¯¹MarkDownæ¸²æŸ“diagramsçš„æ”¯æŒç‰¹åˆ«å¥½ï¼Œäºæ˜¯æ•´ç†äº†ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ä½¿ç”¨ï¼Œç›®å‰(æµ‹è¯•ç‰ˆæœ¬0.9.9.18.1(1088))æ”¯æŒä»¥ä¸‹å‡ å¤§ç±»å›¾è§£: Sequence Flowchart Mermaid sequence (æ—¶åºå›¾) flowchart (æµç¨‹å›¾) gantt (ç”˜ç‰¹å›¾)","text":"ç®€ä»‹æœ€è¿‘åœ¨ç ”ç©¶è½¯ä»¶è®¾è®¡é¢†åŸŸå¸¸ç”¨å„ç§å›¾è§£ï¼Œå‘ç°Typoradå¯¹MarkDownæ¸²æŸ“diagramsçš„æ”¯æŒç‰¹åˆ«å¥½ï¼Œäºæ˜¯æ•´ç†äº†ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ä½¿ç”¨ï¼Œç›®å‰(æµ‹è¯•ç‰ˆæœ¬0.9.9.18.1(1088))æ”¯æŒä»¥ä¸‹å‡ å¤§ç±»å›¾è§£: Sequence Flowchart Mermaid sequence (æ—¶åºå›¾) flowchart (æµç¨‹å›¾) gantt (ç”˜ç‰¹å›¾) Sequenceç”±js-sequenceé©±åŠ¨ Flowchartç”±flowchart.jsé©±åŠ¨ Mermaidç”±mermaidé©±åŠ¨ï¼Œæ”¯æŒsequenceï¼Œflowchartï¼Œgantt Sequence â€“ æ—¶åºå›¾UMLæ—¶åºå›¾(sequence)12345å¯¹è±¡A-&gt;å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)å¯¹è±¡B--&gt;å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)å¯¹è±¡A-&gt;å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ UMLæ—¶åºå›¾å¤æ‚(sequence)1234567891011Title: æ ‡é¢˜ï¼šå¤æ‚ä½¿ç”¨å¯¹è±¡A-&gt;å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)å¯¹è±¡B--&gt;å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)å¯¹è±¡B-&gt;å°ä¸‰: ä½ å¥½å—å°ä¸‰--&gt;&gt;å¯¹è±¡A: å¯¹è±¡Bæ‰¾æˆ‘äº†å¯¹è±¡A-&gt;å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼ŸNote over å°ä¸‰,å¯¹è±¡B: æˆ‘ä»¬æ˜¯æœ‹å‹participant CNote right of C: æ²¡äººé™ªæˆ‘ç© UMLæ ‡å‡†æ—¶åºå›¾(mermaid)123456789101112%% æ—¶åºå›¾ä¾‹å­,-&gt; ç›´çº¿ï¼Œ--&gt;è™šçº¿ï¼Œ-&gt;&gt;å®çº¿ç®­å¤´sequenceDiagramparticipant å¼ ä¸‰participant æå››å¼ ä¸‰-&gt;ç‹äº”: ç‹äº”ä½ å¥½å—ï¼Ÿloop å¥åº·æ£€æŸ¥ç‹äº”-&gt;ç‹äº”: ä¸ç–¾ç—…æˆ˜æ–—endNote right of ç‹äº”: åˆç† é£Ÿç‰© &lt;br/&gt;çœ‹åŒ»ç”Ÿ...æå››--&gt;&gt;å¼ ä¸‰: å¾ˆå¥½!ç‹äº”-&gt;æå››: ä½ æ€ä¹ˆæ ·?æå››--&gt;ç‹äº”: å¾ˆå¥½! è¯­æ³•è¯´æ˜ï¼š 12345Title: Here is a titleA-&gt;B: Normal lineB--&gt;C: Dashed lineC-&gt;&gt;D: Open arrowD--&gt;&gt;A: Dashed open arrow flowchart â€“ æµç¨‹å›¾æ¨ªå‘æµç¨‹å›¾(mermaid)123456graph LRA[æ–¹å½¢] --&gt;B(åœ†è§’)B --&gt; C&#123;æ¡ä»¶a&#125;C --&gt;|a=1| D[ç»“æœ1]C --&gt;|a=2| E[ç»“æœ2]F[æ¨ªå‘æµç¨‹å›¾] ç«–å‘æµç¨‹å›¾(mermaid)123456graph TBA[æ–¹å½¢] --&gt;B(åœ†è§’)B --&gt; C&#123;æ¡ä»¶a&#125;C --&gt;|a=1| D[ç»“æœ1]C --&gt;|a=2| E[ç»“æœ2]F[ç«–å‘æµç¨‹å›¾] æ ‡å‡†æµç¨‹å›¾(flow)123456789st=&gt;start: å¼€å§‹æ¡†op=&gt;operation: å¤„ç†æ¡†cond=&gt;condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)sub1=&gt;subroutine: å­æµç¨‹io=&gt;inputoutput: è¾“å…¥è¾“å‡ºæ¡†e=&gt;end: ç»“æŸæ¡†st-&gt;op-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;sub1(right)-&gt;op æ ‡å‡†æµç¨‹å›¾-æ¨ªå‘(flow)12345678910st=&gt;start: å¼€å§‹æ¡†op=&gt;operation: å¤„ç†æ¡†cond=&gt;condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)sub1=&gt;subroutine: å­æµç¨‹io=&gt;inputoutput: è¾“å…¥è¾“å‡ºæ¡†e=&gt;end: ç»“æŸæ¡†st(right)-&gt;op(right)-&gt;condcond(yes)-&gt;io(bottom)-&gt;econd(no)-&gt;sub1(right)-&gt;op ç”˜ç‰¹å›¾æ ·ä¾‹ (gantt)12345678910111213141516171819202122%% è¯­æ³•ç¤ºä¾‹ganttdateFormat YYYY-MM-DDtitle è½¯ä»¶å¼€å‘ç”˜ç‰¹å›¾section è®¾è®¡éœ€æ±‚:done, des1, 2014-01-06,2014-01-08åŸå‹:active, des2, 2014-01-09, 3dUIè®¾è®¡: des3, after des2, 5dæœªæ¥ä»»åŠ¡: des4, after des3, 5dsection å¼€å‘å­¦ä¹ å‡†å¤‡ç†è§£éœ€æ±‚ :crit, done, 2014-01-06,24hè®¾è®¡æ¡†æ¶ :crit, done, after des2, 2då¼€å‘ :crit, active, 3dæœªæ¥ä»»åŠ¡ :crit, 5dè€ :2dsection æµ‹è¯•åŠŸèƒ½æµ‹è¯• :active, a1, after des3, 3då‹åŠ›æµ‹è¯• :after a1 , 20hæµ‹è¯•æŠ¥å‘Š : 48h ä¸é”™çš„ç”»å›¾å·¥å…·ç½‘ç«™ https://www.processon.com https://www.draw.io å‚è€ƒèµ„æ–™ Draw Diagrams With Markdown Typoraç”»æµç¨‹å›¾ã€æ—¶åºå›¾(é¡ºåºå›¾)ã€ç”˜ç‰¹å›¾ï¼ˆè½¬ï¼‰ mermaid mermaid-live-editor","categories":[],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"Typora","slug":"Typora","permalink":"https://blog.wangruofeng007.com/tags/Typora/"}]},{"title":"[è½¬]Objective-C Runtime å¤§ä½¬ç³»åˆ—æ–‡ç« æ•´ç†","slug":"è½¬-Objective-C-Runtime-å¤§ä½¬ç³»åˆ—æ–‡ç« æ•´ç†","date":"2019-11-17T16:41:40.000Z","updated":"2024-11-02T03:36:52.416Z","comments":true,"path":"2019/11/18/è½¬-Objective-C-Runtime-å¤§ä½¬ç³»åˆ—æ–‡ç« æ•´ç†/","permalink":"https://blog.wangruofeng007.com/2019/11/18/%E8%BD%AC-Objective-C-Runtime-%E5%A4%A7%E4%BD%AC%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E6%95%B4%E7%90%86/","excerpt":"ç®€ä»‹æ­¤æ–‡è½¬è‡ªkangzubin æ”¶é›†çš„runtimeå¤§ä½¬ç³»åˆ—æ–‡ç« ï¼Œç‰¹åˆ«é¸£è°¢ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…ã€‚","text":"ç®€ä»‹æ­¤æ–‡è½¬è‡ªkangzubin æ”¶é›†çš„runtimeå¤§ä½¬ç³»åˆ—æ–‡ç« ï¼Œç‰¹åˆ«é¸£è°¢ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…ã€‚ kangzubinæœ€è¿‘é‡æ–°æ¸©ä¹ äº†ä¸‹ Objective-C Runtime ç›¸å…³çš„çŸ¥è¯†ï¼Œè‡ªå·±æ•´ç†äº†ä¸¤ç¯‡æ°´æ–‡ï¼š Objective-C 1.0 ä¸­ç±»ä¸å¯¹è±¡çš„å®šä¹‰ Objective-C 2.0 ä¸­ç±»ä¸å¯¹è±¡çš„å®šä¹‰ ç„¶ååœ¨ç½‘ä¸Šæœç½—äº†ä¸€åœˆï¼Œå‘ç°å¾ˆå¤šå¤§ä½¬ä¹‹å‰éƒ½å†™äº†ä¸€ç³»åˆ—å…³äº Runtime çš„æ–‡ç« ï¼Œæ·±å…¥æµ…å‡ºï¼ŒçœŸæ˜¯è®©äººéš¾ä»¥æœ›å…¶é¡¹èƒŒï¼Œæ”¶é›†å¦‚ä¸‹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ï¼Œæ¬¢è¿è¡¥å……ã€‚ Greg Parker Classes and metaclasses Matt Gallagher What is a meta-class in Objective-C? å—å³°å­ Objective-C Runtime è¿è¡Œæ—¶ä¹‹ä¸€ï¼šç±»ä¸å¯¹è±¡ Objective-C Runtime è¿è¡Œæ—¶ä¹‹äºŒï¼šæˆå‘˜å˜é‡ä¸å±æ€§ Objective-C Runtime è¿è¡Œæ—¶ä¹‹ä¸‰ï¼šæ–¹æ³•ä¸æ¶ˆæ¯ Objective-C Runtime è¿è¡Œæ—¶ä¹‹å››ï¼šMethod Swizzling Objective-C Runtime è¿è¡Œæ—¶ä¹‹äº”ï¼šåè®®ä¸åˆ†ç±» Objective-C Runtime è¿è¡Œæ—¶ä¹‹å…­ï¼šæ‹¾é— halfrost ç¥ç»ç—…é™¢ Objective-C Runtime å…¥é™¢ç¬¬ä¸€å¤© â€”â€” isa å’Œ Class ç¥ç»ç—…é™¢ Objective-C Runtime ä½é™¢ç¬¬äºŒå¤© â€”â€” æ¶ˆæ¯å‘é€ä¸è½¬å‘ ç¥ç»ç—…é™¢ Objective-C Runtime å‡ºé™¢ç¬¬ä¸‰å¤© â€”â€” å¦‚ä½•æ­£ç¡®ä½¿ç”¨ Runtime Objc å¯¹è±¡çš„ä»Šç”Ÿä»Šä¸– æ¨è§ç‰ Objective-C Runtime Objective-C å¼•ç”¨è®¡æ•°åŸç† Objective-C æ¶ˆæ¯å‘é€ä¸è½¬å‘æœºåˆ¶åŸç† é›·çº¯é”‹ Objective-C å¯¹è±¡æ¨¡å‹ Objective-C +load vs +initialize Objective-C Category çš„å®ç°åŸç† Objective-C Autorelease Pool çš„å®ç°åŸç† Objective-C Method Swizzling çš„æœ€ä½³å®è·µ Objective-C Associated Objects çš„å®ç°åŸç† draveness&#x2F;analyze ä» NSObject çš„åˆå§‹åŒ–äº†è§£ isa æ·±å…¥è§£æ ObjC ä¸­æ–¹æ³•çš„ç»“æ„ ä»æºä»£ç çœ‹ ObjC ä¸­æ¶ˆæ¯çš„å‘é€ ä½ çœŸçš„äº†è§£ load æ–¹æ³•ä¹ˆï¼Ÿ è‡ªåŠ¨é‡Šæ”¾æ± çš„å‰ä¸–ä»Šç”Ÿ é»‘ç®±ä¸­çš„ retain å’Œ release å…³è”å¯¹è±¡ AssociatedObject å®Œå…¨è§£æ æ‡’æƒ°çš„ initialize æ–¹æ³• å¯¹è±¡æ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ï¼ˆiOSï¼‰ CornBallast Runtime æ·±åº¦è§£æä»¥åŠå®ç”¨æŠ€å·§ Runtime å¥‡æŠ€æ·«å·§__å¸¦ä½ æ·±å…¥ç†è§£ Runtime ç‰¹æœ‰æ¦‚å¿µ Runtime å¥‡æŠ€æ·«å·§__ä¸å—é™åˆ¶çš„æ¶ˆæ¯å‘é€ Runtime å¥‡æŠ€æ·«å·§__è·å–ç±»çš„å®ä¾‹å˜é‡ä»¥åŠå±æ€§å¹¶å¼ºåŠ¿ ä¸KVCã€msgSend æ··ç”¨ Runtime å¥‡æŠ€æ·«å·§__æ–¹æ³•äº¤æ¢ Runtime å¥‡æŠ€æ·«å·§__åŠ¨æ€é“¾æ¥å¯¹è±¡ä»¥åŠç»™åˆ†ç±»æ·»åŠ å±æ€§ Runtime å¥‡æŠ€æ·«å·§__åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘æ”¹å–„å¼‚å¸¸ å”å·§ Objective-Cå¯¹è±¡æ¨¡å‹åŠåº”ç”¨ ibireme Objective-C ä¸­çš„ç±»å’Œå¯¹è±¡ sunnyxx objc ä¸é¸­å­å¯¹è±¡ï¼ˆä¸Šï¼‰ objc ä¸é¸­å­å¯¹è±¡ï¼ˆä¸‹ï¼‰ ç¥ç»ç—…é™¢ objc runtime å…¥é™¢è€ƒè¯• é‡è¯† Objective-C Runtime - Smalltalk ä¸ C çš„èåˆ é‡è¯† Objective-C Runtime - çœ‹é€ Type ä¸ Value å…¶ä»–æ­¤å¤–ï¼Œåœ¨ç®€ä¹¦ã€æ˜é‡‘ç­‰æŠ€æœ¯åšå®¢å¹³å°ï¼Œä»¥åŠ Google ä¸Šæœç´¢ Objective-C Runtime å…³é”®è¯ï¼Œä¹Ÿèƒ½æ‰¾å‡ºæˆåƒä¸Šä¸‡ç›¸å…³çš„æ–‡ç« ã€‚","categories":[],"tags":[{"name":"Runtime","slug":"Runtime","permalink":"https://blog.wangruofeng007.com/tags/Runtime/"}]},{"title":"ä»é›¶å¼€å§‹åˆ›å»ºcocoaPodså…¬æœ‰åº“","slug":"ä»é›¶å¼€å§‹åˆ›å»ºcocoaPodså…¬æœ‰åº“","date":"2019-11-17T10:50:41.000Z","updated":"2024-11-02T03:36:52.415Z","comments":true,"path":"2019/11/17/ä»é›¶å¼€å§‹åˆ›å»ºcocoaPodså…¬æœ‰åº“/","permalink":"https://blog.wangruofeng007.com/2019/11/17/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%88%9B%E5%BB%BAcocoaPods%E5%85%AC%E6%9C%89%E5%BA%93/","excerpt":"ç®€ä»‹è¿™ç¯‡æ–‡ç« è®°å½•äº†ä¸€ä¸ªå…¬å…±Podåº“ RFSegmentViewçš„åˆ›å»ºè¿‡ç¨‹","text":"ç®€ä»‹è¿™ç¯‡æ–‡ç« è®°å½•äº†ä¸€ä¸ªå…¬å…±Podåº“ RFSegmentViewçš„åˆ›å»ºè¿‡ç¨‹ æ³¨å†ŒCocoaPodsè´¦å·æƒ³è¦åˆ›å»ºä¸€ä¸ªå¼€æºpodåº“, é¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†ŒCocoaPods, è¿™é‡Œä½¿ç”¨trunkæ–¹å¼, é‚£ä¹ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œï¼ˆè¿™é‡Œé»˜è®¤ä½ å·²ç»å®‰è£…å¥½CocoaPodsç¯å¢ƒï¼‰: 1pod trunk register é‚®ç®±åœ°å€ &#x27;ç”¨æˆ·å&#x27; --verbose è¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨githubé‚®ç®±å’Œç”¨æˆ·å, ç„¶ååœ¨ä½ çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶,ä¸‹é¢æ˜¯ç¡®è®¤é‚®ä»¶çš„å†…å®¹ï¼š åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»é“¾æ¥ç¡®è®¤å³æ³¨å†ŒæˆåŠŸ, æˆåŠŸä¹‹åå¯ä»¥ç»ˆç«¯æ‰§è¡Œ: 1pod trunk me é€šè¿‡ä¸Šé¢çš„å‘½ä»¤æŸ¥çœ‹æ³¨å†Œä¿¡æ¯ï¼Œé‡Œé¢ä¼šå±•ç¤ºè¯¥è´¦å·ä¸‹çš„æ‰€æœ‰çš„Podåº“ï¼Œå¯ä»¥ç”¨æ­¤æ–¹å¼æŸ¥çœ‹è‡ªå·±å‘å¸ƒè¿‡çš„Pods 12345678âœ myBlog git:(master) âœ— pod trunk me - Name: wangruofeng - Email: wangruofeng007@gmail.com - Since: November 16th, 12:17 - Pods: - RFSegmentView - Sessions: - November 16th, 12:17 - March 24th, 2020 04:54. IP: 119.123.133.39 åˆ›å»ºå…±äº«åº“æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“å…±äº«åº“éœ€è¦ä¸‰ä¸ªå¿…ä¸å¯å°‘çš„éƒ¨åˆ†: å…±äº«æ–‡ä»¶å¤¹(æ–‡ä»¶å¤¹å­˜æ”¾ç€ä½ è¦å…±äº«çš„å†…å®¹, ä¹Ÿå°±æ˜¯å…¶ä»–äººé€šè¿‡podå®‰è£…å¾—åˆ°çš„æ–‡ä»¶, .podspecæ–‡ä»¶ä¸­çš„source_fileséœ€è¦æŒ‡å®šæ­¤æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ç±»å‹); LICENSEæ–‡ä»¶(é»˜è®¤ä¸€èˆ¬é€‰æ‹©MIT); åº“å.podspec(æœ¬åº“çš„å„é¡¹ä¿¡æ¯æè¿°, éœ€è¦æäº¤ç»™CocoaPods, podé€šè¿‡è¿™ä¸ªæ–‡ä»¶æŸ¥æ‰¾åˆ°ä½ å…±äº«çš„åº“). å¦‚æœæ²¡æœ‰ podspec æ–‡ä»¶å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œåˆå§‹åŒ– 1pod lib create åº“å ç¼–è¾‘.podspecæ–‡ä»¶ä»¥ RFSegmentView.podspec ä¸ºä¾‹ï¼š 1234567891011121314151617181920Pod::Spec.new do |spec| spec.name = &quot;RFSegmentView&quot; spec.version = &quot;1.3.0&quot; spec.summary = &quot;Imitate iOS7 style segmented controls, simple, practicalï¼&quot; spec.homepage = &quot;https://github.com/wangruofeng/RFSegmentView&quot; spec.license = &#123; :type =&gt; &quot;MIT&quot;, :file =&gt; &quot;LICENSE.md&quot; &#125; spec.author = &#123; &quot;wangruofeng&quot; =&gt;&quot;wangruofeng007@gmail.com&quot; &#125; spec.platform = :ios, &quot;8.0&quot; spec.source = &#123; :git =&gt; &#x27;https://github.com/wangruofeng/RFSegmentView.git&#x27;, :tag =&gt; spec.version.to_s&#125; spec.source_files = &quot;RFSegmentView/RFSegmentView.&#123;h,m&#125;&quot; # spec.exclude_files = &quot;Classes/Exclude&quot; # spec.public_header_files = &quot;Classes/**/*.h&quot; spec.frameworks = &#x27;UIKit&#x27;, &#x27;CoreGraphics&#x27;, &#x27;Foundation&#x27; spec.requires_arc = true # spec.dependency &quot;JSONKit&quot;, &quot;~&gt; 1.4&quot; æ·»åŠ ä¾èµ–åº“end ç¼–å†™å®Œæˆå, æˆ‘ä»¬éœ€è¦éªŒè¯.podspecæ–‡ä»¶çš„åˆæ³•æ€§, è¿™é‡Œéœ€è¦ç»ˆç«¯cdåˆ°.podspecæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹, æ‰§è¡Œ: 1pod lib lint RFSegmentView.podspec å¦‚æœ‰è­¦å‘Šæˆ–è€…é”™è¯¯è¯·é‡æ–°æ£€æŸ¥ä½ çš„ç¼–å†™æ­£ç¡®æ€§, å¦‚æœæ²¡æœ‰é—®é¢˜ä¼šå‡ºç° 123-&gt; RFSegmentView (1.3.0) RFSegmentView passed validation. æ‰“tagï¼Œå‘å¸ƒæ–°ç‰ˆæœ¬ä¸€åˆ‡å‡†å¤‡å°±ç»ªå, æˆ‘ä»¬éœ€è¦åœ¨ä½ çš„gitä»“åº“é‡Œé¢å­˜åœ¨ä¸€ä¸ªä¸.podspecæ–‡ä»¶ä¸­ä¸€è‡´çš„ç‰ˆæœ¬, è¿™é‡Œä½ å¯ä»¥åœ¨ä½ çš„gitä»“åº“ä¸­çš„å‡†å¤‡ä¸€ä¸ªç‰ˆæœ¬, ä¹Ÿå¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ç»ˆç«¯å‘½ä»¤: 12git tag -m &#x27;first release&#x27; &#x27;1.3.0&#x27;git push --tag #æ¨é€tagåˆ°è¿œç«¯ä»“åº“ æˆåŠŸä¹‹åå³å¯åœ¨ä½ åˆ†æ”¯é‡Œé¢çœ‹åˆ°è¿™ä¸ªtagçš„ç‰ˆæœ¬. å‘å¸ƒåº“æè¿°æ–‡ä»¶ä¸‹é¢æˆ‘ä»¬éœ€è¦å‘å¸ƒè‡ªå·±çš„åº“æè¿°æ–‡ä»¶podspecç»™cocoapodsåŒæ ·åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹, ç»ˆç«¯æ‰§è¡Œ: 1pod trunk push RFSegmentView.podspec å°†ä½ çš„åº“æ–‡ä»¶.podspecæ–‡ä»¶æäº¤åˆ°å…¬æœ‰çš„specsä¸Šé¢, è¿™ä¸€æ­¥åšçš„æ“ä½œæ˜¯éªŒè¯ä½ çš„podspecæ–‡ä»¶æ˜¯å¦åˆæ³•+æäº¤åˆ°specsä¸­+å°†ä¸Šä¼ çš„podspecæ–‡ä»¶è½¬æˆjsonæ ¼å¼æ–‡ä»¶,å¦‚æœé‡å¤æäº¤ä¼šå‡ºç°ä¸‹é¢çš„ä¿¡æ¯: 1[!] Unable to accept duplicate entry for: RFSegmentView (1.3.0) ä¸ºäº†æµ‹è¯•å°†RFSegmentView.podspecé‡Œé¢çš„spec.versionä¿®æ”¹æˆ1.3.1,æˆåŠŸåä¼šå‡ºç°Congratsä¿¡æ¯: 12345678910111213141516171819âœ RFSegmentView git:(master) pod trunk push RFSegmentView.podspecUpdating spec repo `trunk`Validating podspec -&gt; RFSegmentView (1.3.1) - NOTE | xcodebuild: note: Using new build system - NOTE | [iOS] xcodebuild: note: Planning build - NOTE | [iOS] xcodebuild: note: Constructing build description - NOTE | [iOS] xcodebuild: warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (in target &#x27;App&#x27; from project &#x27;App&#x27;)Updating spec repo `trunk`-------------------------------------------------------------------------------- ğŸ‰ Congrats ğŸš€ RFSegmentView (1.3.1) successfully published ğŸ“… November 17th, 07:08 ğŸŒ https://cocoapods.org/pods/RFSegmentView ğŸ‘ Tell your friends!-------------------------------------------------------------------------------- æŸ¥æ‰¾å’Œä½¿ç”¨æ–°åˆ›å»ºçš„åº“æˆåŠŸåéœ€è¦ç­‰å¾…çš„æ—¶é—´ä¸å®š, ç›®å‰ä¸€èˆ¬æ¯”è¾ƒå¿«, ä¸€èˆ¬ä½¿ç”¨pod setupå’Œpod searchæŸ¥çœ‹æ˜¯å¦å·²ç»å¯ä»¥ä½¿ç”¨, å¦‚æœ pod search RFSegmentView ä¸€ç›´æœç´¢ä¸åˆ°ï¼Œå°è¯•åˆ é™¤pod setupæˆåŠŸåç”Ÿæˆçš„~/Library/Caches/CocoaPods/search_index.jsonæ–‡ä»¶, è¯¥æ–‡æ˜¯ç”¨æ¥æŸ¥æ‰¾çš„ç´¢å¼•æ–‡ä»¶, ç»ˆç«¯è¾“å…¥: 1rm ~/Library/Caches/CocoaPods/search_index.json åˆ é™¤æˆåŠŸåå†æ‰§è¡Œ:pod search åº“å, ç­‰å¾…è¾“å‡ºï¼šCreating search index for spec repo &#39;master&#39;.. Done!ç¨ç­‰ç‰‡åˆ»å°±ä¼šå‡ºç°ä½ æƒ³è¦çš„ç»“æœ,å¦‚æœè¿˜æ˜¯æ²¡æœ‰ç»“æœéœ€è¦ç­‰å¾…podåŒæ­¥ï¼Œè¿‡ä¸€æ®µæ—¶é—´å†æ¥å°è¯•ã€‚ æ›´æ–°ç»´æŠ¤podspecå¦‚æœæœ‰é”™è¯¯æˆ–è€…éœ€è¦è¿­ä»£ç‰ˆæœ¬,ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶åæ¨é€åˆ°è¿œç«¯ä»“åº“å, éœ€è¦ä¿®æ”¹podspecä¸­çš„ç‰ˆæœ¬å·, å¹¶é‡æ–°æ‰“tagä¸Šä¼ , å†è¿›è¡Œæ–°ä¸€è½®çš„éªŒè¯å’Œå‘å¸ƒã€‚ å‚è€ƒèµ„æ–™ CocoaPodsåˆ›å»ºå…¬æœ‰å’Œç§æœ‰Podåº“æ–¹æ³•æ€»ç»“ Podspecs Podspec attributes","categories":[],"tags":[{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://blog.wangruofeng007.com/tags/CocoaPods/"}]},{"title":"Podå¸¸ç”¨å‘½ä»¤","slug":"Podå¸¸ç”¨å‘½ä»¤","date":"2019-11-14T15:45:42.000Z","updated":"2024-11-02T03:36:52.415Z","comments":true,"path":"2019/11/14/Podå¸¸ç”¨å‘½ä»¤/","permalink":"https://blog.wangruofeng007.com/2019/11/14/Pod%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"ç®€ä»‹ä»‹ç»Podå¸¸ç”¨çš„å‡ ç§å‘½ä»¤","text":"ç®€ä»‹ä»‹ç»Podå¸¸ç”¨çš„å‡ ç§å‘½ä»¤ pod initç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šåˆå§‹åŒ–é¡¹ç›®ï¼Œå¦‚æœå·²ç»åˆå§‹åŒ–åè°ƒç”¨ä¼šæŠ›å‡ºä»¥ä¸‹é”™è¯¯ã€‚ [!] Existing Podfile found in directory pod installæ ¹æ®podfile.lockæ–‡ä»¶ä¸­æŒ‡å®šçš„podä¾èµ–åº“çš„ç‰ˆæ›´æ–°é¡¹ç›®çš„podä¾èµ–åº“ã€‚åœ¨é¦–æ¬¡æ‰§è¡Œpod installå‘½ä»¤æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨podfile.lockæ–‡ä»¶ä¼šç”Ÿæˆè¯¥æ–‡ä»¶ï¼Œå¹¶ä¸”åŒæ—¶ç”Ÿæˆxcworkspaceæ–‡ä»¶å’Œpodsæ–‡ä»¶å¤¹ã€‚ pod installæ‰§è¡Œåï¼Œåç»­çš„é¡¹ç›®éœ€è¦ä½¿ç”¨xxx.xcworkspaceæ‰“å¼€ å‚æ•°ï¼šâ€“no-repo-update ä¸æ›´æ–°podä»“åº“ï¼Œä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥åŠ å¿«pod installçš„æ›´æ–°é€Ÿåº¦ã€‚ eg: pod install --no-repo-update pod updateè¿™ä¸ªå‘½ä»¤ä¼šæ£€æŸ¥podfile.lockæ–‡ä»¶ä¸­çš„podä¾èµ–åº“çš„ç‰ˆæœ¬ï¼Œå¹¶æ›´æ–°ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°podfile.lockæ–‡ä»¶ã€‚ é€‰é¡¹ï¼šâ€“exclude-pods&#x3D;xxx åªæ›´æ–°xxxä¹‹å¤–çš„ä»“åº“ã€‚ eg: pod update --exclude-pods=AFNetworking é€‰é¡¹ï¼šxxx â€“no-repo-update åªæ›´æ–°xxxä¾èµ–ä¸æ›´æ–°é™¤å®ƒä¹‹å¤–çš„å…¶ä»–ä¾èµ–ã€‚ eg: pod update AFNetworking --no-repo-update ä¸€èˆ¬æ²¡æœ‰ç‰¹åˆ«å¿…è¦æ—¶ä¸å»ºè®®ä½¿ç”¨pod updateå‘½ä»¤,å°½é‡ä½¿ç”¨pod installï¼Œå¦‚æœå®åœ¨ä¸è¡Œå†ä½¿ç”¨å¸¦ä¸Šé¢é€‰é¡¹çš„od updateï¼Œå¦‚æœæ›´æ–°å¤±è´¥æ‰ä½¿ç”¨pod updateå‘½åï¼Œè¿™æ ·èƒ½æ˜æ˜¾åŠ å¿«æ›´æ–°æµç¨‹ï¼ŒèŠ‚çº¦æ›´æ–°ä¾èµ–çš„æ—¶é—´ã€‚ pod searchåé¢æ›´æ–°ä¾èµ–åº“çš„åç§°ï¼Œæœç´¢æŒ‡å®šä¾èµ–åº“ eg: pod search AFNetworking 123456789101112131415161718-&gt; AFNetworking (3.2.1) A delightful iOS and OS X networking framework. pod &#x27;AFNetworking&#x27;, &#x27;~&gt; 3.2.1&#x27; - Homepage: https://github.com/AFNetworking/AFNetworking - Source: https://github.com/AFNetworking/AFNetworking.git - Versions: 3.2.1, 3.2.0, 3.1.0, 3.0.4, 3.0.3, 3.0.2, 3.0.1, 3.0.0, 3.0.0-beta.3, 3.0.0-beta.2, 3.0.0-beta.1, 2.7.0, 2.6.3, 2.6.2, 2.6.1, 2.6.0, 2.5.4, 2.5.3, 2.5.2, 2.5.1, 2.5.0, 2.4.1, 2.4.0, 2.3.1, 2.3.0, 2.2.4, 2.2.3, 2.2.2, 2.2.1, 2.2.0, 2.1.0, 2.0.3, 2.0.2, 2.0.1, 2.0.0, 2.0.0-RC3, 2.0.0-RC2, 2.0.0-RC1, 1.3.4, 1.3.3, 1.3.2, 1.3.1, 1.3.0, 1.2.1, 1.2.0, 1.1.0, 1.0.1, 1.0, 1.0RC3, 1.0RC2, 1.0RC1, 0.10.1, 0.10.0, 0.9.2, 0.9.1, 0.9.0, 0.7.0, 0.5.1 [master repo] - Subspecs: - AFNetworking/Serialization (3.2.1) - AFNetworking/Security (3.2.1) - AFNetworking/Reachability (3.2.1) - AFNetworking/NSURLSession (3.2.1) - AFNetworking/UIKit (3.2.1) pod repoæŸ¥çœ‹æ‰€æœ‰pod ä»“åº“çš„æº 1234master- Type: git (master)- URL: https://github.com/CocoaPods/Specs.git- Path: /Users/wangruofeng/.cocoapods/repos/master é€‰é¡¹ï¼šremove xxx eg: pod repo remove xxx ç§»é™¤xxx repoæº pod tryéå¸¸æ£’ï¼Œå´å¾ˆå°‘æœ‰äººçŸ¥é“ï¼Œä½¿æ‚¨å¯ä»¥åœ¨å°†åº“æ·»åŠ åˆ°é¡¹ç›®ä¹‹å‰å¯¹å…¶è¿›è¡Œæµ‹è¯•é©±åŠ¨ã€‚ é€‰é¡¹ï¼štry xxx 1pod try AFNetworking pod outdatedæ˜¾ç¤ºå½“å‰ Podfile.lockæ–‡ä»¶ä¸­è¿‡æœŸçš„podsï¼Œä»…ä»…æ˜¯æ¥è‡ªspec reposï¼Œä¸åŒ…å«æ¥è‡ªæœ¬åœ°å’Œå¤–éƒ¨çš„èµ„æºã€‚ gem source æ“ä½œå½“å‰gemæºæŸ¥çœ‹ gem source -l 123*** CURRENT SOURCES ***https://gems.ruby-china.com/ ç§»é™¤æŒ‡å®šçš„gemæº gem source - - remove https://rubygems.org/ æ·»åŠ æŒ‡å®šçš„gemæº gem source - a https://gems.ruby-china.com/ æ›´æ–°cocoapod sudo gem install cocoapods","categories":[],"tags":[{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://blog.wangruofeng007.com/tags/CocoaPods/"},{"name":"Skill","slug":"Skill","permalink":"https://blog.wangruofeng007.com/tags/Skill/"}]},{"title":"ä»Octopressè¿ç§»åšå®¢åˆ°hexo","slug":"ä»Octopressè¿ç§»åšå®¢åˆ°hexo","date":"2019-11-10T10:16:11.000Z","updated":"2024-11-02T06:08:23.409Z","comments":true,"path":"2019/11/10/ä»Octopressè¿ç§»åšå®¢åˆ°hexo/","permalink":"https://blog.wangruofeng007.com/2019/11/10/%E4%BB%8EOctopress%E8%BF%81%E7%A7%BB%E5%8D%9A%E5%AE%A2%E5%88%B0hexo/","excerpt":"","text":"ç®€ä»‹æœ€è¿‘å‡†å¤‡æ›´æ–°åšå®¢ï¼ˆä»¥å‰çš„åŸºäºOctopressï¼‰ï¼Œå»å†™çš„æ—¶å€™çªç„¶å‘ç°ä»¥å‰çš„åšå®¢è·‘ä¸èµ·æ¥äº†ã€‚ã€‚ã€‚å€’è…¾äº†ä¸€ä¸‹ï¼Œåœ¨æ‰§è¡Œåšå®¢æ›´æ–°æ—¶rake generateï¼Œä¸€ç›´æŠ¥é”™ï¼Œé”™è¯¯å‡ºç°åœ¨é«˜äº®è§£ææ¨¡å— Pygmentsï¼Œå°è¯•å‡çº§jekyllä½†æ˜¯å’Œå®ƒç›¸å…³çš„ä¾èµ–æ¨¡å—è¿˜æ˜¯æœ‰é—®é¢˜ã€‚ 1234567âœ Octopress git:(source) âœ— rake generate## Generating Site with JekyllConfiguration file: /Users/wangruofeng/Documents/Git Repositories/Octopress/_config.yml Source: source Destination: public Generating... jekyll 2.5.3 | Error: Pygments can&#x27;t parse unknown language: objective-c. åé¢å»Octopresså®˜ç½‘æŸ¥äº†äº†ï¼Œå‘ç°ä¸Šæ¬¡æ›´æ–°è¿˜æ˜¯2015.01.15çš„äº‹äº†ï¼Œåç»­ä¹Ÿæ²¡æœ‰æ›´æ–°ï¼Œäºæ˜¯è§‰å¾—è¿™ä¸ªä¸å¤ªé è°±ï¼Œå‡†å¤‡æ¢ä¸€ä¸ªï¼Œè°ƒç ”äº†ä¸€ä¸‹ï¼Œå‘ç°ä½¿ç”¨hexoçš„æŒºå¤šï¼Œäºæ˜¯å¼€å§‹æ£è…¾èµ·æ¥ã€‚ã€‚ã€‚ å‡†å¤‡ç¯å¢ƒ\bå‡†å¤‡ node å’Œ git ç¯å¢ƒï¼Œ é¦–å…ˆï¼Œå®‰è£… NodeJSï¼Œå› ä¸º Hexo æ˜¯åŸºäº Node.js é©±åŠ¨çš„ä¸€æ¬¾åšå®¢æ¡†æ¶ã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç›¸åº”å‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæˆåŠŸä¼šæœ‰ç›¸åº”çš„ç‰ˆæœ¬å·ã€‚ 123456âœ myBlog git:(master) âœ— git versiongit version 2.24.0âœ myBlog git:(master) âœ— node -vv12.13.0âœ myBlog git:(master) âœ— npm -v6.12.0 å®‰è£…Hexoå¦‚æœä»¥ä¸Šç¯å¢ƒå‡†å¤‡å¥½äº†å°±å¯ä»¥ä½¿ç”¨ npm å¼€å§‹å®‰è£… Hexo äº†ã€‚ä¹Ÿå¯æŸ¥çœ‹ Hexo çš„è¯¦ç»†æ–‡æ¡£ã€‚ åœ¨å‘½ä»¤è¡Œè¾“å…¥æ‰§è¡Œä»¥ä¸‹\bå‘½ä»¤ï¼š 1npm install -g hexo-cli æ²¡æœ‰æƒé™çš„è¯å¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯: 12345678910111213npm ERR! code EACCESnpm ERR! syscall mkdirnpm ERR! path /Users/wangruofeng/.npm/_cacache/content-v2/sha512/0b/8anpm ERR! errno -13npm ERR! npm ERR! Your cache folder contains root-owned files, due to a bug innpm ERR! previous versions of npm which has since been addressed.npm ERR! npm ERR! To permanently fix this problem, please run:npm ERR! sudo chown -R 501:20 &quot;/Users/wangruofeng/.npm&quot;npm ERR! A complete log of this run can be found in:npm ERR! /Users/wangruofeng/.npm/_logs/2019-11-10T07_21_42_135Z-debug.log æŠ¥é”™çš„è¯åŠ ä¸Š sudoé‡è¯•ä¸€æ¬¡æˆ–è€…æ‰§è¡Œsudo chown -R 501:20 â€œ&#x2F;Users&#x2F;wangruofeng&#x2F;.npmâ€ 1234âœ Git Repositories sudo npm install -g hexo-cli/usr/local/Cellar/node/5.7.0/bin/hexo -&gt; /usr/local/Cellar/node/5.7.0/lib/node_modules/hexo-cli/bin/hexo+ hexo-cli@3.1.0added 67 packages from 317 contributors in 27.347s å®‰è£… Hexo å®Œæˆåï¼Œå†æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚ 123hexo init myBlogcd myBlognpm install æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š 12345678.â”œâ”€â”€ _config.yml # ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ â”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffolds # æ¨¡ç‰ˆæ–‡ä»¶å¤¹â”œâ”€â”€ source # èµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤ _posts æ–‡ä»¶ï¼Œå…¶ä»–ä»¥ä¸‹åˆ’çº¿_å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ä¸ä¼šè¢«ç¼–è¯‘æ‰“åŒ…åˆ°publicæ–‡ä»¶å¤¹| â”œâ”€â”€ _drafts # è‰ç¨¿æ–‡ä»¶| â””â”€â”€ _posts # æ–‡ç« Markdowmæ–‡ä»¶ â””â”€â”€ themes # ä¸»é¢˜æ–‡ä»¶å¤¹ å¥½äº†ï¼Œå¦‚æœä¸Šé¢çš„\bå‘½ä»¤éƒ½æ²¡æŠ¥é”™çš„è¯ï¼Œå°±æ­å–œäº†ï¼Œè¿è¡Œ hexo s å‘½ä»¤ï¼Œå…¶ä¸­ s æ˜¯ server çš„\bç¼©å†™ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:4000 å›è½¦å°±å¯ä»¥é¢„è§ˆæ•ˆæœäº†ã€‚ 1hexo s è‡³æ­¤ï¼Œä½ æœ¬åœ°çš„åšå®¢å°±å·²ç»æ­å»ºæˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯éƒ¨ç½²åˆ° Github Page äº†ã€‚ éƒ¨ç½²åˆ°GitHubæ­¤æ—¶ï¼Œæœ¬åœ°å’ŒGithubçš„å·¥ä½œåšå¾—å·®ä¸äº†ï¼Œæ˜¯æ—¶å€™æŠŠå®ƒä»¬ä¸¤ä¸ªè¿æ¥èµ·æ¥äº†ã€‚ä½ \bä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜ç½‘çš„éƒ¨ç½²æ•™ç¨‹ã€‚ å…ˆä¸ç€æ€¥ï¼Œéƒ¨ç½²ä¹‹å‰è¿˜éœ€è¦ä¿®æ”¹é…ç½®å’Œå®‰è£…éƒ¨ç½²æ’ä»¶ã€‚ ç¬¬ä¸€ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ _config.yml é…ç½®æ–‡ä»¶\bé…ç½®å‚æ•°ã€‚æ‹‰åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¡«ä¸Šå¦‚ä¸‹é…ç½®ï¼ˆä¹Ÿå¯åŒæ—¶éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“ï¼Œåé¢å†è¯´ï¼‰ï¼š 1234567# Deployment## Docs: http://hexo.io/docs/deployment.htmldeploy: type: git repo: github: https://github.com/wangruofeng/wangruofeng.github.io.git branch: master ç¬¬äºŒï¼šè¦å®‰è£…ä¸€ä¸ªéƒ¨ç½²\bæ’ä»¶ hexo-deployer-gitã€‚ 1npm install hexo-deployer-git --save æœ€åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥éƒ¨ç½²ä¸Šä¼ å•¦ï¼Œä»¥ä¸‹ g æ˜¯ generate ç¼©å†™ï¼Œd æ˜¯ deploy ç¼©å†™ 1hexo g -d ç¨ç­‰ä¸€ä¼šï¼Œåœ¨æµè§ˆå™¨è®¿é—®ç½‘å€ï¼š https:&#x2F;&#x2F;ä½ çš„ç”¨æˆ·å.github.io å°±ä¼šçœ‹åˆ°ä½ çš„åšå®¢å•¦ï¼ï¼ å¼€å§‹å†™ä½œåšå®¢æ­å¥½äº†ï¼Œå°±å¼€å§‹å†™æ–‡ç« äº†ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œè¯¦ç»†çš„æ–‡æ¡£å¯ä»¥çœ‹ hexo å®˜ç½‘ã€‚ æ–°å»ºæ–‡ç« ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ 1hexo new &#x27;æ–‡ç« æ ‡é¢˜&#x27; æ‰§è¡Œå®Œæˆåå¯ä»¥åœ¨ &#x2F;source&#x2F;_posts ä¸‹çœ‹åˆ°ä¸€ä¸ªâ€œæ–‡ç« æ ‡é¢˜.mdâ€çš„æ–‡ç« æ–‡ä»¶å•¦ã€‚.md å°±æ˜¯ Markdown æ ¼å¼çš„æ–‡ä»¶ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸€ä¸‹ï¼Œè¯­æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ åœ¨ Markdown æ–‡ç« é‡Œé¢è¾“å…¥ä½ çš„æ–‡ç« å†…å®¹ å†æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤ 12hexo g # ç”Ÿæˆç›¸å…³æ–‡ä»¶hexo s # éƒ¨ç½²åˆ°æœ¬åœ° æœ€åï¼Œåªè¦éƒ¨ç½²åˆ°ä½ çš„ Github ä¸Šå°±å¯ä»¥äº†ï¼ 12hexo cleanhexo g -d éƒ¨ç½²å‰æœ€å¥½èƒ½å…ˆæ‰§è¡Œä¸€ä¸‹ hexo clean å‘½ä»¤ï¼Œæ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ å¦å¤–ï¼Œå¦‚æœä½ çš„æ–‡ç« æš‚æ—¶ä¸å‘å¸ƒå¯ä»¥å…ˆä¿å­˜åœ¨è‰ç¨¿é‡Œé¢ã€‚ç”Ÿæˆè‰ç¨¿çš„æ–¹æ³•å’Œæ–‡ç« å·®ä¸å¤š hexo new draft â€œæ–‡ç« æ ‡é¢˜â€ï¼Œç”Ÿæˆåä¼šåœ¨ &#x2F;source&#x2F;_drafts é‡Œçœ‹åˆ°ä½ çš„è‰ç¨¿æ–‡ç« ã€‚å½“ä½ æƒ³å‘å¸ƒæ—¶åªè¦æ‰§è¡Œ publish å‘½ä»¤å³å¯å‘å¸ƒåˆ°åšå®¢ã€‚ 1hexo publish [layout] &lt;filename&gt; é‡åˆ°çš„å‘1. Hexo: TypeError: Cannot set property â€˜lastIndexâ€™ of undefinedè§£å†³æ–¹æ¡ˆæ˜¯ å°†ä½ å·¥ç¨‹ä¸‹çš„ _config.yml (è¿™ä¸ªä¸æ˜¯ä¸»é¢˜çš„_config.yml) æ–‡ä»¶é‡Œé¢çš„ auto_detect è®¾ç½®ä¸º falseã€‚ 12345highlight: enable: true line_number: true auto_detect: false tab_replace: 2.ä¿®æ”¹å®Œ hexo ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ é‡æ–° generate æ–‡ä»¶ä¸ç”Ÿæ•ˆä½¿ç”¨ hexo çš„å‘½ä»¤ hexo clean,æ¸…é™¤ä¸€ä¸‹ã€‚ å‚è€ƒé“¾æ¥ è¿è¡Œ hexo g å‡ºé”™ #1913 æœ‰å“ªäº›å¥½çœ‹çš„ Hexo ä¸»é¢˜ï¼Ÿ è¶…è¯¦ç»†Hexo+Github Pageæ­å»ºæŠ€æœ¯åšå®¢æ•™ç¨‹ã€æŒç»­æ›´æ–°ã€‘","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://blog.wangruofeng007.com/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.wangruofeng007.com/tags/Hexo/"}]},{"title":"NSNumberè½¬NSStringä¸¢ç²¾é—®é¢˜","slug":"2017-10-14-nsnumberzhuan-nsstringdiu-jing-wen-ti","date":"2017-10-14T12:53:01.000Z","updated":"2024-11-02T03:36:52.412Z","comments":true,"path":"2017/10/14/2017-10-14-nsnumberzhuan-nsstringdiu-jing-wen-ti/","permalink":"https://blog.wangruofeng007.com/2017/10/14/2017-10-14-nsnumberzhuan-nsstringdiu-jing-wen-ti/","excerpt":"","text":"é—®é¢˜å¼•å‡ºåœ¨å¼€å‘ä¸­ï¼Œæ¶‰åŠä»·æ ¼é‡‘é¢å¤„ç†ï¼Œåå°ä¼šè¿”å›Numberç±»å‹çš„æ•°æ®ï¼Œæ‰“å°æˆ–è€…ç»è¿‡Jsonè½¬Modelåçš„NSStringå¯èƒ½å‡ºç°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ï¼Œå¦‚æœæ¶‰åŠåˆ°é‡‘é¢çš„åŠ å‡ä¹˜é™¤è¿ç®—é—®é¢˜å°†æš´éœ²å¾—æ›´ä¸ºæ˜æ˜¾ã€‚è¿™é‡Œå°±iOSæ•°æ®ç²¾åº¦å¤„ç†åšä¸€ä¸ªæ€»ç»“ã€‚ é—®é¢˜å¤ç°NSNumberè½¬NSSting12345678910111213141516171819202122232425262728293031323334NSArray *numbers = @[ @99.00, @99.09, @99.19, @99.29, @99.39, @99.49, @99.59, @99.69, @99.79, @99.89, @99.99, ];for (int i = 0; i &lt; numbers.count; i++) &#123; NSNumber *number = numbers[i]; NSString *strValue = [number stringValue]; NSLog(@&quot;strValue:%@&quot;,strValue);&#125;/* oldVlue:99.00 strValue:99 oldVlue:99.09 strValue:99.09 oldVlue:99.19 strValue:99.19 oldVlue:99.29 strValue:99.29000000000001 oldVlue:99.39 strValue:99.39 oldVlue:99.48 strValue:99.48999999999999 oldVlue:99.59 strValue:99.59 oldVlue:99.69 strValue:99.69 oldVlue:99.79 strValue:99.79000000000001 oldVlue:99.89 strValue:99.89 oldVlue:99.99 strValue:99.98999999999999 */ åœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°å°†NSNumberè½¬æ¢æˆNSStingçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ã€‚ Jsonåˆ°Model12345678910111213141516171819//å‡ºç°BUGçš„æ¡ä»¶å¿…é¡»æ˜¯ä¸¤ä½æ•°ï¼Œä¸”å¸¦ä¸¤ä½å°æ•°ï¼Œç±»å‹è¿˜å¿…é¡»æ˜¯float//ä¸¤ä½æ•°ï¼šåä½å¿…é¡»æ˜¯7ã€8ã€9ï¼›ä¸ªä½æ•°éšæ„//ä¸¤ä½å°æ•°ï¼šä¸ªä½æ•°éšæ„ï¼›åä½æ•°å¿…é¡»æ˜¯0NSString *jsonStr = @&quot;&#123;\\&quot;71.40\\&quot;:71.40, \\&quot;97.40\\&quot;:97.40, \\&quot;80.40\\&quot;:80.40, \\&quot;188.40\\&quot;:188.40&#125;&quot;;NSLog(@&quot;json:%@&quot;, jsonStr);NSData *jsonData = [jsonStr dataUsingEncoding:NSUTF8StringEncoding];NSError *jsonParsingError = nil;NSDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:[NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&amp;jsonParsingError]];NSLog(@&quot;dic:%@&quot;, dic);/*2017-10-14 18:29:19.434 FloatTransferDemo[62722:3093992] dic:&#123; &quot;188.40&quot; = &quot;188.4&quot;; &quot;71.40&quot; = &quot;71.40000000000001&quot;; &quot;80.40&quot; = &quot;80.40000000000001&quot;; &quot;97.40&quot; = &quot;97.40000000000001&quot;;&#125;*/ åœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°å°†Jsonè§£ææˆModelçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ã€‚ é—®é¢˜åˆ†æå› ä¸ºæµ®ç‚¹æ•°åœ¨è®¡ç®—æœºä¸­æ˜¯é‡‡ç”¨IEEEè§„å®šçš„æ ‡å‡†æµ®ç‚¹æ ¼å¼ï¼Œå³äºŒè¿›åˆ¶ç§‘å­¦è¡¨ç¤ºæ³•ã€‚åœ¨è¿™ç§è¡¨ç¤ºæ³•ä¸­ï¼Œä¸€ä¸ªæ•° S = M * 2 ^ Nã€‚ å…¶ä¸­Nè¡¨ç¤ºé˜¶ç ï¼ŒMè¡¨ç¤ºä½æ•°(æœ‰æ•ˆæ•°å­—ä½)ã€‚ä¾‹å¦‚ä¸€ä¸ªfloatç±»å‹çš„æµ®ç‚¹ï¼Œåœ¨32bitä½ä¸Šï¼Œå 4ä¸ªå­—èŠ‚ï¼Œå­—èŠ‚è¡¨ç¤ºä¸º ã€31ã€‘N:ã€30 ~ 23ã€‘ M:ã€22~0ã€‘ 31ä½è¡¨ç¤ºç¬¦å·ä½: 0æ­£ï¼Œ1è´Ÿ ä¸­é—´8ä½æ˜¯é˜¶ç ä½: è¡¨ç¤ºèŒƒå›´ã€-128 ~ 127ã€‘,å¯¹äºfloatç±»å‹æ•°æ®è§„å®šå…¶åç§»é‡ä¸º127 åé¢23ä½æ˜¯æœ‰æ•ˆæ•°å­—ä½: å› ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œæ•´æ•°ä½å®šæ­»äº†æ˜¯1ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•çš„æ˜¯å°æ•°ç‚¹åé¢çš„äºŒè¿›åˆ¶ä¸º æŒ‡æ•°Nå†³å®šå®ƒçš„èŒƒå›´ï¼Œå› ä¸ºMæ€»æ˜¯ä¸€ä¸ªä»¥1å¼€å¤´çš„å°æ•°ï¼Œä»¥floatæ¥è¯´å³æ˜¯ï¼š-2 ^ 128 ~ 2 ^ 128,å³floatèƒ½è¡¨ç¤ºçš„æ•°çš„å¤§å°çš„èŒƒå›´ã€‚ è€Œå®ƒçš„ç²¾åº¦æ˜¯ç”±ä½æ•°(ä¹Ÿå°±æ˜¯æœ‰æ•ˆçš„æ•°æ®ä½)æ¥å†³å®šçš„ï¼Œ 2 ^ 23 &#x3D; 8388608ï¼Œæ€»å…±7ä½ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½ç”¨7ä½æœ‰æ•ˆæ•°å­—ï¼Œæœ€å¤šèƒ½è¡¨ç¤ºåˆ°.8388708å³å°æ•°ç‚¹å7ä½ï¼Œç”±äºä¸èƒ½å®Œå…¨è¡¨ç¤ºå…¨éƒ¨çš„7ä½æ•°ï¼Œæ‰€ä»¥å®ƒçš„ç²¾åº¦èŒƒå›´æ˜¯6ä½~7ä½ã€‚ åŒç†å¯å¾—doubleçš„ç²¾åº¦æ˜¯2 ^ 52 &#x3D; 4503599627370496ï¼Œ å…±16ä½ï¼Œæ‰€ä»¥ç²¾åº¦ä¸º15 ~ 16ä½ã€‚ æ€»ç»“ï¼šfloat&#x2F;doubleç±»å‹çš„èŒƒå›´å’Œç²¾åº¦çš„è®¡ç®—æ–¹å¼ä¸åŒæœºå™¨å­—èŠ‚åºçš„è§„å®š å…¬å¼ï¼š S = M * 2 ^ N äºŒè¿›åˆ¶åœ¨å†…å­˜ä¸­æ˜¯ä»¥è¡¥ç å½¢å¼å­˜å‚¨ï¼Œè´Ÿæ•°è¦å¯¹å…¶äºŒè¿›åˆ¶ç»å¯¹å€¼æŒ‰ä½å–åå†åŠ ä¸€ï¼Œæ­£æ•°çš„è¡¥ç ä¸åŸç å½¢å¼ç›¸åŒ ä¹Ÿå°±æ˜¯è¯´floatå’Œdoublelç±»å‹æ•°æ®åœ¨è®¡ç®—æœºä¸­å­˜å‚¨å¯èƒ½æ˜¯ä¸ç²¾ç¡®çš„ã€‚å½“æˆ‘ä»¬éœ€è¦è½¬æ¢æˆæµ®ç‚¹ç±»å‹æ˜¯æ•°æ®æ—¶ï¼Œæœ€å¥½ç”¨doubleï¼Œå› ä¸ºdoubleçš„ç²¾åº¦æ›´é«˜ï¼Œå‡ºç°ä¸¢ç²¾åº¦çš„æ¦‚ç‡ç›¸å¯¹æ˜¯è¾ƒå°çš„ã€‚ åœ¨iOSä¸­æä¾›ä¸€ä¸ªä¸“ç”¨çš„ç±»æ¥å¤„ç†æµ®ç‚¹æ•°æ®ç›¸å…³çš„è¿ç®—ï¼šNSDecimalNumber è§£å†³æ–¹æ¡ˆä½¿ç”¨NSDecimalNumberæ¥è¿›è¡Œæµ®ç‚¹æ•°å¤„ç†ã€‚æˆ‘ä»¬ç»™NSStringæ·»åŠ ä¸€ä¸ªåˆ†ç±»æ¥å¤„ç†æµ®ç‚¹è¿ç®—é—®é¢˜ 1234567891011121314151617181920212223242526272829///.h@interface NSString (DecimalNumber)+ (NSString *)decimalNumberWithNSNumber:(NSNumber * )number;+ (NSString *)decimalNumberWithDouble:(double)conversionValue;@end///.m#import &quot;NSString+DecimalNumber.h&quot;@implementation NSString (DecimalNumber)+ (NSString *)decimalNumberWithNSNumber:(NSNumber * )number&#123; double conversionValue = [number doubleValue]; NSString *doubleString = [NSString stringWithFormat:@&quot;%lf&quot;, conversionValue]; NSDecimalNumber *decNumber = [NSDecimalNumber decimalNumberWithString:doubleString]; return [decNumber stringValue];&#125;+ (NSString *)decimalNumberWithDouble:(double)conversionValue&#123; NSString *doubleString = [NSString stringWithFormat:@&quot;%lf&quot;, conversionValue]; NSDecimalNumber *decNumber = [NSDecimalNumber decimalNumberWithString:doubleString]; return [decNumber stringValue];&#125;@end å¦‚ä½•ä½¿ç”¨12345678910111213141516171819202122232425262728293031323334NSArray *numbers = @[ @99.00, @99.09, @99.19, @99.29, @99.39, @99.49, @99.59, @99.69, @99.79, @99.89, @99.99, ];for (int i = 0; i &lt; numbers.count; i++) &#123; NSNumber *number = numbers[i]; NSString *strValue = [NSString decimalNumberWithNSNumber:number]; NSLog(@&quot;strValue:%@&quot;,strValue);&#125;/* oldVlue:99.00 strValue:99 oldVlue:99.09 strValue:99.09 oldVlue:99.19 strValue:99.19 oldVlue:99.29 strValue:99.29 oldVlue:99.39 strValue:99.39 oldVlue:99.48 strValue:99.49 oldVlue:99.59 strValue:99.59 oldVlue:99.69 strValue:99.69 oldVlue:99.79 strValue:99.79 oldVlue:99.89 strValue:99.89 oldVlue:99.99 strValue:99.99 */ é—®é¢˜å¾—ä»¥è§£å†³ã€‚â˜•ï¸ å‚è€ƒèµ„æ–™ï¼š https://developer.apple.com/documentation/foundation/nsdecimalnumber http://www.jianshu.com/p/4703d704c953 https://eezytutorials.com/ios/nsdecimalnumber-by-example.php http://www.skyfox.org/ios-nsdecimalnumber-use.html https://stackoverflow.com/questions/421463/should-i-use-nsdecimalnumber-to-deal-with-money","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"NSSortDescriptoræ­£ç¡®çš„æ‰“å¼€æ–¹å¼","slug":"2017-06-07-nssortdescriptorzheng-que-de-da-kai-fang-shi","date":"2017-06-06T16:09:44.000Z","updated":"2024-11-02T03:36:52.412Z","comments":true,"path":"2017/06/07/2017-06-07-nssortdescriptorzheng-que-de-da-kai-fang-shi/","permalink":"https://blog.wangruofeng007.com/2017/06/07/2017-06-07-nssortdescriptorzheng-que-de-da-kai-fang-shi/","excerpt":"","text":"æ’åºæ˜¯åº”ç”¨å¸¸è§éœ€æ±‚ä¹‹ä¸€ï¼Œå¦‚ä½•æ­£ç¡®ä¼˜é›…çš„å®ç°ä¸€ä¸ªæ’åºï¼ŒNSSortDescriptoræˆ–è®¸æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ NSSortDescriptorç”±3ä¸ªå‚æ•°ç»„æˆï¼š key(é”®):å¯¹äºä¸€ä¸ªç»™å®šçš„é›†åˆï¼Œå°†å¯¹é›†åˆç§çš„æ¯ä¸ªå¯¹è±¡æŒ‰ç…§è¯¥é”®æ¥è¿›è¡Œæ’åº ascending(å‡åº):æŒ‡å®šé›†åˆæŒ‰ç…§å‡åº(YES)è¿˜æ˜¯é™åº(NO)è¿›è¡Œæ’åº selector(æ–¹æ³•å­):æ’åºæ—¶çš„æ¯”è¾ƒå‡½æ•°ï¼Œå½“å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºæ—¶ï¼Œåº”å½“åŠ å…¥localizedStandardCompare:é€‰æ‹©å™¨ï¼Œå®ƒå°†æ ¹æ®è¯­è¨€è§„åˆ™è¿›è¡Œæ’åº(ä¾‹å¦‚å¤§å°å†™ï¼Œå˜éŸ³ç¬¦å·ç­‰ç­‰çš„é¡ºåº) å¦‚ä½•ä½¿ç”¨NSSortDescriptorä¸»è¦é’ˆå¯¹å„ç§é›†åˆæ’åº,NSArray,NSMutableArray,NSSet,NSOrderedSet,NSMutableOrderedSet å¦‚æœé›†åˆæ˜¯å¯å˜çš„ï¼Œåˆ™å¯¹é›†åˆæœ¬èº«æ’åºä¾‹å¦‚ NSMutableOrderedSetçš„sortUsingDescriptors: NSMutableArrayçš„sortUsingDescriptors: å¦‚æœé›†åˆæ˜¯å¯å˜çš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ’å¥½åºçš„æ–°é›†åˆä¾‹å¦‚ NSArrayçš„sortedArrayUsingDescriptors: NSSetçš„sortedArrayUsingDescriptors: NSOrderedSetçš„sortedArrayUsingDescriptors: æ³¨æ„æ’åºæè¿°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ’åºå¯ä»¥æ”¯æŒæŒ‰ç…§å¤šä¸ªæè¿°ç»¼åˆæ’åºã€‚å¦‚æœå­˜åœ¨å¤šä¸ªè§„åˆ™å…ˆæ»¡è¶³å‰é¢çš„è§„åˆ™å†æ»¡è¶³åé¢çš„è§„åˆ™ã€‚ä¾‹å¦‚ä¸¤ä¸ªå…ƒç´ æŒ‰ç…§ç¬¬ä¸€å¤©è§„åˆ™é¡ºåºä¸€è‡´ï¼Œé‚£ä¹ˆå¦‚æœè¿˜å­˜åœ¨ç¬¬äºŒå¤©è§„åˆ™ï¼Œå®ƒä»¬å°†æŒ‰ç…§ç¬¬äºŒæ¡è§„åˆ™ç»§ç»­æ’åºï¼Œå¦‚æœå‰é¢çš„è§„åˆ™å·²ç»åŒºåˆ†å‡ºé¡ºåºåé¢çš„è§„åˆ™å°†å¤±æ•ˆã€‚ å®ä¾‹è¯´æ˜ä¸ºäº†æ›´å¥½çš„æè¿°ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªPersonå¯¹è±¡ï¼Œå®ƒæœ‰**NSString * **ç±»å‹çš„å§“å’Œåå±æ€§ï¼Œä»¥åŠä¸€ä¸ªNSNumberç±»å‹çš„å¹´é¾„å±æ€§ã€‚ 1234567@interface Person : NSObject@property (nonatomic, copy ) NSString *firstName;@property (nonatomic, copy ) NSString *lastName;@property (nonatomic, strong) NSNumber *age;@end ç»™å®šä»¥ä¸‹æ•°æ®é›†ï¼š index 0 1 2 3 4 firstName Alice Bod Charlie Quentin lastName Smith Jones Smith Alberts age 24 27 33 31 19 ä½¿ç”¨ä¸åŒçš„NSSortDescriptorçš„ä¸åŒç»„åˆæ¥å°†å®ƒä»¬æ’åºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051NSArray *firstNames = @[@&quot;Alice&quot;, @&quot;Bod&quot;, @&quot;Charlie&quot;, @&quot;Quentin&quot;, @&quot;&quot;];NSArray *lastNames = @[@&quot;Smith&quot;, @&quot;Jones&quot;, @&quot;Smith&quot;, @&quot;&quot;, @&quot;Alberts&quot;];NSArray *ages = @[@24, @27, @33, @31, @12];NSMutableArray *people = [NSMutableArray array];[firstNames enumerateObjectsUsingBlock:^(id _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; Person *person = [[Person alloc] init]; person.firstName = [firstNames objectAtIndex:idx]; person.lastName = [lastNames objectAtIndex:idx]; person.age = [ages objectAtIndex:idx]; [people addObject:person];&#125;];NSSortDescriptor *firstNameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@&quot;firstName&quot; ascending:YES selector:@selector(localizedStandardCompare:)];NSSortDescriptor *lastNameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@&quot;lastName&quot; ascending:YES selector:@selector(localizedStandardCompare:)];NSSortDescriptor *ageSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@&quot;age&quot; ascending:NO];NSLog(@&quot;By age: %@&quot;,[people sortedArrayUsingDescriptors:@[ageSortDescriptor]]);/* 2017-06-06 23:15:02.101 NSSortâ€‹Descriptor_Demo[9103:1255482] By age: ( &quot;Charlie Smith 33&quot;, &quot;Quentin 31&quot;, &quot;Bod Jones 27&quot;, &quot;Alice Smith 24&quot;, &quot; Alberts 12&quot; ) */NSLog(@&quot;By first name: %@&quot;,[people sortedArrayUsingDescriptors:@[firstNameSortDescriptor]]);/* 2017-06-06 23:15:02.102 NSSortâ€‹Descriptor_Demo[9103:1255482] By first name: ( &quot; Alberts 12&quot;, &quot;Alice Smith 24&quot;, &quot;Bod Jones 27&quot;, &quot;Charlie Smith 33&quot;, &quot;Quentin 31&quot; )*/ NSLog(@&quot;By last name, first name: %@&quot;,[people sortedArrayUsingDescriptors:@[lastNameSortDescriptor ,firstNameSortDescriptor]]);/* 2017-06-06 23:15:02.102 NSSortâ€‹Descriptor_Demo[9103:1255482] By last name, first name: ( &quot;Quentin 31&quot;, &quot; Alberts 12&quot;, &quot;Bod Jones 27&quot;, &quot;Alice Smith 24&quot;, &quot;Charlie Smith 33&quot; ) */ æ³¨æ„äº‹é¡¹ ç©ºå­—ç¬¦æ˜¯æ’åœ¨æ™®é€šå­—ç¬¦ä¹‹å‰çš„ åŸºæœ¬æ•°æ®ç±»å‹éœ€è¦åŒ…è£…æˆNSNumberå¯¹è±¡æ¥æ’åº å­—ç¬¦ä¸²ç±»å‹æ’åºéœ€è¦åŠ å…¥localizedStandardCompare:é€‰æ‹©å™¨ å‚è€ƒé“¾æ¥ NSSortâ€‹Descriptor â€“ NSHipster","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"ä»OCåˆ°Swiftä½ è¦çŸ¥é“çš„äº‹","slug":"2017-03-10-cong-ocdao-swiftni-yao-zhi-dao-de-shi","date":"2017-03-10T15:04:24.000Z","updated":"2024-11-02T03:36:52.412Z","comments":true,"path":"2017/03/10/2017-03-10-cong-ocdao-swiftni-yao-zhi-dao-de-shi/","permalink":"https://blog.wangruofeng007.com/2017/03/10/2017-03-10-cong-ocdao-swiftni-yao-zhi-dao-de-shi/","excerpt":"","text":"æšä¸¾æ¦‚è¿°Swiftä¸­æšä¸¾å’Œç»“æ„ä½“ä¹Ÿä¸Šå‡åˆ°å¯¹è±¡çš„ä½ç½®ï¼Œä½†æ˜¯å´ä¸å…·å¤‡å®Œæ•´çš„å¯¹è±¡ç‰¹å¾ï¼Œæ¯”å¦‚è¯´ä»–ä»¬ä¸èƒ½ç»§æ‰¿ã€‚ åœ¨OCä¸­æšä¸¾æœ¬è´¨å…¶å®æ˜¯æ•´æ•°ç±»å‹ï¼Œåªæ˜¯ç»™ä»–ä»¬å–äº†ä¸€äº›æ„ä¹‰ç›´è§‚çš„åç§°è€Œå·²ï¼Œè€ŒSwiftå®Œå…¨æ‘†è„±ä»¥å‰çš„æ€æƒ³çš„æŸç¼šç¼–çš„æ›´è‡ªç”±ï¼Œæ‹¥æœ‰äº†ä»¥ä¸‹ç‰¹å¾ã€‚ ç±»å‹æ›´å¹¿ï¼Œä¸é™äºæ•´å½¢ï¼Œå¯ä»¥æ˜¯Characterï¼ŒStringï¼ŒFloatï¼ŒDoubleç­‰ï¼Œè¿™äº›å«åšåŸå§‹å€¼ å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„é™æ€æˆå‘˜å˜é‡æ¥å‚¨å­˜ä¸€äº›å¸¸é‡ å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•å’Œå˜é‡ caseæ¡ä»¶åŒ¹é…å¯ä»¥å®šä¹‰å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨whereæ¥è¿‡æ»¤ é€šè¿‡rawValueå¯ä»¥æ‹¿åˆ°æšä¸¾çš„åŸå§‹å€¼ åŸå§‹å€¼å¦‚æœæä¾›äº†åŸå§‹å€¼ï¼Œå°±å¯ä»¥åœ¨caseå£°æ˜æˆå‘˜æ—¶æä¾›é»˜è®¤å€¼ï¼Œè¿™æ ·è·ŸOCçš„æšä¸¾åœ¨ç»“æ„ä¸Šä¸€äº›ç±»ä¼¼ 1234567enum WeekDays : Int &#123; case Monday = 0 case Tuesday = 1 case Wednesday = 2 case Thursday = 3 case Friday = 4&#125; 1.å£°æ˜ä¸€ä¸ªæšä¸¾å€¼ 1let monday = WeekDays.Monday 2.è·å–åŸå§‹å€¼ 1let rawVlaue = WeekDays.Tuesday.rawValue 3.é€šè¿‡åŸå§‹å€¼æ„é€ æŸä¸ªæšä¸¾å˜é‡ 1let wednesday = WeekDays.init(rawValue: 2) ç›¸å…³å€¼å’ŒCçš„è”åˆä½“æœ‰ç‚¹ç±»ä¼¼ 1.å£°æ˜ 1234enum Figure &#123; case Rectangle(Int, Int) case Circle(Int)&#125; 2.ä½¿ç”¨ 123456789101112131415func printFigure(figure: Figure) &#123; switch figure &#123; case .Rectangle(let width, let height): print(&quot;width:\\(width), height:\\(height)&quot;) case .Circle(let radius): print(&quot;the circle&#x27;s radius is:\\(radius)&quot;) &#125;&#125;var figure = Figure.Rectangle(1024, 768)printFigure(figure)figure = .Circle(600)printFigure(figure) OCä¸Swiftä¸­Optionsæšä¸¾çš„ä¸åŒå®šä¹‰OCç‰ˆæœ¬NS_OPTIONS123456789typedef NS_OPTIONS(NSUInteger, NSVolumeEnumerationOptions) &#123; /* The mounted volume enumeration will skip hidden volumes. */ NSVolumeEnumerationSkipHiddenVolumes = 1UL &lt;&lt; 1, /* The mounted volume enumeration will produce file reference URLs rather than path-based URLs. */ NSVolumeEnumerationProduceFileReferenceURLs = 1UL &lt;&lt; 2&#125; Swiftç‰ˆæœ¬OPTIONS12345struct NSVolumeEnumerationOptions : OptionSetType &#123; init(rawValue rawValue: UInt) static var SkipHiddenVolumes: NSVolumeEnumerationOptions &#123; get &#125; static var ProduceFileReferenceURLs: NSVolumeEnumerationOptions &#123; get &#125;&#125; ä½¿ç”¨12345UIView.animateWithDuration(0.3, delay: 0.0, options: [.CurveEaseIn, .AllowUserInteraction], animations: &#123;&#125;, completion: nil) ç»“æ„ä½“Swiftä¸­åŠ å¼ºäº†ç»“æ„ä½“çš„èƒ½åŠ›ï¼Œå¯ä»¥å®šä¹‰å’Œä½¿ç”¨å±æ€§ï¼Œæ–¹æ³•ï¼Œä¸‹æ ‡ï¼Œæ„é€ å™¨ç­‰ï¼Œä½†æ˜¯ä¸èƒ½è¢«ç»§æ‰¿ï¼Œæ²¡æœ‰å¼ºåˆ¶ç±»å‹æŠ“æ¢ï¼Œä½¿ç”¨ææ„å™¨å’Œå¼•ç”¨è®¡æ•°ç­‰èƒ½åŠ› é€šå¸¸ä½¿ç”¨ç»“æ„ä½“æ¥å……å½“æ•°æ®æ¨¡å‹ï¼Œå¸¸é‡å¯ä»¥ä½¿ç”¨é™æ€å…³é”®è¯staticæ ‡ç¤º å¾ªç¯å¼•ç”¨Swiftä¸­è§£å†³å¾ªç¯å¼ºå¼•ç”¨çš„æ–¹å¼ å¼±å¼•ç”¨ â€“ weak æ— ä¸»å¼•ç”¨ â€“ unowned è§£å†³é—­åŒ…ä¸­å¾ªç¯å¼•ç”¨[unowned æ•è·å¯¹è±¡]æˆ–è€…[weak æ•è·å¯¹è±¡] ä½¿ç”¨å®ä¾‹ 123456789101112131415161718192021222324252627class Person &#123; let name: String // å†™æ³•1// lazy var printName: () -&gt;() = &#123;// [weak self] in if let strongSelf = self &#123;// print(&quot;The name is \\(strongSelf.name)&quot;)// &#125;// &#125; // å†™æ³•2 lazy var printName: () -&gt;() = &#123; [unowned self] in print(&quot;The name is \\(self.name)&quot;) &#125; init(personName: String) &#123; name = personName &#125; deinit &#123; print(&quot;Person deinit \\(self.name)&quot;) &#125;&#125;var xiaoMing: Person? = Person(personName: &quot;xiaoMing&quot;)xiaoMing!.printNamexiaoMing = nil äºŒè€…çš„åŒºåˆ«å¦‚æœæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ self ä¸ä¼šè¢«é‡Šæ”¾çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ weak æ”¹ä¸º unownedï¼Œè¿™æ ·å°±ä¸å†éœ€è¦ strongSelf çš„åˆ¤æ–­ã€‚ä½†æ˜¯å¦‚æœåœ¨è¿‡ç¨‹ä¸­ self è¢«é‡Šæ”¾äº†è€Œ printName è¿™ä¸ªé—­åŒ…æ²¡æœ‰è¢«é‡Šæ”¾çš„è¯ (æ¯”å¦‚ ç”Ÿæˆ Person åï¼ŒæŸä¸ªå¤–éƒ¨å˜é‡æŒæœ‰äº† printNameï¼Œéšåè¿™ä¸ª Persone å¯¹è±¡è¢«é‡Šæ”¾äº†ï¼Œä½†æ˜¯ printName å·²ç„¶å­˜åœ¨å¹¶å¯èƒ½è¢«è°ƒç”¨)ï¼Œä½¿ç”¨ unowned å°†é€ æˆå´©æºƒã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦æ ¹æ®å®é™…çš„éœ€æ±‚æ¥å†³å®šæ˜¯ä½¿ç”¨ weak è¿˜æ˜¯ unownedã€‚ OCå’ŒSwiftä¸­å¸¸ç”¨æ•°æ®ç±»å‹å­—ç¬¦ä¸² OCï¼š NSStringï¼Œ NSMutableString Swiftï¼š String NSStringå’ŒStringçš„å…³ç³»ï¼šåœ¨Swiftä¸­ï¼Œä½¿ç”¨å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨Foundatioä¸­çš„NSStringå’ŒSwiftä¸­çš„Stringã€‚ Swiftåœ¨åº•å±‚èƒ½å¤Ÿå°†Stringä¸NSStringæ— ç¼åœ°æ¡¥æ¥èµ·æ¥ï¼ŒStringå¯ä»¥è°ƒç”¨NSStringçš„å…¨éƒ¨APIã€‚ æ•°ç»„ç±» OCï¼š NSArray, NSMutableArray Swiftï¼š Array [AnyObject] NSArrayå’ŒArrayçš„å…³ç³»ï¼šSwiftèƒ½åœ¨åº•å±‚å°†ä»–ä»¬è‡ªåŠ¨æ¡¥æ¥èµ·æ¥ï¼Œä¸€ä¸ªNSArrayå¯¹è±¡æ¡¥æ¥åçš„ç»“æœæ˜¯[AnyObject]ã€‚ å­—å…¸ OCï¼š NSDictionaryï¼Œ NSMutableDictionary Swiftï¼š Dictionary [Object: AnyObject] NSDictionaryå’ŒDictionaryçš„å…³ç³»ï¼š åº•å±‚è‡ªåŠ¨æ¡¥æ¥ï¼Œä¸€ä¸ªNSDictionaryå¯¹è±¡æ¡¥æ¥åçš„ç»“æœæ˜¯[Object: AnyObject]ã€‚ ç±»å‹è½¬æ¢ç±»çš„è½¬æ¢ä½¿ç”¨ asæ•°æ®ç±»å‹åŠ æ‹¬å· Int() OCä½¿ç”¨ ï¼ˆæ–°çš„ç±»å‹ï¼‰åŸæ¥çš„å˜é‡ ç±»å‹åˆ¤æ–­iså…³é”®è¯ ç›¸å½“äºOCçš„isKindofClass: è¾…åŠ©å‘½ä»¤ #file â€“&gt; _FILE_ #line â€“&gt; _LINE_ #function â€“&gt; _func_ æˆ–è€… _FUNCTION_ é€€å‡ºç¨‹åº C: exitï¼ˆ0ï¼‰ Swift: fatalError() æˆ–è€… fatalError(message: String) æ–­è¨€ OC: NSAssert Swift: assert()","categories":[{"name":"Swift","slug":"Swift","permalink":"https://blog.wangruofeng007.com/categories/Swift/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"Layer Animations Tips","slug":"2017-03-10-layer-animations-tips","date":"2017-03-10T14:49:01.000Z","updated":"2024-11-02T03:36:52.412Z","comments":true,"path":"2017/03/10/2017-03-10-layer-animations-tips/","permalink":"https://blog.wangruofeng007.com/2017/03/10/2017-03-10-layer-animations-tips/","excerpt":"","text":"beginTimeçš„å¦™ç”¨åˆ›å»ºä¸€ä¸ªåŠ¨ç”»ï¼Œæ·»åŠ åˆ°ä¸åŒçš„å›¾å±‚ä¸Šï¼Œå¯ä»¥å®ç°å¤ç”¨ï¼Œé€šè¿‡è°ƒèŠ‚beginTimeå¯ä»¥è°ƒèŠ‚åŠ¨ç”»å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ°´å¹³ä½ç§»åŠ¨ç”»ï¼Œæ·»åŠ åˆ°ä¸åŒçš„å›¾å±‚å¯¹è±¡ä¸Šï¼Œå¹¶ä¸”è®©ä»–ä»¬è½®æµæ‰§è¡Œã€‚ 1234567891011121314151617let flyRight = CABasicAnimation(keyPath: &quot;position.x&quot;)flyRight.fromValue = 0flyRight.toValue = 100flyRight.duration = 0.5flyRight.fillMode = kCAFillModeBothfirstView.layer.addAnimation(flyRight, forKey: nil)// make secondView perform animation on delay 0.3 seconds.flyRight.beginTime = CACurrentMediaTime() + 0.3secondView.layer.addAnimation(flyRight, forKey: nil)secondView.layer.position.x = 100// make thirdView perform animation on delay 0.4 seconds.flyRight.beginTime = CACurrentMediaTime() + 0.4thirdView.layer.addAnimation(flyRight, forKey: nil)thirdView.layer.position.x = 100 åŠ¨ç”»çš„beginTimeå±æ€§å¯ä»¥è®¾ç½®å°†è¦æ‰§è¡Œçš„åŠ¨ç”»çš„ç»å¯¹å¼€å§‹æ—¶é—´ï¼Œé€šè¿‡CACurrentMediaTime()å‡½æ•°è·å–å½“å‰æ—¶é—´å†åŠ ä¸Šä½ æƒ³è¦å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´çš„ï¼Œå•ä½ç§’ã€‚ åŠ¨ç”»ä»£ç†åŠ¨ç”»ä»£ç†å¯ä»¥ç›‘å¬åŠ¨ç”»çš„è¿›è¡ŒçŠ¶æ€ï¼Œåœ¨åŠ¨ç”»å¼€å§‹å’Œç»“æŸçš„æ—¶å€™å›é€šçŸ¥ä»£ç†.ä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š 12func animationDidStart(anim: CAAnimation)func animationDidStop(anim: CAAnimation, finished flag: Bool) CAAnimationCAAnimationå’Œå®ƒçš„å­ç±»éµå¾ªKVOï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å¯ä»¥æŠŠå®ƒä»¬å½“æˆå­—å…¸ä¸€æ ·ä½¿ç”¨æ¥æ·»åŠ æ–°çš„æ¥å£åœ¨è¿è¡Œæ—¶ã€‚ ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨è¿™ç§æœºåˆ¶æ¥ç»™æŸä¸ªåŠ¨ç”»æŒ‡å®šä¸€ä¸ªåå­—ï¼Œä»¥ä¾¿ä½ èƒ½å¤ŸæŠŠå®ƒå’Œå…¶å®ƒåŠ¨ç”»åŒºåˆ†å¼€ã€‚ 1flyRight.setValue(&quot;somename&quot;, forKey: &quot;name&quot;) CASpringAnimation Property Default Value damping 10.0 mass 1.0 stiffness 100.0 initialVelocity 0.0 å‚æ•°è¯´æ˜ï¼š damping - åº”ç”¨ç»™ç³»ç»Ÿçš„é˜»å°¼ mass - åœ¨ç³»ç»Ÿä¸­é‡ç‰©çš„è´¨é‡ stiffness - é™„åŠ åœ¨é‡ç‰©ä¸Šçš„å¼¹ç°§çš„ç¡¬åº¦ initialVelocity - é™„åŠ åœ¨é‡ç‰©ä¸Šçš„åˆå§‹é€Ÿåº¦ ä½¿ç”¨å®ä¾‹ï¼š 12345678910let jump = CASpringAnimation(keyPath: &quot;position.y&quot;)jump.initialVelocity = 100.0jump.mass = 10.0jump.stiffness = 1500.0jump.damping = 50.0jump.fromValue = textField.layer.position.y + 1.0jump.toValue = textField.layer.position.yjump.duration = jump.settlingDurationtextField.layer.addAnimation(jump, forKey: nil) å¤‡æ³¨ï¼šæ­¤åŠ¨ç”»çš„durationå‚æ•°å¯ä»¥é€šè¿‡å‰é¢å‡ ä¸ªå‚æ•°è‡ªåŠ¨è®¡ç®—å¾—å‡º jump.duration = jump.settlingDuration ä½¿ç”¨CAGradientLayerçš„locationså®ç°æ»‘åŠ¨è§£é”å¯¹CAGradientLayerçš„locationså±æ€§åšåŠ¨ç”»è½»æ¾çš„å®ç°iPhoneè‡ªå¸¦çš„æ»‘åŠ¨è§£é”æ•ˆæœ a.åˆ›å»ºä¸€ä¸ªæ¸å˜å›¾å±‚ 123456789101112131415161718192021222324let gradientLayer: CAGradientLayer = &#123; let gradientLayer = CAGradientLayer() // Configure the gradient here gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5) gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5) let colors = [ UIColor.blackColor().CGColor, UIColor.whiteColor().CGColor, UIColor.blackColor().CGColor ] gradientLayer.colors = colors let locations = [ 0.25, 0.5, 0.75 ] gradientLayer.locations = locations return gradientLayer&#125;() b.åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ ·å¼å­—å…¸ 123456789let textAttributes : [String: AnyObject] = &#123; let style = NSMutableParagraphStyle() style.alignment = .Center return [ NSFontAttributeName:UIFont(name: &quot;HelveticaNeue-Thin&quot;, size: 28.0)!, NSParagraphStyleAttributeName:style ]&#125;() c.å½“è®¾ç½®æ–‡æœ¬æ—¶ç»˜åˆ¶å†…å®¹ï¼Œæ·»åŠ @IBInspectableæ–¹ä¾¿çœ‹å®æ—¶æ•ˆæœ 1234567891011121314151617@IBInspectable var text: String! &#123;didSet &#123; setNeedsDisplay() UIGraphicsBeginImageContextWithOptions(frame.size, false, 0) text.drawInRect(bounds, withAttributes: textAttributes) let image = UIGraphicsGetImageFromCurrentImageContext() UIGraphicsEndImageContext() let maskLayer = CALayer() maskLayer.backgroundColor = UIColor.clearColor().CGColor maskLayer.frame = CGRectOffset(bounds, bounds.size.width, 0) maskLayer.contents = image.CGImage gradientLayer.mask = maskLayer &#125;&#125; d.é‡æ–°å¸ƒå±€gradientLayer 1234567override func layoutSubviews() &#123; gradientLayer.frame = CGRect( x: -bounds.size.width, y: bounds.origin.y, width: 3 * bounds.size.width, height: bounds.size.height)&#125; e.æ·»åŠ åˆ°windowæ—¶å‘æ¸å˜å±‚æ·»åŠ åŠ¨ç”» 12345678910111213override func didMoveToWindow() &#123; super.didMoveToWindow() layer.addSublayer(gradientLayer) let gradientAnimation = CABasicAnimation(keyPath: &quot;locations&quot;) gradientAnimation.fromValue = [0.0, 0.0, 0.25] gradientAnimation.toValue = [0.75, 1.0, 1.0] gradientAnimation.duration = 3.0 gradientAnimation.repeatCount = Float.infinity gradientLayer.addAnimation(gradientAnimation, forKey: nil)&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"VFLæ·±å…¥æµ…å‡º","slug":"2017-03-02-vflshen-ru-qian-chu","date":"2017-03-02T13:19:49.000Z","updated":"2024-11-02T03:36:52.411Z","comments":true,"path":"2017/03/02/2017-03-02-vflshen-ru-qian-chu/","permalink":"https://blog.wangruofeng007.com/2017/03/02/2017-03-02-vflshen-ru-qian-chu/","excerpt":"","text":"ä½¿ç”¨åœºæ™¯ç»™è§†å›¾å¯¹è±¡å¿«é€Ÿåˆ›å»ºçº¦æŸï¼Œå¯ä»¥ä½¿ç”¨æ¯”è¾ƒå†·é—¨çš„VFL(Visual Format Language),æœ¬è´¨æ˜¯æ˜¯åŸºäºè‡ªåŠ¨å¸ƒå±€(AutoLayout)ã€‚ è§£å†³çš„é—®é¢˜ä»¥ä¸€ç§ç›´è§‚çš„æ–¹å¼ï¼Œä¸ºè§†å›¾åˆ›å»ºçº¦æŸ æ€æ ·è§£å†³æ ¸å¿ƒæ–¹æ³•ï¼š 1234+ (NSArray&lt;__kindof NSLayoutConstraint *&gt; *)constraintsWithVisualFormat:(NSString *)format options:(NSLayoutFormatOptions)opts metrics:(nullable NSDictionary&lt;NSString *,id&gt; *)metrics views:(NSDictionary&lt;NSString *, id&gt; *)views; Example: 1234[NSLayoutConstraint constraintsWithVisualFormat:@&quot;|-[button1]-[button2]-[textField(&gt;=20)]-|&quot; options:0 metrics:metrics views:views] å‚æ•°ï¼š format:æŒ‡å®šçº¦æŸçš„æ ¼å¼ã€‚æ›´å¤šä¿¡æ¯ï¼Œåœ¨Auto Layout GuideæŸ¥çœ‹Visual Format Languageã€‚ opts:æè¿°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„å¸ƒå±€å±æ€§å’Œæ–¹å‘ metrics:å°†å‡ºç°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å¸¸é‡å­—å…¸ã€‚å­—å…¸çš„Keyså¿…é¡»æ˜¯åœ¨å‡ºç°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯¹åº”çš„valueså¿…é¡»æ˜¯NSNumberå¯¹è±¡ã€‚ views:å‡ºç°çš„è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—å…¸viewï¼Œæ‰€æœ‰çš„Keyså¿…é¡»æ˜¯ä½¿ç”¨åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯¹åº”çš„valueså¿…é¡»æ˜¯viewå¯¹è±¡ã€‚ è¿”å›å€¼ï¼š ä¸€ä¸ªçº¦æŸç»„åˆçš„æ•°ç»„ï¼Œåƒè§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²æè¿°çš„ä¸€æ ·è¡¨è¿°äº†åœ¨æä¾›çš„è§†å›¾å’Œå®ƒä»¬çš„çˆ¶è§†å›¾ä¹‹é—´çš„å…³ç³»ã€‚æ‰€æœ‰çš„çº¦æŸä»¥åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²è¢«æŒ‡å®šçš„çº¦æŸé¡ºåºä¸€è‡´ã€‚ æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§éœ€è¦å¯¹VFLç†è§£æ¯”è¾ƒå…¨é¢å’Œæ·±å…¥ï¼Œæœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œç»´æŠ¤èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œä½†æ˜¯å¦‚æœç†è§£çš„æ¯”è¾ƒæ·±åˆ»ï¼Œå¯¹äºç®€å•çš„å¸ƒå±€æ•ˆç‡éå¸¸é«˜ï¼Œæ¯”ç›´æ¥åˆ›å»ºçº¦æŸè¦ç›´è§‚ã€‚ æœ€ä½³å®è·µ æ¯æ¡çº¦æŸæ ¼å¼å­—ç¬¦ä¸²åˆ†æ°´å¹³(Hï¼Œå¯çœç•¥)å’Œå‚ç›´æ–¹å‘(V)ã€‚ | ä»£è¡¨çˆ¶è§†å›¾ã€‚ - ä»£è¡¨æ ‡å‡†é—´è·ï¼Œä¸¤ä¸ªå­è§†å›¾ç›´æ¥çš„å€¼æ˜¯8ï¼Œä¸çˆ¶è§†å›¾ä¹‹é—´çš„å€¼æ˜¯16ã€‚ [view] æ¯ä¸ªè§†å›¾å¿…é¡»ç”¨[]åŒ…è£¹èµ·æ¥ï¼Œå¦åˆ™è¯­æ³•é”™è¯¯ã€‚ [view(&gt;=44)] å¯ä»¥ä¸ºæ¯ä¸ªè§†å›¾è®¾ç½®ä¸€äº›å±æ€§æˆ–è€…å…³ç³»ï¼Œå†™ä¸€ä¸ªç´§è·Ÿviewåçš„æ‹¬å·é›†åˆï¼Œæ”¯æŒå®½é«˜ï¼Œä¼˜å…ˆçº§ï¼Œå’Œå…¶å®ƒè§†å›¾ä¹‹é—´çš„å…³ç³»ã€‚ [view@20] å¯ä»¥è®¾ç½®è§†å›¾çš„çº¦æŸçš„ä¼˜å…ˆçº§ï¼Œä»¥@å¼€å¤´ï¼Œå–å€¼èŒƒå›´(0 1000]ã€‚ [view1]-20-[view2] å¯ä»¥æŒ‡å®šviewä¹‹é—´çš„æ°´å¹³æˆ–è€…å‚ç›´é—´è·ï¼Œå†™åœ¨ä¸€å¯¹ - å³å¯ã€‚ [view1][view2] å¦‚æœ - çœç•¥åˆ™ä»–ä»¬ä¹‹é—´çš„è·ç¦»ä¸º0ã€‚ [flexibleButton(&gt;=70,&lt;=100)] å¤šä¸ªæ¡ä»¶ä¹‹é—´ç”¨,è¿æ¥å¹¶ä¸”ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ å…¶å®ƒæ–¹æ¡ˆ ä½¿ç”¨NSLayoutConstraintçš„ç±»æ–¹æ³•åˆ›å»º(iOS96.0åŠä»¥ä¸Šå¯ç”¨) 1234567+ (instancetype)constraintWithItem:(id)view1 attribute:(NSLayoutAttribute)attr1 relatedBy:(NSLayoutRelation)relation toItem:(nullable id)view2 attribute:(NSLayoutAttribute)attr2 multiplier:(CGFloat)multiplier constant:(CGFloat)c; ä½¿ç”¨NSLayoutAnchorçš„å·¥å‚æ–¹æ³•åˆ›å»º(iOS9.0åŠä»¥ä¸Šå¯ç”¨) 1234567- (NSLayoutConstraint *)constraintEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor;- (NSLayoutConstraint *)constraintGreaterThanOrEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor;- (NSLayoutConstraint *)constraintLessThanOrEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor;- (NSLayoutConstraint *)constraintEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor constant:(CGFloat)c;- (NSLayoutConstraint *)constraintGreaterThanOrEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor constant:(CGFloat)c;- (NSLayoutConstraint *)constraintLessThanOrEqualToAnchor:(NSLayoutAnchor&lt;AnchorType&gt; *)anchor constant:(CGFloat)c; ä½¿ç”¨æ³¨æ„äº‹é¡¹ ä½¿ç”¨æ—¶ï¼Œå¿…é¡»æŠŠviewçš„translatesAutoresizingMaskIntoConstraintså±æ€§è®¾ç½®ä¸ºNOï¼Œå¦åˆ™çº¦æŸå¯èƒ½æ›´é¢„æœŸä¸ä¸€è‡´ã€‚è¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™çš„é—®é¢˜ï¼Œç”±äºåœ¨AutoLayoutè¯ç”Ÿä»¥å‰ä¸€ç›´ä½¿ç”¨Autoresizingæ¥æ§åˆ¶å¸ƒå±€. é‡å†™updateConstraints()æ–¹æ³•ï¼Œåœ¨é‡Œé¢è®¡ç®—çº¦æŸï¼Œç„¶åè°ƒç”¨setNeedsUpdateConstraints()è§¦å‘æ›´æ–°çº¦æŸã€‚ ç³»ç»Ÿè®¡ç®—å¸ƒå±€é¡ºåº: updateConstraints() layoutSubviews() drawRect(_:) ç³»ç»Ÿè®¡ç®—å¸ƒå±€é¡ºåºå‚è€ƒ å…·ä½“ä½¿ç”¨ç¤ºä¾‹ï¼ŒæŸ¥çœ‹ä¸‹é¢çš„Demoï¼Œæ ·å“å·¥ç¨‹ Demoåœ°å€ï¼šVFLDemo å‚è€ƒé“¾æ¥ coding-auto-layout Visual Format Language","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"UIActivityâ€‹Viewâ€‹Controller è¯¦è§£","slug":"2017-02-23-uiactivityviewcontroller-xiang-jie","date":"2017-02-23T15:23:12.000Z","updated":"2024-11-02T03:36:52.411Z","comments":true,"path":"2017/02/23/2017-02-23-uiactivityviewcontroller-xiang-jie/","permalink":"https://blog.wangruofeng007.com/2017/02/23/2017-02-23-uiactivityviewcontroller-xiang-jie/","excerpt":"","text":"ç¿»è¯‘è‡ªNSHipsterçš„UIActivityâ€‹Viewâ€‹Controller ä¸€ç›´éå¸¸å¥½å¥‡ä»£ç å’Œæ•°æ®ä¹‹é—´çš„è”ç³»ã€‚ æŸäº›ç¼–ç¨‹è¯­è¨€ï¼Œä¾‹å¦‚Lispï¼ŒIoå’ŒMathematicaä»–ä»¬æ˜¯åŒå‹æ€§(ä»£ç å³æ•°æ®)ï¼Œé‚£å°±æ„å‘³ç€å®ƒä»¬çš„ä»£ç æ˜¯åŸå§‹æ•°æ®çš„å‘ˆç°å½¢å¼ï¼Œå®ƒä»¬æœ¬èº«åœ¨ä»£ç ä¸­ä¹Ÿèƒ½å¤Ÿè¢«ç»´æŠ¤ã€‚ç„¶è€Œå¤§å¤šæ•°å…¶å®ƒè¯­è¨€ï¼ŒåŒ…æ‹¬Objective-Cï¼Œç„¶è€Œï¼Œåœ¨è¿™ä¸¤è€…ä¹‹é—´æœ‰ä¸¥æ ¼çš„è¾¹ç•Œï¼Œé¿å…eval()å’Œå…¶å®ƒæœ‰åŠ¨æ€å¼•å¯¼åŠ è½½çš„æ½œåœ¨å±é™©æ–¹æ³•ã€‚ å½“æ•°æ®å‡ºç°å¤ªå¤§å’Œå‘ˆç°ä¸€äº›ä¸œè¥¿è¿‡äºç¬¨é‡é™¤äº†ä½¿ç”¨äºŒè¿›åˆ¶æµçš„é—®é¢˜æ—¶ä»£ç å’Œæ•°æ®ä¹‹é—´çš„ä¸å®‰è¢«æ¨å‘åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„é«˜åº¦ã€‚è‡ªä»ç¬¬ä¸€ä¸ªæ“ä½œç³»ç»Ÿå‡ºç°å¼€å§‹ï¼Œæ€æ ·ç¼–ç ï¼Œè§£ç ï¼Œè§£é‡ŠäºŒè¿›åˆ¶ä»£è¡¨çš„å›¾ç‰‡ï¼Œæ–‡æ¡£ï¼Œå’Œåª’ä½“ä¸€ç›´æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ åœ¨OS Xä¸Šçš„æ ¸å¿ƒæœåŠ¡æ¡†æ¶å’ŒiOSä¸Šæä¾›æ ‡è¯†åŠŸèƒ½å’Œé€šè¿‡æ–‡ä»¶æ‹“å±•å’ŒMIMIE typeâ€“æ ¹æ®é€šç”¨æ•°æ®æ ‡ç¤ºï¼Œç»™æ•°æ®ç±»å‹çš„åˆ†ç±»æ ¸å¿ƒæœåŠ¡æ¡†æ¶ã€‚UTIsæä¾›äº†ä¸€ç§å¯æ‹“å±•ï¼Œé˜¶æ¢¯åˆ†å±‚ç³»ç»Ÿï¼Œè¿™ç»™å¼€å‘è€…åœ¨å¤„ç†å¤§é‡ä¸åŒçš„æ–‡ä»¶ç±»å‹æä¾›äº†å·¨å¤§çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªRubyçš„æºæ–‡ä»¶(.rb)è¢«å½’ç±»ä¸ºï¼šRuby Source Code &gt; Source Code &gt; Text &gt; Content &gt; Dataï¼›ä¸€ä¸ªQuickTimeç”µå½±æ–‡ä»¶(.mov)è¢«å½’ç±»ä¸º Video &gt; Movie &gt; Audiovisual Content &gt; Content &gt; Dataã€‚ UTIsè¡¨ç°å¾—éå¸¸å¥½åœ¨æ¡Œé¢çš„æŠ½è±¡æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ç„¶è€Œï¼Œåœ¨ä¸€ä¸ªç§»åŠ¨èŒƒä¾‹ä¸­è¿™å°±å´©æºƒå¾—å¾ˆå¿«ï¼Œå› ä¸ºæ–‡ä»¶å’Œç›®å½•æ˜¯å¯¹ç”¨æˆ·éšè—çš„ã€‚è¿˜æœ‰ï¼Œéšç€äº‘æœåŠ¡å’Œç¤¾äº¤åª’ä½“æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²åœ¨è¿œç¨‹å®ä½“é€šè¿‡æœ¬åœ°æ–‡ä»¶ã€‚å› æ­¤ï¼ŒUTIså’ŒURLsä¹‹é—´å¾ˆç´§å¼ ã€‚ æˆ‘ä»¬éå¸¸æ¸…æ¥šæˆ‘ä»¬éœ€è¦ä¸€äº›åˆ«çš„ä¸œè¥¿ã€‚UIActivityViewControllerèƒ½å¦æˆä¸ºæˆ‘ä»¬æ­£åœ¨æ€¥åˆ‡å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆå‘¢? UIActivityViewControllerï¼Œåœ¨iOS6ä¸­è¢«å¼•å…¥ï¼Œæä¾›äº†ä¸€å¥—åˆ†äº«å’Œåœ¨åº”ç”¨å†…æ‰§è¡Œæ•°æ®æ“ä½œçš„ç»Ÿä¸€æœåŠ¡ç•Œé¢ã€‚ è€ƒè™‘åˆ°å¯æ“ä½œçš„æ•°æ®é›†åˆï¼Œä¸€ä¸ªUIActivityViewControllerå®ä¾‹é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ›å»ºï¼š 12345678910NSString *string = ...;NSURL *URL = ...;UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[string, URL] applicationActivities:nil];[navigationController presentViewController:activityViewController animated:YES completion:^&#123; // ...&#125;]; è¿™å°†åœ¨å±å¹•åº•éƒ¨å‘ˆç°å¦‚ä¸‹ç•Œé¢ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒUIActivityViewControllerå°†ä¼šæ˜¾ç¤ºæ‰€æœ‰æ”¯æŒçš„å¯ç”¨æœåŠ¡ç±»å‹ï¼Œä½†æ˜¯æŸäº›æ´»åŠ¨ç±»å‹ä¹Ÿå¯ä»¥æ’é™¤ï¼š 1activityViewController.excludedActivityTypes = @[UIActivityTypePostToFacebook]; æ´»åŠ¨ç±»å‹è¢«åˆ’åˆ†â€œåŠ¨ä½œâ€(action)å’Œâ€œåˆ†äº«â€(share)ç±»å‹ï¼š UIActivityCategoryAction UIActivityTypePrint UIActivityTypeCopyToPasteboard UIActivityTypeAssignToContact UIActivityTypeSaveToCameraRoll UIActivityTypeAddToReadingList UIActivityTypeAirDrop UIActivityCategoryShare UIActivityTypeMessage UIActivityTypeMail UIActivityTypePostToFacebook UIActivityTypePostToTwitter UIActivityTypePostToFlickr UIActivityTypePostToVimeo UIActivityTypePostToTencentWeibo UIActivityTypePostToWeibo æ¯ç§æ´»åŠ¨ç±»å‹ï¼Œæ”¯æŒä¸€ç³»åˆ—ä¸åŒçš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªTweetå¯èƒ½ç”±ä¸€ä¸ªNSStringå¹¶é™„å¸¦ä¸€ä¸ªimageå’Œæˆ–è€…URLã€‚ ä¸åŒæ´»åŠ¨ç±»å‹æ”¯æŒçš„æ•°æ®ç±»å‹ Activity Type String Attributed String URL Data Image Asset Other Post To Facebook âœ“ âœ“ âœ“ âœ“ Post To Twitter âœ“ âœ“ âœ“ âœ“ Post To Weibo âœ“ âœ“ âœ“ âœ“ âœ“ Message âœ“ âœ“ âœ“* âœ“* âœ“ sms:&#x2F;&#x2F; NSURL Mail âœ“+ âœ“+ âœ“+ Print âœ“+ âœ“+ UIPrintPageRenderer, UIPrintFormatter, &amp; UIPrintInfo Copy To Pasteboard âœ“ âœ“ âœ“ UIColor, NSDictionary Assign To Contact âœ“ Save To Camera Roll âœ“ âœ“ Add To Reading List âœ“ Post To Flickr âœ“ âœ“ âœ“ âœ“ Post To Vimeo âœ“ âœ“ âœ“ âœ“ âœ“ Post To Tencent Weibo âœ“ âœ“ âœ“ âœ“ âœ“ AirDrop âœ“ âœ“ âœ“ âœ“ âœ“ UIActivityItemSource &amp; UIActivityItemProviderå½“å¿…è¦æ—¶å’Œä¸€ä¸ªç²˜è´´æ¿é¡¹ç›®èƒ½ç”¨æ¥æä¾›çš„æ•°æ®ç±»ä¼¼ï¼Œä¸ºäº†é¿å…è¿‡åº¦çš„å†…æµ‹å¼€é”€æˆ–å¤„ç†æ—¶é—´ï¼Œæ´»åŠ¨ç±»å‹å¯ä»¥æ˜¯ä¸€ç§è‡ªå®šä¹‰ç±»å‹ã€‚ ä»»ä½•éµå¾ª&lt;UIActivityItemSource&gt;åè®®çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å†…æ„UIActivityItemProviderç±»ï¼Œå¯ä»¥ç”¨æ¥åŠ¨æ€æä¾›ä¸åŒç±»å‹çš„æ•°æ®æ ¹æ®æ´»åŠ¨çš„ç±»å‹ã€‚ UIActivityItemSourceè·å–æ•°æ®é¡¹ç›®ï¼š activityViewControllerPlaceholderItem: activityViewController:itemForActivityType: æä¾›æ•°æ®é¡¹ç›®ä¿¡æ¯ï¼š activityViewController:subjectForActivityType: activityViewController:dataTypeIdentifierForActivityType: activityViewController:thumbnailImageForActivityType:suggestedSize: ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ ¹æ®æ˜¯å¦åˆ†äº«åˆ°FaceBookæˆ–è€…Twitteræ¥å±•ç¤ºè‡ªå®šä¹‰ä¸€æ¡æ¶ˆæ¯æ˜¯æ€æ ·ä½¿ç”¨çš„: 1234567891011- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType&#123; if ([activityType isEqualToString:UIActivityTypePostToFacebook]) &#123; return NSLocalizedString(@&quot;Like this!&quot;); &#125; else if ([activityType isEqualToString:UIActivityTypePostToTwitter]) &#123; return NSLocalizedString(@&quot;Retweet this!&quot;); &#125; else &#123; return nil; &#125;&#125; åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰UIActivityé™¤äº†ä¸Šè¿°çš„ç³»ç»Ÿæä¾›çš„æ´»åŠ¨ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„æ´»åŠ¨ã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ´»åŠ¨ç±»å‹ï¼Œå®ƒèƒ½ä½¿ä¸€ä¸ªURLä¸­çš„å›¾ç‰‡æ·»åŠ ä¸Šèƒ¡é¡»é€šè¿‡ä½¿ç”¨mustache.meã€‚ Before: After: é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåå‘åŸŸåè§£æçš„æ ‡è¯†ç¬¦ç»™æ´»åŠ¨ç±»å‹ï¼š 1static NSString * const HIPMustachifyActivityType = @&quot;com.nshipster.activity.Mustachify&quot;; ç„¶åæŒ‡å®šå®ƒçš„åˆ†ç±»ä¸ºUIActivityCategoryActionå¹¶ä¸”æä¾›ä¸€ä¸ªæœ¬åœ°åŒ–æ ‡é¢˜å’ŒiOSç‰ˆæœ¬ç›¸åº”çš„å›¾ç‰‡ï¼š 123456789101112131415161718192021#pragma mark - UIActivity+ (UIActivityCategory)activityCategory &#123; return UIActivityCategoryAction;&#125;- (NSString *)activityType &#123; return HIPMustachifyActivityType;&#125;- (NSString *)activityTitle &#123; return NSLocalizedString(@&quot;Mustachify&quot;, nil);&#125;- (UIImage *)activityImage &#123; if (NSFoundationVersionNumber &gt; NSFoundationVersionNumber_iOS_6_1) &#123; return [UIImage imageNamed:@&quot;MustachifyUIActivity7&quot;]; &#125; else &#123; return [UIImage imageNamed:@&quot;MustachifyUIActivity&quot;]; &#125;&#125; ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼ŒHIPMatchingURLsInActivityItemsï¼Œé€šè¿‡å®ƒè¿”å›ä¸€ä¸ªæ”¯æŒç±»å‹çš„å›¾ç‰‡URLçš„æ•°ç»„ã€‚ 123456789101112static NSArray * HIPMatchingURLsInActivityItems(NSArray *activityItems) &#123; return [activityItems filteredArrayUsingPredicate:[NSPredicate predicateWithBlock: ^BOOL(id item, __unused NSDictionary *bindings) &#123; if ([item isKindOfClass:[NSURL class]] &amp;&amp; ![(NSURL *)item isFileURL]) &#123; return [[(NSURL *)item pathExtension] caseInsensitiveCompare:@&quot;jpg&quot;] == NSOrderedSame || [[(NSURL *)item pathExtension] caseInsensitiveCompare:@&quot;png&quot;] == NSOrderedSame; &#125; return NO; &#125;]];&#125; è¿™ä¸ªå‡½æ•°è®©åè¢«ç”¨åœ¨-canPerformWithActivityItems:å’ŒprepareWithActivityItems:æ¥è·å–å°èƒ¡å­çš„ç¬¬ä¸€å¼ PNGæˆ–JPEGå›¾ç‰‡çš„URLï¼Œå‡å¦‚æœ‰çš„è¯ã€‚ 123456789- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems &#123; return [HIPMatchingURLsInActivityItems(activityItems) count] &gt; 0;&#125;- (void)prepareWithActivityItems:(NSArray *)activityItems &#123; static NSString * const HIPMustachifyMeURLFormatString = @&quot;http://mustachify.me/%d?src=%@&quot;; self.imageURL = [NSURL URLWithString:[NSString stringWithFormat:HIPMustachifyMeURLFormatString, self.mustacheType, [HIPMatchingURLsInActivityItems(activityItems) firstObject]]];&#125; æˆ‘ä»¬çš„ç½‘ç«™æœåŠ¡æä¾›äº†å„ç§èƒ¡é¡»é€‰é¡¹ï¼Œå®ƒè¢«å®šä¹‰åœ¨ä¸€ä¸ªæšä¸¾ä¸­ï¼š 12345678typedef NS_ENUM(NSInteger, HIPMustacheType) &#123; HIPMustacheTypeEnglish, HIPMustacheTypeHorseshoe, HIPMustacheTypeImperial, HIPMustacheTypeChevron, HIPMustacheTypeNatural, HIPMustacheTypeHandlebar,&#125;; æœ€ç»ˆï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªUIViewControlleræ¥æ˜¾ç¤ºå›¾ç‰‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¸ªç®€å•çš„UIWebViewæ§åˆ¶å™¨å°±å¤Ÿç”¨äº†ã€‚ 123456789101112@interface HIPMustachifyWebViewController : UIViewController &lt;UIWebViewDelegate&gt;@property (readonly, nonatomic, strong) UIWebView *webView;@end- (UIViewController *)activityViewController &#123; HIPMustachifyWebViewController *webViewController = [[HIPMustachifyWebViewController alloc] init]; NSURLRequest *request = [NSURLRequest requestWithURL:self.imageURL]; [webViewController.webView loadRequest:request]; return webViewController;&#125; ä¸ºäº†ä½¿ç”¨æˆ‘ä»¬åŠ äº†æ–°èƒ¡é¡»çš„æ´»åŠ¨ï¼Œæˆ‘ä»¬ç®€å•æŠŠå®ƒä¼ é€’åˆ°UIActivityViewControlleræ„é€ å™¨ä¸­ï¼š 1234HIPMustachifyActivity *mustacheActivity = [[HIPMustachifyActivity alloc] init];UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[imageURL] applicationActivities:@[mustacheActivity]]; æ‰‹åŠ¨æ‰§è¡ŒåŠ¨ä½œç°åœ¨æ˜¯ä¸€ä¸ªæé†’çš„å¥½æ—¶æœºï¼Œå½“UIActivityViewControllerå…è®¸ç”¨æˆ·æ‰§è¡Œä»–ä»¬é€‰æ‹©çš„åŠ¨ä½œï¼Œåˆ†äº«ä¹Ÿèƒ½é€šè¿‡æ‰‹åŠ¨æ‰§è¡Œï¼Œå½“åœºæ™¯å‡ºç°æ—¶ã€‚ æ‰€æœ‰ä¸ºäº†å®Œæ•´æ€§ï¼Œä¸‹é¢æ˜¯æ€æ ·æ‰‹åŠ¨æ‰§è¡Œè¿™äº›åŠ¨ä½œç¤ºä¾‹ï¼š Open URL12NSURL *URL = [NSURL URLWithString:@&quot;http://nshipster.com&quot;];[[UIApplication sharedApplication] openURL:URL]; ç³»ç»Ÿæ”¯æŒçš„URLåè®®åŒ…æ‹¬ï¼šmailto:ï¼Œ tel:ï¼Œsms:å’Œmaps:ã€‚ æ·»åŠ åˆ°Safarié˜…è¯»åˆ—è¡¨1234567@import SafariServices;NSURL *URL = [NSURL URLWithString:@&quot;http://nshipster.com/uiactivityviewcontroller&quot;];[[SSReadingList defaultReadingList] addReadingListItemWithURL:URL title:@&quot;NSHipster&quot; previewText:@&quot;...&quot; error:nil]; ä¿å­˜åˆ°ç›¸å†Œ12345UIImage *image = ...;id completionTarget = self;SEL completionSelector = @selector(didWriteToSavedPhotosAlbum);void *contextInfo = NULL;UIImageWriteToSavedPhotosAlbum(image, completionTarget, completionSelector, contextInfo); å‘é€ SMS123456789@import MessageUI;MFMessageComposeViewController *messageComposeViewController = [[MFMessageComposeViewController alloc] init];messageComposeViewController.messageComposeDelegate = self;messageComposeViewController.recipients = @[@&quot;mattt@nshipsterâ€¢com&quot;];messageComposeViewController.body = @&quot;Lorem ipsum dolor sit amet&quot;;[navigationController presentViewController:messageComposeViewController animated:YES completion:^&#123; // ...&#125;]; å‘é€ Email12345678910@import MessageUI;MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];mailComposeViewController.mailComposeDelegate = self;[mailComposeViewController setToRecipients:@[@&quot;mattt@nshipsterâ€¢com&quot;]];[mailComposeViewController setSubject:@&quot;Hello&quot;];[mailComposeViewController setMessageBody:@&quot;Lorem ipsum dolor sit amet&quot; isHTML:NO];[navigationController presentViewController:mailComposeViewController animated:YES completion:^&#123; // ...&#125;]; å‘é€ Tweet123456789@import Social;SLComposeViewController *tweetComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];[tweetComposeViewController setInitialText:@&quot;Lorem ipsum dolor sit amet.&quot;];[self.navigationController presentViewController:tweetComposeViewController animated:YES completion:^&#123; // ... &#125;]; IntentKitå½“æ‰€æœ‰çš„è¿™äº›éƒ½æ˜¯å°è±¡æ·±åˆ»å’Œéå¸¸æœ‰ç”¨ï¼Œå®ƒåœ¨iOSä¸­çš„æ´»åŠ¨èŒƒä¾‹ç‰¹åˆ«ç¼ºä¹ï¼Œå½“å’Œåœ¨Androidä¸­çš„ä¸°å¯Œçš„Intents Modelç›¸æ¯”ã€‚ åœ¨Androidä¸­ï¼Œappsèƒ½å¤Ÿæ³¨å†Œä¸åŒçš„intentsï¼Œæ¥æŒ‡ç¤ºå®ƒä»¬èƒ½å¤Ÿç”¨åœ¨Mapsï¼Œæˆ–è€…å……å½“ä¸€ä¸ªæµè§ˆå™¨ï¼Œèƒ½å¤Ÿè¢«æ¶‰åŠåˆ°ç›¸å…³æ´»åŠ¨çš„é»˜è®¤appé€‰ä¸­ï¼Œæ¯”å¦‚æŒ‡å¼•æ–¹å‘ï¼Œæˆ–è€…ä¸€ä¸ªä¹¦ç­¾çš„URLã€‚ ç„¶è€ŒiOSç¼ºä¹æ¥æ”¯æŒè¿™äº›çš„å¯æ‹“å±•çš„åŸºç¡€æ¶æ„ï¼Œæœ‰ä¸€ä¸ªå«IntentKitç¬¬ä¸‰æ–¹åº“ï¼Œä½œè€…@lazerwalker(å› f*ingblocksyntax.comæˆå)ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­å…³äºæˆ‘ä»¬æ€æ ·ç¼©å°è¿™æ–¹é¢çš„å·®è·ã€‚ é€šå¸¸ï¼Œä¸€ä¸ªå¼€å‘è€…å¯èƒ½å·²ç»åšäº†å¾ˆå¤šç¬¬ä¸€æ­¥çš„å·¥ä½œï¼Œæ¥å†³å®šæ˜¯å¦æŸä¸ªappæ˜¯å¦å®‰è£…ï¼Œç„¶åæ€æ ·æ„é€ ä¸€ä¸ªURLæ¥æ”¯æŒæŸä¸ªç‰¹æ®Šçš„æ´»åŠ¨ã€‚ IntentKitåŠ å¼ºäº†è¿ç»“åˆ°å¤§å¤šæ•°æµè¡Œçš„Webï¼ŒMaps,Mail,Twitter,Facebook,å’ŒGoogle+å®¢æˆ·çš„çš„é€»è¾‘ï¼Œä»¥å’ŒUIActivityViewControllerç›¸ä¼¼çš„UIã€‚ ä»»ä½•å¯»æ‰¾æå‡ä»–ä»¬çš„åˆ†äº«ä½“éªŒåˆ°ä¸‹ä¸€ä¸ªçº§åˆ«çš„äººéƒ½åº”è¯¥ä»”ç»†çœ‹çœ‹è¿™ä¸ªã€‚ â€“ åœ¨iOSé•¿æœŸç”Ÿå­˜èƒ½åŠ›ä½œä¸ºä¸€ä¸ªå¹³å°å–å†³äºåƒUIActivityViewControllerç±»å‹çš„åˆ†äº«æœºåˆ¶å­˜ä¸Šåœ¨å¾ˆå¤§çš„äº‰è®ºã€‚æ­£å¦‚ä¿—è¯­æ‰€è¨€ï¼šâ€œèµ„è®¯åº”è¯¥å…è´¹â€ã€‚ä»»ä½•é˜»ç¢æ–¹å¼ç»Ÿä¸€çš„ä¸œè¥¿ï¼Œæœ€ç»ˆéƒ½ä¼šå¤±å»ä¸€äº›æ²¡æœ‰çš„ä¸œè¥¿ã€‚ å°†æ¥çš„æ™¯è±¡æ˜¯å…¬å…±çš„è¿œç¨‹è§†å›¾æ§åˆ¶å™¨APIså¸¦ç»™æˆ‘å¸Œæœ›ï¼Œå¯¹äºå°†æ¥åœ¨iOSå¹³å°ä¸Šçš„åˆ†äº«åŠŸèƒ½ã€‚ç„¶è€Œç°åœ¨æˆ‘ä»¬åšçš„å’ŒUIActivityViewControllerç›¸æ¯”ç³Ÿç³•å¾—å¤šã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"2016ä¸ªäººå¹´åº¦æ€»ç»“","slug":"2017-01-10-2016ge-ren-nian-du-zong-jie","date":"2017-01-09T15:48:07.000Z","updated":"2024-11-02T03:36:52.411Z","comments":true,"path":"2017/01/09/2017-01-10-2016ge-ren-nian-du-zong-jie/","permalink":"https://blog.wangruofeng007.com/2017/01/09/2017-01-10-2016ge-ren-nian-du-zong-jie/","excerpt":"","text":"å‰è¨€2016å¯¹äºæˆ‘æ¥è¯´çš„æ„ä¹‰ï¼Œå°±åƒ10å¹´å‰çš„ä»Šå¤©ï¼ŒiPhoneä¹‹ä½™ä¹”å¸ƒæ–¯ï¼ŒiPhoneå‘å¸ƒå10å¹´åçš„ä»Šå¤©ï¼Œå°ç¨‹åºä¹‹ä½™å¼ å°é¾™ã€‚å®ƒè·¨è¶Šäº†ä¸€é“æ·±æ·±çš„é¸¿æ²Ÿï¼Œå¹¶å‘è‡ªå·±ç†æƒ³çš„æ–¹å‘åšå®šå‰è¡Œã€‚ ä¸€ç›´ç›¸ä¿¡åŠªåŠ›å°±ä¼šæœ‰å›æŠ¥ï¼Œä»˜å‡ºå°±ä¼šæœ‰æ”¶è·ï¼Œæ˜¯é‡‘å­æ€»ä¼šå‘å…‰ã€‚ 2016æ˜¯æˆ‘åŠ å…¥å®¢è·¯ä¸€å‘¨å¹´çš„æ—¶é—´ï¼Œè®¤è¯†äº†å¾ˆå¤šæœ‰è¶£çš„æœ‹å‹å’ŒåŒäº‹çš„ä¸€ 2016æ˜¯æˆ‘è¿ˆå‡ºè‡ªæˆ‘ï¼Œèµ°å‡ºä¸­å›½æ¢ç´¢æœªçŸ¥çš„ä¸–ç•Œçš„ä¸€å¹´ã€‚ 2016æ˜¯æ—…è¡Œï¼Œå·¥ä½œï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ ï¼Œç¤¾äº¤ä¸€æ ·éƒ½æ²¡è½ä¸‹çš„ä¸€å¹´ã€‚ æ›¾ç»çš„é“å“¥ä»¬ä¹Ÿå³å°†å›å½’ä¸œèï¼Œè¿™æ ·æˆ‘ä»¬çš„è·ç¦»åˆè¿›äº†ä¸€æ­¥ï¼Œä»¥åæœ‰æ›´å¤šçš„æ—¶é—´èŠç†æƒ³è°ˆäººç”Ÿï¼Œæƒ³æƒ³çªç„¶å¥½æ¿€åŠ¨ã€‚ ä¸šç»©2016-2017å¹´é—´ä¸€å…±å‘å¸ƒ17ä¸ªç‰ˆæœ¬ï¼Œå¤šæ¬¡è¢«Appleæ¨èï¼Œå´©æºƒç‡å°äº0.2%ï¼Œè¿™å°±æ˜¯ç»™è‡ªå·±å’Œå…¬å¸äº¤å‡ºæœ€æ»¡æ„çš„ç­”å·ã€‚ ä¸‹é¢æ˜¯Klook Appä¸ŠAppleçš„æ¨èé¡µæˆªå›¾ï¼š ä¸‹é¢æ˜¯Klook iMessage Appä¸ŠAppleçš„æ¨èé¡µæˆªå›¾ï¼š æœ‰æ—¶å‘ç°äº’è”ç½‘çœŸçš„å¾ˆå¥‡å¦™ï¼Œä»–èƒ½è®©å¾ˆå¤šäººè¿…é€Ÿç§¯ç´¯å¤§é‡çš„è´¢å¯Œæˆåèµ°ä¸Šäººç”Ÿçš„å·…å³°ï¼Œè¿‡ä¸Šè‡ªå·±æƒ³è¦çš„ç”Ÿæ´»ï¼Œåªè¦ä½ ä¸€ä¸ªå¥½çš„ideaå’Œä¸€ä¸ªå¼ºå¤§çš„æ‰§è¡ŒåŠ›ã€‚ è¿™ä¸€å¹´æ¥ä¸ªäººæŠ€æœ¯åšå®¢ä¸€å…±å†™äº†46éæ–‡ç« ï¼Œä¹Ÿç®—ä¸€ç‚¹å°ç§¯è“„ï¼Œå¸Œæœ›æ¥å¹´ç»§ç»­åšæŒï¼Œèƒ½å¤Ÿå½±å“å’Œå¸®åŠ©æ›´å¤šçš„äººï¼Œå› ä¸ºæŠ€æœ¯è¿™æ¡é“è·¯ä¸Šå‘å®åœ¨æ˜¯å¤ªå¤šã€‚ Githubä¸Š405æ¬¡commitè¿˜ç®—ä¸­è§„ä¸­çŸ©ï¼Œå¸Œæœ›æ¥å¹´åˆ†äº«æ›´å¤šçš„æœ‰ä»·å€¼çš„ä¸œè¥¿ç»™æœ‰éœ€è¦çš„å°ä¼™ä¼´ï¼Œä¹Ÿç•™ç»™è‡ªå·±æ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚ ![github 2016 commit record](&#x2F;images&#x2F;2016_year_end_review&#x2F;github 2016 commit record.png) å½“ç„¶ç°åœ¨Githubä¸Šçš„å†…å®¹Forkå’Œåšå®¢å±…å¤šï¼ŒåŸåˆ›å¼€æºé¡¹ç›®è¿˜æ¯”è¾ƒå°‘ï¼Œå¸Œæœ›æ¥å¹´å¤šè¾“å‡ºä¸€ç‚¹ä¸œè¥¿ã€‚ æœªæ¥æ„¿æœ›è¿™ä¸œè¥¿è¿˜çœŸç¥å¥‡ï¼Œè®¸ä¸€ä¸ªè¯•è¯•å§ï¼Œæˆ–è®¸å®ƒçœŸçš„å®ç°äº†å‘¢ï¼Œå°±éå¸¸æœ‰è¶£äº†ã€‚ç»™è‡ªå·±å®šä¸‹çš„æ—…è¡Œæ¸…å•ï¼Œå­¦ä¹ æ¸…å•ï¼Œé˜…è¯»æ¸…å•ï¼Œç”µå½±æ¸…å•åŸºæœ¬éƒ½å®Œæˆï¼Œè¿™æ˜¯ä¸€ä»¶éå¸¸æ£’çš„äº‹æƒ…ï¼Œä¸ºè‡ªå·±ç‚¹ä¸ªèµã€‚å•åå·²ç»ä»é£å…‰è½¬äººåƒï¼Œå¸Œæœ›æ¥å¹´å¤šå‡ºç‚¹ç‰‡ï¼Œæ–°å¹´å³å°†æ¥ä¸´ï¼Œå¸Œæœ›è‡ªå·±åšæŒä¸€å‘¨2æ¬¡çš„é”»ç‚¼ï¼Œä¿æŒç²¾åŠ›å……æ²›ä»¥ä¾¿å¥½æŠ•å…¥åˆ°æ„Ÿæƒ…ï¼Œç”Ÿæ´»ä¸­ä»¥åŠå­¦ä¹ ä¸­ï¼Œæ¯•ç«Ÿäº’è”ç½‘æ˜¯ä¸€é—¨ç»ˆç”Ÿå­¦ä¹ çš„èŒä¸šï¼Œä¹Ÿæ˜¯å®¹æ˜“äº§ç”Ÿå¥‡è¿¹çš„èŒä¸šï¼Œè¯´ä¸å®šä¸€ä¸‹ä¸ªå°±æ˜¯ä½ å‘¢ã€‚ æ¥å¹´å¸Œæœ›å’Œè‡ªå·±å–œæ¬¢çš„äººæ—…æ‹ï¼Œå¤šå°è¯•ä¸€äº›æ²¡å°è¯•è¿‡çš„äº‹æƒ…ï¼Œäº¤æ›´å¤šæœ‰è¶£çš„æœ‹å‹ã€‚å¹²å·´çˆ¹ğŸ˜ğŸ˜ğŸ˜","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://blog.wangruofeng007.com/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"}]},{"title":"è§†é¢‘æ’­æ”¾Tips","slug":"2016-12-08-shi-pin-bo-fang-tips","date":"2016-12-08T15:44:02.000Z","updated":"2024-11-02T03:36:52.411Z","comments":true,"path":"2016/12/08/2016-12-08-shi-pin-bo-fang-tips/","permalink":"https://blog.wangruofeng007.com/2016/12/08/2016-12-08-shi-pin-bo-fang-tips/","excerpt":"","text":"ä¸»è¦æ¶‰åŠåˆ°Tipsï¼š è·å–è®¾å¤‡éŸ³é‡ é™éŸ³æ¨¡å¼å¤±æ•ˆ ç›‘å¬éŸ³é‡æ”¹å˜ è®¾ç½®è®¾å¤‡éŸ³é‡ ç›‘å¬é™éŸ³æŒ‰é’® ç›‘å¬è€³æœºæ‹”æ’ è·å–è®¾å¤‡éŸ³é‡æ’­æ”¾éŸ³é¢‘å¯ä»¥é€šè¿‡ï¼š 12MPMusicPlayerController *iPod = [MPMusicPlayerController systemMusicPlayer];float volumeLevel = iPod.volume; æ’­æ”¾è§†é¢‘å¯ä»¥é€šè¿‡ï¼š 1float outputVolume = [[AVAudioSession sharedInstance] outputVolume]; æ¨èä¸‹é¢çš„æ–¹æ³•ï¼Œä¸Šé¢çš„åœ¨æŸäº›ç‰ˆæœ¬å¯èƒ½æœ‰é—®é¢˜ï¼Œä¸‹é¢çš„æ–¹æ³•å…¼å®¹iOS6åŠä»¥ä¸Šã€‚ é™éŸ³æ¨¡å¼å¤±æ•ˆé€šè¿‡è®¾ç½®éŸ³é¢‘ä¼šè¯çš„categoryå®ç°ï¼š 12345NSError *setCategoryError = nil;BOOL success = [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &amp;setCategoryError]; if (!success) &#123; /* handle the error in setCategoryError */ &#125; è¿™æ ·Appå°±ä¸ä¼šéšç€æ‰‹æœºé™éŸ³é”®æ‰“å¼€è€Œé™éŸ³ï¼Œå¯åœ¨æ‰‹æœºé™éŸ³ä¸‹æ’­æ”¾å£°éŸ³ğŸ˜ ç›‘å¬éŸ³é‡æ”¹å˜ç›‘å¬éŸ³é¢‘æ”¹å˜ç§æœ‰é€šçŸ¥ï¼š 1[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChanged:) name:@&quot;AVSystemController_SystemVolumeDidChangeNotification&quot; object:nil]; å®ç°é€šè¿‡å›è°ƒï¼š 1234567- (void)volumeChanged:(NSNotification *)notification&#123; float volume = [[[notification userInfo] objectForKey:@&quot;AVSystemController_AudioVolumeNotificationParameter&quot;] floatValue]; // do something&#125; è®¾ç½®è®¾å¤‡éŸ³é‡ä½¿ç”¨MPVolumeViewç±»ï¼Œä¾¿åˆ©å®ƒçš„å­viewsæ‰¾åˆ°ç±»ä¸ºMPVolumeSliderçš„æ»‘ç«¿ã€‚ 12345678MPVolumeView *volumeView = [[MPVolumeView alloc] init];UISlider *volumeViewSlider = nil; for (UIView *view in [volumeView subviews])&#123; if ([view.class.description isEqualToString:@&quot;MPVolumeSlider&quot;]) &#123; volumeViewSlider = (UISlider *)view; break; &#125; &#125; ç„¶åå†é€šè¿‡è®¾ç½®volumeViewSliderçš„valueå³å¯ã€‚ 1_volumeViewSlider.value = someVolume; ç›‘å¬é™éŸ³æŒ‰é’®å‚è€ƒSound Switch - Sharkfoodçš„å®ç°ã€‚ ä½¿ç”¨å¾ˆç®€å•ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé™éŸ³æ¨¡å¼ï¼š 123if ([SharkfoodMuteSwitchDetector shared].isMute) &#123; // do something&#125; åŠ¨æ€ç›‘å¬ï¼Œé€šè¿‡blockå›è°ƒï¼š 123[SharkfoodMuteSwitchDetector shared].silentNotify = ^(BOOL silent)&#123; // do something&#125;; ç›‘å¬è€³æœºæ‹”æ’ç›‘å¬AVAudioSessionRouteChangeNotificationé€šçŸ¥ï¼š 123[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(audioRouteChangeListenerCallback:) name:AVAudioSessionRouteChangeNotification object:nil]; å®ç°å›è°ƒï¼š 1234567891011121314151617181920- (void)audioRouteChangeListenerCallback:(NSNotification*)notification&#123; NSDictionary *interuptionDict = notification.userInfo; NSInteger routeChangeReason = [[interuptionDict valueForKey:AVAudioSessionRouteChangeReasonKey] integerValue]; switch (routeChangeReason) &#123; case AVAudioSessionRouteChangeReasonNewDeviceAvailable: // è€³æœºæ’å…¥ break; case AVAudioSessionRouteChangeReasonOldDeviceUnavailable: // è€³æœºæ‹”æ‰ break; case AVAudioSessionRouteChangeReasonCategoryChange: // called at start - also when other audio wants to play NSLog(@&quot;AVAudioSessionRouteChangeReasonCategoryChange&quot;); break; &#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"éŸ³è§†é¢‘","slug":"éŸ³è§†é¢‘","permalink":"https://blog.wangruofeng007.com/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"}]},{"title":"åŠ¨ç”»åˆ‡æ¢Imageæœ€ä½³å®è·µ","slug":"2016-11-26-dong-hua-qie-huan-imagezui-jia-shi-jian","date":"2016-11-26T12:42:40.000Z","updated":"2024-11-02T03:36:52.410Z","comments":true,"path":"2016/11/26/2016-11-26-dong-hua-qie-huan-imagezui-jia-shi-jian/","permalink":"https://blog.wangruofeng007.com/2016/11/26/2016-11-26-dong-hua-qie-huan-imagezui-jia-shi-jian/","excerpt":"","text":"å‰è¨€UIImageViewåº”è¯¥æ˜¯iOSä¸­ä½¿ç”¨æœ€é¢‘æ¢çš„æ§ä»¶ï¼Œå°±å¦‚æ—¥å¸¸åƒé¥­ä¸€æ ·ï¼Œå¤©å¤©éƒ½åœ¨é‡å¤ï¼Œæœ‰æ—¶æˆ–è®¸åº”è¯¥åæ€ä¸€ä¸‹ï¼Œæ€ä¹ˆä½¿ç”¨è¿™ä¸ªæ§ä»¶ï¼Œè¾¾åˆ°ä½èƒ½è€—ï¼Œæœ€ä½³ç”¨æˆ·ä½“éªŒã€‚ é’ˆå¯¹å•å¼ å›¾ç‰‡æ¥è¯´ï¼Œå¸¸è§çš„å¤„ç†æ˜¯åœ¨å›¾ç‰‡å‡†å¤‡æ˜¾ç¤ºæ—¶å¢åŠ ä¸€ä¸ªæ·¡å‡ºåŠ¨ç”»ï¼Œèƒ½ä½¿å›¾ç‰‡æ˜¾ç¤ºé—²çš„å¾ˆå¹³æ»‘ã€‚ å¤šå¼ å›¾ç‰‡ä¹Ÿä¸€æ ·ï¼Œåœ¨ç¬¬ä¸€å¼ å›¾ç‰‡çš„åŸºç¡€ä¸Šæ·¡å‡ºåŸæ¥çš„å›¾ç‰‡ï¼Œæ·¡å…¥æ–°çš„å›¾ç‰‡ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯æº¶è§£æ•ˆæœã€‚ å¾ˆå¤šäººå–œæ¬¢å¯¹å›¾ç‰‡çš„alphaåšæ·¡å‡ºåŠ¨ç”»ï¼Œä½¿alphaä»0åˆ°1åŠ¨ç”»æ”¹å˜ã€‚è¿™ç§åŠ¨ç”»æœ‰ä¸€ç‚¹ä¸å¥½çš„æ˜¯ï¼Œåœ¨åŠ¨ç”»ç»“æŸåï¼Œå›¾ç‰‡ä¼šæ˜æ˜¾çš„å‡ºç°ä¸€é—ªï¼Œè¿™æ ·ä½¿åŠ¨ç”»çœ‹èµ·æ¥æœ‰ç‚¹çªå…€ã€‚æ¯”è¾ƒå¥½çš„åšæ³•æ—¶ï¼Œåœ¨å°†è¦æ˜¾ç¤ºæ—¶ç»™å›¾ç‰‡åšä¸€ä¸ªè½¬åœºåŠ¨ç”»ã€‚ æ·¡å‡ºåŠ¨ç”»å®ç°ä¸‹é¢æ˜¯å…¶ä¸­ä¸€ç§ç®€å•çš„å®ç°ï¼š 12345678910111213@implementation UIImageView (RFWebImage)- (void)animatedChangeToImage:(UIImage *)img&#123; [UIView transitionWithView:self duration:0.3f options:UIViewAnimationOptionTransitionCrossDissolve animations:^&#123; self.image = img; &#125; completion:NULL];&#125;@end æ€è·¯ï¼šåœ¨ImageViewå°†è¦æ˜¾ç¤ºæ˜¯ä½¿ç”¨è½¬åœºåŠ¨ç”»å‡½æ•°æ¥å®ç°æ·¡å‡ºåŠ¨ç”»æ•ˆæœï¼Œä½“éªŒåº”è¯¥æ˜¯æ˜¯å„ç§åŠ¨ç”»ä¸­æœ€å¥½çš„äº†ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ã€‚ åœ¨æ·¡å‡ºæ˜¾ç¤ºçš„åŠ¨ç”»åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¼•å‡ºä»Šå¤©çš„ä¸»è§’ï¼ŒåŠ¨ç”»åˆ‡æ¢Imageã€‚ æ€è·¯ï¼šå•å¼ å›¾ç‰‡æ·¡å‡ºæˆ‘ä»¬å·²ç»å®ç°ï¼Œç°åœ¨åšçš„å°±æ˜¯åœ¨åˆ‡æ¢ä¸€å¼ æ–°çš„å›¾ç‰‡æ—¶åŒæ—¶å†åŠ å…¥æ·¡å‡ºæˆ–è€…è¯´æº¶è§£æ•ˆæœå³å¯ã€‚ åŠ¨ç”»åˆ‡æ¢Imageæ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‹é¢3ç§å®ç°ï¼š CATransitionç±»å®ç° UIViewåŠ¨ç”»è½¬åœºAPIå®ç° CABasicAnimationç±»å®ç° CATransitionå®ç°CATransitionç±»æ˜¯iOSä¸­å¾ˆå¥½ç”¨çš„æ§åˆ¶è½¬åœºåŠ¨ç”»çš„ç±»ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å¯ä»¥å®ç°å¸¸è§è€Œç‚«é…·çš„åŠ¨ç”»æ•ˆæœï¼Œå˜æ¢ç±»å‹é€šè¿‡typeå­—æ®µæ§åˆ¶ï¼Œsubtypeå¯ä»¥å¾ˆç»†åŒ–æ§åˆ¶åŠ¨ç”»çš„æ–¹å‘ï¼ˆæ¯”å¦‚åŠ¨ç”»å¼€å§‹çš„ä¸Šä¸‹å·¦å³æ–¹å‘ï¼‰ã€‚CATransitionç»§æ‰¿è‡³CAAnimationå¯ä»¥å¯¹åŠ¨ç”»è®¾ç½®åŠ¨ç”»æ›²çº¿ï¼ˆtimingFunctionï¼‰ï¼Œå¯ä»¥é€šè¿‡ä»£ç†è·å–åŠ¨ç”»çŠ¶æ€ï¼ˆæ˜¯å·²ç»å¼€å§‹ï¼Œè¿˜æ˜¯å·²ç»åœæ­¢ï¼Œå·²ç»æ˜¯å¦å®Œæˆï¼‰ã€‚ typeæ”¯æŒå››ç§ç±»å‹ï¼š kCATransitionFade &#x2F;&#x2F; æ·¡å…¥æ·¡å‡º kCATransitionMoveIn &#x2F;&#x2F; ä»æŸä¸ªæ–¹å‘å‘ç»ˆç‚¹å¹³ç§»çŸ¥é“è¦†ç›–åœ¨ä¸Šæ–¹ kCATransitionPush &#x2F;&#x2F; æŠŠåŸæ¥çš„æ¨å‡ºå»ï¼Œè‡ªå·±æ¨å‡ºå» kCATransitionReveal &#x2F;&#x2F; æŠŠåŸæ¥çš„ä»æ­£ä¸Šæ–¹è§£å¼€ï¼Œè‡ªå·±åœ¨ä¸‹é¢ ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š 12345678910111213- (void)animatedSwichImageMethodOne &#123; UIImage *toImage = [self getRadomImage]; CATransition *transition = [CATransition animation]; transition.duration = 0.3f; transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; transition.type = kCATransitionFade; transition.subtype = kCATransitionFromTop; [self.imageViewOne.layer addAnimation:transition forKey:nil]; [self.imageViewOne setImage:toImage];&#125; UIViewåŠ¨ç”»è½¬åœº1+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0); é€šè¿‡ä¸Šé¢çš„å‡½æ•°å®ç°ï¼Œå…¶å®æ˜¯å¯¹ç¬¬ä¸€ç§çš„é«˜çº§å°è£…ã€‚é€šè¿‡è®¾ç½®optionsä¸ºUIViewAnimationOptionTransitionCrossDissolveå³å¯ã€‚ ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š 1234567891011- (void)animatedSwichImageMethodTwo &#123; UIImage *toImage = [self getRadomImage]; [UIView transitionWithView:self.imageViewTwo duration:0.3f options:UIViewAnimationOptionTransitionCrossDissolve | UIViewAnimationOptionCurveEaseInOut animations:^&#123; self.imageViewTwo.image = toImage; &#125; completion:nil];&#125; CABasicAnimationå®ç°CABasicAnimationæ˜¯æ ¸å¿ƒåŠ¨ç”»ä¸€ä¸ªé‡è¦çš„ç±»ï¼Œç»§æ‰¿è‡³CAPropertyAnimationï¼Œå¯ä»¥å¯¹æ‰€æœ‰çš„å¯åŠ¨ç”»å±æ€§åšåŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡fromValueï¼ŒtoValueï¼ŒbyValueå­—æ®µæ§åˆ¶åŠ¨ç”»çš„è¿›åº¦ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯å¯¹CALayerçš„contentså±æ€§åšåŠ¨ç”»ï¼Œåœ¨æ”¹å˜å›¾ç‰‡æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªCABasicAnimationå¯¹è±¡æ·»åŠ åˆ°ImageViewçš„å›¾å±‚ä¸Šå³å¯ã€‚ ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š 1234567891011- (void)animatedSwichImageMethodThree &#123; UIImage *toImage = [self getRadomImage]; CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@&quot;contents&quot;]; animation.toValue = toImage; animation.duration = 0.3f; [self.imageViewThree.layer addAnimation:animation forKey:@&quot;contentsAnimationKey&quot;]; [self.imageViewThree setImage:toImage];&#125; æ›´å¤šå†…å®¹è¯·ä¸‹è½½DemoæŸ¥çœ‹ï¼ˆğŸ¤”Bonusï¼š Flipæ•ˆæœğŸ¤”ï¼‰","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://blog.wangruofeng007.com/tags/%E5%8A%A8%E7%94%BB/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"iOSæ— ç¼æ¡¥æ¥ã€ç¿»è¯‘Appleå®˜æ–¹æ–‡æ¡£ã€‘","slug":"2016-11-17-ioswu-feng-qiao-jie","date":"2016-11-17T15:52:46.000Z","updated":"2024-11-02T03:36:52.410Z","comments":true,"path":"2016/11/17/2016-11-17-ioswu-feng-qiao-jie/","permalink":"https://blog.wangruofeng007.com/2016/11/17/2016-11-17-ioswu-feng-qiao-jie/","excerpt":"","text":"Toll-Free Bridged Typesåœ¨Core Foundationæ¡†æ¶å’ŒFoundation æ¡†æ¶ä¸­æœ‰å¾ˆå¤šæ•°æ®ç±»å‹å¯ä»¥äº¤æ›¿è½¬æ¢ã€‚èƒ½å¤Ÿè¢«äº¤æ›¿è½¬æ¢çš„æ•°æ®ç±»å‹ä¹Ÿè¢«å«åšToll-Free Bridgedæ•°æ®ç±»å‹ã€‚è¿™æ„å‘³ç€ä½ èƒ½åƒå‚æ•°ä¸€æ ·ä½¿ç”¨ç›¸åŒçš„æ•°æ®ç»“æ„å¯¹ä¸€ä¸ªCore Foundationçš„å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œæˆ–è€…åƒObjective-Cçš„æ¶ˆæ¯æ¥å—æ¨¡å¼ä¸€æ ·æ‰§è¡Œã€‚ä¾‹å¦‚ï¼ŒNSLocaleï¼ˆæŸ¥çœ‹NSLocale Class Referenceï¼‰å¯ä»¥ä¸åœ¨Core Foundationä¸­å¯¹åº”çš„CFLocale ï¼ˆæŸ¥çœ‹CFLocale Referenceï¼‰ä¹‹é—´äº’ç›¸è½¬æ¢ã€‚ ä¸æ˜¯æ‰€æœ‰æ•°æ®ç±»å‹éƒ½æ˜¯Toll-Free Bridged,å³ä½¿å®ƒä»¬çš„åå­—å¯èƒ½è®©ä½ è®¤ä¸ºå®ƒä»¬æ˜¯ã€‚ä¾‹å¦‚ï¼ŒNSRunLoopæ˜¯æ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹CFRunLoop,NSBundleä¹Ÿæ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹CFBundleï¼ŒNSDateFormatteråŒæ ·æ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹CFDateFormatterã€‚ æ–‡ç« æœ«å°¾è¡¨1æä¾›äº†ä¸€ä»½æ”¯æŒæ— ç¼æ¡¥æ¥çš„æ•°æ®ç±»å‹çš„åˆ—è¡¨ã€‚ æ³¨æ„ï¼šå‡å¦‚ä½ ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å›è°ƒåœ¨ä¸€ä¸ªCore Foundationæ¡†æ¶çš„é›†åˆä¸­ï¼ŒåŒ…å«ä¸€ä¸ªNULLå›è°ƒï¼Œå½“ä½¿ç”¨Objective-Cçš„æ–¹å¼æ¥å…¥å®ƒï¼Œå®ƒçš„å†…å­˜ç®¡ç†æ–¹å¼æ˜¯æœªå®šä¹‰çš„ã€‚ ç±»å‹è½¬æ¢å’Œå¯¹è±¡è¯­ä¹‰å‘¨æœŸå£°æ˜é€šè¿‡æ— ç¼æ¡¥æ¥æŠ€æœ¯ï¼Œåœ¨ä¸€ä¸ªä½ ä»¥NSLocale *åšä¸ºä¸€ä¸ªå‚æ•°çš„æ–¹æ³•çš„ä¾‹å­ä¸­ï¼Œä½ èƒ½ä¼ é€’ä¸€ä¸ªCFLocaleRefç»“æ„ä½“ï¼Œå¹¶ä¸”å½“ä½ çœ‹åˆ°æœ‰ä¸€ä¸ªCFLocaleRef å‚æ•°çš„å‡½æ•°ä¸­ï¼Œä½ èƒ½å¤Ÿä¼ é€’ä¸€ä¸ªNSLocaleå®ä¾‹å¯¹è±¡ã€‚å½“ç„¶ä½ ä¹Ÿå¿…é¡»æä¾›ç»™ç¼–è¯‘å™¨ç›¸å…³çš„ä¸€äº›å…¶å®ƒä¿¡æ¯:ç¬¬ä¸€ï¼Œä½ å¿…é¡»è½¬æ¢ä¸€ç§ç±»å‹æˆå…¶å®ƒï¼›ç¬¬äºŒï¼Œä½ å¯èƒ½å¿…é¡»æŒ‡æ˜å¯¹è±¡çš„è¯­ä¹‰ç”Ÿå‘½å‘¨æœŸã€‚ ç¼–è¯‘å™¨ç†è§£Objective-Cçš„æ–¹æ³•å¹¶ä¸”è¿”å›Core Foundationæ•°æ®ç±»å‹ï¼Œä¸‹é¢æ˜¯Cocoaå‘½åè½¬æ¢çš„å†å²ï¼ˆæŸ¥çœ‹Advanced Memory Management Programming Guideï¼‰ã€‚ä¾‹å¦‚ï¼Œç¼–è¯‘å™¨çŸ¥é“ï¼Œåœ¨iOSä¸­ï¼Œé€šè¿‡UIColor çš„CGColoræ–¹æ³•è¿”å›çš„CGColorå¹¶ä¸åº”è¯¥è¢«æŒæœ‰ã€‚ä½ å¿…é¡»ä½¿ç”¨æ°å½“çš„ç±»å‹è½¬æ¢ï¼Œåƒä¸‹é¢ä¾‹å­æ¼”ç¤ºçš„é‚£æ ·ï¼š 12NSMutableArray *colors = [NSMutableArray arrayWithObject:(id)[[UIColor darkGrayColor] CGColor]];[colors addObject:(id)[[UIColor lightGrayColor] CGColor]]; ç¼–è¯‘å™¨å¹¶ä¸ä¼šè‡ªåŠ¨ç®¡ç†Core Foundationå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨å¯¹è±¡çš„è¯­ä¹‰æ‰€å±å…³ç³»é€šè¿‡ä½¿ç”¨ä¸€ç§è½¬æ¢ï¼ˆå®šä¹‰åœ¨objc&#x2F;runtime.hï¼‰æˆ–è€…Core Foundationé£æ ¼çš„å®ï¼ˆå®šä¹‰åœ¨ NSObject.hï¼‰ï¼š __bridgeå…³é”®å­—è¡¨ç¤ºè½¬æ¢æŒ‡é’ˆåœ¨Objective-Cå’ŒCore Foundationä¹‹é—´è€Œä¸ä¼šè½¬æ¢æ‰€å±å…³ç³»ã€‚ __bridge_retained å…³é”®å­—æˆ–è€…CFBridgingRetain è¡¨ç¤ºè½¬æ¢æŒ‡é’ˆåœ¨Objective-Cå’ŒCore Foundationä¹‹é—´å¹¶ä¸”æŠŠæ‰€å±æƒäº¤ç»™ä½ ã€‚ä½ è´Ÿè´£è°ƒç”¨CFReleaseæˆ–è€…ç›¸å…³çš„å‡½æ•°æ¥äº¤å‡ºå¯¹è±¡çš„æ‰€å±æƒã€‚ __bridge_transferå…³é”®å­—æˆ–è€…CFBridgingReleaseè¡¨ç¤ºè½¬æ¢ä¸€ä¸ªéObjective-Cçš„æŒ‡é’ˆåˆ°Objective-Cå¹¶ä¸”è½¬æ¢æ‰€å±æƒç»™ARCã€‚ARCè´Ÿè´£äº¤å‡ºå¯¹è±¡çš„æ‰€å±æƒã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š 1234567891011NSLocale *gbNSLocale = [[NSLocale alloc] initWithLocaleIdentifier:@&quot;en_GB&quot;];CFLocaleRef gbCFLocale = (__bridge CFLocaleRef)gbNSLocale;CFStringRef cfIdentifier = CFLocaleGetIdentifier(gbCFLocale);NSLog(@&quot;cfIdentifier: %@&quot;, (__bridge NSString *)cfIdentifier);// Logs: &quot;cfIdentifier: en_GB&quot; CFLocaleRef myCFLocale = CFLocaleCopyCurrent();NSLocale *myNSLocale = (NSLocale *)CFBridgingRelease(myCFLocale);NSString *nsIdentifier = [myNSLocale localeIdentifier];CFShow((CFStringRef)[@&quot;nsIdentifier: &quot; stringByAppendingString:nsIdentifier]);// Logs identifier for current locale ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†ä½¿ç”¨å£è¿°çš„Core Foundationå†…å­˜ç®¡ç†è§„åˆ™æ¥ç®¡ç†Core Foundationå†…å­˜ï¼š 123456789101112131415- (void)drawRect:(CGRect)rect &#123; CGContextRef ctx = UIGraphicsGetCurrentContext(); CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray(); CGFloat locations[2] = &#123;0.0, 1.0&#125;; NSMutableArray *colors = [NSMutableArray arrayWithObject:(id)[[UIColor darkGrayColor] CGColor]]; [colors addObject:(id)[[UIColor lightGrayColor] CGColor]]; CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)colors, locations); CGColorSpaceRelease(colorSpace); // Release owned Core Foundation object. CGPoint startPoint = CGPointMake(0.0, 0.0); CGPoint endPoint = CGPointMake(CGRectGetMaxX(self.bounds), CGRectGetMaxY(self.bounds)); CGContextDrawLinearGradient(ctx, gradient, startPoint, endPoint, kCGGradientDrawsBeforeStartLocation | kCGGradientDrawsAfterEndLocation); CGGradientRelease(gradient); // Release owned Core Foundation object.&#125; æ— ç¼æ¡¥æ¥ç±»å‹è¡¨1æä¾›äº†ä¸€ä¸ªåœ¨Core Foundationå’ŒFoundationä¸­å¯ä»¥äº¤æ›¿è½¬æ¢æ•°æ®ç±»å‹åˆ—è¡¨ã€‚å¯¹æ¯ä¸€å¯¹æ¡¥æ¥ç±»å‹ï¼Œè¡¨ä¹Ÿåˆ—ä¸¾å‡ºäº†è¿™äº›æ— ç¼æ¡¥æ¥ç±»å‹åœ¨OS Xä¸­çš„å¯ç”¨ç‰ˆæœ¬ã€‚ Core Foundation ç±»å‹ Foundation ç±»å‹ å¯ç”¨æ€§ CFArrayRef NSArray OS X v10.0 CFAttributedStringRef NSAttributedString OS X v10.4 CFCalendarRef NSCalendar OS X v10.0 CFCharacterSetRef NSCharacterSet OS X v10.4 CFDataRef NSData OS X v10.0 CFDateRef NSDate OS X v10.4 CFDictionaryRef NSDictionary OS X v10.0 CFErrorRef NSError OS X v10.4 CFLocaleRef NSLocale OS X v10.0 CFMutableArrayRef NSMutableArray OS X v10.4 CFMutableAttributedStringRef NSMutableAttributedString OS X v10.0 CFMutableCharacterSetRef NSMutableCharacterSet OS X v10.4 CFMutableDataRef NSMutableData OS X v10.0 CFMutableDictionaryRef NSMutableDict OS X v10.4 CFMutableSetRef NSMutableSet OS X v10.0 CFMutableStringRef NSMutableString OS X v10.4 CFNumberRef NSNumber OS X v10.0 CFReadStreamRef NSInputStream OS X v10.4 CFRunLoopTimerRef NSTimer OS X v10.0 CFSetRef NSSet OS X v10.4 CFStringRef NSString OS X v10.0 CFTimeZoneRef NSTimeZone OS X v10.4 CFURLRef NSURL OS X v10.0 CFWriteStreamRef NSOutputStream OS X v10.4 è¡¨1 å‚è€ƒèµ„æ–™ Toll-Free Bridged Types","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"blockå¤‡å¿˜å½•","slug":"2016-11-17-blockbei-wang-lu","date":"2016-11-17T15:10:08.000Z","updated":"2024-11-02T03:36:52.410Z","comments":true,"path":"2016/11/17/2016-11-17-blockbei-wang-lu/","permalink":"https://blog.wangruofeng007.com/2016/11/17/2016-11-17-blockbei-wang-lu/","excerpt":"","text":"å‰è¨€éšè‘—blockåœ¨iOS4.0å’ŒOS X 10.6çš„å¼•å…¥ï¼Œç»™äº‹ä»¶ä¼ é€’ä¸€ç§æ–°çš„æ–¹å¼å®ç°ï¼Œåœ¨å¼€å‘ä¸­ç”¨å¾—æœ€å¤šçš„åœºæ™¯è«è¿‡äºäº‹ä»¶å›è°ƒã€‚ä½¿ç”¨blockç›¸å¯¹ä¸delegateçš„ä¼˜åŠ¿åœ¨äºï¼Œä¸šåŠ¡é›†ä¸­ï¼Œå¯è¯»æ€§å¼ºï¼Œä»£ç å†…è”ï¼Œä¸åƒä»£ç†éœ€è¦å®ç°å¾ˆå¤šå‡½æ•°ï¼Œåœ¨é€‚å½“çš„åœºæ™¯é€‰æ‹©è¿™ç§æ–¹å¼å®ç°äº‹ä»¶ä¼ é€’æˆ–è€…ä¼ å‚æ•ˆæœéå¸¸å¥½ï¼Œç°åœ¨å¾ˆå¤šå¼€æºé¡¹ç›®éƒ½å®ç°äº†ä¸¤ç§æ–¹æ³•çš„äº‹ä»¶å›è°ƒã€‚ blockç”¨èµ·æ¥è™½ç„¶å¾ˆçˆ½ï¼Œä½†ä¹Ÿæœ‰å®ƒçš„ä¸è¶³ï¼Œå­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œè½»è€…å†…å­˜æ³„éœ²ï¼Œç”šè‡³å¯¼è‡´Appå´©æºƒï¼Œä¸æ˜“è°ƒè¯•è¿½æº¯ï¼Œå› æ­¤ä½¿ç”¨å®ƒä½¿ä¸€å®šè¦å°å¿ƒã€‚é‰´äºå®è·µä¸­çš„è¸©è¿‡å„ç§å‘ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œæ–¹ä¾¿è‡ªå·±å’Œä»–äººä»¥åæŸ¥é˜…ï¼Œè¿™å°±æ˜¯blockå¤‡å¿˜å½•å†™ä½œçš„åˆè¡·ã€‚ blockçš„æœ¬è´¨blockå®é™…ä¸Šæ˜¯æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç¼–è¯‘æ—¶ï¼Œblockçš„å†…éƒ¨ä»£ç ç”Ÿäº§å¯¹åº”çš„å‡½æ•°ã€‚ å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š ä¸Cè¯­è¨€çš„å‡½æ•°æŒ‡é’ˆçš„åŒºåˆ« blockçš„ä»£ç æ˜¯å†…è”çš„ï¼Œæ•ˆç‡é«˜äºå‡½æ•°è°ƒç”¨ blockå¯¹äºå¤–éƒ¨å˜é‡é»˜è®¤æ˜¯åªè¯»å±æ€§ blockè¢«Objective-Cçœ‹æˆæ˜¯å¯¹è±¡å¤„ç† blockå£°æ˜ ä½œä¸ºproperty @property (nonatomic, copy) returnType (^blockName)(parameterTypes); ä½œä¸ºæ–¹æ³•å‚æ•° - (void)someMethodThatTakesABlock:(returnType (^)(parameterTypes))blockName; ä½œä¸ºä¸€ä¸ªæ–¹æ³•è°ƒç”¨å‚æ•° [someObject someMethodThatTakesABlock:^returnType (parameters) {â€¦}]; ä½œä¸ºä¸€ä¸ªtypedef typedef returnType (^TypeName)(parameterTypes); TypeName blockName &#x3D; ^returnType(parameters) {â€¦}; ä½œä¸ºå‡½æ•°å‚æ•° int (^sumOfNumbers)(int a, int b) &#x3D; ^(int a, int b) { return a + b; }; SDWebImageä¸­ä½¿ç”¨çš„blockç¤ºä¾‹ï¼š12345typedef void(^SDWebImageCompletionBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL);typedef void(^SDWebImageCompletionWithFinishedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL);typedef NSString *(^SDWebImageCacheKeyFilterBlock)(NSURL *url); blockè°ƒç”¨è·ŸCå‡½æ•°ç±»ä¼¼ä½¿ç”¨ï¼ˆï¼‰ï¼Œæ‹¬å·é‡Œé¢è¿˜å¯ä»¥å¸¦ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•° 12345678910// blockå£°æ˜ï¼ˆvoidï¼‰(^loggerBlock)(void); // blockå®šä¹‰loggerBlock = ^&#123; NSLog(&quot;hello world&quot;)&#125;;// blockè°ƒç”¨loggerBlock(); blockå†…å­˜ç®¡ç†é»˜è®¤æƒ…å†µä¸‹ï¼Œblockæ˜¯åœ¨æ ˆå†…å­˜ä¸­ï¼Œå®ƒä¸ä¼šå¯¹æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œä»»ä½•æ“ä½œï¼›å¦‚æœå¯¹blockè¿›è¡Œä¸€æ¬¡copyæ“ä½œï¼Œblockå°±ä¼šåœ¨å †å†…å­˜ä¸­ï¼Œå¹¶ä¸”å®ƒä¼šå®ƒæ‰€æœ‰çš„å¼•ç”¨çš„å¯¹è±¡åšä¸€æ¬¡retainæ“ä½œ å¯¹äºblockå¤–çš„å˜é‡å¼•ç”¨ï¼Œblock é»˜è®¤æ˜¯å°†å…¶å¤åˆ¶åˆ°å…¶æ•°æ®ç»“æ„ä¸­æ¥å®ç°è®¿é—®çš„ å¯¹äºç”¨ __block ä¿®é¥°çš„å¤–éƒ¨å˜é‡å¼•ç”¨ï¼Œblock æ˜¯å¤åˆ¶å…¶å¼•ç”¨åœ°å€æ¥å®ç°è®¿é—®çš„ è€Œblockä¼šæ•è·ä»£ç å¤–çš„å±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”ä»…é™äºåªè¯»æ“ä½œ åœ¨blockä¸­å¸Œæœ›ä¿®æ”¹çš„å¤–ç•Œå±€éƒ¨å¯¹è±¡ï¼Œå¿…é¡»åŠ ä¸Š__blockå…³é”®è¯ ARC å¦‚æœå¯¹è±¡ä½¿ç”¨`__unsafe_unretained`æˆ–`__weak`ä¿®é¥°ï¼Œå°±ä¸ä¼šå¯¹å…¶åš`retain`æ“ä½œ MRC å¦‚æœå¯¹è±¡ä½¿ç”¨äº†`__block`ä¿®é¥°, å°±ä¸ä¼šå¯¹å…¶åš`retain`æ“ä½œ ä¸ºäº†é˜²æ­¢blockä¸­çš„å¾ªç¯å¼•ç”¨ï¼Œå¯ä»¥ç”¨__weakå…³é”®è¯æŠŠç›¸åº”çš„å¯¹è±¡å£°æ˜ä¸ºå¼±å¼•ç”¨,åœ¨blockå¿«å†…éƒ¨éœ€è¦å¤šæ¬¡è®¿é—®ï¼Œé˜²æ­¢è¯¥å¯¹è±¡è¢«é‡Šæ”¾ï¼Œå¯ä»¥ç”¨__strongå…³é”®è¯å°†å£°æ˜ä¸ºå¼ºå¼•ç”¨ï¼š 123456789__weak __typeof__(self) weakSelf = self;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; __strong __typeof(self) strongSelf = weakSelf; [strongSelf doSomething]; [strongSelf doOtherThing];&#125;); å‚è€ƒé“¾æ¥ è°ˆObjective-C blockçš„å®ç° A look inside blocks: Episode 1 A look inside blocks: Episode 2 A look inside blocks: Episode 3 å¯¹ Objective-C ä¸­ Block çš„è¿½æ¢ LLVM ä¸­ block å®ç°æºç  objective-c-blocks-quiz Blocks iOSå¼€å‘-ç”±æµ…è‡³æ·±å­¦ä¹ block","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"Appå¸¸è§å´©æºƒé—®é¢˜åˆ†æ","slug":"2016-10-23-appchang-jian-beng-kui-wen-ti-fen-xi","date":"2016-10-23T15:18:01.000Z","updated":"2024-11-02T03:36:52.409Z","comments":true,"path":"2016/10/23/2016-10-23-appchang-jian-beng-kui-wen-ti-fen-xi/","permalink":"https://blog.wangruofeng007.com/2016/10/23/2016-10-23-appchang-jian-beng-kui-wen-ti-fen-xi/","excerpt":"","text":"å‰è¨€æ­¤æ–‡æ˜¯åŸºäºè¿™äº›å¹´å·¥ä½œä¸­é¡¹ç›®é‡Œé¢å¸¸è§å´©æºƒçš„ä¸€äº›æ€»ç»“ï¼Œæ•´ç†å‡ºæ¥æ–¹ä¾¿æŸ¥é˜…ï¼Œå¸Œæœ›å¯¹å¤§å®¶éƒ½æœ‰æ‰€å¸®åŠ©ã€‚ Appå¸¸è§å´©æºƒ æ•°ç»„ä¸‹æ ‡è¶Šç•Œ å­—å…¸æ„é€ ä¸ä¿®æ”¹ NSAttributedStringç›¸å…³ å‘ˆç°ä¸€ä¸ªç©ºæ§åˆ¶å™¨ unrecognized selector æ“ä½œtableViewæ•°æ® Pushåˆ°åŒä¸€ä¸ªæ§åˆ¶å™¨å¤šæ¬¡ 1.æ•°ç»„ä¸‹æ ‡è¶Šç•Œç¤ºä¾‹ä»£ç ï¼š 12345- (void)testArrayOutOfBounds&#123; NSArray *testArray = @[@1,@2,@3]; NSNumber *num = testArray[3];&#125; å¼‚å¸¸ç°è±¡ï¼š Terminating app due to uncaught exception â€˜NSRangeExceptionâ€™, reason: â€˜** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]â€™* é¢„é˜²æ–¹æ¡ˆï¼š åœ¨æ•°ç»„ä¸­å–å€¼æ—¶éœ€è¦å…ˆè¿›ç»„ä¸‹æ ‡ç´¢å¼•è¾¹ç•Œæ£€æŸ¥ï¼Œå¦‚æœæ²¡æœ‰è¶Šç•Œæ–¹å¯å–å€¼ã€‚ 2.å­—å…¸æ„é€ é€ ä¸ä¿®æ”¹ç¤ºä¾‹ä»£ç ï¼š 12345678- (void)testDicSetNilValueCrash&#123; // æ„é€ ä¸å¯å˜å­—å…¸æ—¶ keyå’Œvalueéƒ½ä¸èƒ½ä¸ºç©º NSString *nilValue = nil; NSString *nilKey = nil; NSDictionary *dic1 = @&#123;@&quot;key&quot; : nilValue&#125;; NSDictionary *dic2 = @&#123;nilKey : @&quot;value&quot;&#125;;&#125; å¼‚å¸¸ç°è±¡ï¼š Terminating app due to uncaught exception â€˜NSInvalidArgumentExceptionâ€™, reason: â€˜** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]â€™* é¢„é˜²æ–¹æ¡ˆï¼š åœ¨æˆ‘ä»¬ä½¿ç”¨å­—é¢é‡å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå­—å…¸çš„æ—¶å€™éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸ºå¾ˆå¯èƒ½å­—å…¸çš„é”®å’Œå€¼ä¸èƒ½ä¿è¯åŒæ—¶ä¸ä¸ºç©ºã€‚æœ‰æ½œåœ¨å´©æºƒçš„é£é™©ï¼Œè¿™ç§å´©æºƒéå¸¸å®¹æ˜“å‡ºç°ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œä½†æ˜¯å½“ä½ ç•™å¿ƒçš„è¯ä¹Ÿéå¸¸å¥½é¿å…ï¼Œå°±æ˜¯è®¾ç½®å­—å…¸çš„é”®æˆ–è€…å€¼çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦éç©ºï¼Œå¯å˜å­—å…¸è®¾ç½®æŸä¸ªé”®çš„å€¼æ˜¯å¯ä»¥ä¸ºç©ºï¼Œç›¸å½“äºåˆ é™¤å­—å…¸ä¸­çš„æŸä¸ªé”®å€¼ã€‚ä¸ºäº†ä½¿Appä¿æŒå¥å£®æ¨èä½¿ç”¨KVOæˆ–è€…å­—é¢é‡çš„æ–¹å¼æ¥è®¾ç½®å­—å…¸çš„å€¼ 1234567891011121314- (void)testMutableDicSetNilValueCrash&#123; NSString *value = nil; NSMutableDictionary *mDic = [NSMutableDictionary dictionary]; // via Dic set, leading crash [mDic setObject:value forKey:@&quot;key&quot;]; // via KVO set, it&#x27;s safe [mDic setValue:value forKey:@&quot;key&quot;]; // or via literal set, it&#x27;s safe mDic[@&quot;key&quot;] = value;&#125; 3.NSAttributedStringç›¸å…³ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314- (void)testAttributedStringInitCrash&#123; NSString *nilStr = nil; NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:nilStr];&#125;- (void)testAttributedStringAddAttributeCrash&#123; NSString *nonnullStr = @&quot;str&quot;; NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:nonnullStr]; NSString *nilValue = nil; [attributedStr addAttribute:NSAttachmentAttributeName value:nilValue range:NSMakeRange(0, 1)];&#125; å¼‚å¸¸ç°è±¡ï¼š Terminating app due to uncaught exception â€˜NSInvalidArgumentExceptionâ€™, reason: â€˜NSConcreteMutableAttributedString initWithString:: nil valueâ€™ é¢„é˜²æ–¹æ¡ˆï¼š åœ¨æ„é€ NSMutableAttributedStringæˆ–è€…NSAttributedStringéœ€è¦ç•™æ„ï¼Œè®¾ç½®çš„å±æ€§çš„å€¼æ˜¯å¦æœ‰å¯èƒ½å­˜åœ¨nilçš„æƒ…å†µã€‚è¿™ä¸ªå¾ˆå®¹æ˜“è¢«äººå¿½è§†ï¼Œå€¼å¾—æ³¨æ„ã€‚ 4.å‘ˆç°ä¸€ä¸ªç©ºæ§åˆ¶å™¨ç¤ºä¾‹ä»£ç ï¼š 1234567- (void)testPresentNilControllerCrash&#123; UIViewController *someVC = [UIViewController new]; UIViewController *presentVC = nil; [someVC presentViewController:presentVC animated:YES completion:nil];&#125; å¼‚å¸¸ç°è±¡ï¼š presentä¸€ä¸ªç©ºçš„æ§åˆ¶å™¨å¯¼è‡´App crash é¢„é˜²æ–¹æ¡ˆï¼š presentä¸€ä¸ªæ–°æ§åˆ¶å™¨æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨æ‰æ‰§è¡Œï¼Œå¦åˆ™ç›´æ¥è¿”å› 123456789- (void)testPresentNilControllerCrashFixed&#123; UIViewController *someVC = [UIViewController new]; UIViewController *presentVC = [UIViewController new]; if (presentVC) &#123; [someVC presentViewController:presentVC animated:YES completion:nil]; &#125;&#125; 5.unrecognized selectorç¤ºä¾‹ä»£ç ï¼š 1234- (void)testUnrecogernizedSelectorCash&#123; [self performSelector:@selector(testSel) withObject:nil afterDelay:0];&#125; å¼‚å¸¸ç°è±¡ï¼š Terminating app due to uncaught exception â€˜NSInvalidArgumentExceptionâ€™, reason: â€˜-[ViewController testSel]: unrecognized selector sent to instance 0x7ffd41609d10â€™ é¢„é˜²æ–¹æ¡ˆï¼š æ­¤ç±»å´©æºƒç»å¸¸å‡ºç°ï¼Œç‰¹åˆ«æ˜¯å½“æœåŠ¡å™¨æ•°æ®æ”¾å›å¼‚å¸¸æ—¶ï¼Œæ¯”å¦‚æœ¬æ¥åº”è¯¥è¿”å›ä¸€ä¸ªNSStringç±»å‹å­—ç¬¦ä¸²ï¼Œç»“æœè¿”å›NULL,å½“ä½ è°ƒç”¨å­—ç¬¦ä¸²çš„lengthæ–¹å¼æ—¶ï¼Œå¯¼è‡´Appå´©æºƒã€‚é¢„é˜²æ–¹æ³•ï¼Œé‡è¦çš„åœ°æ–¹å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­å†è°ƒç”¨è¯¥ç±»çš„ç›¸å…³æ–¹æ³•ï¼Œæˆ–è€…å†™ä¸€ä¸ªåˆ†ç±»ç»Ÿä¸€å¤„ç†æ­¤ç±»é€»è¾‘ã€‚ 6.æ“ä½œtableViewæ•°æ®ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516- (void)testTableViewUpdateCrash&#123; NSIndexPath *insertIndexPath = [NSIndexPath indexPathForRow:0 inSection:0]; NSIndexPath *deleteIndexPath = [NSIndexPath indexPathForRow:1 inSection:0]; NSIndexPath *reloadIndexPath = [NSIndexPath indexPathForRow:2 inSection:0]; NSIndexPath *moved1IndexPath = [NSIndexPath indexPathForRow:3 inSection:0]; NSIndexPath *moved2IndexPath = [NSIndexPath indexPathForRow:4 inSection:0]; [self.tableView beginUpdates]; [self.tableView insertRowsAtIndexPaths:@[insertIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; [self.tableView deleteRowsAtIndexPaths:@[deleteIndexPath]withRowAnimation:UITableViewRowAnimationAutomatic]; [self.tableView reloadRowsAtIndexPaths:@[reloadIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; [self.tableView moveRowAtIndexPath:moved1IndexPath toIndexPath:moved2IndexPath]; [self.tableView endUpdates];&#125; å¼‚å¸¸ç°è±¡ï¼š Fatal Exception: NSInternalInconsistencyException Invalid update: invalid number of sections. The number of sections contained in the table view after the update (1) must be equal to the number of sections contained in the table view before the update (1), plus or minus the number of sections inserted or deleted (1 inserted, 0 deleted). é¢„é˜²æ–¹æ¡ˆï¼š å½“éœ€è¦åŠ¨æ€æ›´æ–°tableViewçš„æ•°æ®æ—¶ï¼Œè®¡ç®—å¥½æ¨¡å‹çš„æ•°æ®ä½¿æ¨¡å‹çš„æ•°æ®å’Œæ›´æ–°tableViewçš„åçš„æ•°æ®ä¿æŒåŒæ­¥ã€‚ 7.Pushåˆ°åŒä¸€ä¸ªæ§åˆ¶å™¨å¤šæ¬¡å¼‚å¸¸ç°è±¡ï¼š Fatal Exception: NSInvalidArgumentException Pushing the same view controller instance more than once is not supported (&lt;PPSelectPayMethodViewControllerIOS7: 0x10d7e7f10&gt;) å‚è€ƒé“¾æ¥ï¼š é˜²æ­¢ç‚¹å‡» Cell æ—¶ ViewController è¢«é‡å¤ Push ä»¥ä¸Šå°±æ˜¯å·¥ä½œä¸­å¸¸è§çš„å¼‚å¸¸å´©æºƒä»¥åŠå¤„ç†æ–¹æ¡ˆï¼Œä¸‹é¢çš„å¼‚å¸¸åˆ†ç±»å†…å®¹æ¥è‡ªAppleçš„å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŸ¥é˜…ã€‚â˜•ï¸ Appleå®˜æ–¹å¸¸è§å¼‚å¸¸ç±»å‹(Exception types) è®¿é—®ä¸€å—åå†…å­˜[EXC_BAD_ACCESS] // SIGSEGV // SIGBUS] å¼‚å¸¸é€€å‡º[EXC_CRASH // SIGABRT] è¿½è¸ªå—é™[EXC_BREAKPOINT // SIGTRAP] éæ³•æŒ‡ä»¤[EXC_BAD_INSTRUCTION // SIGILL] è¢«ä¿æŠ¤çš„èµ„æºé­åˆ°ä¾µå®³[EXC_GUARD] èµ„æºé™åˆ¶[EXC_RESOURCE] å…¶ä»–å¼‚å¸¸ç±»å‹ 1.è®¿é—®ä¸€å—åå†…å­˜(Bad Memory Access)å½“ç¨‹åºè¯•å›¾æ¥å…¥æ— æ•ˆå†…å®¹æˆ–è€…å°è¯•ä»¥ä¸è¢«å…è®¸çš„æ–¹å¼æ¥å…¥ç”±äºå†…å­˜çš„ä¿æŠ¤ç­‰çº§(ä¾‹å¦‚ï¼Œå°è¯•å†™å…¥åªè¯»çš„å†…å­˜)ã€‚Exception Subtypeå­—æ®µåŒ…å«ä¸€ä¸ªkern_return_tç»“æ„ä½“ç”¨æ¥æè¿°é”™è¯¯å’Œä¸æ­£ç¡®æ¥å…¥çš„å†…å­˜åœ°å€ã€‚ ä¸‹é¢æ˜¯ä¸€äº›è°ƒè¯•åå†…å­˜æ¥å…¥å¯¼è‡´å´©æºƒçš„å»ºè®®ï¼š å‡å¦‚objc_msgSendæˆ–è€…objc_releaseåœ¨å´©æºƒçº¿ç¨‹å›æº¯(Backtraces)çš„é¡¶éƒ¨é™„è¿‘,è¿™ä¸ªçº¿ç¨‹å¯èƒ½å°è¯•ç»™ä¸€ä¸ªé‡Šæ”¾çš„å¯¹è±¡å‘æ¶ˆæ¯ã€‚ä½ åº”è¯¥profileåº”ç”¨ä½¿ç”¨Zombies instrumentæ¥æ›´å¥½çš„ç†è§£è¿™ä¸ªå´©æºƒå‘ç”Ÿçš„æ¡ä»¶ã€‚ å‡å¦‚gpus_ReturnNotPermittedKillClientåœ¨å´©æºƒçº¿ç¨‹å›æº¯(Backtraces)çš„é¡¶éƒ¨é™„è¿‘ï¼Œçº¿ç¨‹è¢«ç»ˆç»“å› ä¸ºå®ƒå°è¯•ç”¨OpenGL ESæˆ–è€…Metalæ‰§è¡Œæ¸²æŸ“å½“ç¨‹åºå¤„äºåå°æ—¶ã€‚æŸ¥çœ‹QA1766: How to fix OpenGL ES application crashes when moving to the background æ‰“å¼€Address Sanitizerè¿è¡Œä½ çš„åº”ç”¨ã€‚Address Sanitizeræ·»åŠ äº†é¢å¤–çš„è¯´æ˜åœ¨å†…å®¹æ¥å…¥å½“ä½ ç¼–è¯‘ä»£ç çš„æ—¶å€™ã€‚éšç€ä½ åº”ç”¨çš„è¿è¡Œï¼ŒXcodeå°†âš ï¸ä½ å‡å¦‚å†…å­˜ä»¥ä¸€ç§å¯èƒ½å¯¼è‡´å´©æºƒçš„æ–¹å¼æ¥å…¥ã€‚ 2.å¼‚å¸¸é€€å‡ºï¼ˆAbnormal Exitï¼‰ç¨‹åºå¼‚å¸¸é€€å‡ºï¼Œæ˜¯æœ€å¸¸è§å¯¼è‡´è¿™ç±»å¼‚å¸¸å´©æºƒçš„åŸå› æ˜¯æ•è·åˆ°Objective-C/C++å¼‚å¸¸å’Œè°ƒç”¨äº†abort()å‡½æ•°ã€‚ App Extensionså°†è¢«ç»ˆç»“å‘ç”Ÿè¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œå‡å¦‚ä»–ä»¬åˆå§‹åŒ–èŠ±è´¹å¤ªå¤šçš„æ—¶é—´(watchdogç»ˆç»“)ã€‚å‡å¦‚ä¸€ä¸ªextensionç”±äºè½½å…¥æ—¶é—´å¤ªé•¿è¢«ç»ˆç»“ï¼Œäº§ç”Ÿå´©æºƒæŠ¥å‘Šçš„Exception Subtypeå°†æ˜¯LAUNCH_HANGã€‚å› ä¸ºextensionså¹¶æ²¡æœ‰ä¸€ä¸ªmainå‡½æ•°ï¼Œä»»ä½•èŠ±é”€åœ¨åˆå§‹åŒ–çš„æ—¶é—´éƒ½å‘ç”Ÿåœ¨static constructorså’Œå‘ˆç°åœ¨ä½ çš„extensionså’Œä¾èµ–åº“çš„+loadæ–¹æ³•ã€‚ä½ åº”è¯¥å°½å¯èƒ½çš„å»¶è¿Ÿåšè¿™äº›å·¥ä½œã€‚ 3.è¿½è¸ªå—é™ï¼ˆTrace Trapï¼‰å’Œå¼‚å¸¸é€€å‡ºç±»ä¼¼ï¼Œè¿™ç§å¼‚å¸¸çš„ç›®çš„æ˜¯ç»™ä¸€ä¸ªè¿½åŠ çš„è°ƒè¯•å™¨ï¼Œè®©å®ƒæœ‰æœºä¼šæ¥æ‰“æ–­åœ¨ä¸€ä¸ªå½“å®ƒæ‰§è¡Œæ—¶å€™æŒ‡å®šçš„ç‚¹çš„è¿›ç¨‹ã€‚ä½ å¯ä»¥ä½¿ç”¨__builtin_trap()å‡½æ•°åœ¨ä½ çš„ä»£ç ä¸­æ¥è§¦å‘è¿™ä¸ªå¼‚å¸¸ã€‚å‡å¦‚æ²¡æœ‰è°ƒè¯•å™¨è¿½åŠ çš„è¯ï¼Œçº¿ç¨‹å°†è¢«ç»ˆç»“å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ ä½ç­‰çº§çš„åº“ï¼ˆä¾‹å¦‚libdispatchï¼‰å°†å—é™è¿™ä¸ªè¿›ç¨‹ä¸€æ—¦é‡åˆ°ä¸€ä¸ªé‡å¤§çš„é”™è¯¯ã€‚å…³äºé”™è¯¯çš„é¢å¤–ä¿¡æ¯å¯ä»¥åœ¨Additional Diagnostic Informationç« èŠ‚ä¸­çš„å´©æºƒæŠ¥å‘Šæ‰¾åˆ°ï¼Œæˆ–è€…åœ¨è®¾å¤‡çš„æ§åˆ¶å°ã€‚ å‡å¦‚åœ¨runtimeé‡åˆ°è¯¸å¦‚ä¸‹é¢çš„ä¸€ä¸ªæ„å¤–çš„æ¡ä»¶ï¼ŒSwiftä»£ç å°†ç»ˆç»“å‡ºç°è¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼š éå¯é€‰ç±»å‹å¸¦æœ‰ä¸€ä¸ªnilå€¼ é”™è¯¯çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ æŸ¥çœ‹Backtracesæ¥å†³å‘ç”Ÿå®šå¼‚å¸¸æ¡ä»¶çš„ä½ç½®ã€‚é¢å¤–çš„ä¿¡æ¯å¯èƒ½å·²ç»åœ¨è®¾å¤‡çš„æ§åˆ¶å°æ‰“å°å‡ºæ¥äº†ã€‚ä½ åº”è¯¥ä¿®æ”¹å´©æºƒå¤„çš„ä»£ç æ¥ä¼˜é›…çš„å¤„ç†runtimeé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Optional Bindingè€Œä¸æ˜¯å¼ºåˆ¶è§£åŒ…ä¸€ä¸ªå¯é€‰å˜é‡ã€‚ 4.éæ³•æŒ‡ä»¤ï¼ˆIllegal Instructionï¼‰è¿›ç¨‹å°è¯•æ‰§è¡Œä¸€ä¸ªéæ³•æˆ–è€…æœªå®šä¹‰çš„æŒ‡ä»¤ã€‚è¿›ç¨‹å¯èƒ½å·²ç»å°è¯•è·³è¿›åˆ°ä¸€ä¸ªæ— æ•ˆçš„åœ°å€é€šè¿‡ä¸€ä¸ªé…ç½®é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆã€‚åœ¨Intelå¤„ç†å™¨ä¸­ï¼Œud2æ“ä½œç å¯¼è‡´ä¸€ä¸ªEXC_BAD_INSTRUCTIONå¼‚å¸¸ï¼Œä½†æ˜¯å®ƒé€šå¸¸è¢«ç”¨æ¥å›°ä½è¿›ç¨‹è¾¾åˆ°è°ƒè¯•çš„ç›®çš„ã€‚Swiftä»£ç åœ¨Intelå¤„ç†å™¨ä¸­å°†ä»¥è¿™ç§å¼‚å¸¸ç»ˆç»“ï¼Œå‡å¦‚åœ¨runtimeä½ç½®æ¡ä»¶å‘ç”Ÿã€‚æ›´å¤šè¯¦æƒ…æŸ¥çœ‹Trace Trapã€‚ 5.è¢«ä¿æŠ¤çš„èµ„æºé­åˆ°ä¾µå®³ï¼ˆGuarded Resource Violationï¼‰è¿›ç¨‹ä¾µçŠ¯ä¸€ä¸ªè¢«ä¿æŠ¤çš„èµ„æºã€‚ç³»ç»Ÿåº“å¯èƒ½æŸä¸ªæ–‡ä»¶çš„æè¿°å™¨æˆguardedï¼Œåœ¨é‚£ä»¥åï¼Œæ‰€æœ‰ä¸æ­£å¸¸çš„æ“ä½œåœ¨è¿™äº›æè¿°å™¨ä¸Šéƒ½å°†è§¦å‘ä¸€ä¸ªEXC_GUARDå¼‚å¸¸ï¼ˆå½“å®ƒæƒ³æ“ä½œåœ¨è¿™äº›æ–‡ä»¶æè¿°å™¨ä¸Šï¼Œç³»ç»Ÿå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„guardedæ ‡è®°çš„ç§æœ‰APIsï¼‰ã€‚è¿™å¯ä»¥å¸®ä½ å‘ä¸‹å¿«é€Ÿè¿½è¸ªé—®é¢˜ï¼Œä¾‹å¦‚å…³é—­ä¸€ä¸ªå·²ç»è¢«ç³»åº“æ‰“å¼€çš„æ–‡ä»¶æè¿°å™¨ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä¸€ä¸ªappå…³é—­æ–‡ä»¶ç§’æ€å™¨é€šè¿‡ä½¿ç”¨æˆªå›¾SQLiteæ–‡ä»¶åˆ°ä¸€ä¸ªCore Dataå­˜å‚¨ï¼ŒCore Dataå°†ä¼šåœ¨éšåè¯¡å¼‚çš„å´©æºƒã€‚guard exceptionå°†è®©è¿™äº›é—®é¢˜å°½æ—©å¼•èµ·ä½ çš„æ³¨æ„ï¼Œè¿™æ ·ä¹Ÿè®©ä»–ä»¬å˜å¾—æ›´å®¹æ˜“è°ƒè¯•ã€‚ å´©æºƒæŠ¥å‘Šæ¥è‡ªæ–°ç‰ˆçš„iOSåŒ…å«äº†äººç±»å¯è¯»çš„è¯¦ç»†ä¿¡æ¯å…³äºå¼•èµ·EXC_GUARDå¼‚å¸¸çš„æ“ä½œåœ¨Exception Subtypeå’ŒException Messageå­—æ®µä¸­ã€‚åœ¨æ¥è‡ªmacOSæˆ–è€…è€ç‰ˆæœ¬çš„iOSçš„å´©æºƒæŠ¥å‘Šä¸­ï¼Œè¿™äº›ä¿¡æ¯è¢«ç¼–ç åˆ°ç¬¬ä¸€ä¸ª Exception Codeå°±åƒä¸€ä¸ªåˆ†è§£æˆå¦‚ä¸‹çš„ä½æ®µï¼š [63:61] - Guard Typeï¼šè¢«ä¿æŠ¤çš„èµ„æºç±»å‹ã€‚0x2ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶æè¿°å™¨èµ„æºã€‚ [60:32] - Flavorï¼šä¾µå®³è¢«å¤„ç½šæ—¶çš„æ¡ä»¶ å‡å¦‚ç¬¬ä¸€ä¸ª(1 &lt;&lt; 0)ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•æ‰§è¡Œclose()å‡½æ•°åœ¨ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚ å‡å¦‚ç¬¬äºŒä¸ª(1 &lt;&lt; 1)ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•æ‰§è¡Œdup()ï¼Œdup2()ï¼Œæˆ–è€…fcntl()å¸¦F_DUPFDæˆ–è€…F_DUPFD_CLOEXECå‘½ä»¤åœ¨ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚ å‡å¦‚ç¬¬ä¸‰ä¸ª(1 &lt;&lt; 2)ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•é€šè¿‡ä¸€ä¸ªsocketå‘é€ç»™ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚ å‡å¦‚ç¬¬ä¸‰ä¸ª(1 &lt;&lt; 3)ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•å†™å…¥åˆ°ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚ [31:0] - File Descriptorï¼šè¿›ç¨‹å°è¯•ä¿®æ”¹çš„å—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚ 6.èµ„æºé™åˆ¶ï¼ˆResource Limitï¼‰è¿›ç¨‹è¶…å‡ºäº†ä¸€ä¸ªèµ„æºæ¶ˆè€—çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªæ¥è‡ªæ“ä½œç³»ç»Ÿé€šçŸ¥ï¼Œå‘Šè¯‰è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„èµ„æºè¿‡å¤šã€‚ç²¾ç¡®çš„èµ„æºåˆ—åœ¨Exception Subtypeå­—æ®µä¸­ã€‚å‡å¦‚Exception Noteå­—æ®µåŒ…å«NON-FATAL CONDITIONï¼Œè¿›ç¨‹ä¸ä¼šè¢«ç»ˆç»“å³ä½¿äº§ç”Ÿäº†ä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ å¼‚å¸¸å­ç±»å‹MEMORYè¡¨æ˜è¿›ç¨‹å·²ç»è¶Šè¿‡ç³»ç»Ÿåº”ç”¨çš„å†…å­˜é™åˆ¶ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªç»ˆç»“çš„å…ˆå…†ç”±äºè¶…é¢çš„ä½¿ç”¨å†…å­˜ã€‚ å¼‚å¸¸å­ç±»å‹WAKEUPSè¡¨æ˜åœ¨è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ¯ç§’è¢«å”¤é†’å¤ªå¤šæ¬¡ï¼Œè¿™å¼ºåˆ¶CPUéå¸¸é¢‘ç¹çš„å”¤é†’æ¶ˆè€—ç”µæ± å¯¿å‘½ã€‚ å…¸å‹çš„ï¼Œè¿™ä¸ªé€šè¿‡ç”±çº¿ç¨‹ä¸çº¿ç¨‹çš„é€šä¿¡äº§ç”Ÿï¼ˆé€šå¸¸æ˜¯ä½¿ç”¨peformSelector:onThread:æˆ–dispatch_asyncï¼‰,é‚£æ ·æ— æ„çš„å‘ç”Ÿäº†è¿œè¿œè¶…å‡ºå®ƒæ­£å¸¸åº”è¯¥çš„åˆ‡æ¢é¢‘ç‡ã€‚å› ä¸ºé€šä¿¡çš„åè°ƒå‘ç”Ÿå¾—éå¸¸é¢‘ç¹è€Œå‡ºå‘æ­¤ç±»çš„å¼‚å¸¸ï¼Œè¿™ä¸ªé€šå¸¸å’Œå¤šä¸ªåå°çº¿ç¨‹æœ‰ç€ç›¸ä¼¼Backtraces â€“ è¡¨æ˜é‚£äº›åœ°æ–¹å‘ç”Ÿè¿‡é€šä¿¡ã€‚ 7.å…¶ä»–å¼‚å¸¸ç±»å‹ï¼ˆOther Exception Typesï¼‰ä¸€äº›å´©æºƒæŠ¥å‘Šå¯èƒ½å«æœ‰ä¸€ä¸ªæœªå‘½åçš„Exception Typeï¼Œå°†ä»¥ä¸€ä¸ª16è¿›åˆ¶çš„å€¼ï¼ˆä¾‹å¦‚ï¼Œ00000020ï¼‰çš„å½¢å¼æ‰“å°ã€‚å‡å¦‚ä½ çš„è®¾å¤‡æ”¶åˆ°äº†ä¸€ä¸ªè¿™æ ·çš„å´©æºƒæŠ¥å‘Šï¼Œç›´æ¥æŸ¥çœ‹Exception Codeså­—æ®µå¯»æ‰¾æ›´å¤šçš„ä¿¡æ¯ã€‚ å¼‚å¸¸ä»£ç 0xbaaaaaadè¡¨æ˜è®°å½•æ˜¯æ•´ä¸ªç³»ç»Ÿçš„stackshotï¼Œä¸æ˜¯ä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ä¸ºäº†è·å¾—ä¸€ä¸ªstackshotï¼ŒæŒ‰Homeé”®å’Œä»»æ„éŸ³é‡é”®ã€‚è¿™äº›è®°å½•ç»å¸¸è¢«ç”¨æˆ·å¶ç„¶åˆ›å»ºï¼Œå¹¶ä¸è¡¨æ˜æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ å¼‚å¸¸ä»£ç 0xbad22222è¡¨æ˜ä¸€ä¸ªVoIPåº”ç”¨å·²ç»è¢«iOSç»ˆç»“ï¼Œå› ä¸ºå®ƒå¯åŠ¨å¾—å¤ªé¢‘ç¹ã€‚ å¼‚å¸¸ä»£ç 0x8badf00dè¡¨æ˜åº”ç”¨å·²ç»è¢«iOSç»ˆç»“å› ä¸ºå‘ç”Ÿwatchdogè¶…æ—¶ã€‚åº”ç”¨èŠ±è´¹å¤ªé•¿æ—¶é—´å¯åŠ¨ï¼Œç»ˆç»“ï¼Œæˆ–è€…å“åº”ç³»ç»Ÿäº‹ä»¶ã€‚é€šå¸¸å¯¼è‡´è¿™æ­Œé—®é¢˜æ˜¯åšäº†åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œäº†åŒæ­¥çš„ç½‘ç»œè¯·æ±‚ã€‚æ— è®ºä»€ä¹ˆæ“ä½œåœ¨Thread 0éƒ½éœ€è¦ç§»åŠ¨åˆ°åå°çº¿ç¨‹ï¼Œæˆ–è€…å¼‚æ­¥å¤„ç†ï¼Œä»¥å…å®ƒé˜»å¡ä¸»çº¿ç¨‹ã€‚ å¼‚å¸¸ä»£ç 0xc00010ffè¡¨æ˜å¼•ç”¨è¢«æ“ä½œç³»ç»Ÿç»ˆç»“ä¸ºäº†å“åº”ä¸€ä¸ªå‘çƒ­äº‹ä»¶ã€‚è¿™ä¸ªå¯èƒ½ç”±äºä¸€ä¸ªå‘ç”Ÿå´©æºƒçš„ç‰¹å®šçš„è®¾å¤‡çš„é—®é¢˜æˆ–è€…ç¯å¢ƒè¢«æ“ä½œå¯¼è‡´ã€‚ä¸ºäº†ä½¿ä½ çš„åº”ç”¨æ›´é«˜æ•ˆè¿è¡Œçš„å»ºè®®ï¼ŒæŸ¥çœ‹WWDC session iOS Performance and Power Optimization with Instrumentsã€‚ å¼‚å¸¸ä»£ç 0xdead10ccè¡¨æ˜åº”ç”¨è¢«iOSç»ˆç»“ï¼Œç”±äºå½“åœ¨åå°è¿è¡Œæ—¶å®ƒæŒæœ‰äº†ä¸€ä¸ªç³»ç»Ÿçš„èµ„æºï¼ˆåƒé€šä¿¡å½•æ•°æ®åº“ï¼‰ã€‚ å¼‚å¸¸ä»£ç 0xdeadfa11è¡¨æ˜åº”ç”¨è¢«ç”¨æˆ·å¼ºåˆ¶é€€å‡ºã€‚å¼ºåˆ¶é€€å‡ºå‘ç”Ÿåœ¨å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æŒ‰ä¸‹å¼€å…³æœºæŒ‰é’®ç›´åˆ°â€æ»‘åŠ¨æ¥å…³æœºâ€å‡ºç°ï¼Œç„¶ååœ¨æŒ‰ä¸‹Homeé”®ã€‚è¿™æ˜¯åˆç†çš„å‡å¦‚ç”¨æˆ·è¿™æ ·åšäº†ï¼Œå› ä¸ºåº”ç”¨å·²ç»å˜å¾—ä¸å¯å“åº”ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯ - å¼ºåˆ¶é€€å‡ºä»»ä½•æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ã€‚ æ³¨æ„ï¼šç»ˆç»“ä¸€ä¸ªæŒ‚èµ·çš„appé€šè¿‡ä»å¤šä»»åŠ¡å…³ç³»é¢æ¿ä¸­ç§»é™¤å¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ä¸€æ—¦ä¸€ä¸ªappè¢«æŒ‚èµ·ï¼ŒiOSå®ƒæœ‰èµ„æ ¼åœ¨ä»»ä½•æ—¶å€™ç»ˆç»“å®ƒï¼Œæ‰€æœ‰æ²¡æœ‰å´©æºƒæŠ¥å‘Šäº§ç”Ÿã€‚ å‚è€ƒèµ„æ–™ Understanding and Analyzing Application Crash Reports Analyzing Crash Reports","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"å¿«é€Ÿå°è£…Airbnbé£æ ¼Loadingview","slug":"2016-09-10-kuai-su-feng-zhuang-airbnbfeng-ge-loadingview","date":"2016-09-10T05:54:15.000Z","updated":"2024-11-02T03:36:52.409Z","comments":true,"path":"2016/09/10/2016-09-10-kuai-su-feng-zhuang-airbnbfeng-ge-loadingview/","permalink":"https://blog.wangruofeng007.com/2016/09/10/2016-09-10-kuai-su-feng-zhuang-airbnbfeng-ge-loadingview/","excerpt":"","text":"å‰è¨€ä¸€ç›´åœ¨è§‚å¯Ÿå„ç§Appçš„LoadingViewï¼Œæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯MBProgressVHUDï¼ŒSVProgressHUDï¼Œè¿™ä¸¤ä¸ªä½¿ç”¨å¾—éå¸¸å¹¿æ³›ï¼Œå¤§åˆ°QQï¼Œæ”¯ä»˜å®ï¼Œå°åˆ°å„ç§ä¸çŸ¥é“åçš„Appï¼Œé•¿æ—¶é—´çš„è¿­ä»£è®©å®ƒä»¬çš„é€»è¾‘éå¸¸å®Œå–„ï¼ŒåŒæ—¶ä¹Ÿå¯¼è‡´äº†æœ‰äº›ç´¯èµ˜ï¼Œå¦‚æœæŠŠå®ƒä»¬å½“ä¸€ä¸ªäº§å“æ¥åˆ†æï¼Œå¯ä»¥çœ‹å‡ºï¼Œå®ƒä»¬åœ¨ä¸æ–­åœ°å¢åŠ éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯ï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªéå¸¸ç®€æ´çš„HUDæ²¡æœ‰æˆ‘ä»¬ä¸éœ€è¦çš„é‚£äº›å¤šä½™çš„é€»è¾‘åªæ˜¯è´Ÿè´£æ˜¾ç¤ºæŒ‡ç¤ºå’Œéšè—å‘¢ï¼Ÿ å¥½åƒæ²¡æœ‰ï¼Œæ‰€æœ‰ä»Šå¤©åŠ¨æ‰‹å‡†å¤‡è‡ªå·±å°è£…ä¸€ä¸ªLoadingViewï¼Œçµæ„Ÿæ¥è‡ªAirbnbï¼Œç”¨è¿‡Airbnbçš„åŒå­¦éƒ½çŸ¥é“ï¼Œå®ƒçš„LoadingViewå¾ˆæœ‰é£æ ¼,Airbnbæ˜¯å‡ å¼ å›¾ç‰‡å¾ªç¯ç¿»è½¬åˆ‡æ¢ï¼Œå½“ç„¶æˆ‘ä¸å‡†å¤‡å¤åˆ¶ä»–ä»¬çš„ideaï¼Œæˆ‘å‡†å¤‡åšä¸€ä¸ªå¾ªç¯å·¦å³ä¸Šä¸‹åˆ‡æ¢çš„LoadingViewã€‚ åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œæœ€ç»ˆæ•ˆæœçš„åŸå‹å›¾ æ€è·¯åˆ†æä¸€ä¸‹æ€è·¯ï¼š å››æ¡è™šçº¿äº¤å‰å½¢æˆçš„åŒºåŸŸå°±æ˜¯æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°çš„å›¾ç‰‡ é¦–å…ˆå‡†å¤‡ä¸¤å¼ å›¾ç‰‡ï¼Œä½ç½® ä¸­+ä¸Š å¼€å§‹ç¬¬ä¸€æ®µåŠ¨ç”»ï¼Œå‘ä¸‹åˆ‡æ¢ï¼Œä½ç½® å˜æˆ ä¸­+ä¸‹ ç¬¬ä¸€æ®µåŠ¨ç”»ç»“æŸï¼Œå°†ä¸‹é¢çš„å›¾ç‰‡ç§»åŠ¨åˆ°å³è¾¹ï¼Œå‡†å¤‡å¼€å§‹ç¬¬äºŒæ®µåŠ¨ç”» ç¬¬äºŒåŠ¨ç”»è·Ÿç¬¬ä¸€æ®µç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘æ˜¯ä»å³å‘å·¦ï¼ŒåŠ¨ç”»ç»“æŸå ä½ç½®å˜æˆ ä¸­+å·¦ å°†å·¦è¾¹çš„å›¾ç‰‡ç§»åŠ¨åˆ°ä¸Šæ–¹ä½ç½®ï¼Œå®Œæˆä¸€ä¸ªå¾ªç¯ ä¸ºäº†ä½¿åŠ¨ç”»æ›´æµç•…ä¸è‡³äºç”Ÿç¡¬ï¼Œæˆ‘ä»¬ä½¿ç”¨iOS7æ¨å‡ºçš„å¸¦å¼¹ç°§æ•ˆæœçš„API 123 + (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0); APIæ¥å£åœ¨APIæ¥å£è®¾è®¡ä¸Šï¼Œæˆ‘å¸Œæœ›å°½é‡ç®€å•å®ç”¨ï¼Œå°è£…äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºï¼Œä¸€ä¸ªç”¨æ¥éšè—ï¼Œå¯ä»¥æŒ‡å®šæ˜¾ç¤ºåˆ°æŸä¸ªviewï¼Œä»¥åŠæŒ‡å®šæ˜¾ç¤ºå’Œéšè—æ—¶æ˜¯å¦ä½¿ç”¨åŠ¨ç”»ã€‚ 1234 + (void)showViewAddedTo:(UIView *)view animated:(BOOL)animated;+ (void)hideViewForView:(UIView *)view animated:(BOOL)animated; APIå®ç°æ ¹æ®åˆšæ‰çš„åˆ†æï¼Œæ ¸å¿ƒçš„åŠ¨ç”»å®ç°å·²ç»æœ‰äº†æ€è·¯ï¼Œç°åœ¨å°±æ˜¯æ€ä¹ˆè®¾è®¡å†…éƒ¨ä»£ç å®ç°ï¼Œä¸ºäº†æ–¹ä¾¿æ˜¾ç¤ºè’™ç‰ˆé˜»æ­¢åŠ è½½çš„æ—¶å€™ç”¨æˆ·äº¤äº’ï¼Œæˆ‘æŠŠviewçš„èƒŒæ™¯é¢œè‰²è®¾ç½®äº†ä¸€ä¸ªæ·¡ç°è‰²ï¼Œviewçš„ä¸­é—´æœ‰ä¸‰ä¸ªå­viewï¼Œä¸€ä¸ªæ˜¯ä½äºä¸­é—´çš„å®¹å™¨centralView,è´Ÿè´£æ˜¾ç¤ºæˆ‘ä»¬æ‰€çœ‹åˆ°çš„åŒºåŸŸï¼Œæ–¹ä¾¿å®ç°åœ†è§’å’ŒåŠ¨ç”»æ•ˆæœï¼Œé‡Œé¢åŠ å…¥ä¸¤ä¸ªå­viewï¼ŒfirstViewå’ŒsecondViewç”¨äºæ˜¾ç¤ºåŠ¨ç”»åˆ‡æ¢çš„å›¾ç‰‡ã€‚ å†…éƒ¨æ¥å£å¤§æ¦‚è¿™æ · 12345@property (nonatomic, strong) UIView *centralView;@property (nonatomic, strong) UIImageView *firstView;@property (nonatomic, strong) UIImageView *secondView; ä¸ºäº†é˜²æ­¢å¤šæ¬¡æ·»åŠ LoadingViewï¼Œåœ¨æ¯æ¬¡æ·»åŠ å‰ï¼Œæˆ‘ä»¬ä¼šæŸ¥æ‰¾è¯¥viewæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è·³è¿‡æ·»åŠ æ“ä½œã€‚åå‘éå†ï¼Œå¿«é€ŸæŸ¥æ‰¾ã€‚ 12345678910111213+ (RFLoadingView *)loadingViewForView:(UIView *)view&#123; NSEnumerator *subviewsEnum = [view.subviews reverseObjectEnumerator]; for (UIView *subview in subviewsEnum) &#123; if ([subview isKindOfClass:self]) &#123; return (RFLoadingView *)subview; &#125; &#125; return nil;&#125; åŠ¨ç”»æ ¸å¿ƒå®ç°,ä¸¤ç«¯åŠ¨ç”»ï¼Œå°è£…æˆä¸¤ä¸ªæ–¹æ³• - (void)animatedImageFromTopToBottom - (void)animatedImageFromTopToBottom å…·ä½“å®ç°å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233- (void)animatedImageFromTopToBottom&#123; [UIView animateWithDuration:0.3 delay:0.5 usingSpringWithDamping:0.7 initialSpringVelocity:0 options:UIViewAnimationOptionCurveEaseInOut animations:^&#123; _firstView.centerY += kCenterViewSize; _secondView.centerY += kCenterViewSize; &#125; completion:^(BOOL finished) &#123; _firstView.centerX += kCenterViewSize; _firstView.centerY -= kCenterViewSize; [self changeFirstImage]; [self animatedImageFromRightToLeft]; &#125;];&#125;- (void)animatedImageFromRightToLeft&#123; [UIView animateWithDuration:0.3 delay:0.5 usingSpringWithDamping:0.7 initialSpringVelocity:0 options:UIViewAnimationOptionCurveEaseInOut animations:^&#123; _firstView.centerX -= kCenterViewSize; _secondView.centerX -= kCenterViewSize; &#125; completion:^(BOOL finished) &#123; _secondView.centerX += kCenterViewSize; _secondView.centerY -= kCenterViewSize; if (self.alpha &amp;&amp; self) &#123; [self changeSecondImage]; [self animatedImageFromTopToBottom]; &#125; &#125;];&#125; éœ€è¦éå¸¸æ³¨æ„çš„æ˜¯ï¼Œä¸€å®šè¦å†™ä¸Šç»ˆæ­¢åŠ¨ç”»çš„æ¡ä»¶ï¼Œä¸ç„¶ä¼šæ— é™å¾ªç¯ï¼Œå½±å“æ€§èƒ½ showå’Œhide123456789101112131415161718192021222324- (void)showAnimated:(BOOL)animated&#123; RFMainThreadAssert(); self.alpha = 1; [UIView animateWithDuration:animated ? 0.3 : 0 animations:^&#123; _centralView.alpha = 1; &#125; completion:^(BOOL finished) &#123; [self animatedImageFromTopToBottom]; &#125;];&#125;- (void)hideAnimated:(BOOL)animated&#123; RFMainThreadAssert(); [UIView animateWithDuration:animated ? 0.3 : 0 animations:^&#123; self.alpha = 0; &#125; completion:^(BOOL finished) &#123; [self removeFromSuperview]; &#125;];&#125; æœ€ç»ˆæ•ˆæœ Github Demoåœ°å€:RFLoadingViewDemo","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"iOSç¬¬ä¸‰æ–¹åº“æ±‡æ€»","slug":"2016-04-15-iosdi-san-fang-ku-hui-zong","date":"2016-04-15T09:23:38.000Z","updated":"2024-11-02T03:36:52.407Z","comments":true,"path":"2016/04/15/2016-04-15-iosdi-san-fang-ku-hui-zong/","permalink":"https://blog.wangruofeng007.com/2016/04/15/2016-04-15-iosdi-san-fang-ku-hui-zong/","excerpt":"","text":"ç®€ä»‹æ­¤æ–‡ç”¨äºæ€»ç»“ï¼Œæœ¬äººä½¿ç”¨è¿‡æˆ–è€…æ”¶è—è¿‡çš„Githubç¬¬ä¸‰æ–¹ç±»åº“ï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼Œä¹Ÿä¾¿ä»–äººå€Ÿé‰´ã€‚ èµ„æ–™æ•´ç†ä¸­ä¸å®šæœŸæ›´æ–°ã€‚ã€‚ã€‚ å¼€æºé¡¹ç›® CodeHub browse and maintain your GitHub repositories on any iOS device! Open-Source iOS Apps å¼€æºiOS appsåˆ—è¡¨ APPç›¸å…³ iVersion æç¤ºç‰ˆæœ¬æ›´æ–° BonMot å­—ä½“ç›¸å…³çš„åº“ï¼Œè®¾ç½®å­—ä½“æ ·å¼ FontAwesomeKit FontAwesomeKit æä¾›ä¸€äº›ç®€å•çš„åŠ©æ‰‹ç±»ç”¨æ¥å¸®åŠ©åœ¨iOSä¸Šä½¿ç”¨FontAwesome Font-Awesome The iconic font and CSS toolkit JMHoledView é¦–æ¬¡å¯åŠ¨APPçš„æ–°æ‰‹æŒ‡å¼• è‡ªåŠ¨å¸ƒå±€ Masonry æœ€ä¼˜é›…çš„è‡ªåŠ¨å¸ƒå±€è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒé“¾å¼ç¼–ç¨‹ PureLayout åˆä¸€å¼ºå¤§çš„è‡ªåŠ¨å¸ƒå±€è§£å†³æ–¹æ¡ˆ ç½‘ç»œè¯·æ±‚ AFNetworking åœ°çƒäººéƒ½åœ¨ç”¨ CocoaAsyncSocket å°è£…æœ€å®Œå–„çš„Socketç±»åº“ RxAlamofire å°è£…Alamofire åŸºç¡€å·¥å…·ç±»ä»¥åŠCategory sstoolkit ä¸€ä¸ªä¸é”™çš„å·¥å…·åŒ…ï¼Œæä¾›å„ç§æ¯”å¦‚ç¼–ç ã€åŠ å¯†ã€å­—ç¬¦ä¸²å¤„ç†ç­‰ç­‰ä¸œè¥¿ BFKit Swiftç‰ˆæœ¬ å›½å¤–çš„ä¸€ä¸ªå¤§ç¥å†™çš„å¾ˆå¥½ç”¨çš„åˆ†ç±»ï¼Œæ¯”è¾ƒé½å…¨ YYKit ibiremeç”¨å¿ƒä¹‹ä½œ BlocksKit ä¸ºåŸºç¡€ç±»æä¾›Blockæ”¯æŒï¼Œå¾ˆå¥½ç”¨ DateTools éå¸¸å¼ºå¤§çš„æ—¥æœŸå¤„ç†å·¥å…· FlatUIKit æ‰©å±•FoundationåŸºæœ¬UIä¸»ä»¶ï¼Œæ‰å¹³åŒ–é£æ ¼ iOS-Categories iOS Objective-C Category, a collection of useful Objective-C Categories extending iOS Frameworks such as Foundation,UIKit,CoreData,QuartzCore,CoreLocation,MapKit Etc. PinYin4Objc æ‹¼éŸ³è§£æ ZipArchive è§£å‹ç¼© Chameleon æ‰å¹³é¢œè‰²æ¡†æ¶ï¼Œå¯ä»¥åˆ›å»ºéå¸¸æ¼‚äº®çš„é¢œè‰² CYLTabBarController ä½è€¦åˆé›†æˆTabBarController RKNotificationHub åœ¨å³ä¸Šæ–¹æ˜¾ç¤ºé€šçŸ¥å°è§’æ ‡ Material-Controls-For-iOS Googleé£æ ¼çš„æ§ä»¶ YYKit A collection of iOS components. å¼¹æ¡† TYAlertController å„ç§é£æ ¼çš„å¼¹æ¡†ï¼Œæ»¡è¶³ä½ çš„å„ç§éœ€æ±‚ JKPopMenuView ç®€å•çš„å¼¹å‡ºèœå• MMPopupView ç²¾ç®€çš„å¼¹æ¡†ï¼Œéå¸¸æ¼‚äº®ï¼Œå’Œå–œæ¬¢ MJPopupViewController A UIViewController Category to display a ViewController as a popup with different transition effects. QBPopupMenu è‡ªå®šä¹‰popup menuï¼Œå¤–è§‚å’ŒiOS7ä¸Šçš„UIMenuControllerç±»ä¼¼ CWStatusBarNotification çŠ¶æ€æ é€šçŸ¥ DOPDropDownMenu ä¸‹æ‹‰åˆ—è¡¨èœå• KLCPopup éå¸¸æ¼‚äº®çš„å¼¹å‡ºæ§ä»¶ åŠ¨ç”» JHChainableAnimations é“¾å¼åŠ¨ç”»ç¼–ç¨‹ï¼Œæœ‰ç‚¹Masonryçš„å‘³é“ Canvas éå¸¸å¼ºå¤§çš„åŠ¨ç”»æ¡†æ¶ VCTransitionsLibrary è½¬åœºåŠ¨ç”»åº“ iCarousel å„ç§3Då˜æ¢çš„åŠ¨ç”»ï¼Œä»¥å‰ç”¨è¿‡ï¼Œç‚«é…·å¾—æ²¡æœ‹å‹ tapkulibrary Tapku remain home to the things like the calendar UIs, coverflow, and any legacy classes, ect. TBIconTransitionKit ç‚¹å‡»æŒ‰é’®è¿‡æ¸¡åŠ¨ç”» + â€“&gt; x - â€“&gt; + Spring A library to simplify iOS animations in Swift awesome-iOS-animation iOSåŠ¨ç”»åº“æ•´ç†æ”¶é›† FeSpinner Rocket Loader Collection for iOS app,æœ‰ä¸€äº›éå¸¸æœ‰è¶£çš„loadingåŠ¨ç”» SDECollectionViewAlbumTransition CollectionViewç›¸å†Œè‡ªå®šä¹‰è½¬åœº RZTransitions A library of custom iOS View Controller Animations and Interactions. AnimatedTransitionGallery å„ç§è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ”¶é›†ï¼Œéå¸¸å€¼å¾—å­¦ä¹  StarWars.iOS éå¸¸ç‚«é…·çš„CAShapeLayeråŠ¨ç”»ï¼Œéå¸¸ç‚«é…·ğŸ˜˜ Animations æ¥è‡ªæå®¢å­¦é™¢çš„YouXianMingçš„ä¸€äº›åŠ¨ç”»æ”¶é›† ZFDragableModalTransition Custom animation transition for present modal view controller Gifå¼•æ“ FLAnimatedImage Flipboardå¼€æºçš„Gifå¼•æ“ ç¼“å­˜ RENCache ç®€å•çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆ RNCachingURLProtocol webViewç¦»çº¿ç¼“å­˜åº“ HanekeSwift Swiftè¯­è¨€ä¹¦å†™çš„è½»é‡çº§å›¾ç‰‡ç¼“å­˜æ¡†æ¶ FastImageCache Pathå®˜æ–¹å¼€æºçš„å›¾ç‰‡ç¼“å­˜æ¡†æ¶ Kingfisher çŒ«ç¥ç”¨Swiftå®ç°å›¾ç‰‡ä¸‹è½½ç¼“å­˜æ¡†æ¶ æ–‡æœ¬ç›¸å…³ TTTAttributedLabel éå¸¸å¼ºå¤§çš„Labelï¼Œæ”¯æŒå±æ€§ï¼Œæ•°æ®è¯Šæ–­å’Œé“¾æ¥ SlackTextViewController Slackå¼€æºçš„drop-in UIViewController subclass with a growing text input view and other useful messaging features RTLabel å¯ä»¥å±•ç¤ºHtmlçš„Label TYAttributedLabel å¼ºå¤§çš„å±æ€§æ–‡æœ¬æ§ä»¶(æ— éœ€äº†è§£CoreText)ï¼Œæ”¯æŒå›¾æ–‡æ··æ’æ˜¾ç¤ºï¼Œæ”¯æŒæ·»åŠ é“¾æ¥ï¼Œimageå’ŒUIViewæ§ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ’ç‰ˆæ˜¾ç¤º CSGrowingTextView æ–‡æœ¬æ¡†ä¼šéšç€è¾“å…¥å­—æ•°æ”¹å˜é«˜åº¦ LTMorphingLabel æ•ˆæœéå¸¸ç‚«çš„æ–‡æœ¬æ¡† TextFieldEffects åŠ¨æ•ˆéå¸¸ä¸é”™çš„æ–‡æœ¬è¾“å…¥æ¡† DDRichText å›¾æ–‡æ··æ’ BMLine ä¸ºä½ çš„Viewå¢åŠ çº¿æ¡ UITextView-Placeholder A missing placeholder for UITextView. åŠ è½½è¿›åº¦ DACircularProgress å„ç§åœ†å½¢å’Œåœ†ç¯å‹è¿›åº¦æŒ‡ç¤º NJKWebViewProgress UIWebView progress interface MBProgressHUD è¿™ä¸ªä¸ç”¨è®²ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šç”¨ SVProgressHUD åˆä¸€ä¸ªè¿›åº¦æŒ‡ç¤º Toast å’ŒMBProgressHUDå·®ä¸å¤š LCProgressHUD å¯¹MBProgressHUDçš„ç®€å•å°è£…ï¼Œéå¸¸å®ç”¨ TSMessages æ¶ˆæ¯é€šçŸ¥æé†’æ¡†ï¼Œéå¸¸å¥½ç”¨ PINRemoteImage PinterestæŠ“å–è¿œç¨‹å›¾ç‰‡ç±» SDWebImage æœ€å¹¿æ³›ä½¿ç”¨çš„å›¾ç‰‡ç¼“å­˜æ¡†æ¶ AlamofireImage Swiftç‰ˆæœ¬çš„SDWebImage é”®ç›˜ç±» DAKeyboardControl ä¸€ä¸ªé”®ç›˜ç®¡ç†æ¡†æ¶ IQKeyboardManager å…¨å±€é”®ç›˜ç®¡ç† TPKeyboardAvoiding ä½¿ç”¨æ—¶è®¾ç½®scrollViewçš„ç±»ä¸ºTPKeyboardAvoidingScrollViewå³å¯æ”¯æŒxib RDRStickyKeyboardView ä½œè€…å·²ç»åœæ­¢ç»´æŠ¤ã€‚ã€‚ã€‚ æŠ½å±‰ ViewDeck åŠŸèƒ½å¼ºå¤§çš„æŠ½å±‰æ•ˆæœ MMDrawerController åˆä¸€ä¸ªæŠ½å±‰ SWRevealViewController A UIViewController subclass for revealing a rear (left and&#x2F;or right) view controller behind a front controller, inspired by the Facebook app, done right! MSDynamicsDrawerViewController Container view controller that leverages UIKit Dynamics to provide a realistic drawer navigation paradigm. PKRevealController å®‰è£…ç®€ä¾¿ï¼Œé«˜åº¦å®šåˆ¶ä¸”å¯¹æ‰‹åŠ¿è¯†åˆ«è‰¯å¥½ NavigationBar AMScrollingNavbar Swiftè¯­è¨€ç¼–å†™ä¸Šä¸‹æ»‘åŠ¨æ—¶åŠ¨æ€éšè—æ ‡é¢˜æ  LTNavigationbar å¯¼èˆªæ é¢œè‰²åŠ¨æ€æ”¹å˜ JZNavigationExtension Navigationçš„æ‰©å±•ï¼Œæ¨è ScrollViewç›¸å…³ SwipeView SwipeView is a class designed to simplify the implementation of horizontal, paged scrolling views on iOS. It is based on a UIScrollView, but adds convenient functionality such as a UITableView-style dataSource&#x2F;delegate interface for loading views dynamically, and efficient view loading, unloading and recycling. SWTableViewCell è‡ªå®šä¹‰Cellä¾§æ»‘åŠ¨ä½œ MGSwipeTableCell è‡ªå®šä¹‰Cellä¾§æ»‘åŠ¨ä½œï¼Œæ•ˆæœå¤šæ · CHTCollectionViewWaterfallLayout ç€‘å¸ƒæµå¸ƒå±€ TYSlidePageScrollView An easy solution to page views or controllers with header and page tabbar,footer XLPagerTabStrip Android PagerTabStrip for iOS. nice MJç³»åˆ— MJExtension model &lt;â€“&gt; dic &lt;â€“&gt; json æ¡†æ¶ MJRefresh åˆ·æ–°æ§ä»¶ æ•°æ®åº“ realm-cocoa è·¨å¹³å°è½»é‡çº§æ•°æ®åº“è§£å†³æ–¹æ¡ˆ,åŠ±å¿—å–ä»£Core Data &amp; SQLite fmdb å¯¹sqliteå®ç°é¢å‘å¯¹è±¡çš„å°è£… å›¾æ ‡åº“ PNChart æä¾›å„ç§å›¾æ ‡æ ·å¼ï¼Œæ€§èƒ½è¿˜éå¸¸ä¸é”™ Charts Beautiful charts for iOS&#x2F;tvOS&#x2F;OSX! The Apple side of the crossplatform MPAndroidChart. å›¾ç‰‡å¤„ç†ä»¥åŠå±•ç¤ºç›¸å…³ GPUImage å¼€æºåŸºäºGPUçš„å›¾ç‰‡æ¸²æŸ“å¼•æ“ï¼Œå¸¦æœ‰å¾ˆå¤šæ¬¾æ»¤é•œ FXBlurView èƒŒæ™¯æ¨¡ç³Š IDMPhotoBrowser ç…§ç‰‡æµè§ˆå™¨ AGImagePickerController ç›¸å†Œé€‰æ‹© DNImagePicker ä»¿ç…§å¾®ä¿¡çš„ç…§ç‰‡é€‰å–å™¨ JFImagePickerController åˆä¸€ä¸ªç…§ç‰‡é€‰å–å™¨ Nuke Image loading, processing, caching and preheating æ—¥å†é€‰æ‹© FSCalendar iOS7+é£æ ¼çš„æ—¥å†æ§ä»¶ï¼Œéå¸¸æ¼‚äº® éŸ³é¢‘&#x2F;è§†é¢‘ KRVideoPlayer 36æ°ªå¼€æºçš„è§†é¢‘æ’­æ”¾å™¨ DOUAudioStreamer è±†ç“£å¼€æºçš„éŸ³é¢‘æ’­æ”¾å™¨ å†…è´­&#x2F;æ¨å¹¿ IAPHelper in app purchases helper for iOS DAAppsViewController åº”ç”¨æ¨å¹¿ç•Œé¢ï¼Œå¡«å†™åˆä½œappçš„appleIdå³å¯ TAPromotee äº¤å‰æ¨å¹¿åº”ç”¨æ˜¯ä½ å¯ä»¥å…è´¹å®ç°çš„æœ€ä½³å¸‚åœºæ¨å¹¿ç­–ç•¥ä¹‹ä¸€ã€‚ å­˜å‚¨ç›¸å…³ SSKeychain é’¥åŒ™ä¸²å­˜å‚¨ PINCache Pinterestå‡ºå“çš„éé˜»å¡å¼å¼‚æ­¥ç¼“å­˜å·¥å…· TMCache tumblrå‡ºå“çš„å¯¹è±¡å¿«é€Ÿå¼‚æ­¥ç¼“å­˜ï¼Œæ”¯æŒiOSå’ŒOS X MagicalRecord ç®€åŒ–Core DataæŠ“å–æ•°æ®çš„é€»è¾‘ï¼Œæ¨è KeychainAccess Simple Swift wrapper for Keychain that works on iOS and OS X UICKeyChainStore UICKeyChainStoreçš„ç®€å•å°è£… å®ç”¨æ§ä»¶ HCSStarRatingView ç®€å•çš„è¯„åˆ†æ§ä»¶ LNNotificationsUI æ¨¡ä»¿iOSæ ‡å‡†é€šçŸ¥ç•Œé¢ï¼Œå¯ä»¥ä»¥å‡ä¹±çœŸ SCLAlertView-Swift éå¸¸æ¼‚äº®çš„åŠ¨ç”»Alert Viewï¼Œä½¿ç”¨Swiftä¹¦å†™ Wonderful è·‘é©¬ç¯,å½©è‰²æ ‡ç­¾,æ¸å˜ç­‰ã€‚ã€‚ã€‚ VVeboTableViewDemo VVeboå‰¥ç¦»çš„TableViewç»˜åˆ¶ FXForms å¿«é€Ÿåˆ›å»ºè¡¨å•,è®¾ç½®é¡µ,ç”¨æˆ·æ•°æ®ä»»åŠ¡,éå¸¸æ£’ SVPullToRefresh ä¸€è¡Œä»£ç å®ç°UIScrollViewä¸‹æ‹‰åˆ·æ–°æˆ–è€…æ— é™æ»šåŠ¨ è¾…åŠ©ç±» Surge åˆ©ç”¨Accelerateé«˜æ€§èƒ½æ•°å­¦è®¡ç®—æ¡†æ¶ KMCGeigerCounter æ˜¾ç¤ºå½“å‰åŠ¨ç”»çš„å¸§ç‡ XNGMarkdownParser Markdownè§£æå™¨ï¼Œå°†Markdownæ ¼å¼çš„å­—ç¬¦ä¸²è§£ææˆNSAttributedStringæ ¼å¼çš„å­—ç¬¦ä¸² TransformerKit å°è£…äº†ä¸€äº›å¸¸ç”¨çš„NSValueTransformerç±» RuntimeBrowser Objective-C Runtime Browser, for Mac OS X and iOS iOS-Runtime-Headers iOS Objective-C headers as derived from runtime introspection appledoc Objective-Cä»£ç ï¼Œè‹¹æœé£æ ¼æ–‡æ¡£ç”Ÿæˆå™¨ Markingbird Markdown processor written in Swift (translation of MarkdownSharp) Swift 30DaysofSwift allenwongè‡ªå­¦Swiftçš„30ä¸ªå·¥ç¨‹ ğŸ‘ SwiftGuide è¿™ä»½æŒ‡å—æ±‡é›†äº†Swiftè¯­è¨€ä¸»æµå­¦ä¹ èµ„æºï¼Œå¹¶ä»¥å¼€å‘è€…çš„è§†è§’æ•´ç†ç¼–æ’ swift-package-manager SwiftåŒ…ç®¡ç†å·¥å…· Carthage Swiftä¾èµ–ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼OCçš„CocoaPods swift-style-guide raywenderlich.comå®˜æ–¹Swiftç¼–ç¨‹é£æ ¼è§„ RxSwift Reactive Programming in Swift å…¶å®ƒ FreeCodeCamp The https://FreeCodeCamp.com open source codebase and curriculum. Learn to code and help nonprofits. libextobjc æ‹“å±•äº†ä¸€äº›Cocoaç±»åº“ ParseSourceCodeStudy Facebookå¼€æºçš„Parseæºç åˆ†æã€ç³»åˆ—ã€‘ hugo ä½¿ç”¨Google Goè¯­è¨€ä¹¦å†™çš„é™æ€åšå®¢ç½‘ç«™ç”Ÿæˆå™¨ CocoaPods CocoaåŒ…ä¾èµ–ç®¡ç†å·¥å…· MDCSwipeToChoose å®ç°æŸAppï¼Œå·¦æ»‘ä¸å–œæ¬¢ï¼Œå³æ»‘å–œæ¬¢çš„å¡ç‰‡å †å åŠŸèƒ½ Dash-Plugin-for-Xcode Xcodeçš„ä¸€ä¸ªæ’ä»¶ï¼Œæ•´åˆDashï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é˜…æ–‡æ¡£ iOS å¼€å‘é¢è¯•é—®é¢˜ æ±‡æ€»ä¸€äº›å¸¸è§çš„iOSé¢è¯•é—®é¢˜ XMPPFramework XMPPå³æ—¶é€šä¿¡åè®®æ¡†æ¶ WebViewJavascriptBridge Objective-Cä¸JavaScriptåœ¨UIWebViews&#x2F;WKWebViewä¹‹é—´äº¤äº’è§£å†³æ–¹æ¡ˆ articles-1 Articles for objccn.io. objc.ioçš„å®Œæ•´ã€å‡†ç¡®ã€ä¼˜é›…çš„ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ articles Weekly articles for NSHipster.com ebook æ”¶é›†äº†ä¸€äº›codingç›¸å…³çš„ç”µå­ä¹¦ dev-blog nixzhuçš„ä¸€äº› iOS &#x2F; Web å¼€å‘ç›¸å…³çš„ç¿»è¯‘æˆ–åŸåˆ›åšå®¢æ–‡ç«  KVOController Simple, modern, thread-safe key-value observing for iOS and OS X. LBXScan äºŒç»´ç ã€æ‰«ç ã€æ‰«ä¸€æ‰«ã€ZXingå’Œiosç³»ç»Ÿè‡ªå¸¦æ‰«ç å°è£…ï¼Œæ‰«ç ç•Œé¢æ•ˆæœå°è£… å‚è€ƒé“¾æ¥ï¼š iOSå­¦ä¹ èµ„æºæ±‡æ€» â€“ é¹å¨ã®åšå®¢åšå®¢","categories":[{"name":"èµ„æ–™æ”¶é›†","slug":"èµ„æ–™æ”¶é›†","permalink":"https://blog.wangruofeng007.com/categories/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"å¦‚ä½•åˆ©ç”¨LLDBæ¥Debug","slug":"2016-04-15-ru-he-li-yong-lldblai-debug","date":"2016-04-15T02:58:26.000Z","updated":"2024-11-02T03:36:52.409Z","comments":true,"path":"2016/04/15/2016-04-15-ru-he-li-yong-lldblai-debug/","permalink":"https://blog.wangruofeng007.com/2016/04/15/2016-04-15-ru-he-li-yong-lldblai-debug/","excerpt":"","text":"ä»‹ç»é‰´äºç°åœ¨è°ƒè¯•çš„é¢‘ç¹æ€§å’Œé‡è¦æ€§ï¼Œæ­¤æ–‡è®°å½•äº†ä¸€äº›åŸºæœ¬çš„LLDBè°ƒè¯•å‘½ä»¤ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…ã€‚ å¸¸ç”¨å‘½ä»¤ pã€poã€callã€print123456789101112p -- (&#x27;expression --&#x27;) Evaluate an expression (ObjC++ or Swift) in the current program context, using user defined variables and variables currently in scope.po -- (&#x27;expression -O -- &#x27;) Evaluate an expression (ObjC++ or Swift) in the current program context, using user defined variables and variables currently in scope.print -- (&#x27;expression --&#x27;) Evaluate an expression (ObjC++ or Swift) in the current program context, using user defined variables and variables currently in scope.call -- (&#x27;expression --&#x27;) Evaluate an expression (ObjC++ or Swift) in the current program context, using user defined variables and variables currently in scope. ä»å®˜æ–¹çš„æè¿°æ¥çœ‹ï¼Œpã€printã€callæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯poå°±ä¸å¤ªä¸€æ ·äº†ï¼Œè¾“å…¥ä¸€æ ·ä½†æ˜¯è¾“å‡ºä¸ä¸€æ ·ã€‚poçš„è¾“å‡ºçš„æ˜¯å…·ä½“å¯¹è±¡çš„å†…å®¹ã€‚ å¦‚æœæƒ³è¦æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼æ¥æ‰“å°ï¼Œå¦‚ä¸‹ï¼š 12345678910(lldb) p/s self.title(__NSCFString *) $0 = @&quot;ç›®çš„åœ°&quot;(lldb) p self.title(__NSCFString *) $1 = 0x00007fe0c0d4d230 @&quot;ç›®çš„åœ°&quot;(lldb) p/x self.title(__NSCFString *) $2 = 0x00007fe0c0d4d230 @&quot;ç›®çš„åœ°&quot;(lldb) p/t self.title(__NSCFString *) $3 = 0b0000000000000000011111111110000011000000110101001101001000110000 @&quot;ç›®çš„åœ°&quot;(lldb) p/a self.title(__NSCFString *) $4 = 0x00007fe0c0d4d230 -&gt; 0x000000010d2fd2c8 (void *)0x000000010d2fd278: __NSCFString @&quot;ç›®çš„åœ°&quot; æ‰“å°è¾“å‡ºæ ¼å¼åŒ– name description x Regard the bits of the value as an integer, and print the integer in hexadecimal. d Print as integer in signed decimal. u Print as integer in unsigned decimal. o Print as integer in octal. t Print as integer in binary. The letter â€˜tâ€™ stands for â€œtwoâ€. a Print as an address, both absolute in hexadecimal and as an offset from the nearest preceding symbol. You can use this format used to discover where (in what function) an unknown address is located:(gdb) p&#x2F;a 0x54320 $3 &#x3D; 0x54320 &lt;_initialize_vx+396&gt; c Regard as an integer and print it as a character constant. This prints both the numerical value and its character representation. The character representation is replaced with the octal escape â€˜\\nnnâ€™ for characters outside the 7-bit ascii range.Without this format, gdb displays char, unsigned char, and signed char data as character constants. Single-byte members of vectors are displayed as integer data. f Regard the bits of the value as a floating point number and print using typical floating point syntax. s Regard as a string, if possible. With this format, pointers to single-byte data are displayed as null-terminated strings and arrays of single-byte data are displayed as fixed-length strings. Other values are displayed in their natural types.Without this format, gdb displays pointers to and arrays of char, unsigned char, and signed char as strings. Single-byte members of a vector are displayed as an integer array. z Like â€˜xâ€™ formatting, the value is treated as an integer and printed as hexadecimal, but leading zeros are printed to pad the value to the size of the integer type. r Print using the â€˜rawâ€™ formatting. By default, gdb will use a Python-based pretty-printer, if one is available (see Pretty Printing). This typically results in a higher-level display of the valueâ€™s contents. The â€˜râ€™ format bypasses any Python pretty-printer which might exist. æ ¼å¼ï¼š p/x $pc å‚è€ƒé“¾æ¥ï¼šæ‰“å°è¾“å‡ºæ ¼å¼åŒ– lldbå£°æ˜å˜é‡123(lldb) e NSString *$str = @&quot;http://www.baidu.com&quot;(lldb) po $strhttp://www.baidu.com æˆ‘ä»¬ä½¿ç”¨eå¼€å¤´å£°æ˜äº†å˜é‡ è°ƒç”¨å˜é‡çš„API1(lldb) po [self.title uppercaseString] å¼ºè½¬è¿”å›å€¼ç±»å‹1234567891011121314(lldb) po [self.title characterAtIndex:0]U+76ee u&#x27;ç›®&#x27;(lldb) po (unsigned int)[self.title characterAtIndex:0]30446(lldb) po (char)[self.title characterAtIndex:0]&#x27;\\xee&#x27;(lldb) po (NSString *)[self.title characterAtIndex:0]0x00000000000076ee(lldb) po (unichar)[self.title characterAtIndex:0]U+76ee u&#x27;ç›®&#x27; æ·»åŠ æ–­ç‚¹12b 120b [KLNewDestinationVC setupUI] bå‘½ä»¤åé¢åŠ è¡Œå·ï¼Œæˆ–è€…æŒ‡å®šæŸä¸ªå¯¹è±¡è°ƒç”¨çš„æ–¹æ³• è®¾ç½®æ–­ç‚¹è§¦å‘æ¡ä»¶å³é”®æ–­ç‚¹å¤„,åœ¨conditionå¤„ç¼–è¾‘ï¼Œå¦‚æœè®¾ç½®äº†æ¡ä»¶ï¼Œåªè¦å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæ‰ä¼šè¿›å…¥æ–­ç‚¹ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ¡ä»¶æ»¡è¶³æ—¶å‘å‡ºå£°éŸ³å’Œæ‰“å°æç¤ºè¯­ã€‚ å¸¸ç”¨æ‰“å°è§†å›¾å±‚æ¬¡ç»“æ„1(lldb) po [self.view recursiveDescription] ä¸´æ—¶åˆ·æ–°ç•Œé¢UI123(lldb) e ((UIButton *)sender).backgroundColor = [UIColor redColor](UICachedDeviceRGBColor *) $41 = 0x00007fdd10715b00(lldb) e (void)[CATransaction flush]","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"Debug","slug":"Debug","permalink":"https://blog.wangruofeng007.com/tags/Debug/"}]},{"title":"ä½¿ç”¨facebookçš„chiselæ¥è°ƒè¯•","slug":"2016-04-15-shi-yong-facebookde-chisellai-diao-shi","date":"2016-04-15T02:23:44.000Z","updated":"2024-11-02T03:36:52.409Z","comments":true,"path":"2016/04/15/2016-04-15-shi-yong-facebookde-chisellai-diao-shi/","permalink":"https://blog.wangruofeng007.com/2016/04/15/2016-04-15-shi-yong-facebookde-chisellai-diao-shi/","excerpt":"","text":"ä»‹ç»chiselæ˜¯facebookå¼€æºçš„è°ƒè¯•æ¡†æ¶ï¼Œå°è£…äº†å¾ˆå¤šæ–¹ä¾¿çš„LLDBå‘½ä»¤ä¾¿äºè°ƒè¯•iOS Appï¼Œä»Šå¤©ä»‹ç»ä¸€ä¸‹ä½¿ç”¨å¿ƒå¾—ä»¥åŠä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å†™å¸®åŠ©ã€‚ æµ‹è¯•ç¯å¢ƒï¼š Xcode 7.3 and iOS 9.3 simulator.OS:OSX 10.11.4 pviews and presponder doesnâ€™t work and no output. Chisel issue on Xcode 7.3 #149 ä½œè€…æ­£åœ¨åŠªåŠ›ä¿®å¤ä¸­ã€‚ã€‚ã€‚ Xcode7.2ç‰ˆæœ¬æ²¡æœ‰é—®é¢˜ å®‰è£…brew update brew install chisel åˆ›å»º~/.lldbinit å‡å¦‚ä¸å­˜åœ¨ç¼–è¾‘å†…å®¹: command script import &#x2F;usr&#x2F;local&#x2F;opt&#x2F;chisel&#x2F;libexec&#x2F;fblldb.py æŸ¥çœ‹å‘½ä»¤ï¼ˆlldbï¼‰help æŸ¥çœ‹å…·ä½“æ€æ ·ä½¿ç”¨(lldb) help border å¸¸ç”¨å‘½ä»¤è¯´æ˜ Command Description pviews Print the recursive view description for the key window. pvc Print the recursive view controller description for the key window. visualize Open a UIImage, CGImageRef, UIView, CALayer, NSData (of an image), UIColor, CIColor, or CGColorRef in Preview.app on your Mac. fv Find a view in the hierarchy whose class name matches the provided regex. fvc Find a view controller in the hierarchy whose class name matches the provided regex. show&#x2F;hide Show or hide the given view or layer. You donâ€™t even have to continue the process to see the changes! mask&#x2F;unmask Overlay a view or layer with a transparent rectangle to visualize where it is. border&#x2F;unborder Add a border to a view or layer to visualize where it is. caflush Flush the render server (equivalent to a â€œrepaintâ€ if no animations are in-flight). bmessage Set a symbolic breakpoint on the method of a class or the method of an instance without worrying which class in the hierarchy actually implements the method. wivar Set a watchpoint on an instance variable of an object. presponder Print the responder chain starting from the given object. Tipsï¼šç›´æ¥ç‚¹æ§åˆ¶å°ä¸Šæ–¹ç¬¬ä¸‰ä¸ªæŒ‰é’®å‘¼å‡ºLLDBã€‚ pviews(æš‚ä¸å¯ç”¨)æ˜¾ç¤ºviewçš„å±‚çº§ã€‚ border&amp;unborderborder:ç»™viewæˆ–è€…layeræ·»åŠ è¾¹æ¡†é¢œè‰²å’Œè¾¹æ¡†çš„å®½åº¦ã€‚ ä½¿ç”¨å¦‚ä¸‹ï¼š (lldb) border 0x7ffc017b2970 -c green -w 10 æ ‡ç¤ºè®¾ç½®0x7ffc017b2970è§†å›¾æˆ–è€…å›¾å±‚ä¸€ä¸ªå®½åº¦ä¸º2çš„ç»¿è‰²è¾¹æ¡†ã€‚ unborder:å»æ‰viewæˆ–è€…layerçš„è¾¹æ¡†é¢œè‰²å’Œè¾¹æ¡†å®½åº¦ã€‚ ä½¿ç”¨å¦‚ä¸‹ï¼š unborder 0x7ffc017b2970 pinternalsè¿™ä¸ªå‘½ä»¤å°±æ˜¯æ‰“å°å‡ºæ¥çš„ä¸€ä¸ªæ§ä»¶ï¼ˆidï¼‰ç±»å‹çš„å†…éƒ¨ç»“æ„ã€‚ ä½¿ç”¨å¦‚ä¸‹ï¼š pinternals 0x7ffc017b2970 presponderï¼ˆæš‚ä¸å¯ç”¨ï¼‰æ‰“å°å‡ºä¸€ä¸ªç»§æ‰¿äºUIResponderæ§ä»¶çš„æ¶ˆæ¯ä¼ é€’é“¾ã€‚ visualizeå¯ä»¥ä½¿ç”¨macä¸‹çš„é¢„è§ˆappæ‰“å¼€æˆ‘ä»¬çš„å›¾ç‰‡UIImage, CGImageRefæ ¼å¼çš„å›¾ç‰‡ï¼Œç”šè‡³viewå’Œlayerçš„å›¾ç‰‡ã€‚ ä½¿ç”¨å¦‚ä¸‹ï¼š visualize 0x79ec3140//æˆ–è€…å˜é‡åï¼Œæ­¤åœ°å€æ˜¯idç±»å‹çš„ pclasspclasså¯ä»¥æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡çš„ç»§æ‰¿å…³ç³»ã€‚ ä½¿ç”¨å¦‚ä¸‹ï¼š pclass 0x7fcd15108800 taplogè¿™ä¸ªå‘½ä»¤æ˜¯æ¨¡æ‹Ÿæ•²å‡»ä¸€ä¸‹å±å¹•ï¼Œå¹¶ä¸”æ‰“å°å‡ºä½ æ•²å‡»å±å¹•æ—¶å€™äº‹ä»¶æ¥æ”¶çš„å¯¹è±¡ã€‚ hide&amp;showhideå‘½ä»¤å¯ä»¥ç›´æ¥éšè—ä¸€ä¸ªå¯¹è±¡,ç§»é™¤å½“å‰é®æŒ¡çš„å¯¹è±¡ä¾¿äºä½ è§‚å¯Ÿåé¢çš„å¯¹è±¡ã€‚showå‘½ä»¤ä¼šè®©å®ƒå†æ¬¡æ˜¾ç¤ºå‡ºæ¥ã€‚ bmessageè¿™ä¸ªå‘½ä»¤å°±æ˜¯LLDBæ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œè­¬å¦‚-viewWillAppear:è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨å½“å‰æ§åˆ¶å™¨ä¸­ä½ æ²¡æœ‰å®ç°å®ƒï¼Œä½†æ˜¯ä½ åˆæƒ³åœ¨è°ƒç”¨å®ƒçš„æ—¶æœºè§¦å‘ä¸­æ–­ã€‚ è¿™ä¸ªæˆ‘å°±ä¸è§£é‡Šäº†ï¼Œéœ€è¦è¡¥å……ä¸€ç‚¹çš„æ˜¯Objectiv-cçš„æ–¹æ³•æ˜¯å¸¦ï¼šçš„ã€‚ pvcæ‰“å°å‡ºå½“å‰çš„æ§åˆ¶å™¨å±‚çº§ã€‚ wivarè¿™ä¸ªå‘½ä»¤æ˜¯åŠ watchPointã€‚ å‚è€ƒé“¾æ¥ï¼š Chiselå¸¸ç”¨å‘½ä»¤æ€»ç»“ â€“ ç®€ä¹¦ ä¸è°ƒè¯•å™¨å…±èˆ - LLDB çš„åå°”å…¹ â€“ objccn.io Dancing in the Debugger â€” A Waltz with LLDB â€“ objc.io","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"Debug","slug":"Debug","permalink":"https://blog.wangruofeng007.com/tags/Debug/"}]},{"title":"Associated Objects å…³è”å¯¹è±¡","slug":"2016-04-14-associated-objects-guan-lian-dui-xiang","date":"2016-04-14T15:56:39.000Z","updated":"2024-11-02T03:36:52.407Z","comments":true,"path":"2016/04/14/2016-04-14-associated-objects-guan-lian-dui-xiang/","permalink":"https://blog.wangruofeng007.com/2016/04/14/2016-04-14-associated-objects-guan-lian-dui-xiang/","excerpt":"","text":"Associated Objects ä»‹ç»&lt;objc/runtime.h&gt;ä¸­çš„å‡½æ•°å·ç§°æ˜¯iOSä¸­æœ€åä¸€æŠŠç¥å…µåˆ©åˆƒï¼Œå…·æœ‰å…¶ä»–æ–¹å¼åšä¸åˆ°çš„ï¼Œèƒ½ä¸ºåº”ç”¨å’Œæ¡†æ¶æä¾›å¼ºå¤§åŠŸèƒ½çš„èƒ½åŠ›ã€‚ä½†ä½¿ç”¨ä¸å½“ä¹Ÿå¯èƒ½åºŸæ‰ä»£ç çš„,ä¸€åˆ‡ä»£ç å’Œé€»è¾‘éƒ½å¯èƒ½è¢«å¼‚å¸¸ç³Ÿç³•çš„å‰¯ä½œç”¨å½±å“ã€‚ å°±åƒå’Œé­”é¬¼åšäº¤æ˜“ä¸€æ ·å¸¸å¸¸è®©äººæ€€ç€å·¨å¤§çš„ææƒ§ã€‚ å†å²å¯¹è±¡å…³è”ï¼ˆæˆ–ç§°ä¸ºå…³è”å¼•ç”¨ï¼‰æœ¬æ¥æ˜¯Objective-C 2.0è¿è¡Œæ—¶çš„ä¸€ä¸ªç‰¹æ€§ï¼Œèµ·å§‹äºOS X Snow Leopardå’ŒiOS4ã€‚ æ ¸å¿ƒå‡½æ•°3ä¸ª â€“ å…è®¸å°†ä»»ä½•é”®å€¼åœ¨å…è®¸æ—¶å…³è”åˆ°å¯¹è±¡ä¸Š objc_setAssociatedObject objc_getAssociatedObject objc_removeAssociatedObjects è¿™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™å…è®¸å¼€å‘è€…å¯¹å·²ç»å­˜åœ¨çš„ç±»åœ¨æ‰©å±•ä¸­æ·»åŠ è‡ªå®šä¹‰çš„å±æ€§ å®ç°çš„3ç§æ–¹å¼ static char selector _cmd_ ä½¿ç”¨ static char å®ç°NSObject+AssociatedObject.h 123@interface NSObject (AssociatedObject)@property (nonatomic, strong) id associatedObject;@end NSObject+AssociatedObject.m 123456789101112131415@implementation NSObject (AssociatedObject)static char kAssociatedObjectKey;- (id)associatedObject&#123; return objc_getAssociatedObject(self,&amp;kAssociatedObjectKey);&#125;- (void)setAssociatedObject:(id)associatedObject&#123; objc_setAssociatedObject(self, &amp;kAssociatedObjectKey, associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;@end ä½¿ç”¨ selector å®ç°NSObject+AssociatedObject.h 123@interface NSObject (AssociatedObject)@property (nonatomic, strong) id associatedObject;@end NSObject+AssociatedObject.m 12345678910111213@implementation NSObject (AssociatedObject)- (id)associatedObject&#123; return objc_getAssociatedObject(self, @selector(associatedObject));&#125;- (void)setAssociatedObject:(id)associatedObject&#123; objc_setAssociatedObject(self, @selector(associatedObject), associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;@end ä½¿ç”¨ _cmd_ å®ç°NSObject+AssociatedObject.h 123@interface NSObject (AssociatedObject)@property (nonatomic, strong) id associatedObject;@end NSObject+AssociatedObject.m 12345678910111213@implementation NSObject (AssociatedObject)- (id)associatedObject&#123; return objc_getAssociatedObject(self, _cmd_);&#125;- (void)setAssociatedObject:(id)associatedObject&#123; objc_setAssociatedObject(self, @selector(associatedObject), associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;@end å…³è”å¯¹è±¡çš„è¡Œä¸ºå±æ€§æ ¹æ®æšä¸¾ç±»å‹objc_AssociationPolicyæ¥å†³å®šè¢«å…³è”åœ¨å¯¹è±¡ä¸Šçš„è¡Œä¸ºï¼š Behavior ä¸ä¹‹ç­‰æ•ˆçš„@property OBJC_ASSOCIATION_ASSIGN @property (assign) æˆ–@property (unsafe_unretained) OBJC_ASSOCIATION_RETAIN_NONATOMIC @property (nonatomic, strong) OBJC_ASSOCIATION_COPY_NONATOMIC @property (nonatomic, copy) OBJC_ASSOCIATION_RETAIN @property (atomic, strong) OBJC_ASSOCIATION_COPY @property (atomic, copy) OBJC_ASSOCIATION_ASSIGNç±»å‹å…³è”å¯¹è±¡çš„å¼±å¼•ç”¨ä¸ä»£è¡¨weakçš„å¼±å¼•ç”¨ï¼Œè¡Œä¸ºä¸Šæ›´åƒunsafe_unretainedå±æ€§ã€‚ å¯¹è±¡é”€æ¯æ—¶é—´è¢«å…³è”çš„å¯¹è±¡åœ¨å£°æ˜å‘¨æœŸå†…æ¯”å¯¹è±¡æœ¬èº«é‡Šæ”¾è¦æ™šå¾ˆå¤šï¼Œåœ¨å¯¹è±¡è°ƒç”¨-deallocä¸­çš„object_dispose()ä¸­é‡Šæ”¾ã€‚ åˆ é™¤å±æ€§ä½ æˆ–è®¸æƒ³è¦ä½¿ç”¨objc_removeAssociatedObjectsï¼ˆï¼‰æ¥è¿›è¡Œåˆ é™¤æ“ä½œï¼Œä½†å®˜æ–¹æ–‡æ¡£ä¸å»ºè®®æ‰‹åŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šæŠŠå…¶ä»–ç”¨æˆ·å¯¹å…¶æ·»åŠ çš„å±æ€§ä¹Ÿç§»é™¤äº†ï¼Œæ­£ç¡®çš„æ–¹å¼æ˜¯è°ƒç”¨objc_setAssociatedObjectæ–¹æ³•ï¼Œä¼ å…¥nilå€¼æ¥æ¸…æ¥šä¸€ä¸ªå…³è”ã€‚ ä¼˜ç§€æ ·ä¾‹ æ·»åŠ ç§æœ‰å±æ€§ç”¨äºæ›´å¥½åœ°å»å®ç°ç»†èŠ‚ã€‚ æ·»åŠ publicå±æ€§æ¥å¢å¼ºcategoryçš„åŠŸèƒ½ã€‚ åˆ›å»ºä¸€ä¸ªç”¨äºKVOçš„å…³è”è§‚å¯Ÿè€…ã€‚ åº”ç”¨ä¸¾ä¾‹UIImagePickerController å›¾ç‰‡é€‰æ‹©å›è°ƒå…³è”ä¸€ä¸ªblockå®ç°å®Œæˆé€‰æ‹©å›¾ç‰‡åçš„å›è°ƒã€‚ UIImagePickerController+RFBlocks.h123456789@interface UIImagePickerController (RFBlocks)&lt;UIImagePickerControllerDelegate, UINavigationControllerDelegate&gt;typedef void(^RFImagePickerFinishBlock)(NSDictionary *info);@property (nonatomic, copy) RFImagePickerFinishBlock rf_finishBlock;+ (UIImagePickerController *)rf_imagePickerWithFinishBlock:(RFImagePickerFinishBlock)finishBlock;@end UIImagePickerController+RFBlocks.m123456789101112131415161718192021222324252627282930313233343536static const char kFinishBlockKey;@implementation UIImagePickerController (RFBlocks)+ (UIImagePickerController *)rf_imagePickerWithFinishBlock:(RFImagePickerFinishBlock)finishBlock&#123; UIImagePickerController *picker = [[UIImagePickerController alloc] init]; picker.rf_finishBlock = finishBlock; return picker;&#125;- (RFImagePickerFinishBlock)rf_finishBlock &#123; return objc_getAssociatedObject(self, &amp;kFinishBlockKey);&#125;- (void)setRf_finishBlock:(RFImagePickerFinishBlock)rf_finishBlock &#123; self.delegate = self; objc_setAssociatedObject(self, &amp;kFinishBlockKey, rf_finishBlock, OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;#pragma mark - UIImagePickerControllerDelegate- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary&lt;NSString *,id&gt; *)info&#123; RFImagePickerFinishBlock block = self.rf_finishBlock; if (block) block(info); [self dismissViewControllerAnimated:YES completion:nil]; self.rf_finishBlock = nil;&#125;@end ä½¿ç”¨ï¼š 123456789__weak typeof(self)weakSelf = self;UIImagePickerController *picker = [UIImagePickerController rf_imagePickerWithFinishBlock:^(NSDictionary *info) &#123; NSLog(@&quot;finish picke image\\n info:%@&quot;,info); UIImage *img = info[@&quot;UIImagePickerControllerOriginalImage&quot;]; weakSelf.view.layer.contents = (id)img.CGImage; &#125;];[self presentViewController:picker animated:YES completion:nil]; æˆ–è€… 12345678910111213UIImagePickerController *picker = [[UIImagePickerController alloc] init]; __weak typeof(self)weakSelf = self;picker.rf_finishBlock = ^(NSDictionary *info) &#123; NSLog(@&quot;finish picke image\\n info:%@&quot;,info); UIImage *img = info[@&quot;UIImagePickerControllerOriginalImage&quot;]; weakSelf.view.layer.contentsGravity = kCAGravityResizeAspect; weakSelf.view.layer.contents = (id)img.CGImage;&#125;;[self presentViewController:picker animated:YES completion:nil]; UIButton æŒ‰é’®äº‹ä»¶å›è°ƒå…³è”ä¸€ä¸ªæŒ‰é’®äº‹ä»¶blockï¼Œå½“è§¦å‘æŒ‰é’®UIControlEventTouchUpInsideäº‹ä»¶æ—¶å›è°ƒã€‚ UIButton+RFBlcoks.h1234567@interface UIButton (RFBlcoks)typedef void(^RFButtonClickBlock)(UIButton *button);@property (nonatomic, copy) RFButtonClickBlock rf_buttonClickBlock;@end UIButton+RFBlcoks.m123456789101112131415161718192021222324static char kButttonClickBlockKey;@implementation UIButton (RFBlcoks)- (RFButtonClickBlock)rf_buttonClickBlock&#123; return objc_getAssociatedObject(self, &amp;kButttonClickBlockKey);&#125;- (void)setRf_buttonClickBlock:(RFButtonClickBlock)rf_buttonClickBlock&#123; objc_setAssociatedObject(self, &amp;kButttonClickBlockKey, rf_buttonClickBlock, OBJC_ASSOCIATION_COPY_NONATOMIC); [self addTarget:self action:@selector(buttonClicked) forControlEvents:UIControlEventTouchUpInside];&#125;- (void)buttonClicked&#123; if (self.rf_buttonClickBlock) &#123; self.rf_buttonClickBlock(self); &#125;&#125;@end ä½¿ç”¨ï¼š 123self.button.rf_buttonClickBlock = ^(UIButton *button)&#123; NSLog(@&quot;%@ clicked&quot;,button);&#125;; Demoåœ°å€ï¼š AssociatedObjectDemo å‚è€ƒèµ„æ–™ï¼š Associated Objects â€“ NSHipster Objective-C Associated Objects â€“ Kingâ€™s Cocoa Objective-C Associated Objects çš„å®ç°åŸç†â€“ é›·çº¯å³°çš„æŠ€æœ¯åšå®¢ Associated Objects by Example â€“ Sebastian Rehnby","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"ç©è½¬iOSå‰ªåˆ‡æ¿","slug":"2016-04-14-wan-zhuan-iosjian-qie-ban","date":"2016-04-14T14:20:52.000Z","updated":"2024-11-02T03:36:52.407Z","comments":true,"path":"2016/04/14/2016-04-14-wan-zhuan-iosjian-qie-ban/","permalink":"https://blog.wangruofeng007.com/2016/04/14/2016-04-14-wan-zhuan-iosjian-qie-ban/","excerpt":"","text":"å‰è¨€ç§»åŠ¨åº”ç”¨é£é¡çš„ä»Šå¤©ï¼Œå¤§å®¶è¶Šæ¥è¶Šè§‰å¾—ï¼Œä¸€ä¸ªAppçš„å¤„ç†äº‹æƒ…çš„æ•ˆç‡è‡³å…³é‡è¦ï¼ŒåŒ…æ‹¬ä¸€äº›ç»†èŠ‚å¤„ç†ï¼Œåƒæœ¬åœ°åŒ–ï¼ˆlocalizationï¼‰å’Œè¾…åŠ©åŠŸèƒ½ï¼ˆaccessibilityï¼‰çš„æ”¯æŒæ˜¯é«˜å“è´¨çš„åº”ç”¨å’Œå…¶å®ƒåº”ç”¨åŒºåˆ†å¼€çš„ä¸¤ä¸ªç‰¹æ€§ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠä¸€ä¸ªå¢åŠ ç”¨æˆ·ä½“éªŒå’Œæ•ˆç‡çš„åŠŸèƒ½â€“ç¼–è¾‘æ“ä½œ ç¼–è¾‘æ“ä½œæ ‡å‡†ç¼–è¾‘åŠ¨ä½œå¤„ç†å¤åˆ¶ï¼Œå‰ªåˆ‡ï¼Œåˆ é™¤å’Œç²˜è´´å‘½ä»¤ å¤åˆ¶ï¼ˆ**copy:**ï¼‰ å‰ªåˆ‡ï¼ˆ**cut:**ï¼‰ åˆ é™¤ï¼ˆ**delete:**ï¼‰ ç²˜è´´ï¼ˆ**paste:**ï¼‰ å¤„ç†é€‰æ‹©å‘½ä»¤ é€‰æ‹©ï¼ˆ**select:**ï¼‰ å…¨é€‰ï¼ˆ**selectAll:**ï¼‰ å¯Œæ–‡æœ¬ç¼–è¾‘å‘½ä»¤ åŠ ç²—ï¼ˆ**toggleBoldface:**ï¼‰ æ–œä½“ï¼ˆ**toggleItalics:**ï¼‰ ä¸‹åˆ’çº¿ï¼ˆ**toggleUnderline:**ï¼‰ æ”¹å˜ä¹¦å†™æ–¹å‘å‘½ä»¤ ä¹¦å†™æ–¹å‘å·¦åˆ°å³ï¼ˆ**makeTextWritingDirectionLeftToLeft:**ï¼‰ ä¹¦å†™æ–¹å‘å³åˆ°å·¦ï¼ˆ**makeTextWritingDirectionRightToLeft:**ï¼‰ æ”¹å˜æ–‡æœ¬å°ºå¯¸å‘½ä»¤ å˜å¤§ï¼ˆ**increaseSize:**ï¼‰ å˜å°ï¼ˆ**decreaseSize:**ï¼‰ å®ç°labelçš„å¤åˆ¶ç²˜è´´åŠŸèƒ½1234567891011121314151617181920212223242526272829// RFLabel.h@interface RFLabel : UILabel@end// RFLabel.m@implementation RFLabel- (BOOL)canBecomeFirstResponder &#123; return YES;&#125;- (BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123; return (action == @selector(copy:) || action == @selector(paste:));&#125;#pragma mark - UIResponderStandardEditActions- (void)copy:(id)sender &#123; [[UIPasteboard generalPasteboard] setString:self.text];&#125;- (void)paste:(id)sender &#123; NSString *toBePastedString = [[UIPasteboard generalPasteboard] string]; self.text = toBePastedString;&#125;@end åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨å®ƒï¼š 1234567891011121314151617181920212223242526272829303132333435363738#import &quot;ViewController.h&quot;#import &quot;RFLabel.h&quot;@interface ViewController ()@property (weak, nonatomic) IBOutlet RFLabel *topLabel;@property (weak, nonatomic) IBOutlet RFLabel *bottomLabel;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. self.topLabel.userInteractionEnabled = YES; self.bottomLabel.userInteractionEnabled = YES; UIGestureRecognizer *gestureRecognizer1 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)]; UIGestureRecognizer *gestureRecognizer2 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)]; [self.topLabel addGestureRecognizer:gestureRecognizer1]; [self.bottomLabel addGestureRecognizer:gestureRecognizer2];&#125;- (void)handleLongPressGesture:(UIGestureRecognizer *)recognizer&#123; if (recognizer.state == UIGestureRecognizerStateRecognized) &#123; [recognizer.view becomeFirstResponder]; UIMenuController *menuController = [UIMenuController sharedMenuController]; [menuController setTargetRect:recognizer.view.frame inView:recognizer.view.superview]; [menuController setMenuVisible:YES animated:YES]; &#125;&#125;@end æ€»ç»“ä¸€ä¸‹ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒå¤åˆ¶ç²˜è´´ä¸€ä¸ªlabelçš„æ–‡å­—ï¼Œéœ€è¦å®Œæˆä¸‹é¢å‡ æ­¥ï¼š å¿…é¡»ç»§æ‰¿ UILabel,åœ¨å­ç±»ä¸­å®ç°canBecomeFirstResponderå’ŒcanPerformAction:withSender:æ–¹æ³• å®ç°æ¯ä¸ªå¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼Œåœ¨æ–¹æ³•ä¸­å’ŒUIPasteboardè¿›è¡Œäº¤äº’ åˆå§‹åŒ–labelæ—¶ï¼Œå°†labelçš„userInteractionEnabledå±æ€§è®¾ç½®ä¸ºYES å‘labelæ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿ï¼ˆæˆ–è€…æ‰‹åŠ¨åœ¨å­ç±»ä¸­å®ç°UIResponderçš„æ–¹æ³•ï¼Œä¾‹å¦‚touchesBegan:withEvent:ï¼‰ å“åº”æ‰‹åŠ¿è¯†åˆ«äº‹ä»¶ï¼ŒæŒ‡æ˜UIMenuControllerçš„ä½ç½®ï¼Œè®¾ç½®ä¸ºå¯è§ æœ€åï¼Œä½¿labelæˆä¸ºç¬¬ä¸€å“åº”è€… UIMenuControllerUIMenuControllerè´Ÿè´£å±•ç¤ºç¼–è¾‘åŠ¨ä½œçš„èœå•é¡¹ã€‚æ¯ä¸ªåº”ç”¨éƒ½æŒæœ‰è‡ªå·±çš„ä¸€ä¸ªå•ä¾‹å¯¹è±¡ sharedMenuControllerã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œèœå•æ§åˆ¶å™¨ä¼šå±•ç¤ºUIResponderStandardEditActionsè¿™ä¸ªéæ­£å¼åè®®ï¼ˆå³ä¸éœ€è¦å¯¹åº”å®ç°çš„åè®®ï¼‰ä¸­çš„æ–¹æ³•ï¼Œå‡å¦‚canPerformAction:withSender:è¿”å›YESã€‚ UIMenuItemå¯ä»¥é€šè¿‡UIMenuControllerçš„menuItemså±æ€§æ·»åŠ è‡ªå®šä¹‰çš„å‘½ä»¤ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯UIMenuItemå¯¹è±¡ï¼Œåªéœ€è¦æŒ‡å®šæ¯ä¸ªåŠ¨ä½œçš„titleå’Œaction 1- (instancetype)initWithTitle:(NSString *)title action:(SEL)action NS_DESIGNATED_INITIALIZER; UITableView å’Œ UICollectionViewUITableViewå’ŒUICollectionViewå¯ä»¥åœ¨cellä¸Šè°ƒå‡ºç¼–è¾‘èœå•,å…¶å®ä»»ä½•è‡ªå®šä¹‰çš„UIViewéƒ½èƒ½å®ç°ï¼ŒUIViewControllerçš„å­ç±»åªæ˜¯ä»¥ä¸åŒçš„æ–¹å¼å®ç°è€Œå·²ã€‚ä¸ºäº†è®©UITableViewå’ŒUICollectionViewä¹Ÿèƒ½å®ç°ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€äº›é¢å¤–çš„æ–¹æ³•å¦åˆ™å±å¹•ä¸Šä¸ä¼šæ˜¾ç¤ºä»»ä½•ä¸œè¥¿ã€‚è¿™äº›æ–¹æ³•ç»™äºˆäº†ä½ æ›´å¤šçš„æ§åˆ¶åœ¨æ˜¾ç¤ºæŒ‡å®šçš„ä¸Šä¸‹æ–‡èœå•åŸºäºä½ å°†è¦æ˜¾ç¤ºåœ¨UITableViewå’ŒUICollectionViewçš„å†…å®¹ã€‚ UITableViewDelegate æ–¹æ³• â€“ tableView:shouldShowMenuForRowAtIndexPath: â€“ tableView:canPerformAction:forRowAtIndexPath:withSender: â€“ tableView:performAction:forRowAtIndexPath:withSender: UICollectionViewDelegate æ–¹æ³• â€“ collectionView:shouldShowMenuForItemAtIndexPath: â€“ collectionView:canPerformAction:forItemAtIndexPath:withSender: â€“ collectionView:performAction:forItemAtIndexPath:withSender: Bonuså®ç°UIImageViewå›¾ç‰‡çš„å¤åˆ¶ç²˜è´´åŠŸèƒ½ Demoåœ°å€ï¼š Menu_Controller_Demo å‚è€ƒé“¾æ¥ UIMenuController â€“ nshipster UIMenuController_Class â€“ UIMenuController Class Reference Show the UIMenuController and Display Custom Edit Menus UITableViewCell on iOS 5 UITableViewController â€“ Demo","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"å‰ªåˆ‡æ¿","slug":"å‰ªåˆ‡æ¿","permalink":"https://blog.wangruofeng007.com/tags/%E5%89%AA%E5%88%87%E6%9D%BF/"}]},{"title":"åˆ›å»ºè‡ªå®šä¹‰Viewåœ¨IBä¸­å®æ—¶æ¸²æŸ“","slug":"2016-04-10-chuang-jian-zi-ding-yi-viewzai-ibzhong-shi-shi-xuan-ran","date":"2016-04-10T05:22:56.000Z","updated":"2024-11-02T03:36:52.407Z","comments":true,"path":"2016/04/10/2016-04-10-chuang-jian-zi-ding-yi-viewzai-ibzhong-shi-shi-xuan-ran/","permalink":"https://blog.wangruofeng007.com/2016/04/10/2016-04-10-chuang-jian-zi-ding-yi-viewzai-ibzhong-shi-shi-xuan-ran/","excerpt":"","text":"æ›¾æƒ³è‡ªå®šä¹‰çš„Viewï¼Œå¯ä»¥åƒç³»ç»Ÿè‡ªå¸¦å±æ€§ä¸€æ ·ï¼Œå¹¶ä¸”å®æ—¶æ¸²æŸ“ï¼ŒåŠ¨æ€æ›´æ–°å†…å®¹ï¼Œç°åœ¨åœ¨Xcode6ç»ˆäºè®©ä½ å¯ä»¥è½»æ¾çš„åšåˆ°ã€‚ ä½ ä¸ç”¨ç¼–è¯‘å°±èƒ½å®æ—¶é¢„è§ˆï¼Œç°åœ¨é…ç½®è‡ªå®šä¹‰ç•Œé¢æ–¹ä¾¿å¤šäº†ï¼ŒIBInspectableå’ŒIBDesignableä½¿å®ƒæˆä¸ºå¯èƒ½ã€‚ IBInspectableIBInspectableå±æ€§æä¾›è®¿é—®æ—§åŠŸèƒ½çš„æ–°æ–¹æ³•ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„è¿è¡Œæ—¶å±æ€§ã€‚ä»ç›®å‰çš„èº«ä»½æ£€æŸ¥å™¨ï¼ˆidentity inspectorï¼‰ä¸­è®¿é—®ï¼Œè¿™äº›å±æ€§åœ¨Interface Builderæ•´åˆåˆ°Xcodeã€‚å¯ä»¥é€šè¿‡å®ƒæ¥é…ç½®Nibï¼ŒXibï¼Œstoryboardå®ä¾‹ä¸­çš„ä»»ä½•é”®å€¼ç¼–ç ï¼ˆkey-value-codedï¼‰å±æ€§ï¼š ä»¥å‰æƒ³å®ç°ï¼Œåªèƒ½ç‚¹+å·æ‰‹åŠ¨æ·»åŠ ä¾‹å¦‚æƒ³ç»™UIViewæ·»åŠ ä¸€ä¸ªåœ†è§’åŠå¾„ï¼Œè®¾ç½®Key Path ä¸ºï¼šlayer.cornerRadius,typeä¸ºNumber ï¼ŒValueä¸º4ï¼Œå¦‚æœä½¿ç”¨IBInspectableåªéœ€è¦åœ¨@property å£°æ˜ååŠ ä¸ŠIBInspectableï¼ˆæˆ–è€…swift åŠ ä¸Š@IBInspectableï¼‰ï¼Œå°±å¯ä»¥åœ¨IBçš„è§‚å¯Ÿé¢æ¿ä¸­ï¼ˆinspector pannelï¼‰é‡Œç›´æ¥ç¼–è¾‘ã€‚å…¶ä»–äº¤ç”±Xcodeè‡ªåŠ¨å®Œæˆï¼Œå±æ€§åå­—ä¼šè‡ªåŠ¨åˆ†ç»„ï¼Œåç§°ä»é©¼å³°ï¼ˆcamel-ï¼‰è½¬æ¢æˆ title-æ¨¡å¼ã€‚ ç›®å‰å¯æ£€æŸ¥å±æ€§æ”¯æŒ å¤‡æ³¨ : ç»æœ¬äººäº²æµ‹ï¼Œé™¤NSNumber,NSRangeä¸ä¼šäº§ç”Ÿè§‚å¯Ÿé¢æ¿å±æ€§ï¼ŒNSRangeä¸ä¼šåœ¨runtime Attributes ä¸­è‡ªåŠ¨æ·»åŠ ï¼Œå…¶ä»–éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ æ”¯æŒé¢œè‰²ç±»å‹UIColorä½†æ˜¯ä¸æ”¯æŒCALayerçš„CGColorï¼Œè®¾ç½®é¢œè‰²æ—¶åªéœ€è®¾ç½®UIColorï¼Œä¸è¦è¦è®¾ç½®CGColorï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†UIColorè½¬æ¢ï¼Œä¾‹å¦‚è®¾ç½®borderColorã€‚ IBDesignableå½“ä½ åº”ç”¨åˆ°UIViewæˆ–è€…UIViewçš„å­ç±»ä¸­çš„æ—¶å€™ï¼Œåªéœ€åŠ ä¸ŠIBDesignableï¼Œå°±å¯ä»¥è®©IBåœ¨ç”»å¸ƒä¸Šå®æ—¶æ¸²æŸ“è§†å›¾ã€‚å½“ä½ æ›´æ–°å±æ€§åï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ä¸éœ€è¦é‡æ–°è¿è¡Œç¨‹åºã€‚ æ ‡è®°ä¸€ä¸ªè‡ªå®šä¹‰è§†å›¾ä¸ºIBDesignableï¼Œåªéœ€è¦åœ¨ç±»åå‰é¢åŠ ä¸ŠIB_DESIGNABLEï¼ˆSwifté‡ŒåŠ ä¸Š@IBDesignableï¼‰ã€‚ä½ çš„åˆå§‹åŒ–ï¼Œå¸ƒç½®å’Œç»˜åˆ¶æ–¹æ³•éƒ½å°†ç”¨æ¥åœ¨ç”»å¸ƒä¸Šæ¸²æŸ“ä½ çš„è‡ªå®šä¹‰è§†å›¾: 123456789101112IB_DESIGNABLE@interface CustomView :UIView &#123;@property (nonatomic, strong) IBInspectable UIColor *borderColor; @property (nonatomic, assign) IBInspectable CGFloat borderWidth;...&#125;@end å®æ—¶æ•ˆæœï¼š æœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªè®¾è®¡å¸ˆæˆ–è€…å¼€æ”¾äººå‘˜å¯ä»¥è½»æ¾è°ƒæ•´è‡ªå®šä¹‰çš„æ§ä»¶å‘ˆç°ã€‚ä»»ä½•æ”¹å˜ï¼Œéƒ½å°†ç«‹å³å‘ˆç°ï¼Œæœ‰çš„æƒ³Swifté‡Œé¢çš„playgroundåŠŸèƒ½ï¼Œå®ç°ï¼šæ‰€è§å³æ‰€å¾—ã€‚ ç”±äºåœ¨ Interface Builder ä¸­å‘ˆç°è‡ªå®šä¹‰è§†å›¾ä¸ä¼šæœ‰åº”ç”¨ç¨‹åºçš„å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œä½ å¯èƒ½éœ€è¦ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ä»¥ä¾¿æ˜¾ç¤ºï¼Œä¾‹å¦‚ä¸€ä¸ªé»˜è®¤ç”¨æˆ·å¤´åƒå›¾ç‰‡æˆ–ä»¿åˆ¶çš„å¤©æ°”æ•°æ®ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä¸ºè¿™ä¸ªç‰¹æ®Šçš„ä¸Šä¸‹æ–‡æ·»åŠ ä»£ç ï¼š prepareForInterfaceBuilder() :æ­¤æ–¹æ³•ä¸ä½ ä»£ç çš„å…¶ä½™éƒ¨åˆ†ä¸€èµ·ç¼–è¯‘ï¼Œä½†åªæœ‰å½“è§†å›¾æ­£åœ¨å‡†å¤‡åœ¨Interface Builderæ˜¾ç¤ºæ—¶æ‰§è¡Œ TARGET_INTERFACE_BUILDER:#if TARGET_INTERFACE_BUILDERé¢„å¤„å®,åœ¨ Objective-C æˆ– Swift ä¸‹éƒ½æ˜¯å·¥ä½œçš„ï¼Œå®ƒä¼šè§†æƒ…å†µç¼–è¯‘æ­£ç¡®ä»£ç  12345678#if !TARGET_INTERFACE_BUILDE// this code will run in the app it self#els// this code will execute only in IB#endif å‚è€ƒèµ„æ–™: IBInspectable-IBDesignable Apple å®˜æ–¹ä»‹ç» Demoåœ°å€: IBInspectable_IBDesignable_Demo","categories":[{"name":"OC","slug":"OC","permalink":"https://blog.wangruofeng007.com/categories/OC/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"Unix Shellå¸¸ç”¨å‘½ä»¤","slug":"2016-03-27-unixshellchang-yong-ming-ling","date":"2016-03-27T10:29:44.000Z","updated":"2024-11-02T03:36:52.406Z","comments":true,"path":"2016/03/27/2016-03-27-unixshellchang-yong-ming-ling/","permalink":"https://blog.wangruofeng007.com/2016/03/27/2016-03-27-unixshellchang-yong-ming-ling/","excerpt":"","text":"è¾“å‡ºæ–‡ä»¶å†…å®¹åˆ°åŸºæœ¬è¾“å‡º cat filename æ”¹å˜æ–‡ä»¶çš„æƒé™ chmod æˆ– change mode å½“å‰çš„æ—¶é—´å’Œæ—¥æœŸ date æ‹·è´ copy æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹ ls æ˜¾ç¤ºdiræ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹ ls dir æŸ¥çœ‹ç£ç›˜ç©ºé—´çŠ¶å†µ du æŸ¥çœ‹å½“å‰è¿›ç¨‹çŠ¶å†µ ps ä½ çš„ç”¨æˆ·åå’Œç»ˆç«¯ç±»å‹ who åˆ›å»ºç›®å½• mkdir dir åˆ é™¤ç›®å½• rmdir dir è¿›å…¥ç›®å½• cd dir åˆ é™¤æ–‡ä»¶ rm file æ˜¾ç¤ºæ–‡ä»¶ more file æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬ echo æ”¹æ–‡ä»¶åã€ç§»åŠ¨æ–‡ä»¶ mv source target æ˜¾ç¤ºç›®å½•è·¯å¾„å‘½ä»¤ pwd æ¸…å± clear é€€å‡ºè¾“å…¥å‘½ä»¤ Ctrl + c æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•ä¹‹æœ€åä¿®æ”¹æ—¶é—´ touch name åˆ é™¤ç›®å½• rmdir directory-name æˆ– rm -r directory-name rmdir dir1 åˆ é™¤ç›®å½• dir1ï¼Œä½† dir1 ä¸‹å¿…é¡»æ²¡æœ‰æ–‡ä»¶å­˜åœ¨ï¼Œå¦åˆ™æ— æ³•åˆ é™¤ã€‚ rm -r dir1 åˆ é™¤ç›®å½• dir1ï¼ŒåŠå…¶ä¸‹æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ã€‚ åˆ é™¤æ–‡ä»¶ rm filename (filename å¯ä¸ºæ–‡ä»¶åï¼Œæˆ–æ–‡ä»¶åç¼©å†™ç¬¦å·ã€‚) rm file1 åˆ é™¤æ–‡ä»¶åä¸º file1 ä¹‹æ–‡ä»¶ã€‚ rm file? åˆ é™¤æ–‡ä»¶åä¸­æœ‰äº”ä¸ªå­—ç¬¦ï¼Œå‰å››ä¸ªå­—ç¬¦ä¸ºfile ä¹‹æ‰€æœ‰æ–‡ä»¶ã€‚ rm f* åˆ é™¤æ–‡ä»¶åä¸­ï¼Œä»¥ f ä¸ºå­—é¦–ä¹‹æ‰€æœ‰æ–‡ä»¶ã€‚ rm -rf file åˆ é™¤åä¸ºfileçš„æ–‡ä»¶å¤¹åŠå…¶é‡Œé¢çš„å†…å®¹","categories":[{"name":"Unix","slug":"Unix","permalink":"https://blog.wangruofeng007.com/categories/Unix/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"Unix","slug":"Unix","permalink":"https://blog.wangruofeng007.com/tags/Unix/"}]},{"title":"gitå¸¸ç”¨å‘½ä»¤","slug":"2016-03-27-gitchang-yong-ming-ling","date":"2016-03-27T09:08:45.000Z","updated":"2024-11-02T03:36:52.406Z","comments":true,"path":"2016/03/27/2016-03-27-gitchang-yong-ming-ling/","permalink":"https://blog.wangruofeng007.com/2016/03/27/2016-03-27-gitchang-yong-ming-ling/","excerpt":"","text":"åˆ›å»ºæ–°çš„ä»“åº“ æ–°å»ºæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ï¼Œæ‰§è¡Œ git init æ£€å‡ºä»“åº“ åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“å…‹éš†ç‰ˆæœ¬ git clone /path/to/repository åˆ›å»ºè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»“åº“ git clone username@host:/path/to/repository Gitå·¥ä½œæµä¸€ä¸ªæœ¬åœ°ä»“åº“ç”±gitç»´æŠ¤çš„3å®¢â€æ ‘â€ç»„æˆã€‚ å·¥ä½œç›®å½• working dicã€‚ â€“ å®ƒæŒæœ‰å®é™…æ–‡ä»¶ æš‚å­˜åŒºIndexã€‚ â€“ å®ƒåƒä¸ªç¼“å†²åŒºåŸŸï¼Œä¸´æ—¶ä¿å­˜ä½ çš„æ”¹åŠ¨ HEADã€‚ â€“ å®ƒæŒ‡å‘ä½ æœ€åä¸€æ¬¡æäº¤çš„ç»“æœ work flowï¼šworking dic â€“addâ€“ &#x3D;&#x3D;&gt; Index â€“commitâ€“ &#x3D;&#x3D;&gt;HEAD æ·»åŠ å’Œæäº¤ æ·»åŠ åˆ°æš‚å­˜åŒº git add &lt;filename&gt; git add * git add . æäº¤åˆ°HEAD git commit -m &#39;some comment&#39; git commit -m &quot;some comment&quot; æ·»åŠ æäº¤äºŒåˆä¸€ git commit -a -m &#39;some comment&#39; æŸ¥çœ‹ä»“åº“ä¿®æ”¹çŠ¶æ€git status æ¨é€æ›´æ”¹ ç°åœ¨çš„æ”¹åŠ¨å·²ç»æäº¤åˆ°æœ¬åœ°ä»“åº“çš„HEADä¸­ï¼Œæäº¤åˆ°è¿œç¨‹ä»“åº“ git push æ ¼å¼git push (remote) (branch),ç¬¬ä¸€æ¬¡pushå¿…é¡»è¿™æ ·å†™ git push origin master:master æ¨é€åˆ°å…·ä½“æŸä¸€åˆ†æ”¯git push origin someBranch åˆ†æ”¯æ“ä½œ æŸ¥çœ‹åˆ†æ”¯ git branch æŸ¥çœ‹åˆ†æ”¯æœ€åæäº¤çŠ¶æ€ git branch -v --merged ä¸ --no-merged è¿™ä¸¤ä¸ªæœ‰ç”¨çš„é€‰é¡¹å¯ä»¥è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ä¸­å·²ç»åˆå¹¶æˆ–å°šæœªåˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ã€‚ å¦‚æœè¦æŸ¥çœ‹å“ªäº›åˆ†æ”¯å·²ç»åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œå¯ä»¥è¿è¡Œ git branch --merged aBranch iss53 * master æ–°å»ºåˆ†æ”¯ git branch aBranch åˆ‡æ¢åˆ°aBranchåˆ†æ”¯ git checkout aBranch æ–°å»ºåˆ‡æ¢åˆ†æ”¯2åˆä¸€ git checkout - b aBranch åˆ é™¤åˆ†æ”¯ git branch -d aBranch å¦‚æœå°†è¦åˆ é™¤çš„åˆ†æ”¯è¿˜æœ‰æ²¡æœ‰åˆå¹¶çš„å†…å®¹ï¼Œåˆ é™¤å°†ä¼šå¤±è´¥ï¼Œä½¿ç”¨-Då¼ºåˆ¶åˆ é™¤ error: The branch &#39;testBranch&#39; is not fully merged. If you are sure you want to delete it, run &#39;git branch -D testBranch&#39;. åˆ†æ”¯é‡å‘½å git branch -m oldBranchName newBranchName åˆ†æ”¯æ“ä½œå®ä¾‹masteræ˜¯é»˜è®¤çš„åˆ†æ”¯ã€‚åœ¨å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå®Œæˆåå†å°†ä»–ä»¬åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚ åˆ›å»ºä¸€ä¸ªå«â€œfeature_xâ€çš„åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡å» git checkout -b feature_x åˆ‡æ¢å›ä¸»åˆ†æ”¯ï¼š git checkout master åˆ é™¤æ–°å»ºåˆ†æ”¯ git branch -d feature_x å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ git push origin &lt;branch&gt; æ›´æ–°ä¸åˆå¹¶ æ›´æ–°ä½ çš„æœ¬åœ°ä»“åº“åˆ°æœ€æ–°æ”¹åŠ¨ git pull ä¼šåœ¨ä½ çš„å·¥ä½œç›®å½• æŠ“å–fetchå¹¶åˆå¹¶mergeè¿œç«¯çš„æ”¹åŠ¨ åˆå¹¶aBranchåˆ†æ”¯å›masteråˆ†æ”¯ git checkout master git merge aBranch è¿™ç§æ–¹å¼å«åšç›´æ¥åˆå¹¶ï¼ˆstraight mergeï¼‰æ³¨æ„æ²¡å‚æ•°çš„æƒ…å†µä¸‹mergeæ˜¯fast-forwardçš„ï¼Œå³Gitå°†masteråˆ†æ”¯çš„æŒ‡é’ˆç›´æ¥ç§»åˆ°aBranchçš„æœ€å‰æ–¹ã€‚ æ¢å¥è¯è¯´ï¼Œå¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»å¯ä»¥åˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯çš„è¯ï¼Œé‚£ä¹ˆGitåœ¨åˆå¹¶ä¸¤è€…æ—¶ï¼Œåªä¼šç®€å•ç§»åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥è¿™ç§åˆå¹¶æˆä¸ºå¿«è¿›å¼(Fast-forward) å¦‚ä½•é¿å…æ¯æ¬¡è¾“å…¥å¯†ç å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ HTTPS URL æ¥æ¨é€ï¼ŒGit æœåŠ¡å™¨ä¼šè¯¢é—®ç”¨æˆ·åä¸å¯†ç ã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šåœ¨ç»ˆç«¯ä¸­æç¤ºæœåŠ¡å™¨æ˜¯å¦å…è®¸ä½ è¿›è¡Œæ¨é€ã€‚ å¦‚æœä¸æƒ³åœ¨æ¯ä¸€æ¬¡æ¨é€æ—¶éƒ½è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª credential cacheã€‚ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å°†å…¶ä¿å­˜åœ¨å†…å­˜ä¸­å‡ åˆ†é’Ÿï¼Œå¯ä»¥ç®€å•åœ°è¿è¡Œ git config --global credential.helper cache æ¥è®¾ç½®å®ƒã€‚ å‹åˆåˆå¹¶squashed commitså°†ä¸€æ¡åˆ†æ”¯ä¸Šçš„è‹¥å¹²ä¸ªæäº¤æ¡ç›®å‹åˆæˆä¸€ä¸ªæäº¤æ¡ç›®ï¼Œæäº¤åˆ°å¦ä¸€æ¡åˆ†æ”¯çš„æœ«æ¢¢ã€‚ æŠŠaBranchåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤å‹åˆæˆä¸»åˆ†æ”¯ä¸Šçš„ä¸€ä¸ªæäº¤ï¼Œå³å‹åˆæäº¤ï¼š git checkout master git merge --squash aBranch æ­¤æ—¶ï¼ŒaBranchä¸Šçš„æ‰€æœ‰æäº¤å·²ç»åˆå¹¶åˆ°å½“å‰å·¥ä½œåŒºå¹¶æš‚å­˜ï¼Œä½†è¿˜æ²¡æœ‰ä½œä¸ºä¸€ä¸ªæäº¤ï¼Œå¯ä»¥åƒå…¶ä»–æäº¤ä¸€æ ·ï¼ŒæŠŠè¿™ä¸ªæ”¹åŠ¨æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼š git commit -m &#39;some comment&#39; æ‹£é€‰åˆå¹¶cherry-pickingæ‹£é€‰å¦ä¸€æ¡åˆ†æ”¯ä¸Šçš„æŸä¸ªæäº¤æ¡ç›®çš„æ”¹åŠ¨å¸¦åˆ°å½“å‰åˆ†æ”¯ä¸Šã€‚ æ¯ä¸€æ¬¡æäº¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æäº¤åç§°ï¼Œåˆ©ç”¨è¿™ä¸ªåç§°å°±å¯ä»¥è¿›è¡Œæ‹£é€‰æäº¤ã€‚ æ¯”å¦‚åœ¨devä¸Šçš„æŸä¸ªæäº¤å«ï¼š321d76f æŠŠå®ƒåˆå¹¶åˆ°masterä¸­ï¼š git checkout master git cherry-pick 321d76f è¦æ‹£é€‰å¤šä¸ªæäº¤ï¼Œå¯ä»¥ç»™git cherry-pickå‘½ä»¤ä¼ é€’-né€‰é¡¹ï¼Œæ¯”å¦‚ï¼š git cherry-pick â€“n 321d76f è¿™æ ·åœ¨æ‹£é€‰äº†è¿™ä¸ªæ”¹åŠ¨ä¹‹åï¼Œè¿›è¡Œæš‚å­˜è€Œä¸ç«‹å³æäº¤ï¼Œæ¥ç€å¯ä»¥è¿›è¡Œä¸‹ä¸€ä¸ªæ‹£é€‰æ“ä½œï¼Œä¸€æ—¦æ‹£é€‰å®Œéœ€è¦çš„å„ä¸ªæäº¤ï¼Œå°±å¯ä»¥ä¸€å¹¶æäº¤ã€‚ å¦‚æœå‘ç”Ÿå†²çªï¼Œè§£å†³å†²çªå®Œåæ‰§è¡Œgit cherry-pick --continueç»§ç»­æ‹£é€‰åˆå¹¶ã€‚ è§£å†³å†²çªï¼ˆconflictsï¼‰ é€šè¿‡CONFLICT (content):æ‰¾åˆ°å†²çªæ–‡ä»¶æ‰€åœ¨çš„ä½ç½® æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œä¿®æ”¹å†²çªåä¿å­˜ é€šè¿‡git statusæŸ¥çœ‹å†²çªæ˜¯å¦è§£å†³ é€šè¿‡git diff &lt;source_branch&gt; &lt;target_banch&gt;é¢„è§ˆå·®å¼‚ æäº¤æ›´æ”¹git commit -a -m &#39;some comment&#39; æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯çš„å®Œæ•´åˆ—è¡¨git ls-remote è·å–è¿œç¨‹åˆ†æ”¯æ›´å¤šä¿¡æ¯git remote show æ–°å»ºè¿œç¨‹åˆ†æ”¯git push --set-upstream origin newBranch æäº¤åˆ†æ”¯æ•°æ®åˆ°è¿œç¨‹æœåŠ¡å™¨git push origin &lt;local_branch_name&gt;:&lt;remote_branch_name&gt; åˆ é™¤è¿œç¨‹åˆ†æ”¯git push origin :develop git push origin --delete develop æ ‡ç­¾åˆ›å»ºä¸€ä¸ª1.0.0çš„æ ‡ç­¾ git tag 1.0.0 1b2e1d63ff 1b2e1d63ffæ˜¯ä½ æƒ³è¦æ ‡è®°çš„æäº¤IDçš„å‰10ä½å­—ç¬¦ï¼Œå¯ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è·å–æäº¤ID git log æ›¿æ¢æœ¬åœ°æ”¹åŠ¨git checkout -- &lt;filename&gt; æ­¤å‘½ä»¤ä¼šä½¿ç”¨HEADä¸­çš„æœ€æ–°å†…å®¹æ›¿æ¢æ‰ä½ çš„å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å·²æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ä»¥åŠæ–°æ–‡ä»¶éƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚ å‡å¦‚ä½ æƒ³ä¸¢å¼ƒä½ åœ¨æœ¬åœ°çš„æ‰€æœ‰æ”¹åŠ¨ä¸æäº¤ï¼Œå¯ä»¥åˆ°æœåŠ¡å™¨ä¸Šè·å–æœ€æ–°çš„ç‰ˆæœ¬å†å²ï¼Œå¹¶å°†ä½ æœ¬åœ°ä¸»åˆ†æ”¯æŒ‡å‘å®ƒ git fetch orgin git reset --hard origin/master å‚è€ƒé“¾æ¥ Git - ç®€æ˜æŒ‡å— Gitç¤¾åŒºå‚è€ƒæŒ‡å— Github Help å›¾è§£Git Think like a git","categories":[{"name":"Git","slug":"Git","permalink":"https://blog.wangruofeng007.com/categories/Git/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"Git","slug":"Git","permalink":"https://blog.wangruofeng007.com/tags/Git/"}]},{"title":"ä½¿ç”¨Mantleé«˜æ•ˆæ„å»ºModel","slug":"2016-03-03-shi-yong-mantlegao-xiao-gou-jian-model","date":"2016-03-02T17:05:21.000Z","updated":"2024-11-02T03:36:52.406Z","comments":true,"path":"2016/03/03/2016-03-03-shi-yong-mantlegao-xiao-gou-jian-model/","permalink":"https://blog.wangruofeng007.com/2016/03/03/2016-03-03-shi-yong-mantlegao-xiao-gou-jian-model/","excerpt":"","text":"æ¦‚è¿°åœ¨iOSå¼€å‘ä¸­ï¼Œä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åè§£ææˆæœ¬åœ°çš„æ¨¡å‹æ˜¯ç»å¸¸çš„è¦åšäº‹ï¼Œè€Œä¸”é‡å¤æ¬¡æ•°ç‰¹åˆ«å¤šï¼Œæ¯æ¬¡å¢åŠ ä¸€ä¸ªç½‘ç»œè¯·æ±‚æˆ–è€…å¢åŠ ä¸€ä¸ªæ¨¡å‹éƒ½éœ€è¦å®ŒæˆJSONåˆ°Modelå±‚çš„è½¬æ¢ï¼Œæ‰‹å†™é€šè¿‡å­—å…¸valueForKey:ç›´æ¥è§£æå·²ç»æ›´ä¸ä¸Šæ—¶ä»£çš„æ­¥ä¼ï¼Œå­¦ä¼šåˆ©ç”¨å·¥å…·æé«˜è‡ªå·±çš„å·¥ä½œæ•ˆç‡ï¼Œä»Šå¤©å°±åˆ†äº«ä¸€ä¸‹Mantleè¿™ä¸ªæ¡†æ¶è§£æçš„å¿ƒå¾—ã€‚ Mantleè§£å†³çš„ç—›ç‚¹ï¼š æœåŠ¡å™¨ç»å¸¸æ›´æ–°ï¼ˆæ·»åŠ æˆ–è€…åˆ é™¤ï¼‰å­—æ®µï¼Œå®¢æœç«¯éœ€è¦åœ¨Modelå±‚åˆå§‹åŒ–çš„æ—¶å€™ä¿®æ”¹å–å€¼å­—æ®µï¼Œæ˜“å‡ºé”™ï¼Œè€Œä¸”ç¹çã€‚ å®ç°è‡ªå®šä¹‰çš„Modelçš„åºåˆ—åŒ–ï¼Œä»¥ä¾¿å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ç°NSCodingåè®®ï¼Œåœ¨æ¨¡å‹å¤åˆ¶çš„æƒ…å†µä¸‹æ·»åŠ æˆ–è€…ä¿®æ”¹å­—æ®µéå¸¸éº»çƒ¦ã€‚ è‡ªå®šä¹‰çš„Modelçš„Copy,ä½ å¿…é¡»æ‰‹åŠ¨å®ç°NSCopyingåè®®,è€Œä¸”æ²¡æœ‰åŠæ³•ååºåˆ—åŒ–æˆJSONã€‚ Mantleå¾ˆå¥½çš„è§£å†³çš„ä»¥ä¸Šç—›ç‚¹ï¼š å®ç°äº†NSCopyingåè®®ã€‚ å®ç°äº†NSCodingåè®®ï¼Œå¯ä»¥é€šè¿‡NSKeyedArchiverå°†æ•°æ®å½’æ¡£åˆ°æœ¬åœ°ã€‚ æä¾›äº†isEqual:å’Œhashçš„é»˜è®¤å®ç°ã€‚ å¯ä»¥åœ¨Modelå’ŒJSONä¹‹é—´äº’ç›¸è½¬æ¢ã€‚ ä»¥ä¸€ä¸ªCATProfileæ¨¡å‹ç±»ä¸ºä¾‹ï¼Œæ¼”ç¤ºè¿™ä¸ªæ¡†æ¶æ€æ ·ä»¥ä¸€ç§éå¸¸ç®€å•çš„æ–¹å¼å°†ä¸€ä¸ªNSDictionaryå¯¹è±¡æ˜ å°„æˆä¸€ä¸ªObjective-C,åä¹‹äº¦ç„¶ã€‚ ä¸‹é¢çš„CATProfileæ¨¡å‹ 123456789&#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;Objective Cat&quot;, &quot;birthday&quot;: &quot;2013-09-12 13:29:36 +0100&quot;, &quot;website&quot;: &quot;http://objc.at&quot;, &quot;location&quot;: &#123; &quot;lat&quot;: &quot;48.2083&quot;, &quot;lon&quot;: &quot;16.3731&quot; &#125;, &quot;relationship_status&quot;: &quot;single&quot;, &quot;awesome&quot;: true&#125; ä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªMTLModelå­ç±»ä»£è¡¨ä»¥ä¸Šçš„Jsonå¯¹è±¡ã€‚ 1234567891011121314151617181920// CATProfile.htypedef NS_ENUM(NSInteger, CATRelationshipStatus) &#123; CATRelationshipStatusSingle = 0, CATRelationshipStatusInRelationship, CATRelationshipStatusComplicated&#125;;@interface CATProfile : MTLModel&lt;MTLJSONSerializing&gt;@property(strong, nonatomic) NSNumber *profileId;@property(strong, nonatomic) NSString *name;@property(strong, nonatomic) NSDate *birthday;@property(strong, nonatomic) NSURL *website;@property(nonatomic) CLLocationCoordinate2D locationCoordinate;@property(nonatomic) CATRelationshipStatus relationshipStatus;@property(nonatomic, getter=isAwesome) BOOL awesome;@end CATProfileç±»ç»§æ‰¿è‡ªMTLModelå¹¶ä¸”å®ç°äº†MTLJSONSerializingï¼Œåè®®è¦æ±‚å®ç°+JSONKeyPathsByPropertyKeyæ–¹æ³• 12345678910111213141516// CATProfile.m@implementation+ (NSDictionary *)JSONKeyPathsByPropertyKey &#123; // properties defined in header &lt; : &gt; key in JSON Dictionary return @&#123; @&quot;profileId&quot;: @&quot;id&quot;, @&quot;websiteURL&quot;: @&quot;website&quot;, @&quot;locationCoordinate&quot;: @&quot;location&quot;, @&quot;relationshipStatus&quot;: @&quot;relationship_status&quot;, &#125;;&#125;@end +JSONKeyPathsByPropertyKeyæ–¹æ³•è¿”å›ä¸€ä¸ªåœ¨JSONæ•°æ®ä¸­éœ€è¦æ¨¡å‹çš„å±æ€§åŒ¹é…çš„å€¼çš„å­—å…¸ï¼Œè¿™èƒ½ç¡®ä¿MantleçŸ¥é“é‚£ä¸ªJSONé”®é”®ä½¿ç”¨æ¥æ„æˆä¸€ä¸ªæŒ‡å®šçš„æ¨¡å‹æ¥å£ã€‚ å¾ˆæ˜æ˜¾é™¤äº†è¿™ä¸ªåˆ—è¡¨ä¸­çš„name,birthdayå’Œawesomeå±æ€§ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§åœ¨å­—å…¸ä¸­è¢«å¿½ç•¥ï¼ŒMantleå°†è‡ªåŠ¨åœ¨JSONä¸­æŸ¥æ‰¾å¸¦æœ‰ç›¸åŒåç§°çš„æ¥å£ã€‚ NSValueTransformer Mantleè¿˜èƒ½å¤Ÿå¤„ç†ä»»æ„ç±»å‹çš„è½¬æ¢ï¼Œä¾‹å¦‚NSStringheNSNumberé»˜è®¤æ”¯æŒã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿéœ€è¦ä¸€äº›å¸®åŠ©å¯¹äºå¤„ç†éä»»æ„çš„ç±»å‹ä¾‹å¦‚NSURLå’Œæšä¸¾è¿˜æœ‰è‡ªå®šä¹‰çš„ç»“æ„ä½“åƒCLLocationCoordinate2Dã€‚ Mantleä¾èµ–Foundationæ¡†æ¶ä¸‹NSValueTransformerå¯¹è±¡æ¥å®ç°åœ¨æ¨¡å‹ä»£è¡¨çš„JSONå±‚å’ŒOCå¯¹è±¡çš„å®é™…æ¥å£ä¹‹é—´çš„å€¼çš„æ˜ å°„ã€‚ åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰transformerç»™æŸä¸ªå±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå«åš+&lt;propertyName&gt;JSONTransformerçš„ç±»æ–¹æ³•å¹¶ä¸”è¿”å›ä¸€ä¸ªæƒ³è¦çš„NSValueTransformerå¯¹è±¡ã€‚ 12345678910111213141516// mapping birthday to NSDate and vice-versa+ (NSValueTransformer *)birthdayJSONTransformer &#123; return [MTLValueTransformer reversibleTransformerWithForwardBlock:^(NSString *dateString) &#123; return [self.dateFormatter dateFromString:dateString]; &#125; reverseBlock:^(NSDate *date) &#123; return [self.dateFormatter stringFromDate:date]; &#125;];&#125;+ (NSDateFormatter *)dateFormatter &#123; NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@&quot;en_US_POSIX&quot;]; dateFormatter.dateFormat = @&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm:ss.SSS&#x27;Z&#x27;&quot;; return dateFormatter;&#125; Mantleåœ¨runtimeè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å†³å®šæ€æ ·å˜æ¢**birthday **å±æ€§ï¼Œæ­£å‘è½¬æ¢blockä»ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡åˆ°ä¸€ä¸ªNSDateå¯¹è±¡ï¼Œåå‘è½¬æ¢blockå°†NSDateå¯¹è±¡è½¬æ¢å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œéå¸¸æ£’ï¼ ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å˜æ¢æ–¹æ³•ï¼Œå¯¹äºæ‰€æœ‰çš„æˆ‘ä»¬éœ€è¦æ³¨æ„çš„éä»»æ„å±æ€§ä»¥ä¾›å‚è€ƒã€‚ NSURL â†”ï¸ JSON string123+ (NSValueTransformer *)websiteURLJSONTransformer &#123; return [NSValueTransformer valueTransformerForName:MTLURLValueTransformerName];&#125; CLLocationCoordinate2D â†”ï¸ JSON object12345678910+ (NSValueTransformer *)locationCoordinateJSONTransformer &#123; return [MTLValueTransformer reversibleTransformerWithForwardBlock:^(NSDictionary *coordinateDict) &#123; CLLocationDegrees latitude = [coordinateDict[@&quot;lat&quot;] doubleValue]; CLLocationDegrees longitude = [coordinateDict[@&quot;lon&quot;] doubleValue]; return [NSValue valueWithMKCoordinate:CLLocationCoordinate2DMake(latitude, longitude)]; &#125; reverseBlock:^(NSValue *coordinateValue) &#123; CLLocationCoordinate2D coordinate = [coordinateValue MKCoordinateValue]; return @&#123;@&quot;lat&quot;: @(coordinate.latitude), @&quot;lon&quot;: @(coordinate.longitude)&#125;; &#125;];&#125; enum â†”ï¸ JSON string1234567+ (NSValueTransformer *)relationshipStatusJSONTransformer &#123; return [NSValueTransformer mtl_valueMappingTransformerWithDictionary:@&#123; @&quot;single&quot;: @(CATRelationshipStatusSingle), @&quot;relationship&quot;: @(CATRelationshipStatusInRelationship), @&quot;complicated&quot;: @(CATRelationshipStatusComplicated) &#125;];&#125; BOOL â†”ï¸ JSON boolean123+ (NSValueTransformer *)awesomeJSONTransformer &#123; return [NSValueTransformer valueTransformerForName:MTLBooleanValueTransformerName];&#125; ä»JSONåˆ›å»ºæ¨¡å‹å¯¹è±¡ä¸€æ—¦æ¨¡å‹é…ç½®å®Œæˆï¼Œå°±è¯¥è·å¾—JSONå¯¹è±¡ä»APIä¸­ï¼Œå¹¶ä¸”æŠŠå®ƒè½¬æ¢æˆæˆ‘ä»¬æ¨¡å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠJSONå‘ˆç°è½¬æ¢æˆä¸€ä¸ªNSDictionary,å®ƒèƒ½å¤Ÿç”¨æ¥é€šè¿‡Mantleæ¥åˆ›å»ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œå¾ˆå¹¸è¿çš„æ˜¯iOSæä¾›äº†ä¸€ä¸ªéå¸¸æ£’çš„æ–¹æ³•æ¥å¤„ç†å®ƒï¼Œå°±æ˜¯é€šè¿‡NSJSONSerializationã€‚ é‚£æ ·ä»¥åï¼ŒMTLJSONAdapterç±»å°±èƒ½åˆ©ç”¨Mantleåšç¹é‡çš„å·¥ä½œæ¥åˆ›å»ºæˆ‘ä»¬çš„æ¨¡å‹ã€‚ 123456// create NSDictionary from JSON dataNSData JSONData = ... // the JSON response from the APINSDictionary *JSONDict = [NSJSONSerialization JSONObjectWithData:JSONData options:0 error:NULL];// create model object from NSDictionary using MTLJSONSerialisationCATProfile *profile = [MTLJSONAdapter modelOfClass:CATProfile.class fromJSONDictionary:JSONDict error:NULL]; ä»æ¨¡å‹å¯¹è±¡åˆ›å»ºJSONMTLJSONAdapterä¹Ÿæœ‰èƒ½åŠ›åˆ›å»ºä¸€ä¸ªå­—å…¸ä»æˆ‘ä»¬çš„çš„æ¨¡å‹ç±»ä¸­ï¼Œä»¥ä¾¿èƒ½ç›´æ¥ç¼–ç å›ä¸€ä¸ªJSONå­—ç¬¦ä¸²ã€‚ 123456// create NSDictionary from model class using MTLJSONSerialisationCATProfile *profile = ...NSDictionary *profileDict = [MTLJSONAdapter JSONDictionaryFromModel:profile];// convert NSDictionary to JSON dataNSData *JSONData = [NSJSONSerialization dataWithJSONObject:profileDict options:0 error:NULL]; å‡å¦‚å½“åˆ›å»ºä¸€ä¸ªJSONå‘ˆç°ä½ çš„æ¨¡å‹æ˜¯åœ¨ä½ çš„æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªå±æ€§ä¸åº”è¯¥åŒ…æ‹¬ï¼Œä½ åº”è¯¥è¿”å›NSNull.null,ä¾‹å¦‚ã€‚åœ¨+JSONKeyPathsByPropertyKeyçš„@{â€œnameâ€ : â€œNSNull.nullâ€}ã€‚Mantleå°†å®‰å…¨çš„å¿½ç•¥è¿™ä¸ªå±æ€§ã€‚ æ˜ å°„æ•°ç»„å’Œå­—å…¸å¤§å¤šæ•°æƒ…å†µï¼Œæ¨¡å‹å’Œå…¶ä»–æ¨¡å‹æœ‰å…³ç³»ï¼Œè¿™äº›å…³ç³»æ™®éé€šè¿‡JSONæ•°ç»„æˆ–è€…å¯¹è±¡æ¥å‘ˆç°ã€‚ 1234567891011121314151617181920&#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;Objective Cat&quot;, ..., &quot;owner&quot;: &#123; &quot;id&quot;: 99, &quot;name&quot;: &quot;Alexander Schuch&quot; &#125;, &quot;friends&quot;: [ &#123; &quot;name&quot;: &quot;Owly&quot;, &quot;type&quot;: &quot;bird&quot; &#125;, &#123; &quot;name&quot;: &quot;Hedgy&quot;, &quot;type&quot;: &quot;mammal&quot; &#125; ]&#125; Mantleæ”¯æŒæ˜ å°„è¿™äº›å…³ç³»åˆ°æ–°çš„æ¨¡å‹ï¼Œä¸ºäº†è®©MantleçŸ¥é“æ€æ ·å˜æ¢å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æä¾›çš„åˆ†ç±»æ–¹æ³•ä¸­çš„ä¸€ä¸ªæ¥è¿”å›NSValueTransformerã€‚ 12+ (NSValueTransformer *)mtl_JSONDictionaryTransformerWithModelClass:(Class)modelClass;+ (NSValueTransformer *)mtl_JSONArrayTransformerWithModelClass:(Class)modelClass; å½“ç„¶Mantleéœ€è¦çŸ¥é“è¿™äº›å®˜å’Œä»–ä»¬çš„å°†è¦è½¬æ¢çš„MTLModelå­ç±»ï¼Œå°±åƒå’Œåˆ›å»ºä¸€ä¸ªæ–°çš„MTLModelå­ç±»å¹¶ä¸”å®ç°å°†è¦æ˜ å°„åˆ°è¿™äº›å¯¹è±¡çš„MTLJSONSerializingåè®®ä¸€æ ·ç®€å•ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€äº›æ–°çš„å±æ€§åˆ°æˆ‘ä»¬CATProfileç±»ä¸­å¹¶ä¸”å®ç°ä¸¤ä¸ªæ–°çš„è½¬æ¢å™¨ã€‚ 123456789101112// CATProfile.h@property(strong, nonatomic) CATOwner *owner; // CATOwner is a MTLModel subclass@property(strong, nonatomic) NSArray *friends; // Array of CATFriend objects// CATProfile.m+ (NSValueTransformer *)ownerJSONTransformer &#123; return [NSValueTransformer mtl_JSONDictionaryTransformerWithModelClass:CATOwner.class];&#125;+ (NSValueTransformer *)friendsJSONTransformer &#123; return [NSValueTransformer mtl_JSONArrayTransformerWithModelClass:CATFriend.class];&#125; ä¸€äº›æœ‰ç”¨çš„è¡¥å……æˆ‘ä»¬ç®€å•çš„èŠäº†ä¸€ä¸‹NSValueTransformeråœ¨å‰é¢,NSValueTransformeræœ‰ä¸€ä¸ªéå¸¸æ£’çš„ç‰¹å¾è®©é€šè¿‡åå­—å…¨å±€æ³¨å†Œä¸€ä¸ªå˜æ¢å™¨æˆä¸ºå¯èƒ½ã€‚å‡å¦‚ä½ æ­£åœ¨ä½¿ç”¨ç›¸åŒçš„å˜æ¢å™¨åœ¨ä½ æ•´ä¸ªappä¸­ï¼Œç¡®ä¿å­ç±»åŒ–NSValueTransformerï¼Œæ³¨å†Œä½ çš„è‡ªå®šä¹‰å˜æ¢å™¨ä¸€æ¬¡å¹¶ä¸”åœ¨ä½ éšåçš„MTLModelsä¸­ä½¿ç”¨å®ƒã€‚ 12345678910111213141516// In CATProfile.mNSString * const kCATCustomValueTransformerName = @&quot;CATCustomValueTransformer&quot;;+ (void)initialize&#123; // Register NSValueTransformer if (self == CATProfile.class) &#123; CATCustomValueTransformer *transformer = [CATCustomValueTransformer new]; [NSValueTransformer setValueTransformer:transformer forName:kCATCustomValueTransformerName]; &#125;&#125;// Then use the custom transformer to translate properties using Mantle+ (NSValueTransformer *)whateverPropertyJSONTransformer &#123; return [NSValueTransformer valueTransformerForName:kCATCustomValueTransformerName];&#125; ç»“è®ºMantleæ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è¡¥å……å¤„ç†JSONAPIsï¼Œç„¶è€Œï¼Œä½ ä¹Ÿå¿…é¡»æ„è¯†åˆ°å‡å¦‚ä½ ä¸å¾—ä¸å¤„ç†éå¸¸å¤æ‚çš„æ•°æ®æˆ–è€…ä¸ç¨³å®šçš„APIså®ƒä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚ å‚è€ƒèµ„æ–™ Mantle-Cat Mantle Framework on Github NSValueTransformer at NSHipster Mantle as a Model Layer for iOS and OS X Apps iOS JSON æ¨¡å‹è½¬æ¢åº“è¯„æµ‹","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"4ç§æ–¹å¼å®ç°iOSæ¨¡ç³Šæ•ˆæœ","slug":"2016-01-31-3chong-fang-shi-shi-xian-iosmo-hu-xiao-guo","date":"2016-01-31T15:12:52.000Z","updated":"2024-11-02T03:36:52.405Z","comments":true,"path":"2016/01/31/2016-01-31-3chong-fang-shi-shi-xian-iosmo-hu-xiao-guo/","permalink":"https://blog.wangruofeng007.com/2016/01/31/2016-01-31-3chong-fang-shi-shi-xian-iosmo-hu-xiao-guo/","excerpt":"","text":"ä»‹ç»iOSä¸­ä»¥ä¸‹å››ç§æ–¹å¼å®ç°ï¼š CoreImageä¸­çš„æ¨¡ç³Šæ»¤é•œ UIImage + ImageEffectsçš„categoryæ¨¡ç³Šæ•ˆæœ iOS8ä¸­UIVisualEffectViewæ¨¡ç³Šæ•ˆæœ iOS7ä»¥åé€šè¿‡UIToolBarå®ç°æ¨¡ç³Šæ•ˆæœ CoreImageä¸­çš„æ¨¡ç³Šæ»¤é•œå®ç°CoreImageä¸»è¦é€šè¿‡CIFilterè¿™ä¸ªç±»æ¥å®ç°ã€‚ è¿™ä¸ªç±»æ”¯æŒçš„æ»¤é•œå¤šè¾¾14ç±»ï¼Œæ¯ä¸ªç±»åˆç»†åˆ†å¤šæ¬¾æ»¤é•œï¼š CICategoryBlur CIBoxBlur CIDiscBlur CIGaussianBlur CIMaskedVariableBlur CIMedianFilter CIMotionBlur CINoiseReduction CIZoomBlur CICategoryColorAdjustment CIColorClamp CIColorControls CIColorMatrix CIColorPolynomial CIExposureAdjust CIGammaAdjust CIHueAdjust CILinearToSRGBToneCurve CISRGBToneCurveToLinear CITemperatureAndTint CIToneCurve CIVibrance CIWhitePointAdjust CICategoryColorEffect CICategoryCompositeOperation CICategoryDistortionEffect CICategoryGenerator CICategoryGeometryAdjustment CICategoryGradient CICategoryHalftoneEffect CICategoryReduction CICategorySharpen CICategoryStylize CICategoryTileEffect CICategoryTransition æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯é«˜æ–¯æ¨¡ç³Šï¼Œä¹Ÿå°±æ˜¯CIGaussianBlurã€‚ Sample Codeï¼š 1234567891011121314151617181920212223242526272829303132333435UIImage *avatar = [UIImage imageNamed:@&quot;avatar&quot;];/********** CoreImage ************/// CIImageCIImage *ciImage = [[CIImage alloc] initWithImage:avatar];// CIFilterCIFilter *blurFilter = [CIFilter filterWithName:@&quot;CIGaussianBlur&quot;];// è®¾ç½®æ¨¡ç³Šæ»¤é•œåŠå¾„[blurFilter setValue:@(20) forKey:@&quot;inputRadius&quot;];// å°†å›¾ç‰‡è¾“å…¥åˆ°æ»¤é•œ[blurFilter setValue:ciImage forKey:kCIInputImageKey];// å°†å¤„ç†å¥½çš„å›¾ç‰‡è¾“å‡ºCIImage *outCiImage = [blurFilter valueForKey:kCIOutputImageKey];// æŸ¥è¯¢å¯ä»¥è®¾ç½®çš„å‚æ•°å’Œä¸€äº›ä¿¡æ¯NSLog(@&quot;%@&quot;,[blurFilter attributes]);// CIContextCIContext *contex = [CIContext contextWithOptions:nil];// è·å–CGImageå¥æŸ„CGImageRef outCGImage = [contex createCGImage:outCiImage fromRect:[outCiImage extent]];// æœ€ç»ˆè·å–åˆ°å›¾ç‰‡UIImage *blurImage = [UIImage imageWithCGImage:outCGImage];// é‡Šæ”¾CGImageå¥æŸ„CGImageRelease(outCGImage); æ­¤æ—¶blurImageå›¾ç‰‡å°±æ˜¯ç»è¿‡æ»¤é•œå¤„ç†åçš„å›¾ç‰‡ï¼Œåœ¨æ”¾åœ¨ImageViewä¸ŠåŠ è½½å³å¯çœ‹åˆ°æ•ˆæœã€‚ UIImage + ImageEffectsçš„categoryæ¨¡ç³Šæ•ˆæœä½¿ç”¨Appleå¼€æºçš„ä¸€ä¸ªå›¾ç‰‡å¤„ç†åˆ†ç±»æ¥å®ç°ï¼Œè¿™ä¸ªä½¿ç”¨èµ·æ¥åªéœ€ä¸€è¡Œä»£ç ï¼Œç®€æ´æ˜äº†ã€‚ 123UIImage *blurImage = [sourceImage blurImage]; è¿™é‡Œå°è£…äº†ä¸€ä¸ªåŒºåŸŸæ¨¡ç³Šæ•ˆæœçš„æ–¹æ³• 123- (UIImage *)blurImageAtFrame:(CGRect)frame; iOS8ä¸­UIVisualEffectViewæ¨¡ç³Šæ•ˆæœè¿™ä¸ªæ•ˆæœåªæ”¯æŒiOS8.0ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œé€šè¿‡UIVisualEffectViewæ¥å®ç°ã€‚ Sample Codeï¼š 12345678910// 1.åˆ›å»ºæ¨¡ç³Šview UIVisualEffectView *effectView = [[UIVisualEffectView alloc] initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleLight]]; // 2.è®¾ç½®å°ºå¯¸ effectView.frame = CGRectMake(0, 100, [UIScreen mainScreen].bounds.size.width, 200); // 3.æ·»åŠ åˆ°viewå½“ä¸­ [self.view addSubview:effectView]; ğŸ˜ŠBonus:å®ç°iOSé«˜ç‰ˆæœ¬é€šçŸ¥ä¸­å¿ƒç‚«é…·çš„Labelæ¨¡ç³Šæ•ˆæœã€‚ 12345678910111213141516171819202122// æ·»åŠ ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾ UILabel *label = [[UILabel alloc] initWithFrame:effectView.bounds]; label.text = @&quot;www.blog.wangruofeng007&quot;; label.textAlignment = NSTextAlignmentCenter; label.font = [UIFont systemFontOfSize:30]; [effectView.contentView addSubview:label]; /***************** æ·»åŠ æ¨¡ç³Šæ•ˆæœ *****************/ // 1.åˆ›å»ºå­æ¨¡ç³Šview UIVisualEffectView *subEffectView = [[UIVisualEffectView alloc] initWithEffect:[UIVibrancyEffect effectForBlurEffect:(UIBlurEffect *)effectView.effect]]; // 2.è®¾å®šå°ºå¯¸ subEffectView.frame = effectView.bounds; // 3.å°†å­æ¨¡ç³Šviewæ·»åŠ åˆ°effectViewçš„contenViewæ‰èƒ½ç”Ÿæ•ˆ [effectView.contentView addSubview:subEffectView]; // 4.æ·»åŠ è¦æ˜¾ç¤ºçš„viewæ¥è¾¾åˆ°ç‰¹æ®Šçš„æ•ˆæœ [subEffectView.contentView addSubview:label]; æ•ˆæœå›¾ï¼š Demoåœ°å€ï¼š BlurEffectDemo â€“ æœ¬æ–‡æ•ˆæœDemo UIVisualEffects_Objective-c â€“ è¯¦ç»†ä»‹ç»UIVisualEffectsçš„ä½¿ç”¨ iOS7ä»¥åé€šè¿‡UIToolBarå®ç°æ¨¡ç³Šæ•ˆæœåœ¨iOS7ä»¥åï¼ŒUINavigationBarå’ŒUIToolBarè‡ªå¸¦æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨åˆ›å»ºUIToolBarå¯¹è±¡ï¼Œç„¶åæ·»åŠ åˆ°viewä¸­å®ç°ï¼ŒUIToolBaråŒºåŸŸå°±å¯ä»¥å®ç°åŠ¨æ€æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœã€‚ ä¾‹å¦‚åœ¨ä¸€ä¸ªçŠ¶æ€æ åæ–¹æ·»åŠ ä¸€ä¸ªæ¨¡ç³Šview,å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­è¿™æ ·å®ç°ï¼Œå‡è®¾æ²¡æœ‰å¯¼èˆªæ  12UIToolbar *statusBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 20)];[self.view addSubview:statusBar]; è¿™ä¸ªæ–¹æ³•éå¸¸ç®€å•å®ç”¨ğŸ˜Šï¼Œå¿«å»è¯•è¯•å§ã€‚ å‚è€ƒèµ„æ–™ï¼š Core Image Programming Guide Core Image Filter Reference UIImageBlur","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"Watch App å¼€å‘ä¹‹ Interface Elements è¯¦è§£","slug":"2016-01-29-watch-app-kai-fa-zhi-interface-elements-xiang-jie","date":"2016-01-29T09:36:26.000Z","updated":"2024-11-02T03:36:52.405Z","comments":true,"path":"2016/01/29/2016-01-29-watch-app-kai-fa-zhi-interface-elements-xiang-jie/","permalink":"https://blog.wangruofeng007.com/2016/01/29/2016-01-29-watch-app-kai-fa-zhi-interface-elements-xiang-jie/","excerpt":"","text":"iWatchåŸç”Ÿæ€æ”¯æŒçš„æ§ä»¶ä¸»è¦æœ‰ä»¥ä¸‹ç±»å‹,ä¸‹é¢å¯¹æ¯ä¸ªç±»å‹ä¸€ä¸€è§£åˆ¨ã€‚ Labels Images Groups Pickers Tables Buttons Switches Sliders Maps Movies Date and Timer Labels Menus Labels â€“ WKInterfaceLabelLabelsä½¿ç”¨é™æ€çš„æ–‡æœ¬æ¥ä¼ è¾¾ç®€çŸ­çš„æ¶ˆæ¯ï¼Œæ˜¯ä½ Appä¸­æœ€å¸¸è§çš„ä¸€ä¸ªå…ƒç´ ä¹‹ä¸€ã€‚å®ƒèƒ½æ”¯æŒå¤šè¡Œæ˜¾ç¤ºä¹Ÿå¯é€šè¿‡ä»£ç åŠ¨æ€æ›´æ–°å†…å®¹ã€‚ iWatch,è®¾è®¡ä¸€ä¸ªæ ‡ç­¾äº‹ï¼Œé¦–å…ˆåº”è¯¥æŠŠç²¾åŠ›é›†ä¸­åœ¨æ˜“è¯»æ€§,ä½¿ç”¨æ›´äº®çš„é¢œè‰²å’Œä½¿ç”¨åŠ¨æ€ç±»å‹ï¼ˆ Dynamic Typeï¼‰æ¥ä¿è¯æ–‡æœ¬å°ºå¯¸çš„æ­£ç¡®ï¼Œå†…ç½®å·²ç»æä¾›äº†æœ€ä½³çš„æ˜“è¯»æ€§å’Œè‡ªåŠ¨çš„åŠ¨æ€çš„ç±»å‹æ”¯æŒã€‚å‡å¦‚éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„å­—ä½“ï¼Œåº”è¯¥é¿å…ä½¿ç”¨è¿‡åº¦æ ¼å¼åŒ–çš„ã€‚ æ›´å¤šä¿¡æ¯æŸ¥çœ‹ï¼šTypography Images â€“ WKInterfaceImageä¸€ä¸ªImageå…ƒç´ ç”¨æ¥æ˜¾ç¤ºå•å¼ å›¾ç‰‡æˆ–è€…ä¸€ç³»åˆ—åŠ¨ç”»å›¾ç‰‡ã€‚Imagesæ”¯æŒåœ¨iOSä¸Šçš„çš„ä»»ä½•æ ¼å¼ï¼Œä½†æ˜¯è·Ÿåå‘äºPNGæ ¼å¼ã€‚åŠ¨ç”»ç³»åˆ—å›¾ç‰‡å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶å¯åœã€‚ 38mmå’Œ42mmå…±ç”¨ä¸€å¥—å›¾ç‰‡èµ„æºï¼Œåªè¦å†…å®¹èƒ½å¤Ÿè¡¨è¾¾æ¸…æ™°ã€‚ Apple Watchæ”¯æŒé«˜æ¸…å±æ˜¾ç¤ºï¼Œæ‰€æœ‰æ²¡æœ‰å¿…è¦åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„åˆ†è¾¨ç‡å›¾ç‰‡ï¼Œåœ¨å›¾ç‰‡ååº”è¯¥åŒ…æ‹¬@2xã€‚ å½“å›¾ç‰‡æ­£åœ¨åŠ è½½æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å ä½å›¾ç‰‡æ¥å æ®å®ƒçš„ç©ºé—´ã€‚ ä¼˜åŒ–å›¾ç‰‡æŸ¥çœ‹ï¼šImage Optimizations Groups â€“ WKInterfaceGroupGroupè¿™ä¸ªæ¦‚å¿µæ˜¯ä¸“ä¸ºæœ‰é™ç©ºé—´çš„iWatchæ‰“é€ çš„ï¼Œå¯ä»¥å¸®ä½ å¯¹å…¶ä»–å…ƒç´ è¿›è¡Œå¸ƒå±€ã€‚å®ƒæœ‰postion,size,marignsä»¥åŠå…¶ä»–å¸ƒå±€ç›¸å…³çš„æ¥å£ï¼Œä¸€ä¸ªGroupå¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯è§çš„å…ƒç´ ï¼Œå®ƒä¹Ÿæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œé¢œè‰²ï¼Œåœ†è§’åŠå¾„ç­‰å±æ€§ã€‚ æ”¯æŒæ°´å¹³horizontallyå’Œå‚ç›´verticallyå¸ƒå±€ï¼Œå¯ä»¥è®©æ”¾åœ¨é‡Œé¢çš„é¡¹ç›®å®ç°ç›¸åº”çš„å¸ƒå±€ï¼Œå¯ä»¥ä½¿ç”¨spacingå±æ€§æ¥è®¾ç½®å†…éƒ¨é¡¹ç›®ä¹‹é—´çš„é—´è·ï¼Œä½¿ç”¨marginsæ¥æ§åˆ¶Groupå’Œå®ƒå‘¨è¾¹çš„å…ƒç´ çš„è·ç¦»ã€‚ Groupæ”¯æŒé•¶åµŒæ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡é•¶åµŒæ¥æŒ‡å®šä½ æƒ³è¦çš„å¸ƒå±€æ ·å¼ã€‚ ä½ åº”è¯¥ä¼˜åŒ–ä½ çš„Groupçš„èƒŒæ™¯å›¾ç‰‡æ¥è·å¾—æ›´å¥½çš„ä½“éªŒï¼Œå› ä¸ºå¤ªå¤§å¯èƒ½ä½¿ä½ çš„Appå˜å¾—å¡é¡¿ã€‚ä¼˜åŒ–è¯·å‚è€ƒï¼šImage Optimizations å¤–è§‚å¤§æ¦‚è¿™æ ·: Pickers â€“ WKInterfacePickerPickersèƒ½å¤Ÿæ˜¾ç¤ºä¸€ä¸ªå¯ä»¥ä½¿ç”¨æ•°å­—è¡¨å† å¯¼èˆªçš„åˆ—è¡¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ç²¾ç¡®å’Œè¿·äººçš„æ–¹å¼é€‰æ‹©ã€‚Pickerså¯ä»¥é€šè¿‡ä¸‹é¢ä¸‰ç§æ–¹å¼çš„ä¸€ç§æ¥å±•ç¤ºå®ƒä»¬çš„é¡¹ç›®ï¼š List style,å¯ä»¥æ˜¾ç¤ºæ–‡æœ¬æˆ–è€…å›¾ç‰‡åœ¨ä¸€ä¸ªæ»šåŠ¨åˆ—è¡¨é‡Œé¢ Stack style,æ ˆé£æ ¼ä»¥ä¸€ä¸ªå¡ç‰‡é£æ ¼çš„ç•Œé¢æ˜¾ç¤ºå›¾ç‰‡ï¼Œå½“ç”¨æˆ·æ»šåŠ¨ï¼Œè¢«é€‰æ‹©çš„å›¾ç‰‡åŠ¨ç”»è¿›å…¥æœ€ä¸Šæ–¹ï¼Œè¿™ç§é£æ ¼é€‚åˆæµè§ˆç…§ç‰‡ã€‚ Sequence style,åºåˆ—æ˜¾ç¤ºï¼Œå¯ä»¥æ˜¾ç¤ºä¸€ç³»åˆ—çš„å›¾ç‰‡ã€‚å½“ç”¨æˆ·è½¬åŠ¨è¡¨å† æ—¶ï¼ŒPickeræ˜¾ç¤ºå…ˆå‰æˆ–ä¸‹ä¸€å¼ å›¾ç‰‡åœ¨è¿™ä¸ªåºåˆ—ä¸­æ²¡æœ‰åŠ¨ç”»ï¼Œè¿™ç§é£æ ¼é€‚åˆäºæ„å»ºè‡ªå®šä¹‰çš„ç•Œé¢ä½¿ç”¨ä½ è‡ªå·±çš„å›¾ç‰‡ã€‚ Pickersè¿˜èƒ½è¢«é…ç½®æˆæ˜¾ç¤ºä¸€ä¸ªè½®å»“ï¼Œæ ‡é¢˜ï¼Œæ»šåŠ¨æŒ‡ç¤ºå™¨ã€‚è¿™äº›å…ƒç´ å¯ä»¥è®©ä½ åˆ†è¾¨å‡ºå±å¹•ä¸Šçš„Pickerså¹¶ä¸”å¯ä»¥å¸®åŠ©ç”¨æˆ·å¯¼èˆªå®ƒçš„å†…å®¹ã€‚ ä½¿ç”¨æ ‡é¢˜æ¥æŒ‡æ˜ä½ é€‰æ‹©é¡¹ç›®çš„æ„ä¹‰æˆ–è€…pickeræœ¬èº«çš„ä½œç”¨ ä½ å¯ä»¥ç»™é¡¹ç›®æŒ‡å®šä¸€ä¸ªç‹¬ç‰¹çš„æ ‡é¢˜å½“é‚£äº›é¡¹ç›®çš„æ„æ€è¡¨è¾¾ä¸æ¸…æ™°çš„æ—¶å€™ï¼Œå¯é€‰ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®æ‰€æœ‰çš„é¡¹ç›®ç›¸åŒçš„æ ‡é¢˜æ¥æ ‡æ˜Pickerå®ƒæœ¬èº«çš„ä½œç”¨ã€‚ æ˜¾ç¤ºä¸€ä¸ªæ»šåŠ¨æŒ‡ç¤ºå™¨å½“æ‰€æœ‰çš„å†…å®¹ä¸æ˜¯å…¨éƒ¨å¯è§æ—¶ Tabels â€“ WKInterfaceTableTabelsåœ¨ä¸€åˆ—ä¸­å±•ç¤ºå¤šè¡Œçš„å†…å®¹ã€‚ä¸€ä¸ªè¡¨çš„ä¸€è¡Œæ˜¯åŠ¨æ€é…ç½®çš„ï¼Œå®ƒçš„å†…å®¹å¯ä»¥åœ¨éšæ—¶æ”¹å˜ã€‚Tabelså¤©ç”Ÿå¯æ»šåŠ¨ï¼Œæ”¯æŒå„ç§äº¤äº’ï¼Œèƒ½å¤Ÿè®¾ç½®èƒŒæ™¯é¢œè‰²æˆ–è€…å›¾ç‰‡ã€‚ ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š ç»Ÿä¸€ä½¿ç”¨è¡Œçš„é£æ ¼ç±»å‹ï¼Œå³ä½¿ä¸€ä¸ªè¡¨å¯ä»¥åŒ…å«å¤šè¡Œï¼Œå®ƒåº”è¯¥å‘ˆç°ä¸€ä¸ªå…¨å±€ç»Ÿä¸€çš„å¤–è§‚ï¼Œæ¯ä¸€è¡Œä½¿ç”¨ä½ çš„ä¸»è¦å†…å®¹å¼€å§‹ï¼Œç„¶åéšä½ çš„éœ€è¦æ·»åŠ æ›´å¤šæ”¯æŒçš„å…¶ä»–ç±»å‹çš„å†…å®¹ï¼Œä¾‹å¦‚headersæˆ–è€…footers,æ€»æ˜¯ç”¨åŸæ¥è®¾è®¡çš„ç›®çš„æ¥ä½¿ç”¨è¡Œç±»å‹ã€‚ä¾‹å¦‚ï¼Œä½ ä¸åº”è¯¥ç”¨ä¸€è¡Œæ¥æ˜¾ç¤ºheadersæˆ–footersçš„å†…å®¹ã€‚ é™åˆ¶è¡Œæ•°æœ€å¤§20ï¼Œæ˜¾ç¤ºæœ€é‡è¦çš„è¡Œåœ¨é¡¶éƒ¨ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæµè§ˆå°½å¯èƒ½çš„å¤šã€‚è¡Œæ•°è¶Šå°‘è¶Šå®¹æ˜“å¿«é€Ÿæµè§ˆã€‚ ä¸è¦åœ¨groupsé‡Œé¢é•¶åµŒtables,Tabelsä¼šåŠ¨æ€æ”¹å˜å®ƒçš„å°ºå¯¸åŸºäºå®ƒæ‰€åŒ…å«çš„è¡Œçš„æ•°ç›®ã€‚å®ƒä¼šå¿½ç•¥groupså¯¹é«˜åº¦çš„é™åˆ¶ã€‚ ä¸è¦åœ¨tableè¡Œå†…åŒ…å«âˆ§æˆ–è€…âˆ¨ç¬¦å·ï¼Œè¡Œåå°å®ç°å¯ä»¥è‡ªç„¶ç‚¹å‡»ï¼Œä½ ä¸éœ€è¦åŒ…å«ä¸€ä¸ªâˆ§æˆ–è€…âˆ¨ç¬¦å·æˆ–è€…æ–‡å­—æ¥è¡¨æ˜è¡Œæ˜¯å¯ç‚¹å‡»çš„ã€‚ Buttons â€“ WKInterfaceButtonä¸€ä¸ªbuttonå¯ä»¥æ‰§è¡Œä¸€ä¸ªappæŒ‡å®šçš„åŠ¨ä½œï¼Œbuttonå¯ä»¥è‡ªå®šèƒŒæ™¯å’Œåœ†è§’åŠå¾„ã€‚å®ƒè¿˜å¯ä»¥å……å½“å®¹å™¨ä½¿ç”¨ï¼ŒåŒ…å«ä¸€ä¸ªæ ‡ç­¾labe;ï¼Œå›¾ç‰‡imageï¼Œæˆ–è€…ä¸€ä¸ªç»„groupå¯¹è±¡ã€‚ ä½¿ç”¨äº‹é¡¹ï¼š åˆ›å»ºæ¨ªè·¨å±å¹•çš„Buttons ï¼Œå…¨å®½çš„buttonsçœ‹èµ·æ¥æ›´å®¹æ˜“ç‚¹å‡»ï¼Œå‡å¦‚æœ‰ä¸¤ä¸ªbuttonsï¼Œå¿…é¡»æœ‰ç›¸åŒçš„æ°´å¹³é—´è·ï¼Œä¸¤è€…ä½¿ç”¨ç›¸åŒçš„é«˜åº¦ä½¿ç”¨ç›¸åŒçš„å›¾æˆ–è€…ç®€çŸ­çš„æ–‡æœ¬æ ‡ç­¾ã€‚ ä½¿ç”¨ç›¸åŒçš„é«˜åº¦å¯¹äºvertical stacksé£æ ¼å¸ƒå±€ä¸€è¡Œå’Œä¸¤è¡Œæ–‡æœ¬æŒ‰é’®ï¼ŒåŸåˆ™æ˜¯ï¼Œå°½å¯èƒ½çš„ï¼Œä½¿ç”¨ä¸€è‡´åˆ°é«˜åº¦è®©ä»–ä»¬åœ¨è§†è§‰ä¸Šç»Ÿä¸€ã€‚ ä½¿ç”¨æ ‡å‡†çš„åœ†è§’åŠå¾„ï¼Œæ ‡å‡†çš„åœ†è§’åŠå¾„çš„æ˜¯6ç‚¹ï¼Œä½¿ç”¨æ ‡å‡†çš„åœ†è§’åŠå¾„å¯ä»¥æå‡æ•´ä¸ªappçš„è§†è§‰çš„ä¸€è‡´æ€§å¹¶ä¸”å¯ä»¥å¢å¼ºbuttonçš„å†…å®¹ã€‚ è®©butotnsè¶³å¤Ÿå¤§ä»¥ä¾¿å®¹æ˜“ç‚¹å‡»ï¼Œåˆ›å»ºè®©ç”¨æˆ·å¾ˆå®¹æ˜“ç‚¹å‡»çš„buttonï¼Œbuttonsåº”è¯¥éµå¾ªä¸‹é¢æœ€å°çš„å€¼ã€‚ 38mm (minimum) 42mm (minimum) Circular buttons 75 pixels 80 pixels Round rectangular buttons 50 pixels high 52 pixels high Switches â€“ WKInterfaceSwitchå¼€å…³æ§ä»¶æ›´iOSç±»ä¼¼ï¼Œè®©ç”¨æˆ·åœ¨é‡ä¸ªäº’æ–¥çš„é€‰æ‹©æˆ–è€…çŠ¶æ€ä¸­é€‰æ‹©ï¼Œä¾‹å¦‚å¼€æˆ–è€…å…³ï¼Œä¸€ä¸ªé è¿‘switchçš„æ ‡ç­¾åº”è¯¥æŒ‡å®šå“åº”çš„æ•ˆæœå½“ï¼Œå¼€å…³åˆ‡æ¢æ—¶ã€‚ æ•ˆæœåƒè¿™æ ·ï¼š Sliders â€“ WKInterfaceSliderä¸€ä¸ªæ»‘åŠ¨æ¡è®©ç”¨æˆ·æ¥è°ƒæ•´åˆ°æŸä¸€ä¸ªå€¼ã€‚ä¸€ä¸ªsliderç”¨æ¥æ˜¾ç¤ºå®ƒè®¾ç½®çš„ä¸€ç³»åˆ—çš„å€¼æˆ–è€…æ˜¯ä¸€ä¸ªæŒç»­çš„bar, å®ƒå¯ä»¥åœ¨ä¸€ä¸ªæœ‰é™çš„èŒƒå›´å†…æ ¹æ®é¢„å®šçš„æ•°é‡è‡ªå¢æˆ–è€…è‡ªå‡ã€‚ Noteï¼šä½ å¯ä»¥åƒä½¿ç”¨slideré‚£æ ·ä½¿ç”¨è‡ªå®šå›¾ç‰‡,ç³»ç»Ÿé»˜è®¤æ˜¾ç¤º+å’Œ-ç¬¦å·ã€‚ Maps â€“ WKInterfaceMapMapsæ˜¯åœ°ç†ä½ç½®çš„é™æ€å¿«ç…§ã€‚ä½ å¯ä»¥æ”¾ä¸€å¼ åœ°å›¾åœ¨ä½ çš„ç•Œé¢é‡Œé¢åœ¨é¢„è®¡çš„æ—¶é—´ï¼Œä½†æ˜¯ä½ WatchKit extensionå¿…é¡»é…ç½®æ˜¾ç¤ºçš„åŒºåŸŸåœ¨è¿è¡Œæ—¶ã€‚æ˜¾ç¤ºåŒºåŸŸæ˜¯ä¸å¯äº¤äº’çš„ï¼Œä½†æ˜¯ç‚¹å‡»ä¸€ä¸ªåœ°å›¾å°†ä¼šæ‰“å¼€ä½ Apple Watchä¸Šçš„Mapsappã€‚ ä½ å¯ä»¥åœ¨åœ°å›¾ä¸Šç”¨ä¸€ä¸ªé«˜äº®çš„ç‚¹å¯¹ä½ æ„Ÿå…´è¶£æˆ–è€…å…¶ä»–ç›¸å…³ä¿¡æ¯è¿›è¡Œæ ‡æ³¨ã€‚åœ°å›¾èƒ½æ˜¾ç¤ºæ ‡å‡†çš„çº¢ï¼Œé»„ï¼Œç»¿å¤§å¤´é’ˆï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„å›¾ç‰‡ï¼Œç³»ç»Ÿå…è®¸ä½ æœ€å¤šæ·»åŠ 5ä¸ªåœ¨ä¸€å¼ åœ°å›¾ä¸Šã€‚ ä½¿ç”¨æ³¨æ„å®ç°ï¼š è®©ä½ åœ°å›¾çš„å…ƒç´ æ ¹æ®å±å¹•è‡ªåŠ¨é€‚åº”ã€‚ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ•´ä¸ªåœ°å›¾å…ƒç´ åœ¨Apple Watchä¸Šè€Œä¸ç”¨æ»šåŠ¨å±å¹•ã€‚ é…ç½®æ˜¾ç¤ºçš„åœ°å›¾åŒºåŸŸåˆ°åŒ…å«å…´è¶£ç‚¹çš„æœ€å°èŒƒå›´ï¼Œåœ°å›¾å…ƒç´ å†…å®¹æœ¬èº«ä¸èƒ½æ»šåŠ¨ï¼Œæ‰€æœ‰æ‰€æœ‰å†…å®¹å¿…é¡»é™„ç€åœ¨ä¸€ä¸ªæŒ‡å®šçš„åœ°å›¾åŒºåŸŸ Movies â€“ WKInterfaceMovieä¸€ä¸ªmovieå¯¹è±¡ä¼šæ˜¾ç¤ºä¸€å¼ æµ·æŠ¥å›¾ç‰‡ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œæ¨¡æ€å‘ˆç°ä¸€ä»½è§†é¢‘æˆ–è€…éŸ³é¢‘å¯¹è±¡ï¼Œä½¿ç”¨è¿™ä¸ªå…ƒç´ æ¥æ”¾ç½®ç®€çŸ­çš„åª’ä½“å‰ªåˆ‡å’Œä½ å†…å®¹å†…è”ã€‚åª’æ–‡ä»¶çš„é‡æ”¾ç”±ç³»ç»Ÿæ¥ç®¡ç†ã€‚ ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š ä½¿ç”¨ä¸€ç§æµ·æŠ¥å›¾ç‰‡æ¥å‘ˆç°å‰ªåˆ‡çš„å†…å®¹ï¼Œæµ·æŠ¥å›¾ç‰‡èƒ½è®©ç”¨æˆ·æå‰åšå†³å®šæ˜¯å¦è§‚çœ‹ä¸è¿™ä¸ªå‰ªåˆ‡å…³è”çš„åª’ä½“ï¼Œä¸è¦ä½¿ç”¨æ²¡æœ‰æ„ä¹‰çš„å‰ªåˆ‡å›¾ç‰‡ã€‚ ä¸è¦åˆ›å»ºæµ·æŠ¥å›¾ç‰‡åƒç³»ç»Ÿæ§ä»¶ï¼ŒMoviesä¼šè®©è§†é¢‘å’ŒéŸ³é¢‘å†…å®¹çœ‹èµ·æ¥åƒä½ èŠ‚ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸è¦é€šè¿‡è®©ä»–ä»¬çœ‹èµ·æ¥åƒå…¶ä»–ä¸œè¥¿çš„æ–¹å¼æŠŠä»–ä»¬éšè—èµ·æ¥ã€‚ä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ªButtonï¼ˆè€Œä¸æ˜¯ä¸€ä¸ªmovieï¼‰æ¥å‘ˆç°åª’ä½“å›æ”¾ç•Œé¢å‡å¦‚ä½ å–œæ¬¢çš„è¯ã€‚ ä¿è¯è§†é¢‘æˆ–è€…éŸ³é¢‘å‰ªè¾‘å¾—è¶³å¤ŸçŸ­ï¼Œå‰ªè¾‘ä¸åº”è¯¥è¶…è¿‡30ç§’ï¼Œé¦–é€‰æ›´çŸ­çš„ã€‚é•¿çš„å‰ªè¾‘ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´å¹¶ä¸”è¦æ±‚ç”¨æˆ·ä¿æŒä»–ä»¬çš„æ‰‹è…•æŠ¬èµ·æ›´é•¿æ—¶é—´ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´ç–²åŠ³ã€‚ é€‚å½“çš„è®¾ç½®å‰ªè¾‘è§†é¢‘çš„å°ºå¯¸ï¼Œæ— è®ºæ—¶å€™éƒ½åº”è¯¥ä½¿ç”¨æ¨èçš„å°ºå¯¸æ¥å‰ªåˆ‡ï¼Œç¼©æ”¾è§†é¢‘å‰ªè¾‘å°†å½±å“æ€§èƒ½å¯¼è‡´ä¸ç†æƒ³çš„å¤–è§‚ã€‚æ›´å¤šä¿¡æ¯å…³äºæ¨èçš„å°ºå¯¸å’Œç¼–ç çš„å€¼ï¼Œå‚è€ƒAudio &amp; Video Date &amp; Timer Labels â€“ WKInterfaceDate,WKInterfaceTimerDate å’Œ Timer æ ‡ç­¾ç”¨æ¥æ˜¾ç¤ºçœŸå®çš„æ—¶é—´åœ¨Apple Watchä¸Šã€‚ ä¸€ä¸ªdate labelæ˜¾ç¤ºäº†ç°åœ¨çš„æ—¥æœŸï¼Œç°åœ¨çš„æ—¶é—´æˆ–è€…ä¸¤è€…çš„ç»„åˆã€‚å®ƒå¯ä»¥ä½¿ç”¨å„ç§æ ·å¼ï¼Œæ—¥å†å’Œæ—¶åŒºæ¥é…ç½®ï¼Œåœ¨ä½ é…ç½®å¥½åï¼Œæ—¥æœŸæ ‡ç­¾ç›´æ¥è·Ÿæ–°å®ƒçš„å€¼è€Œä¸éœ€è¦é€šè¿‡ä½ appçš„è¿›ä¸€æ­¥è¾“å…¥ã€‚ ä¸€ä¸ªtimer labelç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªç²¾å‡†çš„å€’è®¡æ—¶å’Œå’Œè®¡æ•°å®šæ—¶å™¨ã€‚å®ƒèƒ½å¤Ÿé…ç½®å®ƒæ˜¾ç¤ºçš„è®¡æ•°çš„å€¼ä»¥å„ç§å½¢å¼ï¼Œåœ¨ä½ é…ç½®å®Œæˆåï¼Œä¸€ä¸ªtimer labelèƒ½å¤Ÿè®¡æ•°æˆ–è€…å€’è®¡æ—¶ä¸ç”¨ä»ä½ çš„appçš„è¿›ä¸€æ­¥è¾“å…¥ã€‚ Menus â€“ WKMenuItemIconå¼ºåŠ›è§¦æ‘¸Apple Watchå°†è°ƒå‡ºå½“å‰å±å¹•çš„menuï¼ˆå‡å¦‚æœ‰ç‚¹è¯ï¼‰ã€‚ä¸€ä¸ªèœå•èƒ½å¤Ÿæ˜¾ç¤ºå¤šè¾¾4ä¸ªæœ‰å…³çš„åŠ¨ä½œå¯¹äºå½“å‰å±å¹•ï¼Œè€Œä¸ç”¨ä»ä½ çš„ç•Œé¢ç¦»å¼€ã€‚ ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š åŒ…å«ä¸€ä¸ªMenuå½“ç°åœ¨å±å¹•æœ‰ç›¸å…³çš„æ“ä½œçš„æ—¶å€™ï¼Œèœå•æ˜¯å¯é€‰çš„ã€‚å‡å¦‚æ²¡æœ‰èœå•å‘ˆç°ï¼Œç³»ç»Ÿå°†æ’­æ”¾ä¸€æ®µåŠ¨ç”»æ¥å“åº”ç”¨æˆ·çš„å¼ºåŠ›è§¦æ‘¸æ“ä½œã€‚ ä½¿ç”¨ä¸€ä¸ªlabelå’Œä¸€ä¸ªiconæ¥ä¼ è¾¾æ¯ä¸ªèœå•åŠ¨ä½œçš„æ„å›¾ï¼Œlabelå’Œiconéƒ½éœ€è¦ï¼Œlabelé™åˆ¶2è¡Œï¼Œæ‰€ä»¥æ–‡æœ¬åº”è¯¥å°½é‡çš„çŸ­ã€‚ ä½¿ç”¨èœå•æ¥å“åº”å®ƒä»¬é¢„æœŸçš„ç›®çš„ï¼ŒMenusæ˜¯ä¸€ç§èƒ½å¤Ÿä¿®æ”¹å½“å‰ç•Œé¢æ§åˆ¶å™¨å†…å®¹çš„æ–¹å¼ï¼Œä¸è¦ä½¿ç”¨å®ƒä»¬æ¥ä½œä¸ºä¸»è¦çš„å¯¼èˆªå½¢å¼åœ¨ä½ çš„appä¸­ã€‚ é¿å…å¤åˆ¶ä½ çš„å…¶ä»–appä¸­èœå•çš„è§†è§‰é£æ ¼ï¼Œå‡å¦‚ä½ å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç›¸ä¼¼çš„å¸ƒå±€ï¼ŒåŠ ä¸Šé¢œè‰²ç»™ä½ çš„ç•Œé¢æˆ–è€…æ’åˆ—çš„é¡¹ç›®ï¼Œç”¨ä¸€ç§ä¸åŒäºå…¶ä»–èœå•çš„æ–¹å¼ã€‚ æ›´å¤šmenu icons è®¾è®¡çš„ä¿¡æ¯ï¼Œå‚è€ƒ Menu Iconsã€‚ å‚è€ƒèµ„æ–™ï¼š human-interface-guidelines human-interface-guidelines Visual Design Apple WatchæŒ‡å— Best-apple-watch-apps","categories":[{"name":"Watch OS2","slug":"Watch-OS2","permalink":"https://blog.wangruofeng007.com/categories/Watch-OS2/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"iWatch","slug":"iWatch","permalink":"https://blog.wangruofeng007.com/tags/iWatch/"}]},{"title":"MVVMèµ„æ–™æ•´ç†","slug":"2016-01-20-mvvmzi-liao-zheng-li","date":"2016-01-20T14:59:16.000Z","updated":"2024-11-02T03:36:52.405Z","comments":true,"path":"2016/01/20/2016-01-20-mvvmzi-liao-zheng-li/","permalink":"https://blog.wangruofeng007.com/2016/01/20/2016-01-20-mvvmzi-liao-zheng-li/","excerpt":"","text":"MVVMï¼Œä½œä¸ºä¸€ç§æ–°çš„æ¶æ„è®¾è®¡ï¼Œæœ‰åˆ«äºMVCï¼ŒMVPï¼Œå®ƒæœ‰å¾ˆå¤šè‡ªå·±çš„ç‰¹æ€§å’Œä¼˜åŠ¿ï¼Œä¾‹å¦‚æ˜“äºè°ƒè¯•ï¼Œä¸šåŠ¡é€»è¾‘é›†ä¸­æ–¹ä¾¿ç®¡ç†ï¼Œç»Ÿä¸€å„ç§é€šä¿¡æœºåˆ¶ï¼Œå°†ä¸šåŠ¡å’Œæ§åˆ¶å™¨è§£è€¦ã€‚è¿™æ¡†æ¶ç°åœ¨å¾ˆå¤šå…¬å¸éƒ½åœ¨å°è¯•ä½¿ç”¨ï¼Œåƒç¾å›¢ç­‰ï¼Œä»¥åå¯èƒ½æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œé‰´äºå®ƒå­¦ä¹ æˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ­¤æ–‡æ„åœ¨è®°å½•å’Œæ”¶é›†ç›¸å…³çš„èµ„æ–™ï¼Œä»¥ä¾¿ä»¥åæŸ¥é˜…ã€‚ Githubåœ°å€ï¼šReactiveCocoa æ¯”è¾ƒä¸é”™çš„å­¦ä¹ èµ„æ–™ï¼š ReactiveCocoa è®¨è®ºä¼š â€“ å”å·§ MVVM without ReactiveCocoa â€“ limboy ReactiveCocoa â€“ ç¾å›¢ ReactiveCocoa v2.5 æºç è§£æä¹‹æ¶æ„æ€»è§ˆ â€“ é›·çº¯å³° Functorã€Applicative å’Œ Monad â€“ é›·çº¯å³° Principles of Reactive Programming â€“ è¿™é‡Œæœ‰ä¸€äº›è§†é¢‘è¯¾ç¨‹ï¼Œå¾ˆä¸é”™ ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 1&#x2F;2 ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 2&#x2F;2 MVVM Tutorial with ReactiveCocoa: Part 1&#x2F;2 MVVM Tutorial with ReactiveCocoa: Part 2&#x2F;2 Functional Reactive Programming on iOS â€“ è¿™æœ¬ä¹¦ä»‹ç»å‡½æ•°å¼ç¼–ç¨‹é…æœ‰ä¾‹å­ï¼Œå¯ä»¥å¿«é€Ÿç†è§£è¿™ç§æ€æƒ³ï¼Œå…¥é—¨çº§æ¨è Reactiveâ€‹Cocoa â€“ NSHipster ReactiveCocoa å…¥å‘ ing â€“ ç®€ä¹¦ ReactiveCocoaå­¦ä¹ èµ„æºæ”¶é›† â€“ ç®€ä¹¦ ReactiveCocoaå­¦ä¹ èµ„æ–™æ±‡æ€» â€“ ç®€ä¹¦","categories":[{"name":"èµ„æ–™æ”¶é›†","slug":"èµ„æ–™æ”¶é›†","permalink":"https://blog.wangruofeng007.com/categories/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"TableViewæ€§èƒ½ä¼˜åŒ–","slug":"2016-01-18-tableviewxing-neng-you-hua","date":"2016-01-18T14:00:04.000Z","updated":"2024-11-02T03:36:52.404Z","comments":true,"path":"2016/01/18/2016-01-18-tableviewxing-neng-you-hua/","permalink":"https://blog.wangruofeng007.com/2016/01/18/2016-01-18-tableviewxing-neng-you-hua/","excerpt":"","text":"æ­¤æ–‡æ•´ç†ä¸€ä¸‹TableViewä¼˜åŒ–ç›¸å…³çš„æ–¹æ¡ˆå’Œæ€è·¯ã€‚ TableViewä¸ºä»€ä¹ˆä¼šå¡ï¼Ÿä¸»è¦ç”±ä»¥ä¸‹åŸå› ï¼š cellForRowAtIndexPath:æ–¹æ³•ä¸­å¤„ç†äº†è¿‡å¤šä¸šåŠ¡ tableviewCellçš„subviewå±‚çº§å¤ªå¤æ‚ï¼Œåšäº†å¤§é‡é€æ˜å¤„ç† cellçš„heightåŠ¨æ€å˜åŒ–æ—¶è®¡ç®—æ–¹å¼ä¸å¯¹ ä¼˜åŒ–æ ¸å¿ƒæ€æƒ³ï¼šUITableViewCellé‡ç”¨æœºåˆ¶ç®€å•çš„ç†è§£å°±æ˜¯ï¼šUITableViewåªä¼šåˆ›å»ºä¸€å±å¹•ï¼ˆæˆ–ä¸€å±å¹•å¤šä¸€ç‚¹ï¼‰çš„UITableViewCellï¼Œå…¶ä»–éƒ½æ˜¯ä»ä¸­å–å‡ºæ¥é‡ç”¨çš„ã€‚æ¯å½“Cellæ»‘å‡ºå±å¹•æ—¶ï¼Œå°±ä¼šæ”¾å…¥åˆ°ä¸€ä¸ªé›†åˆï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­ï¼ˆè¿™é‡Œå°±ç›¸å½“äºä¸€ä¸ªé‡ç”¨æ± ï¼‰ï¼Œå½“è¦æ˜¾ç¤ºæŸä¸€ä½ç½®çš„Cellæ—¶ï¼Œä¼šå…ˆå»é›†åˆï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­å–ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥æ‹¿æ¥æ˜¾ç¤ºï¼›å¦‚æœæ²¡æœ‰ï¼Œæ‰ä¼šåˆ›å»ºã€‚è¿™æ ·åšçš„å¥½å¤„å¯æƒ³è€ŒçŸ¥ï¼Œæå¤§çš„å‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚ Tipsï¼š æå‰è®¡ç®—å¹¶ç¼“å­˜å¥½é«˜åº¦ï¼ˆå¸ƒå±€ï¼‰ï¼Œå› ä¸ºheightForRowAtIndexPath:æ˜¯è°ƒç”¨æœ€é¢‘ç¹çš„æ–¹æ³•ï¼› å¼‚æ­¥ç»˜åˆ¶,é‡åˆ°å¤æ‚ç•Œé¢,å‚è€ƒFacebookçš„AsyncDisplayKitå’ŒYYAsyncLayerå¼‚æ­¥ç»˜åˆ¶æ¡†æ¶ï¼› ç¼“å­˜å›¾ç‰‡ï¼ˆSDWebImageï¼‰ï¼Œæå‰å¤„ç†å¥½UIImageViewå›¾ç‰‡çš„å°ºå¯¸æŒ‰éœ€åŠ è½½è€Œä¸æ˜¯åŠ è½½åŸå›¾ï¼› è®¡ç®—ç­‰è€—æ—¶æ“ä½œå¼‚æ­¥å¤„ç†ï¼Œå¤„ç†å®Œå†å›ä¸»çº¿ç¨‹æ›´æ–°UIï¼› å›¾æ–‡æ··æ’ä¸å®šé«˜åº¦é‡‡ç”¨CoreTextæ’ç‰ˆï¼Œç¼“å­˜Cellé«˜åº¦å‚è€ƒYYKitï¼› å®ç°Cellçš„drawRect:æ–¹æ³•ç›´æ¥ç»˜åˆ¶ï¼Œå‡å°‘UIViewï¼ŒUIImageViewï¼ŒUILabelç­‰å®¹å™¨çš„ä½¿ç”¨ã€‚ Bonusï¼š æ­£ç¡®ä½¿ç”¨reuseIdentifieræ¥é‡ç”¨Cellï¼› å°½é‡å°‘ç”¨æˆ–ä¸ç”¨é€æ˜å›¾å±‚æˆ–Viewï¼› å¦‚æœCellå†…ç°å®çš„å†…å®¹æ¥è‡ªwebï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜è¯·æ±‚ç»“æœï¼› å‡å°‘subviewsçš„æ•°é‡åœ¨heightForRowAtIndexPath:ä¸­å°½é‡ä¸ä½¿ç”¨cellForRowAtIndexPath:ï¼Œå¦‚æœä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œåªç”¨ä¸€æ¬¡ç„¶åç¼“å­˜ç»“æœï¼› å°½é‡å°‘ç”¨addViewç»™CellåŠ¨æ€æ·»åŠ Viewï¼Œå¯ä»¥åˆå§‹åŒ–æ—¶å°±æ·»åŠ ï¼Œç„¶åé€šè¿‡hideæ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºï¼› å›ºå®šé«˜åº¦ä¸è¦å®ç°heightForRowAtIndexPath:æ–¹æ³•ã€‚ å¯ä»¥é€šè¿‡å®ç°ä»¥ä¸‹æ–¹æ³•ï¼Œå¯ä»¥å‡å°‘é«˜åº¦è®¡ç®—æ¬¡æ•° 123456@property (nonatomic) CGFloat rowHeight; // will return the default value if unset@property (nonatomic) CGFloat sectionHeaderHeight; // will return the default value if unset@property (nonatomic) CGFloat sectionFooterHeight; // will return the default value if unset@property (nonatomic) CGFloat estimatedRowHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate@property (nonatomic) CGFloat estimatedSectionHeaderHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate@property (nonatomic) CGFloat estimatedSectionFooterHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate å‚è€ƒèµ„æ–™ï¼š code-uitableviewcell-optimizations-part-1 code-uitableviewcell-optimization-part-2 Perfect smooth scrolling in UITableViews ä¼˜åŒ–UITableViewCellé«˜åº¦è®¡ç®—çš„é‚£äº›äº‹ è¯¦ç»†æ•´ç†ï¼šUITableViewä¼˜åŒ–æŠ€å·§ UITableviewæ€§èƒ½ä¼˜åŒ–æ€»ç»“ AsyncDisplayKit æ•™ç¨‹ï¼šè¾¾åˆ° 60 FPS çš„æ»šåŠ¨å¸§ç‡ AsyncDisplayKit YYAsyncLayer","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"}]},{"title":"iOS Animation Swift ç‰ˆ","slug":"2016-01-16-ios-animation-swift-ban","date":"2016-01-16T11:34:06.000Z","updated":"2024-11-02T03:36:52.404Z","comments":true,"path":"2016/01/16/2016-01-16-ios-animation-swift-ban/","permalink":"https://blog.wangruofeng007.com/2016/01/16/2016-01-16-ios-animation-swift-ban/","excerpt":"","text":"ç®€ä»‹æ­¤æ–‡ä¸»è¦è®°å½•æˆ‘å­¦ä¹ iOSçš„åŠ¨ç”»ç›¸å…³å†…å®¹ç”¨Swiftè¯­è¨€ï¼Œè®°å½•ä¸‹æ¥ä»¥ä¾›å‚è€ƒï¼Œä¸å®šæ—¶æ›´æ–°ã€‚ ç›®å½•ç»“æ„ Section I: View åŠ¨ç”» View animation å¼¹ç°§åŠ¨ç”» - Springs è½¬åœºåŠ¨ç”» - Transitions å…³é”®å¸§åŠ¨ç”» - Keyframe Section II: Auto Layout åŠ¨ç”» Section III: Layer åŠ¨ç”» Section IV: 3D åŠ¨ç”» Section V: æœªæ¥ç±»å‹çš„åŠ¨ç”» Section VI: View Controller åŠ¨ç”» Section VIIï¼šç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ Section VIII: Apple Watch åŠ¨ç”» Section I: View åŠ¨ç”»1.View animationç®€ä»‹ï¼šview çš„åŠ¨ç”»ä¸»è¦æ˜¯é€šè¿‡UIViewçš„ç±»æ–¹æ³•åˆ›å»ºï¼ŒåŠ¨ç”»å†…å®¹ä¸€èˆ¬æ”¾åœ¨blocké‡Œé¢ï¼Œå¯ä»¥é•¶åµŒä½¿ç”¨ï¼Œæ„æˆé“¾å¼åŠ¨ç”»ï¼Œä¸»è¦æœ‰3ä¸ªæ–¹æ³•,ä¸‰ä¸ªè®¿æ³•åªéœ€ä¼šå‚æ•°æœ€å¤šçš„é‚£ä¸ªå°±è¡Œï¼Œå‡½æ•°åanimateWithDuration(_:delay:options:animations:completion:)ï¼Œå…¶ä»–çš„ä½¿ç”¨èµ·æ¥éƒ½ç±»ä¼¼ã€‚ 123class func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -&gt; Void)class func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -&gt; Void, completion completion: ((Bool) -&gt; Void)?)class func animateWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, options options: UIViewAnimationOptions, animations animations: () -&gt; Void, completion completion: ((Bool) -&gt; Void)?) ä½¿ç”¨ï¼š 12345UIView.animateWithDuration(0.5, delay: 0, options: [], animations: &#123; //do something &#125;, completion: &#123;_ in //do something&#125;) è¯´æ˜ï¼šoptionsï¼ŒåŠ¨ç”»é€‰é¡¹ï¼Œè¿™ä¸ªè¿è¡Œä½ è®¾ç½®ä¸€ä¸ªåŠ¨ç”»é€‰é¡¹é›†åˆï¼Œä¼ []è¡¨ç¤ºä¸éœ€è¦é€‰é¡¹ï¼Œå•ä¸ªæ—¶å¯ä»¥çœç•¥æ”¾æ‹¬å·ä¾‹å¦‚.Repeat,å¤šä¸ªç”¨é€—å·è¿æ¥[.Repeat, .CurveEaseInOut] completioné—­åŒ…éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä¸éœ€è¦ä½¿ç”¨å‚æ•°å¯ä»¥ç”¨_è¡¨ç¤ºï¼Œä¸éœ€è¦å®ç°å¯ä»¥ç›´æ¥ä¼ nil æˆ–è€…åƒä¸‹é¢è¿™æ ·å†™ 12345UIView.animateWithDuration(0.5, delay: 0, options: [], animations: &#123; () -&gt; Void in //do something &#125;) &#123; (_) -&gt; Void in //do something&#125; 2.å¼¹ç°§åŠ¨ç”» - Springsç®€ä»‹ï¼šå¼¹ç°§åŠ¨ç”»æ˜¯iOS 7.0æ–°å¢çš„APIï¼Œå‡½æ•°åanimateWithDuration(_:delay:usingSpringWithDamping:initialSpringVelocity:opti ons:animations:completion:)ï¼Œ 1class func animateWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, usingSpringWithDamping dampingRatio: CGFloat, initialSpringVelocity velocity: CGFloat, options options: UIViewAnimationOptions, animations animations: () -&gt; Void, completion completion: ((Bool) -&gt; Void)?) ä½¿ç”¨ï¼š 123UIView.animateWithDuration(0.5, delay: 0.5, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.0, options: [], animations: &#123;// do something&#125;, completion: nil) è¯´æ˜ï¼šusingSpringWithDamping:è®¾ç½®å¼¹ç°§çš„é˜»å°¼ï¼ŒèŒƒå›´ï¼ˆ0.0-1.0ï¼‰ï¼Œè¶Šæ¥è¿‘0.0å¼¹ç°§è¶Šæœ‰å¼¹æ€§ï¼Œè¶Šæ¥è¿‘1.0ï¼Œæ•ˆæœè¶Šåƒµç¡¬ï¼Œä½ å¯ä»¥æŠŠå½“æˆå¼¹ç°§çš„åˆšåº¦æ¥ç†è§£ï¼ŒinitialSpringVelocity:è®¾ç½®å¼¹ç°§åˆå§‹åŒ–çš„é€Ÿåº¦ï¼Œè®¾ç½®1.0è¡¨ç¤ºç”¨1ç§’åœ¨åŠ¨ç”»è·¨åº¦ä¸Šå®Œæˆæ•´ä¸ªåŠ¨ç”»è·ç¦»ï¼Œå€¼è¶Šå¤§æˆ–è€…è¶Šå°ä¼šå¯¼è‡´åŠ¨ç”»æœ‰ç›¸åº”çš„å¤§çš„æˆ–è€…è¾ƒå°çš„é€Ÿåº¦ï¼Œå¯ä»¥å½“æˆå¼¹ç°§çš„åˆå§‹åŠ¨é‡æ¥ç†è§£ã€‚ 3.è½¬åœºåŠ¨ç”» - Transitionsç®€ä»‹ï¼šå‰ä¸¤ç§åˆ›å»ºçš„åŠ¨ç”»æ˜¯åŸºäºå¯åŠ¨ç”»çš„æ¥å£ä¾‹å¦‚ï¼Œpositionï¼Œalphaï¼Œframeç­‰ç­‰ï¼ŒTransitionsæ˜¯ä¸“é—¨å¤„ç†æ·»åŠ æˆ–è€…ç§»é™¤ä¸€ä¸ªviewçš„åŠ¨ç”»,ç³»ç»Ÿæœ‰2ä¸ªæ ‡å‡†å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯å¯¹å•ä¸ªviewçš„å¤„ç†ï¼Œä¸€ä¸ªæ˜¯å¤„ç†2ä¸ªviewæ›¿æ¢ã€‚ 12class func transitionWithView(_ view: UIView, duration duration: NSTimeInterval, options options: UIViewAnimationOptions, animations animations: (() -&gt; Void)?, completion completion: ((Bool) -&gt; Void)?)class func transitionFromView(_ fromView: UIView, toView toView: UIView, duration duration: NSTimeInterval, options options: UIViewAnimationOptions, completion completion: ((Bool) -&gt; Void)?) ä½¿ç”¨ï¼š 1234567891011121314151617//add the new view via transitionUIView.transitionWithView(animationContainerView!, duration: 0.33,options: [.CurveEaseOut, .TransitionFlipFromBottom], animations: &#123;self.animationContainerView!.addSubview(newView) &#125;, completion: nil)//remove the view via transitionUIView.transitionWithView(animationContainerView!, duration: 0.33,options: [.CurveEaseOut, .TransitionFlipFromBottom], animations: &#123;self.newView.removeFromSuperview() &#125;, completion: nil)//hide the view via transitionUIView.transitionWithView(self.newView, duration: 0.33, options: [.CurveEaseOut, .TransitionFlipFromBottom], animations: &#123;self.newView.hidden = true &#125;, completion: nil)//replace via transitionUIView.transitionFromView(self.oldView!, toView: self.newView!, duration: 0.33, options: [.TransitionFlipFromTop],completion: nil) 4.å…³é”®å¸§åŠ¨ç”» - Keyframeç®€ä»‹ï¼šå…³é”®å¸§é¡¾åæ€ä¹‰å°±æ˜¯è®¾å®šå…³é”®çš„ä¸€äº›å¸§ç„¶åç³»ç»Ÿä¼šæ ¹æ®ä¸€å¥—ç®—æ³•è®¡ç®—ä¸­é—´çš„å…¶ä»–å¸§ï¼Œè¿™æ ·æ”¹å˜çš„å¯åŠ¨ç”»å±æ€§æ—¶çœ‹çœ‹èµ·æ¥æ›´åŠ æµç•…è‡ªç„¶ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå‡½æ•°,ä¸€ä¸ªåˆ›å»ºå…³é”®å¸§åŠ¨ç”»ï¼Œä¸€ä¸ªè®¾ç½®å…·ä½“æ¯å¸§å†…å®¹ 12class func animateKeyframesWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, options options: UIViewKeyframeAnimationOptions, animations animations: () -&gt; Void, completion completion: ((Bool) -&gt; Void)?)+ (void)addKeyframeWithRelativeStartTime:(double)frameStartTime relativeDuration:(double)frameDuration animations:(void (^)(void))animations ä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526272829303132func planeDepart() &#123; UIView.animateKeyframesWithDuration(1.5, delay: 0.0, options: [], animations: &#123; //add keyframes UIView.addKeyframeWithRelativeStartTime(0.0, relativeDuration: 0.25, animations: &#123; self.planeImage.center.x += 100.0 self.planeImage.center.y -= 10.0 &#125;) UIView.addKeyframeWithRelativeStartTime(0.1, relativeDuration: 0.4) &#123; self.planeImage.transform = CGAffineTransformMakeRotation(CGFloat(-M_PI_4/2)) &#125; UIView.addKeyframeWithRelativeStartTime(0.25, relativeDuration: 0.25) &#123; self.planeImage.center.x += 100.0 self.planeImage.center.y -= 60.0 self.planeImage.alpha = 0.0 &#125; UIView.addKeyframeWithRelativeStartTime(0.51, relativeDuration: 0.01) &#123; self.planeImage.transform = CGAffineTransformIdentity self.planeImage.center = CGPoint(x: 0.0, y: originalCenter.y) &#125; UIView.addKeyframeWithRelativeStartTime(0.55, relativeDuration: 0.45) &#123; self.planeImage.alpha = 1.0 self.planeImage.center = originalCenter &#125; &#125;, completion: nil)&#125; è¯´æ˜ï¼šè¿™æ˜¯è®¾è®¡ä¸€ä¸ªé£æœºæ²¿ä¸€æ¡è·¯å¾„èµ·é£ç„¶åå†å½’ä½çš„ä¸€æ®µåŠ¨ç”»ï¼ŒaddKeyframeWithRelativeStartTime(_:relativeDuration:animations:),ç¬¬ä¸€ä¸ªå‚æ•°ç›¸å¯¹å¼€å§‹æ—¶é—´ï¼Œæ˜¯ç›¸å¯¹äºåŠ¨ç”»æŒç»­æ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚0.1å°±æ˜¯10%ï¼Œ0.25å°±æ˜¯25%ï¼Œå¦‚æœæ•´ä¸ªåŠ¨ç”»æŒç»­2ç§’ï¼Œ0.1å°±æ˜¯åœ¨2*0.1&#x3D;0.2ç§’çš„æ—¶å€™å¼€å§‹ï¼Œåé¢çš„ä¸€ä¸ªå‚æ•°æ˜¯ç›¸å¯¹æŒç»­æ—¶é—´ï¼ŒèŒƒå›´æ›´ç¬¬ä¸€å‚æ•°ç±»ä¼¼ä¹Ÿ(0.0-1.0),åªä»ç›¸å¯¹å¼€å§‹æ—¶é—´èµ·ï¼Œå¾€åæ¨ç§»çš„ç›¸å¯¹æ—¶é—´ã€‚ Section II: Auto Layout åŠ¨ç”»12345678910111213141516// change Constraint// init layoutview.layoutIfNeeded()UIView.animateWithDuration(0.8, delay: 0.0, usingSpringWithDamping: 0.4, initialSpringVelocity: 0.0, options: [], animations: &#123; // do something change constraint // layout self.view.layoutIfNeeded() &#125;, completion: nil) åŸç†å°±æ˜¯ï¼Œä¿®æ”¹çº¦æŸ,è®©æ·»åŠ ä¸€ä¸ªåŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»blocké‡Œé¢æ‰§è¡Œå¸ƒå±€æ›´æ–°ï¼Œblocké‡Œé¢ä¹Ÿå¯ä»¥æ·»åŠ ä¿®æ”¹çº¦æŸä»£ç ï¼Œä¿®æ”¹çº¦æŸçš„æœ¬è´¨æ˜¯ä¿®æ”¹ç›¸å…³Viewçš„frameå’Œboundsï¼Œç”±äºä¿®æ”¹Viewçš„è¿™ä¸ªå±æ€§æ˜¯æ”¯æŒåŠ¨ç”»çš„ï¼Œæ‰€ä»¥ä¿®æ”¹çº¦æŸå…¶å®æ˜¯é—´æ¥ä¿®æ”¹Viewçš„è¿™äº›å±æ€§ï¼Œæ‰€æœ‰ä¹Ÿæ˜¯æ”¯æŒåŠ¨ç”»çš„ï¼Œè¿™ä¸ªåŠ¨ç”»çš„å¼ºå¤§çš„ä¹‹å¤„åœ¨äºï¼Œå¯ä»¥å®ç°ä¸€ç³»åˆ—Viewç›¸äº’åä½œçš„åŠ¨ç”»ã€‚ Section VIII: Apple Watch åŠ¨ç”»æ¦‚è¿°ï¼šåœ¨Apple Watch ä¸­æœ‰ä¸¤ç§æŠ€æœ¯æ¥åˆ›å»ºåŠ¨ç”»ï¼Œä¸€ä¸ªæ˜¯ä¸€æ¬¡æ€§åˆ›å»ºä¸€ç³»åˆ—é™æ€å¯åŠ¨ç”»çš„å›¾ç‰‡åºåˆ—æˆ–è€…å¾ªç¯åŠ¨ç”»ï¼Œå¦ä¸€ç§æ˜¯å¯¹æ ‡ç­¾å’Œå…¶ä»–é¡¹ç›®é€šè¿‡æ”¹å˜å°ºå¯¸ï¼Œå¯¹é½ï¼Œé¢œè‰²ï¼Œé€æ˜åº¦è¿›è¡Œå¸ƒå±€å’Œå¤–è§‚åŠ¨ç”»ã€‚ Animated Image Sequences Animated Image Sequencesæ˜¯ç”±ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ç‹¬ç«‹å›¾ç‰‡ç»„æˆçš„åºåˆ—æ¥éšæ—¶é—´æŒ‰åºåˆ—æ˜¾ç¤ºã€‚æ¯å¼ å›¾ç‰‡ç»„æˆäº†åŠ¨ç”»çš„ä¸€ä¸ªå•ç‹¬çš„å¸§ï¼Œæ•´ä¸ªåŠ¨ç”»è¿è¡Œåœ¨ä¸€ä¸ªå¾ªç¯ä¸­é™¤äº†ä½ åœ¨è¿è¡Œçš„æ—¶å€™ä¿®æ”¹äº†æ’­æ”¾çš„è¡Œä¸ºã€‚ä¸»è¦æŠŠå®ƒå®‰è£…åœ¨ä½ ç•Œé¢ä¸­çš„imageï¼Œgroup,buttonç­‰å…ƒç´ ä¸­ã€‚é€šè¿‡WKImageAnimatableåè®®æ¥å®ç°åŠ¨ç”»ï¼Œä¹Ÿå°±æ˜¯è¯´å‡¡æ˜¯éµå¾ªè¿™ä¸ªåè®®çš„å¯¹è±¡éƒ½æ”¯æŒåŠ¨ç”»ï¼ŒWatchKitä¸­éµå¾ªè¿™ä¸ªåè®®çš„å¯¹è±¡æœ‰ï¼šWKInterfaceGroupï¼ŒWKInterfaceImage ä½ å¯ä»¥æ§åˆ¶imageå’Œgroupå…ƒç´ Animated Image Sequencesçš„æ’­æ”¾çš„é€Ÿåº¦ï¼Œæ–¹å‘ï¼Œå¸§ç‡,å¦åˆ™ç•Œé¢å…ƒç´ å°†ä¼šæ— é™å¾ªç¯æ˜¾ç¤ºä¸€ä¸ªå®Œæ•´çš„åŠ¨ç”»ã€‚ Notes: Animated Image Sequenceså¯ä»¥æ­£å‘æ’­æ”¾åŠ¨ç”»ä¹Ÿå¯ä»¥åå‘æ‰§è¡ŒåŠ¨ç”»åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä½ ä¸åº”è¯¥æä¾›ä¸€å¥—ä¸€æ ·çš„å›¾ç‰‡ä»¥åå‘çš„æ–¹å¼ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯æ¥é™ä½Appçš„å°ºå¯¸ã€‚ å¦‚æœä½ æ˜¯ä»storyboardåˆ›å»ºåºåˆ—å›¾ç‰‡å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡func startAnimating()æ–¹æ³•å¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œé€šè¿‡func stopAnimating()æ¥åœæ­¢åŠ¨ç”»çš„æ‰§è¡Œã€‚ å®ä¾‹ï¼š å®ç°WKInterfaceGroupåŠ è½½è¿›åº¦åŠ¨ç”» 1.åœ¨Watché‡Œé¢çš„Interface.storyboardé‡Œé¢æ‹–æ‹½ä¸€ä¸ªWKInterfaceGroupå‘½åä¸ºbackgroundGroup2.åˆ›å»ºä¸€ä¸ªWKInterfaceButtonæŒ‰é’®æ¥è§¦å‘è¿™ä¸ªåŠ¨ç”»äº‹ä»¶,åœ¨æ§åˆ¶å™¨é‡Œé¢å®ç°ä¸‹é¢çš„ä»£ç  1234567891011121314@IBAction func checkInButtonTapped() &#123; // 1 let duration = 0.35 let delay = dispatch_time(DISPATCH_TIME_NOW, Int64((duration + 0.15) * Double(NSEC_PER_SEC))) // 2 backgroundGroup.setBackgroundImageNamed(&quot;Progress&quot;) // 3 backgroundGroup.startAnimatingWithImagesInRange(NSRange(location: 0, length: 10), duration: duration, repeatCount: 1) // 4 dispatch_after(delay, dispatch_get_main_queue()) &#123; () -&gt; Void in // 5 dosomething &#125; &#125; å‚æ•°è¯´æ˜ï¼šimageRange,å°†è¦æ‰§è¡ŒåŠ¨ç”»çš„å›¾ç‰‡èŒƒå›´ï¼Œ0è¡¨ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œ1è¡¨ç¤ºç¬¬äºŒå¼ å›¾ç‰‡ï¼Œä»¥æ­¤ç±»æ¨ï¼›duration,å•ä½ç§’ï¼Œè¡¨ç¤ºåŠ¨ç”»æ‰§è¡Œå•ä¸ªå¾ªç¯çš„æ—¶é—´ï¼Œæ­£å€¼è¡¨ç¤ºä»ç¬¬ä¸€å¸§åˆ°æœ€åä¸€å¸§æ‰§è¡Œï¼Œè´Ÿå€¼è¡¨ç¤ºä»¥ç›¸åçš„é¡ºåºæ‰§è¡ŒåŠ¨ç”»ï¼Œä»¥ç¬¬ä¸€å¸§ç»“æŸï¼›repeatCount,åŠ¨ç”»çš„é‡å¤æ¬¡æ•°ï¼Œè®¾ç½®0è¡¨ç¤ºæ— é™å¾ªç¯ã€‚ 3.å°†ç´ ææ–‡ä»¶æ‹–å…¥Watchçš„Asset.xcassetsçš„æ–‡ä»¶é‡Œé¢ï¼Œä»¥Progresså¼€å§‹å‘½ååé¢æ¥ä¸€ä¸²è¿ç»­çš„æ•°å­—ï¼Œæ•ˆæœåº”è¯¥åƒä¸‹é¢è¿™æ ·ã€‚ 4.ç„¶ååœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œå°±OKäº†ã€‚ Layout and Appearance Animations ä½ å¯ä»¥åŠ¨ç”»æ”¹å˜æ‰€æœ‰ç•Œé¢å…ƒç´ çš„å¸ƒå±€å’Œå¤–è§‚ã€‚åŠ¨ç”»æ”¹å˜å¸ƒå±€è®©ä½ ä¿®æ”¹å…ƒç´ çš„å°ºå¯¸æˆ–è€…åŠ¨æ€çš„æ”¹å˜å¸ƒå±€çš„æ–¹å‘ã€‚ä½ å¯ä»¥ç§»åŠ¨åœ¨å±å¹•ä¸Šçš„å…ƒç´ æˆ–è€…è®©å®ƒä»¬çš„å†…å®¹é‡æ–°å¯¹é½ã€‚ä½ ä¹Ÿå¯ä»¥åŠ¨ç”»æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼ŒåŒ…æ‹¬æ”¹å˜ä»–ä»¬çš„backgroud coloræˆ–è€…opactiyã€‚è¿™äº›ç±»å‹çš„åŠ¨ç”»è®©ä½ åˆ›å»ºåŠ¨æ€çš„ç•Œé¢ç”¨æ¥å“åº”ç”¨æˆ·çš„äº¤äº’å¹¶ä¸”æä¾›ä¸€ä¸ªæ›´å¥½çš„åé¦ˆã€‚ æ‰€æœ‰çš„layout- and appearance-based animationsåœ¨åŠ¨ç”»å¼€å§‹å’Œç»“æŸéƒ½ä»¥easingçš„æ›²çº¿æ–¹å¼è‡ªåŠ¨æ„å»º ã€‚ä½ ä¸èƒ½å…³é—­æˆ–è€…è‡ªå®šä¹‰ç¼“åŠ¨æ›²çº¿ã€‚ç›¸å½“äºUIViewçš„åŠ¨ç”»é€‰é¡¹é‡Œé¢çš„easeInOutã€‚ å¯åŠ¨ç”»å±æ€§ï¼š Opacity Height Width Group Insets Alignment Background Color Tint Color æ ¸å¿ƒä»£ç ï¼š 123class func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -&gt; Void) è¯´æ˜:è¿™ä¸ªæ–¹æ³•åœ¨WKInterfaceControllerä¸­ï¼Œç›®å‰å‘ç°åªæœ‰è¿™ä¸€ä¸ªåŠ¨ç”»APIï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªé—­åŒ…é‡Œé¢æ‰§è¡Œç›¸åº”çš„åŠ¨ç”»æ“ä½œï¼Œå®ç°è·ŸUIViewçš„blockåŠ¨ç”»ç±»ä¼¼ã€‚ å®ä¾‹ï¼š åœ¨ç•Œé¢å·²ç»å‡ºç°çš„æ—¶å€™å¯¹planeImageè¿›è¡Œç€è‰²åŠ¨ç”»,æ”¹å˜separatorçš„é¢œè‰² 12345678910111213141516var planeImage: WKInterfaceImage!var separator: WKInterfaceSeparator!override func didAppear() &#123; super.didAppear() // 1 animateWithDuration(0.35, animations: &#123; () -&gt; Void in // 2 let color = UIColor(red: 90/255, green: 200/255, blue: 250/255, alpha: 1) planeImage.setTintColor(color) separator.setColor(color) &#125;) &#125;&#125; å‚è€ƒèµ„æ–™ï¼š Apple Human-interface-guidelines â€“ Apple Apple WatchKit Programming Guide â€“ Apple Apple Watch â€“ SwiftGuide Swift Guide â€“ SwiftGuide å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://blog.wangruofeng007.com/tags/%E5%8A%A8%E7%94%BB/"},{"name":"iWatch OS2","slug":"iWatch-OS2","permalink":"https://blog.wangruofeng007.com/tags/iWatch-OS2/"}]},{"title":"NSURLSession æ•™ç¨‹","slug":"2016-01-15-nsurlsession","date":"2016-01-15T10:15:01.000Z","updated":"2024-11-02T03:36:52.404Z","comments":true,"path":"2016/01/15/2016-01-15-nsurlsession/","permalink":"https://blog.wangruofeng007.com/2016/01/15/2016-01-15-nsurlsession/","excerpt":"","text":"æœ¬æ–‡ç¿»è¯‘è‡ª http://www.raywenderlich.com/51127/nsurlsession-tutorial åŸä½œè€…ï¼š Charlie Fulton è¯‘è€…ï¼š@oneruofeng æ³¨æ„ï¼šè¿™æ˜¯ä¸€ç¯‡æ¥è‡ªæˆ‘ä»¬ä½œä¸ºå³å°†å‘å¸ƒ iOS 7 Feastçš„ä¸€éƒ¨åˆ†iOS 7 by Tutorialsçš„ç®€çŸ­ç‰ˆæœ¬çš„ç« èŠ‚ã€‚æˆ‘ä»¬å¸Œæœ›ä½ ä»¬å–œæ¬¢ã€‚ æ¯ä¸€ä¸ªæ–°çš„iOSç‰ˆæœ¬å‘å¸ƒéƒ½ä¼šåŒ…å«ä¸€äº›æå¥½çš„æ–°çš„ç½‘ç»œAPIsï¼ŒiOS7ä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨iOS7ä¸­ï¼ŒAppleå¼•å…¥äº†NSURLSession,è¿™æ˜¯ä¸ºäº†å–ä»£NSURLConnectionä½œä¸ºåå¥½çš„ç½‘ç»œè¯·æ±‚çš„ä¸€ç³»åˆ—ç±»ã€‚ åœ¨è¿™ä¸ªNSURLSessionçš„æ•™ç¨‹ä¸­ï¼Œä½ å°†äº†è§£åˆ°è¿™ä¸ªæ–°ç±»ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä½ è¦ä½¿ç”¨å®ƒä»¥åŠä½ æ€æ ·ä½¿ç”¨å®ƒï¼Œå®ƒå’Œä»¥å‰çš„ç±»åº“æ¯”è¾ƒè€Œè¨€æ€æ ·ï¼Œæœ€åæœ€é‡è¦çš„æ˜¯ï¼šè·å¾—ä¸€ä¸ªæ•´åˆåˆ°ä¸€ä¸ªçœŸæ­£çš„Appçš„å®è·µã€‚ è¯·æ³¨æ„ï¼šè¿™ä¸ªè¯¾ç¨‹æ˜¯å‡è®¾ä½ ç†Ÿæ‚‰åŸºæœ¬çš„ç½‘ç»œæ¦‚å¿µã€‚å‡å¦‚ç½‘ç»œå¯¹ä½ æ¥è¯´å®Œå…¨æ˜¯æ–°çš„ï¼Œä½ ä»ç„¶å¯ä»¥è·Ÿæˆ‘ä¸€èµ·ä¸€æ­¥ä¸€æ­¥çš„å­¦ä¹ ï¼Œä½†æ˜¯å¯èƒ½æœ‰äº›ä½ ä¸ç†Ÿæ‚‰çš„æ¦‚å¿µéœ€è¦éœ€è¦è‡ªå·±æŸ¥è¯¢åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨NSURLSessionä¸ºä»€ä¹ˆä½ è¦ä½¿ç”¨NSURLSession? é¥¿ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸¦ç»™ä½ ä¸€äº›å¥½å¤„å’Œä¼˜åŠ¿ç›¸æ¯”ä»¥å‰çš„ï¼š åå°ä¸Šä¼ å’Œä¸‹è½½ ï¼š å½“ä½ åˆ›å»ºNSURLSessionçš„æ—¶å€™ä½ åªéœ€é…ç½®ä¸€ä¸ªé€‰é¡¹å³å¯ï¼Œä½ ä¾¿å¯ä»¥è¿›è¡Œæ‰€æœ‰çš„åå°ç½‘ç»œä»»åŠ¡ã€‚è¿™å°†æœ‰å¯¹ä½ çš„ç”µæ± å¯¿å‘½æœ‰åˆ©ï¼Œå®ƒæ”¯æŒUIKitå¤šä»»åŠ¡å¹¶ä¸”å½“åˆ‡æ¢çº¿ç¨‹çš„æ—¶å€™ä½¿ç”¨ç›¸åŒçš„ä»£ç†æ¨¡å‹ã€‚ ä½¿ä½ çš„ç½‘ç»œæ“ä½œå¯ä»¥æš‚åœå’Œæ¢å¤ ï¼šä½ ç¨åå°†ä¼šçœ‹åˆ°ï¼Œä»»ä½•ä½¿ç”¨NSURLSessionAPIçš„ç½‘ç»œä»»åŠ¡éƒ½å¯ä»¥è¢«æš‚åœï¼Œåœæ­¢ï¼Œé‡æ–°å¼€å§‹ã€‚è€Œæ²¡æœ‰ä½¿ç”¨NSOperationå­ç±»çš„å¿…è¦ã€‚ å¯é…ç½®çš„å®¹å™¨ï¼šå¯¹äºæ”¾è¿›é‡Œé¢çš„è¯·æ±‚è€Œè¨€æ¯ä¸€ä¸ªNSURLSessionéƒ½æ˜¯å¯é…ç½®çš„ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä½ éœ€è¦è®¾ç½®ä¸€ä¸ªHTTP headeré€‰é¡¹ï¼Œä½ åªéœ€è¦è®¾ç½®ä¸€æ¬¡ç„¶åæ¯ä¸ªåœ¨sessionä¸­çš„è¯·æ±‚å°±éƒ½ä¼šæœ‰ç›¸åŒçš„é…ç½®äº†ã€‚ å¯å­ç±»åŒ–å’Œç§å¯†å­˜å‚¨ï¼š NSURLSessionæ˜¯å¯å­ç±»åŒ–çš„å¹¶ä¸”ä½ å¯ä»¥é…ç½®ä¸€ä¸ªsessionç”¨æ¥ä½œä¸ºç§å¯†å­˜å‚¨åœ¨æŸä¸ªä¼šè¯ä¸­ã€‚è¿™å…è®¸ä½ æ‹¥æœ‰ç§å¯†å­˜å‚¨å¯¹è±¡åœ¨å…¨å±€çŠ¶æ€ä¸‹ã€‚ ä¼˜åŒ–çš„æˆæƒå¤„ç†æœºåˆ¶ï¼šæˆæƒè¢«å®ŒæˆåŸºäºæŸä¸ªç‰¹å®šçš„è¿æ¥ã€‚å½“ä½¿ç”¨NSURLConnectionçš„æ—¶å€™å‡å¦‚å‘ç”Ÿäº†ä¸€å¤„æˆæƒæ”¹å˜ï¼Œè¿™ä¸ªæ”¹å˜å°†è¿”å›ä¸€ä¸ªéšæ„çš„è¯·æ±‚ï¼Œä½ ä¸èƒ½ç¡®å®šä½ å…·ä½“å¾—åˆ°çš„é‚£ä¸ªã€‚ä½¿ç”¨NSURLSessionçš„è¯ï¼Œä»£ç†å›æ¥å¤„ç†æˆæƒã€‚ ä¸°å¯Œçš„ä»£ç†æ¨¡å‹ï¼šNSURLConnectionæœ‰äº›åŸºäºblockçš„åŒæ­¥æ–¹æ³•ï¼Œç„¶è€Œä»£ç†å°±ä¸èƒ½ä½¿ç”¨å®ƒä»¬äº†ã€‚å½“ä¸€ä¸ªè¯·æ±‚å»ºç«‹äº†æ— è®ºå®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå“ªæ€•éœ€è¦æˆæƒã€‚ä½¿ç”¨NSURLSessionå°±å°±å¯ä»¥æ··åˆæ¥å…¥ï¼Œä½¿ç”¨åŸºäºblockçš„å¼‚æ­¥æ–¹æ³•åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®ä»£ç†æ¥å¤„ç†æˆæƒã€‚ é€šè¿‡æ–‡ä»¶ç³»ç»Ÿä¸Šä¼ å’Œä¸‹è½½ï¼šè‹¹æœé¼“åŠ±æŠŠï¼ˆæ–‡ä»¶å†…å®¹ï¼‰æ•°æ®è·Ÿ(URLå’Œä¸€äº›è®¾ç½®)å…ƒæ•°æ®åˆ†å¼€ã€‚ NSURLSession vs NSURLConnectionâ€œå“‡å“¦ï¼ŒNSURLSessionå¬èµ·æ¥å¾ˆå¤æ‚å‘€ï¼â€,ä½ å¯èƒ½è¿™ä¹ˆæƒ³ã€‚â€æˆ‘å¯èƒ½è¿˜æ˜¯ç»§ç»­ä½¿ç”¨æˆ‘çš„è€æœ‹å‹NSURLConnectionã€‚â€ åˆ«æ‹…å¿ƒâ€“ä½¿ç”¨NSURLSessionä½¿ç”¨èµ·æ¥å…¶å®å’Œå®ƒçš„å‰è¾ˆNSURLConnectionä¸€æ ·ç®€å•å¯¹äºç®€å•çš„ä»»åŠ¡æ¥è¯´ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘æ¥çœ‹ä¸€ä¸ªåœ¨è·å–ä¼¦æ•¦æœ€æ–°çš„å¤©æ°”çš„ä¸€ä¸ªç®€å•ç½‘ç»œè¯·æ±‚ï¼Œé€šè¿‡å®ƒæ¥è·å–JSONæ•°æ®çš„ä¾‹å­ã€‚ å‡è®¾ä½ ç”¨è¿™ä¸ªNSStringæ¥æ„é€ è¿™ä¸ªNSURL: 1NSString *londonWeatherUrl = @&quot;http://api.openweathermap.org/data/2.5/weather?q=London,uk&quot;; è¿™é‡Œæ˜¯ç¬¬ä¸€æ­¥ä½ ä½¿ç”¨NSURLConnectionæ¥è°ƒç”¨ï¼š 12345678910NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:londonWeatherUrl]];[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) &#123; // handle response&#125;]; ç°åœ¨è®©æˆ‘ä»¬æ¥ä½¿ç”¨NSURLSessionã€‚æ³¨æ„è¿™æ˜¯ä½¿ç”¨NSURLSessionçš„æœ€ç®€å•çš„æ–¹å¼æ¥å¿«é€Ÿæ„é€ ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨åé¢çš„è¯¾ç¨‹ä½ å°†çœ‹åˆ°æ€æ ·é…ç½®sessionå’Œè®¾ç½®å…¶ä»–ç‰¹å¾æ¯”å¦‚åƒä»£ç†ã€‚ 12345678NSURLSession *session = [NSURLSession sharedSession];[[session dataTaskWithURL:[NSURL URLWithString:londonWeatherUrl] completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; // handle response &#125;] resume]; æ³¨æ„ä½ å¹¶ä¸éœ€è¦æŒ‡å®šå®ƒè¿è¡Œåœ¨é‚£ä¸ªé˜Ÿåˆ—ä¸­ã€‚é™¤äº†ä½ ç‰¹åˆ«æŒ‡å®šï¼Œè¿™ä¸ªè°ƒç”¨å°†ä¼šåœ¨åå°çº¿ç¨‹ã€‚ä½ å¯èƒ½å¾ˆéš¾æ³¨æ„åˆ°è¿™ä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒï¼Œå®ƒå°±æ˜¯æ•…æ„è¿™æ ·çš„ã€‚Appleæåˆ°æ‰“ç®—ä½¿ç”¨dataTaskWithURLæ¥å–ä»£åœ¨NSURLConnectionä¸­çš„sendAsynchronousRequestã€‚ æ‰€æœ‰ä»æ ¹æœ¬ä¸Šæ¥è®²â€“å¯¹äºç®€å•çš„ä»»åŠ¡ä½¿ç”¨NSURLSessionå°±å’Œä½¿ç”¨NSURLConnectionä¸€æ ·ç®€å•ï¼Œå¹¶ä¸”å®ƒè¿˜æœ‰ä¸€äº›åˆ—é¢å¤–çš„å®šåˆ¶åŠŸèƒ½å½“ä½ éœ€è¦å®ƒçš„æ—¶å€™ã€‚ NSURLSession vs AFNetworkingä¸æåˆ°AFNetworkingæ¡†æ¶å°±è°ˆä¸ä¸Šè°ˆè®ºç½‘ç»œç¼–ç¨‹ã€‚è¿™ä¸ªäº‹åœ¨iOS/OS Xä¸Šæœ€æµè¡Œçš„æ¡†æ¶ï¼Œæœ‰æ°å‡ºçš„Mattt Thompsonåˆ›å»ºã€‚ æ³¨æ„ï¼šæƒ³äº†è§£æ›´å¤šå…³äºAFNetworking,è¯·æ£€å‡ºåœ¨https://github.com/AFNetworking/AFNetworkingçš„githubé¡µé¢ã€‚æˆ‘ä»¬ä¹Ÿæœ‰ä¸€ä¸ªå…³äºå®ƒçš„è¯¾ç¨‹ï¼šhttp://www.raywenderlich.com/30445/afnetworking-crash-course ä¸‹é¢æ˜¯çš„ä½¿ç”¨AFNetworking 1.xç‰ˆæœ¬å¤„ç†ç›¸åŒçš„æ•°æ®ä»»åŠ¡çš„ä»£ç ï¼š 1234567891011NSURLRequest *request = [NSURLRequest requestWithURL: [NSURL URLWithString:londonWeatherUrl]];AFJSONRequestOperation *operation =[AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) &#123; // handle response&#125; failure:nil];[operation start]; ä½¿ç”¨AFNetworkingçš„ä¸€ä¸ªå¥½å¤„æ˜¯å¤„ç†å“åº”çš„æ•°æ®çš„æ•°æ®æ ¹æ®ç±»å‹è¢«å½’ç±»ã€‚ä½¿ç”¨AFJSONRequestOperation(æˆ–è€…è¯¸å¦‚XMLå’Œplistç›¸ä¼¼çš„ç±»),æˆåŠŸblockå·²ç»è¢«è§£ææ ¹æ®å“åº”å¹¶ä¸”ä¸ºä½ è¿”å›ä½ æƒ³è¦çš„æ•°æ®ã€‚ä½¿ç”¨NSURLSessionä½ å°†æ”¶åˆ°ä¸€ä¸ªNSDataå¯¹è±¡åœ¨completion handler,æ‰€æœ‰ä½ åªéœ€è¦æŠŠNSDataè½¬æ¢æˆJOSNæˆ–è€…å…¶ä»–å½¢å¼ã€‚ æ³¨æ„ï¼šä½ èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„æŠŠæ•°æ®ä»NSDataè½¬æ¢æˆJSONä½¿ç”¨åœ¨iOS 5å¼•å…¥çš„NSJSONSerializationè¿™ä¸ªç±»ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹23ç« çš„iOS 5 æ•™ç¨‹ï¼Œâ€œWorking with JSONâ€ã€‚ ä½ æˆ–è®¸æƒ³çŸ¥é“ä½ æ˜¯åº”è¯¥ä½¿ç”¨AFNetworkingè¿˜æ˜¯ä»…ä»…æ˜¯ç»§ç»­ä½¿ç”¨NSURLSessionã€‚ å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘è®¤ä¸ºå¯¹äºç®€å•çš„éœ€æ±‚æœ€å¥½è¿˜æ˜¯ç»§ç»­ä½¿ç”¨NSURLSessionâ€“è¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“åœ¨ä½ çš„å·¥ç¨‹ä¸­ã€‚å¦å¤–ï¼Œä½¿ç”¨æ–°çš„ä»£ç†ï¼Œé…ç½®ï¼Œå’ŒåŸºäºå¾ˆå¤šæ·»åŠ åˆ°AFNetworkingä¸­çš„çš„â€œé—å¤±ç‰¹å¾â€ç°åœ¨éƒ½è¢«åŒ…æ‹¬äº†çš„APIçš„ä»»åŠ¡ã€‚ ç„¶è€Œï¼Œå‡å¦‚ä½ æƒ³ä½¿ç”¨ä¸€äº›åœ¨AFNetworkingä¸­2.0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œè¯¸å¦‚åºåˆ—åŒ–å’Œå°†æ¥å¯¹UIKitçš„æ•´åˆï¼ˆæ·»åŠ åˆ°UIIImageViewåˆ†ç±»ä¸­ï¼‰ï¼Œç„¶åè¿™æ ·å¾ˆéš¾äº‰è¾©ä¸ä½¿ç”¨å®ƒï¼ æ³¨æ„ï¼šåœ¨AFNetworking2.0åˆ†æ”¯ä¸­ï¼Œå®ƒä»¬å·²ç»è½¬æ¢åˆ°ä½¿ç”¨NSURLSessionã€‚æ›´å¤šä¿¡æ¯çœ‹è¿™ç¯‡å¸–å­ï¼šhttps://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide ä»‹ç» Byte Clubåœ¨è¿™ç¯‡NSURLSessionæ•™ç¨‹ä¸­ï¼Œä½ å°†æ¢ç´¢è¿™ä¸ªæ–°çš„APIé€šè¿‡æ„å»ºä¸€ç¯‡æ—¥è®°å¥½å›¾ç‰‡åˆ†äº«appåŸºäº Dropbox Core API,å› ä¸ºæ˜¯é¡¶çº§æœºå¯†ç»„ç»‡å› æ­¤å§‘ä¸”å‘½åå®ƒByte Clubã€‚ è€ƒè™‘åˆ°è¿™ä¸ªè¯¾ç¨‹æ˜¯ä½ æ¥å—åˆ°Byte Clubçš„å®˜æ–¹é‚€è¯·ï¼ä»€ä¹ˆæ˜¯ä½ å¯èƒ½ä¼šé—®åˆ°çš„å…³äºByte Clubçš„ç¬¬ä¸€æ¡è§„åˆ™ï¼Ÿæ²¡äººè°ˆè®ºByte Clubâ€“é™¤äº†é‚£äº›è¶³å¤Ÿç‚«é…·çš„äººå°†ä¼šé˜…è¯»è¿™ä¸ªæ•™ç¨‹ã€‚å¹¶ä¸”é‚£äº›Androidç”¨æˆ·å®Œå…¨ä¸çŸ¥é“ï¼›ä»–ä»¬è¢«ä»–ä»¬ä¿©çš„ç”Ÿæ´»åŠ«æŒäº†ã€‚ ï¼š] å¼€å§‹æ„å»ºappè¿æˆ˜ä¸‹ä¸€ä¸ªç« èŠ‚ï¼Œå°†å……å½“è¢«Byte Clubç»„ç»‡é‚€è¯·ã€‚ ä¸»è¦åˆ°è¿™ä¸ªæ•™ç¨‹æ˜¯å‡è®¾ä½ å¯¹åŸºæœ¬çš„ç½‘ç»œæœ‰åŸºæœ¬çš„äº†è§£åœ¨å…ˆå‰çš„ç‰ˆæœ¬iOSã€‚å®ƒéå¸¸æœ‰ç”¨å‡å¦‚ä½ å·²ç»ä½¿ç”¨è¿‡è¯¸å¦‚NSURLConnectionæˆ–è€…NSURLSessionåœ¨è¿‡å»ã€‚å‡å¦‚åœ¨iOSæ–¹é¢ä½ æ˜¯ç½‘ç»œæ–¹é¢çš„æ–°æ‰‹ï¼Œåœ¨ç»§ç»­è¿™ä¸ªè¯¾ç¨‹ä¹‹å‰ä½ åº”è¯¥æŸ¥è¯¢æˆ‘ä»¬çš„iOSå­¦å¾’ç³»åˆ—ä½œä¸ºæœ€åˆçš„å¼€å‘è€…ã€‚ ç°åœ¨å¼€å§‹å§Byte Clubæ˜¯iOS å¼€å‘è€…ä¸“æœ‰çš„ç»„ç»‡ï¼Œä¸€èµ·æ¥åŠ å…¥æŒ‘æˆ˜ä½ çš„ç¼–ç¨‹å§ã€‚ç”±äºæ¯ä¸ªæˆå‘˜éƒ½æ˜¯è¿œç¨‹å·¥ä½œï¼Œåœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­æœ‰ä¸€ä¸ªæ˜¯è·¨è¶Šä¸–ç•Œï¼Œæˆå‘˜é€šè¿‡åˆ†äº«ä»–ä»¬â€œæˆ˜åœºâ€çš„å…¨æ™¯ç…§ç‰‡ä¹Ÿèƒ½æ‰¾åˆ°å®ƒçš„ä¹è¶£ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯Rayçš„åŠå…¬åœºæ‰€çš„å…¨æ™¯ç…§ç‰‡ï¼š æ³¨æ„ï¼šä½ å¯èƒ½æƒ³åˆ›å»ºä½ è‡ªå·±åŠå…¬å®¤çš„å…¨æ™¯ç…§ç‰‡â€“å®ƒå¾ˆæœ‰è¶£ï¼Œåœ¨è¿™ä¸ªè¯¾ç¨‹çš„åç»­ä¸­æˆ‘ä»¬å°†ä¼šå¤„ç†ã€‚ åœ¨ iOS 7ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“å¼€ç›¸æœºé€‰æ‹©ä¸€ä¸ªå«Panoï¼ˆå…¨æ™¯ï¼‰çš„æ ‡ç­¾ç…§ä¸€å¼ å…¨æ™¯ç…§ç‰‡ã€‚ åŠ å…¥ä½ å–œæ¬¢é‚£å¼ ï¼ŒæŠŠå®ƒè®¾ç½®æˆä½ é”å±ç•Œé¢çš„å¢™çº¸é€šè¿‡æ‰“å¼€è®¾ç½®è®©åé€‰æ‹©å¢™çº¸ \\é€‰æ‹©å¢™çº¸ \\æˆ‘çš„å…¨æ™¯ç…§ç‰‡ã€‚ å½“ç„¶-Byte Club æœ‰å®ƒè‡ªå·±çš„appï¼Œæˆ‘ä»¬æ¥è§è¯å¥‡è¿¹ã€‚ä½ å¯ä»¥å’Œå…¶ä»–æˆå‘˜ä½¿ç”¨appæ¥å®Œæˆç¼–ç¨‹æŒ‘æˆ˜æˆ–è€…åˆ†äº«å…¨æ™¯ç…§ç‰‡ã€‚åœ¨å¹•åï¼Œè¿™æ˜¯é€šè¿‡ç½‘ç»œå®ç°-æ˜ç¡®çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡Dropbox APIæ¥åˆ†äº«æ–‡ä»¶ã€‚ å¼€å§‹çš„å·¥ç¨‹æ¦‚è¿°é¦–å…ˆï¼Œä¸‹è½½æ•™ç¨‹å¼€å§‹çš„å·¥ç¨‹ã€‚ å¼€å§‹çš„å·¥ç¨‹åŒ…å«äº†ä¸ºä½ é¢„å…ˆå‡†å¤‡å¥½çš„UIï¼Œæ‰€ä»¥ä½ åªéœ€æŠŠç²¾åŠ›é›†ä¸­åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­appçš„ç½‘ç»œéƒ¨åˆ†ã€‚å¼€å§‹çš„å·¥ç¨‹ä¹ŸåŒ…å«ä¸€äº›å¤„ç†Dropboxæˆæƒçš„ä»£ç ,åœ¨åé¢ä½ å°†å­¦åˆ°æ›´å¤šã€‚ åœ¨Xcodeä¸­æ‰“å¼€å·¥ç¨‹è®©ååœ¨ä½ è®¾å¤‡æˆ–è€…æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œä½ åº”è¯¥çœ‹åˆ°åƒä¸‹é¢è¿™æ ·ï¼š ç„¶è€Œä½ è¿˜å¹¶ä¸èƒ½ç™»å½•å®ƒ-ä½ ä¸å¾—ä¸å…ˆé…ç½®appï¼Œä½ å°†åšä¸€ç‚¹ã€‚ ä¸‹ä¸€æ­¥æ‰“å¼€Main.storyboardçºµè§ˆä¸€ä¸‹æ•´ä¸ªappçš„è®¾è®¡ï¼š è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ä½¿ç”¨2ä¸ªæ ‡ç­¾çš„çš„TabBarController appï¼šä¸€ä¸ªæ˜¯ä¸ºäº†æŒ‘æˆ˜ç¼–ç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸ºäº†æ”¾å…¨æ™¯ç…§ç‰‡ã€‚è¿™é‡Œä¹Ÿæœ‰é¢„å…ˆè®©ç”¨æˆ·ç™»å½•åˆ°appä¸­çš„ä¸€æ­¥ã€‚ä½ å°†è¦é…ç½®ç™»å½•åœ¨ä½ åˆ›å»ºå®ŒDropboxå¹³å°ä¸‹çš„Appåã€‚ æ„Ÿåˆ°å¾ˆè½»æ¾æµè§ˆä¸€ä¸‹Appå‰©ä½™çš„éƒ¨åˆ†å¹¶ä¸”æ‰¾åˆ°åˆ°ç›®å‰ä¸ºæ­¢ç›¸ä¼¼çš„åœ°æ–¹ã€‚ä½ å°†ä¼šæ³¨æ„åˆ°é™¤äº†æˆæƒç»„ä»¶ï¼Œè¿™é‡Œæ²¡æœ‰æ£€ç´¢æŒ‘æˆ˜ç¼–ç¨‹æˆ–è€…å…¨æ™¯ç…§ç‰‡çš„ç½‘ç»œä»£ç -é‚£å°±æ˜¯ä½ çš„å·¥ä½œï¼ åˆ›å»ºä¸€ä¸ªæ–°çš„Dropboxå¹³å°Appä¸ºäº†å¼€å§‹ä½ çš„æ–°çš„Dropbox App,æ‰“å¼€ Dropbox App ä½äºhttps://www.dropbox.com/developers/appsçš„æ§åˆ¶å° ç”¨ä½ çš„Dropboxè´¦å·ç™»å½•ï¼Œå‡å¦‚æ²¡æœ‰ï¼Œæ²¡é—®é¢˜ï¼šé©¬ä¸Šåˆ›å»ºä¸€ä¸ªå…è´¹çš„Dropboxè´¦å·ã€‚å‡å¦‚è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨Dropboxçš„APIï¼Œä½ éœ€è¦é€šçŸ¥Dropboxçš„æ¡æ¬¾å’Œæ¡ä»¶ã€‚ ç»è¿‡è¿™ä¸ªæ³•å®šçš„ææ–™ä»¥åå°±æ˜¯ä¸Šè·¯äº†ï¼Œé€‰æ‹©åˆ›å»ºAppé€‰é¡¹ã€‚å°†å‘ˆç°ç»™ä½ ä¸€ç³»åˆ—é—®é¢˜-æä¾›ä¸‹é¢çš„ç­”æ¡ˆ What type of app do you want to create? Choose: Dropbox API app What type of data does your app need to store on Dropbox? Choose: Files and Datastore Can your app be limited to its own, private folder? Choose: No â€“ My App needs access to files already on Dropbox What type of files does your app need access to? Choose: All File Types æœ€ç»ˆï¼Œä¸ºä½ çš„Appå‡†å¤‡ä¸€ä¸ªåå­—ï¼Œé€‰æ‹©ä»€ä¹ˆå¹¶æ²¡æœ‰å…³ç³»åªæœ‰å®ƒæ˜¯å”¯ä¸€çš„ã€‚å‡å¦‚ä½ é€‰æ‹©äº†ä¸€ä¸ªåˆ«äººå·²ç»åœ¨ä½¿ç”¨çš„åå­—Dropbox å°†ä¼šå‘Šè¯‰ä½ ã€‚ä½ çš„å±å¹•åº”è¯¥çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š ç‚¹å‡»Create Appï¼Œä½ å°†å¼€å§‹ä¸Šè·¯äº†ï¼ ä¸‹ä¸€ä¸ªå±å¹•ä½ å°†çœ‹åˆ°æ˜¾ç¤ºåˆ°å±å¹•ä¸­çš„åŒ…å« App key å’Œ App secret : å…ˆä¸è¦å…³é—­è¿™ä¸ªå±å¹•ï¼Œä½ å°†éœ€è¦éœ€è¦ä¸‹ä¸€æ­¥çš„App Keyå’ŒApp Secretã€‚ æ‰“å¼€Dropbox.mæ–‡ä»¶æ‰¾åˆ°ä¸‹é¢è¿™äº›è¡Œï¼š 123#warning INSERT YOUR OWN API KEY and SECRET HEREstatic NSString *apiKey = @&quot;YOUR_KEY&quot;;static NSString *appSecret = @&quot;YOUR_SECRET&quot;; å¡«å†™ä½ çš„app key å’Œ secretï¼Œè®©ååˆ é™¤ #warning lineï¼Œç°åœ¨ä½ å¯ä»¥å…³é—­Dropbox Web App é¡µé¢ã€‚ ä¸‹é¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åœ¨ä½ Dropboxä¸»æ–‡ä»¶ä¸‹çš„æ ¹ç›®å½•ç»™å®ƒå‘½ä¸€ä¸ªä½ æƒ³è¦çš„åå­—ã€‚å‡å¦‚ä½ æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ä¸ªå’Œå…¶ä»–çš„Dropboxç”¨æˆ·åˆ†äº«ï¼Œå‘é€ä»–ä»¬åœ¨æ„å»º Byte Club Appçš„æ—¶å€™ï¼Œä»–ä»¬å°†èƒ½å¤Ÿåˆ›å»ºç¬”è®°å¹¶ä¸”èƒ½å¤Ÿä¸Šä¼ æ‰€æœ‰äººéƒ½èƒ½çœ‹å¾—è§çš„ç…§ç‰‡ã€‚ åœ¨Dropbox.mä¸­æ‰¾æ‰“ä¸‹é¢è¿™äº›è¡Œï¼š 12#warning THIS FOLDER MUST BE CREATED AT THE TOP LEVEL OF YOUR DROPBOX FOLDER, you can then share this folder with othersNSString * const appFolder = @&quot;byteclub&quot;; æ”¹å˜å­—ç¬¦ä¸²çš„å€¼ï¼Œè®¾ç½®æˆä½ åˆ›å»ºçš„Dropboxæ–‡ä»¶å¤¹çš„åå­—ï¼Œè®©ååˆ é™¤ #warning pragma. ä¸ºäº†æŠŠè¿™ä¸ªappåˆ†å‘ç»™å…¶ä»–ç”¨æˆ·ï¼Œç»™ä»–ä»¬æ¥å…¥access tokens,ä½ å°†éœ€è¦ä¸ºä½ çš„Dropbox å¹³å° Appæ‰“å¼€Enable additional usersè®¾ç½®ã€‚ å»åœ¨https://www.dropbox.com/developers/appsDropbox appçš„æ§åˆ¶å°ã€‚ç‚¹å‡»ä½ app åç§°ã€‚ç„¶åç‚¹å‡»Enable Additional UsersæŒ‰é’®ã€‚å°†å‡ºç°ä¸€ä¸ªçŠ¶æ€å¯¹è¯æ¡†è¡¨æ˜ä½ å·²ç»å¢åŠ äº†ä½ çš„ç”¨æˆ·é™åˆ¶ã€‚ç‚¹å‡»Okayå…³é—­å¯¹è¯æ¡†ã€‚ä½ çš„App é¡µé¢å°†åƒä¸‹é¢è¿™æ ·æ˜¾ç¤ºï¼š æ³¨æ„ï¼šä½ å¯èƒ½æ³¨æ„åˆ°å½“ä½ æ­£åœ¨å¼€å‘ä½ çš„appçš„æ—¶å€™ï¼Œä½ å¯ä»¥æ¥å…¥å¤šè¾¾100ä¸ªç”¨æˆ·ã€‚å½“ä½ å‡†å¤‡å‘å¸ƒappé”€å”®çš„æ—¶å€™ï¼Œä½ å¿…é¡»ç”³è¯·ç”Ÿäº§çŠ¶æ€ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»Apply for productionæŒ‰é’®æ¥å‘é€ç»™Dropboxä¸€äº›é¢å¤–çš„ä¿¡æ¯ã€‚ Dropbox å°†éšåå®¡æ ¸ä½ çš„App æ¥ç¡®ä¿å®ƒéµå®ˆæŒ‡å—ï¼Œå‡å¦‚æ‰€æœ‰çš„ä¸€åˆ‡è¿›è¡Œå¾—é¡ºåˆ©çš„è¯ï¼Œä½ å°†æ‰“å¼€ä½ çš„appçš„ APIæ¥å…¥æ— çº¿çš„ç”¨æˆ·ã€‚ Dropbox æˆæƒ: æ¦‚è§ˆå‡å¦‚ä½ æ›¾ç»ä½¿ç”¨è¿‡ç¬¬ä¸‰æ–¹twitterå®¢æœç«¯appï¼ŒåƒTweetBot,ä½ å°†ä¼šç†Ÿæ‚‰OAuthæˆæƒå¤„ç†æ­¥éª¤ä»ä¸€ä¸ªç”¨æˆ·çš„è§’åº¦ã€‚OAuthæˆæƒæ¥å…¥è¿‡ç¨‹å¯¹ä½ appæ¥è¯´æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ æ„å»ºè¿è¡Œä½ çš„appï¼ŒæŒ‰ç…§æ­¥éª¤ç™»å½•ã€‚ä½ å°†çœ‹åˆ°ä¸€ä¸ªæœ‰2ä¸ªæ ‡ç­¾çš„ç©ºç™½å±å¹•ï¼Œä¸€ä¸ªæ˜¯Notesï¼Œä¸€ä¸ªæ˜¯PanoPhotosï¼Œå¦‚ä¸‹å›¾æ˜¾ç¤ºï¼š OAuthæˆæƒå‘ç”Ÿåœ¨3å’Œé«˜çº§çš„æ­¥éª¤ï¼š è·å–ç”¨æ¥å¤„ç†å‰©ä¸‹çš„æˆæƒä¸€ä¸ªOAuthè¯·æ±‚ tokenã€‚è¿™æ˜¯è¯·æ±‚tokenã€‚ ä¸€ä¸ªweb é¡µé¢è¢«å‘ˆç°åˆ°ç”¨æˆ·é¢å‰é€šè¿‡ä»–ä»¬çš„webæµè§ˆå™¨ã€‚æ²¡æœ‰è¿™ä¸€æ­¥çš„ç”¨æˆ·æˆæƒï¼Œå¯¹ä½ çš„åº”ç”¨æƒ³è·å–ä¸€ä¸ªç¬¬ä¸‰æ­¥ä¸­çš„æ¥å…¥tokenå‡ ä¹ä¸å¯èƒ½ã€‚ åœ¨ç¬¬äºŒæ­¥å®Œæˆåï¼Œåº”ç”¨è°ƒç”¨webæœåŠ¡æ¥äº¤æ¢ä¸´æ—¶è¯·æ±‚tokenï¼ˆä»ç¬¬ä¸€æ­¥ä¸­çš„ï¼‰ä¸ºäº†ä¸€ä¸ªå°†å­˜å‚¨åœ¨appé‡Œé¢çš„æŒä¹…æ¥å…¥tokenã€‚ æ³¨æ„ï¼šä¸ºäº†ä¿è¯è¿™ä¸ªæ•™ç¨‹çš„ç®€æ´ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—è¿›è¡Œæ›´è¯¦ç»†çš„è®²è§£å…³äºè¿™é‡ŒDropboxæˆæƒå·¥ä½œã€‚ç„¶è€Œï¼Œå‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šç‚¹å‡»æ•´ä¸ªæ•™ç¨‹çš„å®Œå…¨ç‰ˆæœ¬ï¼Œå®ƒæ˜¯iOS 7 by Tutorials.çš„ä¸€éƒ¨åˆ†ã€‚ NSURLSession çš„ä¸€ç³»åˆ—ç±»Appleå·²ç»æŠŠNSURLSessionæè¿°æˆä¸€ä¸ªæ–°ç±»å’Œä¸€ç³»åˆ—æ—§ç±»çš„ç»„åˆã€‚è¿™äº›æ–°çš„å·¥å…·æ˜¯ä¸ºäº†å¤„ç† ä¸Šä¼ ï¼Œä¸‹è½½ï¼Œå¤„ç†æˆæƒå·²ç»å¤„ç†åœ¨HTTPåè®®é‡Œé¢çš„ä»»ä½•äº‹æƒ…ã€‚ ä¸€ä¸ªNSURLSessionç”¨ä¸€ä¸ªå¸¦å¯é€‰ä»£ç†çš„NSURLSessionConfigurationæ„é€ ã€‚åœ¨ä½ åˆ›å»ºä¼šè¯ä»¥åï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ»¡è¶³ä½ çš„ç½‘ç»œéœ€è¦é€šè¿‡åˆ›å»ºNSURLSessionTaskçš„ä»»åŠ¡ã€‚ NSURLSessionConfigurationè¿™é‡Œæœ‰ä¸‰ç§æ–¹å¼åˆ›å»ºNSURLSessionConfiguration: defaultSessionConfiguration - åˆ›å»ºä¸€ä¸ªä½¿ç”¨å…¨å±€ç¼“å­˜ï¼Œcookieçš„é…ç½®å¯¹è±¡å’Œå‡­è¯å­˜å‚¨çš„å¯¹è±¡ã€‚è¿™ä¸ªé…ç½®ä¼šä½¿ä½ çš„ä¼šè¯æœ€åƒNSURLConnectionã€‚ ephemeralSessionConfiguration - è¿™ä¸ªé…ç½®æ˜¯ç”¨æ¥ä½œä¸ºâ€˜ç§æœ‰çš„â€™ä¼šè¯å¹¶ä¸”ä¸ä¼šæŒä¹…åŒ–å­˜å‚¨ç¼“å­˜ï¼Œcookieï¼Œæˆ–è€…ä¿¡ç”¨å­˜å‚¨å¯¹è±¡ã€‚ backgroundSessionConfiguration - å½“ä½ æƒ³è¦ä»è¿œç¨‹æ¨é€æˆ–è€…å½“appè¢«æš‚æ—¶æŒ‚èµ·æ—¶è¿›è¡Œç½‘ç»œä¸šåŠ¡ä½¿ç”¨è¿™ä¸ªè¿™ä¸ªé…ç½®ã€‚å‚è€ƒ17ç« å’Œ18ç« åœ¨ iOS 7 by Tutorials,Beginning and Intermediate Multitasking,æœ‰æ›´è¯¦ç»†çš„è®²è§£ã€‚ ä¸€æ—¦ä½ åˆ›å»ºä¸€ä¸ªNSURLSessionConfigurationå¯¹è±¡ï¼Œä½ å°±å¯ä»¥åœ¨å®ƒä¸Šé¢è®¾ç½®å„ç§æ¥å£åƒè¿™æ ·ï¼š 1234567891011121314NSURLSessionConfiguration *sessionConfig =[NSURLSessionConfiguration defaultSessionConfiguration];// 1sessionConfig.allowsCellularAccess = NO;// 2[sessionConfig setHTTPAdditionalHeaders: @&#123;@&quot;Accept&quot;: @&quot;application/json&quot;&#125;];// 3sessionConfig.timeoutIntervalForRequest = 30.0;sessionConfig.timeoutIntervalForResource = 60.0;sessionConfig.HTTPMaximumConnectionsPerHost = 1; ä½ é™åˆ¶äº†ç½‘ç»œæ“ä½œåªæœ‰wifiæ‰èƒ½è¿›è¡Œã€‚ è¿™å°†è®¾ç½®æ‰€æœ‰çš„è¯·æ±‚åªæ¥å— JSONç±»å‹çš„å“åº”ã€‚ è¿™äº›æ¥å£å°†é…ç½®èµ„æºæˆ–è€…è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä½ ä¹Ÿå¯ä»¥é™åˆ¶ä½ çš„appå¯¹ä½ çš„ä¸»æœºåªèƒ½æœ‰ä¸€ä¸ªç½‘ç»œè¿æ¥ã€‚ è¿™äº›ä»…ä»…æ˜¯ä½ èƒ½é…ç½®çš„ä¸€äº›ä¸œè¥¿ï¼Œç¡®ä¿æ£€æŸ¥æ‰€æœ‰åˆ—è¡¨çš„æ–‡æ¡£ã€‚ NSURLSessionNSURLSessionè¢«è®¾è®¡æˆæ›¿ä»£NSURLConnectionçš„APIã€‚Sessionsåšäº†ä»–ä»¬çš„å·¥ä½œé€šè¿‡ä»–ä»¬çš„éƒ¨ä¸‹ï¼Œä¹Ÿå°±æ˜¯éå¸¸å‡ºåçš„NSURLSessionTaskå¯¹è±¡ã€‚ä½¿ç”¨NSURLSessionä½ èƒ½å¤Ÿåˆ›å»ºä»»åŠ¡ä½¿ç”¨åŸºäºblockçš„ä¾¿åˆ©æ–¹æ³•ï¼Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œæˆ–è€…åŒæ—¶ä¸¤è€…ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä½ æƒ³è¦ä¸‹è½½ä¸€å¼ å›¾ç‰‡ï¼ˆ *challenge hint *ï¼‰,ä½ å°±éœ€è¦åˆ›å»ºä¸€ä¸ªNSURLSessionDownloadTaskã€‚ ç¬¬ä¸€æ­¥ï¼Œä½ éœ€è¦åˆ›å»º(ä¼šè¯)sessionã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213// 1NSString *imageUrl =@&quot;http://www.raywenderlich.com/images/store/iOS7_PDFonly_280@2x_authorTBA.png&quot;;// 2NSURLSessionConfiguration *sessionConfig = [NSURLSessionConfiguration defaultSessionConfiguration];// 3NSURLSession *session = [NSURLSession sessionWithConfiguration:sessionConfig delegate:self delegateQueue:nil]; Ok,è¿™ä¸ªä»…ä»…æ˜¯ä½ ç›®å‰æ‰€çœ‹åˆ°çš„ä¸€ç‚¹ç‚¹ä¸åŒã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥é‡æ¸©ã€‚ ç”¨è¿™ä¸ªä»£ç ç‰‡æ®µæˆ‘ä»¬å°†ä¸€æ ·è¿›è¡Œä¸‹è½½åœ¨ä¸¤ä¸ªä»»åŠ¡ä¸­ã€‚ ä½ æ€»æ˜¯ä»¥åˆ›å»ºNSURLConfigurationå¼€å§‹ã€‚ è¿™é‡Œåˆ›å»ºä¸€ä¸ªä¼šè¯ä½¿ç”¨ç°åœ¨çš„ç±»ä½œä¸ºä»£ç†ã€‚ åœ¨ä½ åˆ›å»ºä¼šè¯åï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå¸¦ä¸€ä¸ªcompletion handlerçš„ä»»åŠ¡ä¸‹è½½è¿™å¼ å›¾ç‰‡ï¼Œæƒ³ä¸‹é¢è¿™æ ·: 1234567891011121314151617181920// 1NSURLSessionDownloadTask *getImageTask =[session downloadTaskWithURL:[NSURL URLWithString:imageUrl] completionHandler:^(NSURL *location, NSURLResponse *response, NSError *error) &#123; // 2 UIImage *downloadedImage = [UIImage imageWithData: [NSData dataWithContentsOfURL:location]]; //3 dispatch_async(dispatch_get_main_queue(), ^&#123; // do stuff with image _imageWithBlock.image = downloadedImage; &#125;);&#125;];// 4[getImageTask resume]; Ah ha!ç°åœ¨è¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹åƒç½‘ç»œä»£ç ï¼ ä»»åŠ¡æ€»æ˜¯è¢«sessionsåˆ›å»ºã€‚ä»»åŠ¡ä¸€æ—¦è¢«åŸºäºblockçš„æ–¹æ³•åˆ›å»ºã€‚è®°ä½ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨NSURLSessionDownloadDelegateæ¥è·Ÿè¸ªä¸‹è½½è¿›åº¦ã€‚æ‰€ä»¥ä½ å°†è·å¾—æœ€å¥½çš„ä¸¤ä¸ªå•è¯ï¼ï¼ˆ *hint for challenge *ï¼‰ -URLSession:downloadTask :didWriteData:totalBytesWritten :totalBytesExpectedToWrite: è¿™é‡Œä½ ä½¿ç”¨åœ¨ completion handleræä¾›çš„æœ¬åœ°å˜é‡æ¥è·å–ä¸€ä¸ªæŒ‡å‘å›¾ç‰‡çš„æŒ‡é’ˆã€‚ æœ€ç»ˆä½ èƒ½å¤Ÿï¼Œä¾‹å¦‚ï¼Œæ›´æ–° UIIImageViewçš„å›¾ç‰‡æ¥æ˜¾ç¤ºæ–°çš„æ–‡ä»¶ã€‚(hint hint â˜º) ä½ æ€»å¾—è‡ªå·±å¯åŠ¨ä»»åŠ¡ï¼ è®°ä½æˆ‘åœ¨å‰é¢æ‰€è¯´çš„ï¼Œä¸€ä¸ªä¼šè¯ä¹Ÿå¯ä»¥åˆ›å»ºå°†è¦å‘é€æ¶ˆæ¯ç»™ä»£ç†æ–¹æ³•æ¥é€šçŸ¥ä½ å®Œæˆç­‰çš„ä»»åŠ¡ã€‚ åº”è¯¥é•¿æˆè¿™æ ·ï¼Œä½¿ç”¨ç›¸åŒçš„ä¼šè¯ä»ä¸Šé¢ï¼š 12345// 1NSURLSessionDownloadTask *getImageTask = [session downloadTaskWithURL:[NSURL URLWithString:imageUrl]];[getImageTask resume]; è¿™å½“ç„¶æ˜¯ç¡®å®šä½¿ç”¨æ›´å°‘çš„ä»£ç â˜º ç„¶è€Œï¼Œå‡å¦‚ä½ åªè¿™æ ·åšï¼Œä½ å°†ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚ä½ éœ€è¦è®©ä½ çš„ä»£ç†å®ç°ä¸€äº›NSURLSessionDownloadDelegateåè®®çš„æ–¹æ³•ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦è·å¾—é€šçŸ¥å½“ä¸‹è½½å®Œæˆæ—¶ï¼š 123456-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidFinishDownloadingToURL:(NSURL *)location&#123; // use code above from completion handler&#125; å†æœ‰ä½ éœ€è¦æä¾›å°†è¦ä¸‹è½½çš„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œç„¶åä½ å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥å¤„ç†å›¾ç‰‡ã€‚ æœ€åï¼Œå‡å¦‚ä½ éœ€è¦è·Ÿè¸ªä¸‹è½½è¿›åº¦ï¼Œå¯¹äºä»»åŠ¡åˆ›å»ºæ–¹æ³•ï¼Œä½ éœ€è¦åƒä¸‹é¢è¿™æ ·ç”¨ï¼š 123456789-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWrittentotalBytesWritten:(int64_t)totalBytesWrittentotalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite&#123; NSLog(@&quot;%f / %f&quot;, (double)totalBytesWritten, (double)totalBytesExpectedToWrite);&#125; æ­£å¦‚ä½ æ‰€è§ï¼ŒNSURLSessionTaskæ˜¯ä¸€åŒ¹é€šè¿‡ç½‘ç»œæ¥å¹²æ´»çš„çœŸå®çš„é©®é©¬ã€‚ NSURLSessionTaskç›®å‰ä¸ºæ­¢ä½ å·²ç»çŸ¥é“NSURLSessionDataTaskå’ŒNSURLSessionDownloadTaskæ€æ ·ä½¿ç”¨äº†ã€‚è¿™ä¸¤ä¸ªçš„ä»»åŠ¡æ˜¯æ¥è‡ªä»–ä»¬å…±åŒçš„åŸºç±»NSURLSessionTaskï¼Œä½ å¯ä»¥åœ¨è¿™ç±»çœ‹åˆ°ï¼š NSURLSessionTaskåœ¨ä½ çš„ä¼šè¯ä¸­æ˜¯ä»»åŠ¡çš„åŸºç±»ï¼›ä»–ä»¬åªèƒ½é€šè¿‡ä¸€ä¸ªä¼šè¯åˆ›å»ºå¹¶ä¸”å®ƒä»¬æ˜¯ä¸‹é¢å­ç±»ä¸­çš„ä¸€ä¸ªã€‚ NSURLSessionDataTaskè¿™ä¸ªä»»åŠ¡å‘èµ·HTTP GETè¯·æ±‚æ¥ä»æœæœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚æ•°æ®è¢«è¿”å›ä»¥NSDataçš„å½¢å¼è¿”å›ã€‚ä½ åº”è¯¥åœ¨éšåå°†å…¶æŠŠè¿™ä¸ªæ•°æ®è½¬æ¢æˆæ­£ç¡®çš„æ•°æ®ç±»å‹æ¯”å¦‚XML,JSON,UIImageï¼Œplistç­‰ç­‰ã€‚ 123456NSURLSessionDataTask *jsonData = [session dataTaskWithURL:yourNSURL completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; // handle NSData&#125;]; NSURLSessionUploadTaskä½¿ç”¨è¿™ä¸ªç±»å½“ä½ éœ€è¦ä¸Šä¼ ä¸€äº›ä¸œè¥¿åˆ°webæœåŠ¡å™¨æ—¶ï¼Œä½¿ç”¨HTTP POST æˆ–è€… PUT å‘½ä»¤ã€‚ä»»åŠ¡å¸¦æ¥ä¹Ÿå…è®¸ä½ ç›‘è§†ç½‘ç»œçŠ¶å†µå½“å®ƒæ­£åœ¨ä¼ è¾“çš„æ—¶å€™ã€‚ ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼š 12345NSData *imageData = UIImageJPEGRepresentation(image, 0.6);NSURLSessionUploadTask *uploadTask = [upLoadSession uploadTaskWithRequest:request fromData:imageData]; åœ¨è¿™ç±»ä»»åŠ¡è¢«åˆ›å»ºä»ä¸€ä¸ªä¼šè¯ä¸­å¹¶ä¸”å›¾ç‰‡ä»¥NSDataçš„å½¢å¼ä¸Šä¼ ã€‚è¿™é‡Œä¹Ÿå¯ä»¥é€šä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æµçš„æ–¹æ³•æ¥è¿›è¡Œä¸Šä¼ ã€‚ NSURLSessionDownloadTaskNSURLSessionDownloadTaskè®©é€šè¿‡è¿œç¨‹æœåŠ¡ä¸‹è½½æ–‡ä»¶å˜å¾—è¶…çº§ç®€å•ï¼Œå¹¶ä¸”å¯ä»¥æš‚åœå’Œæ¢å¤ä¸‹è½½åªè¦ä½ æƒ³ã€‚è¿™ä¸ªå­ç±»æœ‰åˆ«äºå…¶ä»–ä¸¤ä¸ªã€‚ è¿™ä¸ªç±»å‹çš„ä»»åŠ¡ç›´æ¥å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚ åœ¨ä¸‹è½½ä¼šè¯ä¸­å°†è°ƒç”¨URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesExpectedToWrite:æ¥æ›´æ–°çŠ¶æ€ä¿¡æ¯ã€‚ å½“ä»»åŠ¡å®Œæˆæ—¶ï¼ŒURLSession:downloadTask:didFinishDownloadingToURL: è¢«è°ƒç”¨ã€‚è¿™å°±æ˜¯ä½ è¯¥ä¿å­˜æ–‡ä»¶ä»ä¸´æ—¶ä½ç½®åˆ°ä¸€ä¸ªæ°¸ä¹…ä½ç½®çš„æ—¶å€™ã€‚ å½“ä¸‹è½½å¤±è´¥æˆ–è€…å–æ¶ˆæ—¶ï¼Œä½ å¯ä»¥è®©æ•°æ®é‡æ–°å¼€å§‹ä¸‹è½½ã€‚ è¿™ä¸ªç‰¹æ€§å°†æå…¶æœ‰ç”¨å½“ä½ åœ¨ä¸‹è½½ä¸€ä¸ªByte Clubå®šä½ å…¨æ™¯ç…§ç‰‡ç»™ä½ çš„è®¾å¤‡çš„ç›¸æœºèƒ¶å·ã€‚ä½ çœ‹åˆ°çš„ä¸€ä¸ªä¸‹è½½ä»»åŠ¡ä¾‹å­åœ¨ä¸Šé¢ä¸‹è½½å›¾ç‰‡ç‰‡æ®µä¸­ã€‚ ä¸Šè¿°å…¨éƒ¨æ‰€æœ‰çš„ä¸Šè¿°ä»»åŠ¡è¢«åˆ›å»ºåœ¨ä¸€ä¸ªæš‚åœçš„çŠ¶æ€ï¼›åœ¨åˆ›å»ºä¸€ä¸ªä»»åŠ¡æ—¶ä½ éœ€è¦è°ƒç”¨å®ƒçš„ç»§ç»­æ–¹æ³•åƒä¸‹é¢æ¼”ç¤ºçš„é‚£æ ·ï¼š 1[uploadTask resume]; å½“ä½ ä¸€æ¬¡ä¸åªç®¡ç†ä¸€ä¸ªä»»åŠ¡æ—¶ï¼ŒtaskIdentifieræ¥å£å…è®¸ä½ å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªåœ¨ä¼šè¯ä¸­çš„ä»»åŠ¡ è¿™å°±æ˜¯ï¼æ—¢ç„¶ä½ å·²ç»çŸ¥é“äº†NSURLSessionç³»åˆ—çš„ä¸»è¦ç±»ï¼Œè®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ã€‚ Sharing notes with NSURLSessionOKï¼Œè¿™ä¸æ˜¯æ­»äº¡è¯—ç¤¾ï¼Œè¿™æ˜¯Byte Club!æ˜¯æ—¶å€™å¼€å§‹çœ‹çœ‹ä¸€ä¸‹è¿™ä¸ªçš„ç½‘ç»œä»£ç åœ¨èµ·ä½œç”¨äº†ã€‚ ä½ éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥ç»™Byte Clubçš„å…¶ä»–æˆå‘˜å‘é€æ¶ˆæ¯ã€‚æ—¢ç„¶ä½ å·²ç»è®¾ç½®äº†æ¥å…¥tokenï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å®ä¾‹åŒ–NSURLSesssionå¯¹è±¡ï¼Œè®©åè°ƒç”¨ä½ çš„ç¬¬ä¸€ä¸ªDropbox APIã€‚ Creating an NSURLSessionæ·»åŠ ä¸‹é¢çš„æ¥å£åˆ° NotesViewController.m æ–‡ä»¶ï¼Œå°±åœ¨ NSArray *notes è¡Œçš„åé¢ï¼š 1@property (nonatomic, strong) NSURLSession *session; ä½ å°†åˆ›é€ æ‰€æœ‰ä½ çš„ä¸‹å±ä»ä¸Šé¢çš„sessionä¸­ã€‚ æ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°NotesViewController.må°±åœ¨initWithStyleæ–¹æ³•çš„ä¸Šé¢ï¼š 123456789101112131415- (id)initWithCoder:(NSCoder *)aDecoder&#123; self = [super initWithCoder:aDecoder]; if (self) &#123; // 1 NSURLSessionConfiguration *config = [NSURLSessionConfiguration ephemeralSessionConfiguration]; // 2 [config setHTTPAdditionalHeaders:@&#123;@&quot;Authorization&quot;: [Dropbox apiAuthorizationHeader]&#125;]; // 3 _session = [NSURLSession sessionWithConfiguration:config]; &#125; return self;&#125; ä¸‹é¢æ˜¯ä¸Šé¢ä»£ç æ³¨é‡Šçš„æ³¨é‡Šçš„è§£é‡Šï¼š ä½ çš„appè°ƒç”¨ initWithCoderå½“ä½ å®ä¾‹åŒ–ä¸€ä¸ªæ§åˆ¶å™¨ä»ä¸€ä¸ªæ•…äº‹ç‰ˆä¸­;å› æ­¤è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„æ—¶åˆ»åˆå§‹åŒ–å’Œåˆ›å»ºNSURLSessionã€‚ä½ å¹¶ä¸æƒ³ç§¯æç¼“å­˜æˆ–è€…æŒä¹…åŒ–è¿™é‡Œï¼Œæ‰€æœ‰ä½ ä½¿ç”¨ephemeralSessionConfigurationä¾¿åˆ©æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ²¡æœ‰æŒä¹…åŒ–ç¼“å­˜ï¼Œcookiesï¼Œæˆ–è€…è®¤è¯å­˜å‚¨çš„ä¼šè¯ã€‚è¿™æ˜¯ä¸€ä¸ªâ€ç§æœ‰æµè§ˆâ€é…ç½®ã€‚ ä¸‹ä¸€æ­¥ï¼Œä½ æ·»åŠ æˆæƒHTTPå¤´é“é…ç½®å¯¹è±¡ä¸­ã€‚apiAuthorizationHeaderæ˜¯ä¸€ä¸ªæˆ‘å†™çš„è¾…åŠ©æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥æˆæƒåˆ¶å®šçš„æ ¼å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²åŒ…å«access tokenï¼Œtoken secretå’Œä½ çš„ Dropbox App API ç§˜é’¥ã€‚è®°ä½è¿™æ˜¯å¿…è¦çš„å› ä¸ºæ¯ä¸ªå¯¹ Dropbox API çš„è°ƒç”¨éƒ½éœ€è¦è¢«æˆæƒã€‚ æœ€åï¼Œä½ ä½¿ç”¨ä¸Šé¢çš„é…ç½®åˆ›å»ºäº†NSURLSessionã€‚ ä¼šè¯ç°åœ¨å‡†å¤‡å¥½åˆ›å»ºåœ¨ä½ appä¸­ä½ æ‰€éœ€è¦çš„ä»»ä½•ç½‘ç»œä»»åŠ¡ã€‚ GET Notes through the Dropbox APIä¸ºäº†æ¨¡æ‹Ÿä¸€æ¡ç¬”è®°è¢«å¦ä¸€ä¸ªç”¨æˆ·æ·»åŠ ï¼Œæ·»åŠ ä»»ä½•ä½ åœ¨è®¾ç½®åœ¨ä½ çš„Dropboxæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸­é€‰æ‹©çš„æ–‡æœ¬æ–‡ä»¶ã€‚ä¾‹å¦‚ä½äºDropboxæ–‡ä»¶å¤¹ä¸‹ byteclub ä¸‹é¢æ˜¾ç¤ºçš„ test.txtï¼š ç­‰å¾…ç›´åˆ°Dropboxç¡®è®¤å®ƒå·²ç»åŒæ­¥å®Œä½ çš„æ–‡ä»¶ï¼Œè®©åç»§ç»­ä¸‹é¢ä»£ç ã€‚ æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°ç©ºçš„notesOnDropBoxæ–¹æ³•ä¸­åœ¨NotesViewController.m: 1234567891011121314151617[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;// 1NSURL *url = [Dropbox appRootURL];// 2NSURLSessionDataTask *dataTask =[self.session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; if (!error) &#123; // TODO 1: More coming here! &#125; &#125;];// 3 [dataTask resume]; è¿™ä¸ªæ–¹æ³•çš„ç›®æ ‡æ˜¯æ£€ç´¢åœ¨appçš„Dropboxæ–‡ä»¶ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ã€‚è®©æˆ‘ä»¬æ¥é‡æ¸©ä¸€ä¸‹è¿™æ˜¯æ€æ ·å·¥ä½œçš„ä¸€æ­¥æ­¥ã€‚ åœ¨Dropboxä¸­ï¼Œä½ èƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹é€šè¿‡è¿›è¡Œä¸€ä¸ªå·²ç»æˆæƒçš„GETè¯·æ±‚åˆ°æŸä¸ªç‰¹åˆ«çš„URL - åƒhttps://api.dropbox.com/1/metadata/dropbox/byteclub. æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªä¾¿åˆ©çš„æ–¹æ³•åœ¨Dropboxç±»ä¸­æ¥ä¸ºä½ äº§ç”Ÿè¿™ä¸ªURLã€‚ NSURLSessionç”¨ä¾¿åˆ©æ„é€ æ–¹æ³•æ¥ç®€å•çš„åˆ›å»ºå„ç§ç±»å‹çš„ä»»åŠ¡ã€‚è¿™æ˜¯ä½ åˆ›å»ºçš„ä¸€ä¸ªæ•°æ®ä»»åŠ¡ä¸ºäº†æ‰§è¡Œä¸€ä¸ªGETè¯·æ±‚åˆ°é‚£ä¸ªURLã€‚å½“è¯·æ±‚å®Œæˆæ—¶ï¼Œä½ çš„completionHandler blockè¢«è°ƒç”¨ã€‚ä¸€ä¼šå„¿ä½ å°†æ·»åŠ ä¸€ä¸‹ä»£ç åˆ°è¿™é‡Œã€‚ è®°ä½ä¸€ä¸ªä»»åŠ¡é»˜è®¤æ˜¯ä¸€ä¸ªæš‚åœçš„çŠ¶æ€,å› æ­¤ä½ éœ€è¦è°ƒç”¨æ¢å¤æ–¹æ³•æ¥å¯åŠ¨è¿è¡Œã€‚ é‚£å°±æ˜¯æ‰€æœ‰ä½ éœ€è¦åšçš„æ¥å¼€å§‹ä¸€ä¸ªGETè¯·æ±‚-ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ä»£ç åˆ°è§£æçš„ç»“æœä¸­ã€‚æ·»åŠ ä¸‹é¢çš„è¿™äº›è¡Œåˆ°â€TUDO 1â€æ³¨é‡Šçš„åé¢: 123456789101112131415161718// 1NSHTTPURLResponse *httpResp = (NSHTTPURLResponse *) response;if (httpResp.statusCode == 200) &#123; NSError *jsonError; // 2 NSDictionary *notesJSON = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&amp;jsonError]; NSMutableArray *notesFound = [[NSMutableArray alloc] init]; if (!jsonError) &#123; // TODO 2: More coming here! &#125;&#125; ä¸‹é¢æ˜¯ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†: ä½ çŸ¥é“ä½ å·²ç»å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œæ‰€ä»¥å“åº”å°†æ˜¯ä¸€ä¸ªHTTPPå“åº”ã€‚å› æ­¤è¿™é‡Œä½ å¯ä»¥æŠ›å‡ºNSURLResponseåˆ°ä¸€ä¸ªNSHTTPURLRequestå“åº”ä»¥ä¾¿ä½ èƒ½å¤Ÿæ¥å…¥åˆ°æ¥å£çš„çŠ¶æ€ç ã€‚å‡å¦‚ä½ æ”¶åˆ°äº†ä¸€ä¸ªHTTPçŠ¶æ€ç 200ï¼Œç„¶åä¸€åˆ‡æ­£å¸¸ã€‚ HTTP é”™è¯¯ç ä¸¾ä¾‹ï¼š 400 - è¾“å…¥å‚æ•°é”™è¯¯ã€‚é”™è¯¯æ¶ˆæ¯å°†è¡¨æ˜é‚£ä¸ªå’Œä¸ºä»€ä¹ˆé”™è¯¯ã€‚ 401 - tokené”™è¯¯æˆ–è€…å¤±æ•ˆã€‚è¿™ä¸ªå¯èƒ½å‘ç”Ÿå‡å¦‚ç”¨æˆ·æˆ–è€…Dropboxè¢«æ’¤é”€æˆ–è€…æ¥å…¥tokenè¿‡æœŸã€‚ä½ å¯ä»¥é€šè¿‡é‡æ–°æˆæƒä¿®å¤è¿™ä¸ªç”¨æˆ·ã€‚ 403 - é”™è¯¯çš„æˆæƒè¯·æ±‚ï¼ˆé”™è¯¯çš„ç”¨æˆ·é”®ï¼Œåçš„éšæœºæ•°ï¼Œæ—¶é—´æˆ³è¿‡æœŸâ€¦ï¼‰ã€‚ä¸ä¿¡çš„æ˜¯ï¼Œé‡æ–°æˆæƒç”¨æˆ·åœ¨è¿™é‡Œå¹¶æ²¡æœ‰ç”¨ã€‚ 404 - æŒ‡å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ²¡æ‰¾åˆ°ã€‚ 405 - æœªçŸ¥çš„è¯·æ±‚æ–¹æ³•ï¼ˆé€šå¸¸åº”è¯¥æ˜¯ GET æˆ–è€… POSTï¼‰ã€‚ 429 - ä½ çš„appå‘é€å¤ªå¤šè¯·æ±‚è¶…å‡ºäº†é™åˆ¶çš„é€Ÿç‡ï¼Œ429èƒ½å¤Ÿè§¦å‘åœ¨æ¯ä¸ªappæˆ–è€…æ¯ä¸ªç”¨æˆ·æ ¹éƒ¨ã€‚ 503 - å‡å¦‚å“åº”åŒ…æ‹¬é‡å‘åçš„å¤´ï¼Œè¿™å°±æ„å‘³åšä½ çš„OAuth 1.0 app æ­£åœ¨è¢«é™é€Ÿã€‚å¦åˆ™ï¼Œè¿™ä¸ªè¡¨æ˜äº†ä¸€ä¸ªçŸ­æš‚çš„æœåŠ¡å™¨é”™è¯¯ï¼Œå¹¶ä¸”ä½ çš„appåº”è¯¥é‡æ–°å‘é€è¿™è¿™ä¸ªè¯·æ±‚ã€‚ 507 - ç”¨æˆ·è¶…å‡º Dropbox å‚¨å­˜é…é¢ã€‚ 5xx - æœåŠ¡å™¨é”™è¯¯ã€‚ Dropbox APIè¿”å›JSONç±»å‹çš„æ•°æ®ã€‚æ‰€æœ‰ä½ æ”¶åˆ°ä¸€ä¸ª200çš„å“åº”ï¼Œç„¶ååº”è¯¥æŠŠæ•°æ®è½¬å‘æˆJSONä½¿ç”¨iOSçš„æ„å»ºJSONåºåˆ—åŒ–çš„æ–¹æ³•ã€‚äº†è§£æ›´å¤šå…³äºJSONå’ŒNSJSONSerializationï¼ŒæŸ¥çœ‹ç¬¬23ç« åœ¨ iOS 5 by Tutorials,â€Working with JSON.â€ JSON æ•°æ®è¿”å›ä»Dropboxå°†çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š 123456789101112131415161718192021222324252627&#123; &quot;hash&quot;: &quot;6a29b68d106bda4473ffdaf2e94c4b61&quot;, &quot;revision&quot;: 73052, &quot;rev&quot;: &quot;11d5c00e1cf6c&quot;, &quot;thumb_exists&quot;: false, &quot;bytes&quot;: 0, &quot;modified&quot;: &quot;Sat, 10 Aug 2013 21:56:50 +0000&quot;, &quot;path&quot;: &quot;/byteclub&quot;, &quot;is_dir&quot;: true, &quot;icon&quot;: &quot;folder&quot;, &quot;root&quot;: &quot;dropbox&quot;, &quot;contents&quot;: [&#123; &quot;revision&quot;: 73054, &quot;rev&quot;: &quot;11d5e00e1cf6c&quot;, &quot;thumb_exists&quot;: false, &quot;bytes&quot;: 16, &quot;modified&quot;: &quot;Sat, 10 Aug 2013 23:21:03 +0000&quot;, &quot;client_mtime&quot;: &quot;Sat, 10 Aug 2013 23:21:02 +0000&quot;, &quot;path&quot;: &quot;/byteclub/test.txt&quot;, &quot;is_dir&quot;: false, &quot;icon&quot;: &quot;page_white_text&quot;, &quot;root&quot;: &quot;dropbox&quot;, &quot;mime_type&quot;: &quot;text/plain&quot;, &quot;size&quot;: &quot;16 bytes&quot; &#125;], &quot;size&quot;: &quot;0 bytes&quot;&#125; æ‰€æœ‰æœ€åä¸€æ®µæ·»åŠ çš„ä»£ç æ˜¯æ‹‰å–çš„éƒ¨åˆ†ä½ æ„Ÿå…´è¶£çš„ä»JSONä¸­ã€‚ç‰¹åˆ«çš„ï¼Œä½ æƒ³å¾ªç¯éå†â€œcontentsâ€æ•°ç»„æ¥æŠŠâ€œis_dirâ€è®¾ç½®æˆfalseã€‚ è¿™æ ·åšï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°â€œTODO 2â€æ³¨é‡Šåé¢ï¼š 12345678910111213141516171819202122// 1NSArray *contentsOfRootDirectory = notesJSON[@&quot;contents&quot;];for (NSDictionary *data in contentsOfRootDirectory) &#123; if (![data[@&quot;is_dir&quot;] boolValue]) &#123; DBFile *note = [[DBFile alloc] initWithJSONData:data]; [notesFound addObject:note]; &#125;&#125;[notesFound sortUsingComparator: ^NSComparisonResult(id obj1, id obj2) &#123; return [obj1 compare:obj2]; &#125;];self.notes = notesFound;// 6dispatch_async(dispatch_get_main_queue(), ^&#123; [UIApplication sharedApplication].networkActivityIndicatorVisible = NO; [self.tableView reloadData];&#125;); è¿™é‡Œæœ‰ä¸¤éƒ¨åˆ†ï¼š ä½ æ‹‰å–æ•°ç»„å¯¹è±¡ä»â€œcontentsâ€é”®ä¸­ï¼Œè®©åå¾ªç¯ä¾¿åˆ©æ•°ç»„ã€‚æ¯ä¸ªæ•°ç»„å…¥å£æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥ä½ åˆ›å»ºä¸€ä¸ªç›¸åº”çš„DBFileæ–‡ä»¶æ¨¡å‹ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶ã€‚ DBFileæ˜¯ä¸€ä¸ªæˆ‘ä¸ºä½ åˆ›å»ºçš„è¾…åŠ©ç±»ï¼Œä¸ºäº†æ‹‰å–ä¿¡æ¯ä»ä¸€ä¸ªJSONå­—å…¸åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ - è½»è½»ä¸€ç¥å°±èƒ½çœ‹åˆ°å®ƒæ˜¯æ€æ ·å·¥ä½œçš„ã€‚ å½“ä½ å®Œæˆæ—¶ï¼Œä½ æ·»åŠ æ‰€æœ‰çš„ç¬”è®°åˆ°self.notesæ¥å£ä¸­ã€‚è¡¨è§†å›¾è¢«è®¾ç½®æ¥æ˜¾ç¤ºæ•°ç»„ä¸­çš„ä»»ä½•è®°å½•ã€‚ æ—¢ç„¶ä½ çš„è¡¨è§†å›¾æ•°æ®æºå·²ç»æ›´æ–°äº†ï¼Œä½ éœ€è¦é‡è½½è¡¨çš„æ•°æ®ã€‚æ— è®ºä½•æ—¶ä½ æ­£åœ¨å¤„ç†å¼‚æ­¥ç½‘ç»œè¯·æ±‚æ—¶ï¼Œä½ å¿…é¡»ä¿è¯æ›´æ–°UIKitåœ¨ä¸»çº¿ç¨‹ã€‚ æœºæ•çš„è¯»è€…å°†ä¼šæ³¨æ„åˆ°åœ¨ä¸Šè¿°ä»£ç ä¸­æ²¡æœ‰é”™è¯¯å¤„ç†ï¼›å‡å¦‚ä½ æ„Ÿè§‰ä½ åƒä¸€ä¸ªå“­ä¸§å¥³ï¼ˆå¤§å¤šæ•°Byte Club éƒ½æ˜¯ï¼ï¼‰æ·»åŠ ä¸€äº›ä»£ç åœ¨è¿™é‡Œï¼ˆåœ¨éšåçš„ä»£ç å—ä¸­ä½ å°†æ·»åŠ ï¼‰ï¼Œä»£ç åœ¨é”™è¯¯å’Œè­¦å‘Šç”¨æˆ·çš„æ—¶å€™å°†é‡è¯•ã€‚ æ„å»ºè¿è¡Œä½ çš„appï¼›ä½ åº”è¯¥çœ‹ä½ æ·»åŠ åˆ°ä½ çš„Dropboxæ–‡ä»¶å¤¹çš„æ–‡ä»¶æ˜¯å¦æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ï¼Œå°±åƒä¸‹é¢ä¾‹å­ä¸€æ ·æ˜¾ç¤ºï¼š äº‹æƒ…æœ¬æ¥æ˜¯å°äº‹ï¼Œå½“æ—¶è¿™è¯æ˜äº†ä½ æ­£ç¡®çš„è°ƒç”¨äº†Dropbox APIã€‚ ä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒæ¯”è¾ƒç„¶åå‘å…¶ä»–ä¿±ä¹éƒ¨æˆå‘˜å‘èµ·æŒ‘æˆ˜ï¼Œå†ä¸€æ¬¡ä½¿ç”¨Dropbox API å°±å½“ä½ æ˜¯ä¼ é€æœºæ„ã€‚ POST Notes through the Dropbox APIè½»ç‚¹å³ä¸Šè§’çš„ + å·ï¼Œä½ å°†çœ‹åˆ°ç¬”è®°add&#x2F;editå±å¹•å‡ºç°ï¼Œå°±åƒä¸‹é¢æ¼”ç¤ºçš„ä¸€æ ·ï¼š å¼€å§‹çš„appå·²ç»å®‰è£…äº†DBFile æ¨¡å‹å¯¹è±¡åˆ°NoteDetailsViewControlleråœ¨prepareForSegue:sender:æ–¹æ³•ä¸­ï¼š åŠ å…¥ä½ ç¥ä¸€çœ¼è¿™ä¸ªæ–¹æ³•ï¼Œä½ å°†çœ‹åˆ°NoteViewControllerè¢«è®¾ç½®æˆNoteDetailsViewControllerçš„ä»£ç†ã€‚è¿™ç§æ–¹æ³•ï¼ŒNoteDetailsViewControllerèƒ½å¤Ÿé€šçŸ¥NoteViewControllerå½“ç”¨æˆ·å®Œæˆç¼–è¾‘ä¸€ç¯‡ç¬”è®°æˆ–è€…å–æ¶ˆç¼–è¾‘ä¸€ç¯‡ç¬”è®°æ—¶ã€‚ æ‰“å¼€NotesViewController.m ,æ·»åŠ ä¸‹é¢è¿™è¡Œåˆ°prepareForSegue:sender:ä¸­ï¼Œå°±åœ¨showNote.delegate = selfè¡Œçš„åé¢ï¼› 1showNote.session = _session; NoteDetailsViewControllerå·²ç»æœ‰ä¸€ä¸ªNSURLSessionçš„æ¥å£åå­—å«åšsession,å› æ­¤ä½ èƒ½å¤Ÿè®¾ç½®å®ƒåœ¨prepareForSegue:sender: è½½å…¥ä¹‹å‰ã€‚ ç°åœ¨detail view controllerå°†è·å¾—ç›¸åŒçš„NSURLSession,æ‰€æœ‰detail view controllerèƒ½å¤Ÿä½¿ç”¨å®ƒæ¥è¿›è¡ŒDropBox çš„APIè°ƒç”¨ã€‚ Cancelå’ŒDoneæŒ‰é’®å·²ç»å‘ˆç°åœ¨ä½ çš„appä¸­ï¼›ä½ åªéœ€è¦æ·»åŠ ä¸€äº›åœ¨ä»–ä»¬èƒŒåä¿å­˜æˆ–è€…å–æ¶ˆåœ¨å°šæœªå®Œå·¥çš„ç¬”è®°é€»è¾‘ã€‚ åœ¨NoteDetailsViewController.m,æ‰¾åˆ°ä¸‹é¢è¿™ä¸€è¡Œåœ¨(IBAction)done:(id)sender:æ–¹æ³•ä¸­ï¼š 12// - UPLOAD FILE TO DROPBOX - // [self.delegate noteDetailsViewControllerDoneWithDetails:self]; â€¦ç”¨ä¸‹é¢çš„æ›¿æ¢å®ƒï¼š 12345678910111213141516171819202122232425262728293031// 1NSURL *url = [Dropbox uploadURLForPath: _note.path];// 2NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];[request setHTTPMethod:@&quot;PUT&quot;];// 3NSData *noteContents = [_note.contents dataUsingEncoding:NSUTF8StringEncoding];// 4NSURLSessionUploadTask *uploadTask = [_session uploadTaskWithRequest:request fromData:noteContents completionHandler:^(NSData *data, NSURLResponse *response, NSError *error)&#123; NSHTTPURLResponse *httpResp = (NSHTTPURLResponse*) response; if (!error &amp;&amp; httpResp.statusCode == 200) &#123; [self.delegate noteDetailsViewControllerDoneWithDetails:self]; &#125; else &#123; // alert for error saving / updating note &#125;&#125;];// 5[uploadTask resume]; è¿™ä¸ªå®ç°äº†ä½ éœ€è¦ä¿å­˜å’Œåˆ†äº«ä½ çš„ç¬”è®°çš„æ‰€æœ‰äº‹æƒ…ã€‚å‡å¦‚ä»”ç»†è§‚å¯Ÿæ¯ä¸€å—çš„æ³¨é‡Šï¼Œä½ å°†å‘ç°åšäº†ä¸‹é¢çš„äº‹ï¼š ä¸ºäº†ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åˆ°Dropboxï¼Œä½ éœ€è¦å†æ¬¡ä½¿ç”¨æŸä¸ªAPI URLã€‚å°±åƒå…ˆå‰ä½ éœ€è¦ä¸€ä¸ªURLæ¥åˆ—å‡ºåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œæˆ‘å·²ç»æ„é€ äº†ä¸€ä¸ªè¾…åŠ©æ–¹æ³•æ¥ä¸ºä½ äº§ç”ŸURLã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨ã€‚ ä¸‹ä¸€æ­¥æ˜¯ä½ çš„è€æœ‹å‹NSMutableURLRequest,æ–°çš„APIsèƒ½å¤ŸåŒæ—¶ä½¿ç”¨æ™®é€šçš„URLæ˜¯å’ŒNSURLRequestå¯¹è±¡ï¼Œä½†æ˜¯è¿™é‡Œä½ éœ€è¦å¯å˜çš„å½¢å¼æ¥ä½¿Dropbox APIè®©å®ƒçš„è¯·æ±‚å˜æˆPUTè¯·æ±‚ã€‚è®¾ç½®HTTPæ–¹æ³•ä½œä¸ºPUTå‘ä¿¡å·ç»™Dropboxæ¥è®©å®ƒä¸ºä½ åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚ ä¸‹ä¸€æ­¥æ˜¯å°†æ–‡æœ¬ä»ä½ çš„UITextViewç¼–ç æˆNSDataå¯¹è±¡ã€‚ æ—¢ç„¶ä½ å·²ç»åˆ›å»ºå¥½äº†è¯·æ±‚å’ŒNSDataæ•°æ®ï¼Œä½ ä¸‹ä¸€æ­¥å°±æ˜¯åˆ›å»ºä¸€ä¸ªNSURLSessionUploadTaskç„¶åè®¾ç½®completion handler block.ä¸€æ—¦æˆåŠŸï¼Œä½ å°±è°ƒç”¨ä»£ç†æ–¹æ³• noteDetailsViewControllerDoneWithDetails:æ¥å…³é—­å‘ˆç°çš„å†…å®¹ã€‚åœ¨ç”Ÿäº§çº§åˆ«çš„åº”ç”¨ä¸­ä½ å¯ä»¥å›ä¼ ä¸€ä¸ªæ–°çš„BDFileç»™ä»£ç†ç„¶ååŒæ­¥ä½ éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ã€‚ä¸ºäº†è¿™ä¸ªåº”ç”¨ï¼Œä½ åªéœ€è¦åˆ·æ–°NotesViewController ç”¨ä¸€ä¸ªç½‘ç»œè°ƒç”¨ã€‚ å†æ¬¡æåˆ°ï¼Œæ‰€æœ‰çš„ä»»åŠ¡ä»¥æš‚åœçš„çŠ¶æ€è¢«åˆ›å»ºï¼Œæ‰€ä»¥ä½ å¿…é¡»è°ƒç”¨æ¢å¤æ¥å¯åŠ¨ä»–ä»¬ã€‚ æ„å»ºç„¶åè¿è¡Œä½ çš„Appï¼Œç‚¹å‡»ç¬”è®°æ ‡ç­¾ä¸Šçš„+å·ã€‚åœ¨challenge nameå­—æ®µä¸Šè¾“å…¥ä½ çš„åå­—ï¼Œè¾“å…¥ä¸€äº›æ–‡æœ¬åœ¨noteå­—æ®µæƒ³Rayå‘å¸ƒä¸€ä»½æŒ‘æˆ˜ä¹¦ï¼Œå’Œä¸‹é¢çš„ä¾‹å­ç›¸ä¼¼ï¼š å½“ä½ æ¸…ç‚¹Doneæ—¶ï¼ŒNoteViewControllerå°†è¿”å›å¹¶ä¸”ç»™ä½ åˆ—å‡ºæ–°çš„ç¬”è®°åƒä¸‹é¢æ˜¾ç¤ºçš„é‚£æ ·ï¼š ) ä½ å·²ç»æ­£å¼çš„ç»™Rayä¸‹å‘æŒ‘æˆ˜ä¹¦ï¼›ç„¶è€Œï¼Œä»–æœ‰æœ‹å‹åœ¨éå¸¸é«˜çš„ä½ç½®æ‰€æœ‰ä½ æœ€å¥½å°½åŠ›å®Œæˆè¿™åœºæ¯”èµ›ã€‚ ä½†æ˜¯è¿™é‡Œæœ‰ä¸€æ¡éå¸¸é‡è¦çš„æ¶ˆæ¯é—æ¼äº†ã€‚ä½ èƒ½å‘Šè¯‰æˆ‘æ˜¯ä»€ä¹ˆä¹ˆï¼Ÿ è½»ç‚¹ç¬”è®°åŒ…å«çš„æŒ‘æˆ˜ï¼›NoteDetailsViewControllerè‡ªå·±å‘ˆç°ï¼Œå½“æ—¶ç¬”è®°çš„å†…å®¹ç¡®å®ç©ºç™½çš„ã€‚ Rayå¹¶ä¸ä¼šæ‰¾åˆ°ä½ çš„å‘çš„éå¸¸æœ‰å¨èƒçš„æŒ‘æˆ˜å‡å¦‚ä»–æ²¡æœ‰è¯»çš„è¯ï¼ ç°åœ¨ï¼Œappåªæ˜¯è°ƒç”¨Dropboxå…ƒæ•°æ®APIæ¥æ£€ç´¢æ–‡ä»¶åˆ—è¡¨ã€‚ä½ ä¹Ÿéœ€è¦æ·»åŠ ä¸€äº›ä»£ç æ¥æŠ“å–ç¬”è®°çš„å†…å®¹ã€‚ æ‰“å¼€NoteDetailsViewController.m,ç”¨ä¸‹é¢çš„å®ç°æ›¿æ¢ç©ºç™½çš„retreiveNoteTextçš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940-(void)retreiveNoteText&#123; // 1 NSString *fileApi = @&quot;https://api-content.dropbox.com/1/files/dropbox&quot;; NSString *escapedPath = [ _note.path stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]; NSString *urlStr = [NSString stringWithFormat: @&quot;%@/%@&quot;, fileApi,escapedPath]; NSURL *url = [NSURL URLWithString: urlStr]; [UIApplication sharedApplication].networkActivityIndicatorVisible = YES; // 2 [[ _session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; if (!error) &#123; NSHTTPURLResponse *httpResp = (NSHTTPURLResponse*) response; if (httpResp.statusCode == 200) &#123; // 3 NSString *text = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]; dispatch_async(dispatch_get_main_queue(), ^&#123; [UIApplication sharedApplication].networkActivityIndicatorVisible = NO; self.textView.text = text; &#125;); &#125; else &#123; // HANDLE BAD RESPONSE // &#125; &#125; else &#123; // ALWAYS HANDLE ERRORS :-] // &#125; // 4 &#125;] resume];&#125; ä¸Šé¢åœ¨ç¬”è®°ä¸­çš„ä»£ç ï¼ˆæ²¡æœ‰é”™è¯¯æ£€æŸ¥ï¼‰ä¸‹é¢æ¥è§£é‡Šï¼š è®¾ç½®è¯·æ±‚çš„è·¯å¾„å’Œä½ æœŸæœ›æ£€ç´¢çš„æ–‡ä»¶çš„URLåœ°å€ï¼›&#x2F;æ–‡ä»¶çš„ç«¯ç‚¹åœ¨Dropbox APIä¸­å°†ä¼šè¿”å›ç»™ä½ ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ã€‚ ç”¨æŒ‡å‘æ„Ÿå…´è¶£çš„æ–‡ä»¶çš„URLåˆ›å»ºæ•°æ®ä»»åŠ¡ã€‚è¿™ä¸ªè°ƒç”¨åº”è¯¥å¼€å§‹ï¼Œåªè¦ä½ çºµè§ˆæ•´ä¸ªappä½ ä¼šç›¸å½“ç†Ÿæ‚‰ã€‚ å‡å¦‚ä½ å“åº”çš„ä»£ç è¡¨æ˜æ‰€æœ‰çš„éƒ½æ˜¯å¥½çš„ï¼Œåœ¨ä¸»çº¿ç¨‹ç”¨ä½ åœ¨å…ˆå‰çš„æ­¥éª¤ä¸­æ£€ç´¢åˆ°çš„æ–‡ä»¶å†…å®¹è®¾ç½®textViewã€‚è®°ä½ï¼ŒUIæ›´æ–°å¿…é¡»åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ã€‚ ä¸€æ—¦è¿™ä¸ªä»»åŠ¡è¢«åˆå§‹åŒ–ï¼Œè°ƒç”¨æ¢å¤ã€‚è¿™é‡Œæœ‰å†™ä¸ä¸€æ ·çš„æ–¹æ³•å’Œä»¥å‰çš„ç›¸æ¯”ï¼Œå½“æ¢å¤è¢«ç›´æ¥è°ƒç”¨æ—¶åœ¨ä»»åŠ¡è¿˜æ²¡æœ‰æŒ‡æ´¾æ—¶ã€‚ æ„å»ºè¿è¡Œä½ çš„Appï¼Œåœ¨åˆ—è¡¨ä¸­å¯¹ä½ çš„æŒ‘æˆ˜è½»ç‚¹ï¼Œå†…å®¹å°†ç›´æ¥æ­£ç¡®çš„æ˜¾ç¤ºåœ¨viewä¸­ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š ä½ å¯ä»¥æ‰®æ¼”Rayç„¶åé€šè¿‡å‘ç¬”è®°ä¸­è¾“å…¥æ–‡æœ¬å“åº”è¿™ä¸ªæŒ‘æˆ˜ï¼›æ–‡ä»¶å°†å¾ˆå¿«æ›´æ–°å½“ä½ è½»ç‚¹Doneã€‚ ä½¿ç”¨NSURLSessionTaskä»£ç†å‘é€ç…§ç‰‡ä½ å·²ç»çœ‹åˆ°æ€æ ·ä½¿ç”¨NSURLSessionå¼‚æ­¥ä¾¿åˆ©æ„é€ æ–¹æ³•ã€‚ä½†æ˜¯å‡å¦‚ä½ æƒ³æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨æ–‡ä»¶ä¼ è¾“ä¸Šï¼Œä¾‹å¦‚ä¸Šä¼ ä¸€ä¸ªå¤§æ–‡ä»¶å¹¶ä¸”æ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡æ€ä¹ˆæ ·ï¼Ÿ å¯¹äºè¿™ç§å¼‚æ­¥çš„ï¼Œè€—æ—¶ä»»åŠ¡ç±»å‹ä½ éœ€è¦å®ç°NSURLSessionTaskDelegateåè®®æ–¹ã€‚é€šè¿‡å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œä½ èƒ½å¤Ÿæ£€ç´¢å›è°ƒå½“ä¸€ä¸ªä»»åŠ¡æ¥æ”¶åˆ°æ•°æ®å’Œå®Œæˆæ¥æ”¶æ•°æ®æ—¶ã€‚ ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°PanoPhotosæ ‡ç­¾æ˜¯ç©ºçš„å½“ä½ å¯åŠ¨Appçš„æ—¶å€™ã€‚ç„¶è€Œï¼ŒByte Clubç»„ç»‡çš„åˆ›åŠæˆå‘˜å·²ç»æ…·æ…¨çš„æä¾›äº†ä¸€äº›ä»–ä»¬è‡ªå·±çš„å…¨æ™¯ç…§ç‰‡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¡«å……ä½ çš„appã€‚ ä¸‹è½½è¿™äº› æˆ‘ä»¬ä¸ºä½ æ”¾åœ¨ä¸€èµ·çš„å…¨æ™¯ç…§ç‰‡ã€‚è§£å‹æ–‡ä»¶ï¼Œæ‹·è´åˆ°ä½ çš„appåœ¨Dropboxç›®å½•ä¸‹çš„ç…§ç‰‡ç›®å½•ã€‚ä½ æ–‡ä»¶å¤¹çš„å†…å®¹åº”è¯¥å’Œä¸‹é¢ä¸€æ ·ï¼š Dropboxå’Œæ ¸å¿ƒAPIå¯ä»¥æä¾›ç…§ç‰‡çš„ç¼©ç•¥å›¾ï¼›ä½¿ç”¨ä¸€ä¸ª UITableView cellè¿™å¬èµ·æ¥æƒ³ä¸€ä»¶éå¸¸å®Œç¾çš„äº‹ã€‚ æ‰“å¼€ PhotosViewController.mç„¶ååœ¨â€œGO GET THUMBNAILSæ³¨é‡Šåé¢æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°tableView:cellForRowAtIndexPath: 12345678910111213141516[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;NSURLSessionDataTask *dataTask = [_session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; if (!error) &#123; UIImage *image = [[UIImage alloc] initWithData:data]; photo.thumbNail = image; dispatch_async(dispatch_get_main_queue(), ^&#123; [UIApplication sharedApplication].networkActivityIndicatorVisible = NO; cell.thumbnailImage.image = photo.thumbNail; &#125;); &#125; else &#123; // HANDLE ERROR // &#125;&#125;];[dataTask resume]; ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºäº†ç…§ç‰‡çš„ç¼©ç•¥å›¾å›¾åœ¨è¡¨è§†å›¾çš„cellä¸­ã€‚ã€‚ã€‚æˆ–è€…è‡³å°‘å®ƒä¼šæ˜¯ï¼Œå‡å¦‚_photoThumbnailsç°åœ¨ä¸æ˜¯ç©ºçš„è¯ã€‚ æ‰¾åˆ°refreshPhotosç”¨ä¸‹é¢çš„å®ç°æ›¿æ¢ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748- (void)refreshPhotos&#123; [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; NSString *photoDir = [NSString stringWithFormat:@&quot;https://api.dropbox.com/1/search/dropbox/%@/photos?query=.jpg&quot;,appFolder]; NSURL *url = [NSURL URLWithString:photoDir]; [[ _session dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) &#123; if (!error) &#123; NSHTTPURLResponse *httpResp = (NSHTTPURLResponse*) response; if (httpResp.statusCode == 200) &#123; NSError *jsonError; NSArray *filesJSON = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&amp;jsonError]; NSMutableArray *dbFiles = [[NSMutableArray alloc] init]; if (!jsonError) &#123; for (NSDictionary *fileMetadata in filesJSON) &#123; DBFile *file = [[DBFile alloc] initWithJSONData:fileMetadata]; [dbFiles addObject:file]; &#125; [dbFiles sortUsingComparator:^NSComparisonResult(id obj1, id obj2) &#123; return [obj1 compare:obj2]; &#125;]; _photoThumbnails = dbFiles; dispatch_async(dispatch_get_main_queue(), ^&#123; [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; [self.tableView reloadData]; &#125;); &#125; &#125; else &#123; // HANDLE BAD RESPONSE // &#125; &#125; else &#123; // ALWAYS HANDLE ERRORS :-] // &#125; &#125;] resume];&#125; è¿™ä¸ªå’Œä½ æ—©æœŸè½½å…¥æŒ‘æˆ˜ç¬”è®°æ—¶å†™çš„ä»£ç å¾ˆåƒã€‚è¿™æ¬¡ï¼ŒAPIè°ƒç”¨æ¥æŸ¥æ‰¾åœ¨photosç›®å½•çš„å†…å®¹ï¼Œå¹¶ä¸”åªä¼šä»¥.jpgæ‹“å±•çš„æ–‡ä»¶ã€‚ æ—¢ç„¶_photoThumbnailsæ•°ç»„å·²ç»å¡«å……å¥½äº†ï¼Œç¼©ç•¥å›¾å°†å‡ºç°åœ¨è¡¨è§†å›¾ä¸­å¹¶ä¸”å¼‚æ­¥æ›´æ–°ã€‚ æ„å»ºè¿è¡Œä½ çš„appï¼Œç„¶ååˆ‡æ¢åˆ°PanoPhotosæ ‡ç­¾ï¼›ç¼©ç•¥å›¾å°†è½½å…¥å¹¶ä¸”åƒä¸‹é¢è¿™æ ·å‡ºç°ï¼š ï¼networking21 ç…§ç‰‡çœ‹èµ·æ¥éå¸¸çš„æ£’â€“åªæ˜¯è¯·å½“å¿ƒMatthijså®¶æ’•è£‚ä»£ç çš„çŒ«ğŸ±ï¼ ä¸Šä¼ ä¸€å¼ å…¨æ™¯ç…§ç‰‡ä½ çš„appèƒ½å¤Ÿä¸‹è½½ç›¸ç‰‡ï¼Œå¦‚æœå®ƒä¹Ÿèƒ½ä¸Šä¼ ç…§ç‰‡å¹¶ä¸”æ˜¾ç¤ºä¸Šä¼ è¿›åº¦çš„è¯å°±éå¸¸æ£’äº†ã€‚ ä¸ºäº†è·Ÿè¸ªä¸Šä¼ çš„è¿›åº¦ï¼ŒPhotosViewControllerå¿…é¡»æˆä¸ºNSURLSessionDelegateå’ŒNSURLSessionTaskDelegateåè®®çš„ä»£ç†ï¼Œä»¥ä¾¿ä½ èƒ½æ”¶åˆ°è¿›åº¦å›è°ƒã€‚ ä¿®æ”¹åœ¨PhotosViewController.mä¸­PhotosViewControllerçš„æ¥å£å£°æ˜ï¼Œæ·»åŠ NSURLSessionTaskDelegate,åƒä¸‹é¢è¿™æ ·ï¼š 1@ interface PhotosViewController ()UITableViewDelegate, UITableViewDataSource, UIImagePickerControllerDelegate, UINavigationControllerDelegate, NSURLSessionTaskDelegate&gt; ä¸‹ä¸€æ­¥ï¼Œæ·»åŠ ä¸‹é¢çš„ç§æœ‰æ¥å£ï¼š 12@property (nonatomic, strong) NSURLSessionUploadTask *uploadTask; ä¸Šé¢çš„æŒ‡é’ˆå¼•ç”¨äº†ä»»åŠ¡å¯¹è±¡ï¼›é€šè¿‡å“ªç§æ–¹å¼ï¼Œä½ å°±å¯ä»¥æ¥å…¥åˆ°å¯¹è±¡çš„æˆå‘˜ä¸­æ¥è·Ÿè¸ªä¸Šä¼ ä»»åŠ¡çš„è¿›åº¦äº†ã€‚ å½“ç”¨æˆ·é€‰æ‹©ä¸€å¼ å›¾ç‰‡ä¸Šä¼ æ—¶ï¼ŒdidFinishPickingMediaWithInfoè°ƒç”¨uploadImage:æ–¹æ³•æ¥æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚ç°åœ¨ï¼Œé‚£ä¸ªæ–¹æ³•ç©ºäº†-è¿™æ˜¯ä½ çš„å·¥ä½œè®©å®ƒä¸°æ»¡èµ·æ¥ã€‚ æ›¿æ¢uploadImage: ç”¨ä¸‹é¢çš„ä»£ç ï¼š 12345678910111213141516171819202122232425262728- (void)uploadImage:(UIImage*)image&#123; NSData *imageData = UIImageJPEGRepresentation(image, 0.6); // 1 NSURLSessionConfiguration *config = [NSURLSessionConfiguration defaultSessionConfiguration]; config.HTTPMaximumConnectionsPerHost = 1; [config setHTTPAdditionalHeaders:@&#123;@&quot;Authorization&quot;: [Dropbox apiAuthorizationHeader]&#125;]; // 2 NSURLSession *upLoadSession = [NSURLSession sessionWithConfiguration:config delegate:self delegateQueue:nil]; // for now just create a random file name, dropbox will handle it if we overwrite a file and create a new name.. NSURL *url = [Dropbox createPhotoUploadURL]; NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url]; [request setHTTPMethod:@&quot;PUT&quot;]; // 3 self.uploadTask = [upLoadSession uploadTaskWithRequest:request fromData:imageData]; // 4 self.uploadView.hidden = NO; [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; // 5 [ _uploadTask resume];&#125; ä¸‹é¢æ˜¯ä¸Šé¢çš„ä»£ç åšçš„äº‹ï¼š èµ·å…ˆï¼Œä½ ä½¿ç”¨è®¾ç½®åœ¨initWithCoderçš„ä¼šè¯å’Œç›¸å…³çš„ä¾¿åˆ©æ–¹æ³•æ¥åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ ä½¿ç”¨ä¸€ä¸ªNSURLSessionConfiguration ,å®ƒåªå…è®¸ä¸€ä¸ªè¿æ¥è¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼Œå› ä¸ºä½ ä¸Šä¼ è¿›åº¦å¤„ç†ä¸€æ¬¡å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ ä¸Šä¼ å’Œä¸‹è½½ä»»åŠ¡æŠ¥å‘Šä¿¡æ¯é€šè¿‡å®ƒä»¬çš„ä»£ç†è¿”å›ï¼›ä½ å°†ç®€çŸ­çš„å®ç°ã€‚ è¿™é‡Œä½ è®¾ç½®äº†uploadTaskæ¥å£ä½¿ç”¨ä»UIImagePickerè·å¾—çš„JPEGå›¾ç‰‡ã€‚ ä¸‹ä¸€æ­¥ï¼Œä½ æ˜¾ç¤ºUIProgressViewè®©å®ƒéšè—åœ¨PhotosViewControllerå†…éƒ¨ã€‚ å¼€å§‹ä»»åŠ¡â€“é¢ï¼ŒæŠ±æ­‰ï¼Œæ˜¯æ¢å¤ä»»åŠ¡ã€‚ æ—¢ç„¶ä»£ç†å·²ç»è®¾ç½®äº†ï¼Œä½ å°±å¯ä»¥å®ç°NSURLSessionTaskDelegateæ–¹æ³•æ¥æ›´æ–°è¿›åº¦è§†å›¾ã€‚ æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ° PhotosViewController.mæ–‡ä»¶æœ«å°¾ï¼š 1234567891011121314#pragma mark - NSURLSessionTaskDelegate methods- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didSendBodyData:(int64_t)bytesSent totalBytesSent:(int64_t)totalBytesSent totalBytesExpectedToSend:(int64_t)totalBytesExpectedToSend&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [ _progress setProgress: (double)totalBytesSent / (double)totalBytesExpectedToSend animated:YES]; &#125;);&#125; ä¸Šé¢çš„ä»£ç†æ–¹æ³•å°†å®šæœŸæŠ¥å‘Šä¿¡æ¯ç»™è°ƒç”¨è€…å…³äºä¸Šä¼ ä»»åŠ¡çš„ä¿¡æ¯ã€‚å®ƒåŒæ—¶ä¼šæ›´æ–°UIProgressViewï¼ˆ _progressï¼‰çš„è¿›åº¦ä»¥ä¾¿æ˜¾ç¤º totalBytesSent&#x2F;totalBytesExpectedToSend,è¿™æ¯”æ˜¾ç¤ºä¸€ä¸ªå®Œæˆçš„ç™¾åˆ†æ¯”è·Ÿæœ‰æ„ä¹‰ï¼ˆä¹Ÿæ›´æå®¢ï¼‰ã€‚ å‰©ä¸‹å”¯ä¸€çš„äº‹å°±æ˜¯å½“ä¸Šä¼ ä»»åŠ¡ç»“æŸæ—¶æŒ‡ç¤ºä¸€ä¸‹ã€‚æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ° PhotosViewController.mæ–‡ä»¶æœ«å°¾ï¼š 123456789101112131415161718- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; // 1 dispatch_async(dispatch_get_main_queue(), ^&#123; [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; _uploadView.hidden = YES; [ _progress setProgress:0.5]; &#125;); if (!error) &#123; // 2 dispatch_async(dispatch_get_main_queue(), ^&#123; [self refreshPhotos]; &#125;); &#125; else &#123; // Alert for error &#125;&#125; è¿™é‡Œæ²¡æœ‰å¾ˆå¤šä»£ç ï¼Œä½†æ˜¯å®ƒæ‰§è¡Œäº†ä¸¤é¡¹éå¸¸é‡è¦çš„ä»»åŠ¡ï¼š æ‰“å¼€ç½‘ç»œæŒ‡ç¤ºå™¨ï¼Œç„¶åéšè—_uploadViewä½œä¸ºä¸Šä¼ å®Œæˆçš„ä¸€ç‚¹ç‚¹æ¸…ç†å·¥ä½œã€‚ åˆ·æ–°PhotosViewControllerä»¥ä¾¿åŒ…å«ä½ åˆšåˆšä¸Šä¼ çš„ç…§ç‰‡ï¼Œç”±äºdemo appæ˜¯ä¸èƒ½è¿›è¡Œä»»ä½•æœ¬åœ°å‚¨å­˜çš„ä¸Šä¼ ã€‚åœ¨ä¸€ä¸ªçœŸæ­£çš„appä¸­ï¼Œä½ åº”è¯¥æŠŠå›¾ç‰‡åœ¨æœ¬åœ°è¿›è¡Œå‚¨å­˜å’Œç¼“å­˜ã€‚ æ„å»ºè¿è¡Œä½ çš„appï¼Œå¯¼èˆªåˆ°PanoPhotosæ ‡ç­¾ï¼Œç‚¹å‡»ç…§ç›¸å›¾æ ‡é€‰æ‹©ä¸€å¼ ç…§ç‰‡ã€‚ æ³¨æ„ï¼šå‡å¦‚ä½ è¯´ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•appï¼Œå¾ˆæ˜¾ç„¶ä½ ä¸èƒ½ç”¨ä½ çš„Macæ‹ç…§ï¼Œæ‰€æœ‰ä»…ä»…æ˜¯æ‹·è´ä¸€å¼ å…¨æ™¯ç…§ç‰‡ç»™æ¨¡æ‹Ÿå™¨ç„¶åä¸Šä¼ ã€‚è¿™æ ·åšï¼Œå¯ä»¥ç¡®ä¿æ²¡æœ‰å…¶ä»–çš„Xcodeå·¥ç¨‹ç°åœ¨è¿æ¥åˆ°è¿™ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œåœ¨Xcodeä¸­é€‰æ‹© Xcode Open Developer Tool iOS Simulatorã€‚ ä»Finderä¸­æ‹–æ‹½ä¸€å¼ å…¨æ™¯ç…§ç‰‡å¸¦æ¨¡æ‹Ÿå™¨ä¸­ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­å›¾ç‰‡å°†ä¼šåœ¨Safariä¸­æ‰“å¼€ã€‚é•¿æŒ‰å›¾ç‰‡ç„¶åä¿å­˜å›¾ç‰‡åˆ°å›¾åº“ä¸­ã€‚ åœ¨é€‰æ‹©ä¸€å¼ å›¾ç‰‡åä¸Šä¼ ï¼ŒuploadViewæ˜¾ç¤ºåœ¨å±å¹•çš„ä¸­å¤®ï¼Œå¹¶ä¸”å¸¦æœ‰ä¸Šä¼ è¿›åº¦ï¼Œä¹¡ä¸‹é¢è¿™ä¸€æ ·æ˜¾ç¤ºï¼š ï¼networking23 ä½ å¯èƒ½æ³¨æ„åˆ°ä¸€å¼ å›¾ç‰‡ä¸Šä¼ éœ€è¦èŠ±ä¸€äº›æ—¶é—´ç”±äºä¸Šä¼ ä»»åŠ¡è®¾ç½®äº†better qualityç¼©æ”¾å› å­ã€‚å¯¹äºé‚£äº›Aç±»æ€§æ ¼çš„äººï¼Œä½ åº”è¯¥æä¾›ä¸€ä¸ªå–æ¶ˆå‡½æ•°å‡å¦‚ä¸Šä¼ èŠ±è´¹å¤ªé•¿çš„æ—¶é—´ã€‚ å–æ¶ˆæŒ‰é’®åœ¨uploadViewå·²ç»è¢«å°è£…èµ·æ¥åœ¨æ•…äº‹æ¿ä¸­ï¼Œæ‰€æœ‰ä½ åªéœ€å®ç°æ¸…æ¥šé€»è¾‘æ¥æ€æ­»ä¸‹è½½æ“ä½œå°±è¡Œã€‚ ç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢ PhotosViewController.mçš„cancelUpload: ï¼š 12345- (IBAction)cancelUpload:(id)sender &#123; if ( _uploadTask.state == NSURLSessionTaskStateRunning) &#123; [ _uploadTask cancel]; &#125;&#125; åœ¨è¿™ç±»ä½ ä¼šçœ‹åˆ°ï¼Œå–æ¶ˆä¸€ä¸ªä»»åŠ¡ç›¸å½“ç®€å•å°±æ˜¯è°ƒç”¨ä¸€ä¸ªå–æ¶ˆæ–¹æ³•ã€‚ ç°åœ¨æ„å»ºè¿è¡Œä½ çš„appï¼Œé€‰æ‹©ä¸€å¼ ç…§ç‰‡ä¸Šä¼ ç„¶åç‚¹å‡»Cancelã€‚å›¾ç‰‡ä¸Šä¼ å°†ä¼šåœæ­¢å¹¶ä¸”uploadViewå°†ä¼šè¢«éšè—ã€‚ å°±è¿™æ ·â€“Byte Clubå®Œæˆäº†ï¼ ä½•å»ä½•ä»ï¼Ÿè¿™é‡Œæ˜¯å®Œæˆçš„å·¥ç¨‹åœ¨è¿™ä¸ªNSURLSessionæ•™ç¨‹ä¸­ã€‚ å‡å¦‚ä½ åšåˆ°è¿™ä¸€æ­¥ï¼Œæ­å–œä½ å¯ä»¥äº«å—åˆ°Byte Clubçš„æ—¶å…‰ï¼ä¸è¦å‘Šè¯‰ä»»ä½•Androidçš„å°ä¼™ä¼´ä»¬ï¼ :]ä½ ç°åœ¨èƒ½å¤Ÿå¤„ç†åœ¨ä½ appéœ€è¦çš„ä»»ä½•ç½‘ç»œä»»åŠ¡äº†ã€‚ å‡å¦‚ä½ å–œæ¬¢è¿™ä¸ªè¯¾ç¨‹ï¼Œä½ å¯èƒ½æƒ³è¦æŸ¥é˜…æˆ‘ä»¬çš„æ–°ä¹¦ iOS 7 by Tutorials,è¿™æ˜¯è¿™æœ¬ä¹¦çš„ä¸€ä¸ªç®€ç•¥ç‰ˆæœ¬ï¼Œè¿™æœ¬ä¹¦å‡ ä¹æ¶µç›–äº†åœ¨iOS 7ä¸­æœ€æ–°å’Œæœ€å¤šçš„APIsï¼Œè¿™äº›ä½ åº”è¯¥æ¸…æ¥šçš„çŸ¥é“ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ã€‚ æˆ‘å‡ ä¹å¿˜è®°äº†ã€‚ã€‚ã€‚ /slap &lt;you the reader&gt; have been slapped around a bit with a large trout. ï¼ˆä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆ heheï¼ğŸ˜„ï¼‰ å‡å¦‚ä½ æœ‰ä»»ä½•é—®é¢˜æˆ–è€…è¯„è®ºå…³äºè¿™ä¸ªæ•™ç¨‹æˆ–è€…NSURLSession,è¯·åŠ å…¥åˆ°ä¸‹é¢çš„è®ºå›è®¨è®ºï¼ å‚è€ƒèµ„æ–™ï¼š ä» NSURLConnection åˆ° NSURLSession NSURLSession Tutorial è¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"iOSçº¿ç¨‹å®‰å…¨-é”","slug":"2016-01-14-iosxian-cheng-an-quan-suo","date":"2016-01-13T18:08:36.000Z","updated":"2024-11-02T03:36:52.402Z","comments":true,"path":"2016/01/14/2016-01-14-iosxian-cheng-an-quan-suo/","permalink":"https://blog.wangruofeng007.com/2016/01/14/2016-01-14-iosxian-cheng-an-quan-suo/","excerpt":"","text":"Objectiveï¼Cä½¿ç”¨ @synchronized ç±»å®ç°é”1234567891011121314151617// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// çº¿ç¨‹Adispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; @synchronized(person) &#123; [person personA]; [NSThread sleepForTimeInterval:3]; // çº¿ç¨‹ä¼‘çœ 3ç§’ &#125;&#125;);// çº¿ç¨‹Bdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; @synchronized(person) &#123; [person personB]; &#125;&#125;); ä½¿ç”¨ NSRecursiveLock ç±»å®ç°é” é€’å½’é”ï¼Œé€’å½’æˆ–å¾ªç¯æ–¹æ³•æ—¶ä½¿ç”¨æ­¤æ–¹æ³•å®ç°é”ï¼Œå¯é¿å…æ­»é”ç­‰é—®é¢˜ 123456789101112131415161718192021222324252627282930// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// åˆ›å»ºé”å¯¹è±¡NSRecursiveLock *theLock = [[NSRecursiveLock alloc] init];// åˆ›å»ºé€’å½’æ–¹æ³•static void (^testCode)(int);testCode = ^(int value) &#123; [theLock tryLock]; if (value &gt; 0) &#123; [person personA]; [NSThread sleepForTimeInterval:1]; testCode(value - 1); &#125; [theLock unlock];&#125;;//çº¿ç¨‹Adispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; testCode(5);&#125;);//çº¿ç¨‹Bdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; [theLock lock]; [person personB]; [theLock unlock];&#125;); ä½¿ç”¨ NSConditionLockï¼ˆæ¡ä»¶é”ï¼‰ç±»å®ç°é” ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥æŒ‡å®šï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶çš„æ—¶å€™æ‰å¯ä»¥è§£é” 123456789101112131415161718// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// åˆ›å»ºæ¡ä»¶é”NSConditionLock *conditionLock = [[NSConditionLock alloc] init];// çº¿ç¨‹Adispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; [conditionLock lock]; [person personA]; [NSThread sleepForTimeInterval:5]; [conditionLock unlockWithCondition:10]; &#125;);// çº¿ç¨‹Bdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; [conditionLock lockWhenCondition:10]; [person personB]; [conditionLock unlock]; &#125;); NSDistributedLockï¼ˆåˆ†å¸ƒå¼é”ï¼‰ åœ¨iOSä¸­ä¸éœ€è¦ç”¨åˆ°ï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æœ¬æ–‡ä¸ä½œä»‹ç»ï¼Œè¿™é‡Œå†™å‡ºæ¥åªæ˜¯æƒ³è®©å¤§å®¶çŸ¥é“æœ‰è¿™ä¸ªé”å­˜åœ¨ã€‚å¦‚æœæƒ³è¦å­¦ä¹ NSDistributedLockçš„è¯ï¼Œä½ å¯ä»¥åˆ›å»ºMAC OSçš„é¡¹ç›®è‡ªå·±æ¼”ç»ƒï¼Œæ–¹æ³•è¯·è‡ªè¡ŒGoogleï¼Œè°¢è°¢ Cè¯­è¨€ä½¿ç”¨ pthread_mutex_t å®ç°é” æ³¨æ„ï¼šå¿…é¡»åœ¨å¤´æ–‡ä»¶å¯¼å…¥ï¼š#import &lt;pthread.h&gt; 12345678910111213141516171819// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// åˆ›å»ºé”å¯¹è±¡__block pthread_mutex_t mutex;pthread_mutex_init(&amp;mutex, NULL);// çº¿ç¨‹Adispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; pthread_mutex_lock(&amp;mutex); [person personA]; [NSThread sleepForTimeInterval:5]; pthread_mutex_unlock(&amp;mutex);&#125;);// çº¿ç¨‹Bdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; pthread_mutex_lock(&amp;mutex); [person personB]; pthread_mutex_unlock(&amp;mutex);&#125;); ä½¿ç”¨ GCD å®ç°â€œé”â€(ä¿¡å·é‡ï¼‰ GCDæä¾›ä¸€ç§ä¿¡å·çš„æœºåˆ¶ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åˆ›å»ºâ€œé”â€ 123456789101112131415161718192021// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// åˆ›å»ºå¹¶è®¾ç½®ä¿¡é‡dispatch_semaphore_t semaphore = dispatch_semaphore_create(1);// çº¿ç¨‹Adispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); [person personA]; [NSThread sleepForTimeInterval:5]; dispatch_semaphore_signal(semaphore);&#125;);// çº¿ç¨‹Bdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); [person personB]; dispatch_semaphore_signal(semaphore);&#125;); æˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ä»£ç ã€‚dispatch_semaphore_waitæ–¹æ³•æ˜¯æŠŠä¿¡å·é‡åŠ 1ï¼Œdispatch_semaphore_signalæ˜¯æŠŠä¿¡å·é‡å‡1ã€‚ æˆ‘ä»¬æŠŠä¿¡å·é‡å½“ä½œæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“è®¡æ•°å™¨æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°æ—¶ï¼Œæ‰€æœ‰é€šè¿‡å®ƒçš„çº¿ç¨‹éƒ½åº”è¯¥æŠŠè¿™ä¸ªæ•´æ•°å‡1ã€‚ å¦‚æœè®¡æ•°å™¨å¤§äº0ï¼Œé‚£ä¹ˆåˆ™å…è®¸è®¿é—®ï¼Œå¹¶æŠŠè®¡æ•°å™¨å‡1ã€‚å¦‚æœä¸º0ï¼Œåˆ™è®¿é—®è¢«ç¦æ­¢ï¼Œæ‰€æœ‰é€šè¿‡å®ƒçš„çº¿ç¨‹éƒ½å¤„äºç­‰å¾…çš„çŠ¶æ€ã€‚ ä½¿ç”¨POSIXï¼ˆæ¡ä»¶é”ï¼‰åˆ›å»ºé”ï¼‰12345678910111213141516171819202122232425262728// å®ä¾‹ç±»personPerson *person = [[Person alloc] init];// åˆ›å»ºäº’æ–¥é” __block pthread_mutex_t mutex; pthread_mutex_init(&amp;mutex, NULL); // åˆ›å»ºæ¡ä»¶é” __block pthread_cond_t cond; pthread_cond_init(&amp;cond, NULL); // çº¿ç¨‹A dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; pthread_mutex_lock(&amp;mutex); pthread_cond_wait(&amp;cond, &amp;mutex); [person personA]; pthread_mutex_unlock(&amp;mutex); &#125;); // çº¿ç¨‹B dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; pthread_mutex_lock(&amp;mutex); [person personB]; [NSThread sleepForTimeInterval:5]; pthread_cond_signal(&amp;cond); pthread_mutex_unlock(&amp;mutex); &#125;); æ•ˆæœï¼šç¨‹åºä¼šé¦–å…ˆè°ƒç”¨çº¿ç¨‹Bï¼Œåœ¨5ç§’åå†è°ƒç”¨çº¿ç¨‹Aã€‚å› ä¸ºåœ¨çº¿ç¨‹Aä¸­åˆ›å»ºäº†ç­‰å¾…æ¡ä»¶é”ï¼Œçº¿ç¨‹Bæœ‰æ¿€æ´»é”ï¼Œåªæœ‰å½“çº¿ç¨‹Bæ‰§è¡Œå®Œåä¼šæ¿€æ´»çº¿ç¨‹Aã€‚ pthread_cond_waitæ–¹æ³•ä¸ºç­‰å¾…æ¡ä»¶é”ã€‚ pthread_cond_signalæ–¹æ³•ä¸ºæ¿€æ´»ä¸€ä¸ªç›¸åŒæ¡ä»¶çš„æ¡ä»¶é”ã€‚ æ³¨æ„:è‡ªæ—‹é”OSSpinLockå·²ç»ä¸å†çº¿ç¨‹å®‰å…¨ å‚è€ƒèµ„æ–™ http://www.liuhaihua.cn/archives/25316.html ä¸å†å®‰å…¨çš„ OSSpinLock","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://blog.wangruofeng007.com/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"SQLite_æ•™ç¨‹(ä¸ƒ)","slug":"2016-01-14-sqlite-jiao-cheng-qi","date":"2016-01-13T17:46:57.000Z","updated":"2024-11-02T03:36:52.403Z","comments":true,"path":"2016/01/14/2016-01-14-sqlite-jiao-cheng-qi/","permalink":"https://blog.wangruofeng007.com/2016/01/14/2016-01-14-sqlite-jiao-cheng-qi/","excerpt":"","text":"SQLite Order BySQLite çš„ ORDER BY å­å¥æ˜¯ç”¨æ¥åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚ è¯­æ³• ORDER BY å­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column-list FROM table_name [WHERE condition] [ORDER BY column1, column2, .. columnN] [ASC | DESC]; æ‚¨å¯ä»¥åœ¨ ORDER BY å­å¥ä¸­ä½¿ç”¨å¤šä¸ªåˆ—ã€‚ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ’åºåˆ—åœ¨åˆ—æ¸…å•ä¸­ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ SALARY å‡åºæ’åºï¼š sqlite&gt; SELECT * FROM COMPANY ORDER BY SALARY ASC; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 7 James 24 Houston 10000.0 2 Allen 25 Texas 15000.0 1 Paul 32 California 20000.0 3 Teddy 23 Norway 20000.0 6 Kim 22 South-Hall 45000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ NAME å’Œ SALARY å‡åºæ’åºï¼š sqlite&gt; SELECT * FROM COMPANY ORDER BY NAME, SALARY ASC; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 5 David 27 Texas 85000.0 7 James 24 Houston 10000.0 6 Kim 22 South-Hall 45000.0 4 Mark 25 Rich-Mond 65000.0 1 Paul 32 California 20000.0 3 Teddy 23 Norway 20000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ NAME é™åºæ’åºï¼š sqlite&gt; SELECT * FROM COMPANY ORDER BY NAME DESC; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 3 Teddy 23 Norway 20000.0 1 Paul 32 California 20000.0 4 Mark 25 Rich-Mond 65000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 5 David 27 Texas 85000.0 2 Allen 25 Texas 15000.0 SQLite Group BySQLite çš„ GROUP BY å­å¥ç”¨äºä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚åœ¨ SELECT è¯­å¥ä¸­ï¼ŒGROUP BY å­å¥æ”¾åœ¨ WHERE å­å¥ä¹‹åï¼Œæ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚ è¯­æ³• ä¸‹é¢ç»™å‡ºäº† GROUP BY å­å¥çš„åŸºæœ¬è¯­æ³•ã€‚GROUP BY å­å¥å¿…é¡»æ”¾åœ¨ WHERE å­å¥ä¸­çš„æ¡ä»¶ä¹‹åï¼Œå¿…é¡»æ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚ SELECT column-list FROM table_name WHERE [ conditions ] GROUP BY column1, column2....columnN ORDER BY column1, column2....columnN æ‚¨å¯ä»¥åœ¨ GROUP BY å­å¥ä¸­ä½¿ç”¨å¤šä¸ªåˆ—ã€‚ç¡®ä¿æ‚¨ä½¿ç”¨çš„åˆ†ç»„åˆ—åœ¨åˆ—æ¸…å•ä¸­ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 å¦‚æœæ‚¨æƒ³äº†è§£æ¯ä¸ªå®¢æˆ·çš„å·¥èµ„æ€»é¢ï¼Œåˆ™å¯ä½¿ç”¨ GROUP BY æŸ¥è¯¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; SELECT NAME, SUM(SALARY) FROM COMPANY GROUP BY NAME; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š NAME SUM(SALARY) ---------- ----------- Allen 15000 David 85000 James 20000 Kim 45000 Mark 65000 Paul 40000 Teddy 20000 è®©æˆ‘ä»¬æŠŠ ORDER BY å­å¥ä¸ GROUP BY å­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; SELECT NAME, SUM(SALARY) FROM COMPANY GROUP BY NAME ORDER BY NAME DESC; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š NAME SUM(SALARY) ---------- ----------- Teddy 20000 Paul 40000 Mark 65000 Kim 45000 James 20000 David 85000 Allen 15000 SQLite Having å­å¥HAVING å­å¥å…è®¸æŒ‡å®šæ¡ä»¶æ¥è¿‡æ»¤å°†å‡ºç°åœ¨æœ€ç»ˆç»“æœä¸­çš„åˆ†ç»„ç»“æœã€‚ WHERE å­å¥åœ¨æ‰€é€‰åˆ—ä¸Šè®¾ç½®æ¡ä»¶ï¼Œè€Œ HAVING å­å¥åˆ™åœ¨ç”± GROUP BY å­å¥åˆ›å»ºçš„åˆ†ç»„ä¸Šè®¾ç½®æ¡ä»¶ã€‚ è¯­æ³• ä¸‹é¢æ˜¯ HAVING å­å¥åœ¨ SELECT æŸ¥è¯¢ä¸­çš„ä½ç½®ï¼š SELECT FROM WHERE GROUP BY HAVING ORDER BY åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­ï¼ŒHAVING å­å¥å¿…é¡»æ”¾åœ¨ GROUP BY å­å¥ä¹‹åï¼Œå¿…é¡»æ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚ä¸‹é¢æ˜¯åŒ…å« HAVING å­å¥çš„ SELECT è¯­å¥çš„è¯­æ³•ï¼š SELECT column1, column2 FROM table1, table2 WHERE [ conditions ] GROUP BY column1, column2 HAVING [ conditions ] ORDER BY column1, column2 å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 8 Paul 24 Houston 20000.0 9 James 44 Norway 5000.0 10 James 45 Texas 5000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒå°†æ˜¾ç¤ºåç§°è®¡æ•°å°äº 2 çš„æ‰€æœ‰è®°å½•ï¼š sqlite &gt; SELECT * FROM COMPANY GROUP BY name HAVING count(name) &lt; 2; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000 5 David 27 Texas 85000 6 Kim 22 South-Hall 45000 4 Mark 25 Rich-Mond 65000 3 Teddy 23 Norway 20000 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒå°†æ˜¾ç¤ºåç§°è®¡æ•°å¤§äº 2 çš„æ‰€æœ‰è®°å½•,æ³¨æ„å…¶å®è¿™é‡Œåªè¿”å›æœ€åä¸€æ¡è®°å½•ï¼š sqlite &gt; SELECT * FROM COMPANY GROUP BY name HAVING count(name) &gt; 2; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 10 James 45 Texas 5000 SQLite Distinct å…³é”®å­—SQLite çš„ DISTINCT å…³é”®å­—ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚æœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚ è¯­æ³• ç”¨äºæ¶ˆé™¤é‡å¤è®°å½•çš„ DISTINCT å…³é”®å­—çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT DISTINCT column1, column2,.....columnN FROM table_name WHERE [condition] å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 8 Paul 24 Houston 20000.0 9 James 44 Norway 5000.0 10 James 45 Texas 5000.0 é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ SELECT æŸ¥è¯¢ï¼Œå®ƒå°†è¿”å›é‡å¤çš„å·¥èµ„è®°å½•ï¼š sqlite&gt; SELECT name FROM COMPANY; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š NAME ---------- Paul Allen Teddy Mark David Kim James Paul James James ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨ä¸Šè¿°çš„ SELECT æŸ¥è¯¢ä¸­ä½¿ç”¨ DISTINCT å…³é”®å­—ï¼š sqlite&gt; SELECT DISTINCT name FROM COMPANY; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼Œæ²¡æœ‰ä»»ä½•é‡å¤çš„æ¡ç›®ï¼š NAME ---------- Paul Allen Teddy Mark David Kim James èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(å…­)","slug":"2016-01-14-sqlite-jiao-cheng-liu","date":"2016-01-13T17:41:01.000Z","updated":"2024-11-02T03:36:52.403Z","comments":true,"path":"2016/01/14/2016-01-14-sqlite-jiao-cheng-liu/","permalink":"https://blog.wangruofeng007.com/2016/01/14/2016-01-14-sqlite-jiao-cheng-liu/","excerpt":"","text":"SQLite Delete è¯­å¥SQLite çš„ DELETE æŸ¥è¯¢ç”¨äºåˆ é™¤è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ DELETE æŸ¥è¯¢æ¥åˆ é™¤é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è®°å½•éƒ½ä¼šè¢«åˆ é™¤ã€‚ è¯­æ³• å¸¦æœ‰ WHERE å­å¥çš„ DELETE æŸ¥è¯¢çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š DELETE FROM table_name WHERE [condition]; æ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 å¦‚æœæ‚¨æƒ³è¦ä» COMPANY è¡¨ä¸­åˆ é™¤æ‰€æœ‰è®°å½•ï¼Œåˆ™ä¸éœ€è¦ä½¿ç”¨ WHERE å­å¥ï¼ŒDELETE æŸ¥è¯¢å¦‚ä¸‹ï¼š sqlite&gt; DELETE FROM COMPANY; ç°åœ¨ï¼ŒCOMPANY è¡¨ä¸­æ²¡æœ‰ä»»ä½•çš„è®°å½•ï¼Œå› ä¸ºæ‰€æœ‰çš„è®°å½•å·²ç»é€šè¿‡ DELETE è¯­å¥åˆ é™¤ã€‚ SQLite Like å­å¥SQLite çš„ LIKE è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼š ç™¾åˆ†å· ï¼ˆ%ï¼‰ ä¸‹åˆ’çº¿ ï¼ˆ_ï¼‰ ç™¾åˆ†å·ï¼ˆ%ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚ è¯­æ³• % å’Œ _ çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT FROM table_name WHERE column LIKE &#39;XXXX%&#39; or SELECT FROM table_name WHERE column LIKE &#39;%XXXX%&#39; or SELECT FROM table_name WHERE column LIKE &#39;XXXX_&#39; or SELECT FROM table_name WHERE column LIKE &#39;_XXXX&#39; or SELECT FROM table_name WHERE column LIKE &#39;_XXXX_&#39; æ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚åœ¨è¿™é‡Œï¼ŒXXXX å¯ä»¥æ˜¯ä»»ä½•æ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ã€‚ å®ä¾‹ ä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ â€˜%â€™ å’Œ â€˜_â€™ è¿ç®—ç¬¦çš„ LIKE å­å¥ä¸åŒçš„åœ°æ–¹ï¼š è¯­å¥ æè¿° WHERE SALARY LIKE â€˜200%â€™ æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜%200%â€™ æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜_00%â€˜ æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜2_%_%â€™ æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜%2â€™ æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜_2%3â€™ æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼ WHERE SALARY LIKE â€˜2___3â€™ æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼ è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ AGE ä»¥ 2 å¼€å¤´çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE LIKE &#39;2%&#39;; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ ADDRESS æ–‡æœ¬é‡ŒåŒ…å«ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE ADDRESS LIKE &#39;%-%&#39;; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 6 Kim 22 South-Hall 45000.0 SQLite Glob å­å¥SQLite çš„ GLOB è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒGLOB è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ LIKE è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼ŒGLOB æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚ æ˜Ÿå· ï¼ˆ*ï¼‰ é—®å· ï¼ˆ?ï¼‰ æ˜Ÿå·ï¼ˆ*ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚é—®å·ï¼ˆ?ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚ è¯­æ³• * å’Œ ? çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT FROM table_name WHERE column GLOB &#39;XXXX*&#39; or SELECT FROM table_name WHERE column GLOB &#39;*XXXX*&#39; or SELECT FROM table_name WHERE column GLOB &#39;XXXX?&#39; or SELECT FROM table_name WHERE column GLOB &#39;?XXXX&#39; or SELECT FROM table_name WHERE column GLOB &#39;?XXXX?&#39; or SELECT FROM table_name WHERE column GLOB &#39;????&#39; æ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚åœ¨è¿™é‡Œï¼ŒXXXX å¯ä»¥æ˜¯ä»»ä½•æ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ã€‚ å®ä¾‹ ä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ â€˜*â€™ å’Œ â€˜?â€™ è¿ç®—ç¬¦çš„ GLOB å­å¥ä¸åŒçš„åœ°æ–¹ï¼š è¯­å¥ æè¿° WHERE SALARY GLOB â€˜200*â€˜ æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜*200*â€˜ æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜?00*â€˜ æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜2??â€™ æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜*2â€™ æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜?2*3â€™ æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼ WHERE SALARY GLOB â€˜2???3â€™ æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼ è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ AGE ä»¥ 2 å¼€å¤´çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE GLOB &#39;2*&#39;; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ ADDRESS æ–‡æœ¬é‡ŒåŒ…å«ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE ADDRESS GLOB &#39;*-*&#39;; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 6 Kim 22 South-Hall 45000.0 SQLite Limit å­å¥SQLite çš„ LIMIT å­å¥ç”¨äºé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡ã€‚ è¯­æ³• å¸¦æœ‰ LIMIT å­å¥çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name LIMIT [no of rows] ä¸‹é¢æ˜¯ LIMIT å­å¥ä¸ OFFSET å­å¥ä¸€èµ·ä½¿ç”¨æ—¶çš„è¯­æ³•ï¼š SELECT column1, column2, columnN FROM table_name LIMIT [no of rows] OFFSET [row num] SQLite å¼•æ“å°†è¿”å›ä»ä¸‹ä¸€è¡Œå¼€å§‹ç›´åˆ°ç»™å®šçš„ OFFSET ä¸ºæ­¢çš„æ‰€æœ‰è¡Œï¼Œå¦‚ä¸‹é¢çš„æœ€åä¸€ä¸ªå®ä¾‹æ‰€ç¤ºã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒé™åˆ¶äº†æ‚¨æƒ³è¦ä»è¡¨ä¸­æå–çš„è¡Œæ•°ï¼š sqlite&gt; SELECT * FROM COMPANY LIMIT 6; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä»ä¸€ä¸ªç‰¹å®šçš„åç§»å¼€å§‹æå–è®°å½•(OFFSETä¸‹æ ‡ä»0å¼€å§‹)ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä»ç¬¬ä¸‰ä½å¼€å§‹æå– 3 ä¸ªè®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY LIMIT 3 OFFSET 2; è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(äº”)","slug":"2016-01-14-sqlite-jiao-cheng-wu","date":"2016-01-13T17:35:50.000Z","updated":"2024-11-02T03:36:52.403Z","comments":true,"path":"2016/01/14/2016-01-14-sqlite-jiao-cheng-wu/","permalink":"https://blog.wangruofeng007.com/2016/01/14/2016-01-14-sqlite-jiao-cheng-wu/","excerpt":"","text":"SQLè¡¨è¾¾å¼è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€è¿ç®—ç¬¦å’Œè®¡ç®—å€¼çš„SQLå‡½æ•°çš„ç»„åˆã€‚ SQL è¡¨è¾¾å¼ä¸å…¬å¼ç±»ä¼¼ï¼Œéƒ½å†™åœ¨æŸ¥è¯¢è¯­è¨€ä¸­ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ•°æ®é›†æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚ è¯­æ³• å‡è®¾ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name WHERE [CONTION | EXPRESSION]; æœ‰ä¸åŒç±»å‹çš„ SQLite è¡¨è¾¾å¼ï¼Œå…·ä½“è®²è§£å¦‚ä¸‹ï¼š SQLite - å¸ƒå°”è¡¨è¾¾å¼SQLite çš„å¸ƒå°”è¡¨è¾¾å¼åœ¨åŒ¹é…å•ä¸ªå€¼çš„åŸºç¡€ä¸Šè·å–æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name WHERE SINGLE VALUE MATCHTING EXPRESSION; å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite å¸ƒå°”è¡¨è¾¾å¼çš„ç”¨æ³•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY = 10000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 James 24 Houston 10000.0 SQLite - æ•°å€¼è¡¨è¾¾å¼è¿™äº›è¡¨è¾¾å¼ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢ä¸­çš„ä»»ä½•æ•°å­¦è¿ç®—ã€‚è¯­æ³•å¦‚ä¸‹ï¼š SELECT numerical_expression as OPERATION_NAME [FROM table_name WHERE CONDITION] ; åœ¨è¿™é‡Œï¼Œnumerical_expression ç”¨äºæ•°å­¦è¡¨è¾¾å¼æˆ–ä»»ä½•å…¬å¼ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite æ•°å€¼è¡¨è¾¾å¼çš„ç”¨æ³•ï¼š sqlite&gt; SELECT (15 + 6) AS ADDITION ADDITION = 21 æœ‰å‡ ä¸ªå†…ç½®çš„å‡½æ•°ï¼Œæ¯”å¦‚ avg()ã€sum()ã€count()ï¼Œç­‰ç­‰ï¼Œæ‰§è¡Œè¢«ç§°ä¸ºå¯¹ä¸€ä¸ªè¡¨æˆ–ä¸€ä¸ªç‰¹å®šçš„è¡¨åˆ—çš„æ±‡æ€»æ•°æ®è®¡ç®—ã€‚ sqlite&gt; SELECT COUNT(*) AS &quot;RECORDS&quot; FROM COMPANY; RECORDS = 7 SQLite - æ—¥æœŸè¡¨è¾¾å¼æ—¥æœŸè¡¨è¾¾å¼è¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œè¿™äº›è¡¨è¾¾å¼å°†è¢«ç”¨äºå„ç§æ•°æ®æ“ä½œã€‚ sqlite&gt; SELECT CURRENT_TIMESTAMP; CURRENT_TIMESTAMP = 2016-01-13 16:29:56 SQLite Where å­å¥SQLiteçš„ WHERE å­å¥ç”¨äºæŒ‡å®šä»ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®çš„æ¡ä»¶ã€‚ å¦‚æœæ»¡è¶³ç»™å®šçš„æ¡ä»¶ï¼Œå³ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œåˆ™ä»è¡¨ä¸­è¿”å›ç‰¹å®šçš„å€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ WHERE å­å¥æ¥è¿‡æ»¤è®°å½•ï¼Œåªè·å–éœ€è¦çš„è®°å½•ã€‚ WHERE å­å¥ä¸ä»…å¯ç”¨åœ¨ SELECT è¯­å¥ä¸­ï¼Œå®ƒä¹Ÿå¯ç”¨åœ¨ UPDATEã€DELETE è¯­å¥ä¸­ï¼Œç­‰ç­‰ï¼Œè¿™äº›æˆ‘ä»¬å°†åœ¨éšåçš„ç« èŠ‚ä¸­å­¦ä¹ åˆ°ã€‚ è¯­æ³• SQLite çš„å¸¦æœ‰ WHERE å­å¥çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name WHERE [condition] å®ä¾‹ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ¯”è¾ƒæˆ–é€»è¾‘è¿ç®—ç¬¦æŒ‡å®šæ¡ä»¶ï¼Œæ¯”å¦‚ &gt;ã€&lt;ã€&#x3D;ã€LIKEã€NOTï¼Œç­‰ç­‰ã€‚å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite é€»è¾‘è¿ç®—ç¬¦çš„ç”¨æ³•ã€‚ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;= 25 AND SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;&#x3D; 25 OR SALARY &gt;&#x3D; 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE ä¸ä¸º NULL çš„æ‰€æœ‰è®°å½•ï¼Œç»“æœæ˜¾ç¤ºæ‰€æœ‰çš„è®°å½•ï¼Œæ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªè®°å½•çš„ AGE ç­‰äº NULLï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE IS NOT NULL; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ â€˜Kiâ€™ å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œâ€™Kiâ€™ ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE NAME LIKE &#39;Ki%&#39;; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 6 Kim 22 South-Hall 45000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ â€˜Kiâ€™ å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œâ€™Kiâ€™ ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE NAME GLOB &#39;Ki*&#39;; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 6 Kim 22 South-Hall 45000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 ); ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 SQLite AND&#x2F;OR è¿ç®—ç¬¦SQLite çš„ AND å’Œ OR è¿ç®—ç¬¦ç”¨äºç¼–è¯‘å¤šä¸ªæ¡ä»¶æ¥ç¼©å°åœ¨ SQLite è¯­å¥ä¸­æ‰€é€‰çš„æ•°æ®ã€‚è¿™ä¸¤ä¸ªè¿ç®—ç¬¦è¢«ç§°ä¸ºè¿æ¥è¿ç®—ç¬¦ã€‚ è¿™äº›è¿ç®—ç¬¦ä¸ºåŒä¸€ä¸ª SQLite è¯­å¥ä¸­ä¸åŒçš„è¿ç®—ç¬¦ä¹‹é—´çš„å¤šä¸ªæ¯”è¾ƒæä¾›äº†å¯èƒ½ã€‚ AND è¿ç®—ç¬¦AND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨ã€‚ä½¿ç”¨ AND è¿ç®—ç¬¦æ—¶ï¼Œåªæœ‰å½“æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œæ•´ä¸ªæ¡ä»¶ä¸ºçœŸï¼ˆtrueï¼‰ã€‚ä¾‹å¦‚ï¼Œåªæœ‰å½“ condition1 å’Œ condition2 éƒ½ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œ[condition1] AND [condition2] ä¸ºçœŸï¼ˆtrueï¼‰ã€‚ è¯­æ³• å¸¦æœ‰ WHERE å­å¥çš„ AND è¿ç®—ç¬¦çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name WHERE [condition1] AND [condition2]...AND [conditionN]; æ‚¨å¯ä»¥ä½¿ç”¨ AND è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚SQLite è¯­å¥éœ€è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯ï¼Œæ— è®ºæ˜¯äº‹åŠ¡æˆ–æŸ¥è¯¢ï¼Œæ‰€æœ‰ç”± AND åˆ†éš”çš„æ¡ä»¶éƒ½å¿…é¡»ä¸ºçœŸï¼ˆTRUEï¼‰ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;= 25 AND SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 OR è¿ç®—ç¬¦OR è¿ç®—ç¬¦ä¹Ÿç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶ã€‚ä½¿ç”¨ OR è¿ç®—ç¬¦æ—¶ï¼Œåªè¦å½“æ¡ä»¶ä¸­ä»»ä½•ä¸€ä¸ªä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œæ•´ä¸ªæ¡ä»¶ä¸ºçœŸï¼ˆtrueï¼‰ã€‚ä¾‹å¦‚ï¼Œåªè¦å½“ condition1 æˆ– condition2 æœ‰ä¸€ä¸ªä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œ[condition1] OR [condition2] ä¸ºçœŸï¼ˆtrueï¼‰ è¯­æ³• å¸¦æœ‰ WHERE å­å¥çš„ OR è¿ç®—ç¬¦çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name WHERE [condition1] OR [condition2]...OR [conditionN] æ‚¨å¯ä»¥ä½¿ç”¨ OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚SQLite è¯­å¥éœ€è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯ï¼Œæ— è®ºæ˜¯äº‹åŠ¡æˆ–æŸ¥è¯¢ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªç”± OR åˆ†éš”çš„æ¡ä»¶ä¸ºçœŸï¼ˆTRUEï¼‰å³å¯ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;= 25 OR SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 SQLite Update è¯­å¥SQLite çš„ **UPDATE **æŸ¥è¯¢ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢æ¥æ›´æ–°é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è¡Œéƒ½ä¼šè¢«æ›´æ–°ã€‚ è¯­æ³• å¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š UPDATE table_name SET column1 = value1, column2 = value2...., columnN = valueN WHERE [condition]; æ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚ å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šæ›´æ–° ID ä¸º 6 çš„å®¢æˆ·åœ°å€ï¼š sqlite&gt; UPDATE COMPANY SET ADDRESS = &#39;Texas&#39; WHERE ID = 6; ç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 Texas 45000.0 7 James 24 Houston 10000.0 å¦‚æœæ‚¨æƒ³ä¿®æ”¹ COMPANY è¡¨ä¸­ ADDRESS å’Œ SALARY åˆ—çš„æ‰€æœ‰å€¼ï¼Œåˆ™ä¸éœ€è¦ä½¿ç”¨ WHERE å­å¥ï¼ŒUPDATE æŸ¥è¯¢å¦‚ä¸‹ï¼š sqlite&gt; UPDATE COMPANY SET ADDRESS = &#39;Texas&#39;, SALARY = 20000.00; ç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 Texas 20000.0 2 Allen 25 Texas 20000.0 3 Teddy 23 Texas 20000.0 4 Mark 25 Texas 20000.0 5 David 27 Texas 20000.0 6 Kim 22 Texas 20000.0 7 James 24 Texas 20000.0 èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(å››)","slug":"2016-01-13-sqlite-jiao-cheng-si","date":"2016-01-13T15:37:18.000Z","updated":"2024-11-02T03:36:52.402Z","comments":true,"path":"2016/01/13/2016-01-13-sqlite-jiao-cheng-si/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-sqlite-jiao-cheng-si/","excerpt":"","text":"SQLite è¿ç®—ç¬¦SQLite è¿ç®—ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¿ç•™å­—æˆ–å­—ç¬¦ï¼Œä¸»è¦ç”¨äº SQLite è¯­å¥çš„ WHERE å­å¥ä¸­æ‰§è¡Œæ“ä½œï¼Œå¦‚æ¯”è¾ƒå’Œç®—æœ¯è¿ç®—ã€‚ è¿ç®—ç¬¦ç”¨äºæŒ‡å®š SQLite è¯­å¥ä¸­çš„æ¡ä»¶ï¼Œå¹¶åœ¨è¯­å¥ä¸­è¿æ¥å¤šä¸ªæ¡ä»¶ã€‚ ç®—æœ¯è¿ç®—ç¬¦ æ¯”è¾ƒè¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ SQLite ç®—æœ¯è¿ç®—ç¬¦å‡è®¾å˜é‡ a&#x3D;10ï¼Œå˜é‡ b&#x3D;20ï¼Œåˆ™ï¼š è¿ç®—ç¬¦ æè¿° å®ä¾‹ + åŠ æ³• - æŠŠè¿ç®—ç¬¦ä¸¤è¾¹çš„å€¼ç›¸åŠ  a + b å°†å¾—åˆ° 30 - å‡æ³• - å·¦æ“ä½œæ•°å‡å»å³æ“ä½œæ•° a - b å°†å¾—åˆ° -10 * ä¹˜æ³• - æŠŠè¿ç®—ç¬¦ä¸¤è¾¹çš„å€¼ç›¸ä¹˜ a * b å°†å¾—åˆ° 200 &#x2F; é™¤æ³• - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•° b &#x2F; a å°†å¾—åˆ° 2 % å–æ¨¡ - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•°åå¾—åˆ°çš„ä½™æ•° b % a will give 0 å®ä¾‹ ä¸‹é¢æ˜¯ SQLite ç®—æœ¯è¿ç®—ç¬¦çš„ç®€å•å®ä¾‹ï¼š sqlite&gt; .mode line sqlite&gt; select 10 + 20; 10 + 20 = 30 sqlite&gt; select 10 - 20; 10 - 20 = -10 sqlite&gt; select 10 * 20; 10 * 20 = 200 sqlite&gt; select 10 / 5; 10 / 5 = 2 sqlite&gt; select 12 % 5; 12 % 5 = 2 SQLite æ¯”è¾ƒè¿ç®—ç¬¦å‡è®¾å˜é‡ a&#x3D;10ï¼Œå˜é‡ b&#x3D;20ï¼Œåˆ™ï¼š è¿ç®—ç¬¦ æè¿° å®ä¾‹ &#x3D;&#x3D; æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &#x3D;&#x3D; b) ä¸ä¸ºçœŸã€‚ &#x3D; æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &#x3D; b) ä¸ä¸ºçœŸã€‚ !&#x3D; æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a !&#x3D; b) ä¸ºçœŸã€‚ &lt;&gt; æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &lt;&gt; b) ä¸ºçœŸã€‚ &gt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &gt; b) ä¸ä¸ºçœŸã€‚ &lt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &lt; b) ä¸ºçœŸã€‚ &gt;&#x3D; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &gt;&#x3D; b) ä¸ä¸ºçœŸã€‚ &lt;&#x3D; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a &lt;&#x3D; b) ä¸ºçœŸã€‚ !&lt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a !&lt; b) ä¸ºå‡ !&gt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (a !&gt; b) ä¸ºçœŸ å®ä¾‹å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å„ç§ SQLite æ¯”è¾ƒè¿ç®—ç¬¦çš„ç”¨æ³•ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ WHERE å­å¥ï¼Œè¿™å°†ä¼šåœ¨åè¾¹å•ç‹¬çš„ä¸€ä¸ªç« èŠ‚ä¸­è®²è§£ï¼Œä½†ç°åœ¨æ‚¨éœ€è¦æ˜ç™½ï¼ŒWHERE å­å¥æ˜¯ç”¨æ¥è®¾ç½® SELECT è¯­å¥çš„æ¡ä»¶è¯­å¥ã€‚ ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY å¤§äº 50,000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY &gt; 50000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY = 20000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 3 Teddy 23 Norway 20000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ä¸ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY != 20000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ä¸ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY &lt;&gt; 20000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY å¤§äºç­‰äº 65,000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 SQLite é€»è¾‘è¿ç®—ç¬¦ä¸‹é¢æ˜¯ SQLite ä¸­æ‰€æœ‰çš„é€»è¾‘è¿ç®—ç¬¦åˆ—è¡¨ã€‚ è¿ç®—ç¬¦ æè¿° AND AND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨ã€‚ BETWEEN BETWEEN è¿ç®—ç¬¦ç”¨äºåœ¨ç»™å®šæœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´å†…çš„ä¸€ç³»åˆ—å€¼ä¸­æœç´¢å€¼ã€‚ EXISTS EXISTS è¿ç®—ç¬¦ç”¨äºåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æŒ‡å®šè¡¨ä¸­æœç´¢è¡Œçš„å­˜åœ¨ã€‚ IN IN è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚ NOT IN IN è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ï¼Œç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸åœ¨ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚ LIKE LIKE è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚ GLOB GLOB è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚GLOB ä¸ LIKE ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ NOT NOT è¿ç®—ç¬¦æ˜¯æ‰€ç”¨çš„é€»è¾‘è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ã€‚æ¯”å¦‚ NOT EXISTSã€NOT BETWEENã€NOT INï¼Œç­‰ç­‰ã€‚å®ƒæ˜¯å¦å®šè¿ç®—ç¬¦ã€‚ OR OR è¿ç®—ç¬¦ç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶ã€‚ IS NULL NULL è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ NULL å€¼è¿›è¡Œæ¯”è¾ƒã€‚ IS IS è¿ç®—ç¬¦ä¸ &#x3D; ç›¸ä¼¼ã€‚ IS NOT IS NOT è¿ç®—ç¬¦ä¸ !&#x3D; ç›¸ä¼¼ã€‚ || è¿æ¥ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚ UNIQUE UNIQUE è¿ç®—ç¬¦æœç´¢æŒ‡å®šè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼ˆæ— é‡å¤ï¼‰ã€‚ å®ä¾‹å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite é€»è¾‘è¿ç®—ç¬¦çš„ç”¨æ³•ã€‚ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;= 25 AND SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt;= 25 OR SALARY &gt;= 65000; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE ä¸ä¸º NULL çš„æ‰€æœ‰è®°å½•ï¼Œç»“æœæ˜¾ç¤ºæ‰€æœ‰çš„è®°å½•ï¼Œæ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªè®°å½•çš„ AGE ç­‰äº NULLï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE IS NOT NULL; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ â€˜Kiâ€™ å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œâ€™Kiâ€™ ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE NAME LIKE &#39;Ki%&#39;; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 6 Kim 22 South-Hall 45000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ â€˜Kiâ€™ å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œâ€™Kiâ€™ ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE NAME GLOB &#39;Ki*&#39;; ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 6 Kim 22 South-Hall 45000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 ); ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼æ—¢ä¸æ˜¯ 25 ä¹Ÿä¸æ˜¯ 27 çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE NOT IN ( 25, 27 ); ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 3 Teddy 23 Norway 20000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢çš„ SELECT è¯­å¥ä½¿ç”¨ SQL å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æŸ¥æ‰¾ SALARY &gt; 65000 çš„å¸¦æœ‰ AGE å­—æ®µçš„æ‰€æœ‰è®°å½•ï¼Œåè¾¹çš„ WHERE å­å¥ä¸ EXISTS è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œåˆ—å‡ºäº†å¤–æŸ¥è¯¢ä¸­çš„ AGE å­˜åœ¨äºå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT AGE FROM COMPANY WHERE EXISTS (SELECT AGE FROM COMPANY WHERE SALARY &gt; 65000); AGE ---------- 32 25 23 25 27 22 24 ä¸‹é¢çš„ SELECT è¯­å¥ä½¿ç”¨ SQL å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æŸ¥æ‰¾ SALARY &gt; 65000 çš„å¸¦æœ‰ AGE å­—æ®µçš„æ‰€æœ‰è®°å½•ï¼Œåè¾¹çš„ WHERE å­å¥ä¸ &gt; è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œåˆ—å‡ºäº†å¤–æŸ¥è¯¢ä¸­çš„ AGE å¤§äºå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­çš„å¹´é¾„çš„æ‰€æœ‰è®°å½•ï¼š sqlite&gt; SELECT * FROM COMPANY WHERE AGE &gt; (SELECT AGE FROM COMPANY WHERE SALARY &gt; 65000); ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 SQLite ä½è¿ç®—ç¬¦ä½è¿ç®—ç¬¦ä½œç”¨äºä½ï¼Œå¹¶é€ä½æ‰§è¡Œæ“ä½œã€‚çœŸå€¼è¡¨ &amp; å’Œ | å¦‚ä¸‹ï¼š p q p&amp;q p|q 0 0 0 0 0 1 0 1 1 1 1 1 1 0 0 1 å‡è®¾å¦‚æœ A &#x3D; 60ï¼Œä¸” B &#x3D; 13ï¼Œç°åœ¨ä»¥äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒä»¬å¦‚ä¸‹æ‰€ç¤ºï¼š A &#x3D; 0011 1100 B &#x3D; 0000 1101 A&amp;B &#x3D; 0000 1100 A|B &#x3D; 0011 1101 ~A &#x3D; 1100 0011 ä¸‹è¡¨ä¸­åˆ—å‡ºäº† SQLite è¯­è¨€æ”¯æŒçš„ä½è¿ç®—ç¬¦ã€‚å‡è®¾å˜é‡ A&#x3D;60ï¼Œå˜é‡ B&#x3D;13ï¼Œåˆ™ï¼š è¿ç®—ç¬¦ æè¿° å®ä¾‹ &amp; å¦‚æœåŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ AND è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚ (A &amp; B) å°†å¾—åˆ° 12ï¼Œå³ä¸º 0000 1100 | å¦‚æœå­˜åœ¨äºä»»ä¸€æ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ OR è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚ (A ~ äºŒè¿›åˆ¶è¡¥ç è¿ç®—ç¬¦æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œå…·æœ‰â€ç¿»è½¬â€ä½æ•ˆåº”ã€‚ (~A ) å°†å¾—åˆ° -61ï¼Œå³ä¸º 1100 0011ï¼Œ2 çš„è¡¥ç å½¢å¼ï¼Œå¸¦ç¬¦å·çš„äºŒè¿›åˆ¶æ•°ã€‚ &lt;&lt; äºŒè¿›åˆ¶å·¦ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼å‘å·¦ç§»åŠ¨å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚ A &lt;&lt; 2 å°†å¾—åˆ° 240ï¼Œå³ä¸º 1111 0000 &gt;&gt; äºŒè¿›åˆ¶å³ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼å‘å³ç§»åŠ¨å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚ A &gt;&gt; 2 å°†å¾—åˆ° 15ï¼Œå³ä¸º 0000 1111 å®ä¾‹ ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite ä½è¿ç®—ç¬¦çš„ç”¨æ³•ï¼š sqlite&gt; .mode line sqlite&gt; select 60 | 13; 60 | 13 = 61 sqlite&gt; select 60 &amp; 13; 60 &amp; 13 = 12 sqlite&gt; select 60 ^ 13; 10 * 20 = 200 sqlite&gt; select (~60); (~60) = -61 sqlite&gt; select (60 &lt;&lt; 2); (60 &lt;&lt; 2) = 240 sqlite&gt; select (60 &gt;&gt; 2); (60 &gt;&gt; 2) = 15 èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(ä¸‰)","slug":"2016-01-13-sqlite-jiao-cheng-san","date":"2016-01-13T15:22:37.000Z","updated":"2024-11-02T03:36:52.401Z","comments":true,"path":"2016/01/13/2016-01-13-sqlite-jiao-cheng-san/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-sqlite-jiao-cheng-san/","excerpt":"","text":"SQLite Insert è¯­å¥SQLite çš„ INSERT INTO è¯­å¥ç”¨äºå‘æ•°æ®åº“çš„æŸä¸ªè¡¨ä¸­æ·»åŠ æ–°çš„æ•°æ®è¡Œã€‚ è¯­æ³• INSERT INTO è¯­å¥æœ‰ä¸¤ç§åŸºæœ¬è¯­æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š INSERT INTO TABLE_NAME (column1, column2, column3,...columnN)] VALUES (value1, value2, value3,...valueN); åœ¨è¿™é‡Œï¼Œcolumn1, column2,â€¦columnN æ˜¯è¦æ’å…¥æ•°æ®çš„è¡¨ä¸­çš„åˆ—çš„åç§°ã€‚å¦‚æœè¦ä¸ºè¡¨ä¸­çš„æ‰€æœ‰åˆ—æ·»åŠ å€¼ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸éœ€è¦åœ¨ SQLite æŸ¥è¯¢ä¸­æŒ‡å®šåˆ—åç§°ã€‚ä½†è¦ç¡®ä¿å€¼çš„é¡ºåºä¸åˆ—åœ¨è¡¨ä¸­çš„é¡ºåºä¸€è‡´ã€‚SQLite çš„ INSERT INTO è¯­æ³•å¦‚ä¸‹ï¼š INSERT INTO TABLE_NAME VALUES (value1,value2,value3,...valueN); å®ä¾‹ å‡è®¾æ‚¨å·²ç»åœ¨ testDB.db ä¸­åˆ›å»ºäº† COMPANYè¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; CREATE TABLE COMPANY( ID INT PRIMARY KEY NOT NULL, NAME TEXT NOT NULL, AGE INT NOT NULL, ADDRESS CHAR(50), SALARY REAL ); ç°åœ¨ï¼Œä¸‹é¢çš„è¯­å¥å°†åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºå…­ä¸ªè®°å½•ï¼š INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (1, &#39;Paul&#39;, 32, &#39;California&#39;, 20000.00 ); INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (2, &#39;Allen&#39;, 25, &#39;Texas&#39;, 15000.00 ); INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (3, &#39;Teddy&#39;, 23, &#39;Norway&#39;, 20000.00 ); INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (4, &#39;Mark&#39;, 25, &#39;Rich-Mond &#39;, 65000.00 ); INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (5, &#39;David&#39;, 27, &#39;Texas&#39;, 85000.00 ); INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) VALUES (6, &#39;Kim&#39;, 22, &#39;South-Hall&#39;, 45000.00 ); æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬äºŒç§è¯­æ³•åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºä¸€ä¸ªè®°å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š INSERT INTO COMPANY VALUES (7, &#39;James&#39;, 24, &#39;Houston&#39;, 10000.00 ); ä¸Šé¢çš„æ‰€æœ‰è¯­å¥å°†åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºä¸‹åˆ—è®°å½•ã€‚ä¸‹ä¸€ç« ä¼šæ•™æ‚¨å¦‚ä½•ä»ä¸€ä¸ªè¡¨ä¸­æ˜¾ç¤ºæ‰€æœ‰è¿™äº›è®°å½•ã€‚ ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä½¿ç”¨ä¸€ä¸ªè¡¨æ¥å¡«å……å¦ä¸€ä¸ªè¡¨æ‚¨å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªæœ‰ä¸€ç»„å­—æ®µçš„è¡¨ä¸Šä½¿ç”¨ select è¯­å¥ï¼Œå¡«å……æ•°æ®åˆ°å¦ä¸€ä¸ªè¡¨ä¸­ã€‚ä¸‹é¢æ˜¯è¯­æ³•ï¼š INSERT INTO first_table_name [(column1, column2, ... columnN)] SELECT column1, column2, ...columnN FROM second_table_name [WHERE condition]; SQLite Select è¯­å¥SQLite çš„ SELECT è¯­å¥ç”¨äºä» SQLite æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥ç»“æœè¡¨çš„å½¢å¼è¿”å›æ•°æ®ã€‚è¿™äº›ç»“æœè¡¨ä¹Ÿè¢«ç§°ä¸ºç»“æœé›†ã€‚ è¯­æ³• SQLite çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name; åœ¨è¿™é‡Œï¼Œcolumn1, column2â€¦æ˜¯è¡¨çš„å­—æ®µï¼Œä»–ä»¬çš„å€¼å³æ˜¯æ‚¨è¦è·å–çš„ã€‚å¦‚æœæ‚¨æƒ³è·å–æ‰€æœ‰å¯ç”¨çš„å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š SELECT * FROM table_name; å®ä¾‹ å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨ SELECT è¯­å¥è·å–å¹¶æ˜¾ç¤ºæ‰€æœ‰è¿™äº›è®°å½•ã€‚åœ¨è¿™é‡Œï¼Œå‰ä¸‰ä¸ªå‘½ä»¤è¢«ç”¨æ¥è®¾ç½®æ­£ç¡®æ ¼å¼åŒ–çš„è¾“å‡ºã€‚ sqlite&gt;.header on sqlite&gt;.mode column sqlite&gt; SELECT * FROM COMPANY; æœ€åï¼Œå°†å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 å¦‚æœåªæƒ³è·å– COMPANY è¡¨ä¸­æŒ‡å®šçš„å­—æ®µï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„æŸ¥è¯¢ï¼š sqlite&gt; SELECT ID, NAME, SALARY FROM COMPANY; ä¸Šé¢çš„æŸ¥è¯¢ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š ID NAME SALARY ---------- ---------- ---------- 1 Paul 20000.0 2 Allen 15000.0 3 Teddy 20000.0 4 Mark 65000.0 5 David 85000.0 6 Kim 45000.0 7 James 10000.0 è®¾ç½®è¾“å‡ºåˆ—çš„å®½åº¦ æœ‰æ—¶ï¼Œç”±äºè¦æ˜¾ç¤ºçš„åˆ—çš„é»˜è®¤å®½åº¦å¯¼è‡´ .mode columnï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å‡ºè¢«æˆªæ–­ã€‚æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ .width num, numâ€¦. å‘½ä»¤è®¾ç½®æ˜¾ç¤ºåˆ—çš„å®½åº¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt;.width 10, 20, 10 sqlite&gt;SELECT * FROM COMPANY; ä¸Šé¢çš„ .width å‘½ä»¤è®¾ç½®ç¬¬ä¸€åˆ—çš„å®½åº¦ä¸º 10ï¼Œç¬¬äºŒåˆ—çš„å®½åº¦ä¸º 20ï¼Œç¬¬ä¸‰åˆ—çš„å®½åº¦ä¸º 10ã€‚å› æ­¤ä¸Šè¿° SELECT è¯­å¥å°†å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š ID NAME AGE ADDRESS SALARY ---------- -------------------- ---------- ---------- ---------- 1 Paul 32 California 20000.0 2 Allen 25 Texas 15000.0 3 Teddy 23 Norway 20000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 6 Kim 22 South-Hall 45000.0 7 James 24 Houston 10000.0 Schema ä¿¡æ¯å› ä¸ºæ‰€æœ‰çš„ç‚¹å‘½ä»¤åªåœ¨ SQLite æç¤ºç¬¦ä¸­å¯ç”¨ï¼Œæ‰€ä»¥å½“æ‚¨è¿›è¡Œå¸¦æœ‰ SQLite çš„ç¼–ç¨‹æ—¶ï¼Œæ‚¨è¦ä½¿ç”¨ä¸‹é¢çš„å¸¦æœ‰ sqlite_master è¡¨çš„ SELECT è¯­å¥æ¥åˆ—å‡ºæ‰€æœ‰åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨ï¼š sqlite&gt; SELECT tbl_name FROM sqlite_master WHERE type = &#39;table&#39;; å‡è®¾åœ¨ testDB.db ä¸­å·²ç»å­˜åœ¨å”¯ä¸€çš„ COMPANY è¡¨ï¼Œåˆ™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š tbl_name ---------- COMPANY æ‚¨å¯ä»¥åˆ—å‡ºå…³äº COMPANY è¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; SELECT sql FROM sqlite_master WHERE type = &#39;table&#39; AND tbl_name = &#39;COMPANY&#39;; å‡è®¾åœ¨ testDB.db ä¸­å·²ç»å­˜åœ¨å”¯ä¸€çš„ COMPANY è¡¨ï¼Œåˆ™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š CREATE TABLE COMPANY( ID INT PRIMARY KEY NOT NULL, NAME TEXT NOT NULL, AGE INT NOT NULL, ADDRESS CHAR(50), SALARY REAL ) èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(äºŒ)","slug":"2016-01-13-sqlite-jiao-cheng-er","date":"2016-01-13T15:21:34.000Z","updated":"2024-11-02T03:36:52.401Z","comments":true,"path":"2016/01/13/2016-01-13-sqlite-jiao-cheng-er/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-sqlite-jiao-cheng-er/","excerpt":"","text":"SQLite æ•°æ®ç±»å‹SQLite æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªç”¨æ¥æŒ‡å®šä»»ä½•å¯¹è±¡çš„æ•°æ®ç±»å‹çš„å±æ€§ã€‚SQLite ä¸­çš„æ¯ä¸€åˆ—ï¼Œæ¯ä¸ªå˜é‡å’Œè¡¨è¾¾å¼éƒ½æœ‰ç›¸å…³çš„æ•°æ®ç±»å‹ã€‚ æ‚¨å¯ä»¥åœ¨åˆ›å»ºè¡¨çš„åŒæ—¶ä½¿ç”¨è¿™äº›æ•°æ®ç±»å‹ã€‚SQLite ä½¿ç”¨ä¸€ä¸ªæ›´æ™®éçš„åŠ¨æ€ç±»å‹ç³»ç»Ÿã€‚åœ¨ SQLite ä¸­ï¼Œå€¼çš„æ•°æ®ç±»å‹ä¸å€¼æœ¬èº«æ˜¯ç›¸å…³çš„ï¼Œè€Œä¸æ˜¯ä¸å®ƒçš„å®¹å™¨ç›¸å…³ã€‚ SQLite å­˜å‚¨ç±»æ¯ä¸ªå­˜å‚¨åœ¨ SQLite æ•°æ®åº“ä¸­çš„å€¼éƒ½å…·æœ‰ä»¥ä¸‹å­˜å‚¨ç±»ä¹‹ä¸€ï¼š å­˜å‚¨ç±» æè¿° NULL å€¼æ˜¯ä¸€ä¸ª NULL å€¼ã€‚ INTEGER å€¼æ˜¯ä¸€ä¸ªå¸¦ç¬¦å·çš„æ•´æ•°ï¼Œæ ¹æ®å€¼çš„å¤§å°å­˜å‚¨åœ¨ 1ã€2ã€3ã€4ã€6 æˆ– 8 å­—èŠ‚ä¸­ã€‚ REAL å€¼æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼Œå­˜å‚¨ä¸º 8 å­—èŠ‚çš„ IEEE æµ®ç‚¹æ•°å­—ã€‚ TEXT å€¼æ˜¯ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ•°æ®åº“ç¼–ç ï¼ˆUTF-8ã€UTF-16BE æˆ– BLOB å€¼æ˜¯ä¸€ä¸ª blob æ•°æ®ï¼Œå®Œå…¨æ ¹æ®å®ƒçš„è¾“å…¥å­˜å‚¨ã€‚ SQLite çš„å­˜å‚¨ç±»ç¨å¾®æ¯”æ•°æ®ç±»å‹æ›´æ™®éã€‚INTEGER å­˜å‚¨ç±»ï¼Œä¾‹å¦‚ï¼ŒåŒ…å« 6 ç§ä¸åŒçš„ä¸åŒé•¿åº¦çš„æ•´æ•°æ•°æ®ç±»å‹ã€‚ SQLite Affinity ç±»å‹SQLite æ”¯æŒåˆ—ä¸Šçš„ç±»å‹ affinity æ¦‚å¿µã€‚ä»»ä½•åˆ—ä»ç„¶å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä½†åˆ—çš„é¦–é€‰å­˜å‚¨ç±»æ˜¯å®ƒçš„ affinityã€‚åœ¨ SQLite3 æ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªè¡¨çš„åˆ—åˆ†é…ä¸ºä»¥ä¸‹ç±»å‹çš„ affinity ä¹‹ä¸€ï¼š Affinity æè¿° TEXT è¯¥åˆ—ä½¿ç”¨å­˜å‚¨ç±» NULLã€TEXT æˆ– BLOB å­˜å‚¨æ‰€æœ‰æ•°æ®ã€‚ NUMERIC è¯¥åˆ—å¯ä»¥åŒ…å«ä½¿ç”¨æ‰€æœ‰äº”ä¸ªå­˜å‚¨ç±»çš„å€¼ã€‚ INTEGER ä¸å¸¦æœ‰ NUMERIC affinity çš„åˆ—ç›¸åŒï¼Œåœ¨ CAST è¡¨è¾¾å¼ä¸­å¸¦æœ‰å¼‚å¸¸ã€‚ REAL ä¸å¸¦æœ‰ NUMERIC affinity çš„åˆ—ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šå¼ºåˆ¶æŠŠæ•´æ•°å€¼è½¬æ¢ä¸ºæµ®ç‚¹è¡¨ç¤ºã€‚ NONE å¸¦æœ‰ affinity NONE çš„åˆ—ï¼Œä¸ä¼šä¼˜å…ˆä½¿ç”¨å“ªä¸ªå­˜å‚¨ç±»ï¼Œä¹Ÿä¸ä¼šå°è¯•æŠŠæ•°æ®ä»ä¸€ä¸ªå­˜å‚¨ç±»å¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­˜å‚¨ç±»ã€‚ SQLite Affinity åŠç±»å‹åç§°ä¸‹è¡¨åˆ—å‡ºäº†å½“åˆ›å»º SQLite3 è¡¨æ—¶å¯ä½¿ç”¨çš„å„ç§æ•°æ®ç±»å‹åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºäº†ç›¸åº”çš„åº”ç”¨ Affinityï¼š æ•°æ®ç±»å‹ Affinity INT INTEGERTINYINT SMALLINT MEDIUMINT BIGINT UNSIGNED BIG INT INT2 INT8 INTEGER CHARACTER(20) VARCHAR(255) VARYING CHARACTER(255) NCHAR(55) NATIVE CHARACTER(70) NVARCHAR(100) TEXT CLOB TEXT BLOB no datatype specified NONE REAL DOUBLE DOUBLE PRECISION FLOAT REAL NUMERIC DECIMAL(10,5) BOOLEAN DATE DATETIME NUMERIC Boolean æ•°æ®ç±»å‹SQLite æ²¡æœ‰å•ç‹¬çš„ Boolean å­˜å‚¨ç±»ã€‚ç›¸åï¼Œå¸ƒå°”å€¼è¢«å­˜å‚¨ä¸ºæ•´æ•° 0ï¼ˆfalseï¼‰å’Œ 1ï¼ˆtrueï¼‰ã€‚ Date ä¸ Time æ•°æ®ç±»å‹SQLite æ²¡æœ‰ä¸€ä¸ªå•ç‹¬çš„ç”¨äºå­˜å‚¨æ—¥æœŸå’Œ&#x2F;æˆ–æ—¶é—´çš„å­˜å‚¨ç±»ï¼Œä½† SQLite èƒ½å¤ŸæŠŠæ—¥æœŸå’Œæ—¶é—´å­˜å‚¨ä¸º TEXTã€REAL æˆ– INTEGER å€¼ã€‚ å­˜å‚¨ç±» æ—¥æœŸæ ¼å¼ TEXT æ ¼å¼ä¸º â€œYYYY-MM-DD HH:MM:SS.SSSâ€ çš„æ—¥æœŸã€‚ REAL ä»å…¬å…ƒå‰ 4714 å¹´ 11 æœˆ 24 æ—¥æ ¼æ—å°¼æ²»æ—¶é—´çš„æ­£åˆå¼€å§‹ç®—èµ·çš„å¤©æ•°ã€‚ INTEGER ä» 1970-01-01 00:00:00 UTC ç®—èµ·çš„ç§’æ•°ã€‚ æ‚¨å¯ä»¥ä»¥ä»»ä½•ä¸Šè¿°æ ¼å¼æ¥å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´å‡½æ•°æ¥è‡ªç”±è½¬æ¢ä¸åŒæ ¼å¼ã€‚ SQLite åˆ›å»ºæ•°æ®åº“SQLite çš„ sqlite3 å‘½ä»¤è¢«ç”¨æ¥åˆ›å»ºæ–°çš„ SQLite æ•°æ®åº“ã€‚æ‚¨ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„æƒé™å³å¯åˆ›å»ºä¸€ä¸ªæ•°æ®ã€‚ è¯­æ³• sqlite3 å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š $sqlite3 DatabaseName.db é€šå¸¸æƒ…å†µä¸‹ï¼Œæ•°æ®åº“åç§°åœ¨ RDBMS å†…åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚ å®ä¾‹ å¦‚æœæ‚¨æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ &lt;testDB.db&gt;ï¼ŒSQLITE3 è¯­å¥å¦‚ä¸‹æ‰€ç¤ºï¼š $sqlite3 testDB.db SQLite version 3.8.10.2 2015-05-20 18:17:19 Enter &quot;.help&quot; for usage hints. sqlite&gt; ä¸Šé¢çš„å‘½ä»¤å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ testDB.dbã€‚è¯¥æ–‡ä»¶å°†è¢« SQLite å¼•æ“ç”¨ä½œæ•°æ®åº“ã€‚å¦‚æœæ‚¨å·²ç»æ³¨æ„åˆ° sqlite3 å‘½ä»¤åœ¨æˆåŠŸåˆ›å»ºæ•°æ®åº“æ–‡ä»¶ä¹‹åï¼Œå°†æä¾›ä¸€ä¸ª sqlite&gt; æç¤ºç¬¦ã€‚ä¸€æ—¦æ•°æ®åº“è¢«åˆ›å»ºï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨ SQLite çš„ .databases å‘½ä»¤æ¥æ£€æŸ¥å®ƒæ˜¯å¦åœ¨æ•°æ®åº“åˆ—è¡¨ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt;.databases seq name file ---- ---------------- -------------------------------------------- 0 main /Users/wangruofeng/Documents/SQLitePractice/testDB.db æ‚¨å¯ä»¥ä½¿ç”¨ SQLite .quit å‘½ä»¤é€€å‡º sqlite æç¤ºç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt;.quit $ .dump å‘½ä»¤æ‚¨å¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ SQLite .dump ç‚¹å‘½ä»¤æ¥å¯¼å‡ºå®Œæ•´çš„æ•°æ®åº“åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š $sqlite3 testDB.db .dump &gt; testDB.sql ä¸Šé¢çš„å‘½ä»¤å°†è½¬æ¢æ•´ä¸ª testDB.db æ•°æ®åº“çš„å†…å®¹åˆ° SQLite çš„è¯­å¥ä¸­ï¼Œå¹¶å°†å…¶è½¬å‚¨åˆ° ASCII æ–‡æœ¬æ–‡ä»¶ testDB.sql ä¸­ã€‚æ‚¨å¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼ä»ç”Ÿæˆçš„ testDB.sql æ¢å¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š $sqlite3 testDB.db &lt; testDB.sql æ­¤æ—¶çš„æ•°æ®åº“æ˜¯ç©ºçš„ï¼Œä¸€æ—¦æ•°æ®åº“ä¸­æœ‰è¡¨å’Œæ•°æ®ï¼Œæ‚¨å¯ä»¥å°è¯•ä¸Šè¿°ä¸¤ä¸ªç¨‹åºã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­å­¦ä¹ ä¸‹ä¸€ç« ã€‚ SQLite é™„åŠ æ•°æ®åº“å‡è®¾è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“åœ¨åŒä¸€æ—¶é—´æœ‰å¤šä¸ªæ•°æ®åº“å¯ç”¨ï¼Œæ‚¨æƒ³ä½¿ç”¨å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚SQLite çš„ ATTACH DTABASE è¯­å¥æ˜¯ç”¨æ¥é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åï¼Œæ‰€æœ‰çš„ SQLite è¯­å¥å°†åœ¨é™„åŠ çš„æ•°æ®åº“ä¸‹æ‰§è¡Œã€‚ç›¸å½“äºç»™æ•°æ®åº“å–ä¸€ä¸ªåˆ«å è¯­æ³• SQLite çš„ ATTACH DATABASE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š ATTACH DATABASE &#39;DatabaseName&#39; As &#39;Alias-Name&#39;; å¦‚æœæ•°æ®åº“å°šæœªè¢«åˆ›å»ºï¼Œä¸Šé¢çš„å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“å·²å­˜åœ¨ï¼Œåˆ™æŠŠæ•°æ®åº“æ–‡ä»¶åç§°ä¸é€»è¾‘æ•°æ®åº“ â€˜Alias-Nameâ€™ ç»‘å®šåœ¨ä¸€èµ·ã€‚ å®ä¾‹å¦‚æœæƒ³é™„åŠ ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“ testDB.dbï¼Œåˆ™ ATTACH DATABASE è¯­å¥å°†å¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; ATTACH DATABASE &#39;testDB.db&#39; as &#39;TEST&#39;; ä½¿ç”¨ SQLite .database å‘½ä»¤æ¥æ˜¾ç¤ºé™„åŠ çš„æ•°æ®åº“ã€‚ sqlite&gt; .database seq name file --- --------------- ---------------------- 0 main /home/sqlite/testDB.db 2 test /home/sqlite/testDB.db æ•°æ®åº“åç§° main å’Œ temp è¢«ä¿ç•™ç”¨äºä¸»æ•°æ®åº“å’Œå­˜å‚¨ä¸´æ—¶è¡¨åŠå…¶ä»–ä¸´æ—¶æ•°æ®å¯¹è±¡çš„æ•°æ®åº“ã€‚è¿™ä¸¤ä¸ªæ•°æ®åº“åç§°å¯ç”¨äºæ¯ä¸ªæ•°æ®åº“è¿æ¥ï¼Œä¸”ä¸åº”è¯¥è¢«ç”¨äºé™„åŠ ï¼Œå¦åˆ™å°†å¾—åˆ°ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; ATTACH DATABASE &#39;testDB.db&#39; as &#39;TEMP&#39;; Error: database TEMP is already in use sqlite&gt; ATTACH DATABASE &#39;testDB.db&#39; as &#39;main&#39;; Error: database main is already in use SQLite åˆ†ç¦»æ•°æ®åº“SQLiteçš„ DETACH DTABASE è¯­å¥æ˜¯ç”¨æ¥æŠŠå‘½åæ•°æ®åº“ä»ä¸€ä¸ªæ•°æ®åº“è¿æ¥åˆ†ç¦»å’Œæ¸¸ç¦»å‡ºæ¥ï¼Œè¿æ¥æ˜¯ä¹‹å‰ä½¿ç”¨ ATTACH è¯­å¥é™„åŠ çš„ã€‚å¦‚æœåŒä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶å·²ç»è¢«é™„åŠ ä¸Šå¤šä¸ªåˆ«åï¼ŒDETACH å‘½ä»¤å°†åªæ–­å¼€ç»™å®šåç§°çš„è¿æ¥ï¼Œè€Œå…¶ä½™çš„ä»ç„¶æœ‰æ•ˆã€‚æ‚¨æ— æ³•åˆ†ç¦» main æˆ– temp æ•°æ®åº“ã€‚ å¦‚æœæ•°æ®åº“æ˜¯åœ¨å†…å­˜ä¸­æˆ–è€…æ˜¯ä¸´æ—¶æ•°æ®åº“ï¼Œåˆ™è¯¥æ•°æ®åº“å°†è¢«æ‘§æ¯ï¼Œä¸”å†…å®¹å°†ä¼šä¸¢å¤±ã€‚ è¯­æ³• SQLite çš„ DETACH DATABASE â€˜Alias-Nameâ€™ è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š DETACH DATABASE &#39;Alias-Name&#39;; åœ¨è¿™é‡Œï¼Œâ€™Alias-Nameâ€™ ä¸æ‚¨ä¹‹å‰ä½¿ç”¨ ATTACH è¯­å¥é™„åŠ æ•°æ®åº“æ—¶æ‰€ç”¨åˆ°çš„åˆ«åç›¸åŒã€‚ å®ä¾‹ å‡è®¾åœ¨å‰é¢çš„ç« èŠ‚ä¸­æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“ï¼Œå¹¶ç»™å®ƒé™„åŠ äº† â€˜testâ€™ å’Œ â€˜currentDBâ€™ï¼Œä½¿ç”¨ .database&#x2F;.databases å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š sqlite&gt; .databases seq name file --- --------------- ---------------------- 0 main /home/sqlite/testDB.db 2 test /home/sqlite/testDB.db 3 currentDB /home/sqlite/testDB.db ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•æŠŠ â€˜currentDBâ€™ ä» testDB.db ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt; DETACH DATABASE &#39;currentDB&#39;; ç°åœ¨ï¼Œå¦‚æœæ£€æŸ¥å½“å‰é™„åŠ çš„æ•°æ®åº“ï¼Œæ‚¨ä¼šå‘ç°ï¼ŒtestDB.db ä»ä¸ â€˜testâ€™ å’Œ â€˜mainâ€™ ä¿æŒè¿æ¥ã€‚ sqlite&gt; .databases seq name file --- --------------- ---------------------- 0 main /home/sqlite/testDB.db 2 test /home/sqlite/testDB.db SQLite åˆ›å»ºè¡¨SQLite çš„ CREATE TABLE è¯­å¥ç”¨äºåœ¨ä»»ä½•ç»™å®šçš„æ•°æ®åº“åˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚åˆ›å»ºåŸºæœ¬è¡¨ï¼Œæ¶‰åŠåˆ°å‘½åè¡¨ã€å®šä¹‰åˆ—åŠæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹ã€‚ è¯­æ³• CREATE TABLE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š CREATE TABLE database_name.table_name( column1 datatype PRIMARY KEY(one or more columns), column2 datatype, column3 datatype, ..... columnN datatype, ); CREATE TABLE æ˜¯å‘Šè¯‰æ•°æ®åº“ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªæ–°è¡¨çš„å…³é”®å­—ã€‚CREATE TABLE è¯­å¥åè·Ÿç€è¡¨çš„å”¯ä¸€çš„åç§°æˆ–æ ‡è¯†ã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šå¸¦æœ‰ table_name çš„ database_nameã€‚ å®ä¾‹ ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª COMPANY è¡¨ï¼ŒID ä½œä¸ºä¸»é”®ï¼ŒNOT NULL çš„çº¦æŸè¡¨ç¤ºåœ¨è¡¨ä¸­åˆ›å»ºçºªå½•æ—¶è¿™äº›å­—æ®µä¸èƒ½ä¸º NULLï¼š sqlite&gt; CREATE TABLE COMPANY( ID INT PRIMARY KEY NOT NULL, NAME TEXT NOT NULL, AGE INT NOT NULL, ADDRESS CHAR(50), SALARY REAL ); è®©æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œæˆ‘ä»¬å°†åœ¨éšåç« èŠ‚çš„ç»ƒä¹ ä¸­ä½¿ç”¨ï¼š sqlite&gt; CREATE TABLE DEPARTMENT( ID INT PRIMARY KEY NOT NULL, DEPT CHAR(50) NOT NULL, EMP_ID INT NOT NULL ); æ‚¨å¯ä»¥ä½¿ç”¨ SQLIte å‘½ä»¤ä¸­çš„ .tables&#x2F;.table å‘½ä»¤æ¥éªŒè¯è¡¨æ˜¯å¦å·²æˆåŠŸåˆ›å»ºï¼Œè¯¥å‘½ä»¤ç”¨äºåˆ—å‡ºé™„åŠ æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ã€‚ sqlite&gt; .tables COMPANY DEPARTMENT TEST.COMPANY TEST.DEPARTMENT åœ¨è¿™é‡Œï¼Œå¯ä»¥çœ‹åˆ° COMPANY è¡¨å‡ºç°ä¸¤æ¬¡ï¼Œä¸€ä¸ªæ˜¯ä¸»æ•°æ®åº“çš„ COMPANY è¡¨ï¼Œä¸€ä¸ªæ˜¯ä¸º testDB.db åˆ›å»ºçš„ â€˜testâ€™ åˆ«åçš„ test.COMPANY è¡¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ SQLite .schema å‘½ä»¤å¾—åˆ°è¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š sqlite&gt;.schema COMPANY CREATE TABLE COMPANY( ID INT PRIMARY KEY NOT NULL, NAME TEXT NOT NULL, AGE INT NOT NULL, ADDRESS CHAR(50), SALARY REAL ); SQLite åˆ é™¤è¡¨SQLite çš„ DROP TABLE è¯­å¥ç”¨æ¥åˆ é™¤è¡¨å®šä¹‰åŠå…¶æ‰€æœ‰ç›¸å…³æ•°æ®ã€ç´¢å¼•ã€è§¦å‘å™¨ã€çº¦æŸå’Œè¯¥è¡¨çš„æƒé™è§„èŒƒã€‚ ä½¿ç”¨æ­¤å‘½ä»¤æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªè¡¨è¢«åˆ é™¤ï¼Œè¡¨ä¸­æ‰€æœ‰ä¿¡æ¯ä¹Ÿå°†æ°¸è¿œä¸¢å¤±ã€‚ è¯­æ³• DROP TABLE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ã€‚æ‚¨å¯ä»¥é€‰æ‹©æŒ‡å®šå¸¦æœ‰è¡¨åçš„æ•°æ®åº“åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š DROP TABLE database_name.table_name; å®ä¾‹ è®©æˆ‘ä»¬å…ˆç¡®è®¤ COMPANY è¡¨å·²ç»å­˜åœ¨ï¼Œç„¶åæˆ‘ä»¬å°†å…¶ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚ sqlite&gt; .tables COMPANY test.COMPANY è¿™æ„å‘³ç€ COMPANY è¡¨å·²å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æŠŠå®ƒä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œå¦‚ä¸‹ï¼š sqlite&gt; DROP TABLE COMPANY; sqlite&gt; ç°åœ¨ï¼Œå¦‚æœå°è¯• .TABLES å‘½ä»¤ï¼Œé‚£ä¹ˆå°†æ— æ³•æ‰¾åˆ° COMPANY è¡¨äº†ï¼š sqlite&gt; .tables sqlite&gt; æ˜¾ç¤ºç»“æœä¸ºç©ºï¼Œæ„å‘³ç€å·²ç»æˆåŠŸä»æ•°æ®åº“åˆ é™¤è¡¨ã€‚ èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"SQLite_æ•™ç¨‹(ä¸€)","slug":"2016-01-13-sqlite-jiao-cheng-[?]","date":"2016-01-13T15:18:15.000Z","updated":"2024-11-02T03:36:52.401Z","comments":true,"path":"2016/01/13/2016-01-13-sqlite-jiao-cheng-[?]/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-sqlite-jiao-cheng-[?%5D/","excerpt":"","text":"ç®€ä»‹ï¼šSQLite æ˜¯ä¸€ä¸ªè½¯ä»¶åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æºä»£ç ä¸å—ç‰ˆæƒé™åˆ¶ã€‚æœ¬æ•™ç¨‹å°†å‘Šè¯‰æ‚¨å¦‚ä½•ä½¿ç”¨ SQLite ç¼–ç¨‹ï¼Œå¹¶è®©ä½ è¿…é€Ÿä¸Šæ‰‹ã€‚ ä»€ä¹ˆæ˜¯ SQLiteï¼ŸSQLiteæ˜¯ä¸€ä¸ªè¿›ç¨‹å†…çš„åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚å®ƒæ˜¯ä¸€ä¸ªé›¶é…ç½®çš„æ•°æ®åº“ï¼Œè¿™æ„å‘³ç€ä¸å…¶ä»–æ•°æ®åº“ä¸€æ ·ï¼Œæ‚¨ä¸éœ€è¦åœ¨ç³»ç»Ÿä¸­é…ç½®ã€‚å°±åƒå…¶ä»–æ•°æ®åº“ï¼ŒSQLite å¼•æ“ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¯ä»¥æŒ‰åº”ç”¨ç¨‹åºéœ€æ±‚è¿›è¡Œé™æ€æˆ–åŠ¨æ€è¿æ¥ã€‚SQLite ç›´æ¥è®¿é—®å…¶å­˜å‚¨æ–‡ä»¶ ä¸ºä»€ä¹ˆè¦ç”¨ SQLiteï¼Ÿ ä¸éœ€è¦ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨è¿›ç¨‹æˆ–æ“ä½œçš„ç³»ç»Ÿï¼ˆæ— æœåŠ¡å™¨çš„ï¼‰ã€‚ SQLite ä¸éœ€è¦é…ç½®ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦å®‰è£…æˆ–ç®¡ç†ã€‚ ä¸€ä¸ªå®Œæ•´çš„ SQLite æ•°æ®åº“æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„è·¨å¹³å°çš„ç£ç›˜æ–‡ä»¶ã€‚ SQLite æ˜¯éå¸¸å°çš„ï¼Œæ˜¯è½»é‡çº§çš„ï¼Œå®Œå…¨é…ç½®æ—¶å°äº 400KiBï¼Œçœç•¥å¯é€‰åŠŸèƒ½é…ç½®æ—¶å°äº250KiBã€‚ SQLite æ˜¯è‡ªç»™è‡ªè¶³çš„ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦ä»»ä½•å¤–éƒ¨çš„ä¾èµ–ã€‚ SQLite äº‹åŠ¡æ˜¯å®Œå…¨å…¼å®¹ ACID çš„ï¼Œå…è®¸ä»å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚ SQLite æ”¯æŒ SQL92ï¼ˆSQL2ï¼‰æ ‡å‡†çš„å¤§å¤šæ•°æŸ¥è¯¢è¯­è¨€çš„åŠŸèƒ½ã€‚ SQLite ä½¿ç”¨ ANSI-C ç¼–å†™çš„ï¼Œå¹¶æä¾›äº†ç®€å•å’Œæ˜“äºä½¿ç”¨çš„ APIã€‚ SQLite å¯åœ¨ UNIXï¼ˆLinux, Mac OS-X, Android, iOSï¼‰å’Œ Windowsï¼ˆWin32, WinCE, WinRTï¼‰ä¸­è¿è¡Œã€‚ SQLite å‘½ä»¤ä¸å…³ç³»æ•°æ®åº“è¿›è¡Œäº¤äº’çš„æ ‡å‡† SQLite å‘½ä»¤ç±»ä¼¼äº SQLã€‚å‘½ä»¤åŒ…æ‹¬ CREATEã€SELECTã€INSERTã€UPDATEã€DELETE å’Œ DROPã€‚è¿™äº›å‘½ä»¤åŸºäºå®ƒä»¬çš„æ“ä½œæ€§è´¨å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š DDL - æ•°æ®å®šä¹‰è¯­è¨€ å‘½ä»¤ æè¿° CREATE åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨ï¼Œä¸€ä¸ªè¡¨çš„è§†å›¾ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚ ALTER ä¿®æ”¹æ•°æ®åº“ä¸­çš„æŸä¸ªå·²æœ‰çš„æ•°æ®åº“å¯¹è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨ã€‚ DROP åˆ é™¤æ•´ä¸ªè¡¨ï¼Œæˆ–è€…è¡¨çš„è§†å›¾ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚ DML - æ•°æ®æ“ä½œè¯­è¨€ å‘½ä»¤ æè¿° INSERT åˆ›å»ºä¸€æ¡è®°å½•ã€‚ UPDATE ä¿®æ”¹è®°å½•ã€‚ DELETE åˆ é™¤è®°å½•ã€‚ DQL - æ•°æ®æŸ¥è¯¢è¯­è¨€ å‘½ä»¤ æè¿° SELECT ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æ£€ç´¢æŸäº›è®°å½•ã€‚ åœ¨ Mac OS X ä¸Šå®‰è£… SQLiteæœ€æ–°ç‰ˆæœ¬çš„ Mac OS X ä¼šé¢„å®‰è£… SQLiteï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰å¯ç”¨çš„å®‰è£…ï¼Œåªéœ€æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œï¼šè¯·è®¿é—® SQLite ä¸‹è½½é¡µé¢ï¼Œä»æºä»£ç åŒºä¸‹è½½ sqlite-autoconf-*.tar.gzã€‚æ­¥éª¤å¦‚ä¸‹ï¼š $tar xvfz sqlite-autoconf-3071502.tar.gz $cd sqlite-autoconf-3071502 $./configure --prefix=/usr/local $make $make install ä¸Šè¿°æ­¥éª¤å°†åœ¨ Mac OS X æœºå™¨ä¸Šå®‰è£… SQLiteï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š $sqlite3 SQLite version 3.7.15.2 2013-01-09 11:53:05 Enter &quot;.help&quot; for instructions Enter SQL statements terminated with a &quot;;&quot; sqlite&gt; æœ€åï¼Œåœ¨ SQLite å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œä½¿ç”¨ SQLite å‘½ä»¤åšç»ƒä¹ ã€‚ SQLiteè¯­æ³•å¤§å°å†™æ•æ„Ÿæ€§ æœ‰ä¸ªé‡è¦çš„ç‚¹å€¼å¾—æ³¨æ„ï¼ŒSQLite æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å‘½ä»¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ¯”å¦‚ GLOB å’Œ glob åœ¨ SQLite çš„è¯­å¥ä¸­æœ‰ä¸åŒçš„å«ä¹‰ã€‚ æ³¨é‡Š SQLite æ³¨é‡Šæ˜¯é™„åŠ çš„æ³¨é‡Šï¼Œå¯ä»¥åœ¨ SQLite ä»£ç ä¸­æ·»åŠ æ³¨é‡Šä»¥å¢åŠ å…¶å¯è¯»æ€§ï¼Œä»–ä»¬å¯ä»¥å‡ºç°åœ¨ä»»ä½•ç©ºç™½å¤„ï¼ŒåŒ…æ‹¬åœ¨è¡¨è¾¾å¼å†…å’Œå…¶ä»– SQL è¯­å¥çš„ä¸­é—´ï¼Œä½†å®ƒä»¬ä¸èƒ½åµŒå¥—ã€‚SQL æ³¨é‡Šä»¥ä¸¤ä¸ªè¿ç»­çš„ â€œ-â€œ å­—ç¬¦ï¼ˆASCII 0x2dï¼‰å¼€å§‹ï¼Œå¹¶æ‰©å±•è‡³ä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆASCII 0x0aï¼‰æˆ–ç›´åˆ°è¾“å…¥ç»“æŸï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ C é£æ ¼çš„æ³¨é‡Šï¼Œä»¥ â€œ&#x2F;*â€œ å¼€å§‹ï¼Œå¹¶æ‰©å±•è‡³ä¸‹ä¸€ä¸ª â€œ*&#x2F;â€œ å­—ç¬¦å¯¹æˆ–ç›´åˆ°è¾“å…¥ç»“æŸï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚SQLiteçš„æ³¨é‡Šå¯ä»¥è·¨è¶Šå¤šè¡Œã€‚ SQLite è¯­å¥æ‰€æœ‰çš„ SQLite è¯­å¥å¯ä»¥ä»¥ä»»ä½•å…³é”®å­—å¼€å§‹ï¼Œå¦‚ SELECTã€INSERTã€UPDATEã€DELETEã€ALTERã€DROP ç­‰ï¼Œæ‰€æœ‰çš„è¯­å¥ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“æŸã€‚ SQLite ANALYZE è¯­å¥ï¼š ANALYZE; or ANALYZE database_name; or ANALYZE database_name.table_name; SQLite AND&#x2F;OR å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE CONDITION-1 &#123;AND|OR&#125; CONDITION-2; SQLite ALTER TABLE è¯­å¥ï¼š ALTER TABLE table_name ADD COLUMN column_def...; SQLite ALTER TABLE è¯­å¥ï¼ˆRenameï¼‰ï¼š ALTER TABLE table_name RENAME TO new_table_name; SQLite ATTACH DATABASE è¯­å¥ï¼š ATTACH DATABASE &#39;DatabaseName&#39; As &#39;Alias-Name&#39;; SQLite BEGIN TRANSACTION è¯­å¥ï¼š BEGIN; or BEGIN EXCLUSIVE TRANSACTION; SQLite BETWEEN å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name BETWEEN val-1 AND val-2; SQLite COMMIT è¯­å¥ï¼š COMMIT; SQLite CREATE INDEX è¯­å¥ï¼š CREATE INDEX index_name ON table_name ( column_name COLLATE NOCASE ); SQLite CREATE UNIQUE INDEX è¯­å¥ï¼š CREATE UNIQUE INDEX index_name ON table_name ( column1, column2,...columnN); SQLite CREATE TABLE è¯­å¥ï¼š CREATE TABLE table_name( column1 datatype, column2 datatype, column3 datatype, ..... columnN datatype, PRIMARY KEY( one or more columns ) ); SQLite CREATE TRIGGER è¯­å¥ï¼š CREATE TRIGGER database_name.trigger_name BEFORE INSERT ON table_name FOR EACH ROW BEGIN stmt1; stmt2; .... END; SQLite CREATE VIEW è¯­å¥ï¼š CREATE VIEW database_name.view_name AS SELECT statement....; SQLite CREATE VIRTUAL TABLE è¯­å¥ï¼š CREATE VIRTUAL TABLE database_name.table_name USING weblog( access.log ); or CREATE VIRTUAL TABLE database_name.table_name USING fts3( ); SQLite COMMIT TRANSACTION è¯­å¥ï¼š COMMIT; SQLite COUNT å­å¥ï¼š SELECT COUNT(column_name) FROM table_name WHERE CONDITION; SQLite DELETE è¯­å¥ï¼š DELETE FROM table_name WHERE &#123;CONDITION&#125;; SQLite DETACH DATABASE è¯­å¥ï¼š DETACH DATABASE &#39;Alias-Name&#39;; SQLite DISTINCT å­å¥ï¼š SELECT DISTINCT column1, column2....columnN FROM table_name; SQLite DROP INDEX è¯­å¥ï¼š DROP INDEX database_name.index_name; SQLite DROP TABLE è¯­å¥ï¼š DROP TABLE database_name.table_name; SQLite DROP VIEW è¯­å¥ï¼š DROP INDEX database_name.view_name; SQLite DROP TRIGGER è¯­å¥ï¼š DROP INDEX database_name.trigger_name; SQLite EXISTS å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name EXISTS (SELECT * FROM table_name ); SQLite EXPLAIN è¯­å¥ï¼š EXPLAIN INSERT statement...; or EXPLAIN QUERY PLAN SELECT statement...; SQLite GLOB å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name GLOB &#123; PATTERN &#125;; SQLite GROUP BY å­å¥ï¼š SELECT SUM(column_name) FROM table_name WHERE CONDITION GROUP BY column_name; SQLite HAVING å­å¥ï¼š SELECT SUM(column_name) FROM table_name WHERE CONDITION GROUP BY column_name HAVING (arithematic function condition); SQLite INSERT INTO è¯­å¥ï¼š INSERT INTO table_name( column1, column2....columnN) VALUES ( value1, value2....valueN); SQLite IN å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name IN (val-1, val-2,...val-N); SQLite Like å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name LIKE &#123; PATTERN &#125;; SQLite NOT IN å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE column_name NOT IN (val-1, val-2,...val-N); SQLite ORDER BY å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE CONDITION ORDER BY column_name &#123;ASC|DESC&#125;; SQLite PRAGMA è¯­å¥ï¼š PRAGMA pragma_name; For example: PRAGMA page_size; PRAGMA cache_size = 1024; PRAGMA table_info(table_name); SQLite RELEASE SAVEPOINT è¯­å¥ï¼š RELEASE savepoint_name; SQLite REINDEX è¯­å¥ï¼š REINDEX collation_name; REINDEX database_name.index_name; REINDEX database_name.table_name; SQLite ROLLBACK è¯­å¥ï¼š ROLLBACK; or ROLLBACK TO SAVEPOINT savepoint_name; SQLite SAVEPOINT è¯­å¥ï¼š SAVEPOINT savepoint_name; SQLite SELECT è¯­å¥ï¼š SELECT column1, column2....columnN FROM table_name; SQLite UPDATE è¯­å¥ï¼š UPDATE table_name SET column1 = value1, column2 = value2....columnN=valueN [ WHERE CONDITION ]; SQLite VACUUM è¯­å¥ï¼š VACUUM; SQLite WHERE å­å¥ï¼š SELECT column1, column2....columnN FROM table_name WHERE CONDITION; èµ„æ–™æ•´ç†äºï¼šRUNOOB.COM-SQLiteæ•™ç¨‹è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"}],"tags":[]},{"title":"CocoaPodsä½¿ç”¨æŒ‡å—","slug":"2016-01-13-cocoapodsshi-yong-zhi-nan","date":"2016-01-12T21:51:18.000Z","updated":"2024-11-02T03:36:52.394Z","comments":true,"path":"2016/01/13/2016-01-13-cocoapodsshi-yong-zhi-nan/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-cocoapodsshi-yong-zhi-nan/","excerpt":"","text":"ç®€ä»‹CocoaPodsæ˜¯iOSæœ€å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“ç®¡ç†å·¥å…·ï¼Œç»å¤§éƒ¨åˆ†æœ‰åçš„å¼€æºç±»åº“æ”¯æŒCocoaPodsã€‚ CocoaPodsæ˜¯ç”¨Rubyå®ç°çš„ï¼Œè¦ä½¿ç”¨å®ƒé¦–å…ˆéœ€è¦æœ‰Rubyçš„ç¯å¢ƒã€‚ å®‰è£…å¹¸äºOS Xç³»ç»Ÿé»˜è®¤å·²ç»å¯ä»¥è¿è¡ŒRubyäº†ï¼Œæˆ‘ä»¬åªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1sudo gem install cocoapods ç”±äºæŸäº›åŸå› ï¼Œæ‰§è¡Œæ—¶ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯æç¤ºï¼š 1234ERROR :Could not find a valid gem `cocoapods` (&gt;= 0), here is why: Unable to download data from https://rubygems.org/ - Errno::EPIPI: Broken pipe - SSL_connect(https://rubygems.org/lastest_specs.4.8.gz) å®‰è£…æˆåŠŸåï¼Œæ¥ç€æ‰§è¡Œå‘½ä»¤ï¼š 1pod setup å¦‚æœRubyç¯å¢ƒä¸å¤Ÿæ–°ï¼Œå¯èƒ½éœ€è¦æ›´æ–°ä»¥ä¸‹ï¼š 1sudo gem update --system è‡³æ­¤å®‰è£…å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æœç´¢ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“ï¼š 1pod search AFNetworking ä½¿ç”¨ä½¿ç”¨CocoaPodsç¬¬ä¸€æ­¥ï¼Œæ˜¯åœ¨å½“å‰é¡¹ç›®ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªPodfileæ–‡ä»¶ï¼š 1touch Podfile ç„¶ååˆ©ç”¨vimæ‰“å¼€Podfileæ–‡ä»¶ç¼–è¾‘ï¼ŒåŠ å…¥ä½ æƒ³è¦çš„ç±»åº“ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š 123456platform :iospod &#x27;Reachability&#x27;, &#x27;3.1.0&#x27;platform :ios, &#x27;6.0&#x27;pod &#x27;JSONKit&#x27;, &#x27;1.4&#x27;pod &#x27;AFNetworking&#x27;, &#x27;~&gt; 2.3.1&#x27; å¦‚æœæ˜¯æ‹·è´åˆ«äººçš„é¡¹ç›®ï¼Œæˆ–æ˜¯ä¸€ä¸ªå¾ˆä¹…æ²¡æ‰“å¼€è¿‡çš„é¡¹ç›®ï¼Œå¯èƒ½éœ€è¦å…ˆæ‰§è¡Œä¸€ä¸‹ï¼š 1pod update æœ€åä¸€æ­¥ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š 1pod install å½“ç»ˆç«¯å‡ºç°ç±»ä¼¼ä¸‹é¢çš„æç¤ºåï¼Œå°±ä»£è¡¨æˆåŠŸäº†ï¼š 1[!] From now no use `Sample0814.xcworkspace`. è¿™ä¸ªæ—¶å€™ä¼šçœ‹åˆ°é¡¹ç›®æ–‡ä»¶å¤¹å¤šäº†ä¸€ä¸ªxxx.xcworkspace,ä»¥åè¦é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ‰“å¼€é¡¹ç›®ï¼Œè€é¡¹ç›®xxx.xcodeprojä¸å†ä½¿ç”¨ã€‚ ä¸Šé¢çš„æ¯ä¸€æ­¥éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œä½†å¤§éƒ¨åˆ†é—®é¢˜éƒ½æ˜¯å› ä¸ºå±€åŸŸç½‘çš„åŸå› ï¼Œç”¨ä¸€ä¸ªç½‘é€Ÿç¨³å®šçš„å¢ƒå¤–VPNå¯ç ´ å¦‚æœä¸Šé¢å› ä¸ºæƒé™é—®é¢˜å®‰è£…å¤±è´¥ï¼Œå¿…é¡»æ¯æ¬¡éƒ½è¦åˆ é™¤ 1rm -rf /User/loginname/Library/Caches/CocoaPods/ å› ä¸ºè¿™ä¸ªç¼“å†²ä¸­ä¼šå­˜ä¸‹ä½ çš„githubçš„ä¸œè¥¿ï¼Œé€ æˆæ¯æ¬¡è°ƒç”¨ä¸Šæ¬¡æƒé™é—®é¢˜çš„ç¼“å­˜ã€‚ å…³äºPodfileæ–‡ä»¶ç¼–è¾‘æ—¶ï¼Œç¬¬ä¸‰æ–¹ç‰ˆæœ¬å·çš„å„ç§å†™æ³•: 123456789pod &#x27;AFNetworking&#x27; # ä¸æ˜¾å¼æŒ‡å®šä¾èµ–åº“ç‰ˆæœ¬ï¼Œè¡¨ç¤ºæ¯æ¬¡éƒ½è·å–æœ€æ–°ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;2.0&#x27; # åªä½¿ç”¨2.0ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;&gt;2.0&#x27; # ä½¿ç”¨é«˜äº2.0çš„ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;&gt;=2.0&#x27; # ä½¿ç”¨å¤§äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;&lt;2.0&#x27; # ä½¿ç”¨å°äº2.0çš„ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;&lt;=2.0&#x27; # ä½¿ç”¨å°äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;~&gt;0.1.2&#x27; # ä½¿ç”¨å¤§äºç­‰äº0.1.2ä½†å°äº0.2çš„ç‰ˆæœ¬ï¼Œç›¸å½“äº&gt;=0.1.2å¹¶ä¸”&lt;0.2.0pod &#x27;AFNetworking&#x27;, &#x27;~&gt;0.1&#x27; # ä½¿ç”¨å¤§äºç­‰äº0.1ä½†å°äº1.0çš„ç‰ˆæœ¬pod &#x27;AFNetworking&#x27;, &#x27;~&gt;0&#x27; # é«˜äº0çš„ç‰ˆæœ¬ï¼Œå†™è¿™ä¸ªé™åˆ¶å’Œä»€ä¹ˆéƒ½ä¸å†™æ˜¯ä¸€ä¸ªæ•ˆæœï¼Œéƒ½è¡¨ç¤ºä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ å‚è€ƒèµ„æ–™ è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://blog.wangruofeng007.com/tags/CocoaPods/"},{"name":"Skill","slug":"Skill","permalink":"https://blog.wangruofeng007.com/tags/Skill/"}]},{"title":"GET&amp;POST","slug":"2016-01-13-get-and-post","date":"2016-01-12T21:48:10.000Z","updated":"2024-11-02T03:36:52.396Z","comments":true,"path":"2016/01/13/2016-01-13-get-and-post/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-get-and-post/","excerpt":"","text":"GETå’ŒPOSTæ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„HTTPæ–¹æ³• . GET GETçš„è¯­ä¹‰æ˜¯è·å–æŒ‡å®šçš„URLèµ„æº, å°†æ•°æ®æŒ‰ç…§ variable &#x3D; value çš„å½¢å¼, æ·»åŠ åˆ°actionæ‰€æŒ‡å‘çš„URLåé¢, å¹¶ä¸”ä¸¤è€…ä½¿ç”¨ â€˜ ? â€˜è¿æ¥, å„å˜é‡ä¹‹é—´ä½¿ç”¨ â€˜ &amp; â€˜è¿æ¥ . å¯¹ç”¨æˆ·æ¥è¯´ä¸å®‰å…¨, å› ä¸ºåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­, æ•°æ®è¢«æ”¾åœ¨è¯·æ±‚çš„URLä¸­. ä¼ è¾“çš„æ•°æ®é‡å°, è¿™ä¸»è¦æ˜¯å› ä¸ºå—URLé•¿åº¦é™åˆ¶. URLé•¿åº¦é™åˆ¶ åœ¨httpåè®®ä¸­ï¼Œå…¶å®å¹¶æ²¡æœ‰å¯¹urlé•¿åº¦ä½œå‡ºé™åˆ¶ï¼Œå¾€å¾€urlçš„æœ€å¤§é•¿åº¦å’Œç”¨æˆ·æµè§ˆå™¨å’ŒWebæœåŠ¡å™¨æœ‰å…³ï¼Œä¸ä¸€æ ·çš„æµè§ˆå™¨ï¼Œèƒ½æ¥å—çš„æœ€å¤§é•¿åº¦å¾€å¾€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå½“ç„¶ï¼Œä¸ä¸€æ ·çš„WebæœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§é•¿åº¦çš„URLçš„èƒ½åŠ›ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ IEæµè§ˆå™¨å¯¹URLçš„æœ€å¤§é™åˆ¶ä¸º2083ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼Œæäº¤æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”ã€‚ Firefoxæµè§ˆå™¨URLçš„é•¿åº¦é™åˆ¶ä¸º65,536ä¸ªå­—ç¬¦ ; Apache(Server)èƒ½å¤Ÿæ¥å—çš„æœ€å¤§URLé•¿åº¦ä¸º8192ä¸ªå­—ç¬¦ ; å¦‚æœæµè§ˆå™¨çš„ç¼–ç ä¸ºUTF8çš„è¯ï¼Œä¸€ä¸ªæ±‰å­—æœ€ç»ˆç¼–ç åçš„å­—ç¬¦é•¿åº¦ä¸º9ä¸ªå­—ç¬¦ã€‚ GETè¯·æ±‚ç¤ºä¾‹ POST POSTè¯­ä¹‰æ˜¯å‘æŒ‡å®šURLçš„èµ„æºæ·»åŠ æ•°æ®. å°†æ•°æ®æ”¾åœ¨æ•°æ®ä½“ä¸­, æŒ‰ç…§å˜é‡å’Œå€¼ç›¸å¯¹åº”çš„æ–¹å¼, ä¼ é€’åˆ°actionæ‰€æŒ‡å‘çš„URL. æ‰€æœ‰æ•°æ®å¯¹ç”¨æˆ·æ¥è¯´ä¸å¯è§. å¯ä»¥ä¼ è¾“å¤§é‡æ•°æ®, ä¸Šä¼ æ–‡ä»¶åªèƒ½ä½¿ç”¨POST. POSTè¯·æ±‚ç¤ºä¾‹ åœ¨æµè§ˆå™¨ä¸­åˆ¤æ–­GET&amp;POSTè¯·æ±‚å› ä¸ºPOSTè¯·æ±‚ä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ä½“, å› æ­¤åˆ·æ–°é¡µé¢æ—¶ä¼šå‡ºç°æç¤ºçª—å£. è€ŒGETè¯·æ±‚ä¸ä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ä½“, å› æ­¤æ²¡æœ‰æç¤º . ä»è¯·æ±‚æœ¬è´¨æ¥çœ‹, GETè¯·æ±‚è¦æ¯”POSTæ›´å®‰å…¨, æ•ˆç‡ä¹Ÿä¼šæ›´é«˜ .(å¯¹æœåŠ¡å™¨è€Œè¨€) iOSç½‘ç»œå‘é€ç½‘ç»œè¯·æ±‚çš„æ­¥éª¤ å®ä¾‹åŒ–URL( ç½‘ç»œèµ„æº ) ; æ ¹æ®URLå»ºç«‹URLRequest ( ç½‘ç»œè¯·æ±‚ ) ; é»˜è®¤ä¸ºGETè¯·æ±‚; å¯¹äºPOSTè¯·æ±‚, éœ€è¦åˆ›å»ºè¯·æ±‚çš„æ•°æ®ä½“ . åˆ©ç”¨ URLConnection å‘é€ç½‘ç»œè¯·æ±‚(å‘é€è¯·æ±‚å¹¶è·å¾—ç»“æœ) ; NSURLConnectionæä¾›äº†ä¸¤ä¸ªé™æ€æ–¹æ³•å¯ä»¥ç›´æ¥ä»¥åŒæ­¥æˆ–å¼‚æ­¥çš„æ–¹å¼å‘æœåŠ¡å™¨å‘é€ç½‘ç»œè¯·æ±‚. åŒæ­¥è¯·æ±‚: sendSynchronousRequest : returningResponse : error : å¼‚æ­¥è¯·æ±‚: sendAsynchronousRequest : queue : completionHandler : åœ¨ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­, æ¥æ”¶æ•°æ®çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯é€šè¿‡ NSURLConnectionDataDelegateæ¥å®ç°çš„, å¸¸ç”¨ä»£ç†æ–¹æ³•åŒ…æ‹¬: 12345678// æœåŠ¡å™¨å¼€å§‹è¿”å›æ•°æ®- (void)connection:didReceiveResponse:// æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œæœ¬æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡- (void)connection:didReceiveData:// æ•°æ®æ¥æ”¶å®Œæ¯•ï¼Œåšæ•°æ®çš„æœ€åå¤„ç†- (void)connectionDidFinishLoading:// ç½‘ç»œè¿æ¥é”™è¯¯- (void)connection:didFailWithError: å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"HTTP POST and multipart forms","slug":"2016-01-13-http-post-and-multipart-forms","date":"2016-01-12T21:45:41.000Z","updated":"2024-11-02T03:36:52.397Z","comments":true,"path":"2016/01/13/2016-01-13-http-post-and-multipart-forms/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-http-post-and-multipart-forms/","excerpt":"","text":"HTTP POSTä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š http Body ä¸­çš„NSData ç¼–ç æ–¹å¼è¦ç”¨NSASCIIStringEncodingè€Œä¸æ˜¯NSUTF8StringEncoding é€šè¿‡ NSString *postLength = [NSString stringWithFormat:@&quot;%d&quot;,[postData length]]; è®¡ç®—æ•°æ®çš„é•¿åº¦ POSTå‚æ•°è®¾ç½®123456//è®¾ç½®header Content-Length[request setValue:postLength forHTTPHeaderField:@&quot;Content-Length&quot;];//è®¾ç½®header contentType[request setValue:@&quot;application/x-www-form-urlencoded&quot; forHTTPHeaderField:@&quot;Current-Type&quot;];//è®¾ç½®body[request setHTTPBody:postData]; å¤‡æ³¨:æ™®é€špostçš„headerçš„Current-Typeä¸ºapplication/x-www-form-urlencoded Multipart Forms POSTå‚æ•°è®¾ç½®123456//è®¾ç½®header contentTypeNSString *contentType = [NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;, boundary];[request addValue:contentType forHTTPHeaderField:@&quot;Content-Type&quot;];//è®¾ç½®body contentType[body appendData:[@&quot;Content-Type: application/octet-stream\\r\\n\\r\\n&quot; dataUsingEncoding:NSUTF8StringEncoding]]; å¤‡æ³¨:Multipart Formsçš„headerçš„Current-Typeä¸ºmultipart/form-data request body like this --YOUR_BOUNDARY_STRING Content-Disposition: form-data; name=&quot;photo&quot;; filename=&quot;calm.jpg&quot; Content-Type: image/jpeg YOUR_IMAGE_DATA_GOES_HERE --YOUR_BOUNDARY_STRING Content-Disposition: form-data; name=&quot;message&quot; My first message --YOUR_BOUNDARY_STRING Content-Disposition: form-data; name=&quot;user&quot; 1 --YOUR_BOUNDARY_STRING Iâ€™m sending over three variables: an image named photo, a string named message, and an integer named user. Itâ€™s important to note the linebreaks and the dashes before the boundary string. These must be included in order to build a good request. Now lets write some objective-c: 12345678910111213141516171819202122NSString *boundary = @&quot;YOUR_BOUNDARY_STRING&quot;;NSString *contentType = [NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;, boundary];[request addValue:contentType forHTTPHeaderField:@&quot;Content-Type&quot;];NSMutableData *body = [NSMutableData data];[body appendData:[[NSString stringWithFormat:@&quot;\\r\\n--%@\\r\\n&quot;, boundary] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[[NSString stringWithFormat:@&quot;Content-Disposition: form-data; name=\\&quot;photo\\&quot;; filename=\\&quot;%@.jpg\\&quot;\\r\\n&quot;, self.message.photoKey] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[@&quot;Content-Type: application/octet-stream\\r\\n\\r\\n&quot; dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[NSData dataWithData:imageData]];[body appendData:[[NSString stringWithFormat:@&quot;\\r\\n--%@\\r\\n&quot;, boundary] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[[NSString stringWithFormat:@&quot;Content-Disposition: form-data; name=\\&quot;message\\&quot;\\r\\n\\r\\n%@&quot;, self.message.message] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[[NSString stringWithFormat:@&quot;\\r\\n--%@\\r\\n&quot;, boundary] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[[NSString stringWithFormat:@&quot;Content-Disposition: form-data; name=\\&quot;user\\&quot;\\r\\n\\r\\n%d&quot;, 1] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:[[NSString stringWithFormat:@&quot;\\r\\n--%@\\r\\n&quot;, boundary] dataUsingEncoding:NSUTF8StringEncoding]];[request setHTTPBody:body]; Now all we need to do is make a connection to the server and send the request: [request setHTTPBody:body]; 1234NSURLResponse *response;NSError *error;[NSURLConnection sendSynchronousRequest:request returningResponse:&amp;response error:&amp;error]; å‚è€ƒèµ„æ–™ï¼š Sending Multipart Forms with Objective-C POST multipart&#x2F;form-data with Objective-C Sending an HTTP POST request on iOS The Multipart Content-Typeâ€“w3è§„èŒƒ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"å·¥å‚æ¨¡å¼è¯¦è§£","slug":"2016-01-13-gong-han-mo-shi-xiang-jie","date":"2016-01-12T21:39:21.000Z","updated":"2024-11-02T03:36:52.396Z","comments":true,"path":"2016/01/13/2016-01-13-gong-han-mo-shi-xiang-jie/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-gong-han-mo-shi-xiang-jie/","excerpt":"","text":"3ç§å·¥å‚æ¨¡å¼æ¦‚è¿°ï¼šå·¥å‚æ¨¡å¼æ˜¯ä¸ªç³»åˆ—ï¼Œåˆ†ä¸ºç®€å•å·¥å‚æ¨¡å¼ï¼Œ å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè¿™ä¸‰ç§æ¨¡å¼ä¹Ÿéå¸¸å¸¸ç”¨ã€‚è¿™äº›æ¨¡å¼æœ€æœ€ç»å…¸çš„å°±ä¾‹å­å°±æ˜¯è®¾è®¡è®¡ç®—å™¨ã€‚ Factory Method (å·¥å‚æ–¹æ³•æ¨¡å¼) Abstract Factory (æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰ Simple Factoryï¼ˆç®€å•å·¥å‚æ¨¡å¼ï¼‰ å‚è€ƒGoFã€ŠDesign Patternsã€‹ä¸€ä¹¦ GOFæ˜¯è¿™æ ·æè¿°å·¥å‚æ¨¡å¼çš„ï¼š â€œDefine an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.â€ åœ¨åŸºç±»ä¸­å®šä¹‰åˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªæ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•è®©ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ä¸­è¿›è¡Œã€‚ ç®€å•å·¥å‚æ¨¡å¼ ä¸¥æ ¼çš„è¯´ï¼Œç®€å•å·¥å‚æ¨¡å¼å¹¶ä¸æ˜¯23ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒåªç®—å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç‰¹æ®Šå®ç°ã€‚ç®€å•å·¥å‚æ¨¡å¼åœ¨å®é™…ä¸­çš„åº”ç”¨ç›¸å¯¹äºå…¶ä»–2ä¸ªå·¥å‚æ¨¡å¼ç”¨çš„è¿˜æ˜¯ç›¸å¯¹å°‘å¾—å¤šï¼Œå› ä¸ºå®ƒåªé€‚åº”å¾ˆå¤šç®€å•çš„æƒ…å†µï¼Œæœ€æœ€é‡è¦çš„æ˜¯å®ƒè¿èƒŒäº†æˆ‘ä»¬åœ¨æ¦‚è¿°ä¸­è¯´çš„å¼€æ”¾-å°é—­åŸåˆ™ã€‚å› ä¸ºæ¯æ¬¡ä½ è¦æ–°æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½éœ€è¦åœ¨ç”Ÿswitch-case è¯­å¥ï¼ˆæˆ–è€…if-else è¯­å¥ï¼‰ä¸­å»ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ åˆ†æ”¯æ¡ä»¶ ç®€å•å·¥å‚æ¨¡å¼è§’è‰²åˆ†é…ï¼š Creatorï¼ˆäº§å“åˆ›å»ºè€…ï¼‰ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰å®ä¾‹çš„å†…éƒ¨é€»è¾‘ã€‚å·¥å‚ç±»å¯ä»¥è¢«å¤–ç•Œç›´æ¥è°ƒç”¨ï¼Œåˆ›å»ºæ‰€éœ€çš„äº§å“å¯¹è±¡ã€‚ Product ï¼ˆ äº§å“æŠ½è±¡ç±»ï¼‰ç®€å•å·¥å‚æ¨¡å¼æ‰€åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œå®ƒè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹æ‰€å…±æœ‰çš„å…¬å…±æ¥å£ã€‚ Concrete Product ï¼ˆå…·ä½“äº§å“ï¼‰æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å……å½“è¿™ä¸ªè§’è‰²çš„æŸä¸ªå…·ä½“ç±»çš„å®ä¾‹ã€‚ ç®€å•çš„å·¥å‚æ¨¡å¼UMLå›¾ è€ƒè™‘ä¸‹é¢ä¸€ä¸ªäº‹ä¾‹ï¼š åŠ å…¥ä½ æ˜¯ä¸€ä¸ªå•†äººï¼Œä½ åšçš„çš„æ˜¯æ‰‹æœºç”Ÿæ„ã€‚ç°åœ¨ä½ ç”Ÿäº§android æ‰‹æœºå’Œiphoneç­‰ï¼Œè€ƒè™‘åˆ°ä»¥åä½ å¯èƒ½è¿˜ä¼šç”Ÿäº§å…¶ä»–æ‰‹æœºä¾‹å¦‚ubuntuæ‰‹æœºã€‚å‡å®šä½ é€‰æ‹©äº†ç®€å•å·¥å‚æ¨¡å¼æ¥å®ç°ã€‚é‚£ä¹ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰€æœ‰äº§å“çš„æŠ½è±¡åŸºç±»ï¼ˆProductï¼‰ å³æ˜¯Phoneç±»ï¼š 123456class Phone &#123; public: virtual ~Phone()&#123;&#125;;//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ² virtual void call(string number) = 0; &#125;; ç„¶åæˆ‘ä»¬éœ€è¦å…·ä½“çš„äº§å“ç±» Concrete Productï¼š AndroidPhone å’ŒiOSPhone 1234567891011class AndroidPhone : public Phone &#123; public: void call(string number)&#123; cout&lt;&lt;&quot;AndroidPhone is calling...&quot;&lt;&lt;endl;&#125; &#125;; class IosPhone : public Phone &#123; public: void call(string number) &#123; cout&lt;&lt;&quot;IosPhone is calling...&quot;&lt;&lt;endl;&#125; &#125;; æœ€åæˆ‘ä»¬éœ€è¦Creator 12345678910111213141516class PhoneFactory &#123; public: Phone* createPhone(string phoneName) &#123; if(phoneName == &quot;AndroidPhone&quot;) &#123; return new AndroidPhone(); &#125;else if(phoneName == &quot;IosPhone&quot;) &#123; return new IosPhone(); &#125; return NULL; &#125; &#125;; å®¢æˆ·ç«¯è¿™æ ·å®ç°ï¼š 12345678910111213141516171819void main() &#123; PhoneFactor factory; Phone* myAndroid = factory.createPhone(&quot;AndroidPhone&quot;); Phone* myIPhone = factory.createPhone(&quot;iOSPhone&quot;); if(myAndroid) &#123; myAndroid-&gt;call(&quot;123&quot;); delete myAndroid; myAndroid = NULL; &#125; if(myIPhone) &#123; myIPhone-&gt;call(&quot;123&quot;); delete myIPhone; myIPhone = NULL; &#125; &#125; è¿™å°±æ˜¯ç®€å•å·¥å‚æ–¹æ³•ï¼ŒæŠŠæ‰€æœ‰çš„åˆ›å»ºäº¤ç»™creator,creator é€šè¿‡switch-case(æˆ–è€…if-else)è¯­å¥æ¥é€‰æ‹©å…·ä½“åˆ›å»ºçš„å¯¹è±¡ã€‚ç®€å•æ˜äº†ã€‚ä½†æ˜¯å°±å¦‚ä¸Šé¢æ‰€è¯´ï¼Œå®ƒæœ€è‡´å‘½çš„é—®é¢˜çš„è¿èƒŒäº†å¼€æ”¾-å°é—­åŸåˆ™ã€‚æ¯æ¬¡ä½ è¦æ–°æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½è¦ä¿®æ”¹factoré‡Œé¢çš„createPhoneä»£ç ã€‚ ä½†æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ä¸ªäººè§‰å¾—å·¥å‚æ–¹æ³•æ¨¡å¼åœ¨å·¥å‚æ¨¡å¼å®¶æ—ä¸­æ˜¯ç”¨çš„æœ€å¤šæ¨¡å¼ã€‚ä¸Šé¢è¯´è¿‡äº†ï¼Œå¦‚æœç®€å•å·¥å‚æ¨¡å¼ï¼Œè¦æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è¦å¢åŠ WinPhone çš„ç”Ÿäº§ï¼Œé‚£ä¹ˆæˆ‘è¦ä¿®æ”¹PhoneFactoryä¸­çš„createPhone ä¸­çš„åˆ†æ”¯åˆ¤æ–­æ¡ä»¶ã€‚è¿™è¿èƒŒäº†å¼€æ”¾-å°é—­åŸåˆ™ï¼Œé‚£ä¸ºä»€ä¹ˆä¸èƒ½å°†åˆ›å»ºæ–¹æ³•æ”¾åˆ°å­ç±»ä¸­å‘¢ï¼Ÿå·¥å‚æ–¹æ³•çš„å®šä¹‰å°±æ˜¯ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ï¼Œå·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼è§’è‰²ï¼š æŠ½è±¡å·¥å‚(Creator)è§’è‰²ï¼šæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œä¸åº”ç”¨ç¨‹åºæ— å…³ã€‚ä»»ä½•åœ¨æ¨¡å¼ä¸­åˆ›å»ºçš„å¯¹è±¡çš„å·¥å‚ç±»å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ã€‚ å…·ä½“å·¥å‚(Concrete Creator)è§’è‰²ï¼šè¿™æ˜¯å®ç°æŠ½è±¡å·¥å‚æ¥å£çš„å…·ä½“å·¥å‚ç±»ï¼ŒåŒ…å«ä¸åº”ç”¨ç¨‹åºå¯†åˆ‡ç›¸å…³çš„é€»è¾‘ï¼Œå¹¶ä¸”å—åˆ°åº”ç”¨ç¨‹åºè°ƒç”¨ä»¥åˆ›å»ºäº§å“å¯¹è±¡ã€‚ æŠ½è±¡äº§å“(Product)è§’è‰²ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼æ‰€åˆ›å»ºçš„å¯¹è±¡çš„è¶…ç±»å‹ï¼Œä¹Ÿå°±æ˜¯äº§å“å¯¹è±¡çš„å…±åŒçˆ¶ç±»æˆ–å…±åŒæ‹¥æœ‰çš„æ¥å£ã€‚ å…·ä½“äº§å“(Concrete Product)è§’è‰²ï¼šè¿™ä¸ªè§’è‰²å®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ã€‚æŸå…·ä½“äº§å“æœ‰ä¸“é—¨çš„å…·ä½“å·¥å‚åˆ›å»ºï¼Œå®ƒä»¬ä¹‹é—´å¾€å¾€ä¸€ä¸€å¯¹åº” å·¥å‚æ–¹æ³•æ¨¡å¼UMLå›¾ï¼š çœ‹å®šä¹‰çœ‹çš„æ™•ä¹ä¹çš„ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä»£ç ï¼šäº§å“æ¥å£ï¼Œä»¥åŠå…¶ç›¸åº”çš„å­ç±»ã€‚ 123456789101112131415161718class Phone &#123; public: virtual ~Phone()&#123;&#125;;//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ² virtual void call(string number) = 0; &#125;; class AndroidPhone : public Phone &#123; public: void call(string number)&#123; cout&lt;&lt;&quot;AndroidPhone is calling...&quot;&lt;&lt;endl;&#125; &#125;; class iOSPhone : public Phone &#123; public: void call(string number) &#123; cout&lt;&lt;&quot;iOSPhone is calling...&quot;&lt;&lt;endl;&#125; &#125;; ä¸Šé¢è¿™ä¸ªå’Œç®€å•å·¥å‚æ–¹æ³•è¿˜æ˜¯ä¸€æ ·çš„ã€‚æ¥ä¸‹æ¥ä¸ä¸€æ ·çš„æ¥äº†â€¦ 123456789101112131415161718192021222324class PhoneFactory &#123; public: virtual ~PhoneFactory()&#123;&#125;; virtual Phone* createPhone() = 0; &#125;; class AndroidPhoneFactory : public PhoneFactory &#123; public: virtual Phone* createPhone() &#123; return new AndroidPhone(); &#125; &#125;; class IosPhoneFactory : public PhoneFactory &#123; public: virtual Phone* createPhone() &#123; return new IosPhone(); &#125; &#125;; å·¥å‚æ–¹æ³•å°†PhoneFactoryæŠ½è±¡æˆäº†åŸºç±»ï¼ŒPhoneFactoryçš„createPhoneä¸åœ¨åƒä»¥å‰é‚£æ ·å°†æ‰€æœ‰çš„åˆ¤æ–­å¡åˆ°é‡Œé¢ã€‚è€Œæ˜¯æ”¹ç”±å…¶å­ç±»æ¥å®ç°åˆ›å»ºåŠŸèƒ½ï¼Œè¿™æ„Ÿè§‰å°±æ˜¯æƒåŠ›ä¸‹æ”¾ã€‚å®¢æˆ·ç«¯ï¼š 1234567891011121314151617181920212223void main() &#123; PhoneFactory* androidCreator = new AndroidPhoneFactory(); PhoneFactory* iosCreator = new IosPhoneFactory(); Phone* myAndroid = androidCreator-&gt;createPhone(); Phone* myIPhone = iosCreator-&gt;createPhone(); if(myAndroid) &#123; myAndroid-&gt;call(&quot;123&quot;); delete myAndroid; myAndroid = NULL; &#125; if(myIPhone) &#123; myIPhone-&gt;call(&quot;123&quot;); delete myIPhone; myIPhone = NULL; &#125; delete androidCreator; delete iosCreator; &#125; åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒå·¥å‚ç±»ä¸åœ¨è´Ÿè´£äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“çš„åˆ›å»ºå·¥ä½œäº¤ç»™å­ç±»å»å®Œæˆã€‚ä¹Ÿå°±æ˜¯åæ‰€è¿™ä¸ªæ ¸å¿ƒå·¥å‚ä»…ä»…åªæ˜¯æä¾›åˆ›å»ºçš„æ¥å£ï¼Œå…·ä½“å®ç°æ–¹æ³•äº¤ç»™ç»§æ‰¿å®ƒçš„å­ç±»å»å®Œæˆã€‚å½“æˆ‘ä»¬çš„ç³»ç»Ÿéœ€è¦å¢åŠ å…¶ä»–æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦ç»§æ‰¿PhoneFactoryè¿™ä¸ªç±»ï¼Œå¹¶ä¸”å®ç°createPhoneæ¥å£ã€‚ ä¸éœ€è¦å¯¹åŸå·¥å‚PhoneFactoryè¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œè¿™æ ·å¾ˆå¥½åœ°ç¬¦åˆäº†â€œå¼€æ”¾-å°é—­â€œåŸåˆ™ã€‚ è™½ç„¶å·¥å‚æ–¹æ³•æ¨¡å¼æ»¡è¶³äº†â€å¼€æ”¾-å°é—­â€åŸåˆ™ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å¼ä¹Ÿä»ç„¶æœ‰ç¼ºç‚¹ï¼šæ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œæ˜¯çš„ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå…¶å®æˆ‘ä»¬æœ‰ä¸€ä¸ªæ½œåœ¨æ„è¯†çš„æ„è¯†ã€‚é‚£å°±æ˜¯æˆ‘ä»¬ç”Ÿäº§çš„éƒ½æ˜¯åŒä¸€ç±»äº§å“ï¼Œä¾‹å¦‚æˆ‘ä»¬ç”Ÿäº§çš„éƒ½æ˜¯æ‰‹æœºï¼é‚£ä¹ˆç°åœ¨å‡å¦‚ç°åœ¨æˆ‘ä»¬åˆè¦ç”Ÿäº§å¹³æ¿äº†äº†å‘¢ï¼Ÿé‚£ä¹ˆå°±è¦ç”¨åˆ°æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚æˆ‘æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿç”¨çš„æ¯”è¾ƒå¤šåœ¨å·¥å‚æ¨¡å¼å®¶æ—ä¸­ï¼Œä»…æ¬¡äºå·¥å‚æ–¹æ³•æ¨¡å¼ã€‚åœ¨äº†è§£æŠ½è±¡å·¥å‚æ¨¡å¼ä¹‹å‰ï¼Œè¿˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„ç†æ¸…ä¸‹äº§å“ç­‰çº§ç»“æ„å’Œäº§å“ç°‡çš„æ¦‚å¿µã€‚ä¸‹é¢çš„å›¾è¿˜æ˜¯è€å›¾ã€‚ä½†æ˜¯æˆ‘è®²è®²æˆ‘çš„ç†è§£ï¼š äº§å“ç­‰çº§ç»“æ„ï¼šäº§å“çš„ç­‰çº§ç»“æ„ä¹Ÿå°±æ˜¯äº§å“çš„ç»§æ‰¿ç»“æ„ã€‚æˆ‘ç†è§£å°±æ˜¯åŒä¸€ç±»äº§å“ï¼Œæ¯”å¦‚æ‰‹æœºæ˜¯ä¸€ä¸ªç³»åˆ—ï¼Œæœ‰androidæ‰‹æœºï¼Œiosæ‰‹æœºï¼Œwinæ‰‹æœºï¼Œé‚£ä¹ˆè¿™ä¸ªæŠ½è±¡ç±»æ‰‹æœºå’Œä»–çš„å­ç±»å°±æ„æˆäº†ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ã€‚é‚£å…¶ä»–çš„å¹³æ¿æ˜¾ç„¶ä¸æ˜¯å’Œæ‰‹æœºä¸€ä¸ªç³»åˆ—çš„ï¼Œä¸€ä¸ªå¹³æ¿ï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯ä¸åŒçš„äº§å“ç­‰çº§ç»“æ„ã€‚ äº§å“æ—: åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œäº§å“æ—æ˜¯æŒ‡ç”±åŒä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„ï¼Œä½äºä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­çš„ä¸€ç»„äº§å“ã€‚æ¯”å¦‚åˆ†ä¸ºandroidäº§å“ï¼Œå’Œiosäº§å“ã€‚å…¶ä¸­ä¸€ä¸ªiosäº§å“åŒ…å«iosæ‰‹æœºå’Œioså¹³æ¿ã€‚æ˜¾ç„¶iosæ‰‹æœºå’Œioså¹³æ¿ä¸æ˜¯åŒä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„çš„ï¼Œå› ä¸ºä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œä¸€ä¸ªæ˜¯å¹³æ¿ã€‚ä½†ä»–ä»¬æ˜¯åŒä¸€ä¸ªäº§å“ç°‡â€”éƒ½æ˜¯iosäº§å“ã€‚å¸Œæœ›å¤§å®¶é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¤§å®¶æ˜ç™½äº†è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼çš„UMLå›¾ï¼š æ¥ç€ä¸Šé¢çš„è¯é¢˜ï¼Œç°åœ¨å‡å¦‚æˆ‘è¦å¢åŠ å¯¹å¹³æ¿çš„æ”¯æŒï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šå…ˆæ·»åŠ ä¸¤ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œä¸€ä¸ªæ˜¯å¹³æ¿ï¼š 123456789101112131415161718192021222324252627282930313233343536373839//äº§å“ç­‰çº§ç»“æ„--æ‰‹æœº class Phone &#123; public: virtual ~Phone()&#123;&#125;;//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ² virtual void call(string number) = 0; &#125;; class AndroidPhone : public Phone &#123; public: void call(string number)&#123; cout&lt;&lt;&quot;AndroidPhone is calling...&quot;&lt;&lt;endl; &#125; &#125;; class IosPhone : public Phone &#123; public: void call(string number) &#123; cout&lt;&lt;&quot;IosPhone is calling...&quot;&lt;&lt;endl; &#125; &#125;; //äº§å“ç­‰çº§ç»“æ„--å¹³æ¿ class Pad &#123; public: virtual ~Pad()&#123;&#125;; virtual void playMovie() = 0; &#125;; class AndroidPad : public Pad &#123; public: virtual void playMovie()&#123; cout&lt;&lt;&quot;AndriodPad is playing movie...&quot;&lt;&lt;endl; &#125; &#125;; class IosPad : public Pad &#123; public: virtual void playMovie()&#123; cout&lt;&lt;&quot;IosPad is playing movie...&quot;&lt;&lt;endl; &#125; &#125;; ç„¶åå…·ä½“çš„å·¥å‚æˆ‘ä»¬æ•´ä¸ªå·¥å‚æ˜¯ç”Ÿäº§ç§»åŠ¨è®¾å¤‡çš„æ‰€ä»¥æˆ‘ä»¬å–åä¸ºMobileFactory,ç„¶åå·¥å‚å¯ä»¥ç”Ÿäº§å¹³æ¿å’Œæ‰‹æœºï¼Œæ•…æœ‰äº†createPhone å’ŒcreatePadä¸¤ä¸ªæ¥å£ã€‚ 1234567class MobileFactory &#123; public: virtual ~MobileFactory()&#123;&#125;; virtual Phone* createPhone() = 0; virtual Pad* createPad() = 0; &#125;; æ¥ç€æ˜¯ android äº§å“ç°‡ çš„å·¥å‚ç±»ï¼Œè´Ÿè´£ç”Ÿäº§android çš„æ‰‹æœºå’Œå¹³æ¿ï¼š 123456789101112class AndroidFactory : public MobileFactory &#123; public: Phone* createPhone() &#123; return new AndroidPhone(); &#125; Pad* createPad() &#123; return new AndroidPad(); &#125; &#125;; æ¥ç€æ˜¯iosçš„äº§å“ç°‡çš„å·¥å‚ç±»ï¼Œè´Ÿè´£ç”Ÿäº§iosçš„æ‰‹æœºå’Œå¹³æ¿ï¼š 12345678910111213class IosFactory : public MobileFactory &#123; public: Phone* createPhone() &#123; return new IosPhone(); &#125; Pad* createPad() &#123; return new IosPad(); &#125; &#125;; æœ€åå®¢æˆ·ç«¯è¿™æ ·å®ç°ï¼š 12345678910111213141516void main() &#123; MobileFactory* androidCreator = new AndroidFactory(); MobileFactory* iosCreator = new IosFactory(); Phone* myAndroidPhone = androidCreator-&gt;createPhone(); Pad* myAndroidPad = androidCreator-&gt;createPad(); Phone* myIosPhone = iosCreator-&gt;createPhone(); Pad* myIosPad = iosCreator-&gt;createPad(); myAndroidPhone-&gt;call(&quot;123&quot;); myAndroidPad-&gt;playMovie(); myIosPhone-&gt;call(&quot;123&quot;); myIosPad-&gt;playMovie(); //è¿™é‡Œæ²¡æœ‰åšé‡Šæ”¾å’Œåˆ¤æ–­ï¼Œè¯·è‡ªå·±åˆ¤æ–­å’Œé‡Šæ”¾ &#125; æ€»ç»“ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼é€‚ç”¨äºé‚£äº›æœ‰å¤šç§äº§å“çš„äº§å“ç°‡ï¼Œå¹¶ä¸”æ¯æ¬¡ä½¿ç”¨å…¶ä¸­çš„æŸä¸€äº§å“ç°‡çš„äº§å“ã€‚ç¼ºç‚¹ ï¼š æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ·»åŠ æ–°åŠŸèƒ½ä¹Ÿéå¸¸éº»çƒ¦ï¼Œæ¯”å·¥å‚æ–¹æ³•æ¨¡å¼éƒ½è¿˜è¦å¤æ‚çš„å¤šã€‚ä¼˜ç‚¹ï¼š å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½å¤Ÿä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ ä¸»è¦ç”¨é€”å·¥å‚æ–¹æ³•è¦è§£å†³çš„é—®é¢˜æ˜¯å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œå®ƒæä¾›äº†ä¸€ç§æ‰©å±•çš„ç­–ç•¥ï¼Œå¾ˆå¥½åœ°ç¬¦åˆäº†å¼€æ”¾å°é—­åŸåˆ™ã€‚å·¥å‚æ–¹æ³•ä¹Ÿå«åšè™šæ„é€ å™¨ï¼ˆVirtual Constructorï¼‰ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å·¥å‚æ–¹æ³•å½“æ˜¯å¦‚ä¸‹æƒ…å†µæ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•ï¼šä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»æ—¶ï¼Œä¸€ä¸ªç±»å¸Œæœ›æœ‰å®ƒçš„å­ç±»å†³å®šæ‰€åˆ›å»ºçš„å¯¹è±¡æ—¶ã€‚ æ›´å¤šå…³äºå·¥å‚æ–¹æ³•çš„ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡æœ€åç»™å‡ºçš„å‚è€ƒå†…å®¹ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹åœ¨iOSä¸­å·¥å‚æ–¹æ³•çš„ä¸€ç§å®ç°æ–¹æ³•ã€‚ iOSä¸­å·¥å‚æ–¹æ³•çš„å®ç°å®ä¾‹å¦‚ä¸‹æœ‰ä¸€ä¸ªç±»å›¾ï¼Œè¯¥å›¾æè¿°äº†ä¸‹é¢å³å°†å®ç°çš„å·¥å‚æ–¹æ³•ï¼ˆåˆ©ç”¨å·¥å‚æ–¹æ³•ï¼Œåˆ›å»ºå‡ºä¸åŒçš„å½¢çŠ¶ï¼‰ã€‚å…¶ä¸­BVShapeFactoryä¸ºå·¥å‚æ–¹æ³•çš„åŸºç±»ï¼ŒBVShapeä¸ºå½¢çŠ¶çš„åŸºç±»ï¼ŒBVClienté€šè¿‡BVShapeFactoryï¼Œåˆ©ç”¨ BVShapeFactoryçš„å­ç±»ï¼ˆBVCircleShapeFactoryå’ŒBVSquareShapeFactoryï¼‰åˆ†åˆ«åˆ›å»ºå‡ºBVCircleShapeå’ŒBVSquareShapeã€‚ githubä¸‹è½½åœ°å€:https://github.com/BeyondVincent/ios_patterns/tree/master/FactoryMethodPattern å‚è€ƒèµ„æ–™ iOSè®¾è®¡æ¨¡å¼â€”â€”å·¥å‚æ–¹æ³•ï¼ˆç®€å•å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰ iOSè®¾è®¡æ¨¡å¼(03):å·¥å‚æ–¹æ³• Objective-Cç±»æ—å’Œå·¥å‚æ¨¡å¼ Objective C Design Patterns - Factory Class Factory Methodsâ€“Apple iOS Design Patternsâ€“raywenderlich Abstract Factory Design Pattern Objective C The factory design pattern explained by example-php Design Patterns Series, Day 3: Factory and Singleton Patternsâ€“safaribooksonline Automagic Factories in Objective-Câ€“bobmccune å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://blog.wangruofeng007.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¤šçº¿ç¨‹ä¹‹NSThread","slug":"2016-01-13-duo-xian-cheng-zhi-nsthread","date":"2016-01-12T21:36:48.000Z","updated":"2024-11-02T03:36:52.395Z","comments":true,"path":"2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsthread/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsthread/","excerpt":"","text":"æœ¬æ–‡ç›®å½• å‰è¨€ 1.è·å–å½“å‰çº¿ç¨‹ 2.è·å–ä¸»çº¿ç¨‹ 3.NSThreadçš„åˆ›å»º 4.æš‚åœå½“å‰çº¿ç¨‹ 5.çº¿ç¨‹çš„å…¶ä»–æ“ä½œ 6.ä¼˜ç¼ºç‚¹ å‰è¨€æ¯ä¸ªiOSåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸ªä¸“é—¨ç”¨æ¥æ›´æ–°æ˜¾ç¤ºUIç•Œé¢ã€å¤„ç†ç”¨æˆ·è§¦æ‘¸äº‹ä»¶çš„ä¸»çº¿ç¨‹ï¼Œå› æ­¤ä¸èƒ½å°†å…¶ä»–å¤ªè€—æ—¶çš„æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸ç„¶ä¼šé€ æˆä¸»çº¿ç¨‹å µå¡(å‡ºç°å¡æœºç°è±¡)ï¼Œå¸¦æ¥æåçš„ç”¨æˆ·ä½“éªŒã€‚ä¸€èˆ¬çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†é‚£äº›è€—æ—¶çš„æ“ä½œæ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹æ˜¯é˜²æ­¢ä¸»çº¿ç¨‹å µå¡ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡çš„æœ€ä½³æ–¹æ³•ã€‚ iOSä¸­æœ‰3ç§å¸¸è§çš„å¤šçº¿ç¨‹ç¼–ç¨‹æ–¹æ³• NSThreadè¿™ç§æ–¹æ³•éœ€è¦ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€åŒæ­¥ã€åŠ é”é—®é¢˜ï¼Œä¼šå¯¼è‡´ä¸€å®šçš„æ€§èƒ½å¼€é”€ NSOperationå’ŒNSOperationQueueæ˜¯åŸºäºOCå®ç°çš„ã€‚NSOperationä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…äº†éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œç„¶åå¯ä»¥å°†è¿™ä¸ªæ“ä½œæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­å»å¼‚æ­¥æ‰§è¡Œã€‚ä¸å¿…å…³å¿ƒçº¿ç¨‹ç®¡ç†ã€åŒæ­¥ç­‰é—®é¢˜ã€‚ Grand Centeral Dispatchç®€ç§°GCDï¼ŒiOS4æ‰å¼€å§‹æ”¯æŒï¼Œæ˜¯çº¯Cè¯­è¨€çš„APIã€‚è‡ªiPad2å¼€å§‹ï¼Œè‹¹æœè®¾å¤‡å¼€å§‹æœ‰äº†åŒæ ¸CPUï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨è¿™2ä¸ªæ ¸ï¼ŒGCDæä¾›äº†ä¸€äº›æ–°ç‰¹æ€§æ¥æ”¯æŒå¤šæ ¸å¹¶è¡Œç¼–ç¨‹ è¿™ç¯‡æ–‡ç« ç®€å•ä»‹ç»NSThreadè¿™ä¸ªç±»ï¼Œä¸€ä¸ªNSThreadå®ä¾‹å°±ä»£è¡¨ç€ä¸€æ¡çº¿ç¨‹ 1.è·å–å½“å‰çº¿ç¨‹1NSThread *current = [NSThread currentThread]; 2.è·å–ä¸»çº¿ç¨‹12NSThread *main = [NSThread mainThread];NSLog(@&quot;ä¸»çº¿ç¨‹:%@&quot;, main); æ‰“å°ç»“æœæ˜¯ï¼š 2013-04-18 21:36:38.599 thread[7499:c07] ä¸»çº¿ç¨‹:&lt;NSThread: 0x71434e0&gt;&#123;name = (null), num = 1&#125; numç›¸å½“äºçº¿ç¨‹çš„idï¼Œä¸»çº¿ç¨‹çš„numæ˜¯ä¸º1çš„ 3.NSThreadçš„åˆ›å»ºa.åŠ¨æ€æ–¹æ³•- (id)initWithTarget:(id)target selector:(SEL)selector object:(id)argument; åœ¨ç¬¬2è¡Œåˆ›å»ºäº†ä¸€æ¡æ–°çº¿ç¨‹ï¼Œç„¶ååœ¨ç¬¬4è¡Œè°ƒç”¨startæ–¹æ³•å¯åŠ¨çº¿ç¨‹ï¼Œçº¿ç¨‹å¯åŠ¨åä¼šè°ƒç”¨selfçš„run:æ–¹æ³•ï¼Œå¹¶ä¸”å°†@â€mjâ€ä½œä¸ºæ–¹æ³•å‚æ•° 1234// åˆå§‹åŒ–çº¿ç¨‹NSThread *thread = [[[NSThread alloc] initWithTarget:self selector:@selector(run:) object:@&quot;mj&quot;] autorelease];// å¼€å¯çº¿ç¨‹[thread start]; å‡å¦‚run:æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š 1234- (void)run:(NSString *)string &#123; NSThread *current = [NSThread currentThread]; NSLog(@&quot;æ‰§è¡Œäº†run:æ–¹æ³•-å‚æ•°ï¼š%@ï¼Œå½“å‰çº¿ç¨‹ï¼š%@&quot;, string, current);&#125; æ‰“å°ç»“æœä¸ºï¼š 2013-04-18 21:40:33.102 thread[7542:3e13] æ‰§è¡Œäº†run:æ–¹æ³•-å‚æ•°ï¼šmjï¼Œå½“å‰çº¿ç¨‹ï¼š&lt;NSThread: 0x889e8d0&gt;&#123;name = (null), num = 3&#125; å¯ä»¥å‘ç°ï¼Œè¿™æ¡çº¿ç¨‹çš„numå€¼ä¸º3ï¼Œè¯´æ˜ä¸æ˜¯ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹çš„numä¸º1 b.é™æ€æ–¹æ³•1+ (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(id)argument; 1[NSThread detachNewThreadSelector:@selector(run:) toTarget:self withObject:@&quot;mj&quot;]; c.éšå¼åˆ›å»ºçº¿ç¨‹1[self performSelectorInBackground:@selector(run:) withObject:@&quot;mj&quot;]; ä¼šéšå¼åœ°åˆ›å»ºä¸€æ¡æ–°çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨è¿™æ¡çº¿ç¨‹ä¸Šè°ƒç”¨selfçš„run:æ–¹æ³•ï¼Œä»¥@â€mjâ€ä¸ºæ–¹æ³•å‚æ•° 4.æš‚åœå½“å‰çº¿ç¨‹1[NSThread sleepForTimeInterval:2]; 12NSDate *date = [NSDate dateWithTimeInterval:2 sinceDate:[NSDate date]]; [NSThread sleepUntilDate:date]; ä¸Šé¢ä¸¤ç§åšæ³•éƒ½æ˜¯æš‚åœå½“å‰çº¿ç¨‹2ç§’ 5.çº¿ç¨‹çš„å…¶ä»–æ“ä½œa.åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ1[self performSelector:@selector(run) onThread:thread withObject:nil waitUntilDone:YES]; ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯åœ¨threadè¿™æ¡çº¿ç¨‹ä¸Šè°ƒç”¨selfçš„runæ–¹æ³• æœ€åçš„YESä»£è¡¨ï¼šä¸Šé¢çš„ä»£ç ä¼šé˜»å¡ï¼Œç­‰runæ–¹æ³•åœ¨threadçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¸Šé¢çš„ä»£ç æ‰ä¼šé€šè¿‡ b.åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ1[self performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:YES]; åœ¨ä¸»çº¿ç¨‹è°ƒç”¨selfçš„runæ–¹æ³• c.åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ1[self performSelector:@selector(run) withObject:nil]; åœ¨å½“å‰çº¿ç¨‹è°ƒç”¨selfçš„runæ–¹æ³• 6.ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šNSThreadæ¯”å…¶ä»–å¤šçº¿ç¨‹æ–¹æ¡ˆè¾ƒè½»é‡çº§ï¼Œæ›´ç›´è§‚åœ°æ§åˆ¶çº¿ç¨‹å¯¹è±¡ ç¼ºç‚¹ï¼šéœ€è¦è‡ªå·±ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œçº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å¯¹æ•°æ®çš„åŠ é”ä¼šæœ‰ä¸€å®šçš„ç³»ç»Ÿå¼€é”€ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://blog.wangruofeng007.com/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"NSOperation and NSOperationQueue Tutorial in Swift","slug":"2016-01-13-nsoperation-and-nsoperationqueue-tutorial-in-swift","date":"2016-01-12T21:18:36.000Z","updated":"2024-11-02T03:36:52.399Z","comments":true,"path":"2016/01/13/2016-01-13-nsoperation-and-nsoperationqueue-tutorial-in-swift/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-nsoperation-and-nsoperationqueue-tutorial-in-swift/","excerpt":"","text":"è¯‘è‡ª Written by Richard Turton â€” on October 7, 2014 åŸæ–‡é“¾æ¥ï¼šhttp://www.raywenderlich.com/76341/use-nsoperation-nsoperationqueue-swift è¯‘è€…@oneruofeng Post info: Updated for Xcode 7.1 and Swift 2.1 â€“ 1 January 2016 Update note: This tutorial was updated to iOS 8, Xcode 6.1 and Swift by Richard Turton. Original post by Tutorial Team member Soheil Azarpour. æ¯ä¸ªäººéƒ½æœ‰ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æˆ–è€…è¿›å…¥ä¸€äº›æ–‡æœ¬åœ¨iOSæˆ–è€…Mac Appä¸Šçš„ä»¤äººæ²®ä¸§çš„ç»å†ï¼Œå°±æ˜¯çªç„¶-WHAMï¼Œç”¨æˆ·äº¤äº’åœæ­¢äº†å“åº”ã€‚ åœ¨Macä¸Šï¼Œä½ çš„ç”¨æˆ·å¼€å§‹ç›¯ç€ä¸€ä¸ªæ²™æ¼æˆ–è€…ä¸€ä¸ªä¸ƒå½©çš„è½®å­å¼€å§‹æ—‹è½¬ç›´åˆ°å®ƒä»¬å†æ¬¡æ¢å¤UIäº¤äº’ä¸ºæ­¢ã€‚åœ¨ä¸€ä¸ªiOS appä¸­ï¼Œç”¨æˆ·æœŸæœ›Appç«‹å³å“åº”å®ƒä»¬çš„è§¦æ‘¸äº‹ä»¶ï¼Œæ— å“åº”çš„appç»™äººçš„æ„Ÿè§‰æ˜¯ç¬¨é‡å’Œç¼“æ…¢ï¼Œè¿™æ ·é€šå¸¸ä¼šå¯¼è‡´æ”¶åˆ°å·®è¯„ã€‚ ä¿æŒä½ çš„appçš„å¯äº¤äº’çš„çŠ¶æ€è¯´èµ·æ¥å®¹æ˜“åšèµ·æ¥éš¾ï¼Œä¸€æ—¦ä½ çš„appéœ€è¦æ‰§è¡Œä¸ä»…ä»…æ˜¯å°‘é‡çš„ä»»åŠ¡ï¼Œäº‹æƒ…å¾ˆå¿«å°±å˜å¾—å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¤šå°‘äº‹ä»¶åœ¨ä¸»äº‹ä»¶å¾ªç¯æ‰§è¡Œç¹é‡çš„å·¥ä½œå¹¶ä¸”åŒæ—¶æä¾›ä¸€ä¸ªå¯ä»¥å“åº”çš„UIã€‚ ä½çº§çš„å¼€å‘è€…æ˜¯æ€æ ·åšçš„å‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå·¥ä½œä»ä¸»çº¿ç¨‹ä¸­ç§»é™¤é€šè¿‡å¹¶å‘ã€‚å¹¶å‘æ„å‘³ç€ä½ åº”ç”¨æ‰€æœ‰çš„æ“ä½œåŒæ—¶æ‰§è¡Œåœ¨å¤šä¸ªæµï¼ˆæˆ–è€…çº¿ç¨‹ï¼‰ä¸­â€“è¿™æ ·çš„è¯ç”¨æˆ·ç•Œé¢å°±èƒ½ä¿æŒå“åº”çš„è¦æ‰§è¡Œçš„å·¥ä½œã€‚ ä¸€ç§å®ç°å¹¶å‘æ“ä½œåœ¨iOSæ˜¯é€šè¿‡NSOperationå’ŒNSOperationQueueè¿™ä¸¤ä¸ªç±»ã€‚åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¼šæ€æ ·ä½¿ç”¨å®ƒä»¬ï¼ä½ å°†ä»ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨å¹¶å‘çš„Appå¼€å§‹ï¼Œæ‰€ä»¥å®ƒå°†å‡ºç°çš„éå¸¸è¿Ÿé’å’Œæ— å“åº”ã€‚ç„¶åä½ å°†é‡åšä½ çš„åº”ç”¨ç»™å®ƒä»¬æ·»åŠ å¹¶å‘æ“ä½œå¹¶ä¸”â€“å¸Œæœ›â€“å‘ˆç°ä¸€ä¸ªæ›´åŠ å“åº”è‰¯å¥½çš„å¯äº¤äº’ç•Œé¢ç»™ç”¨æˆ·ï¼ æˆ‘ä»¬å¼€å§‹å§è¿™ä»½æ ·å“å·¥ç¨‹çš„æ€»çš„ç›®æ ‡çš„å°±æ˜¯å±•ç¤ºä¸€ä¸ªæ»¤é•œå¤„ç†è¿‡çš„å›¾ç‰‡çš„è¡¨è§†å›¾ã€‚å›¾ç‰‡å°†ä»ç½‘ç»œä¸Šä¸‹è½½ï¼Œç»è¿‡ä¸€ä¸ªæ»¤é•œå¤„ç†åï¼Œç„¶ååœ¨è¡¨è§†å›¾ä¸­æ˜¾ç¤ºã€‚ ä¸‹é¢æ˜¯è¿™ä¸ªappæ¨¡å‹çš„ç¤ºæ„å›¾ ç¬¬ä¸€ä¸ªç‰ˆæœ¬å°è¯•ä¸‹è½½ä½ å°†åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½¿ç”¨çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„é¡¹ç›® æ³¨æ„ï¼šæ‰€ä»¥çš„å›¾ç‰‡æ¥è‡ª stock.xchng.ã€‚ä¸€ä¸‹å›¾ç‰‡åœ¨æ•°æ®æºæ•…æ„é”™è¯¯å‘½åï¼Œä»¥ä¾¿è¿™é‡Œæœ‰äº›ä¾‹å­æ˜¯å›¾ç‰‡ä¸‹è½½å¤±è´¥å¥½å¤„ç†å¤±è´¥çš„æƒ…å†µã€‚ æ„å»ºå¹¶ä¸”è¿è¡Œè¿™ä¸ªå·¥ç¨‹ï¼Œæœ€ç»ˆä½ å°†çœ‹åˆ°è¿™ä¸ªappè¿è¡Œèµ·æ¥æ˜¾ç¤ºä¸€åˆ—ç…§ç‰‡ã€‚å°è¯•æ»šåŠ¨è¿™ä¸ªåˆ—è¡¨ï¼Œå¾ˆç—›è‹¦ï¼Œä¸æ˜¯å—ï¼Ÿ ä¼ ç»Ÿçš„ç›¸å†Œï¼Œè¿è¡Œç¼“æ…¢ æ‰€æœ‰çš„æ“ä½œéƒ½å‘ç”Ÿåœ¨ListViewController.swifté‡Œï¼Œå¹¶ä¸”æœ€ä¸»è¦çš„æ˜¯å‘ç”Ÿåœ¨ tableView(_:cellForRowAtIndexPath:)æ–¹æ³•é‡Œã€‚çœ‹ä¸€ä¸‹é‚£ä¸ªæ–¹æ³•å’Œæ³¨é‡Šè¿™é‡Œæœ‰ä¸¤ä»¶ç›¸å½“é›†ä¸­çš„äº‹æƒ…éœ€è¦æ€è€ƒï¼š ä»ç½‘ç»œè½½å…¥å›¾ç‰‡æ•°æ®ã€‚å³ä½¿ç½‘ç»œçŠ¶å†µè‰¯å¥½ï¼Œappå°†ä»ç„¶å¿…é¡»ç­‰å¾…ç›´åˆ°ä¸‹è½½å®Œæˆäº†æ‰èƒ½ç»§ç»­ã€‚ ä½¿ç”¨Core Imageç»™å›¾ç‰‡åŠ æ»¤é•œã€‚è¿™ä¸ªæ–¹æ³•ç»™å›¾ç‰‡åº”ç”¨ä¸€ä¸ªæ·±è¤è‰²çš„æ»¤é•œï¼Œå‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šå…³äºCore Imageæ»¤é•œçš„çŸ¥è¯†ï¼Œè¯·ç‚¹å‡»Beginning Core Image in Swift è¿˜æœ‰ï¼Œä½ å°†è½½å…¥ä¸€ç³»åˆ—å›¾ç‰‡è¯·æ±‚ä»ç½‘ç»œå½“å®ƒç¬¬ä¸€æ¬¡è¢«è¯·æ±‚æ—¶: 1lazy var photos = NSDictionary(contentsOfURL:dataSourceURL) æ‰€æœ‰çš„å·¥ä½œå‘ç”Ÿåœ¨åº”ç”¨çš„ä¸»çº¿ç¨‹ã€‚ç”±äºä¸»çº¿ç¨‹ä¹Ÿè´Ÿè´£ç”¨æˆ·äº¤äº’ï¼Œè®©å®ƒä¸€ç›´å¿™äºä»ç½‘ç»œä¸‹è½½ä¸œè¥¿å’Œç»™å›¾ç‰‡åŠ æ»¤é•œæ¶ˆç£¨æ‰äº†å“åº”ä¸­çš„appã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨Xcodeçš„ä»ªè¡¨æµ‹é‡è§†å›¾è·å¾—è¿™æ ·ä¸€ä¸ªå¿«é€Ÿçš„æ¦‚è¿°ã€‚ä½ å¯ä»¥é€šè¿‡æ˜¾ç¤ºè°ƒè¯•å¯¼èˆª(Commnad+6)æ¥å…¥è¿™ä¸ªä»ªè¡¨è§†å›¾,è®©åé€‰æ‹©CPUå½“appæ­£åœ¨è¿è¡Œçš„æ—¶å€™ã€‚ Xcodeçš„ä»ªè¡¨è§†å›¾è¡¨æ˜ï¼Œä¸»çº¿ç¨‹çš„ä»»åŠ¡éå¸¸é‡ ä½ ä¼šçœ‹åˆ°é‚£äº›æ‰€æœ‰çš„é•¿é’‰åœ¨Thread 1ï¼Œé‚£å°±æ˜¯appçš„ä¸»çº¿ç¨‹ã€‚æ›´å¤šè¯¦ç»†çš„ä¿¡æ¯ä½ å¯ä»¥è¿è¡Œappçš„Instruments,ä½†æ˜¯é‚£ä¸ªåœ¨ whole other tutorial :].ä¸­ æ˜¯æ—¶å€™è€ƒè™‘æ€æ ·æ”¹å–„ä¸€ä¸‹ä½ çš„ç”¨æˆ·ä½“éªŒäº†ï¼ ä»»åŠ¡ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹åœ¨ä½ ä¸“ç ”è¿™ç¯‡æ•™ç¨‹ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸‹æŠ€æœ¯ä¸Šçš„æ…¨å¿µéœ€è¦ç†ä¸€ä¸‹ï¼Œæˆ‘å°†å®šä¹‰ä¸€äº›ä¸“ç”¨æœ¯è¯­ï¼š ä»»åŠ¡ ï¼šä¸€ä¸ªç®€å•å•ä¸ªçš„éœ€è¦å®Œæˆçš„å·¥ä½œ çº¿ç¨‹ ï¼šæ“ä½œç³»ç»Ÿæä¾›çš„æœºåˆ¶å…è®¸å¤šä¸ªç”¨æˆ·æ“ä½œåŒæ—¶è¿›è¡Œåœ¨ä¸€ä¸ªåº”ç”¨ä¸­ è¿›ç¨‹ ï¼šä¸€ä¸ªå¯æ‰§è¡Œçš„ä»£ç å—ï¼Œå®ƒå¯ä»¥ç”±å¤šä¸ªçº¿ç¨‹æ„æˆ æ³¨æ„ï¼šåœ¨iOSå’ŒOS Xä¸­ï¼Œçº¿ç¨‹çš„åŠŸèƒ½ç”±POSIXçº¿ç¨‹APIï¼ˆæˆ–è€… pthreadsï¼‰å®ç°ï¼Œå¹¶ä¸”å®ƒä½¿æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚è€Œè¿™ä¸ªåˆæ˜¯ç›¸å½“åº•å±‚çš„ä¸œè¥¿ï¼Œä½ å°†å‘ç°å®ƒå¾ˆå®¹æ˜“çŠ¯é”™è¯¯ï¼›æˆ–è®¸å…³äºçº¿ç¨‹æœ€ç³Ÿç³•çš„äº‹æƒ…æ˜¯é‚£äº›å¾ˆéš¾è¢«å‘ç°çš„é”™è¯¯ï¼ Foundationæ¡†æ¶åŒ…å«äº†ä¸€ä¸ªå«åšNSThreadçš„ç±»ï¼Œè¿™è®©æˆ‘ä»¬å¤„ç†äº‹æƒ…æ›´å®¹æ˜“ï¼Œä½†æ˜¯ç”¨NSThreadç®¡ç†å¤šä¸ªçº¿ç¨‹ä»æ˜¯ä¸€ä»¶ä»¤äººå¤´ç–¼çš„äº‹æƒ…ã€‚NSOperationå’ŒNSOperationQueueæ˜¯ä¸ºäº†æœ€å¤§åŒ–ç®€åŒ–å¤„ç†å¤šçº¿ç¨‹çš„æ›´é«˜çº§çš„ç±»ã€‚ åœ¨è¿™ä¸ªå›¾è§£ä¸­ï¼Œä½ ä¼šçœ‹åˆ°è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼š è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œä»»åŠ¡ æ­£å¦‚ä½ æ‰€è§ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…æ¶µå¤šä¸ªæ‰§è¡Œçš„çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ åœ¨è¿™ä¸ªå›¾é›†ä¸­, thread 2æ‰§è¡Œæ–‡ä»¶çš„è¯»çš„å·¥ä½œï¼ŒåŒæ—¶thread 1æ‰§è¡ŒUIç›¸å…³çš„ä»£ç ã€‚è¿™å’Œä½ åº”è¯¥æ€æ ·åœ¨iOSä¸­æ„å»ºä½ çš„ä»£ç ï¼ˆä¸»çº¿ç¨‹æ‰§è¡Œä»»ä½•å’ŒUIç›¸å…³çš„å·¥ä½œï¼Œç¬¬äºŒçº¿ç¨‹åº”å½“æ‰§è¡Œæ…¢çš„æˆ–è€…é•¿æ—¶é—´è¿è¡Œçš„è€—æ—¶æ“ä½œä¾‹å¦‚è¯»å–æ–‡ä»¶ï¼Œæ¥å…¥ç½‘ç»œç­‰ç­‰ï¼‰æœ‰ç‚¹ç›¸ä¼¼ã€‚ NSOperation vs. Grand Central Dispatch (GCD)ä½ åº”è¯¥å¬è¯´è¿‡Grand Central Dispatch (GCD).ã€‚ç®€å•çš„æ¥è¯´ï¼ŒGCDç”±è¯­è¨€çš„ç‰¹å¾ï¼Œè¿è¡Œæ—¶åº“å’Œç³»ç»Ÿå¢å¼ºç»„æˆæ¥æä¾›ä¸€ä¸ªåœ¨iOSå’ŒOS Xå¤šæ ¸ç¡¬ä»¶ä¸­æ”¯æŒå¹¶å‘ç³»ç»Ÿå¹¶ä¸”ç»¼åˆçš„æ”¹è‰¯ã€‚å‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šå…³äºGCDç›¸å…³çš„çŸ¥è¯†ï¼Œæœ‰å¯ä»¥é˜…è¯»æˆ‘ä»¬çš„Multithreading and Grand Central Dispatch on iOS for Beginners Tutorialã€‚ NSOperationå’ŒNSOperationQueueæ„å»ºåœ¨GCDä¹‹ä¸Šã€‚æ™®éæ¥è¯´ï¼Œè‹¹æœæ¨èä½¿ç”¨æœ€é«˜çº§åˆ«æŠ½è±¡ï¼Œå½“éœ€è¦æ˜¾ç¤ºä»–ä»¬ä¸€äº›éœ€è¦çš„æµ‹é‡å·¥ä½œæ—¶å›åˆ°æœ€åº•å±‚ã€‚ ä¸‹é¢æ˜¯å…³äºè¿™ä¸¤è€…çš„ä¸€äº›ç®€å•æ¯”è¾ƒï¼Œå°†å¸®åŠ©ä½ å†³å®šä½•æ—¶ä½•åœ°é€‰æ‹©ä½¿ç”¨GCDæˆ–è€…NSOperationï¼š GCD æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ–¹å¼æ¥æè¿°å°†è¦è¢«å¹¶å‘æ‰§è¡Œçš„å·¥ä½œå•å…ƒã€‚ä½ ä¸å¿…å®šåˆ¶è¿™ä¸ªå·¥ä½œå•å…ƒçš„æ—¶åˆ»è¡¨ï¼›ç³»ç»Ÿä¸ºä½ å®šåˆ¶æ—¶åˆ»è¡¨ã€‚åœ¨blocksä¸­å¢åŠ ä¾èµ–æ˜¯ä¸€ä»¶å¤´ç–¼çš„äº‹æƒ…ã€‚å–æ¶ˆæˆ–è€…æš‚åœä¸€ä¸ªblockæ¥è¿›è¡Œé¢å¤–çš„å·¥ä½œä¸ºä½œä¸ºå¼€å‘è€…çš„ä½ ï¼ :] NSOperation å’ŒGCDç›¸æ¯”å¢åŠ äº†ä¸€äº›é¢å¤–å¼€æ”¯ï¼Œä½†æ˜¯ä½ èƒ½å¤Ÿåœ¨å„ç§æ“ä½œä¹‹é—´å¢åŠ ä¾èµ–å¹¶ä¸”æ¢å¤ï¼Œå–æ¶ˆï¼Œæš‚åœä»–ä»¬ã€‚ è¿™ä¸ªæ•™ç¨‹å°†ä½¿ç”¨NSOperation,å› ä¸ºä½ å°†å¤„ç†ä¸€ä¸ªåˆ—è¡¨ä¸ºäº†å¥½çš„è¡¨ç°å¹¶ä¸”ç”±äºå®ƒå¤§é‡çš„æ¶ˆè€—çš„èµ„æºä½ éœ€è¦èƒ½å¤Ÿå–æ¶ˆä¸€ä¸ªæ“ä½œé’ˆå¯¹æŸä¸ªå›¾ç‰‡ï¼Œå‡å¦‚ç”¨æˆ·å·²ç»å°†é‚£å¼ å›¾ç‰‡æ»šå‡ºå±å¹•ã€‚å³ä½¿è¿™äº›æ“ä½œåœ¨åå°çº¿ç¨‹ï¼Œå‡å¦‚è¿™é‡Œæœ‰ä¸€æ‰“äº‹æƒ…åœ¨é˜Ÿåˆ—é‡Œç­‰ç€å®ƒä»¬å»å¤„ç†ï¼Œè¿™å°†è¡¨ç°å¾—è·Ÿç³Ÿç³•ã€‚ é‡æ„ App Modelæ˜¯æ—¶å€™é‡æ„å¼€å§‹çš„éå¤šçº¿ç¨‹çš„æ¨¡å‹äº†ï¼å‡å¦‚ä½ ä»”ç»†è§‚å¯Ÿå…ˆå‰çš„æ¨¡å‹ï¼Œä½ ä¼šå‘ç°è¿™é‡Œæœ‰ä¸‰ä¸ªå¯ä»¥è¢«æ”¹è¿›çš„çº¿ç¨‹å—å›°åŒºåŸŸã€‚é€šè¿‡åˆ‡å‰²è¿™ä¸‰ä¸ªåŒºåŸŸè®©åæŠŠä»–ä»¬æ”¾åœ¨å•ç‹¬çš„çº¿ç¨‹é‡Œï¼Œä¸»çº¿ç¨‹çš„å‹åŠ›å°†å¾—åˆ°ç¼“è§£å¹¶ä¸”èƒ½å¤Ÿä¿æŒå’Œç”¨æˆ·äº¤äº’ã€‚ æ”¹è¿›åçš„ model ä¸ºäº†æ‘†è„±ä½ åº”ç”¨çš„ç“¶é¢ˆï¼Œä½ éœ€è¦ä¸€ä¸ªæŒ‡å®šä¸€ä¸ªçº¿ç¨‹æ¥å“åº”ä½ çš„ç”¨æˆ·æ—¶é—´ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸“æ³¨äºä¸‹è½½èµ„æºå’Œå›¾ç‰‡ï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå›¾ç‰‡æ»¤é•œæ“ä½œã€‚åœ¨æ–°çš„æ¨¡å‹ä¸­ï¼Œappä»ä¸»çº¿ç¨‹å¯åŠ¨è®©åè½½å…¥ä¸€ä¸ªç©ºçš„è¡¨è§†å›¾ã€‚åŒæ—¶ï¼Œappå¯åŠ¨ç¬¬äºŒä¸ªçº¿ç¨‹å¼€å§‹ä¸‹è½½æ•°æ®èµ„æºã€‚ ä¸€æ—¦æ•°æ®èµ„æºä¸‹è½½å®Œæˆï¼Œä½ å°†é€šçŸ¥è¡¨è§†å›¾é‡æ–°è½½å…¥ã€‚è¿™äº›äº‹æƒ…å¿…é¡»åœ¨ä¸»çº¿ç¨‹å®Œæˆï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ç”¨æˆ·ç•Œé¢ç›¸å…³çš„æ“ä½œã€‚ä»è¿™ä¸€ç‚¹æ¥è¯´ï¼Œè¡¨è§†å›¾çŸ¥é“æœ‰å¤šå°‘è¡Œï¼Œå¹¶ä¸”å®ƒçŸ¥é“ä»–å°†æ˜¾ç¤ºå›¾ç‰‡çš„URLåœ°å€ï¼Œä½†æ˜¯å¥¹ä¸çŸ¥é“å®ƒæ˜¯å¦çœŸçš„æœ‰å›¾ç‰‡ï¼å‡å¦‚ä½ ç«‹å³å¼€å§‹ä¸‹è½½æ‰€æœ‰çš„å›¾ç‰‡åœ¨è¿™ä¸ªç‚¹ä¸Šï¼Œè¿™å¯èƒ½å¯¼è‡´æ•ˆç‡æå…¶ä½ä¸‹ï¼Œå› ä¸ºä½ ä¸éœ€è¦ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œï¼ ä¸ºäº†è®©è¿™ä¸ªå˜å¾—æ›´å¥½æˆ‘ä»¬èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹å°±æ˜¯å¯äº¤äº’çš„è¡Œåœ¨å±å¹•èŒƒå›´å†…å¯è§æ—¶æ‰å¼€å§‹ä¸‹è½½å›¾ç‰‡ã€‚æ‰€ä»¥ä½ çš„ä»£ç å¼€å§‹å°†è¯¢é—®è¡¨è§†å›¾æœ‰å¤šå°‘è¡Œå¯è§ã€‚å› æ­¤ï¼Œä»£ç åº”è¯¥ç›´åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªæœªåŠ æ»¤é•œçš„å›¾ç‰‡ç­‰å¾…å¤„ç†æ—¶æ‰å¼€å§‹å¤„ç†å›¾ç‰‡åŠ æ»¤é•œæ“ä½œã€‚ ä¸ºäº†ä½¿appæ›´åŠ å¿«é€Ÿå“åº”ï¼Œä»£ç å°†è¦è®©å›¾ç‰‡ä¸€æ—¦ä¸‹è½½å®Œæ¯•ç«‹å³æ˜¾ç¤ºã€‚è®©åæ‰å¼€å§‹è¿›è¡Œå›¾ç‰‡åŠ æ»¤é•œæ“ä½œï¼Œè®©åæ›´æ–°UIç•Œé¢æ¥æ˜¾ç¤ºå·²ç»ç»è¿‡æ»¤é•œå¤„ç†åçš„å›¾ç‰‡ã€‚ä¸‹é¢çš„å›¾æ ‡æ˜¾ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹çš„æ§åˆ¶æµï¼š Cotroll Flow ä¸ºäº†è·å¾—è¿™äº›å¯¹è±¡ï¼Œä½ éœ€è¦è·Ÿè¸ªè¿™å¼ å›¾ç‰‡ç°åœ¨æ˜¯å¦æ­£åœ¨è¢«ä¸‹è½½ï¼Œä¸€æ—¦å®Œæˆä¸‹è½½ï¼Œå‡å¦‚å›¾ç‰‡çš„æ»¤é•œè¢«åº”ç”¨ä¸Šã€‚ä½ éœ€è¦è·Ÿè·Ÿè¸ªæ¯ä¸ªæ“ä½œçš„çŠ¶æ€ï¼Œå®ƒæ˜¯å¦æ­£åœ¨ä¸‹è½½ä¸­æˆ–è€…æ‰§è¡Œæ»¤é•œæ“ä½œï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿå–æ¶ˆï¼Œæš‚åœæˆ–è€…æ¢å¤æ¯ä¸ªæ“ä½œå½“ç”¨æˆ·æ»šåŠ¨çš„æ—¶å€™ã€‚ Okeyï¼ ç°åœ¨ä½ å‡†å¤‡å¥½å¼€å§‹ç ä»£ç äº†ï¼ :] æ‰“å¼€ä½ ä¸‹è½½çš„å·¥ç¨‹ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„Swift Fileåˆ°ä½ çš„å·¥ç¨‹ä¸­å‘½åä¸º** PhotoOperations.swift**ã€‚æ·»åŠ ä¸‹é¢ä»£ç ï¼š 1234567891011121314151617class PendingOperations &#123; lazy var downloadsInProgress = [NSIndexPath:NSOperation]() lazy var downloadQueue:NSOperationQueue = &#123; var queue = NSOperationQueue() queue.name = &quot;Download queue&quot; queue.maxConcurrentOperationCount = 1 return queue &#125;() lazy var filtrationsInProgress = [NSIndexPath:NSOperation]() lazy var filtrationQueue:NSOperationQueue = &#123; var queue = NSOperationQueue() queue.name = &quot;Image Filtration queue&quot; queue.maxConcurrentOperationCount = 1 return queue &#125;()&#125; è¿™å›ç±»åŒ…å«äº†2ä¸ªå­—å…¸ä¸ºäº†è·Ÿè¸ªæ¿€æ´»å’Œæ­£åœ¨è¿›è¡Œä¸­çš„ä¸‹è½½å’Œæ»¤é•œæ“ä½œå¯¹è¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œå¹¶ä¸”ä¸¤ä¸ªæ“ä½œé˜Ÿåˆ—éƒ½æœ‰å„è‡ªçš„æ“ä½œç±»å‹ã€‚ æ‰€æœ‰çš„å€¼è¢«æ‡’åŠ è½½çš„æ–¹å¼åˆ›å»ºï¼Œæ„å‘³ç€ä»–ä»¬ä¸ä¼šè¢«åˆå§‹åŒ–çŸ¥é“ä»–ä»¬ç¬¬ä¸€æ¬¡è¢«æ¥å…¥ã€‚è¿™æ ·æ”¹å–„äº†ä½ appçš„è¡¨ç°æ€§èƒ½ã€‚ åˆ›å»ºä¸€ä¸ªNSOperationQueueæ˜¯éå¸¸ç®€å•çš„ï¼Œæ­£å¦‚ä½ æ‰€è§ï¼Œç»™ä½ çš„é˜Ÿåˆ—å‘½åæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºåå­—ä¼šåœ¨ä»ªå™¨æˆ–è€…è°ƒé€Ÿå™¨ä¸­æ˜¾ç¤ºã€‚maxConcurrentOperationCountåœ¨è¿™é‡Œç”±äºè¿™ä¸ªæ•™ç¨‹çš„ç¼˜æ•…è¢«è®¾ç½®æˆ1ï¼Œæ˜¯ä¸ºäº†è®©ä½ çœ‹åˆ°æ“ä½œä¸€ä¸ªæ¥ä¸€ä¸ªå®Œæˆã€‚ä½ å¯ä»¥ç¦»å¼€è¿™ä¸€éƒ¨åˆ†å…è®¸é˜Ÿåˆ—å†³å®šä»–ä¸€æ¬¡å¤„ç†å¤šå°‘ä¸ªæ“ä½œâ€“è¿™æ ·ä¼šè¿›ä¸€æ­¥æ”¹å–„æ€§èƒ½ã€‚ é˜Ÿåˆ—æ˜¯æ€æ ·å†³å®šä¸€æ¬¡è¿è¡Œå¤šå°‘ä¸ªæ“ä½œçš„å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼ :] è¿™å–å†³äºç¡¬ä»¶ã€‚é»˜è®¤ï¼ŒNSOperationQueueå°†è¦å¤„ç†ä¸€å†™è®¡ç®—åœ¨å±å¹•èƒŒåï¼Œå†³å®šä»€ä¹ˆæ˜¯æœ€å¥½çš„éœ€è¦çœ‹ä»£ç æ˜¯è¿è¡Œåœ¨æŸä¸ªå…·ä½“çš„å¹³å°ï¼Œå’Œå°†è½½å…¥çš„æœ€å¤§æ•°é‡çš„çº¿ç¨‹æ•°ã€‚ è€ƒè™‘åˆ°ä¸‹é¢çš„ä¾‹å­ï¼Œå‡è®¾ç³»ç»Ÿæ­¤æ—¶æ˜¯ç©ºé—²çš„ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šèµ„æºå¯ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªé˜Ÿåˆ—èƒ½å¤Ÿè½½å…¥å¯èƒ½8æ¡å¹¶å‘çš„çº¿ç¨‹ã€‚ä¸‹ä¸€ä¸ªæ—¶åˆ»ä½ è¿è¡Œç¨‹åºï¼Œç³»ç»Ÿå¯èƒ½å¿™äºå…¶ä»–ä¸ç›¸å…³çš„æ­£åœ¨æŠ¢å¤ºèµ„æºçš„æ“ä½œï¼Œè¿™æ—¶é˜Ÿåˆ—å°±ä»…ä»…è½½å…¥2ä¸ªå¹¶å‘çš„çº¿ç¨‹ã€‚å› ä¸ºä½ å·²ç»è®¾ç½®äº†ä¸€ä¸ªæœ€å¤§å¹¶å‘æ“ä½œæ•°ï¼Œåœ¨è¿™ä¸ªappä¸­ä¸€æ¬¡åªä¼šè¿›è¡Œä¸€ä¸ªæ“ä½œã€‚ æ³¨æ„ï¼šä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä½ å¿…é¡»è·Ÿè¸ªæ‰€æœ‰çš„æ¿€æ´»çš„å’Œæ­£åœ¨è¿›è¡Œä¸­æ“ä½œã€‚é˜Ÿåˆ—æœ‰ä¸€ä¸ªoperationsçš„æ–¹æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªæ“ä½œçš„æ•°ç»„ï¼Œæ‰€æœ‰ä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿåœ¨è¿™ä¸ªå·¥ç¨‹ä¸­è¿™æ ·åšæ•ˆæœä¸æ˜¯å¾ˆå¥½ã€‚ä½ éœ€è¦è·Ÿè¸ªæ›´è¡¨è§†å›¾è¡Œæ•°å…³è”çš„æ“ä½œï¼Œå®ƒå¯èƒ½ä¼šé‡å¤æ‰§è¡Œæ•°ç»„æ¯æ¬¡ä½ éœ€è¦ä¸€ä¸ªçš„æ—¶å€™ã€‚æŠŠå®ƒä»¬å‚¨å­˜åœ¨ä¸€ä¸ªå­—å…¸ä¸­ç”¨index pathæ¥ä½œä¸ºä»–çš„keyæ–¹ä¾¿å¿«é€Ÿå’Œé«˜æ•ˆçš„æŸ¥æ‰¾ã€‚ æ˜¯æ—¶å€™è€ƒè™‘ä¸‹è½½å’Œè¿‡æ»¤æ“ä½œäº†ã€‚æ·»åŠ ä¸‹åˆ—ä»£ç åˆ° PhotoOperations.swift:æ–‡ä»¶çš„æœ«å°¾ï¼š 1234567891011121314151617181920212223242526272829303132333435class ImageDownloader: NSOperation &#123; //1 let photoRecord: PhotoRecord //2 init(photoRecord: PhotoRecord) &#123; self.photoRecord = photoRecord &#125; //3 override func main() &#123; //4 if self.cancelled &#123; return &#125; //5 let imageData = NSData(contentsOfURL:self.photoRecord.url) //6 if self.cancelled &#123; return &#125; //7 if imageData?.length &gt; 0 &#123; self.photoRecord.image = UIImage(data:imageData!) self.photoRecord.state = .Downloaded &#125; else &#123; self.photoRecord.state = .Failed self.photoRecord.image = UIImage(named: &quot;Failed&quot;) &#125; &#125;&#125; NSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ºå®ƒçš„å­ç±»è€Œè®¾è®¡ã€‚æ¯ä¸ªå­ç±»ä»£è¡¨äº†ä¸€ä¸ªç‰¹åˆ«çš„ä»»åŠ¡æ­£å¦‚å‘ˆç°åœ¨åˆ—è¡¨æ—©æœŸé‚£æ ·ã€‚ ä¸‹é¢æ˜¯ä¸Šé¢ä»£ç æ¯è¡Œæ³¨é‡Šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆçš„è¯´æ˜ï¼š æ·»åŠ ä¸€ä¸ªå¸¸é‡å¼•ç”¨åˆ°å’Œæ“ä½œç›¸å…³çš„PhotoRecordå¯¹è±¡ åˆ›å»ºä¸€ä¸ªè®¾è®¡åˆå§‹åŒ–æ–¹æ³•å…è®¸photo recordå‚æ•°å¯ä»¥è¢«ä¼ è¿›æ¥ mainæ˜¯ä½ åœ¨NSOperationå­ç±»ä¸­éœ€è¦é‡å†™çš„æ–¹æ³•ï¼Œç”¨æ¥æ‰§è¡Œç›¸å…³å·¥ä½œ åœ¨å¯åŠ¨å¼€å§‹å‰æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆï¼Œæ“ä½œåº”è¯¥å®šæœŸæ£€æŸ¥æ˜¯å¦å·²ç»è¢«å–æ¶ˆåœ¨å°è¯•é•¿æ—¶é—´æˆ–å¯†é›†çš„å·¥ä½œä¹‹å‰ ä¸‹è½½å›¾ç‰‡æ•°æ® å†æ¬¡æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆ å‡å¦‚è¿™é‡Œæœ‰æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ç„¶åæŠŠå®ƒæ·»åŠ åˆ°è®°å½•ä¸­ï¼ŒåŒæ—¶æ”¹å˜å®ƒçš„çŠ¶æ€ï¼Œå‡å¦‚è¿™é‡Œæ²¡æœ‰æ•°æ®ï¼ŒæŠŠè¿™æ¡è®°å½•æ ‡è®°æˆå¤±è´¥ç„¶åè®¾ç½®é€‚å½“çš„å›¾ç‰‡ ä¸‹ä¸€æ­¥ï¼Œä½ å°†åˆ›å»ºå¦ä¸€ä¸ªæ“ä½œæ¥å¤„ç†å›¾ç‰‡åŠ æ»¤é•œçš„æ“ä½œï¼æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°PhotoOperations.swiftæ–‡ä»¶æœ«å°¾ï¼š 12345678910111213141516171819202122class ImageFiltration: NSOperation &#123; let photoRecord: PhotoRecord init(photoRecord: PhotoRecord) &#123; self.photoRecord = photoRecord &#125; override func main () &#123; if self.cancelled &#123; return &#125; if self.photoRecord.state != .Downloaded &#123; return &#125; if let filteredImage = self.applySepiaFilter(self.photoRecord.image!) &#123; self.photoRecord.image = filteredImage self.photoRecord.state = .Filtered &#125; &#125;&#125; é™¤äº†ä½ å¯¹å›¾ç‰‡åº”ç”¨æ»¤é•œï¼ˆä½¿ç”¨ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³•ï¼Œå› æ­¤ç¼–è¯‘1é”™è¯¯ï¼‰è€Œä¸æ˜¯ä¸‹è½½å®ƒä¹‹å¤–ï¼Œè¿™ä¸ªçœ‹èµ·æ¥å’Œä¸‹è½½æ“ä½œéå¸¸ç›¸åƒã€‚ æ·»åŠ é—å¤±çš„å›¾ç‰‡æ»¤é•œå¤„ç†æ–¹æ³•åˆ°ImageFiltrationç±»ä¸­: 1234567891011121314151617181920(image:UIImage) -&gt; UIImage? &#123; let inputImage = CIImage(data:UIImagePNGRepresentation(image)) if self.cancelled &#123; return nil &#125; let context = CIContext(options:nil) let filter = CIFilter(name:&quot;CISepiaTone&quot;) filter.setValue(inputImage, forKey: kCIInputImageKey) filter.setValue(0.8, forKey: &quot;inputIntensity&quot;) let outputImage = filter.outputImage if self.cancelled &#123; return nil &#125; let outImage = context.createCGImage(outputImage, fromRect: outputImage.extent()) let returnImage = UIImage(CGImage: outImage) return returnImage&#125; å›¾ç‰‡æ·»åŠ æ»¤é•œæ“ä½œä½¿ç”¨å…ˆå‰ListViewControllerä¸­ç›¸åŒçš„å®ç°ã€‚å·²ç»æŠŠå®ƒç§»åŠ¨åˆ°è¿™é‡Œæ¥äº†ä»¥è‡³äºå®ƒå®ƒèƒ½åœ¨åå°çš„ä¸€ä¸ªå•ç‹¬çš„æ“ä½œä¸­å®Œæˆã€‚å†æ¬¡å¼ºè°ƒï¼Œä½ åº”è¯¥éå¸¸é¢‘ç¹çš„æ£€æŸ¥å–æ¶ˆæ“ä½œï¼›æœ€ä½³å®è·µæ˜¯åœ¨è¿›è¡Œä»»ä½•è€—æ—¶æ“ä½œè°ƒç”¨ä¹‹å‰å’Œä¹‹åã€‚ä¸€æ—¦åŠ æ»¤é•œæ“ä½œå®Œæˆï¼Œä½ åº”è¯¥ç«‹å³è®¾ç½®photo record å®ä¾‹çš„å€¼ã€‚ å¾ˆæ£’ï¼ç°åœ¨ä½ å·²ç»æœ‰äº†æ‰€æœ‰çš„å·¥å…·å’ŒåŸºç¡€ä¸ºäº†å¤„ç†åå°ä»»åŠ¡è¿›ç¨‹çš„æ“ä½œã€‚æ˜¯æ—¶å€™å›åˆ°æ§åˆ¶å™¨ä¿®æ”¹å®ƒä»¥ä¾¿èƒ½åˆ©ç”¨æ‰€æœ‰è¿™äº›æ–°çš„ç¦åˆ©ã€‚ åˆ‡æ¢åˆ°ListViewController.swiftæ–‡ä»¶ï¼Œç„¶ååˆ é™¤lazy var photosæ¥å£å£°æ˜ã€‚æ·»åŠ ä¸‹é¢å£°æ˜ï¼š 12var photos = [PhotoRecord]()let pendingOperations = PendingOperations() è¿™äº›å°†æŒæœ‰ä¸€ä¸ªæ•°ç»„çš„ä½ åœ¨å¼€å§‹åˆ›å»ºçš„PhotoDetailså¯¹è±¡ï¼ŒPendingOperationså¯¹è±¡æ¥ç®¡ç†æ“ä½œã€‚ æ·»åŠ ä¸€ä¸ªä¸‹è½½photos propertyåˆ—è¡¨æ–°çš„æ–¹æ³•åˆ°ç±»ä¸­ï¼š 123456789101112131415161718192021222324252627func fetchPhotoDetails() &#123; let request = NSURLRequest(URL:dataSourceURL!) UIApplication.sharedApplication().networkActivityIndicatorVisible = true NSURLConnection.sendAsynchronousRequest(request, queue: NSOperationQueue.mainQueue()) &#123;response,data,error in if data != nil &#123; let datasourceDictionary = NSPropertyListSerialization.propertyListWithData(data, options: Int(NSPropertyListMutabilityOptions.Immutable.rawValue), format: nil, error: nil) as! NSDictionary for(key : AnyObject,value : AnyObject) in datasourceDictionary &#123; let name = key as? String let url = NSURL(string:value as? String ?? &quot;&quot;) if name != nil &amp;&amp; url != nil &#123; let photoRecord = PhotoRecord(name:name!, url:url!) self.photos.append(photoRecord) &#125; &#125; self.tableView.reloadData() &#125; if error != nil &#123; let alert = UIAlertView(title:&quot;Oops!&quot;,message:error.localizedDescription, delegate:nil, cancelButtonTitle:&quot;OK&quot;) alert.show() &#125; UIApplication.sharedApplication().networkActivityIndicatorVisible = false &#125;&#125; è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªå¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚ï¼Œå½“å®Œæˆçš„æ—¶å€™ï¼Œå°†æ‰§è¡Œcompletion blockåœ¨ä¸»çº¿ç¨‹ã€‚å½“ä¸‹è½½å®Œæˆproperty listçš„æ•°æ®è¢«èƒå–æˆä¸€ä¸ªNSDictionary,ç„¶åå†æ¬¡å¤„ç†ä¸€ä¸ªæ•°ç»„çš„PhotoRecordçš„å¯¹è±¡ã€‚ä½ ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™é‡Œçš„NSOperation,ä½ åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­æ¥å…¥å®ƒä½¿ç”¨NSOperationQueue.mainQueue()ã€‚ åœ¨viewDidLoadè°ƒç”¨æ–°æ–¹æ³• fetchPhotoDetails() ä¸‹ä¸€æ­¥æ‰¾åˆ° tableView(_:cellForRowAtIndexPath:)ç„¶åæ›¿æ¢å®ƒç”¨ä¸‹é¢çš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCellWithIdentifier(&quot;CellIdentifier&quot;, forIndexPath: indexPath) as! UITableViewCell //1 if cell.accessoryView == nil &#123; let indicator = UIActivityIndicatorView(activityIndicatorStyle: .Gray) cell.accessoryView = indicator &#125; let indicator = cell.accessoryView as! UIActivityIndicatorView //2 let photoDetails = photos[indexPath.row] //3 cell.textLabel?.text = photoDetails.name cell.imageView?.image = photoDetails.image //4 switch (photoDetails.state)&#123; case .Filtered: indicator.stopAnimating() case .Failed: indicator.stopAnimating() cell.textLabel?.text = &quot;Failed to load&quot; case .New, .Downloaded: indicator.startAnimating() self.startOperationsForPhotoRecord(photoDetails,indexPath:indexPath) &#125; return cell&#125; èŠ±ç‚¹æ—¶é—´æ¥é€šè¯»æ³¨é‡ŠåŒºåŸŸä¸‹é¢çš„è§£é‡Šï¼š ä¸ºäº†ç»™ç”¨æˆ·æä¾›åé¦ˆï¼Œåˆ›å»ºUIActivityIndicatorViewè®©åæŠŠå®ƒè®¾æˆcellçš„accessory viewã€‚ æ•°æ®æºåŒ…å«PhotoRecordå®ä¾‹ã€‚æŠ“å–æ­£ç¡®çš„æ•°æ®åŸºäºå½“å‰è¡Œçš„indexPathã€‚ cellçš„æ–‡æœ¬æ ‡ç­¾æ€»æ˜¯ä¸€æ ·çš„ï¼Œå›¾ç‰‡è¢«æ­£ç¡®çš„è®¾ç½®åœ¨PhotoRecordä¸­å½“å®ƒè¢«å¤„ç†çš„æ—¶å€™ï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿè®¾ç½®ä»–ä»¬ä¸¤è€…ï¼Œè€Œä¸ç®¡è®°å½•çš„çŠ¶æ€ã€‚ æ£€æŸ¥è®°å½•ï¼Œæ­£ç¡®çš„è®¾ç½®activity indicatorå’Œæ–‡æœ¬ï¼Œç„¶åå¼€å§‹æ“ä½œï¼ˆæš‚æ—¶è¿˜æ²¡å®ç°ï¼‰ ä½ å¯ä»¥ç§»é™¤applySepiaFilterçš„å®ç°ï¼Œå› ä¸ºé‚£ä¸ªå°†ä¸å†è¢«è°ƒç”¨äº†ï¼Œæ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°ç±»ä¸­æ¥å¼€å§‹æ“ä½œï¼š 12345678910func startOperationsForPhotoRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath)&#123; switch (photoDetails.state) &#123; case .New: startDownloadForRecord(photoDetails, indexPath: indexPath) case .Downloaded: startFiltrationForRecord(photoDetails, indexPath: indexPath) default: NSLog(&quot;do nothing&quot;) &#125;&#125; è¿™é‡Œï¼Œä½ å°†ä¼ é€’ä¸€ä¸ªPhotoRecordç±»å‹çš„å®ä¾‹å¸¦æœ‰å®ƒçš„index pathã€‚ä¾æ®photo recordçš„çŠ¶æ€ï¼Œä½ é€‰å¼€å§‹è¿›è¡Œä¸‹è½½è¿˜æ˜¯åŠ æ»¤é•œçš„æ­¥éª¤ã€‚ æ³¨æ„ï¼šä¸‹è½½å›¾ç‰‡å’Œç»™å›¾ç‰‡åŠ æ»¤é•œçš„æ–¹æ³•åˆ†å¼€å®ç°ï¼Œå› ä¸ºè¿™é‡Œæœ‰å¯èƒ½å‡ºç°å½“ä¸€ä¸ªå›¾ç‰‡æ­£åœ¨è¢«ä¸‹è½½ï¼Œç”¨æˆ·å¯èƒ½æŠŠå®ƒæ»šå¼€äº†ï¼Œè¿™æ ·ä½ å°±ä¸å¿…å¯¹å®ƒåº”ç”¨æ»¤é•œæ“ä½œã€‚å½“ä¸‹ä¸€æ¬¡ç”¨æˆ·åˆæ¥åˆ°ç›¸åŒçš„å“ªè¡Œæ—¶ï¼Œä½ ä¸å¿…é‡æ–°ä¸‹è½½å›¾ç‰‡ï¼›ä½ åªéœ€å¯¹å®ƒåº”ç”¨å›¾ç‰‡æ»¤é•œå³å¯ï¼ Efficiency rocks! :] ç°åœ¨ä½ éœ€è¦å®ç°ä½ åœ¨ä¸Šé¢è°ƒç”¨çš„æ–¹æ³•ã€‚è®°ä½ä½ åˆ›å»ºçš„è‡ªå®šä¹‰çš„ç±»ï¼ŒPendingOperations,ä¿æŒè·Ÿè¸ªæ“ä½œï¼›ç°åœ¨å®é™…ä¸Šä½ å¯ä»¥ä½¿ç”¨å®ƒäº†ï¼æ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°ç±»ä¸­ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142func startDownloadForRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath)&#123; //1 if let downloadOperation = pendingOperations.downloadsInProgress[indexPath] &#123; return &#125; //2 let downloader = ImageDownloader(photoRecord: photoDetails) //3 downloader.completionBlock = &#123; if downloader.cancelled &#123; return &#125; dispatch_async(dispatch_get_main_queue(), &#123; self.pendingOperations.downloadsInProgress.removeValueForKey(indexPath) self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .Fade) &#125;) &#125; //4 pendingOperations.downloadsInProgress[indexPath] = downloader //5 pendingOperations.downloadQueue.addOperation(downloader)&#125;func startFiltrationForRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath)&#123; if let filterOperation = pendingOperations.filtrationsInProgress[indexPath]&#123; return &#125; let filterer = ImageFiltration(photoRecord: photoDetails) filterer.completionBlock = &#123; if filterer.cancelled &#123; return &#125; dispatch_async(dispatch_get_main_queue(), &#123; self.pendingOperations.filtrationsInProgress.removeValueForKey(indexPath) self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .Fade) &#125;) &#125; pendingOperations.filtrationsInProgress[indexPath] = filterer pendingOperations.filtrationQueue.addOperation(filterer)&#125; Okey!ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆ—è¡¨æ¥å¸®åŠ©ä½ ç«‹å³ä¸Šé¢çš„ä»£ç åˆ°åº•åšäº†ä»€ä¹ˆï¼š é¦–å…ˆï¼Œæ£€æŸ¥ç‰¹å®šçš„indexPathæ¥çœ‹è¿™é‡Œæ˜¯å¦å·²ç»æœ‰ä¸€ä¸ªæ“ä½œåœ¨downloadsInProgressä¸­ã€‚å‡å¦‚æœ‰ï¼Œå¿½ç•¥å®ƒã€‚ å‡å¦‚æ²¡æœ‰ï¼Œé€šè¿‡designated initializeråˆ›å»ºä¸€ä¸ªImageDownloaderå®ä¾‹ æ·»åŠ ä¸€ä¸ªå½“æ“ä½œå®Œæˆæ—¶æ‰§è¡Œçš„å®Œæˆblockã€‚è¿™æ˜¯æœ€å¥½çš„åœ°æ–¹è®©ä½ å…¶ä½™çš„åº”ç”¨çŸ¥é“ä¸€ä¸ªæ“ä½œå·²ç»å®Œæˆã€‚æ³¨æ„å®Œæˆblockå¿…é¡»è¢«æ‰§è¡Œå³ä½¿è¿™ä¸ªæ“ä½œè¢«å–æ¶ˆï¼Œè¿™ç›¸å½“çš„é‡è¦ï¼Œæ‰€ä»¥ä½ éœ€è¦ä½¿ç”¨GCDæ¥è§¦å‘é‡æ–°è½½å…¥è¡¨è§†å›¾åœ¨ä¸»çº¿ç¨‹ã€‚ æ·»åŠ æ“ä½œåˆ°downloadsInProgressä¸­æ¥ä¿æŒè·Ÿè¸ªä¸€äº›äº‹æƒ…ã€‚ æ·»åŠ æ“ä½œåˆ°ä¸‹è½½é˜Ÿåˆ—ä¸­ã€‚è¿™æ˜¯ä½ å®é™…è·å–è¿™äº›æ“ä½œå¼€å§‹è¿è¡Œçš„æ–¹æ³•â€“é˜Ÿåˆ—éœ€è¦æ³¨æ„çš„æ˜¯ä¸€æ—¦ä½ æ·»åŠ äº†æ“ä½œå®ƒå°±ä¼šæ‰§è¡Œã€‚ è¿‡æ»¤å›¾ç‰‡çš„æ–¹æ³•éµå¾ªä¸‹é¢ç›¸åŒçš„ç±»å‹ï¼Œé™¤äº†å®ƒä½¿ç”¨ImageFiltrationå’ŒfiltrationsInProgressæ¥è·Ÿè¸ªæ“ä½œã€‚ä½œä¸ºç»éªŒï¼Œä½ åº”è¯¥å°è¯•ä¸è¦é‡å¤è¿™ä¸ªåŒºåŸŸçš„ä»£ç  :] ä½ åšåˆ°äº†ï¼ä½ çš„å·¥ç¨‹å®Œæˆäº†ã€‚æ„å»ºè®©åè¿è¡Œçœ‹æœ‰ä»€ä¹ˆæ”¹è¿›åœ¨æ“ä½œä¸Šï¼å½“ä½ æ»šåŠ¨è¡¨è§†å›¾çš„æ—¶å€™ï¼Œappå¹¶æ²¡æœ‰åœæ­¢ï¼Œè¿˜æ˜¯åƒå®ƒä»¬å˜å¾—å¯è§ä¸€æ ·ç»§ç»­ä¸‹è½½å›¾ç‰‡å’Œç»™å›¾ç‰‡åŠ æ»¤é•œæ“ä½œã€‚ åŸæ¥çš„å›¾ç‰‡ï¼Œç°åœ¨å¯ä»¥æ»šåŠ¨äº† æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿä½ èƒ½çœ‹åˆ°éšåšä½ çš„è¿›æ­¥è®©ä½ çš„åº”ç”¨æ›´æ˜“äºå“åº”èƒ½åšå‡ºçš„åŠªåŠ› â€“å¯¹ç”¨æˆ·æ¥è¯´æ›´æœ‰è¶£ï¼ ç»†å¾®çš„è°ƒæ•´ä½ å·²ç»éšç€è¿™ä¸ªæ•™ç¨‹èµ°è¿‡æ¼«é•¿çš„è·¯ï¼ä½ çš„å°é¡¹ç›®ç°åœ¨ååº”çµæ•è¡¨æ˜äº†åœ¨åŸæ¥çš„ç‰ˆæœ¬åŸºç¡€ä¸Šæœ‰å¾ˆå¤šæ”¹è¿›ã€‚ç„¶è€Œï¼Œè¿™é‡Œä»»ç„¶æœ‰ä¸€äº›é—ç•™çš„ç»†èŠ‚æˆ‘ä»¬éœ€è¦è€ƒè™‘ã€‚ä½ æ˜¯æƒ³æˆä¸ºä¸€åä¼Ÿå¤§çš„ç¨‹åºå‘˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ï¼ ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†å½“ä½ æ»šåŠ¨è¡¨è§†å›¾æ—¶ï¼Œé‚£äº›ç¦»å±çš„cellä»ç„¶åœ¨å¤„ç†ä¸‹è½½å’Œç»™å›¾ç‰‡åŠ æ»¤é•œçš„æ“ä½œã€‚å‡å¦‚ä½ å¿«é€Ÿæ»šåŠ¨ï¼Œappå°†å¿™äºä¸‹è½½å’Œç»™å›¾ç‰‡å¤„ç†æ»¤é•œçš„æ“ä½œï¼Œåœ¨åˆ—è¡¨ä¸­ä»æœ€å‰é¢ç”šè‡³åˆ°ä¸å¯è§çš„åœ°æ–¹ã€‚ç†æƒ³çš„æƒ…å†µä¸‹appåº”è¯¥å¯¹ç¦»å¼€å±å¹•çš„cellså°±æ˜¯ç°åœ¨ä¸å¯è§çš„å–æ¶ˆæ»¤é•œæ“ä½œã€‚ éš¾é“ä½ æ²¡æœ‰æŠŠå–æ¶ˆçš„è§„å®šæ”¾è¿›ä½ çš„ä»£ç é‡Œï¼Ÿ æ˜¯çš„ï¼Œä½ åšäº†â€“ç°åœ¨ä½ åº”è¯¥å……åˆ†åˆ©ç”¨å®ƒä»¬ï¼:] å›åˆ°Xcodeï¼Œè®©åæ‰“å¼€ListViewController.swiftæ–‡ä»¶ã€‚å»åˆ°tableView(_:cellForRowAtIndexPath:)æ–¹æ³•çš„å®ç°ï¼Œå°è£…startOperationsForPhotoRecordè°ƒç”¨åœ¨ä¸€ä¸ªifæ¡ä»¶å‘ä¸‹é¢çš„ï¼š 123if (!tableView.dragging &amp;&amp; !tableView.decelerating) &#123; self.startOperationsForPhotoRecord(photoDetails, indexPath: indexPath)&#125; ä½ éœ€è¦å‘Šè¯‰è¡¨è§†å›¾å¼€å§‹æ“ä½œä»…ä»…å½“è¡¨è§†å›¾æ²¡æœ‰æ»šåŠ¨çš„æ—¶å€™ã€‚è¿™å®é™…ä¸Šæ˜¯UIScrollViewçš„æ¥å£ï¼Œç”±äºUITableViewæ˜¯UIScrollViewçš„å­ç±»ï¼Œä½ è‡ªåŠ¨ç»§æ‰¿äº†è¿™äº›æ¥å£ã€‚ ä¸‹ä¸€æ­¥ï¼Œæ·»åŠ åˆ°ä¸‹é¢UIScrollViewä»£ç†æ–¹æ³•çš„å®ç°åˆ°ç±»ä¸­ï¼š 123456789101112131415161718override func scrollViewWillBeginDragging(scrollView: UIScrollView) &#123; //1 suspendAllOperations()&#125;override func scrollViewDidEndDragging(scrollView: UIScrollView, willDecelerate decelerate: Bool) &#123; // 2 if !decelerate &#123; loadImagesForOnscreenCells() resumeAllOperations() &#125;&#125;override func scrollViewDidEndDecelerating(scrollView: UIScrollView) &#123; // 3 loadImagesForOnscreenCells() resumeAllOperations()&#125; å¿«é€Ÿèµ°æŸ¥ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºåœ¨ä¸‹é¢ï¼š å½“ç”¨æˆ·å¼€å§‹æ»šåŠ¨ï¼Œä½ æƒ³æš‚åœæ‰€æœ‰çš„æ“ä½œè®©åçœ‹çœ‹ç”¨æˆ·æƒ³çœ‹åˆ°ä»€ä¹ˆã€‚ä½ å°†è¦å®ç°suspendAllOperationsåœ¨ä¸€ä¼šå„¿å·¥å¤«ã€‚ å‡å¦‚decelerateçš„å€¼æ˜¯false,é‚£å°±æ„å‘³ç€åœæ­¢æ‹–æ‹½è¡¨è§†å›¾ï¼Œå› æ­¤ä½ æƒ³æ¢å¤æš‚åœçš„ï¼Œå› ä¸ºcellç¦»å¼€å±å¹•å–æ¶ˆçš„æ“ä½œï¼Œå¯åŠ¨åœ¨å±å¹•å†…cellsçš„æ“ä½œã€‚ä½ å°†è¦ä¸€èµ·å®ç°loadImagesForOnscreenCellså’ŒresumeAllOperationsã€‚ ä»£ç†æ–¹æ³•å‘Šè¯‰ä½ è¡¨è§†å›¾å·²ç»åœæ­¢æ»šåŠ¨ï¼Œæ‰€ä»¥ä½ å°†åšå’Œ#2æ¡ç›¸åŒçš„å¤„ç†ã€‚ ç°åœ¨ï¼Œæ·»åŠ ä¸‹é¢è¿™äº›é—å¤±çš„æ–¹æ³•çš„å®ç°åˆ°ListViewController.swift: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546func suspendAllOperations () &#123; pendingOperations.downloadQueue.suspended = true pendingOperations.filtrationQueue.suspended = true&#125;func resumeAllOperations () &#123; pendingOperations.downloadQueue.suspended = false pendingOperations.filtrationQueue.suspended = false&#125;func loadImagesForOnscreenCells () &#123; //1 if let pathsArray = tableView.indexPathsForVisibleRows() &#123; //2 var allPendingOperations = Set(pendingOperations.downloadsInProgress.keys.array) allPendingOperations.unionInPlace(pendingOperations.filtrationsInProgress.keys.array) //3 var toBeCancelled = allPendingOperations let visiblePaths = Set(pathsArray as! [NSIndexPath]) toBeCancelled.subtractInPlace(visiblePaths) //4 var toBeStarted = visiblePaths toBeStarted.subtractInPlace(allPendingOperations) // 5 for indexPath in toBeCancelled &#123; if let pendingDownload = pendingOperations.downloadsInProgress[indexPath] &#123; pendingDownload.cancel() &#125; pendingOperations.downloadsInProgress.removeValueForKey(indexPath) if let pendingFiltration = pendingOperations.filtrationsInProgress[indexPath] &#123; pendingFiltration.cancel() &#125; pendingOperations.filtrationsInProgress.removeValueForKey(indexPath) &#125; // 6 for indexPath in toBeStarted &#123; let indexPath = indexPath as NSIndexPath let recordToProcess = self.photos[indexPath.row] startOperationsForPhotoRecord(recordToProcess, indexPath: indexPath) &#125; &#125;&#125; suspendAllOperationså’ŒresumeAllOperationsæœ‰ä¸€ä¸ªç®€å•çš„å®ç°ã€‚NSOperationQueuesèƒ½å¤Ÿè¢«æš‚åœï¼Œé€šè¿‡è®¾ç½®suspendedæ¥å£ä¸ºtrueã€‚è¿™å°†æš‚åœé˜Ÿåˆ—é‡Œé¢çš„æ‰€æœ‰æ“ä½œâ€“ä½ ä¸èƒ½å•ç‹¬æš‚åœä¸€ä¸ªæ“ä½œã€‚ loadImagesForOnscreenCellsæœ‰ä¸€ç‚¹å°å¤æ‚ã€‚è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ ä»¥ä¸€ä¸ªåŒ…å«äº†ç°åœ¨è¡¨è§†å›¾å¯è§çš„index pathsçš„æ•°ç»„å¼€å§‹å¼€å§‹ æ„é€ ä¸€ä¸ªæ‰€æœ‰è¿›è¡Œä¸­çš„æ“ä½œçš„é›†åˆé€šè¿‡ç»“åˆæ‰€æœ‰åœ¨ä¸‹è½½çš„è¿›åº¦+æ‰€æœ‰åœ¨å¤„ç†æ»¤é•œçš„è¿›åº¦ã€‚ æ„é€ ä¸€ä¸ªindex pathsé›†åˆç”¨æ¥å–æ¶ˆæ“ä½œã€‚å¼€å§‹æ‰€æœ‰çš„æ“ä½œï¼Œç„¶åç§»é™¤å¯è§è¡Œçš„index pathsï¼Œè¿™æ ·è®²ç•™ä¸‹ä¸€ä¸ªç¦»å¼€å±å¹•çš„è¡Œæ­£åœ¨æ‰§è¡Œçš„æ“ä½œé›†åˆ æ„é€ ä¸€ä¸ªindex pathsé›†åˆï¼Œéœ€è¦æ“ä½œå¯åŠ¨ï¼Œç”¨æ‰€æœ‰å¯è§è¡Œçš„index pathså¯åŠ¨ï¼Œè®©åç§»é™¤å®ƒä»¬ä¸­åœ¨è¿›è¡Œçš„æ“ä½œã€‚ éå†é‚£äº›è¢«å–æ¶ˆçš„æ“ä½œï¼Œå–æ¶ˆå®ƒä»¬ï¼Œç„¶åç§»é™¤å®ƒä»¬çš„å¼•ç”¨ä»PendingOperationsã€‚ éå†é‚£äº›å°†è¦å¼€å§‹çš„æ“ä½œï¼Œç„¶åå¯¹ä»–ä»¬æ¯ä¸ªè°ƒç”¨startOperationsForPhotoRecordã€‚ æ„å»ºè¿è¡Œç„¶åä½ å‘ç°ä¸€ä¸ªæ›´æµç•…ï¼Œèµ„æºç®¡ç†å¾·æ›´å¥½çš„åº”ç”¨ï¼ç»™ä½ è‡ªå·±ä¸€è½®æŒå£°ï¼ åŸæ¥çš„ç›¸å†Œï¼Œè½½å…¥ä¸œè¥¿ä¸€æ¬¡ä¸€ä¸ª æ³¨æ„åˆ°å½“ä½ å®Œæˆæ»šåŠ¨è¡¨è§†å›¾ï¼Œåœ¨å¯è§åŒºåŸŸè¡Œçš„cellçš„å›¾ç‰‡ç«‹å³å¼€å§‹å¤„ç†ã€‚ ä½•å»ä½•ä»ï¼Ÿè¿™é‡Œæ˜¯completed version of the projectã€‚ æ³¨æ„ï¼šæ­¤æ•™ç¨‹å†™äºUpdate 17 April 2015: Updated for Xcode 6.3 and Swift 1.2,ç°åœ¨Swiftæœ€æ–°ç‰ˆæœ¬2.1ä½¿ç”¨Xcode7+ä»¥ä¸Šç¼–è¾‘ä¼šæŠ¥é”™ï¼Œè¿™é‡Œæ‰“åŒ…ä¸€ä¸ªæ–°è¯­æ³•ä¿®æ”¹ç‰ˆcompleted fixed version of the projectã€‚ å‡å¦‚ä½ å®Œæˆè¿™ä¸ªå·¥ç¨‹åº”è¯¥èŠ±æ—¶é—´æ¥çœŸæ­£ç†è§£å®ƒï¼Œæ­å–œä½ ï¼ä½ å¯ä»¥è®¤ä¸ºä½ è‡ªå·±æ˜¯ä¸€ä½æ›´æœ‰ä»·å€¼iOSå¼€å‘è€…äº†æ¯”èµ·åœ¨æ•™ç¨‹åˆšå¼€å§‹çš„æ—¶å€™ï¼å¤§å¤šæ•°å¼€å‘çš„å…¬å¸æ˜¯éå¸¸å¹¸è¿çš„æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªäººæ­£åœ¨çŸ¥é“è¿™ä¸ªä¸œè¥¿ã€‚ å½“æ—¶è¯·å½“å¿ƒ â€“ åƒå¤šå±‚åµŒå¥—çš„blocks,ä¸å¿…è¦çš„ä½¿ç”¨å¤šçº¿ç¨‹å¯èƒ½è®©ä¸€ä¸ªå·¥ç¨‹å˜å¾—éš¾ä»¥ç†è§£å¯¹ç»´æŠ¤ä½ ä»£ç çš„äººæ¥è¯´ã€‚çº¿ç¨‹å¯èƒ½å¼•å…¥ä¸€äº›éš¾ä»¥æ‰æ‘¸çš„bugsï¼Œå°†æ°¸è¿œä¸å‡ºç°çŸ¥é“ä½ ç½‘ç»œéå¸¸æ…¢ï¼Œæˆ–è€…ä»£ç è¿è¡Œåœ¨ä¸€ä¸ªæ›´å¿«ï¼ˆæˆ–æ›´æ…¢ï¼‰çš„è®¾å¤‡ä¸Šï¼Œæˆ–ä¸€ä¸ªä¸åŒæ•°é‡çš„æ ¸çš„èŠ¯ç‰‡ä¸Šæ—¶ã€‚å°å¿ƒæµ‹è¯•ï¼Œå°½é‡ä½¿ç”¨Instrumentsï¼ˆæˆ–è€…ä½ è‡ªå·±çš„è§‚å¯Ÿï¼‰æ¥ç¡®å®šå¼•å…¥å¤šçº¿ç¨‹çœŸçš„æœ‰å¾ˆå¤§æ”¹è¿›ã€‚ ä¸€ä¸ªæœ‰ç”¨çš„ç‰¹å¾ä½¿ç”¨æ“ä½œæ—¶åœ¨è¿™é‡Œæ²¡æ¶‰åŠåˆ°å°±æ˜¯ä¾èµ–ï¼ˆdependencyï¼‰ã€‚ä½ å¯ä»¥ç»™ä¸€ä¸ªæ“ä½œæ·»åŠ ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„æ“ä½œçš„ä¾èµ–ã€‚è¿™ä¸ªæ“ä½œä¸ä¼šå¼€å§‹ç›´åˆ°å®ƒæ‰€æœ‰ä¾èµ–çš„æ“ä½œå®Œæˆæ—¶ã€‚ä¾‹å¦‚ï¼š 123456// MyDownloadOperation is a subclass of NSOperationlet downloadOperation = MyDownloadOperation()// MyFilterOperation is a subclass of NSOperationlet filterOperation = MyFilterOperation()filterOperation.addDependency(downloadOperation) ç§»é™¤ä¾èµ–ï¼š 1filterOperation.removeDependency(downloadOperation) è¿™ä¸ªå·¥ç¨‹æ˜¯å¦èƒ½ä½¿ç”¨ä¾èµ–ç®€åŒ–å‘¢ï¼ŸæŠŠä½ å­¦åˆ°çš„æ–°æŠ€èƒ½ç”¨èµ·æ¥è¯•ä¸€è¯• ï¼š]æœ‰ä»¶éå¸¸é‡è¦çš„äº‹éœ€è¦æ³¨æ„çš„å°±æ˜¯ä¸€ä¸ªä¾èµ–æ“ä½œå°†ä»ç„¶å¯åŠ¨å‡å¦‚å®ƒä¾èµ–çš„æ“ä½œè¢«å–æ¶ˆï¼Œè¿˜æœ‰å®ƒå°†è‡ªç„¶å®Œæˆã€‚ä½ éœ€è¦ç‰¢è®°åœ¨å¿ƒã€‚ å‡å¦‚ä½ æœ‰ä»»ä½•è¯„è®ºæˆ–è€…é—®é¢˜å…³äºè¿™ä¸ªæ•™ç¨‹æˆ–è€…NSOperations,è¯·åŠ Pull requestã€‚ è¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"},{"name":"Swift","slug":"Swift","permalink":"https://blog.wangruofeng007.com/tags/Swift/"}]},{"title":"å¤šçº¿ç¨‹ä¹‹NSOperation","slug":"2016-01-13-duo-xian-cheng-zhi-nsoperation","date":"2016-01-12T21:14:59.000Z","updated":"2024-11-02T03:36:52.395Z","comments":true,"path":"2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsoperation/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsoperation/","excerpt":"","text":"æœ¬æ–‡ç›®å½• å‰è¨€ NSInvocationOperation NSBlokcOperation NSOperationçš„å…¶ä»–ç”¨æ³• è‡ªå®šä¹‰NSOperation å‚è€ƒèµ„æ–™ å‰è¨€1.è™½ç„¶NSThreadä¹Ÿå¯ä»¥å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½†æ˜¯éœ€è¦æˆ‘ä»¬å»ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿˜è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥ã€åŠ é”é—®é¢˜ï¼Œé€ æˆä¸€äº›æ€§èƒ½ä¸Šçš„å¼€é”€ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é…åˆä½¿ç”¨NSOperationå’ŒNSOperationQueueå®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå®ç°æ­¥éª¤å¤§è‡´æ˜¯è¿™æ ·çš„ å…ˆå°†éœ€è¦æ‰§è¡Œçš„æ“ä½œå°è£…åˆ°ä¸€ä¸ªNSOperationå¯¹è±¡ä¸­ ç„¶åå°†NSOperationå¯¹è±¡æ·»åŠ åˆ°NSOperationQueueä¸­ ç³»ç»Ÿä¼šè‡ªåŠ¨å°†NSOperationä¸­å°è£…çš„æ“ä½œæ”¾åˆ°ä¸€æ¡æ–°çº¿ç¨‹ä¸­æ‰§è¡Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸ç”¨è€ƒè™‘çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€åŒæ­¥ã€åŠ é”ç­‰é—®é¢˜ä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚å¾®åšçš„ç²‰ä¸åˆ—è¡¨ï¼š æ¯ä¸€è¡Œçš„å¤´åƒè‚¯å®šè¦ä»æ–°æµªæœåŠ¡å™¨ä¸‹è½½å›¾ç‰‡åæ‰èƒ½æ˜¾ç¤ºçš„ï¼Œè€Œä¸”æ˜¯éœ€è¦å¼‚æ­¥ä¸‹è½½ã€‚è¿™æ—¶å€™ä½ å°±å¯ä»¥æŠŠæ¯ä¸€è¡Œçš„å›¾ç‰‡ä¸‹è½½æ“ä½œå°è£…åˆ°ä¸€ä¸ªNSOperationå¯¹è±¡ä¸­ï¼Œä¸Šé¢æœ‰6è¡Œï¼Œæ‰€ä»¥è¦åˆ›å»º6ä¸ªNSOperationå¯¹è±¡ï¼Œç„¶åæ·»åŠ åˆ°NSOperationQueueä¸­ï¼Œåˆ†åˆ«ä¸‹è½½ä¸åŒçš„å›¾ç‰‡ï¼Œä¸‹è½½å®Œæ¯•åï¼Œå›åˆ°å¯¹åº”çš„è¡Œå°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚ 2 .é»˜è®¤æƒ…å†µä¸‹ï¼ŒNSOperationå¹¶ä¸å…·å¤‡å°è£…æ“ä½œçš„èƒ½åŠ›ï¼Œå¿…é¡»ä½¿ç”¨å®ƒçš„å­ç±»ï¼Œä½¿ç”¨NSOperationå­ç±»çš„æ–¹å¼æœ‰3ç§ï¼š NSInvocationOperation NSBlockOperation è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperationï¼Œå®ç°å†…éƒ¨ç›¸åº”çš„æ–¹æ³• è¿™è®²å…ˆä»‹ç»å¦‚ä½•ç”¨NSOperationå°è£…ä¸€ä¸ªæ“ä½œï¼Œåé¢å†ç»“åˆNSOperationQueueæ¥ä½¿ç”¨ã€‚ NSInvocationOperation12NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run:) object:@&quot;mj&quot;];[operation start]; ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ªNSInvocationOperationå¯¹è±¡ï¼Œå®ƒæ˜¯åŸºäºä¸€ä¸ªå¯¹è±¡å’Œselectoræ¥åˆ›å»ºæ“ä½œ ç¬¬2è¡Œè°ƒç”¨äº†startæ–¹æ³•ï¼Œç´§æ¥ç€ä¼šé©¬ä¸Šæ‰§è¡Œå°è£…å¥½çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨selfçš„run:æ–¹æ³•ï¼Œå¹¶ä¸”å°†@â€mjâ€ä½œä¸ºæ–¹æ³•å‚æ•° è¿™é‡Œè¦æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè°ƒç”¨äº†startæ–¹æ³•åå¹¶ä¸ä¼šå¼€ä¸€æ¡æ–°çº¿ç¨‹å»æ‰§è¡Œæ“ä½œï¼Œè€Œæ˜¯åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œæ“ä½œã€‚åªæœ‰å°†operationæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­ï¼Œæ‰ä¼šå¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚ NSBlockOperationa.åŒæ­¥æ‰§è¡Œä¸€ä¸ªæ“ä½œ12345NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^()&#123; NSLog(@&quot;æ‰§è¡Œäº†ä¸€ä¸ªæ–°çš„æ“ä½œ&quot;); &#125;]; // å¼€å§‹æ‰§è¡Œä»»åŠ¡[operation start]; ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ªNSBlockOperationå¯¹è±¡ï¼Œå®ƒæ˜¯ç”¨ä¸€ä¸ªBlockæ¥å°è£…éœ€è¦æ‰§è¡Œçš„æ“ä½œ ç¬¬2è¡Œè°ƒç”¨äº†startæ–¹æ³•ï¼Œç´§æ¥ç€ä¼šé©¬ä¸Šæ‰§è¡ŒBlockä¸­çš„å†…å®¹ è¿™é‡Œè¿˜æ˜¯åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œæ“ä½œï¼Œå¹¶æ²¡æœ‰å¼‚æ­¥æ‰§è¡Œ b.å¹¶å‘æ‰§è¡Œå¤šä¸ªæ“ä½œ123456789101112131415161718NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^()&#123; NSLog(@&quot;æ‰§è¡Œç¬¬1æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š%@&quot;, [NSThread currentThread]);&#125;];[operation addExecutionBlock:^() &#123; NSLog(@&quot;åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@&quot;, [NSThread currentThread]);&#125;];[operation addExecutionBlock:^() &#123; NSLog(@&quot;åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@&quot;, [NSThread currentThread]);&#125;];[operation addExecutionBlock:^() &#123; NSLog(@&quot;åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@&quot;, [NSThread currentThread]);&#125;];// å¼€å§‹æ‰§è¡Œä»»åŠ¡[operation start]; ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ªNSBlockOperationå¯¹è±¡ åˆ†åˆ«åœ¨ç¬¬5ã€9ã€13è¡Œé€šè¿‡addExecutionBlock:æ–¹æ³•æ·»åŠ äº†æ–°çš„æ“ä½œï¼ŒåŒ…æ‹¬ç¬¬1è¡Œçš„æ“ä½œï¼Œä¸€å…±å°è£…äº†4ä¸ªæ“ä½œ åœ¨ç¬¬18è¡Œè°ƒç”¨startæ–¹æ³•åï¼Œå°±ä¼šå¹¶å‘åœ°æ‰§è¡Œè¿™4ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œ 1 2013-02-02 21:38:46.102 thread[4602:c07] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š&lt;NSThread: 0x7121d50&gt;&#123;name = (null), num = 1&#125; 2 2013-02-02 21:38:46.102 thread[4602:3f03] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š&lt;NSThread: 0x742e1d0&gt;&#123;name = (null), num = 5&#125; 3 2013-02-02 21:38:46.102 thread[4602:1b03] æ‰§è¡Œç¬¬1æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š&lt;NSThread: 0x742de50&gt;&#123;name = (null), num = 3&#125; 4 2013-02-02 21:38:46.102 thread[4602:1303] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š&lt;NSThread: 0x7157bf0&gt;&#123;name = (null), num = 4&#125; å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ“ä½œæ‰€åœ¨çº¿ç¨‹çš„numå€¼éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜æ˜¯ä¸åŒçº¿ç¨‹ NSOperationçš„å…¶ä»–ç”¨æ³•a.å–æ¶ˆæ“ä½œoperationå¼€å§‹æ‰§è¡Œä¹‹å, é»˜è®¤ä¼šä¸€ç›´æ‰§è¡Œæ“ä½œç›´åˆ°å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨cancelæ–¹æ³•ä¸­é€”å–æ¶ˆæ“ä½œ [operation cancel]; b.åœ¨æ“ä½œå®Œæˆååšä¸€äº›äº‹æƒ…å¦‚æœæƒ³åœ¨ä¸€ä¸ªNSOperationæ‰§è¡Œå®Œæ¯•ååšä¸€äº›äº‹æƒ…ï¼Œå°±è°ƒç”¨NSOperationçš„setCompletionBlockæ–¹æ³•æ¥è®¾ç½®æƒ³åšçš„äº‹æƒ… operation.completionBlock = ^() &#123; NSLog(@&quot;æ‰§è¡Œå®Œæ¯•&quot;); &#125;; å½“operationå°è£…çš„æ“ä½œæ‰§è¡Œå®Œæ¯•åï¼Œå°±ä¼šå›è°ƒBlocké‡Œé¢çš„å†…å®¹ è‡ªå®šä¹‰NSOperationå¦‚æœNSInvocationOperationå’ŒNSBlockOperationä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ–°å»ºå­ç±»ç»§æ‰¿NSOperationï¼Œå¹¶æ·»åŠ ä»»ä½•éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚å¦‚æœåªæ˜¯ç®€å•åœ°è‡ªå®šä¹‰NSOperationï¼Œåªéœ€è¦é‡è½½-(void)mainè¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æ·»åŠ éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚ ä¸‹é¢å†™ä¸ªå­ç±»DownloadOperationæ¥ä¸‹è½½å›¾ç‰‡ a.ç»§æ‰¿NSOperationï¼Œé‡å†™mainæ–¹æ³•DownloadOperation.h 12345678910111213141516#import &lt;Foundation/Foundation.h&gt;@protocol DownloadOperationDelegate;@interface DownloadOperation : NSOperation// å›¾ç‰‡çš„urlè·¯å¾„@property (nonatomic, copy) NSString *imageUrl;// ä»£ç†@property (nonatomic, assign) id&lt;DownloadOperationDelegate&gt; delegate;- (id)initWithUrl:(NSString *)url delegate:(id&lt;DownloadOperationDelegate&gt;)delegate;@end// å›¾ç‰‡ä¸‹è½½çš„åè®®@protocol DownloadOperationDelegate &lt;NSObject&gt;- (void)downloadFinishWithImage:(UIImage *)image;@end DownloadOperation.m 12345678910111213141516171819202122232425262728#import &quot;DownloadOperation.h&quot;@implementation DownloadOperation@synthesize delegate = _delegate;@synthesize imageUrl = _imageUrl;// åˆå§‹åŒ–- (id)initWithUrl:(NSString *)url delegate:(id&lt;DownloadOperationDelegate&gt;)delegate &#123; if (self = [super init]) &#123; self.imageUrl = url; self.delegate = delegate; &#125; return self;&#125;// é‡Šæ”¾å†…å­˜- (void)dealloc &#123; [super dealloc]; [_imageUrl release];&#125;// æ‰§è¡Œä¸»ä»»åŠ¡- (void)main &#123; // æ–°å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå¦‚æœæ˜¯å¼‚æ­¥æ‰§è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®åˆ°ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ±  @autoreleasepool &#123; // .... &#125;&#125;@end åœ¨ç¬¬22è¡Œé‡è½½äº†mainæ–¹æ³•ï¼Œç­‰ä¼šå°±æŠŠä¸‹è½½å›¾ç‰‡çš„ä»£ç å†™åˆ°è¿™ä¸ªæ–¹æ³•ä¸­ å¦‚æœè¿™ä¸ªDownloadOperationæ˜¯åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´mainæ–¹æ³•åœ¨å¼‚æ­¥çº¿ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œæ‰€ä»¥åœ¨ç¬¬24è¡Œåˆ›å»ºäº†ä¸€ä¸ªå±äºå½“å‰çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ±  b.æ­£ç¡®å“åº”å–æ¶ˆäº‹ä»¶ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªNSOperationå¼€å§‹æ‰§è¡Œä¹‹åï¼Œä¼šä¸€ç›´æ‰§è¡Œä»»åŠ¡åˆ°ç»“æŸï¼Œå°±æ¯”å¦‚ä¸Šé¢çš„DownloadOperationï¼Œé»˜è®¤ä¼šæ‰§è¡Œå®Œmainæ–¹æ³•ä¸­çš„æ‰€æœ‰ä»£ç  NSOperationæä¾›äº†ä¸€ä¸ªcancelæ–¹æ³•ï¼Œå¯ä»¥å–æ¶ˆå½“å‰çš„æ“ä½œã€‚ å¦‚æœæ˜¯è‡ªå®šä¹‰NSOperationçš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†è¿™ä¸ªå–æ¶ˆäº‹ä»¶ã€‚æ¯”å¦‚ï¼Œä¸€æ—¦è°ƒç”¨äº†cancelæ–¹æ³•ï¼Œåº”è¯¥é©¬ä¸Šç»ˆæ­¢mainæ–¹æ³•çš„æ‰§è¡Œï¼Œå¹¶åŠæ—¶å›æ”¶ä¸€äº›èµ„æºã€‚ å¤„ç†å–æ¶ˆäº‹ä»¶çš„å…·ä½“åšæ³•æ˜¯ï¼šåœ¨mainæ–¹æ³•ä¸­å®šæœŸåœ°è°ƒç”¨isCancelledæ–¹æ³•æ£€æµ‹æ“ä½œæ˜¯å¦å·²ç»è¢«å–æ¶ˆï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å¦è°ƒç”¨äº†cancelæ–¹æ³•ï¼Œå¦‚æœè¿”å›YESï¼Œè¡¨ç¤ºå·²å–æ¶ˆï¼Œåˆ™ç«‹å³è®©mainæ–¹æ³•è¿”å›ã€‚ ä»¥ä¸‹åœ°æ–¹å¯èƒ½éœ€è¦è°ƒç”¨isCancelledæ–¹æ³•: åœ¨æ‰§è¡Œä»»ä½•å®é™…çš„å·¥ä½œä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯åœ¨mainæ–¹æ³•çš„å¼€å¤´ã€‚å› ä¸ºå–æ¶ˆå¯èƒ½å‘ç”Ÿåœ¨ä»»ä½•æ—¶å€™ï¼Œç”šè‡³åœ¨operationæ‰§è¡Œä¹‹å‰ã€‚ æ‰§è¡Œäº†ä¸€æ®µè€—æ—¶çš„æ“ä½œä¹‹åä¹Ÿéœ€è¦æ£€æµ‹æ“ä½œæ˜¯å¦å·²ç»è¢«å–æ¶ˆ 1234567891011121314151617181920212223242526272829- (void)main &#123; // æ–°å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå¦‚æœæ˜¯å¼‚æ­¥æ‰§è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®åˆ°ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ±  @autoreleasepool &#123; if (self.isCancelled) return; // è·å–å›¾ç‰‡æ•°æ® NSURL *url = [NSURL URLWithString:self.imageUrl]; NSData *imageData = [NSData dataWithContentsOfURL:url]; if (self.isCancelled) &#123; url = nil; imageData = nil; return; &#125; // åˆå§‹åŒ–å›¾ç‰‡ UIImage *image = [UIImage imageWithData:imageData]; if (self.isCancelled) &#123; image = nil; return; &#125; if ([self.delegate respondsToSelector:@selector(downloadFinishWithImage:)]) &#123; // æŠŠå›¾ç‰‡æ•°æ®ä¼ å›åˆ°ä¸»çº¿ç¨‹ [(NSObject *)self.delegate performSelectorOnMainThread:@selector(downloadFinishWithImage:) withObject:image waitUntilDone:NO]; &#125; &#125;&#125; åœ¨ç¬¬4è¡Œmainæ–¹æ³•çš„å¼€å¤´å°±å…ˆåˆ¤æ–­operationæœ‰æ²¡æœ‰è¢«å–æ¶ˆã€‚å¦‚æœè¢«å–æ¶ˆäº†ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦å¾€ä¸‹æ‰§è¡Œäº† ç»è¿‡ç¬¬8è¡Œä¸‹è½½å›¾ç‰‡åï¼Œåœ¨ç¬¬10è¡Œä¹Ÿéœ€è¦åˆ¤æ–­æ“ä½œæœ‰æ²¡æœ‰è¢«å–æ¶ˆ æ€»ä¹‹ï¼Œæ‰§è¡Œäº†ä¸€æ®µæ¯”è¾ƒè€—æ—¶çš„æ“ä½œä¹‹åï¼Œéƒ½éœ€è¦åˆ¤æ–­æ“ä½œæœ‰æ²¡æœ‰è¢«å–æ¶ˆ å›¾ç‰‡ä¸‹è½½å®Œæ¯•åï¼Œåœ¨ç¬¬26è¡Œå°†å›¾ç‰‡æ•°æ®ä¼ é€’ç»™äº†ä»£ç†(delegate)å¯¹è±¡ å‚è€ƒèµ„æ–™ NSHipster çš„NSOperation é›·çº¯é”‹çš„åšå®¢çš„ã€ŠiOS å¹¶å‘ç¼–ç¨‹ä¹‹ Operation Queuesã€‹ objcçš„å¹¶å‘ç¼–ç¨‹æŒ‡å—ã€ŠConcurrent Programmingã€‹ StackOverflow: NSOperation vs. Grand Central Dispatch Blog: When to use NSOperation vs. GCD å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://blog.wangruofeng007.com/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"iOSä¸­çš„è§¦æ‘¸äº‹ä»¶å’Œæ‰‹åŠ¿å¤„ç†","slug":"2016-01-13-ioszhong-de-hong-mo-shi-jian-he-shou-shi-chu-li","date":"2016-01-12T21:05:09.000Z","updated":"2024-11-02T03:36:52.398Z","comments":true,"path":"2016/01/13/2016-01-13-ioszhong-de-hong-mo-shi-jian-he-shou-shi-chu-li/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-ioszhong-de-hong-mo-shi-jian-he-shou-shi-chu-li/","excerpt":"","text":"iOSè§¦æ‘¸äº‹ä»¶åˆ†ç±» è§¦æ‘¸äº‹ä»¶ åŠ é€Ÿäº‹ä»¶ è¿œç¨‹äº‹ä»¶ è°èƒ½å¤„ç†è§¦æ‘¸äº‹ä»¶?å“åº”è€…å¯¹è±¡ åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶,åªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æ¥æ”¶å¹¶å¤„ç†äº‹ä»¶.æˆ‘ä»¬ç§°ä¹‹ä¸ºå“åº”è€…å¯¹è±¡. UIApplication,UIViewController,UIViewéƒ½ç»§æ‰¿è‡ªUIResponder,å› æ­¤å®ƒä»¬éƒ½æ˜¯å“åº”è€…å¯¹è±¡,éƒ½èƒ½å¤Ÿæ¥æ”¶å¹¶å¤„ç†äº‹ä»¶. UIResponderUIResponderå†…éƒ¨æä¾›äº†æ–¹æ³•æ¥å¤„ç†äº‹ä»¶ è§¦æ‘¸äº‹ä»¶ ä¸€æ¬¡å®Œæˆçš„è§¦æ‘¸è¿‡ç¨‹,ä¼šç»å†3ä¸ªçŠ¶æ€; UIViewçš„è§¦æ‘¸äº‹ä»¶å¤„ç† 1.ä¸€æ ¹æˆ–å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸view,ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•: - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; &#x2F;&#x2F;è§¦æ‘¸å¼€å§‹ 2.ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰ - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event; &#x2F;&#x2F;è§¦æ‘¸ç§»åŠ¨ 3.ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³• - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; &#x2F;&#x2F;è§¦æ‘¸ç»“æŸ 4.è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶ï¼ˆä¾‹å¦‚ç”µè¯å‘¼å…¥ ï¼‰ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³• - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; &#x2F;&#x2F;è§¦æ‘¸å–æ¶ˆ(å¯èƒ½ä¼šç»å†) 4ä¸ªè§¦æ‘¸äº‹ä»¶çš„å¤„ç†æ–¹æ³•ä¸­ï¼Œéƒ½æœ‰ NSSet *touches å’Œ UIEvent *event ä¸¤ä¸ªå‚æ•°: ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ4ä¸ªè§¦æ‘¸æ–¹æ³•éƒ½æ˜¯åŒä¸€ä¸ªeventå‚æ•° å¦‚æœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡ touchesBegan:withEvent: æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€ä¸¤ä¸ªUITouchå¯¹è±¡ï¼› å¦‚æœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€ååˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨ä¸¤æ¬¡ touchesBegan:withEvent:æ–¹æ³•ï¼Œ å¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ï¼› æ ¹æ®touchesä¸­UITouchä¸ªæ•°å¯ä»¥åˆ¤æ–­å‡ºä½¿å•ç‚¹è§¦æ‘¸è¿˜æ˜¯å¤šç‚¹è§¦æ‘¸ æç¤ºï¼štouchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ã€‚ åŠ é€Ÿè®¡äº‹ä»¶ (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event; (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event; (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event; è¿œç¨‹æ§åˆ¶äº‹ä»¶ - (void)remoteControlReceivedWithEvent:(UIEvent *)event; UITouchå½“ç”¨æˆ·ç”¨ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸æ‰‹æŒ‡ç›¸å…³è”çš„UITouchå¯¹è±¡ï¼›ä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡UITouchçš„ä½œç”¨: ä¿å­˜è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µï¼› å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡çš„è§¦æ‘¸ä½ç½®ï¼› å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„UITouchå¯¹è±¡ã€‚ æç¤ºï¼šiPhoneå¼€å‘ä¸­ï¼Œè¦é¿å…ä½¿ç”¨åŒå‡»äº‹ä»¶ã€‚ UITouchçš„å±æ€§:è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£: 1@property(nonatomic,readonly,retain) UIWindow *window; è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾ 1@property(nonatomic,readonly,retain) UIView *view; çŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šåœ°ç‚¹å‡» 1@property(nonatomic,readonly) NSUInteger tapCount; è®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ 1@property(nonatomic,readonly) NSTimeInterval timestamp; å½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€ 12345678@property(nonatomic,readonly) UITouchPhase phase;/*UITouchPhaseæ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼ŒåŒ…å«ï¼šUITouchPhaseBeganï¼ˆè§¦æ‘¸å¼€å§‹ï¼‰UITouchPhaseMovedï¼ˆæ¥è§¦ç‚¹ç§»åŠ¨ï¼‰UITouchPhaseStationaryï¼ˆæ¥è§¦ç‚¹æ— ç§»åŠ¨ï¼‰UITouchPhaseEndedï¼ˆè§¦æ‘¸ç»“æŸï¼‰UITouchPhaseCancelledï¼ˆè§¦æ‘¸å–æ¶ˆï¼‰*/ UITouchçš„æ–¹æ³•ï¼š 1- (CGPoint)locationInView:(UIView *)view; 1.è¿”å›å€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®ï¼› 2.è¿™é‡Œè¿”å›çš„ä½ç½®æ˜¯é’ˆå¯¹viewåæ ‡ç³»çš„,ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼ˆ0ï¼Œ0ï¼‰ï¼‰ï¼› 3.è°ƒç”¨æ—¶ä¼ å…¥çš„viewå‚æ•°ä¸ºnil çš„è¯ï¼Œè¿”å›çš„æ˜¯è§¦æ‘¸ç‚¹åœ¨UIWindowçš„ä½ç½®ã€‚ 1- (CGPoint)previousLocationInView:(UIView *)view; è¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®ï¼› UIEvent æ¯äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªUIEventå¯¹è±¡ï¼› UIEvent:ç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»å‹ã€‚ å¸¸è§å±æ€§ï¼š1.äº‹ä»¶ç±»å‹ 123456789101112131415161718192021222324252627@property(nonatomic,readonly) UIEventType type;@property(nonatomic,readonly) UIEventSubtype subtype;typedefNS_ENUM(NSInteger, UIEventType) &#123; UIEventTypeTouches, UIEventTypeMotion, UIEventTypeRemoteControl,&#125;;typedefNS_ENUM(NSInteger, UIEventSubtype) &#123; // available in iPhone OS 3.0 UIEventSubtypeNone = 0, // for UIEventTypeMotion, available in iPhone OS 3.0 UIEventSubtypeMotionShake = 1, // for UIEventTypeRemoteControl, available in iOS 4.0 UIEventSubtypeRemoteControlPlay = 100, UIEventSubtypeRemoteControlPause = 101, UIEventSubtypeRemoteControlStop = 102, UIEventSubtypeRemoteControlTogglePlayPause = 103, UIEventSubtypeRemoteControlNextTrack = 104, UIEventSubtypeRemoteControlPreviousTrack = 105, UIEventSubtypeRemoteControlBeginSeekingBackward = 106, UIEventSubtypeRemoteControlEndSeekingBackward = 107, UIEventSubtypeRemoteControlBeginSeekingForward = 108, UIEventSubtypeRemoteControlEndSeekingForward = 109,&#125;; 2.äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´ 1@property(nonatomic,readonly) NSTimeInterval timestamp; UIEventè¿˜æä¾›äº†ç›¸åº”çš„æ–¹æ³•å¯ä»¥è·å¾—åœ¨æŸä¸ªviewä¸Šé¢çš„è§¦æ‘¸å¯¹è±¡ï¼ˆUITouchï¼‰ã€‚ è§¦æ‘¸äº‹ä»¶çš„äº§ç”Ÿï¼š å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼› UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ï¼› ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ§ä»¶æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼› æ‰¾åˆ°åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æ§ä»¶çš„touchesæ–¹æ³•æ¥åšå…·ä½“çš„äº‹ä»¶å¤„ç†ã€‚ è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’ï¼š è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»çˆ¶æ§ä»¶ä¼ é€’åˆ°å­æ§ä»¶ï¼› å¦‚æœçˆ¶æ§ä»¶ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æ§ä»¶å°±ä¸å¯èƒ½æ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ã€‚ UIViewä¸æ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ:ä¸æ¥å—ç”¨æˆ·äº¤äº’ ï¼š userInteractionEnable &#x3D; NO; éšè— ï¼šhidden &#x3D; YES; é€æ˜ï¼šalpha &#x3D; 0.0 ~ 0.01 æç¤ºï¼šUIImageViewçš„userInteractionEnableé»˜è®¤å°±æ˜¯NOï¼Œå› æ­¤UIImageViewä»¥åŠå®ƒçš„å­æ§ä»¶é»˜è®¤æ˜¯ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ã€‚ è§¦æ‘¸äº‹ä»¶å¤„ç†çš„è¯¦ç»†è¿‡ç¨‹ï¼š ç”¨æˆ·ç‚¹å‡»å±å¹•åäº§ç”Ÿçš„ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œç»è¿‡ä¸€äº›åˆ—çš„ä¼ é€’è¿‡ç¨‹åï¼Œä¼šæ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æ§ä»¶æ¥å¤„ç†è¿™ä¸ªäº‹ä»¶ æ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨æ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç† touchesBeganâ€¦ touchesMovedâ€¦ touchedEndedâ€¦ è¿™äº›touchesæ–¹æ³•çš„é»˜è®¤åšæ³•æ˜¯å°†äº‹ä»¶é¡ºç€å“åº”è€…é“¾æ¡å‘ä¸Šä¼ é€’ï¼Œå°†äº‹ä»¶äº¤ç»™ä¸Šä¸€ä¸ªå“åº”è€…è¿›è¡Œå¤„ç† å“åº”è€…é“¾çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ï¼š å¦‚æœviewçš„æ§åˆ¶å™¨å­˜åœ¨ï¼Œå°±ä¼ é€’ç»™æ§åˆ¶å™¨ï¼›å¦‚æœæ§åˆ¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶ä¼ é€’ç»™å®ƒçš„çˆ¶è§†å›¾ï¼› åœ¨è§†å›¾å±‚æ¬¡ç»“æ„æœ€é¡¶çº§çš„è§†å›¾ï¼Œå¦‚æœä¹Ÿä¸èƒ½å¤„ç†æ”¶åˆ°çš„äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™windowå¯¹è±¡è¿›è¡Œå¤„ç†ã€‚ å¦‚æœwindowå¯¹è±¡ä¹Ÿä¸å¤„ç†ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™UIApplicationå¯¹è±¡ï¼› å¦‚æœUIApplicationä¹Ÿä¸èƒ½å¤„ç†è¯¥äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒ ç›‘å¬è§¦æ‘¸äº‹ä»¶çš„åšæ³•å¦‚æœæƒ³ç›‘å¬ä¸€ä¸ªviewä¸Šé¢çš„è§¦æ‘¸äº‹ä»¶ï¼Œä¹‹å‰çš„åšæ³•æ˜¯ï¼š è‡ªå®šä¹‰ä¸€ä¸ªviewï¼› å®ç°viewçš„touchesæ–¹æ³•ï¼Œåœ¨æ–¹æ³•å†…éƒ¨å®ç°å…·ä½“å¤„ç†ä»£ç ã€‚ é€šè¿‡touchesæ–¹æ³•ç›‘å¬viewè§¦æ‘¸äº‹ä»¶ï¼Œæœ‰å¾ˆæ˜æ˜¾çš„å‡ ä¸ªç¼ºç‚¹ï¼š å¿…é¡»å¾—è‡ªå®šä¹‰viewï¼› ç”±äºæ˜¯åœ¨viewå†…éƒ¨çš„touchesæ–¹æ³•ä¸­ç›‘å¬è§¦æ‘¸äº‹ä»¶ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— æ³•è®©å…¶ä»–å¤–ç•Œå¯¹è±¡ç›‘å¬viewçš„è§¦æ‘¸äº‹ä»¶ï¼› ä¸å®¹æ˜“åŒºåˆ†ç”¨æˆ·çš„å…·ä½“æ‰‹åŠ¿è¡Œä¸ºã€‚ iOS 3.2ä¹‹åï¼Œè‹¹æœæ¨å‡ºäº†æ‰‹åŠ¿è¯†åˆ«åŠŸèƒ½ï¼ˆGesture Recognizerï¼‰,åœ¨è§¦æ‘¸äº‹ä»¶å¤„ç†æ–¹é¢ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘è€…çš„å¼€å‘éš¾åº¦ã€‚ UIGestureRescognizerä¸ºäº†å®Œæˆæ‰‹åŠ¿è¯†åˆ«ï¼Œå¿…é¡»å€ŸåŠ©äºæ‰‹åŠ¿è¯†åˆ«å™¨ï¼šUIGestureRecognizer ã€‚ åˆ©ç”¨UIGestureRecognizer,èƒ½è½»æ¾è¯†åˆ«ç”¨æˆ·åœ¨æŸä¸ªviewä¸Šé¢åšçš„ä¸€äº›å¸¸è§æ‰‹åŠ¿ã€‚ UIGestureRecognizeræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰çš„æ‰‹åŠ¿åŸºæœ¬è¡Œä¸ºï¼Œä½¿ç”¨å®ƒçš„å­ç±»æ‰èƒ½å¤„ç†å…·ä½“çš„æ‰‹åŠ¿ UITapGestureRecognizer(æ•²å‡») UIPinchGestureRecognizer(æåˆï¼Œç”¨äºç¼©æ”¾) UIPanGestureRecognizer(æ‹–æ‹½) UISwipeGestureRecognizer(è½»æ‰«) UIRotationGestureRecognizer(æ—‹è½¬) UILongPressGestureRecognizer(é•¿æŒ‰) æ¯ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨çš„ç”¨æ³•éƒ½å·®ä¸å¤šï¼Œæ¯”å¦‚UITapGestureRecognizerçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹: åˆ›å»ºæ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡ï¼› UITapGestureRecognizer *tap &#x3D; [[UITapGestureRecognizer alloc] init]; è®¾ç½®æ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡çš„å…·ä½“å±æ€§ï¼› // è¿ç»­æ•²å‡»2æ¬¡ tap.numberOfTapsRequired = 2; // éœ€è¦2æ ¹æ‰‹æŒ‡ä¸€èµ·æ•²å‡» tap.numberOfTouchesRequired = 2; æ·»åŠ æ‰‹åŠ¿è¯†åˆ«å™¨åˆ°å¯¹åº”çš„viewä¸Š [self.iconView addGestureRecognizer:tap]; ç›‘å¬æ‰‹åŠ¿çš„è§¦å‘ [tap addTarget:self action:@selector(tapIconView:)]; æ‰‹åŠ¿è¯†åˆ«çš„çŠ¶æ€ 12345678910111213141516typedef NS_ENUM(NSInteger, UIGestureRecognizerState) &#123; // æ²¡æœ‰è§¦æ‘¸äº‹ä»¶å‘ç”Ÿï¼Œæ‰€æœ‰æ‰‹åŠ¿è¯†åˆ«çš„é»˜è®¤çŠ¶æ€ UIGestureRecognizerStatePossible, // ä¸€ä¸ªæ‰‹åŠ¿å·²ç»å¼€å§‹ä½†å°šæœªæ”¹å˜æˆ–è€…å®Œæˆæ—¶ UIGestureRecognizerStateBegan, // æ‰‹åŠ¿çŠ¶æ€æ”¹å˜ UIGestureRecognizerStateChanged, // æ‰‹åŠ¿å®Œæˆ UIGestureRecognizerStateEnded, // æ‰‹åŠ¿å–æ¶ˆï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateCancelled, // æ‰‹åŠ¿å¤±è´¥ï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateFailed, // è¯†åˆ«åˆ°æ‰‹åŠ¿è¯†åˆ« UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded&#125;; å‚è€ƒèµ„æ–™ï¼šå‚²é£å‡Œå¯’çš„åšå®¢ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"äº‹ä»¶å¤„ç†","slug":"äº‹ä»¶å¤„ç†","permalink":"https://blog.wangruofeng007.com/tags/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/"}]},{"title":"iOSé‡Œç¨‹ç¢‘äº‹ä»¶","slug":"2016-01-13-iosli-cheng-bei-shi-jian","date":"2016-01-12T20:46:48.000Z","updated":"2024-11-02T03:36:52.398Z","comments":true,"path":"2016/01/13/2016-01-13-iosli-cheng-bei-shi-jian/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-iosli-cheng-bei-shi-jian/","excerpt":"","text":"è®°å½•iOSå„ç§é‡è¦é‡Œç¨‹ç¢‘äº‹ä»¶ ç§æœ‰æˆå‘˜å˜é‡çš„å®ç°1.0æ—¶ä»£ï¼Œåœ¨.hæ–‡ä»¶é‡‡ç”¨@privateå…³é”®è¯ 1234@interface ViewController : UIViewController &#123; @private NSInteger _value;&#125; 2.0æ—¶ä»£ é€šè¿‡åœ¨.mæ–‡ä»¶é€šè¿‡åŒ¿åCategory 12345@interface ViewController ()@property (nonatomic) NSInteger value;@end 3.0æ—¶ä»£ 2013 å¹´çš„ WWDC å…è®¸åœ¨ .m çš„ @implementation ä¸­ 123@implementation ViewController &#123; NSInteger _value;&#125; ARCæ¨å‡º2011 è‡ªåŠ¨ç”Ÿæˆgetterå’Œsetteræ–¹æ³•çš„@synthesize2012 AutoLayoutå¼•å…¥iOS 6.0 Swift WWDC 1.0 ç‰ˆæœ¬å‘å¸ƒ â€“ 2014.06.02 Swift 2.0å‘å¸ƒ â€“ 2015.08.07 Open Source â€“ 2015.12.04 Size ClassesiOS 8.0 BlocksMac OS X 10.6 â€œSnow Leopardâ€ and iOS 4.0 Objective-C 2.0At the 2006 Worldwide Developers Conference release of Objective-C 2.0 Watch OS2015.05.21 iOS API DifferencesiOS 2.1 to iOS 2.2 API DifferencesAdded frameworks: AVFoundation iOS 2.2 to iOS 3.0 API DifferencesAdded frameworks: CoreData ExternalAccessory GameKit MapKit MessageUI MobileCoreServices StoreKit iOS 3.2 to iOS 4.0 API DifferencesAdded frameworks: Accelerate AssetsLibrary CoreMedia CoreMotion CoreTelephony CoreVideo EventKit EventKitUI iAd ImageIO QuickLook iOS 4.3 to iOS 5.0 API DifferencesAdded frameworks Accounts CoreBluetooth CoreImage GLKit GSS NewsstandKit Twitter 5.1 to iOS 6.0 API DifferencesAdded frameworks AdSupport MediaToolbox PassKit Social 6.1 to iOS 7.0 API DifferencesAdded frameworks GameController JavaScriptCore MediaAccessibility MultipeerConnectivity SafariServices SpriteKit iOS 7.1 to iOS 8.0 API DifferencesAdded frameworks Accelerate Accounts AddressBook AddressBookUI AudioToolbox AudioUnit AVFoundation AVKit (Added) CFNetwork CloudKit (Added) CoreAudio CoreAudioKit (Added) CoreAuthentication (Added) CoreBluetooth CoreData CoreFoundation CoreImage CoreLocation CoreMedia CoreMotion CoreText CoreVideo EventKit EventKitUI ExternalAccessory Foundation GameController GameKit GLKit GSS HealthKit (Added) HomeKit (Added) iAd ImageIO IOKit JavaScriptCore LocalAuthentication (Added) MapKit MediaAccessibility MediaPlayer MessageUI Metal (Added) MobileCoreServices MultipeerConnectivity NetworkExtension (Added) NewsstandKit NotificationCenter (Added) OpenGLES PassKit Photos (Added) PhotosUI (Added) PushKit (Added) QuartzCore QuickLook SceneKit (Added) Security Social SpriteKit StoreKit UIKit VideoToolbox WebKit (Added) iOS 8.3 to iOS 9.0 API DifferencesAdded frameworks Objective-C &#x2F;usr&#x2F;include Accelerate Accounts AddressBook AddressBookUI AssetsLibrary AudioToolbox AudioUnit AVFoundation AVKit CFNetwork CloudKit Contacts (Added) ContactsUI (Added) CoreAudio CoreAudioKit CoreBluetooth CoreData CoreFoundation CoreGraphics CoreImage CoreLocation CoreMedia CoreMIDI CoreMotion CoreSpotlight (Added) CoreTelephony CoreText CoreVideo EventKit EventKitUI ExternalAccessory Foundation GameController GameKit GameplayKit (Added) GLKit GSS HealthKit HomeKit iAd ImageIO JavaScriptCore LocalAuthentication MapKit MediaPlayer MediaToolbox MessageUI Metal MetalKit (Added) MetalPerformanceShaders (Added) MobileCoreServices ModelIO (Added) MultipeerConnectivity NetworkExtension NewsstandKit OpenAL PassKit Photos PushKit QuartzCore QuickLook ReplayKit (Added) SafariServices SceneKit Security SpriteKit StoreKit SystemConfiguration UIKit VideoToolbox WatchConnectivity (Added) WatchKit WebKit å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"}]},{"title":"ä¼˜é›…å¤„ç†UIImageå›¾ç‰‡æ—‹è½¬","slug":"2016-01-13-you-ya-chu-li-uiimagetu-pian-xuan-zhuan","date":"2016-01-12T20:38:49.000Z","updated":"2024-11-02T03:36:52.402Z","comments":true,"path":"2016/01/13/2016-01-13-you-ya-chu-li-uiimagetu-pian-xuan-zhuan/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-you-ya-chu-li-uiimagetu-pian-xuan-zhuan/","excerpt":"","text":"UIImagæ„é€ æ–¹å¼UIImagæ„é€ æ–¹å¼å¤§è‡´æœ‰4ç§æ–¹å¼ ä»æœ¬åœ°bundleä¸­åŠ è½½ imageNamed:ï¼Œä¼ å…¥ä¸€ä¸ªbundleçš„æ–‡ä»¶åå³å¯ ä»æœ¬åœ°ä¸€ä¸ªæ–‡ä»¶è·¯å¾„è¯»å– imageWithContentsOfFile:ï¼Œéœ€è¦ä¼ ä¸€ä¸ªæ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„path é€šè¿‡äºŒè¿›åˆ¶æ•°æ®NSDataæ¥åˆ›å»ºimageWithData: é€šè¿‡ä¸€ä¸ªCoreGraphicsçš„CGImageRefæ¥åˆ›å»ºï¼ŒinitWithCGImage: é€šè¿‡ä¸€ä¸ªCoreImageçš„CIImageæ¥åˆ›å»ºinitWithCIImage é€šè¿‡æŸ¥é˜…Appleå®˜ç½‘æ–‡æ¡£æˆ‘ä»¬å‘ç°æœ‰2ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼Œä»Šå¤©å°±æ¥ä¸€æ¢ç©¶ç«Ÿ 12345+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0);+ (UIImage *)imageWithCIImage:(CIImage *)ciImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(6_0);- (instancetype)initWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0);- (instancetype)initWithCIImage:(CIImage *)ciImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(6_0); 2ä¸ªç±»æ–¹æ³•2ä¸ªå®ä¾‹æ–¹æ³•éƒ½æ˜¯ç±»ä¼¼ï¼Œè¿™é‡Œä»¥CGImageRefä¸ºä¾‹ 1+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0); æ–°å»ºçš„Xcodeå·¥ç¨‹é€‰æ‹©single Application åœ¨storyboardä¸­æ‹–ä¸€ä¸ªUIImageViewè®¾ç½®å®ƒæ°´å¹³å‚ç›´å±…ä¸­å¯¹é½ï¼Œå®½å¸¦é«˜åº¦éšä¾¿è®¾ä¸€ä¸ªå€¼ä¸è¦å¤ªå¤§å°±è¡Œï¼Œè®¾ç½®UIImageViewçš„contentModeä¸ºAspect Fitæ–¹ä¾¿æŸ¥çœ‹ä»¥å…å˜å½¢ åœ¨UIImageViewä¸‹å‘æ”¾ä¸€ä¸ªUIButtonæ§ä»¶æ–¹ä¾¿åé¢å¥½å¯¹å›¾ç‰‡è¿›è¡Œæ—‹è½¬æ“ä½œ åœ¨viewControllerä¸­å»ºç«‹ä¸€ä¸ªUIImageViewå¼•ç”¨,æ‹‰å‡ºä¸€ä¸ªrotateæŒ‰é’®çš„IBAction ç°åœ¨å¤§æ¦‚ç•Œé¢å¤§æ¦‚è¿™æ · ä¸‹é¢æˆ‘ä»¬å®ç°- (IBAction)rotateImage:(id)sender &#123;&#125;è¿™ä¸ªæ–¹æ³• åœ¨è¿™é‡Œæˆ‘ä»¬æƒ³é€šè¿‡ç‚¹å‡»æŒ‰é’®å®ç°å›¾ç‰‡æ—‹è½¬ ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æˆ‘ä»¬ä½¿ç”¨Categoryçš„æ–¹å¼å®ç° æ–°å»ºä¸€ä¸ªUIImageçš„åˆ†ç±»å–åå«Rotate è¿™é‡Œéœ€è¦ä¼ ä¸€å¼ è¦å¤„ç†çš„å›¾ç‰‡å’Œä¸€ä¸ªå¾…å¤„ç†æˆçš„å›¾ç‰‡æ–¹å‘ 12+ (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation; 123456789101112131415161718192021222324252627282930313233343536373839404142434445 + (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation&#123; UIImage *newImage = [UIImage imageWithCGImage:oldImage.CGImage scale:1 orientation:orientation]; NSString *orientationStr = nil; switch (orientation) &#123; case UIImageOrientationUp: &#123; orientationStr = @&quot;UIImageOrientationUp&quot;; break; &#125; case UIImageOrientationDown: &#123; orientationStr = @&quot;UIImageOrientationDown&quot;; break; &#125; case UIImageOrientationLeft: &#123; orientationStr = @&quot;UIImageOrientationLeft&quot;; break; &#125; case UIImageOrientationRight: &#123; orientationStr = @&quot;UIImageOrientationRight&quot;; break; &#125; case UIImageOrientationUpMirrored: &#123; orientationStr = @&quot;UIImageOrientationUpMirrored&quot;; break; &#125; case UIImageOrientationDownMirrored: &#123; orientationStr = @&quot;UIImageOrientationDownMirrored&quot;; break; &#125; case UIImageOrientationLeftMirrored: &#123; orientationStr = @&quot;UIImageOrientationLeftMirrored&quot;; break; &#125; case UIImageOrientationRightMirrored: &#123; orientationStr = @&quot;UIImageOrientationRightMirrored&quot;; break; &#125; &#125; NSLog(@&quot;current orientation: %@&quot;,orientationStr); return newImage;&#125; åœ¨buttonç‚¹å‡»äº‹ä»¶è§¦å‘æ—¶çš„è¿™æ ·ä½¿ç”¨ 12345678- (IBAction)rotateImage:(id)sender &#123; UIImage *oldImage = self.imgView.image; UIImage *rotatedImage = [UIImage rotateImage:oldImage orientation:UIImageOrientationLeft]; self.imgView.image = rotatedImage;&#125; ç‚¹å‡»æŒ‰é’®æµ‹è¯•å‘ç°ç¬¬ä¸€æ¬¡æ²¡é—®é¢˜ï¼Œä½†æ˜¯é‡é€¢ç‚¹å‡»æ— æ•ˆåŸæ¥+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientationæ–¹æ³•æ‰§è¡ŒåŸç†æ˜¯æ‰§è¡Œå‰é€šè¿‡@property(nonatomic,readonly) UIImageOrientation imageOrientation;æ¥å£å…ˆåˆ¤æ–­å½“å‰å›¾ç‰‡çš„æ–¹å‘æ˜¯å¦ä¸ºå°†è¦æ—‹è½¬çš„æ–¹å‘ï¼Œå¦‚æœæ˜¯å°±ç›´æ¥è¿”å›ä¸åšå¤„ç†ï¼Œå¦‚æœä¸æ˜¯å†ä½œæ—‹è½¬å¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰å®é™…ä¸Šæ—‹è½¬imageçš„æ•°æ®ï¼Œåªæ˜¯ç”¨ä¸€ä¸ªæšä¸¾æ ‡è®°æ—‹è½¬çš„çŠ¶æ€ å¦‚æœæˆ‘ä»¬æƒ³æ¯æ¬¡æ—‹è½¬éœ€è¦ç›´æ¥æ”¹å˜åŸå§‹imageçš„æ•°æ®è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿåœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡CGBitmapContext,ä½¿ç”¨CGContextRotateCTMæ¥è®¾ç½®æ—‹è½¬ï¼Œå†æŠŠUIImageé€šè¿‡drawInRect é‡æ–°ç»˜åˆ¶å‡ºæ¥ï¼Œé€šè¿‡UIGraphicsGetImageFromCurrentImageContextè·å¾—å¤„ç†åçš„å›¾ç‰‡ä¸‹é¢æ˜¯å…·ä½“å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475- (UIImage *)fixedRotation&#123; if (self.imageOrientation == UIImageOrientationUp) return self; CGAffineTransform transform = CGAffineTransformIdentity; switch (self.imageOrientation) &#123; case UIImageOrientationDown: case UIImageOrientationDownMirrored: transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height); transform = CGAffineTransformRotate(transform, M_PI); break; case UIImageOrientationLeft: case UIImageOrientationLeftMirrored: transform = CGAffineTransformTranslate(transform, self.size.width, 0); transform = CGAffineTransformRotate(transform, M_PI_2); break; case UIImageOrientationRight: case UIImageOrientationRightMirrored: transform = CGAffineTransformTranslate(transform, 0, self.size.height); transform = CGAffineTransformRotate(transform, -M_PI_2); break; case UIImageOrientationUp: case UIImageOrientationUpMirrored: break; &#125; switch (self.imageOrientation) &#123; case UIImageOrientationUpMirrored: case UIImageOrientationDownMirrored: transform = CGAffineTransformTranslate(transform, self.size.width, 0); transform = CGAffineTransformScale(transform, -1, 1); break; case UIImageOrientationLeftMirrored: case UIImageOrientationRightMirrored: transform = CGAffineTransformTranslate(transform, self.size.height, 0); transform = CGAffineTransformScale(transform, -1, 1); break; case UIImageOrientationUp: case UIImageOrientationDown: case UIImageOrientationLeft: case UIImageOrientationRight: break; &#125; // Now we draw the underlying CGImage into a new context, applying the transform // calculated above. CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height, CGImageGetBitsPerComponent(self.CGImage), 0, CGImageGetColorSpace(self.CGImage), CGImageGetBitmapInfo(self.CGImage)); CGContextConcatCTM(ctx, transform); switch (self.imageOrientation) &#123; case UIImageOrientationLeft: case UIImageOrientationLeftMirrored: case UIImageOrientationRight: case UIImageOrientationRightMirrored: // Grr... CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage); break; default: CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage); break; &#125; // And now we just create a new UIImage from the drawing context CGImageRef cgimg = CGBitmapContextCreateImage(ctx); UIImage *img = [UIImage imageWithCGImage:cgimg]; CGContextRelease(ctx); CGImageRelease(cgimg); return img;&#125; ç°åœ¨å†ä¼˜åŒ–ä¸€ä¸‹åŸæ¥+ (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation æ–¹æ³•,ä¿®æ”¹æˆè¿™æ · 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748+ (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation&#123; UIImage *newImage = [UIImage imageWithCGImage:oldImage.CGImage scale:1 orientation:orientation]; //fix original Image with gived orientation. UIImage *fixedRotationImage = [newImage fixedRotation]; NSString *orientationStr = nil; switch (orientation) &#123; case UIImageOrientationUp: &#123; orientationStr = @&quot;UIImageOrientationUp&quot;; break; &#125; case UIImageOrientationDown: &#123; orientationStr = @&quot;UIImageOrientationDown&quot;; break; &#125; case UIImageOrientationLeft: &#123; orientationStr = @&quot;UIImageOrientationLeft&quot;; break; &#125; case UIImageOrientationRight: &#123; orientationStr = @&quot;UIImageOrientationRight&quot;; break; &#125; case UIImageOrientationUpMirrored: &#123; orientationStr = @&quot;UIImageOrientationUpMirrored&quot;; break; &#125; case UIImageOrientationDownMirrored: &#123; orientationStr = @&quot;UIImageOrientationDownMirrored&quot;; break; &#125; case UIImageOrientationLeftMirrored: &#123; orientationStr = @&quot;UIImageOrientationLeftMirrored&quot;; break; &#125; case UIImageOrientationRightMirrored: &#123; orientationStr = @&quot;UIImageOrientationRightMirrored&quot;; break; &#125; &#125; NSLog(@&quot;current orientation: %@&quot;,orientationStr); return fixedRotationImage;&#125; ç°åœ¨å†æµ‹è¯•ä¸€ä¸‹ï¼Œwellï¼ŒItâ€˜s OKã€‚ have fun!!! å‚è€ƒèµ„æ–™ UIImageOrientation &#x2F; EXIF orientation sample images Apple-UIImage Class Reference ios-uiimageview-how-to-handle-uiimage-image-orientation å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"}]},{"title":"ç”¨CAShapeLayeråŠ¨ç”»ç»˜åˆ¶CGPath","slug":"2016-01-13-dong-hua-hui-zhi-cashapelayerde-lu-jing-cgpath","date":"2016-01-12T20:35:42.000Z","updated":"2024-11-02T03:36:52.395Z","comments":true,"path":"2016/01/13/2016-01-13-dong-hua-hui-zhi-cashapelayerde-lu-jing-cgpath/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-dong-hua-hui-zhi-cashapelayerde-lu-jing-cgpath/","excerpt":"","text":"åŸæ–‡é“¾æ¥ è¿™æ˜¯ä»€ä¹ˆï¼Ÿ æ­¤æ–‡å°†è®²è§£é€šè¿‡å½¢çŠ¶å›¾å±‚CAShaperLayerçš„strokeStartå’ŒstrokeEndæ¥å®ç°åŠ¨ç”»ç»˜åˆ¶è·¯å¾„CGPath,æ­¤æ–‡æ˜¯By Ole Begemannåˆ›å»ºäºDecember 18, 2010,å½“æ—¶æ˜¯å‘å¸ƒiOS SDK 4.2æ—¶CAShapeLayeræ–°å¢åŠ çš„ä¸¤ä¸ªå±æ€§strokeStartå’ŒstrokeEnd,è¿™ä¸¤ä¸ªå€¼æ˜¯ä¸¤ä¸ªæµ®ç‚¹æ•°å–å€¼èŒƒå›´0.0~1.0,ç”¨æ¥è¡¨æ˜å½¢çŠ¶å›¾å±‚æ‰€æŒ‡å‘çš„è·¯å¾„åœ¨ç»˜åˆ¶å¼€å§‹å’Œç»“æŸè·¯å¾„ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚ strokeStarté»˜è®¤å€¼æ˜¯0.0ï¼ŒstrokeEndé»˜è®¤å€¼æ˜¯1.0ï¼Œæ˜¾ç„¶è¿™ä¼šå¯¼è‡´å½¢çŠ¶å›¾å±‚çš„è·¯å¾„å°†ä¸€æ•´ä¸ªè¢«ç»˜åˆ¶ã€‚å‡å¦‚ï¼Œä½ æƒ³è¯´ï¼Œå¦‚æœè®¾ç½®äº†layer.strokeEnd &#x3D; 0.5f,åªè®©å¥¹ç»˜åˆ¶å‰åŠéƒ¨åˆ†ï¼Œé‚£è¯¥å¤šå¥½ã€‚ çœŸæ­£æœ‰è¶£çš„äº‹æƒ…æ˜¯è¿™äº›æ¥å£éƒ½æ˜¯å¯åŠ¨ç”»çš„ã€‚é€šè¿‡åŠ¨ç”»ç»˜åˆ¶strokeEndä»0.0åˆ°1.0åœ¨å‡ ç§’å†…ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå®¹æ˜“è‡ªå·±ç»˜åˆ¶è·¯å¾„åƒä¸‹é¢è¿™æ ·å†™ï¼š 12345CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@&quot;strokeEnd&quot;];pathAnimation.duration = 10.0;pathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];pathAnimation.toValue = [NSNumber numberWithFloat:1.0f];[self.pathLayer addAnimation:pathAnimation forKey:@&quot;strokeEndAnimation&quot;]; æœ€åï¼Œå†æ·»åŠ ç¬¬äºŒä¸ªå›¾å±‚åŒ…å«ä¸€ä¸ªé“…ç¬”å›¾ç‰‡ï¼Œä½¿ç”¨å…³é”®å¸§åŠ¨ç”» CAKeyframeAnimationæ¥è®©å®ƒéšç€è¿™ä¸ªè·¯å¾„ä»¥ç›¸åŒçš„é€Ÿåº¦ç»˜åˆ¶ï¼Œå°±å¯ä»¥è¾¾åˆ°å®Œç¾çš„é”™è§‰æ•ˆæœï¼š 12345CAKeyframeAnimation *penAnimation = [CAKeyframeAnimation animationWithKeyPath:@&quot;position&quot;];penAnimation.duration = 10.0;penAnimation.path = self.pathLayer.path;penAnimation.calculationMode = kCAAnimationPaced;[self.penLayer addAnimation:penAnimation forKey:@&quot;penAnimation&quot;]; ç»˜åˆ¶æ™®é€šè·¯å¾„æ•ˆæœè§†é¢‘ ä¸‹è½½åœ°å€ è¿™ä¸ªå¯¹æ–‡æœ¬ä¸€æ ·æœ‰æ•ˆï¼›æˆ‘ä»¬åªéœ€è¦æŠŠå­—ç¬¦è½¬åŒ–æˆCGPathã€‚Core Textæä¾›äº†é‚£æ ·çš„åŠŸèƒ½çš„å‡½æ•°ï¼ŒCTFontCreatePathForGlyph( )ã€‚ä¸ºäº†ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¸¦å±æ€§çš„å­—ç¬¦ä¸²ç”¨æˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„æ–‡æœ¬ï¼Œå…ˆæŠŠå®ƒä»¬åˆ†å‰²æˆè¡Œåœ¨åˆ†å‰²æˆä¸€ä¸ªä¸ªå­—ç¬¦ã€‚åœ¨æŠŠæ‰€æœ‰çš„å­—ç¬¦è½¬æ¢æˆè·¯å¾„åï¼Œæˆ‘ä»¬ä»¥å­è·¯å¾„æ–¹å¼æŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªå•ä¸ªçš„CGPathè·¯å¾„ä¸­ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥æŸ¥çœ‹Ohmuå†™çš„Low-level text renderingè¿™ç¯‡æ–‡ç« ã€‚ç»“æœçœ‹ä»¥æ¥éå¸¸çš„ç‚«é…·ï¼š ç»˜åˆ¶æ–‡å­—è·¯å¾„æ•ˆæœè§†é¢‘ ä¸‹è½½åœ°å€ ä»Githubä¸Šè·å¾—iPadç‰ˆçš„æ ·å“å·¥ç¨‹ ä½ å°†å­¦åˆ°çš„çŸ¥è¯†ç‚¹ ä½¿ç”¨CAShapeLayerçš„strokeStartå’ŒstrokeEndæ¥å®ç°è·¯å¾„åŠ¨ç”»,æ¯”è¾ƒé«˜çº§å¤æ‚çš„æ•ˆæœåƒgoogleçš„ä¸‹æ‹‰åˆ·æ–°è½¬åœˆå°±å¯ä»¥ä»è¿™é‡Œå¼•ç”³å»å®ç°ã€‚ CABasicAnimationå’ŒCABasicAnimationä½¿ç”¨ æ·±å…¥ç†è§£CAShapeLayerå’ŒCALayer é€šè¿‡æ–‡æœ¬åˆ›å»ºè·¯å¾„ï¼Œæ ¸å¿ƒå‡½æ•°CTFontCreatePathForGlyph() è¡¥å……è¯´æ˜1234567891011CAShapeLayer *pathLayer = [CAShapeLayer layer];pathLayer.frame = self.animationLayer.bounds;pathLayer.bounds = pathRect;pathLayer.geometryFlipped = YES;pathLayer.path = path.CGPath;pathLayer.strokeColor = [[UIColor blackColor] CGColor];pathLayer.fillColor = nil;pathLayer.lineWidth = 10.0f;pathLayer.lineJoin = kCALineJoinBevel;[self.animationLayer addSublayer:pathLayer]; æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼ŒCALayeråœ¨iOSç³»ç»Ÿä¸­ç›¸å¯¹åæ ‡ç³»æ˜¯ä»¥å±å¹•å·¦ä¸Štop-leftä¸ºåæ ‡åŸç‚¹çš„ï¼Œåœ¨Mac OS Xä¸Šä»¥åä¸‹bottom-leftä¸ºåæ ‡åŸç‚¹,ä½†æ˜¯å¯ä»¥é€šè¿‡CALayerçš„æ¥å£geometryFlippedå‚ç›´ç¿»è½¬åæ ‡ç³»ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯NOï¼Œè®¾ç½®æˆYESå°±å¯ä»¥æŠŠåæ ‡ç³»è½¬æ¢æˆå·¦ä¸‹bottom-leftäº†ï¼Œè¿™é‡Œä½œè€…ä½¿ç”¨çš„å·¦ä¸‹bottom-leftçš„åæ ‡ç³»ã€‚ 1@property(getter=isGeometryFlipped) BOOL geometryFlipped; å…³äºè¿™ä¸ªå±æ€§ä½¿ç”¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ ç¿»è½¬ä¼šåŒæ—¶ä½œç”¨äºå®ƒçš„å­å›¾å±‚ å³ä½¿è¿™ä¸ªå±æ€§è®¾ç½®æˆYES,å›¾ç‰‡çš„orientationä»ç„¶æ˜¯ä¸å˜çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´å½“è®¾ç½®flipped=YESå’Œflipped=NOæ—¶ä¸€ä¸ªCGImageRefå‚¨å­˜åœ¨contentsæ¥å£ä¸­çš„å†…å®¹å°†ä¼šæ˜¾ç¤ºä¸€è‡´ï¼Œèµ‹å€¼å¹¶ä¸ä¼šçœŸæ­£å˜æ¢åº•å±‚çš„å›¾å±‚ï¼‰ pathLayeråŠ¨ç”»å®ç°åŸç† å…ˆåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ç”¨çš„å›¾å±‚animationLayerç±»å‹CALayerï¼Œç”¨æ¥å……å½“åŠ¨ç”»çš„ç”»å¸ƒã€‚ åˆ›å»ºçœŸæ­£çš„è·¯å¾„å›¾å±‚pathLayerç±»å‹ä¸ºCAShapeLayer,è®©å®ƒçš„åæ ‡ç³»å‚ç›´ç¿»è½¬ï¼Œå¹¶ä¸”è®©å›¾å±‚å®½é«˜åŒæ—¶å‘å†…æ”¶ç¼©100ä¸ªç‚¹,é€šè¿‡CGRectInset(CGRect rect, CGFloat dx, CGFloat dy)å®ç° æŠŠpathLayeræ·»åŠ åˆ°animationLayerçš„å­å›¾å±‚ä¸­å» åˆ›å»ºä¸€ä¸ªé“…ç¬”å›¾å±‚penLayerç±»å‹ä¸ºCALayer,æŠŠå®ƒæ·»åŠ åˆ°pathLayerå» å¯¹pathLayeræ·»åŠ CABasicAnimationåŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸ºstrokeEnd å¯¹penLayeræ·»åŠ CAKeyframeAnimationåŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸ºposition textLayeråŠ¨ç”»å®ç°åŸç† å…ˆåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ç”¨çš„å›¾å±‚animationLayerç±»å‹CALayerï¼Œç”¨æ¥å……å½“åŠ¨ç”»çš„ç”»å¸ƒ Create path from text,See:http://www.codeproject.com/KB/iPhone/Glyph.aspxï¼Œæœ€ç»ˆä¿å­˜åˆ°ä¸€ä¸ªç±»å‹ä¸ºCGMutablePathRefçš„letterä¸­ é€šè¿‡letteræ¥åˆ›å»ºæ–‡å­—UIBezierPathç±»å‹çš„path é€šè¿‡pathå†åˆ›å»ºCAShapeLayerpathLayer,å¹¶ä¸”æŠŠpathLayeræ·»åŠ åˆ°animationLayerä¸­å» åˆ›å»ºä¸€ä¸ªé“…ç¬”å›¾å±‚penLayerç±»å‹ä¸ºCALayer,æŠŠå®ƒæ·»åŠ åˆ°pathLayerå» å¯¹pathLayeræ·»åŠ CABasicAnimationåŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸ºstrokeEnd å¯¹penLayeræ·»åŠ CAKeyframeAnimationåŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸ºposition ä¿®å¤ä¸€å¤„bugé‡å¤ç‚¹å‡»UISegmentedControlå¯¼è‡´é“…ç¬”æ¶ˆå¤±ï¼Œè¿™æ˜¯è®¾ç½®äº† penAnimation.delegate = self;åœ¨ä»£ç†æ–¹æ³•é‡Œé¢æ²¡æœ‰åˆ¤æ–­ç»“æŸç›´æ¥å°†è®¾ç½®self.penLayer.hidden = YESï¼Œå¯¼è‡´è¿ç»­åˆ‡æ¢æ—¶é“…ç¬”ä¸è§äº†ï¼Œè¦ä¿®å¤è¿™ä¸ªbugåªéœ€åŠ ä¸€ä¸ªåˆ¤æ–­ if (flag) self.penLayer.hidden = YES;å³å¯,è¿™æ ·çš„æ„æ€æ˜¯åªæœ‰å½“åŠ¨ç”»å®Œæˆæ—¶æ‰è®¾ç½®self.penLayer.hiddençš„å€¼ï¼Œå¥½äº†ç°åœ¨å·²ç»éå¸¸å®Œç¾äº†ï¼Œå¿«å»åŠ¨æ‰‹è‡ªå·±è¯•è¯•å§ï¼ğŸº å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"Animation","slug":"Animation","permalink":"https://blog.wangruofeng007.com/categories/Animation/"}],"tags":[{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://blog.wangruofeng007.com/tags/%E5%8A%A8%E7%94%BB/"},{"name":"CAShapeLayer","slug":"CAShapeLayer","permalink":"https://blog.wangruofeng007.com/tags/CAShapeLayer/"}]},{"title":"Blogç½‘ç«™å¤‡å¿˜å½•","slug":"2016-01-13-blogwang-zhan-bei-wang-lu","date":"2016-01-12T20:29:59.000Z","updated":"2024-11-02T03:36:52.394Z","comments":true,"path":"2016/01/13/2016-01-13-blogwang-zhan-bei-wang-lu/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-blogwang-zhan-bei-wang-lu/","excerpt":"","text":"ç”¨äºæ”¶è—ä¸é”™çš„ä¸ªäººæˆ–è€…å…¬å¸Blogåœ°å€ å¹½å¹½ä¼ é€é—¨ æˆ‘å¸¸å¸¸æµè§ˆçš„åšå®¢å’Œç½‘ç«™ â€“å¶å­¤åŸ__ 11ä¸ªè¶…æ£’çš„iOSå¼€å‘å­¦ä¹ ç½‘ç«™ iOSå¼€å‘å¦‚ä½•æé«˜ ä¸­æ–‡ iOS&#x2F;Mac å¼€å‘åšå®¢åˆ—è¡¨â€“å”å·§ç²¾å¿ƒæ•´ç†äº†å›½å†…40å¤šä½iOSå¼€å‘åšä¸»çš„åšå®¢åœ°å€åˆ—è¡¨ ç®€ä¹¦ å¶å­¤åŸ___ MarkNote lp_é©¬å»ºæˆ seedante å¤§ç°ç°iOS StrongX å›½å†…ä¸ªäºº çŒ«ç¥onevcat â€“ åœ°çƒäººéƒ½çŸ¥é“ å”å·§â€“çŒ¿é¢˜åº“ä½œè€… è™¾ç¥â€“è¯è¯´ä½ ä»¬æ™“å¾—è™¾ç¥å¹´çºªå¤šå¤§ä¹ˆï¼Ÿåæ­£æˆ‘æ˜¯è§‰å¾—ç™½æ´»äº†ã€‚90åå¤ªå‰å®³äº†ã€‚ sunnyxx â€“ FDFullscreenPopGestureä½œè€…ï¼Œå€¼å¾—å…³æ³¨ nixzhuâ€“æœ‰å‡ ç¯‡ç¿»è¯‘çš„æ–‡ç« è´¨é‡ä¸é”™ ç ´èˆ¹ä¹‹å®¶â€“è¿™è®©æˆ‘æƒ³èµ·ï¼Œå–ä¸Šä¸€æ¯æœ—å§†é…’ğŸº Limboy â€“ è˜‘è‡è¡—ä¸€ä½èµ„æ·±iOSç¨‹åºå‘˜ MacTalk-æ± å»ºå¼ºçš„éšæƒ³å½•â€“Macå¼€å‘å¤§ç‰› é›¨æ¾MOMOâ€“ä¸“æ³¨ç§»åŠ¨äº’è”ç½‘ï¼Œä¸“æ³¨Unity3Dæ¸¸æˆå¼€å‘,å›½å†…æœ€æ—©å¼€å‘Unity3dçš„å¤§ç¥ä¹‹ä¸€ ç‰ä»¤å¤©ä¸‹çš„åšå®¢ â€“ å…³äºruntimeçš„èµ„æ–™æ•´ç†å¾—éå¸¸ä¸é”™ Chun Tips â€“ å¯¹Runtime,RunLoop,AutoLayoutè®²è§£å¾—éå¸¸è¯¦ç»† â¤ï¸ é¹å¨ã®åšå®¢ â€“ éå¸¸ç‚«é…·çš„åšå®¢ï¼Œå€¼å¾—å­¦ä¹  mgenware â€“ å¾€å…¨æ ˆæ–¹å‘å‘å±•ing å›½å¤–ä¸ªäºº mikeashâ€“ç™½å¤©é£è¡Œå‘˜ï¼Œæ™šä¸Šç¨‹åºå‘˜ ï¼š] just this guy, you know? shinobicontrolsâ€“iOS æœ€æ–° API ä»¥åŠæ–°åŠŸèƒ½ç”¨æ³• iosdevelopertipsâ€“æ•™ç¨‹é…åˆDemoè®©ä½ å­¦ä¹ æˆé•¿ç«‹ç«¿è§å½± iosdevweeklyâ€“å¾ˆæ£’çš„ä¸ªäººæŠ€æœ¯åšå®¢ç½‘ï¼Œå·²å‘è¡¨230ç¯‡æ–‡ç«  ios-goodiesâ€“iOS,UI,UX,Objective-c,Swift,Xcode mattt-thompson â€“ ä¸ç”¨è§£é‡Š subjc â€“Subjective-C is a study of innovative iOS interfaces. thinkandbuildâ€“ã€ŠIntroduction To 3D Drawing in CoreAnimtionã€‹ä½œè€… robb.isâ€“ã€ŠHow to build a nice Hamburger transition in swiftã€‹ä½œè€… commandshiftâ€“ä¸å¤šè¯´ï¼Œè´¨é‡æé«˜ indieambitionsâ€“raywenderlichå¸¸é©»ä½œè€…ä¹‹ä¸€çš„blogï¼Œéå¸¸èµã€‚ nvieâ€“å›½å¤–ä¸€ä¸ªå¤§ç¥çš„blogï¼Œè®²å¾—æ¯”è¾ƒæ‚ï¼Œgitï¼Œiosï¼Œpythonéƒ½æœ‰æ¶‰çŒï¼Œä½†æ˜¯æ¯ç¯‡éƒ½å¾ˆç²¾å½©ã€‚ stuartkhallâ€“å¾ˆå¤šå…³äºappä¸Šçº¿è¿è¥ä¹‹ç±»çš„blogï¼Œå€¼å¾—ä¸€çœ‹ã€‚ ittybittyappsâ€“ç¥å™¨Revealçš„ä½œè€…çš„blogã€‚ adoptioncurveâ€“æ›´æ–°æå¿«ï¼Œå½“æ—¶iOS8è¿˜æ²¡å‡ºå‡ ä¸ªå‘¨ï¼Œä½œè€…å°±å†™äº†ç¯‡sizeclassè§£æã€‚éå¸¸æ£’ ciechanowskiâ€“å„ç§æ•°å­¦ä¸Šå‡ ä½•å˜åŒ– bignerdranch cocoawithloveâ€“2008-2011çš„è€æ–‡ç« ï¼Œç°åœ¨æ²¡æ€ä¹ˆè·Ÿæ–°äº† codinghorror â€“Jeff Atwood ä¸»ç«™ g8production lucida â€“ æˆ‘æ¯”è¾ƒä½©æœä¸€åç¨‹åºå‘˜ï¼Œæƒ³å­¦ç®—æ³•æ‰¾ä»–æ¨èå’¯ğŸ˜ å›¢ä½“blog ibiremeâ€“æœ€è¿‘å¾ˆğŸ”¥çš„YYKitçš„ä½œè€… GlowæŠ€æœ¯å›¢é˜Ÿ ç¾å›¢ç‚¹è¯„æŠ€æœ¯å›¢é˜Ÿ ä¼˜è´¨iOSå­¦ä¹ èµ„æº githubâ€“è¿™ä¸ªä¸ç”¨æˆ‘è¯´å§ stackoverflowâ€“æœ€ä¸“ä¸šçš„é—®ç­”ç¤¾åŒº raywenderlichâ€“iOSç•Œçš„ç™¾ç§‘å…¨ä¹¦ nshipsterâ€“é‡Œé¢æ–‡ç« è´¨é‡éå¸¸çš„é«˜ï¼Œæœ€å–œæ¬¢çš„å‡ ä¸ªç½‘ç«™ä¹‹ä¸€AFNetworktingçš„ä½œè€…Mattt Thompsonâ€“ç»å¸¸å‡ºæ²¡ nshipsterä¸­å›½ objc.ioâ€“è¿™ä¸ªä¹Ÿä¸ç”¨å¤šè¯´äº†ï¼ŒRaywenderlichæ˜¯ç™¾ç§‘å…¨ä¹¦çš„è¯ï¼Œè¿™ä¸ªå°±æ˜¯æ·±å…¥æ·±å…¥å†æ·±å…¥ objcä¸­å›½ realm.ioâ€“ä¸€ä¸ªè·¨å¹³å°çš„ç§»åŠ¨æ•°æ®åº“å¼•æ“ tutsplusâ€“ä¹Ÿæ˜¯åŒ…ç½—ä¸‡è±¡çš„ä¸€ä¸ªç½‘ç«™ï¼Œæœ‰web ios uiï¼Œä¸æ¯”Raywenderliché€Šè‰²ã€‚ maniacdevâ€“ç±»ä¼¼Raywenderlichï¼Œæ–‡ç« è´¨é‡é«˜ï¼Œè€Œä¸”æ¶µç›–é¢å¹¿ Appcoda â€“ æŠ€æœ¯ç±»å­¦ä¹ ç½‘ç«™ï¼Œé‡Œé¢çš„æŠ€æœ¯æ›´æ–°æŒºåŠæ—¶çš„ ä¸­æ–‡ç½‘ç«™ cocoachina code4app æ³°ç„¶ç½‘ â€“æ¸¸æˆæ•™ç¨‹ä¸é”™çš„ç½‘ç«™ ä¼¯ä¹åœ¨çº¿ Swiftï¼š ä»‹ç´¹ | ã€ŠThe Swift Programming Languageã€‹ä¸­æ–‡ç‰ˆ Swiftå¿…å¤‡Tips â€“ çŒ«ç¥çš„æ°ä½œ Letâ€™s Swift â€“ Swiftç«™ç‚¹å¯¼èˆª Swiftify | Objective-C to Swift Converter â€“ è¾…åŠ©å°†æ—§çš„* Objective-Cä»£ç è½¬æˆSwiftã€‚ Swift.org â€“ Apple Swift å®˜ç½‘ Swift - Blog â€“ Apple Swift å®˜æ–¹åšå®¢ CocoaChinaå°ç»„ç¿»è¯‘çš„Swiftç‰ˆæœ¬ tutorialspoint â€“ æœ‰ä¸€äº›Swiftæ•™ç¨‹ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"Efficiency","slug":"Efficiency","permalink":"https://blog.wangruofeng007.com/categories/Efficiency/"}],"tags":[]},{"title":"__autoreleasingçš„ç†è§£","slug":"2016-01-13-autoreleasingde-li-jie","date":"2016-01-12T20:27:10.000Z","updated":"2024-11-02T03:36:52.394Z","comments":true,"path":"2016/01/13/2016-01-13-autoreleasingde-li-jie/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-autoreleasingde-li-jie/","excerpt":"","text":"__autoreleasing ä¿®é¥°ç¬¦å°†å¯¹è±¡èµ‹å€¼ç»™é™„æœ‰__autoreleasing ä¿®é¥°ç¬¦çš„å˜é‡ç­‰åŒäºARC æ— æ•ˆæ—¶è°ƒç”¨å¯¹è±¡çš„autoreleaseæ–¹æ³•ã€‚æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æºä»£ç æ¥çœ‹ä¸€ä¸‹ 123@autoreleasepool &#123;id __autoreleasing obj = [[NSObject alloc] init];&#125; è¯¥æºä»£ç ä¸»è¦å°†NSObject ç±»å¯¹è±¡æ³¨å†Œåˆ°autoreleasepool ä¸­ï¼Œå¯ä½œå¦‚ä¸‹å˜æ¢ï¼š 123456/* ç¼–è¯‘å™¨çš„æ¨¡æ‹Ÿä»£ç  */id pool = objc_autoreleasePoolPush();id obj = objc_msgSend(NSObject, @selector(alloc));objc_msgSend(obj, @selector(init));objc_autorelease(obj);objc_autoreleasePoolPop(pool); è¿™ä¸è‹¹æœçš„autorelease å®ç°ä¸­çš„è¯´æ˜ï¼ˆå‚è€ƒ1.2.7 èŠ‚ï¼‰å®Œå…¨ç›¸åŒã€‚è™½ç„¶ARC æœ‰æ•ˆå’Œæ— æ•ˆæ—¶ï¼Œå…¶åœ¨æºä»£ç ä¸Šçš„è¡¨ç°æœ‰æ‰€ä¸åŒï¼Œä½†autorelease çš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚ åœ¨alloc&#x2F;new&#x2F;copy&#x2F;mutableCopy æ–¹æ³•ç¾¤ä¹‹å¤–çš„æ–¹æ³•ä¸­ä½¿ç”¨æ³¨å†Œåˆ°autoreleasepool ä¸­çš„å¯¹è±¡ä¼šå¦‚ä½•å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹NSMutableArray ç±»çš„array ç±»æ–¹æ³•ã€‚ 123@autoreleasepool &#123;id __autoreleasing obj = [NSMutableArray array];&#125; è¿™ä¸å‰é¢çš„æºä»£ç æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ 123456/* ç¼–è¯‘å™¨çš„æ¨¡æ‹Ÿä»£ç  */id pool = objc_autoreleasePoolPush();id obj = objc_msgSend(NSMutableArray, @selector(array));objc_retainAutoreleasedReturnValue(obj);objc_autorelease(obj);objc_autoreleasePoolPop(pool); è™½ç„¶æŒæœ‰å¯¹è±¡çš„æ–¹æ³•ä»alloc æ–¹æ³•å˜ä¸ºobjc_retainAutoreleasedReturnValue å‡½æ•°ï¼Œ ä½†æ³¨å†Œautoreleasepool çš„æ–¹æ³•æ²¡æœ‰æ”¹å˜ï¼Œä»æ˜¯objc_autorelease å‡½æ•°ã€‚ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"https://blog.wangruofeng007.com/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"}]},{"title":"__attribute__","slug":"2016-01-13-attribute","date":"2016-01-12T20:10:33.000Z","updated":"2024-11-02T03:36:52.393Z","comments":true,"path":"2016/01/13/2016-01-13-attribute/","permalink":"https://blog.wangruofeng007.com/2016/01/13/2016-01-13-attribute/","excerpt":"","text":"è¯‘è‡ª Written by Mattt Thompson â€” January 14th, 2013 åŸæ–‡é“¾æ¥ï¼šhttp://nshipster.com/__attribute__/ è¯‘è€…@oneruofeng é‡å¤å‘å¸ƒè¿™ä¸ªä¸»é¢˜å·²ç»è¯´æ˜äº†åŒç¼–è¯‘å™¨ä¿å­˜å¥åº·å…³ç³»çš„é‡è¦æ€§,åƒä»»ä½•è‰ç¨¿ä¸€æ ·ï¼Œä½œä¸ºä¸€ä¸ªå®è·µè€…çš„æ•ˆç‡å–å†³äºä»–ä»¬æ€æ ·å¯¹å¾…ä»–ä»¬çš„å·¥å…·ï¼Œä½ ç…§é¡¾å¥½å®ƒä»¬ï¼Œå®ƒä»¬åè¿‡æ¥ä¹Ÿä¼šå¯¹ä½ æœ‰å¥½å¤„ã€‚ __attribute__æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨çš„æŒ‡ä»¤åœ¨å£°æ˜çš„æ—¶å€™æŒ‡æ˜äº†ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°å…è®¸æ›´å¤šçš„æ£€æŸ¥é”™è¯¯å’Œé«˜çº§çš„ä¼˜åŒ–ã€‚ è¯­æ³•å…³é”®å­—æ˜¯__attribute__ç´§è·Ÿ2å¥—åœ†æ‹¬å·ï¼ˆåŒåœ†æ‹¬å·è®©å‡ºç°çš„å®æ›´å®¹æ˜“è¾¨è®¤ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰å¤šä¸ªå±æ€§çš„æ—¶å€™ï¼‰ã€‚åœ¨æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å±æ€§åˆ—è¡¨ï¼Œ__attribute__æŒ‡ä»¤è¢«æ”¾åœ¨å‡½æ•°ï¼Œå˜é‡å’Œç±»å‹å£°æ˜åé¢ã€‚ 12345678910 // Return the square of a numberint square(int n) __attribute__((const));// Declare the availability of a particular APIvoid f(void) __attribute__((availability(macosx,introduced=10.4,deprecated=10.6)));// Send printf-like message to stderr and exitextern void die(const char *format, ...) __attribute__((noreturn, format(printf, 1, 2))); å‡å¦‚è¿™ä¸ªè®©ä½ æƒ³èµ·ISO Cè¯­è¨€çš„ #pragma,ä½ å°±ä¸ä¼šæ„Ÿåˆ°å­¤å•äº†ã€‚ å®é™…ä¸Šï¼Œå½“__attribute__è¢«ç¬¬ä¸€æ¬¡å¼•å…¥åˆ°GCCç¼–è¯‘å™¨æ—¶ï¼Œå®ƒé¢ä¸´ä¸€äº›é˜»åŠ›ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸“ç”¨çš„#pragmaå› ä¸ºç›¸åŒçš„ç›®çš„ã€‚ è¿™é‡Œï¼Œç„¶è€Œï¼Œæœ‰2ä¸ªéå¸¸å¥½çš„ç†ç”±ä¸ºä»€ä¹ˆ__attribute__è¢«æ·»åŠ è¿›æ¥ ä»ä¸€ä¸ªå®ä¸­äº§ç”Ÿ#pragmaå‘½ä»¤å‡ ä¹æ˜¯ä¸èƒ½çš„ï¼ˆåœ¨C99 _Pragma é¢„ç®—ç¬¦ä»¥å‰ï¼‰ã€‚ è¿™é‡Œæ²¡äººçŸ¥é“ç›¸åŒçš„#pragmaåœ¨å¦ä¸€ä¸ªç¼–è¯‘å™¨ä¸­å¯èƒ½çš„æ„æ€ã€‚ å¼•ç”¨GCC Documentation for Function Attributes è¿™é‡Œæœ‰2ä¸ªåŸå› è¢«åº”ç”¨åˆ°å‡ ä¹æ‰€æœ‰çš„åº”ç”¨æ¨èä½¿ç”¨#pragma,è¿™çŠ¯äº†ä¸€ä¸ªä½çº§é”™è¯¯å°±æ˜¯æŠŠ#pragmaä½¿ç”¨åˆ°ä»»ä½•åœ°æ–¹ã€‚ ç¡®å®ï¼Œå‡å¦‚ä½ åœ¨è‹¹æœçš„æ¡†æ¶ä¸­å’Œç‰›é€¼å·¥ç¨‹å¸ˆçš„å¼€æºé¡¹ç›®ä¸­çš„å¤´æ–‡ä»¶çœ‹ä¸€ä¸‹ç°ä»£çš„Objective-câ€“__attribute__è¢«å¤§é‡ä½¿ç”¨ã€‚ï¼ˆç›¸åï¼Œ#pragmaçš„ä¸»è¦å£°æ˜åå£°æ¥ç€è¿™äº›å¤©æ˜¯è£…é¥°:#pragma markï¼‰ æ‰€ä»¥ä¸ºäº†ä»¥åä¸è´¹åŠ›ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹æœ€é‡è¦çš„å±æ€§ï¼š GCCformat formatå±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°åƒprintf,scanf,strftimeæˆ–è€…strfmoé£æ ¼çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åº”è¯¥æ˜¯å¯ä»¥è¿›è¡Œç±»å‹æ£€æŸ¥çš„ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚ 123extern intmy_printf (void *my_object, const char *my_format, ...) __attribute__((format(printf, 2, 3))); Objective-Cç¨‹åºå‘˜ä¹Ÿå¯ä½¿ç”¨__NSString__æ¥æ ¼å¼åŒ–æ¥åšåˆ°ç›¸åŒçš„æ ¼å¼åŒ–è§„åˆ™ï¼Œåƒåœ¨NNStringä¸­é€šè¿‡ +stringWithFormat: å’Œ NSLog()æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸€æ ·ã€‚ nonnull è¿™ä¸ªnonnullå±æ€§æŒ‡å®šäº†æŸäº›å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯éç©ºçš„æŒ‡é’ˆã€‚ 123extern void *my_memcpy (void *dest, const void *src, size_t len) __attribute__((nonnull (1, 2))); ä½¿ç”¨nonnullç¼–ç æœŸæœ›è¿™ä¸ªå€¼éµå®ˆä¸€ä¸ªæ˜ç¡®çš„çº¦å®šä¸­ï¼Œè¿™æ ·èƒ½å¸®åŠ©æ•è·æ½œä¼åœ¨ä»»ä½•ä»£ç è°ƒç”¨çš„NULLæŒ‡é’ˆbugsï¼Œè¯·è®°ä½ï¼šç¼–è¯‘æ—¶çš„é”™è¯¯ &gt;&gt; è¿è¡Œæ—¶çš„é”™è¯¯ã€‚ noreturn ä¸€äº›æ ‡å‡†åº“å‡½æ•°ï¼Œä¾‹å¦‚abortå’Œexit,æ˜¯ä¸èƒ½è¿”å›çš„ã€‚GCCè‡ªåŠ¨çŸ¥é“è¿™äº›ä¸œè¥¿ï¼Œè¿™ä¸ªnoreturnå±æ€§ç”¨äºæŒ‡å®šä»»ä½•å…¶ä»–å‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›çš„æƒ…å†µã€‚ ä¾‹å¦‚ï¼ŒAFNetworking ä½¿ç”¨noreturnå±æ€§åœ¨å®ƒçš„ç½‘ç»œè¯·æ±‚çº¿ç¨‹è¿›å…¥ç‚¹çš„æ–¹æ³•é‡Œé¢,è¿™ä¸ªæ–¹æ³•ç”¨åœ¨å½“å¤§é‡äº§ç”Ÿä¸“ç”¨çš„ç½‘ç»œçš„çº¿ç¨‹é‡Œç”¨æ¥ä¿è¯åˆ†ç¦»çš„çº¿ç¨‹æŒç»­æ‰§è¡Œåœ¨åº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ã€‚ pure&#x2F;const pureå±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°é™¤äº†è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å®ƒçš„è¿”å›å€¼ä»…ä»…ä¾èµ–å‚æ•°å’Œ&#x2F;æˆ–è€…å…¨å±€å˜é‡ã€‚è¿™æ ·çš„å‡½æ•°å¯ä»¥ç”¨å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤å¹¶ä¸”å¾ªç¯ä¼˜åŒ–å°±åƒä¸€ä¸ªç®—æ•°æ“ä½œç¬¦é‚£æ ·ã€‚ pureå±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°ä¸ä¼šæ£€æŸ¥ä»»ä½•å€¼é™¤äº†å®ƒä»¬çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ã€‚æ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªæŒ‡é’ˆå‚æ•°å¹¶ä¸”éœ€å‘€æ£€æŸ¥æ•°æ®çš„æŒ‡å‘ä¸èƒ½å£°æ˜æˆconstã€‚åŒæ ·çš„ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸€ä¸ªénonstå‡½æ•°é€šå¸¸ä¸èƒ½ä¸ºconst,ä¸€ä¸ªconstå‡½æ•°è¿”å›voidå¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ 1int square(int n) __attribute__((const)); pureå’Œconstæ˜¯ä¸¤ä¸ªæ‰§è¡Œåœ¨ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹æƒ¯ä¾‹ä¸­çš„å‚æ•°ä¸ºäº†å…è®¸æœ‰æ•ˆæ€§èƒ½ä¼˜åŒ–ã€‚constå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸¥æ ¼å½¢å¼çš„pureå› ä¸ºå®ƒä¸ä¾èµ–å…¨å±€å˜é‡æˆ–è€…æŒ‡é’ˆã€‚ ä¾‹å¦‚ï¼Œå› ä¸ºä¸€ä¸ªå‡½æ•°å£°æ˜ä¸ºconstçš„ç»“æœå¹¶ä¸ä¾èµ–ä»»ä½•ä¸œè¥¿é™¤äº†ä¼ è¿›æ¥çš„å‚æ•°ã€‚å‡½æ•°çš„ç»“æœèƒ½å¤Ÿç¼“å­˜é‚£ä¸ªç»“æœå¹¶ä¸”å½“å‡½æ•°è¢«è°ƒç”¨æ—¶è¿”å›ï¼Œè¿™æ ·çš„å‡½æ•°å«åšç›¸åŒçš„ç»„åˆå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ•°å­—çš„å¹³æ–¹æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»…ä»…éœ€è¦åªè®¡ç®—å®ƒä¸€æ¬¡)ã€‚ unused è¿™ä¸ªå±æ€§ï¼Œé™„ç€åœ¨ä¸€ä¸ªå‡½æ•°åé¢ï¼Œæ„å‘³ç€é‚£ä¸ªå‡½æ•°å¾ˆå¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼ŒGCCä¸ä¼šå¯¹è¿™ä¸ªå‡½æ•°äº§ç”Ÿè­¦å‘Šã€‚ ç”¨__unusedå…³é”®è¯å¯ä»¥è·å¾—ç›¸åŒçš„æ•ˆæœï¼Œå£°æ˜è¿™ä¸ªåœ¨æ–¹æ³•å®ç°ä¸­ä¸ä¼šè¢«ä½¿ç”¨çš„å‚æ•°ä¸­ã€‚çŸ¥é“é‚£ä»¥åä¸€äº›ä¸Šä¸‹æ–‡å°±å¯ä»¥å…è®¸ç¼–è¯‘å™¨æ¥åšç›¸åº”çš„ä¼˜åŒ–ã€‚ä½ å¾ˆå¯èƒ½å–œæ¬¢åœ¨delegateæ–¹æ³•å®ç°æå‹‰ä½¿ç”¨__unused,å› ä¸ºåè®®é¢‘ç¹çš„æé«˜æ›´å¤šçš„ä¸Šä¸‹æ–‡æ¯”é€šå¸¸å¿…è¦çš„æƒ…å†µï¼Œä¸ºäº†æ»¡è¶³å¤§é‡çš„æ½œåœ¨ä½¿ç”¨æ¡ˆä¾‹ã€‚ LLVMåƒGCCçš„å¾ˆå¤šç‰¹å¾ä¸€æ ·ï¼ŒClangä¹Ÿæ”¯æŒ__attribute__,æ·»åŠ åˆ°å®ƒè‡ªå·±çš„å°èŒƒå›´çš„æ‰©å±•ã€‚ä¸ºäº†æ£€æŸ¥æŸä¸ªå±æ€§çš„å¯ç”¨æ€§ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨__has_attributeå±æ€§ã€‚ availability Clangå¼•è¿›äº†availabilityå±æ€§ï¼Œè¿™ä¸ªå¯ä»¥è¢«å–ä»£åœ¨å£°æ˜æè¿°çš„ç”Ÿå‘½å‘¨æœŸä¸­å£°æ˜ç›¸å¯¹äºæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚æ€è€ƒå¯¹ä¸€ä¸ªç®€å•å‡½æ•°fï¼šçš„å‡½æ•°å£°æ˜ 1void f(void) __attribute__((availability(macosx,introduced=10.4,deprecated=10.6,obsoleted=10.7))); availabilityå±æ€§å£°æ˜fåœ¨OS Xè€è™ç³»ç»Ÿä¸­è¢«å¼•å…¥ï¼Œåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­è¢«å¼ƒç”¨ï¼Œåœ¨OS X å±±ç‹®ç³»ç»Ÿä¸­è¢«åºŸå¼ƒã€‚ è¿™ä¸ªä¿¡æ¯è¢«Clangç”¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™ä½¿ç”¨fï¼šå‡½æ•°å¼å®‰å…¨çš„ï¼Œä¾‹å¦‚ï¼Œå‡å¦‚Clangåœ¨OS X ç¾æ´²è±¹ç³»ç»Ÿä¸Šç¼–è¯‘ï¼Œè°ƒç”¨f()å‡½æ•°å°†æˆåŠŸã€‚å‡å¦‚Clangåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­ç¼–è¯‘ï¼Œå‡½æ•°è°ƒç”¨å°†æˆåŠŸä½†æ˜¯Clangä¼šå‘å‡ºä¸€ä¸ªè­¦å‘ŠæŒ‡æ˜è¿™ä¸ªå‡½æ•°è¢«å¼ƒç”¨äº†ã€‚æœ€åï¼Œå‡å¦‚Clangè¢«å¼•è¿›ç¼–è¯‘OS Xå±±ç‹®ç³»ç»Ÿçš„ä»£ç ï¼Œå‡½æ•°è°ƒç”¨å°†å¤±è´¥ï¼Œå› ä¸ºf()å‡½æ•°å·²ç»ä¸å†å¯ç”¨äº†ã€‚ availabilityå±æ€§æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨ä»¥å¹³å°åå¼€å§‹ç„¶åå¼•å…¥ä¸€äº›å®šè¯­åˆ—ä¸¾å‡ºç”Ÿå‘½å‘¨æœŸå†…çš„é‡è¦é‡Œç¨‹ç¢‘äº‹ä»¶é™„åŠ é¢å¤–çš„ä¿¡æ¯ï¼ˆä»¥ä»»ä½•é¡ºåºï¼‰ã€‚ introducedï¼šå£°æ˜è¢«å¼•å…¥çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ deprecatedï¼šå£°æ˜è¢«å¼ƒç”¨çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·åº”è¯¥æŠŠè¿™ä¸ªAPIç§»èµ° obsoletedï¼š å£°æ˜è¢«åºŸå¼ƒçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒå°†è¢«å®Œå…¨ç§»é™¤å¹¶ä¸”ä¸èƒ½å†ä½¿ç”¨ unavailableï¼šå£°æ˜åœ¨è¿™ä¸ªå¹³å°ä¸Šå°†æ°¸è¿œä¸å¯ç”¨ messageï¼šé¢å¤–çš„æ¶ˆæ¯å°†è¢«Clangæä¾›å½“å¿½ç•¥ä¸€ä¸ªè­¦å‘Šæˆ–è€…ä¸€ä¸ªé”™è¯¯åœ¨ä½¿ç”¨ä¸€ä¸ªè¢«å¼ƒç”¨æˆ–è€…è¢«åºŸå¼ƒçš„å£°æ˜ã€‚å¯¹å¼•å¯¼ç”¨æˆ·æ›¿æ¢APIså¾ˆæœ‰ç”¨ã€‚ åœ¨å£°æ˜æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ªavailabilityå±æ€§ï¼Œæ¯ä¸ªå¯¹åº”ä¸åŒçš„å¹³å°ï¼Œä»…å½“availabilityå±æ€§å¯¹åº”ç›¸åº”çš„ç›®æ ‡å¹³å°è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä»»ä½•å…¶ä»–æ‰å°†è¢«å¿½ç•¥ã€‚å‡å¦‚æ²¡æœ‰availability å±æ€§æŒ‡å®šå¯ç”¨æ€§å¯¹ç°åœ¨çš„ç›®æ ‡å¹³å°ï¼Œavailability å±æ€§å°†è¢«å¿½ç•¥ã€‚ æ”¯æŒçš„å¹³å° iosï¼šè‹¹æœçš„iOSæ“ä½œç³»ç»Ÿã€‚æœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡-mios-version-min=*version*æˆ–è€…-miphoneos-version-min=*version*å‘½ä»¤è¡Œå‚æ•°ã€‚ macosxï¼šè‹¹æœçš„OS X æ“ä½œç³»ç»Ÿï¼Œæœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡-mmacosx-version-min=*version*å‘½ä»¤è¡Œå‚æ•° overloadable Clangæä¾›å¯¹C++å‡½æ•°åœ¨Cä¸­é‡è½½çš„æ”¯æŒã€‚åœ¨Cä¸­å‡½æ•°é‡è½½è¢«å¼•è¿›ä½¿ç”¨overloadableå±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯èƒ½æä¾›ä¸€ä¸ªé‡è½½ç‰ˆæœ¬çš„tgsinå‡½æ•°æ¥ç²¾ç¡®æ‰§è¡Œç›¸å…³çš„æ ‡å‡†å‡½æ•°è®¡ç®—float,double,long doubleçš„æ­£å¼¦å€¼ï¼š 1234#include &lt;math.h&gt;float __attribute__((overloadable)) tgsin(float x) &#123; return sinf(x); &#125;double __attribute__((overloadable)) tgsin(double x) &#123; return sin(x); &#125;long double __attribute__((overloadable)) tgsin(long double x) &#123; return sinl(x); &#125; è¯·æ³¨æ„overloadableåªå¯¹å‡½æ•°èµ·ä½œç”¨ã€‚ä½ å¯ä»¥é‡è½½æ–¹æ³•å£°æ˜åœ¨æŸç§èŒƒå›´å†…é€šè¿‡ä½¿ç”¨é€šç”¨çš„è¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼Œæƒ³idæˆ–è€…void *. ä¸Šä¸‹æ–‡æ˜¯å›½ç‹å½“å®ƒé‡åˆ°ç¼–è¯‘å™¨ä¼˜åŒ–æ—¶ã€‚é€šè¿‡æä¾›é™åˆ¶åœ¨æ€æ ·è§£æä½ çš„ä»£ç ï¼Œå¢åŠ ä½ å‚æ•°å°½å¯èƒ½é«˜æ•ˆä»£ç çš„å¯èƒ½æ€§ã€‚é‡åˆ°ç¼–è¯‘å™¨æŠŠä½ æ‰“æ–­ï¼Œè¿™å°†æ˜¯ä¸€é¡¹å¥–åŠ±ã€‚ è¿˜æœ‰__attribute__å¹¶ä¸ä»…ä»…å¯¹ç¼–è¯‘å™¨æœ‰ç”¨ï¼šä¸‹ä¸€ä¸ªäººçœ‹ä»£ç ä¹Ÿå°†æ„Ÿè°¢è¿™äº›é¢å¤–çš„ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥å¤šèµ°å‡ è‹±å°ºè¿œå°†å¯¹ä½ çš„åˆä½œä¸­å’Œæ¥æ›¿è€…æˆ–è€…ä»ç°åœ¨ç®—2å¹´ä»¥åçš„ä½ (é‚£ä¸ªæ—¶å€™ä½ å·²ç»å¿˜è®°äº†æ‰€ä»¥çš„äº‹æƒ…å…³äºè¿™ä»½ä»£ç )è‡ªå·±æœ‰ç”¨ ä½ ä»˜å‡ºäº†å¤šå°‘çˆ±,æœ€ç»ˆä½ ä¼šå¾—åˆ°å¤šå°‘çˆ±ã€‚ è¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç¼–è¯‘å™¨","slug":"ç¼–è¯‘å™¨","permalink":"https://blog.wangruofeng007.com/tags/%E7%BC%96%E8%AF%91%E5%99%A8/"}]},{"title":"RunLoopè¯¦è§£","slug":"2016-01-13-runloopxiang-jie","date":"2016-01-11T20:44:06.000Z","updated":"2024-11-02T03:36:52.400Z","comments":true,"path":"2016/01/12/2016-01-13-runloopxiang-jie/","permalink":"https://blog.wangruofeng007.com/2016/01/12/2016-01-13-runloopxiang-jie/","excerpt":"","text":"NSRunLoopæ˜¯ä»€ä¹ˆï¼Ÿåœ¨Cocoaä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹(NSThread)å¯¹è±¡ä¸­å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªrun loopï¼ˆNSRunLoopï¼‰å¯¹è±¡ç”¨æ¥å¾ªç¯å¤„ç†è¾“å…¥äº‹ä»¶. NSRunloopå¹¶ä¸çœŸçš„æ˜¯ä¸€ä¸ªloopï¼Œçš„appleçš„æ–‡æ¡£ä¸­ ä¹Ÿæåˆ°äº†éœ€è¦è‡ªå·±å†™whileæˆ–è€…forè¯­å¥æ¥å®ç°,ç±»ä¼¼ä¸‹é¢ï¼š 123while(running)&#123; [NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];&#125; ä½•ä¸ºRun loop äº‹ä»¶æºä»å­—é¢ç¿»è¯‘æ¥çœ‹ï¼Œrun loopå°±æ˜¯ä¸€ä¸ªè¿è¡Œå¾ªç¯ï¼Œçš„ç¡®å®ƒå°±æ˜¯ä¸€ä¸ªå¤„ç†è¾“å…¥æ—¶é—´çš„è¿è¡Œå¾ªç¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å¤„ç†ï¼Œéš¾é“æ²¡æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™è®©çº¿ç¨‹ç©ºè½¬æµªè´¹èµ„æºï¼Ÿå¾ˆæ˜æ˜¾åœ¨æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™å”¤é†’çº¿ç¨‹ï¼Œæ²¡æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™è®©å…¶sleepæ›´å¥½ã€‚ ä¸‹é¢æˆ‘è¿˜æ˜¯æ‹¿è¿™å¼ ç™¾çœ‹ä¸åŒçš„å›¾æ¥è¯´äº‹ï¼š å¤„ç†çš„äº‹ä»¶åŒ…æ‹¬ä¸¤ç±» æ¥è‡ªTimer sourcesçš„åŒæ­¥äº‹ä»¶ æ¥è‡ªInput sourcesçš„å¼‚æ­¥äº‹ä»¶ 1.Time Source. Timer sources deliver synchronous events, occurring at a scheduled time or repeating interval.è‹¹æœæ–‡æ¡£ä¸­æœ‰å¥è¯éœ€è¦æ³¨æ„ï¼Œ Timer sources deliver events to their handler routines but do not cause the run loop to exit.* åˆ›å»ºNSTimeræ·»åŠ åˆ°run loopä¸­çš„æ—¶å€™ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNSTimeré»˜è®¤æ˜¯å¤„äºNSDefaultRunloopModeï¼Œè¿™ä¹Ÿå°±å¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆå¦‚æœä½ åœ¨ä½ çš„æ§åˆ¶å™¨ä¸­æ·»åŠ äº†ä¸€ä¸ªtimerå®šæ—¶åˆ·æ–°ä½ çš„ç•Œé¢ï¼Œè€Œä½ åœ¨æ‹–åŠ¨è§†å›¾çš„æ—¶å€™timerä¸å›fireï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ä½ çš„runloop æ˜¯NSEventTrackingRunloopMode,åœ¨è¿™ä¸ªmodeä¸‹timerä¸å›fire 2.input source input source ä¸»è¦æ˜¯ä¸€äº›å¼‚æ­¥çš„äº‹ä»¶ï¼Œæ¯”å¦‚æ¥è‡ªå…¶å®ƒçº¿ç¨‹æˆ–è€…å…¶å®ƒappçš„æ¶ˆæ¯ã€‚ input source ä¼ é€’å¼‚æ­¥äº‹ä»¶åˆ°å…¶å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸”ä½¿runUntilDate(ä¸çº¿ç¨‹ç›¸å…³è”çš„runloopå¯¹è±¡è°ƒç”¨)è¿”å› ä¸ºäº†èƒ½å¤Ÿå¤„ç†input sourcrï¼Œrun loops äº§ç”Ÿnotifications.é€šè¿‡æ³¨å†Œæˆrun-loop observerså¯ä»¥æ¥å—åˆ°è¿™äº›é€šçŸ¥ï¼ˆé€šè¿‡Core Foundation æ¥æ³¨å†Œobserversï¼‰. RunLoopModeæœ‰å“ªäº›ï¼Ÿrun loopåœ¨å¤„ç†è¾“å…¥äº‹ä»¶æ—¶ä¼šäº§ç”Ÿé€šçŸ¥ï¼Œå¯ä»¥é€šè¿‡Core Foundationå‘çº¿ç¨‹ä¸­æ·»åŠ run loop observersæ¥ç›‘å¬ç‰¹å®šäº‹ä»¶,ä»¥åœ¨ç›‘å¬çš„äº‹ä»¶å‘ç”Ÿæ—¶åšé™„åŠ çš„å¤„ç†å·¥ä½œã€‚ æ¯ä¸ªrun loopå¯è¿è¡Œåœ¨ä¸åŒçš„æ¨¡å¼ä¸‹,ä¸€ä¸ªrun loop modeæ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­åŒ…å«å…¶ç›‘å¬çš„è‹¥å¹²è¾“å…¥äº‹ä»¶æºï¼Œå®šæ—¶å™¨ï¼Œä»¥åŠåœ¨äº‹ä»¶å‘ç”Ÿæ—¶éœ€è¦é€šçŸ¥çš„run loop observersã€‚è¿è¡Œåœ¨ä¸€ç§modeä¸‹çš„run loopåªä¼šå¤„ç†å…¶run loop modeä¸­åŒ…å«çš„è¾“å…¥æºäº‹ä»¶ï¼Œå®šæ—¶å™¨äº‹ä»¶ï¼Œä»¥åŠé€šçŸ¥run loop modeä¸­åŒ…å«çš„observersã€‚ Cocoaä¸­çš„é¢„å®šä¹‰æ¨¡å¼æœ‰: Defaultæ¨¡å¼ å®šä¹‰NSDefaultRunLoopMode (Cocoa) kCFRunLoopDefaultMode (Core Foundation) æè¿°ï¼šé»˜è®¤æ¨¡å¼ä¸­å‡ ä¹åŒ…å«äº†æ‰€æœ‰è¾“å…¥æº(NSConnectioné™¤å¤–),ä¸€èˆ¬æƒ…å†µä¸‹åº”ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„run loop modeã€‚ Connectionæ¨¡å¼ å®šä¹‰ï¼šNSConnectionReplyMode(Cocoa) æè¿°ï¼šå¤„ç†NSConnectionå¯¹è±¡ç›¸å…³äº‹ä»¶ï¼Œç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼Œè¿™ä¸ªmodeè¡¨æ˜NSConnectionå¯¹è±¡ç­‰å¾…reply,ç”¨æˆ·åŸºæœ¬ä¸ä¼šä½¿ç”¨ã€‚ Modalæ¨¡å¼ å®šä¹‰ï¼šNSModalPanelRunLoopMode(Cocoa) æè¿°ï¼šå¤„ç†modal panelsäº‹ä»¶,éœ€è¦ç­‰å¾…å¤„ç†çš„input sourceä¸ºmodal panelæ—¶è®¾ç½®ï¼Œæ¯”å¦‚NSSavePanelå’ŒNSOpenPanelã€‚ Event trackingæ¨¡å¼ å®šä¹‰ï¼šUITrackingRunLoopMode(iOS) NSEventTrackingRunLoopMode(cocoa) æè¿°ï¼šä½¿ç”¨è¯¥æ¨¡å¼æ¥å¤„ç†ç”¨æˆ·ç•Œé¢ç›¸å…³çš„äº‹ä»¶,ä¾‹å¦‚åœ¨æ‹–åŠ¨loopæˆ–å…¶ä»–user interface tracking loopsæ—¶å¤„äºæ­¤ç§æ¨¡å¼ä¸‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ä¼šé™åˆ¶è¾“å…¥äº‹ä»¶çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå½“æ‰‹æŒ‡æŒ‰ä½UITableViewæ‹–åŠ¨æ—¶å°±ä¼šå¤„äºæ­¤æ¨¡å¼ã€‚ Commonæ¨¡å¼ å®šä¹‰ï¼šNSRunLoopCommonModes (Cocoa) kCFRunLoopCommonModes (Core Foundation) æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªä¼ªæ¨¡å¼ï¼Œå…¶ä¸ºä¸€ç»„run loop modeçš„é›†åˆï¼Œå°†è¾“å…¥æºåŠ å…¥æ­¤æ¨¡å¼æ„å‘³ç€åœ¨Common Modesä¸­åŒ…å«çš„æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥å¤„ç†ã€‚åœ¨Cocoaåº”ç”¨ç¨‹åºä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹Common ModesåŒ…å«default modes,modal modes,event Tracking modes, å¯ä½¿ç”¨CFRunLoopAddCommonModeæ–¹æ³•å‘Common Modesä¸­æ·»åŠ è‡ªå®šä¹‰modesã€‚ æ³¨æ„è¿™ä¸ªå¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹å®šçš„modeï¼Œè€Œæ˜¯ä¸€ä¸ªmodeçš„é›†åˆï¼Œè€Œrunloopå¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªç‰¹å®šçš„modeä¸‹ã€‚ è·å–å½“å‰çº¿ç¨‹çš„runloop mode 1NSString* runLoopMode = [[NSRunLoop currentRunLoop] currentMode]; NSTimerã€NSURLConnectionä¸UITrackingRunLoopModeNSTimerä¸NSURLConnectioné»˜è®¤è¿è¡Œåœ¨default modeä¸‹ï¼Œè¿™æ ·å½“ç”¨æˆ·åœ¨æ‹–åŠ¨UITableViewå¤„äºUITrackingRunLoopModeæ¨¡å¼æ—¶ï¼ŒNSTimerä¸èƒ½fire,NSURLConnectionçš„æ•°æ®ä¹Ÿæ— æ³•å¤„ç†ã€‚NSTimerçš„ä¾‹å­:åœ¨ä¸€ä¸ªUITableViewControllerä¸­å¯åŠ¨ä¸€ä¸ª0.2sçš„å¾ªç¯å®šæ—¶å™¨ï¼Œåœ¨å®šæ—¶å™¨åˆ°æœŸæ—¶æ›´æ–°ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¹¶æ˜¾ç¤ºåœ¨labelä¸Šã€‚ 123456789101112131415161718- (void)viewDidLoad &#123; label =[[UILabel alloc]initWithFrame:CGRectMake(10, 100, 100, 50)]; [self.view addSubview:label]; count = 0; NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.2 target: self selector: @selector(incrementCounter:) userInfo: nil repeats: YES];&#125;- (void)incrementCounter:(NSTimer *)theTimer&#123; count++; label.text = [NSString stringWithFormat:@&quot;%zd&quot;,count];&#125; åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯çœ‹åˆ°æ¯éš”0.2sï¼Œlabelä¸Šæ˜¾ç¤ºçš„æ•°å­—+1,ä½†å½“ä½ æ‹–åŠ¨æˆ–æŒ‰ä½tableViewæ—¶ï¼Œlabelä¸Šçš„æ•°å­—ä¸å†æ›´æ–°ï¼Œå½“ä½ æ‰‹æŒ‡ç¦»å¼€æ—¶ï¼Œlabelä¸Šçš„æ•°å­—ç»§ç»­æ›´æ–°ã€‚å½“ä½ æ‹–åŠ¨UItableViewæ—¶ï¼Œå½“å‰çº¿ç¨‹run loopå¤„äºUIEventTrackingRunLoopModeæ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¸å¤„ç†å®šæ—¶å™¨äº‹ä»¶ï¼Œå³å®šæ—¶å™¨æ— æ³•fire,labelä¸Šçš„æ•°å­—ä¹Ÿå°±æ— æ³•æ›´æ–°ã€‚è§£å†³æ–¹æ³•ï¼Œä¸€ç§æ–¹æ³•æ˜¯åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­å¤„ç†å®šæ—¶å™¨äº‹ä»¶ï¼Œå¯æŠŠTimeråŠ å…¥åˆ°NSOperationä¸­åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒåº¦;è¿˜æœ‰ä¸€ç§æ–¹æ³•æ—¶ä¿®æ”¹Timerè¿è¡Œçš„run loopæ¨¡å¼ï¼Œå°†å…¶åŠ å…¥åˆ°UITrackingRunLoopModeæ¨¡å¼æˆ–NSRunLoopCommonModesæ¨¡å¼ä¸­ã€‚å³ 1[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode]; æˆ– 1[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; å¦å¤–ä¸€ç§æ˜¯æ”¾åˆ°NSThreadä¸­ 1234567891011121314151617181920- (void)viewDidLoad&#123; [super viewDidLoad]; NSLog(@&quot;ä¸»çº¿ç¨‹ %@&quot;, [NSThread currentThread]); //åˆ›å»ºå¹¶æ‰§è¡Œæ–°çš„çº¿ç¨‹ NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(newThread) object:nil]; [thread start];&#125;- (void)newThread&#123; @autoreleasepool&#123; //åœ¨å½“å‰Run Loopä¸­æ·»åŠ timerï¼Œæ¨¡å¼æ˜¯é»˜è®¤çš„NSDefaultRunLoopMode [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(timer_callback) userInfo:nil repeats:YES]; //å¼€å§‹æ‰§è¡Œæ–°çº¿ç¨‹çš„Run Loopï¼Œå¦‚æœä¸å¯åŠ¨run loopï¼Œtimerçš„äº‹ä»¶æ˜¯ä¸ä¼šå“åº”çš„ [[NSRunLoop currentRunLoop] run]; &#125;&#125;- (void)timer_callback&#123; NSLog(@&quot;Timer %@&quot;, [NSThread currentThread]);&#125; NSURLConnectionä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè§SDWebImageä¸­çš„æè¿°,ä»¥åŠSDWebImageDownloader.mä»£ç ä¸­çš„å®ç°ã€‚ä¿®æ”¹NSURLConnectionçš„è¿è¡Œæ¨¡å¼å¯ä½¿ç”¨scheduleInRunLoop:forMode:æ–¹æ³•ã€‚ 123456NSURL *url = [NSURL URLWithString:@&quot;https://www.baidu.com&quot;];NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:15];self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];[connection start]; å‚è€ƒèµ„æ–™ï¼š Threading Programming Guide â€“ Run Loops NSRunLoop Class Reference NSURLConnection Class Reference NSTimer Class Reference CFRunLoop wiki SDWebImage TestButtonDown å…³äºNSRunloopçš„å­¦ä¹ å’Œç†è§£ å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"RunLoop","slug":"RunLoop","permalink":"https://blog.wangruofeng007.com/tags/RunLoop/"}]},{"title":"iOS7 tintColorè¯¦è§£","slug":"2016-01-13-ios7-tintcolorxiang-jie","date":"2016-01-11T20:41:39.000Z","updated":"2024-11-02T03:36:52.397Z","comments":true,"path":"2016/01/12/2016-01-13-ios7-tintcolorxiang-jie/","permalink":"https://blog.wangruofeng007.com/2016/01/12/2016-01-13-ios7-tintcolorxiang-jie/","excerpt":"","text":"ä¸ºä»€ä¹ˆéœ€è¦å‡ºç°tintColor ï¼Ÿ è§£å†³ä»¥å‰ä¸æ–¹ä¾¿ç»Ÿä¸€è®¾ç½®è§†å›¾é¢œè‰²é£æ ¼çš„é€šç‚¹ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰ç³»ç»Ÿæ§ä»¶å¤–è§‚ è·ŸUIAppearanceåè®®è®¾è®¡æœ‰ç‚¹ç±»ä¼¼ï¼ŒUIAppearanceæ˜¯ä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€ è®¾ç½®ä¸€ç±»æ§ä»¶çš„å¤–è§‚ï¼Œè€ŒtintColoræ˜¯ä¸ºæ–¹ä¾¿è®¾ç½®æŸä¸ªæ§ä»¶çš„å¤–è§‚ï¼Œæˆ–è€… è¯´æŸä¸ªå®¹å™¨å†…æ‰€æœ‰æ§ä»¶çš„é£æ ¼ã€‚ åƒåœ¨UIViewController ä¸­ï¼Œé€šè¿‡è¿™æ®µä»£ç å¯ä»¥å®ç°å®¹å™¨å†…ï¼Œæ‰€æœ‰çš„å­viewé£æ ¼ç»Ÿä¸€åŒ–,è¿™æ ·åœ¨è¿™ä¸ªæ§åˆ¶å™¨ä¸­çš„æ‰€æœ‰å­viewéƒ½ä¼šä»¥tintColoræ˜¾ç¤º 1self.view.tintAdjustmentMode = UIViewTintAdjustmentModeNormal UIViewçš„tintAdjustmentModeéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªUIViewTintAdjustmentModeæšä¸¾ UIViewTintAdjustmentModeAutomaticï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼è‡ªåŠ¨ï¼‰ UIViewTintAdjustmentModeNormalï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼æ­£å¸¸ï¼‰ UIViewTintAdjustmentModeDimmedï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼å˜æš—ï¼Œæ‰“å¼€æ§é£æ ¼ä¼šå˜æˆç°ç™½æ¨¡å¼ï¼‰ å…ˆçœ‹çœ‹å®˜æ–¹APIè¯´æ˜ iOS7ä»¥åæ‰€æœ‰çš„UIViewä»¥åŠå®ƒçš„å­ç±»éƒ½æ–°å¢äº†ä¸€ä¸ªå«tintColorçš„æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è§†å›¾è¿›è¡Œé¢œè‰²è°ƒæ•´ æ³¨æ„äº‹é¡¹ UIImageViewéœ€è¦è®¾ç½®renderingModeä¸ºUIImageRenderingModeAlwaysTemplateæ‰èƒ½ç”Ÿæ•ˆã€‚renderingModeæ˜¯ä¸€ä¸ªç±»å‹ä¸ºUIImageRenderingModeçš„æšä¸¾ UIImageRenderingModeAutomatic ï¼ˆé»˜è®¤æ¸²æŸ“æ¨¡å¼ï¼Œè‡ªåŠ¨æ¨¡å¼ï¼‰ UIImageRenderingModeAlwaysOriginalï¼ˆæ€»æ˜¯ç»˜åˆ¶åŸæ¥çš„å›¾ç‰‡ï¼Œä¸æŠŠå®ƒå½“æˆä¸´æ—¶å›¾ç‰‡æ¥å¤„ç†ï¼‰ UIImageRenderingModeAlwaysTemplate ï¼ˆæ€»æ˜¯ç»˜åˆ¶ä¸´æ—¶å›¾ç‰‡ï¼Œä¼šå¿½ç•¥å®ƒåŸæœ¬çš„é¢œè‰²ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®tintColorç”Ÿäº§å›¾ç‰‡ï¼‰ UIImageViewçš„ä½¿ç”¨12UIImage *image = [UIImage imageNamed:@&quot;xxx.png&quot;];image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate]; tintColoræ›´æ–°åœ¨å­ç±»ä¸­é‡å†™- (void)tintColorDidChange æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ¯æ¬¡æ›´æ–°tintColorçš„æ—¶å€™è°ƒç”¨ç›¸å…³é…ç½® 12345- (void)tintColorDidChange&#123; _tintColorLabel.textColor = self.tintColor; _tintColorBlock.backgroundColor = self.tintColor;&#125; å‚è€ƒé“¾æ¥ Demo - iOS7 tintColor day by day","categories":[{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"}],"tags":[{"name":"Skill","slug":"Skill","permalink":"https://blog.wangruofeng007.com/tags/Skill/"},{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/tags/iOS/"}]},{"title":"MacOSX10.11ä¸Šç”¨Octopresså’ŒGitHubæ­å»ºä¸ªäººåšå®¢","slug":"2016-01-13-macosx10-dot-11shang-yong-octopresshe-githubda-jian-ge-ren-bo-ke","date":"2015-12-11T20:30:38.000Z","updated":"2024-11-02T06:08:18.362Z","comments":true,"path":"2015/12/12/2016-01-13-macosx10-dot-11shang-yong-octopresshe-githubda-jian-ge-ren-bo-ke/","permalink":"https://blog.wangruofeng007.com/2015/12/12/2016-01-13-macosx10-dot-11shang-yong-octopresshe-githubda-jian-ge-ren-bo-ke/","excerpt":"","text":"åºè¨€ç»è¿‡ä¸€æ™šä¸Šçš„æŠ˜è…¾ï¼Œç»ˆäºä»HexoæˆåŠŸè½¬å…¥Octopress,é‚£ä¹ˆæœ¬æ–‡å°±æ¥ç»†è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Octopress+GitHub Pagesæ­å»ºä¸ªäººåšå®¢ ä¸ºä»€ä¹ˆé€‰æ‹© Octopress &amp; Github Pages? å…è´¹ä¸”ç‹¬ç«‹ã€‚æŠŠ Octopress åšå®¢ç³»ç»Ÿæ­å»ºåˆ° Github Pages è™½æ˜¯å…è´¹ï¼Œä½†ä¸å¤±ç‹¬ç«‹æ€§ï¼Œå³ä¾¿ Github å…¨ç«™å…³é—­ï¼Œä½ ä¹Ÿå°†æœ‰ä¸€ä»½æœ¬åœ°å…¨ç«™å¤‡ä»½ï¼Œéšæ—¶å¯ä»¥é‡æ–°æ¢å¤ã€‚ä¸å¿…å—æ‰˜ç®¡å•†ä¹‹æ°”ï¼Œè€Œä¸”è¿˜å…è´¹ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œç”šè‡³å¯ä»¥è‡ªè¡Œæ’å…¥å¹¿å‘ŠæŒ£é’±ã€‚ ç‰ˆæœ¬æ§åˆ¶ã€‚å†™æ–‡ç« ï¼Œå»ºç½‘ç«™ï¼Œåšè½¯ä»¶éƒ½éœ€è¦ä¿®æ”¹ï¼Œä½†æœ‰æ—¶å€™æ”¹å®Œäº†åˆä¼šåæ‚”ï¼Œå¦‚æœæœ‰æ—¶å…‰æœºå°±å¥½äº†ï¼ŒGit å°±æ˜¯ä½ çš„æ—¶å…‰æœºã€‚å½“ç„¶å¦‚æœä½ ä¸æƒ³äº†è§£è¿™äº›çœ‹ä¸Šå»å¾ˆå”¬äººçš„ IT åè¯ï¼Œåªæ˜¯æƒ³å†™åšå®¢çš„è¯ï¼Œè¯·åœ¨éœ€è¦çš„æ—¶å€™å†ç ”ç©¶è¿™æ¡çš„å†…å®¹ã€‚ ç›¸å¯¹å…¶ä»–æ‰˜ç®¡åˆ° Github ä¸Šçš„åšå®¢ç¨‹åºï¼ŒOctopress æ›´åŠ æˆç†Ÿæ˜“ä¸Šæ‰‹ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼ŒJekyll å¯ä»¥è¯´æ˜¯æ¯›å¯æˆ¿ï¼ŒHexo å’Œ Octopress ç®—æ˜¯ç®€è£…ä¿®ï¼Œä½†ç›¸æ¯” Hexoï¼ŒOctopress æœ‰æ›´å¤šè£…ä¿®èŒƒä¾‹å’Œæ›´å¤šç†Ÿç»ƒçš„è£…ä¿®å·¥äººï¼Œæ›´å®¹æ˜“è·å–å¸®åŠ©ã€‚å½“ç„¶å¦‚æœä½ åªæƒ³ä½ç²¾è£…ä¿®çš„æˆ¿å­ï¼Œé‚£ä¸å¾—ä¸èŠ±ç‚¹é’±ä¸Š WordPress äº† ä½¿ç”¨ Markdownã€‚Markdown æ˜¯ç°åœ¨æœ€ä¸ºæµè¡Œçš„è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œä¹Ÿæ˜¯å·²æ•…çš„å¤©æ‰ Aaron Swartz ç•™ç»™ä¸–äººæœ€å¥½çš„ç¤¼ç‰©ï¼Œçªƒä»¥ä¸ºæ¯ä¸ªåœ¨äº’è”ç½‘ä¸Šå‘å¸ƒæ–‡ç« çš„äººéƒ½è¯¥æŒæ¡ã€‚ æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼ŒOctopress æ˜¯ä¸ªA blogging framework for hackers(ã€Œä¸ºé»‘å®¢è®¾è®¡çš„åšå®¢æ¡†æ¶ã€)ï¼Œè¿™å¾ˆé…·ï¼Œä½ ä¸è§‰å¾—å—ï¼Ÿ å¦‚æœä½ ä¹‹å‰æ²¡æœ‰å†™è¿‡åšå®¢ï¼Œæ‰“ç®—å¼€å§‹æ­å»ºè‡ªå·±ç¬¬ä¸€ä¸ªåšå®¢çš„è¯ï¼Œå…¶å®ä¹Ÿä¸å¦¨è¯•è¯• Octopressï¼Œå…è´¹è¿˜èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œä½•ä¹è€Œä¸ä¸ºï¼Ÿ æœ¬æ–‡æ˜¯åœ¨OS X EI Capitanç³»ç»Ÿä¸Šæ­å»ºä¸€ä¸ªåŸºäºOctopressçš„ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œè®°å½•æ­å»ºè¿‡ç¨‹çš„å„ç§å‘ï¼Œå¸Œæœ›å¯¹æœ‰æƒ³æ­å»ºä¸ªäººåšå®¢çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©ã€‚ æœ¬æ–‡æ˜¯å»ºç«‹åœ¨ä½ æœ‰ShellæŒ‡ä»¤åŸºç¡€å’ŒGitæ“ä½œåŸºç¡€ä¹‹ä¸Šï¼Œå¦‚æœä¸äº†è§£çš„è¯ï¼Œéœ€è¦æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚ å…ˆè§£é‡Šå‡ ä¸ªä¸“ä¸šæœ¯è¯­ï¼š Ruby Ruby æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚Octopress æ˜¯ç”¨ Rubyè¯­è¨€ å®ç°çš„ã€‚æˆ‘ä»¬ä¸éœ€è¦å¯¹å®ƒæœ‰å¤ªå¤šäº†è§£ï¼Œåªéœ€è¦æ­£ç¡®å®‰è£… Ruby çš„ç¯å¢ƒï¼ˆRubyç‰ˆæœ¬å¿…é¡»ä¸ä½äº1.9.3-p0ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰åŠæŒ‰æ­¥éª¤æ‰§è¡ŒæŒ‡ä»¤å³å¯ã€‚ RubyGems RubyGemsï¼ˆç®€ç§° gemsï¼‰æ˜¯ä¸€ä¸ªç”¨äºå¯¹ Rubyç»„ä»¶è¿›è¡Œæ‰“åŒ…çš„ Ruby æ‰“åŒ…ç³»ç»Ÿã€‚å®ƒå¯ä»¥ç”¨æ¥æŸ¥æ‰¾ã€å®‰è£…ã€å‡çº§å’Œå¸è½½è½¯ä»¶åŒ…ã€‚æˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡å®ƒå®‰è£…OctopressåŒ…çš„ RVM RVM æ˜¯Ruby Version Managerçš„ç®€ç§°ï¼Œæ˜¯ä¸€æ¬¾ Ruby è¯­è¨€å®‰è£…ã€ç®¡ç†çš„å·¥å…·ã€‚æˆ‘ä»¬å¯¹ Ruby çš„æ“ä½œæ˜¯é€šè¿‡å®ƒçš„æŒ‡ä»¤å®Œæˆçš„ã€‚ Jekyll Jekyll ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚ Jekyll æœ‰ä¸€å¥—æ¨¡æ¿ç›®å½•ï¼Œå¯ä»¥å°† Markdownæ–‡ä»¶ï¼ˆæˆ–è€…Textileï¼‰è½¬æ¢ä¸ºé™æ€ç½‘é¡µï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å¯å‘å¸ƒçš„é™æ€ç½‘ç«™ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†äº§ç”Ÿçš„é™æ€ç½‘ç«™å¸ƒç½®åˆ° GitHub Pages ä¸Šï¼Œç”Ÿæˆä¸ªäººåšå®¢ç«™ç‚¹ã€‚ æƒ³äº†è§£æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹ä¸­æ–‡æ–‡æ¡£ã€‚ Octopress Octopress æ˜¯åŸºäº Jekyll çš„åšå®¢æ¡†æ¶ã€‚ä»–ä»¬çš„å…³ç³»å°±åƒ jQuery ä¸ js çš„å…³ç³»ä¸€æ ·ã€‚ å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç°æˆçš„ç¾è§‚çš„ä¸»é¢˜æ¨¡æ¿ï¼Œå¹¶ä¸”é…ç½®ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œå¤§å¤§é™ä½äº†æˆ‘ä»¬å»ºç«™çš„é—¨æ§›ã€‚ Git åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œè·Ÿå®ƒæœ‰ç‚¹ç±»ä¼¼çš„æ˜¯SVNï¼Œåªæ˜¯ä¸¤è€…ä½¿ç”¨åœºæ™¯ä¸ä¸€æ ·ã€‚ GitHub GitHub æ˜¯å…¨çƒæœ€çƒ­çš„å¼€æºç¤¾åŒºï¼Œç¨‹åºç•Œçš„ Facebookã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›ä»£ç æ‰˜ç®¡æœåŠ¡ï¼Œä»¥åŠæˆ‘ä»¬æ­å»ºåšå®¢æ‰€éœ€è¦çš„ Pages æœåŠ¡ã€‚ GitHub Pages GitHub Pages æ˜¯ GitHub æä¾›çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒç”¨äºæ˜¾ç¤ºæ‰˜ç®¡åœ¨ GitHub ä¸Šçš„é™æ€ç½‘é¡µã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ Github Pages æ­å»ºåšå®¢ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠé¡¹ç›®çš„æ–‡æ¡£å’Œä¸»é¡µæ”¾åœ¨ä¸Šé¢ã€‚ é€šè¿‡ä»¥ä¸Šå†…å®¹ï¼Œæˆ‘ä»¬å¤§æ¦‚èƒ½å¤Ÿæ˜ç™½ Octopress å»ºç«™çš„åŸç†ï¼šæˆ‘ä»¬ä½¿ç”¨åŸºäº Jekyll çš„ Octopress ç«™ç‚¹ç”Ÿæˆå·¥å…·ï¼Œç”Ÿæˆæœ¬åœ°çš„é™æ€ç½‘ç«™ã€‚ç„¶åå°†é™æ€ç½‘ç«™æ‰˜ç®¡åˆ° GitHub ä¸ºæˆ‘ä»¬æä¾›çš„ GitHub Pages æœåŠ¡ä¸Šã€‚è®¿é—® username.github.io å³å¯æ˜¾ç¤ºä½ çš„ä¸ªäººåšå®¢ç«™äº† æ˜ç™½äº†ä¸Šé¢è¿™äº›å†…å®¹ï¼Œä¸‹é¢è¿›è¡Œå…·ä½“çš„æ­å»ºå·¥ä½œï¼š ç¬¬ä¸€æ­¥ï¼šå®‰è£… RubyMacè‡ªå¸¦Rubyç¯å¢ƒæ‰“å¼€ç»ˆç«¯ï¼Œå®‰è£… RVM ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 1$ curl -L https://get.rvm.io | bash -s stable --ruby æ¥ä¸‹æ¥æˆ‘ä»¬è¦æŸ¥çœ‹è‡ªå·±çš„ Ruby ç¯å¢ƒ 1$ ruby -v å¦‚æœä½ çš„ Ruby ç‰ˆæœ¬ä¸ä½äº 1.9.3-p0 å¯ä»¥å¿½ç•¥ Ruby çš„å®‰è£…ï¼ˆæˆ–å‡çº§ï¼‰ï¼Œç›´æ¥è·³åˆ°å®‰è£… RubyGems ã€‚ å¦åˆ™ï¼Œæˆ‘ä»¬æ‰§è¡Œä¹‹åçš„æ“ä½œï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 12$ rvm install 1.9.3$ rvm use 1.9.3 ç„¶åå®‰è£… RubyGemsï¼Œ ç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 1$ rvm rubygems latest åˆ°è¿™é‡Œç¬¬ä¸€æ­¥å®Œæˆã€‚æˆ‘ä»¬å¯ä»¥å†æ‰§è¡Œä¸€æ¬¡ç¬¬ä¸€æ¡æŒ‡ä»¤ ruby -v æ¥æŸ¥çœ‹å½“å‰ Ruby çš„ç‰ˆæœ¬äº†ã€‚ ç¬¬äºŒæ­¥ï¼šå®‰è£…Octopresså› ä¸ºMacç³»ç»Ÿè‡ªåŠ¨gitç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘gitçš„å®‰è£…ã€‚ç›´æ¥å°† Octopressçš„é¡¹ç›®cloneåˆ°æœ¬åœ°ï¼Œåœ¨ç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 1$ git clone git://github.com/imathis/octopress.git octopress å®Œæˆåè¿›å…¥ octopress çš„ç›®å½• 1$ cd octopress æ¥ä¸‹æ¥ï¼Œå®‰è£…ä¾èµ–ï¼š 12345$ gem install bundler# è¿™æ—¶ä½ å¯èƒ½ä¼šé‡åˆ°æ²¡æœ‰æƒé™çš„é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åŠ ä¸Šsudoé‡æ–°æ‰§è¡Œï¼Œå¹¶è¾“å…¥å¯†ç ã€‚$ sudo gem install bundler# æ¥ä¸‹æ¥æ‰§è¡Œï¼š$ bundle install è¿™æ—¶ä½ å¯èƒ½è¿˜ä¼šé‡åˆ°é—®é¢˜å¦‚ä¸‹ï¼š 12345Fetching gem metadata from https://rubygems.org/...........Resolving dependencies...Gem::RemoteFetcher::FetchError: SocketError: getaddrinfo: Name or service not known (https://rubygems.org/gems/rake-10.4.2.gem)An error occurred while installing rake (10.4.2), and Bundler cannot continue. è¿™æ˜¯å› ä¸ºè¢«å¢™äº†ï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼š ä¸€ä¸ªæ˜¯ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç¿»å¢™å·¥å…·ï¼› å¦ä¸€ä¸ªï¼Œæ·˜å®åšäº†ä¸€ä¸ªgemçš„é•œåƒã€‚æˆ‘ä»¬éœ€è¦åœ¨Octopressçš„æ–‡ä»¶ç›®å½•ä¸‹æ‰¾åˆ°Gemfileæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„source &#39;https://rubygems.org/&#39;æ”¹ä¸ºsource &#39;https://ruby.taobao.org/&#39; å†é‡æ–°è¿è¡Œbundle installå°±å¯ä»¥äº†ã€‚ è¿™æ®µå†…å®¹å¯ä»¥å‚è€ƒ bundle install æç¤ºå¦‚ä¸‹ï¼Œæ˜¯éœ€è¦ç¿»å¢™è§£å†³ä¹ˆã€‚ ä¸‹é¢å°±å¯ä»¥å®‰è£… Octopress çš„é»˜è®¤ä¸»é¢˜äº†ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 1rake install è¿™æ ·ä¸€ä¸ªæœ€åŸºæœ¬çš„ä¸ªäººåšå®¢ç«™å°±äº§ç”Ÿäº†ã€‚ å®‰è£…octostrap3ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰1234$ cd octopress$ git clone https://github.com/kAworu/octostrap3.git .themes/octostrap3$ rake &quot;install[octostrap3]&quot;$ rake generate ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯ 1A theme is already installed, proceeding will overwrite existing files. Are you sure? [y/n] è¾“å…¥yç»§ç»­ï¼Œç„¶åå¼€å§‹å®‰è£…ã€‚ã€‚ã€‚ 1234567## Copying octostrap3 theme into ./source and ./sassmkdir -p sourcecp -r .themes/octostrap3/source/. sourcemkdir -p sasscp -r .themes/octostrap3/sass/. sassmkdir -p source/_postsmkdir -p public æ˜¾ç¤ºä¸Šé¢çš„å†…å®¹å®Œæˆåæ²¡æœ‰é”™è¯¯ï¼Œå°±å®‰è£…ä¸»é¢˜å®Œæˆ å¯ä»¥çœ‹å‡ºï¼Œç°åœ¨æ˜¾ç¤ºå¾—éƒ½æ˜¯é¢„è®¾å€¼ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹Octopressç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚ æ–‡ä»¶ç›®å½•_config.yml æè¿°ï¼šä¿å­˜é…ç½®æ•°æ®ã€‚å¾ˆå¤šé…ç½®é€‰é¡¹éƒ½ä¼šç›´æ¥ä»å‘½ä»¤è¡Œä¸­è¿›è¡Œè®¾ç½®ï¼Œä½†æ˜¯å¦‚æœä½ æŠŠé‚£äº›é…ç½®å†™åœ¨è¿™å„¿ï¼Œä½ å°±ä¸ç”¨éè¦å»è®°ä½é‚£äº›å‘½ä»¤äº†ã€‚ _config.yml æ–‡ä»¶å…±åˆ†ä¸º3ä¸ªéƒ¨åˆ†å†…å®¹ Main Configs Jekyll &amp; Plugins 3rd Party Settings ç›®å‰ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ç¬¬ä¸€éƒ¨åˆ†Main Configsã€‚ # ----------------------- # # Main Configs # # ----------------------- # #ç½‘ç«™åœ°å€ url: http://wangruofeng.github.io #ç½‘ç«™æ ‡é¢˜ title: ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢ #ç½‘ç«™å‰¯æ ‡é¢˜ subtitle: å¤©å¤©å‘ä¸Š. #ç½‘å€ä½œè€…ï¼Œé€šå¸¸æ˜¾ç¤ºåœ¨é¡µå°¾å’Œæ¯ç¯‡æ–‡ç« çš„å°¾éƒ¨ author: Ace #æœç´¢å¼•æ“ #simple_search: http://google.com/search #ç½‘ç«™çš„æè¿°ï¼Œå‡ºç°åœ¨HTMLé¡µé¢ä¸­çš„ meta ä¸­çš„ description #description: å¯¹åº”å¡«å…¥ä½ çš„ä¸ªäººä¿¡æ¯ï¼Œå…¶ä¸­urlä¸ºå¿…å¡«çš„ï¼Œä¸€èˆ¬å¡«GitHubä»“åº“å¯¹åº”çš„è¿æ¥ï¼Œå…¶å†…å®¹å¤§è‡´å°±æ˜¯ username.github.io ï¼Œè¿™ä¸ªåœ°å€æˆ‘ä»¬ä¼šåœ¨åé¢æ­¥éª¤ä¸­è·å¾—ã€‚ ç¬¬ä¸‰æ­¥ï¼šé›†æˆ GitHub Pages1.æ³¨å†Œ Github è´¦å· è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ—©æ™šéœ€è¦ï¼Œå» http://github.com æ³¨å†Œå§ã€‚ 2.åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªä»£ç å‚è€ƒï¼Œé¡¹ç›®åç§°å‘½åè§„åˆ™ä¸º username.github.ioï¼Œusernameå¿…é¡»ä¸ç”¨æˆ·åç§°ä¸€è‡´ã€‚ åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåå¯ç”¨ï¼Œå¯ä»¥åœ¨è¿™æ—¶å°±é…ç½®å¥½ï¼Œæ¯•ç«Ÿè§£æèµ·æ¥éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œä¸å¦‚åœ¨æˆ‘ä»¬æ­å»ºåšå®¢çš„æ—¶å€™è®©å®ƒå¼€å§‹ï¼Œè¿™æ ·æˆ‘ä»¬æ­å»ºå®Œæˆåï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç›´æ¥ç”¨è‡ªæœ‰åŸŸåè®¿é—®äº†ã€‚ æˆ‘çš„æ˜¯åœ¨ä¸‡ç½‘ç”³è¯·çš„ï¼ŒåŸä»·ä¸€å¹´100å¤šç‚¹ç°åœ¨æœ‰æ´»åŠ¨ä¾¿å®œçš„å‡ å—çš„éƒ½æœ‰ï¼Œæƒ³è¦ä¸ªæ€§åŸŸåçš„å¯ä»¥å»æ³¨å†Œä¸€ä¸ªã€‚ å¦‚æœä½ ç”¨çš„æ˜¯é¡¶çº§åŸŸåï¼Œæ¯”å¦‚ wangruofeng007.com, è¯·åˆ›å»ºä¸¤ä¸ª A è®°å½• (A Record) åˆ†åˆ«æŒ‡å‘ 192.30.252.153 å’Œ 192.30.252.154. å¦‚æœä½ ä½¿ç”¨äºŒçº§åŸŸåï¼Œæ¯”å¦‚ blog.wangruofeng007.com, è¯·å°†è¯¥åŸŸåçš„ CNAME æŒ‡å‘ [your_username].github.io, æŠŠå…¶ä¸­çš„ [your_username]æ¢æˆä½ è‡ªå·±åœ¨ Github ä¸Šçš„ç”¨æˆ·åã€‚ å¦‚æœä½ æš‚æ—¶æ²¡æœ‰åŸŸåï¼Œè¿™ä¸€æ­¥å¯ä»¥æš‚æ—¶ä¸ç”¨ç®¡ Ps. åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æœ€å¥½ä¸è¦æ·»åŠ å¿½ç•¥æ–‡ä»¶å’ŒREADMEæ–‡ä»¶ã€‚å› ä¸ºæˆ‘ä»¬è¦æŠŠæœ¬åœ°çš„ git ä»“åº“åŒæ­¥åˆ° GitHub è¿œç¨‹ä»“åº“ä¸­ã€‚å¦‚æœå†è¿œç¨‹ä»“åº“ä¸­æ·»åŠ äº†å…¶ä»–æ–‡ä»¶ï¼Œéœ€è¦æˆ‘ä»¬æ‰§è¡Œ pull æ“ä½œã€‚é™¤éä½ èƒ½éå¸¸ç†Ÿç»ƒçš„ä½¿ç”¨ git ï¼Œå¦åˆ™ä¸å»ºè®®ä½ åˆ¶é€ ä¸å¿…è¦çš„éº»çƒ¦ã€‚æ¥ä¸‹æ¥å°†æœ¬åœ°ä»£ç ä»“åº“åŒæ­¥åˆ° GitHub ä¸Šï¼Œæ‰§è¡Œç»ˆç«¯æŒ‡ä»¤ï¼š 1$ rake setup_github_pages å®ƒä¼šè¦æ±‚ä½ ç»‘å®šè¿œç¨‹ä»“åº“çš„åœ°å€ï¼Œæ­¤æ—¶åªéœ€è¦è¾“å…¥å³å¯ï¼š 1$ git@github.com:username/username.github.com.git è¿™æ ·å°±ä¼šå°† Octopress ç”Ÿæˆçš„é™æ€ç«™ç‚¹ä¸ GitHub è¿›è¡Œç»‘å®šäº†ã€‚ ä¹‹åæˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« ï¼š 1rake new_post[&quot;title&quot;] ç„¶åä¼šæœ‰ä¸€ä¸ªåä¸º yyyy-mm-dd-Post-Title.markdown çš„æ–‡ä»¶åœ¨ octopress&#x2F;source&#x2F;_posts ç›®å½•ä¸‹ç”Ÿæˆï¼Œå…¶ä¸­ yyyy-mm-dd æ˜¯ä½ å½“æ—¶çš„æ—¥æœŸã€‚ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12cd source/_posts/vim yyyy-mm-dd-Post-Title.markdown å³å¯ç”¨ vim ç¼–è¾‘å™¨ç¼–è¾‘çš„åˆšæ‰çš„æ–‡ç« äº†ï¼Œå¥½å§æˆ‘çŸ¥é“ä½ ä½œä¸ºè¿™ç¯‡æ–‡ç« çš„è¯»è€…å¹¶ä¸æ˜¯ä¸€ä¸ªèƒ½ç†Ÿç»ƒä½¿ç”¨ vim çš„äººï¼Œé‚£ä¹ˆè¯·åœ¨å‘½ä»¤è¡Œè¾“å…¥ qï¼é€€å‡ºè¿™ä¸ªç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä¸æƒ³å‡è£…æ˜¯ä¸ªé»‘å®¢çš„è¯ï¼Œå…¶å®å‘å¸ƒæ–‡ç« å¹¶ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ã€‚ æˆ‘ä»¬ç›´æ¥æ‰“å¼€ octopress/source/_posts æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°åˆšæ‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç”¨ä½ å–œæ¬¢çš„ Markdown ç¼–è¾‘å™¨ï¼ˆå…è´¹çš„æˆ‘æ¨è Mouæˆ–è€…Atomï¼‰æˆ–è€…æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¯¹æ–‡ç« å†…å®¹è¿›è¡Œç¼–è¾‘ã€‚ æ‰“å¼€æ–‡ä»¶åï¼Œä½ ä¼šå‘ç°æ–‡ç« å¼€å¤´æœ‰è¿™ä¹ˆä¸€æ®µä¿¡æ¯: 1234567--- layout: post title: &quot;Post Title&quot; date: yyyy-mm-dd hh:mm:ss comments: true categories: &quot;&quot;--- è¿™å…¶å®æ˜¯è¿™ç¯‡æ–‡ç« çš„å…ƒæ•°æ®ï¼šlayout æš‚æ—¶ä¸è¦ç†ä¼šï¼›title æ˜¯è¿™ç¯‡æ–‡ç« æ˜¾ç¤ºåœ¨æœ€ç»ˆç½‘é¡µä¸Šçš„æ ‡é¢˜ï¼›date éƒ¨åˆ†æ˜¯è¯¦ç»†çš„æ–‡ä»¶ç”Ÿæˆæ—¶é—´ï¼Œå¦‚ 2014-01-28 03:35:00ï¼›comment éƒ¨åˆ†è¡¨ç¤ºæ˜¯å¦å…è®¸è¯„è®ºï¼Œç›®å‰æ˜¾ç¤ºæ˜¯å…è®¸ï¼Œå¦‚æœæƒ³å…³é—­è¯„è®ºï¼Œè¯·æ”¹ä¸º falseï¼›categories æŒ‡è¿™ç¯‡æ–‡ç« çš„åˆ†ç±»ç›®å½•ï¼Œè¯·åœ¨åé¢å¼•å·ä¸­è¾“å…¥,ä¸ç”¨å¼•å·ä¹Ÿå¯ä»¥ï¼Œå¤šä¸ªåˆ†ç±»ç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚æœæ²¡æœ‰è¯¥ç›®å½•ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚è¯·ä¸è¦åˆ é™¤è¿™æ®µä¿¡æ¯ï¼Œåœ¨è¿™æ®µä¿¡æ¯ä¸‹é¢å¼€å§‹ä½ çš„æ–‡ç« å†…å®¹ è¿™ä»¶äº‹æƒ…ç»™æˆ‘ä»¬çš„å¯å‘æ˜¯ï¼Œä»¥åå‘å¸ƒæ–‡ç« ï¼Œå…¶å®å¹¶ä¸éœ€è¦ä½¿ç”¨ç»ˆç«¯å‘½ä»¤è¡Œç”Ÿæˆæ–‡ä»¶ã€‚å¯ä»¥ç›´æ¥å°†è‡ªå·±å†™å¥½çš„æ–‡ç« æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå½“ç„¶è¯·æŒ‰ç…§ yyyy-mm-dd-Post-Title.markdown è¿™æ ·çš„æ–‡ä»¶æ ¼å¼å‘½åï¼ŒåŒæ—¶è®°å¾—åœ¨æ–‡ç« å‰é¢æ·»åŠ å…ƒæ•°æ®ä¿¡æ¯ã€‚è¿™ç§åšæ³•ç”Ÿæˆçš„æ–‡ç« ä¸ä¸Šé¢çš„æ–¹æ³•æ— å¼‚ ç”Ÿæˆçš„æ–°æ–‡ç« åœ¨source&#x2F;_post&#x2F;ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åæ„æˆä¸ºæ—¶é—´å’Œæ ‡é¢˜çš„æ‹¼éŸ³ã€‚æˆ‘ä»¬å¯ä»¥ç”¨Markdownç¼–è¾‘å™¨å¯¹æ–‡ç« è¿›è¡Œä¿®æ”¹ã€‚ä¹‹åç”Ÿæˆé™æ€ç«™ç‚¹ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 12# ç”Ÿæˆé™æ€ç«™ç‚¹$ rake generate å¦‚æœä½ æƒ³é¢„è§ˆæœ¬åœ°çš„ç«™ç‚¹ï¼Œå¯ä»¥æ‰§è¡Œç»ˆç«¯æŒ‡ä»¤ï¼š 12# é¢„è§ˆé™æ€ç«™ç‚¹$ rake preview æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€localhost:4000 æŸ¥çœ‹æ•ˆæœã€‚å¦‚æœæ²¡æœ‰é—®é¢˜å¯ä»¥å°†é™æ€ç«™ç‚¹åŒæ­¥åˆ° GitHub è¿œç¨‹ä»“åº“ä¸­ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š 12# åŒæ­¥å†…å®¹$ rake deploy ä½ ä¼šå‘ç°æˆ‘ä»¬çš„é™æ€ç«™ç‚¹å·²ç»è¢« push åˆ° GitHubä»“åº“çš„ master åˆ†æ”¯ä¸Šã€‚ç¨ç­‰å‡ åˆ†é’Ÿï¼Œè®¿é—® username.github.io (æˆ–è€… username.github.com)ï¼Œå°±ä¼šå‘ç°ä½ çš„ä¸ªäººåšå®¢ç«™å·²åˆ›å»ºæˆåŠŸäº†ã€‚å¦‚æœä½ è¿˜æƒ³ç»™è‡ªå·±çš„æœ¬åœ°èµ„æºæ–‡ä»¶ï¼ˆå¦‚Markdownæ–‡ä»¶ç­‰å†…å®¹ï¼‰ä¹ŸåŒæ­¥åˆ° GitHub ä¸­ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š 123$ git add .$ git commit -m &quot;comment&quot;$ git push origin source è¿™æ ·æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶å°±ä¼šåŒæ­¥åˆ° GitHub çš„ source åˆ†æ”¯äº†ã€‚ ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼ˆå¯é€‰ï¼‰å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼Œå¹¶ä¸”æƒ³æŒ‡å‘è¿™ä¸ªæ–°åšå®¢çš„è¯ï¼Œè¯·é¦–å…ˆç¡®ä¿æ‰§è¡Œäº†ç¬¬ä¸‰æ­¥çš„åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œå¯ä»¥éšæ—¶æ‰§è¡Œã€‚ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ³¨æ„æŠŠ your-domain.com æ¢æˆä½ è‡ªå·±çš„åŸŸåã€‚ 1echo &#x27;your-domain.com&#x27; &gt;&gt; source/CNAME è¿™å¥è¯çš„æ„æ€æ˜¯åœ¨sourceåˆ†æ”¯ä¸‹åˆ›å»ºä¸€ä¸ªCNAMEçš„æ–‡ä»¶å¹¶ä¸”å°†your-domain.comå†™å…¥æ–‡ä»¶ ç„¶åå†æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12rake generaterake deploy æˆ–è€…äºŒåˆä¸€ 1rake gen_deploy è¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨è‡ªå·±çš„åŸŸåäº†ã€‚åŸŸåè§£æéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰é©¬ä¸Šç”Ÿæ•ˆï¼Œè¯·ä¸è¦ç€æ€¥ã€‚å¦‚æœé•¿æ—¶é—´æ²¡æœ‰ç”Ÿæ•ˆï¼Œè¯·ç¡®ä¿å®Œæ•´æ‰§è¡Œäº† åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰å’Œä½¿ç”¨è‡ªå·±çš„åŸŸåï¼ˆå¯é€‰ï¼‰çš„å†…å®¹ã€‚ ç°åœ¨æˆ‘ä»¬å®Œæˆäº†ä¸ªäººåšå®¢çš„åˆçº§æ­å»ºï¼Œè¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„åŸºæœ¬éœ€æ±‚ã€‚ é”™è¯¯å¤„ç†å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š 12Pushing generated _deploy website Permission denied (publickey).fatal: Could not read from remote repository. è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºç¼ºå°‘SSH keys ï¼Œåªæœ‰æ‹¥æœ‰è¿™ä¸ªkeyæ‰æœ‰æƒé™pushåˆ°è¿œç¨‹ä»“åº“ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®ç°æƒé™å®‰å…¨æ§åˆ¶ã€‚è§£å†³æ–¹æ¡ˆ:Generating SSH keys å‡ºç°ä¸‹é¢é”™è¯¯ï¼š 12345678## Pushing generated _deploy websiteTo git@github.com:wangruofeng/wangruofeng.github.io.git ! [rejected] master -&gt; master (non-fast-forward)error: failed to push some refs to &#x27;git@github.com:wangruofeng/wangruofeng.github.io.git&#x27;hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Integrate the remote changes (e.g.hint: &#x27;git pull ...&#x27;) before pushing again.hint: See the &#x27;Note about fast-forwards&#x27; in &#x27;git push --help&#x27; for details. åŸå› ï¼Œæ˜¯ä¿®æ”¹äº†è¿œç¨‹ä»“åº“ï¼Œå¯¼è‡´æœ¬åœ°æœ¬åœ°ç‰ˆæœ¬è½åäºè¿œç¨‹ä»“åº“ç‰ˆæœ¬ã€‚æœ€ä½³è§£å†³æ–¹æ¡ˆï¼š 1234cd octopress/_deploygit pull origin mastercd ..rake deploy å‚è€ƒé“¾æ¥ï¼šrake-gen-deploy-rejected-in-octopress å‚è€ƒèµ„æ–™ï¼š å”å·§çš„åšå®¢: [è±¡å†™ç¨‹åºä¸€æ ·å†™åšå®¢ï¼šæ­å»ºåŸºäºgithubçš„åšå®¢]ï¼ˆhttp://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/ï¼‰ è§…ç äºº: ç¬¬ä¸€ç¯‡åšæ–‡ï¼šç”¨Octopressæ­å»ºåšå®¢ç³»ç»Ÿ ç ´èˆ¹ä¹‹å®¶: ä½ å¥½ï¼githubé¡µé¢ opoo.org: Octopress åšå®¢ç³»ç»Ÿ â€”â€” a Blogging Framework for Hackers Ocotpress: Octopress Documentation Haveeâ€™s Space: ä¸º Octopress æ·»åŠ å¤šè¯´è¯„è®ºç³»ç»Ÿ colors4.us: Octopressåšå®¢ä»é›¶å¼€å§‹ III æµ®ç”ŸçŒè¶£:ç”¨Octopressåœ¨Githubæ­å»ºåšå®¢ï¼Œå¹¶ç»‘å®šç‹¬ç«‹åŸŸå Aster0idçš„ä¸ªäººåšå®¢:åˆ¶ä½œä¸ªäººåšå®¢ç«™ï¼ˆä¸€ï¼‰ï¼šMacç³»ç»Ÿä¸‹ä½¿ç”¨ Octopress + GitHub Pages æ­å»ºä¸ªäººåšå®¢ octopressåšå®¢æ­å»ºå’Œä¸ªæ€§åŒ–é…ç½® å¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ http://blog.wangruofeng007.com","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://blog.wangruofeng007.com/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.wangruofeng007.com/tags/Hexo/"}]}],"categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://blog.wangruofeng007.com/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"dart","slug":"dart","permalink":"https://blog.wangruofeng007.com/categories/dart/"},{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/categories/iOS/"},{"name":"Swift","slug":"Swift","permalink":"https://blog.wangruofeng007.com/categories/Swift/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://blog.wangruofeng007.com/categories/%E7%94%9F%E6%B4%BB/"},{"name":"èµ„æ–™æ”¶é›†","slug":"èµ„æ–™æ”¶é›†","permalink":"https://blog.wangruofeng007.com/categories/%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86/"},{"name":"OC","slug":"OC","permalink":"https://blog.wangruofeng007.com/categories/OC/"},{"name":"Unix","slug":"Unix","permalink":"https://blog.wangruofeng007.com/categories/Unix/"},{"name":"Git","slug":"Git","permalink":"https://blog.wangruofeng007.com/categories/Git/"},{"name":"Watch OS2","slug":"Watch-OS2","permalink":"https://blog.wangruofeng007.com/categories/Watch-OS2/"},{"name":"Database","slug":"Database","permalink":"https://blog.wangruofeng007.com/categories/Database/"},{"name":"Animation","slug":"Animation","permalink":"https://blog.wangruofeng007.com/categories/Animation/"},{"name":"Efficiency","slug":"Efficiency","permalink":"https://blog.wangruofeng007.com/categories/Efficiency/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.wangruofeng007.com/tags/Hexo/"},{"name":"ç‰©è”ç½‘","slug":"ç‰©è”ç½‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%89%A9%E8%81%94%E7%BD%91/"},{"name":"ChatGPT, OpenAI, AIGC","slug":"ChatGPT-OpenAI-AIGC","permalink":"https://blog.wangruofeng007.com/tags/ChatGPT-OpenAI-AIGC/"},{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"https://blog.wangruofeng007.com/tags/%E6%8A%80%E5%B7%A7/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"https://blog.wangruofeng007.com/tags/%E6%95%88%E7%8E%87/"},{"name":"flutter","slug":"flutter","permalink":"https://blog.wangruofeng007.com/tags/flutter/"},{"name":"Typora","slug":"Typora","permalink":"https://blog.wangruofeng007.com/tags/Typora/"},{"name":"Runtime","slug":"Runtime","permalink":"https://blog.wangruofeng007.com/tags/Runtime/"},{"name":"CocoaPods","slug":"CocoaPods","permalink":"https://blog.wangruofeng007.com/tags/CocoaPods/"},{"name":"Skill","slug":"Skill","permalink":"https://blog.wangruofeng007.com/tags/Skill/"},{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"https://blog.wangruofeng007.com/tags/%E7%BF%BB%E8%AF%91/"},{"name":"Favorite","slug":"Favorite","permalink":"https://blog.wangruofeng007.com/tags/Favorite/"},{"name":"éŸ³è§†é¢‘","slug":"éŸ³è§†é¢‘","permalink":"https://blog.wangruofeng007.com/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://blog.wangruofeng007.com/tags/%E5%8A%A8%E7%94%BB/"},{"name":"Debug","slug":"Debug","permalink":"https://blog.wangruofeng007.com/tags/Debug/"},{"name":"å‰ªåˆ‡æ¿","slug":"å‰ªåˆ‡æ¿","permalink":"https://blog.wangruofeng007.com/tags/%E5%89%AA%E5%88%87%E6%9D%BF/"},{"name":"Unix","slug":"Unix","permalink":"https://blog.wangruofeng007.com/tags/Unix/"},{"name":"Git","slug":"Git","permalink":"https://blog.wangruofeng007.com/tags/Git/"},{"name":"iWatch","slug":"iWatch","permalink":"https://blog.wangruofeng007.com/tags/iWatch/"},{"name":"iWatch OS2","slug":"iWatch-OS2","permalink":"https://blog.wangruofeng007.com/tags/iWatch-OS2/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://blog.wangruofeng007.com/tags/%E7%BD%91%E7%BB%9C/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://blog.wangruofeng007.com/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://blog.wangruofeng007.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Swift","slug":"Swift","permalink":"https://blog.wangruofeng007.com/tags/Swift/"},{"name":"äº‹ä»¶å¤„ç†","slug":"äº‹ä»¶å¤„ç†","permalink":"https://blog.wangruofeng007.com/tags/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/"},{"name":"CAShapeLayer","slug":"CAShapeLayer","permalink":"https://blog.wangruofeng007.com/tags/CAShapeLayer/"},{"name":"å†…å­˜ç®¡ç†","slug":"å†…å­˜ç®¡ç†","permalink":"https://blog.wangruofeng007.com/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"},{"name":"ç¼–è¯‘å™¨","slug":"ç¼–è¯‘å™¨","permalink":"https://blog.wangruofeng007.com/tags/%E7%BC%96%E8%AF%91%E5%99%A8/"},{"name":"RunLoop","slug":"RunLoop","permalink":"https://blog.wangruofeng007.com/tags/RunLoop/"},{"name":"iOS","slug":"iOS","permalink":"https://blog.wangruofeng007.com/tags/iOS/"}]}