<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>__attribute__ - ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢</title>
  <meta name="author" content="ç‹è‹¥é£">

  <meta name="description" content="__attribute__">
  <meta name="keywords" content="Octopress, iOS, __attribute__ , Swift, Objective-c">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wangruofeng.github.io/blog/2016/01/13/attribute/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://wangruofeng.github.io/blog/2016/01/13/attribute/">
  <meta property="og:title" content="__attribute__ - ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢">
  <meta property="og:description" content="__attribute__">

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-72379345-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="sitesearch" value="wangruofeng.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢" />
    <meta itemprop="description" content="ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢" />
    <meta itemprop="url" content="http://wangruofeng.github.io" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2016-01-13T04:10:33+08:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
           | <a href="#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://wangruofeng.github.io">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        __attribute__
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><ul>
<li>è¯‘è‡ª Written by <a href="http://nshipster.com/authors/mattt-thompson/">Mattt Thompson</a> â€” January 14th, 2013</li>
<li>åŸæ–‡é“¾æ¥ï¼š<a href="http://nshipster.com/__attribute__/">http://nshipster.com/__attribute__/</a></li>
<li>è¯‘è€…<a href="https://twitter.com/oneruofeng">@oneruofeng</a></li>
</ul>


<p>é‡å¤å‘å¸ƒè¿™ä¸ªä¸»é¢˜å·²ç»è¯´æ˜äº†åŒç¼–è¯‘å™¨ä¿å­˜å¥åº·å…³ç³»çš„é‡è¦æ€§,åƒä»»ä½•è‰ç¨¿ä¸€æ ·ï¼Œä½œä¸ºä¸€ä¸ªå®è·µè€…çš„æ•ˆç‡å–å†³äºä»–ä»¬æ€æ ·å¯¹å¾…ä»–ä»¬çš„å·¥å…·ï¼Œä½ ç…§é¡¾å¥½å®ƒä»¬ï¼Œå®ƒä»¬åè¿‡æ¥ä¹Ÿä¼šå¯¹ä½ æœ‰å¥½å¤„ã€‚</p>

<p> <code>__attribute__</code>æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨çš„æŒ‡ä»¤åœ¨å£°æ˜çš„æ—¶å€™æŒ‡æ˜äº†ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°å…è®¸æ›´å¤šçš„æ£€æŸ¥é”™è¯¯å’Œé«˜çº§çš„ä¼˜åŒ–ã€‚</p>

<p> è¯­æ³•å…³é”®å­—æ˜¯<code>__attribute__</code>ç´§è·Ÿ2å¥—åœ†æ‹¬å·ï¼ˆåŒåœ†æ‹¬å·è®©å‡ºç°çš„å®æ›´å®¹æ˜“è¾¨è®¤ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰å¤šä¸ªå±æ€§çš„æ—¶å€™ï¼‰ã€‚åœ¨æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å±æ€§åˆ—è¡¨ï¼Œ<code>__attribute__</code>æŒ‡ä»¤è¢«æ”¾åœ¨å‡½æ•°ï¼Œå˜é‡å’Œç±»å‹å£°æ˜åé¢ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'> <span class="c1">// Return the square of a number</span>
</span><span class='line'><span class="kt">int</span> <span class="nf">square</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="k">const</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Declare the availability of a particular API</span>
</span><span class='line'><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'>  <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macosx</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">,</span><span class="n">deprecated</span><span class="o">=</span><span class="mf">10.6</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Send printf-like message to stderr and exit</span>
</span><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="nf">die</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
</span><span class='line'>  <span class="n">__attribute__</span><span class="p">((</span><span class="n">noreturn</span><span class="p">,</span> <span class="n">format</span><span class="p">(</span><span class="n">printf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>
</span></code></pre></td></tr></table></div></figure>


<p>å‡å¦‚è¿™ä¸ªè®©ä½ æƒ³èµ·ISO Cè¯­è¨€çš„ <code>#pragma</code>,ä½ å°±ä¸ä¼šæ„Ÿåˆ°å­¤å•äº†ã€‚</p>

<p>å®é™…ä¸Šï¼Œå½“<code>__attribute__</code>è¢«ç¬¬ä¸€æ¬¡å¼•å…¥åˆ°<code>GCC</code>ç¼–è¯‘å™¨æ—¶ï¼Œå®ƒé¢ä¸´ä¸€äº›é˜»åŠ›ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸“ç”¨çš„<code>#pragma</code>å› ä¸ºç›¸åŒçš„ç›®çš„ã€‚</p>

<p>è¿™é‡Œï¼Œç„¶è€Œï¼Œæœ‰2ä¸ªéå¸¸å¥½çš„ç†ç”±ä¸ºä»€ä¹ˆ<code>__attribute__</code>è¢«æ·»åŠ è¿›æ¥</p>

<blockquote><ul>
<li>ä»ä¸€ä¸ªå®ä¸­äº§ç”Ÿ<code>#pragma</code>å‘½ä»¤å‡ ä¹æ˜¯ä¸èƒ½çš„ï¼ˆåœ¨C99 _Pragma é¢„ç®—ç¬¦ä»¥å‰ï¼‰ã€‚</li>
<li>è¿™é‡Œæ²¡äººçŸ¥é“ç›¸åŒçš„<code>#pragma</code>åœ¨å¦ä¸€ä¸ªç¼–è¯‘å™¨ä¸­å¯èƒ½çš„æ„æ€ã€‚</li>
</ul>
</blockquote>

<p> å¼•ç”¨<a href="http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html">GCC Documentation for Function Attributes</a></p>

<blockquote><ul>
<li>è¿™é‡Œæœ‰2ä¸ªåŸå› è¢«åº”ç”¨åˆ°å‡ ä¹æ‰€æœ‰çš„åº”ç”¨æ¨èä½¿ç”¨<code>#pragma</code>,è¿™çŠ¯äº†ä¸€ä¸ªä½çº§é”™è¯¯å°±æ˜¯æŠŠ<code>#pragma</code>ä½¿ç”¨åˆ°ä»»ä½•åœ°æ–¹ã€‚</li>
</ul>
</blockquote>

<p> ç¡®å®ï¼Œå‡å¦‚ä½ åœ¨è‹¹æœçš„æ¡†æ¶ä¸­å’Œç‰›é€¼å·¥ç¨‹å¸ˆçš„å¼€æºé¡¹ç›®ä¸­çš„å¤´æ–‡ä»¶çœ‹ä¸€ä¸‹ç°ä»£çš„<code>Objective-c</code>&ndash;<code>__attribute__</code>è¢«å¤§é‡ä½¿ç”¨ã€‚ï¼ˆç›¸åï¼Œ<code>#pragma</code>çš„ä¸»è¦å£°æ˜åå£°æ¥ç€è¿™äº›å¤©æ˜¯è£…é¥°:<code>#pragma mark</code>ï¼‰</p>

<p> æ‰€ä»¥ä¸ºäº†ä»¥åä¸è´¹åŠ›ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹æœ€é‡è¦çš„å±æ€§ï¼š</p>

<hr />

<h2>GCC</h2>

<p><strong>format</strong></p>

<blockquote><p><code>format</code>å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°åƒ<code>printf</code>,<code>scanf</code>,<code>strftime</code>æˆ–è€…<code>strfmo</code>é£æ ¼çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åº”è¯¥æ˜¯å¯ä»¥è¿›è¡Œç±»å‹æ£€æŸ¥çš„ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">extern</span> <span class="kt">int</span>
</span><span class='line'><span class="nf">my_printf</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">my_object</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">my_format</span><span class="p">,</span> <span class="p">...)</span>
</span><span class='line'>  <span class="n">__attribute__</span><span class="p">((</span><span class="n">format</span><span class="p">(</span><span class="n">printf</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)));</span>
</span></code></pre></td></tr></table></div></figure>


<p>Objective-Cç¨‹åºå‘˜ä¹Ÿå¯ä½¿ç”¨<code>__NSString__</code>æ¥æ ¼å¼åŒ–æ¥åšåˆ°ç›¸åŒçš„æ ¼å¼åŒ–è§„åˆ™ï¼Œåƒåœ¨<code>NNString</code>ä¸­é€šè¿‡ <code>+stringWithFormat:</code> å’Œ <code>NSLog()</code>æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸€æ ·ã€‚</p>

<p><strong>nonnull</strong></p>

<blockquote><p>è¿™ä¸ª<code>nonnull</code>å±æ€§æŒ‡å®šäº†æŸäº›å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯éç©ºçš„æŒ‡é’ˆã€‚</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span>
</span><span class='line'><span class="nf">my_memcpy</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
</span><span class='line'>  <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½¿ç”¨<code>nonnull</code>ç¼–ç æœŸæœ›è¿™ä¸ªå€¼éµå®ˆä¸€ä¸ªæ˜ç¡®çš„çº¦å®šä¸­ï¼Œè¿™æ ·èƒ½å¸®åŠ©æ•è·æ½œä¼åœ¨ä»»ä½•ä»£ç è°ƒç”¨çš„NULLæŒ‡é’ˆbugsï¼Œè¯·è®°ä½ï¼š
<code>ç¼–è¯‘æ—¶çš„é”™è¯¯ &gt;&gt;  è¿è¡Œæ—¶çš„é”™è¯¯ã€‚</code></p>

<p><strong>noreturn</strong></p>

<blockquote><p>ä¸€äº›æ ‡å‡†åº“å‡½æ•°ï¼Œä¾‹å¦‚<code>abort</code>å’Œ<code>exit</code>,æ˜¯ä¸èƒ½è¿”å›çš„ã€‚GCCè‡ªåŠ¨çŸ¥é“è¿™äº›ä¸œè¥¿ï¼Œè¿™ä¸ªnoreturnå±æ€§ç”¨äºæŒ‡å®šä»»ä½•å…¶ä»–å‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›çš„æƒ…å†µã€‚</p></blockquote>

<p>ä¾‹å¦‚ï¼ŒAFNetworking ä½¿ç”¨<code>noreturn</code>å±æ€§åœ¨å®ƒçš„<a href="https://github.com/AFNetworking/AFNetworking/blob/1.1.0/AFNetworking/AFURLConnectionOperation.m#L157">ç½‘ç»œè¯·æ±‚çº¿ç¨‹è¿›å…¥ç‚¹çš„æ–¹æ³•</a>é‡Œé¢,è¿™ä¸ªæ–¹æ³•ç”¨åœ¨å½“å¤§é‡äº§ç”Ÿä¸“ç”¨çš„ç½‘ç»œçš„çº¿ç¨‹é‡Œç”¨æ¥ä¿è¯åˆ†ç¦»çš„çº¿ç¨‹æŒç»­æ‰§è¡Œåœ¨åº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>

<p><strong>pure/const</strong></p>

<blockquote><p><code>pure</code>å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°é™¤äº†è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å®ƒçš„è¿”å›å€¼ä»…ä»…ä¾èµ–å‚æ•°å’Œ/æˆ–è€…å…¨å±€å˜é‡ã€‚è¿™æ ·çš„å‡½æ•°å¯ä»¥ç”¨å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤å¹¶ä¸”å¾ªç¯ä¼˜åŒ–å°±åƒä¸€ä¸ªç®—æ•°æ“ä½œç¬¦é‚£æ ·ã€‚</p>

<p><code>pure</code>å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°ä¸ä¼šæ£€æŸ¥ä»»ä½•å€¼é™¤äº†å®ƒä»¬çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ã€‚æ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªæŒ‡é’ˆå‚æ•°å¹¶ä¸”éœ€å‘€æ£€æŸ¥æ•°æ®çš„æŒ‡å‘ä¸èƒ½å£°æ˜æˆ<code>const</code>ã€‚åŒæ ·çš„ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸€ä¸ªé<code>nonst</code>å‡½æ•°é€šå¸¸ä¸èƒ½ä¸º<code>const</code>,ä¸€ä¸ª<code>const</code>å‡½æ•°è¿”å›<code>void</code>å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="kt">int</span> <span class="nf">square</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="k">const</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>pure</code>å’Œ<code>const</code>æ˜¯ä¸¤ä¸ªæ‰§è¡Œåœ¨ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹æƒ¯ä¾‹ä¸­çš„å‚æ•°ä¸ºäº†å…è®¸æœ‰æ•ˆæ€§èƒ½ä¼˜åŒ–ã€‚<code>const</code>å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸¥æ ¼å½¢å¼çš„<code>pure</code>å› ä¸ºå®ƒä¸ä¾èµ–å…¨å±€å˜é‡æˆ–è€…æŒ‡é’ˆã€‚</p>

<p>ä¾‹å¦‚ï¼Œå› ä¸ºä¸€ä¸ªå‡½æ•°å£°æ˜ä¸º<code>const</code>çš„ç»“æœå¹¶ä¸ä¾èµ–ä»»ä½•ä¸œè¥¿é™¤äº†ä¼ è¿›æ¥çš„å‚æ•°ã€‚å‡½æ•°çš„ç»“æœèƒ½å¤Ÿç¼“å­˜é‚£ä¸ªç»“æœå¹¶ä¸”å½“å‡½æ•°è¢«è°ƒç”¨æ—¶è¿”å›ï¼Œè¿™æ ·çš„å‡½æ•°å«åšç›¸åŒçš„ç»„åˆå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ•°å­—çš„å¹³æ–¹æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»…ä»…éœ€è¦åªè®¡ç®—å®ƒä¸€æ¬¡)ã€‚</p>

<p><strong>unused</strong></p>

<blockquote><p>è¿™ä¸ªå±æ€§ï¼Œé™„ç€åœ¨ä¸€ä¸ªå‡½æ•°åé¢ï¼Œæ„å‘³ç€é‚£ä¸ªå‡½æ•°å¾ˆå¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼ŒGCCä¸ä¼šå¯¹è¿™ä¸ªå‡½æ•°äº§ç”Ÿè­¦å‘Šã€‚</p></blockquote>

<p>ç”¨<code>__unused</code>å…³é”®è¯å¯ä»¥è·å¾—ç›¸åŒçš„æ•ˆæœï¼Œå£°æ˜è¿™ä¸ªåœ¨æ–¹æ³•å®ç°ä¸­ä¸ä¼šè¢«ä½¿ç”¨çš„å‚æ•°ä¸­ã€‚çŸ¥é“é‚£ä»¥åä¸€äº›ä¸Šä¸‹æ–‡å°±å¯ä»¥å…è®¸ç¼–è¯‘å™¨æ¥åšç›¸åº”çš„ä¼˜åŒ–ã€‚ä½ å¾ˆå¯èƒ½å–œæ¬¢åœ¨delegateæ–¹æ³•å®ç°æå‹‰ä½¿ç”¨<code>__unused</code>,å› ä¸ºåè®®é¢‘ç¹çš„æé«˜æ›´å¤šçš„ä¸Šä¸‹æ–‡æ¯”é€šå¸¸å¿…è¦çš„æƒ…å†µï¼Œä¸ºäº†æ»¡è¶³å¤§é‡çš„æ½œåœ¨ä½¿ç”¨æ¡ˆä¾‹ã€‚</p>

<h3>LLVM</h3>

<p>åƒGCCçš„å¾ˆå¤šç‰¹å¾ä¸€æ ·ï¼ŒClangä¹Ÿæ”¯æŒ<code>__attribute__</code>,æ·»åŠ åˆ°å®ƒè‡ªå·±çš„å°èŒƒå›´çš„æ‰©å±•ã€‚ä¸ºäº†æ£€æŸ¥æŸä¸ªå±æ€§çš„å¯ç”¨æ€§ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨<code>__has_attribute</code>å±æ€§ã€‚</p>

<p><strong>availability</strong></p>

<blockquote><p>Clangå¼•è¿›äº†availabilityå±æ€§ï¼Œè¿™ä¸ªå¯ä»¥è¢«å–ä»£åœ¨å£°æ˜æè¿°çš„ç”Ÿå‘½å‘¨æœŸä¸­å£°æ˜ç›¸å¯¹äºæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚æ€è€ƒå¯¹ä¸€ä¸ªç®€å•å‡½æ•°fï¼šçš„å‡½æ•°å£°æ˜</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">availability</span><span class="p">(</span><span class="n">macosx</span><span class="p">,</span><span class="n">introduced</span><span class="o">=</span><span class="mf">10.4</span><span class="p">,</span><span class="n">deprecated</span><span class="o">=</span><span class="mf">10.6</span><span class="p">,</span><span class="n">obsoleted</span><span class="o">=</span><span class="mf">10.7</span><span class="p">)));</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><code>availability</code>å±æ€§å£°æ˜fåœ¨OS Xè€è™ç³»ç»Ÿä¸­è¢«å¼•å…¥ï¼Œåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­è¢«å¼ƒç”¨ï¼Œåœ¨OS X å±±ç‹®ç³»ç»Ÿä¸­è¢«åºŸå¼ƒã€‚</p>

<p>è¿™ä¸ªä¿¡æ¯è¢«Clangç”¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™ä½¿ç”¨fï¼šå‡½æ•°å¼å®‰å…¨çš„ï¼Œä¾‹å¦‚ï¼Œå‡å¦‚Clangåœ¨OS X ç¾æ´²è±¹ç³»ç»Ÿä¸Šç¼–è¯‘ï¼Œè°ƒç”¨f()å‡½æ•°å°†æˆåŠŸã€‚å‡å¦‚Clangåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­ç¼–è¯‘ï¼Œå‡½æ•°è°ƒç”¨å°†æˆåŠŸä½†æ˜¯Clangä¼šå‘å‡ºä¸€ä¸ªè­¦å‘ŠæŒ‡æ˜è¿™ä¸ªå‡½æ•°è¢«å¼ƒç”¨äº†ã€‚æœ€åï¼Œå‡å¦‚Clangè¢«å¼•è¿›ç¼–è¯‘OS Xå±±ç‹®ç³»ç»Ÿçš„ä»£ç ï¼Œå‡½æ•°è°ƒç”¨å°†å¤±è´¥ï¼Œå› ä¸ºf()å‡½æ•°å·²ç»ä¸å†å¯ç”¨äº†ã€‚</p>

<p><code>availability</code>å±æ€§æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨ä»¥å¹³å°åå¼€å§‹ç„¶åå¼•å…¥ä¸€äº›å®šè¯­åˆ—ä¸¾å‡ºç”Ÿå‘½å‘¨æœŸå†…çš„é‡è¦é‡Œç¨‹ç¢‘äº‹ä»¶é™„åŠ é¢å¤–çš„ä¿¡æ¯ï¼ˆä»¥ä»»ä½•é¡ºåºï¼‰ã€‚</p></blockquote>

<ul>
<li>introducedï¼šå£°æ˜è¢«å¼•å…¥çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬</li>
<li>deprecatedï¼šå£°æ˜è¢«å¼ƒç”¨çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·åº”è¯¥æŠŠè¿™ä¸ªAPIç§»èµ°</li>
<li>obsoletedï¼š å£°æ˜è¢«åºŸå¼ƒçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒå°†è¢«å®Œå…¨ç§»é™¤å¹¶ä¸”ä¸èƒ½å†ä½¿ç”¨</li>
<li>unavailableï¼šå£°æ˜åœ¨è¿™ä¸ªå¹³å°ä¸Šå°†æ°¸è¿œä¸å¯ç”¨</li>
<li>messageï¼šé¢å¤–çš„æ¶ˆæ¯å°†è¢«Clangæä¾›å½“å¿½ç•¥ä¸€ä¸ªè­¦å‘Šæˆ–è€…ä¸€ä¸ªé”™è¯¯åœ¨ä½¿ç”¨ä¸€ä¸ªè¢«å¼ƒç”¨æˆ–è€…è¢«åºŸå¼ƒçš„å£°æ˜ã€‚å¯¹å¼•å¯¼ç”¨æˆ·æ›¿æ¢APIså¾ˆæœ‰ç”¨ã€‚</li>
</ul>


<blockquote><p>åœ¨å£°æ˜æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ªavailabilityå±æ€§ï¼Œæ¯ä¸ªå¯¹åº”ä¸åŒçš„å¹³å°ï¼Œä»…å½“availabilityå±æ€§å¯¹åº”ç›¸åº”çš„ç›®æ ‡å¹³å°è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä»»ä½•å…¶ä»–æ‰å°†è¢«å¿½ç•¥ã€‚å‡å¦‚æ²¡æœ‰availability å±æ€§æŒ‡å®šå¯ç”¨æ€§å¯¹ç°åœ¨çš„ç›®æ ‡å¹³å°ï¼Œavailability å±æ€§å°†è¢«å¿½ç•¥ã€‚</p></blockquote>

<h4>æ”¯æŒçš„å¹³å°ï¼š</h4>

<ul>
<li>iosï¼šè‹¹æœçš„iOSæ“ä½œç³»ç»Ÿã€‚æœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡<code>-mios-version-min=*version*</code>æˆ–è€…<code>-miphoneos-version-min=*version*</code>å‘½ä»¤è¡Œå‚æ•°ã€‚</li>
<li>macosxï¼šè‹¹æœçš„OS X æ“ä½œç³»ç»Ÿï¼Œæœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡<code>-mmacosx-version-min=*version*</code>å‘½ä»¤è¡Œå‚æ•°</li>
</ul>


<p><strong>overloadable</strong></p>

<blockquote><p>Clangæä¾›å¯¹C++å‡½æ•°åœ¨Cä¸­é‡è½½çš„æ”¯æŒã€‚åœ¨Cä¸­å‡½æ•°é‡è½½è¢«å¼•è¿›ä½¿ç”¨<code>overloadable</code>å±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯èƒ½æä¾›ä¸€ä¸ªé‡è½½ç‰ˆæœ¬çš„<code>tgsin</code>å‡½æ•°æ¥ç²¾ç¡®æ‰§è¡Œç›¸å…³çš„æ ‡å‡†å‡½æ•°è®¡ç®—<code>float</code>,<code>double</code>,<code>long double</code>çš„æ­£å¼¦å€¼ï¼š</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#include &lt;math.h&gt;</span>
</span><span class='line'><span class="kt">float</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sinf</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="kt">double</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'><span class="kt">long</span> <span class="kt">double</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">overloadable</span><span class="p">))</span> <span class="n">tgsin</span><span class="p">(</span><span class="kt">long</span> <span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sinl</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¯·æ³¨æ„<code>overloadable</code>åªå¯¹å‡½æ•°èµ·ä½œç”¨ã€‚ä½ å¯ä»¥é‡è½½æ–¹æ³•å£°æ˜åœ¨æŸç§èŒƒå›´å†…é€šè¿‡ä½¿ç”¨é€šç”¨çš„è¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼Œæƒ³<code>id</code>æˆ–è€…<code>void *</code>.</p>

<hr />

<p>ä¸Šä¸‹æ–‡æ˜¯å›½ç‹å½“å®ƒé‡åˆ°ç¼–è¯‘å™¨ä¼˜åŒ–æ—¶ã€‚é€šè¿‡æä¾›é™åˆ¶åœ¨æ€æ ·è§£æä½ çš„ä»£ç ï¼Œå¢åŠ ä½ å‚æ•°å°½å¯èƒ½é«˜æ•ˆä»£ç çš„å¯èƒ½æ€§ã€‚é‡åˆ°ç¼–è¯‘å™¨æŠŠä½ æ‰“æ–­ï¼Œè¿™å°†æ˜¯ä¸€é¡¹å¥–åŠ±ã€‚</p>

<p>è¿˜æœ‰<code>__attribute__</code>å¹¶ä¸ä»…ä»…å¯¹ç¼–è¯‘å™¨æœ‰ç”¨ï¼šä¸‹ä¸€ä¸ªäººçœ‹ä»£ç ä¹Ÿå°†æ„Ÿè°¢è¿™äº›é¢å¤–çš„ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥å¤šèµ°å‡ è‹±å°ºè¿œå°†å¯¹ä½ çš„åˆä½œä¸­å’Œæ¥æ›¿è€…æˆ–è€…ä»ç°åœ¨ç®—2å¹´ä»¥åçš„ä½ (é‚£ä¸ªæ—¶å€™ä½ å·²ç»å¿˜è®°äº†æ‰€ä»¥çš„äº‹æƒ…å…³äºè¿™ä»½ä»£ç )è‡ªå·±æœ‰ç”¨</p>

<p>ä½ ä»˜å‡ºäº†å¤šå°‘çˆ±,æœ€ç»ˆä½ ä¼šå¾—åˆ°å¤šå°‘çˆ±ã€‚</p>

<p>è¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <a href="http://blog.wangruofeng007.com">http://blog.wangruofeng007.com</a></p>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">ç‹è‹¥é£</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2016-01-13T04:10:33+08:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/blog/categories/ios/'>ios</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://wangruofeng.github.io/blog/2016/01/13/attribute/" data-via="" data-counturl="http://wangruofeng.github.io/blog/2016/01/13/attribute/" >Tweet</a>
  
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/blog/2016/01/12/runloopxiang-jie/" title="Previous Post: RunLoopè¯¦è§£">&laquo; RunLoopè¯¦è§£</a></li>
            
            
            <li class="next"><a href="/blog/2016/01/13/autoreleasingde-li-jie/" title="Next Post: __autoreleasingçš„ç†è§£">__autoreleasingçš„ç†è§£ &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
      <section>
        <h2>Comments</h2>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/animation/'>animation (2)</a></li>
<li class='category'><a href='/blog/categories/database/'>database (7)</a></li>
<li class='category'><a href='/blog/categories/design-patterns/'>design_patterns (1)</a></li>
<li class='category'><a href='/blog/categories/efficiency/'>efficiency (2)</a></li>
<li class='category'><a href='/blog/categories/favorite/'>favorite (3)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (20)</a></li>
<li class='category'><a href='/blog/categories/memory-management/'>memory_management (1)</a></li>
<li class='category'><a href='/blog/categories/multithreading/'>multithreading (1)</a></li>
<li class='category'><a href='/blog/categories/networking/'>networking (6)</a></li>
<li class='category'><a href='/blog/categories/objective-c/'>objective-c (4)</a></li>
<li class='category'><a href='/blog/categories/skill/'>skill (5)</a></li>
<li class='category'><a href='/blog/categories/swift/'>swift (1)</a></li>

  </ul>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2016/01/18/tableviewxing-neng-you-hua/">TableViewæ€§èƒ½ä¼˜åŒ–</a>
    
    <a class="list-group-item " href="/blog/2016/01/16/ios-animation-swift-ban/">iOS Animation Swift ç‰ˆ</a>
    
    <a class="list-group-item " href="/blog/2016/01/15/nsurlsession/">NSURLSession æ•™ç¨‹</a>
    
    <a class="list-group-item " href="/blog/2016/01/14/iosxian-cheng-an-quan-suo/">iOSçº¿ç¨‹å®‰å…¨-é”</a>
    
    <a class="list-group-item " href="/blog/2016/01/14/sqlite-jiao-cheng-qi/">SQLite_æ•™ç¨‹(ä¸ƒ)</a>
    
    <a class="list-group-item " href="/blog/2016/01/14/sqlite-jiao-cheng-liu/">SQLite_æ•™ç¨‹(å…­)</a>
    
    <a class="list-group-item " href="/blog/2016/01/14/sqlite-jiao-cheng-wu/">SQLite_æ•™ç¨‹(äº”)</a>
    
    <a class="list-group-item " href="/blog/2016/01/13/sqlite-jiao-cheng-si/">SQLite_æ•™ç¨‹(å››)</a>
    
    <a class="list-group-item " href="/blog/2016/01/13/sqlite-jiao-cheng-san/">SQLite_æ•™ç¨‹(ä¸‰)</a>
    
    <a class="list-group-item " href="/blog/2016/01/13/sqlite-jiao-cheng-er/">SQLite_æ•™ç¨‹(äºŒ)</a>
    
    <a class="list-group-item " href="/blog/2016/01/13/sqlite-jiao-cheng-%5B%3F%5D/">SQLite_æ•™ç¨‹(ä¸€)</a>
    
    <a class="list-group-item " href="/blog/2016/01/13/cocoapodsshi-yong-zhi-nan/">CocoaPodsä½¿ç”¨æŒ‡å—</a>
    
  </div>
</section>





<section>
  <h2>About Me</h2>
  <p>å—¨,æˆ‘æ˜¯ç‹è‹¥é£ã€‚ğŸ€</p>
  <p>æ¥è‡ªç¾ä¸½çš„å¤©åºœã®å›½,ç°å±…æ·±åœ³ã€‚</p>
  <p>ä¸“æ³¨äºç§»åŠ¨äº’è”ç½‘,çƒ­çˆ±æ‘„å½±æ—…è¡Œã€‚</p>
  <p>æ­£åœ¨ä¿®è¡Œ,æ¢å¯»ç¨‹åºã®ç¾!</p>
</section>
<section>
<h2>Recent Comments</h2>
<ul class="ds-recent-comments" data-num-items="10" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="20">
</ul>
<!-- å¤šè¯´JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"wangruofeng"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</section>

    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a>
  Copyright &copy; 2016 - ç‹è‹¥é£<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'wangruofeng';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://wangruofeng.github.io/blog/2016/01/13/attribute/';
        var disqus_url = 'http://wangruofeng.github.io/blog/2016/01/13/attribute/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
