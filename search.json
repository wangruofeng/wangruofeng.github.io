[{"title":"Hexo å‡çº§åˆ° V7.3","url":"/2024/11/02/Hexo-å‡çº§åˆ°-V7-3/","content":"\næœ€è¿‘æ¢äº†å° Apple M2 ç”µè„‘ï¼Œæ•´ä¸ªè½¯ä»¶éƒ½è¿›è¡Œé‡è£…ï¼Œ**Hexo** å¹´ä¹…å¤±ä¿®ï¼Œåœ¨è®¾ç½®çš„æ—¶å€™å‡ºç°å¾ˆå¤šè­¦å‘Š âš ï¸ï¼Œçœ‹äº†ä¸€ä¸‹æ—¥å¿—ä¸»è¦åŸå› æ˜¯ä»¥å‰ç‰ˆæœ¬ä¾èµ–çš„ node ç‰ˆæœ¬å¤ªä½äº†ï¼Œè¿˜æœ‰ç›¸å…³ä¾èµ–åº“å› ä¸ºå¤ªæ—§æœ‰ä¸å°‘å®‰å…¨æ¼æ´ï¼ŒæŸ¥äº†ä¸€ä¸‹ Hexo æœ€æ–°å‘å¸ƒçš„ä¸º [7.3 ç‰ˆæœ¬ ](https://hexo.io/news/2024/07/02/hexo-7-3-0-released/)ï¼Œäºæ˜¯æ‰“ç®—æ•´ä½“è¿ç§»ä¸€ä¸‹ã€‚\n\n<!-- more -->\n\n\n# å®‰è£… Hexo 7.3 \n\né¦–å…ˆ Hexo çš„å®‰è£…å¯ä»¥ç”¨ brew äº†ã€‚ä½¿ç”¨ `brew install hexo` å®‰è£…ï¼Œå®‰è£…å¥½ä¹‹å Hexo åœ¨ `/opt/homebrew/Cellar/hexo/7.3.0` ä¸‹ã€‚\n\nä½¿ç”¨ Hexo çš„å¦‚ä¸‹æŒ‡ä»¤å®Œæˆå»ºç«™\n\n```Shell\nhexo init blog\ncd blog\nnpm install\n```\n\nå½“å‰ç¯å¢ƒé…ç½®å¦‚ä¸‹ï¼š\n\n```Bash\nhexo: 7.3.0\nnodeï¼šv22.11.0\nnpmï¼š10.9.0\nbrewï¼š4.4.2\n```\n\n# åŸºæœ¬é…ç½®\n\nèµ„æºè¿ç§»ï¼šå»ºå®Œç«™ä¹‹åï¼ŒæŠŠä¹‹å‰çš„æ–‡ç« ï¼ˆsource/_postsï¼‰å’Œé™æ€èµ„æºï¼ˆä¾‹å¦‚å›¾ç‰‡ source/imagesï¼‰éƒ½è¿ç§»è¿‡å»ã€‚\n\nå¦‚æœåšå®¢æœ‰æ˜ å°„è‡ªå·±çš„åŸŸåï¼Œè®°å¾—æŠŠ CNAME æ–‡ä»¶ä¹Ÿè¿ç§»ä¸€ä¸‹\n\né…ç½®ä¸»é¢˜ï¼šç”±äºæˆ‘å®šåˆ¶è¿‡ Next ä¸»é¢˜ï¼Œå°±ç›´æ¥æŠŠæ—§é¡¹ç›®çš„ä¸»é¢˜ç›´æ¥æ‹·è´åˆ°æ–°é¡¹ç›®çš„ themes/next ç›®å½•å³å¯ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å»ºç«™éœ€è¦åœ¨ themes ç›®å½•ä¸‹æŠŠ [Next](https://github.com/next-theme/hexo-theme-next) clone ä¸‹æ¥ï¼š\n\n```Shell\ngit clone https://github.com/next-theme/hexo-theme-next.git next\n```\n\né…ç½® `_config.yml` ä¸»é¢˜ä¸º nextï¼š\n\n```Shell\ntheme: next\n```\n\né…ç½®è¯­è¨€ï¼šåœ¨`_config.yml`ä¸­æ›´æ–°åšå®¢è¯­è¨€é…ç½®ï¼Œé»˜è®¤ä¸ºè‹±è¯­\n\n```YAML\nlanguage: zh-CN\n```\n\né…ç½®é“¾æ¥é£æ ¼ï¼šä¿®æ”¹ `_config.yml` çš„ permalink ç”Ÿæˆæ ¼å¼ï¼Œè¿™é‡Œé…ç½®æˆçŸ­é“¾é£æ ¼ï¼Œå¦‚ä¸‹å†…å®¹ï¼š\n\n```YAML\n# é»˜è®¤é£æ ¼\n# permalink: :year/:month/:day/:title/\n\n# å°†æ–‡ç«  url é£æ ¼è°ƒæ•´æˆçŸ­é“¾é£\npermalink: posts/:abbrlink/\n```\n\n# é…ç½®åˆ†ç±»\n\nè¿™æ­¥é…ç½®å¯ä»¥å‚è€ƒ[è¿™ä¸ªå¸–å­](https://tohugo.com/2021/01/26/å·¥å…·é…ç½®/Hexoæ·»åŠ åˆ†ç±»åŠæ ‡ç­¾ï¼ˆåœ¨Nextä¸»é¢˜ä¸‹ï¼‰/)\n\næ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥åšå®¢é¡¹ç›®æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n\n```Bash\nhexo new page categories\n```\n\næˆåŠŸä¼šæœ‰æç¤º\n\n```Bash\nINFO  Created: ~/path_to_blog/source/categories/index.md\n```\n\nè¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½äº†åˆ†ç±»é¡µé¢äº†ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¸»é¢˜è¿˜ä¸ä¼šè¯†åˆ«è¿™ä¸ªé¡µé¢ä¸ºåˆ†ç±»é¡µï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–è¾‘è¿™ä¸ªæ–°å»ºçš„é¡µé¢ï¼Œè®©ä¸»é¢˜è¯†åˆ«è¿™ä¸ªé¡µé¢ï¼Œå¹¶è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºåˆ†ç±»ã€‚\n\nç¼–è¾‘`index.md`åœ¨æ–‡ä»¶ä¸­æ·»åŠ  type: \"categories\"\n\n```Bash\n---\ntitle: åˆ†ç±»\ndate: 2024-11-02 13:43:56\ntype: \"categories\"\n---\n```\n\n# é…ç½®æ ‡ç­¾\n\nåŒç† é…ç½® tags\n\n```Bash\nhexo new page tags\n```\n\næˆåŠŸä¼šæœ‰æç¤º\n\n```Bash\nINFO  Created: ~/path_to_blog/source/tags/index.md\n```\n\nç¼–è¾‘`index.md`åœ¨æ–‡ä»¶ä¸­æ·»åŠ  type: \"tags\"\n\n```Bash\n---\ntitle: æ ‡ç­¾\ndate: 2024-11-02 13:44:19\ntype: \"tags\"\n---\n```\n\n# å®‰è£…æ’ä»¶\n\n## ç«™å†…æœç´¢\n\nå®‰è£… `hexo-generator-searchdb` æ’ä»¶\n\n```Bash\nnpm install hexo-generator-searchdb --save\n```\n\nåœ¨ `_config.yml` ä¸­æ·»åŠ é…ç½®ï¼š\n\n```YAML\n# search\nsearch:\n  path: search.json\n  field: post\n  format: html\n  limit: 1000\n```\n\n## å­—æ•°ç»Ÿè®¡\n\nå®‰è£… `npm install hexo-word-counter` æ’ä»¶ , [å‚è€ƒ](https://hexo-next.readthedocs.io/zh-cn/latest/next/advanced/å­—æ•°ç»Ÿè®¡/)\n\n```Bash\nnpm install hexo-word-counter\nhexo clean\n```\n\n## å‘å¸ƒæ’ä»¶\n\nç„¶åéœ€è¦åœ¨ blog æ ¹ç›®å½•ä¸‹å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š\n\n```Bash\nnpm install hexo-deployer-git --save\n```\n\nå› ä¸ºæˆ‘åœ¨ `config.yml` ä¸­é…ç½®å¥½äº† deploy ä¿¡æ¯ï¼š\n\n```YAML\n# Deployment\ndeploy:\n  type: git\n  message: \"Site updated: {{ now('YYYY-MM-DD HH:mm') }}\"\n  repo: \n    github: git@github.com:wangruofeng/wangruofeng.github.io.git\n  branch: master\n```\n\n# å¸¸ç”¨å‘½ä»¤\n\n```Bash\n# å‘å¸ƒæ–°æ–‡ç« \nhexo new \"My New Post\"\n\n# é¢„è§ˆ\nhexo s\n\n# ç”Ÿæˆæ–‡ä»¶åˆ° public ç›®å½•\nhexo g\n\n# å‘å¸ƒåˆ° Github Pages\nhexo d\n\n# æ¸…é™¤ç¼“å­˜\nhexo clean\n```\n\néœ€è¦æ³¨æ„ï¼Œå¦‚æœæ”¹äº†æ–‡ä»¶å‘å¸ƒçš„è¯ï¼Œè¦å…ˆ `hexo g` ï¼Œç„¶åå† `hexo d` ã€‚","tags":["Hexo"],"categories":["åšå®¢æ­å»º"]},{"title":"ç‰©è”ç½‘é€šè®¯åè®®","url":"/2024/02/24/ç‰©è”ç½‘é€šè®¯åè®®/","content":"\n# ç‰©è”ç½‘åè®®åˆ†ç±»ï¼š æ¥å…¥åè®®ã€é€šè®¯åè®®\n- æ¥å…¥åè®®ï¼šä¸€èˆ¬è´Ÿè´£å­ç½‘å†…è®¾å¤‡é—´çš„ç»„ç½‘åŠé€šä¿¡ã€‚\n- é€šè®¯åè®®ï¼šä¸»è¦æ˜¯è¿è¡Œåœ¨ä¼ ç»Ÿäº’è”ç½‘TCP/IPåè®®ä¹‹ä¸Šçš„è®¾å¤‡é€šè®¯åè®®ï¼Œè´Ÿè´£è®¾å¤‡é€šè¿‡äº’è”ç½‘è¿›è¡Œæ•°æ®äº¤æ¢åŠé€šä¿¡ã€‚\n\n<!-- more -->\n\n# ä¸€ã€ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚åè®®\n## 1. è¿œè·ç¦»èœ‚çªé€šè®¯\n- 2Gã€3Gã€4Gé€šè®¯åè®®\n- NB-loT (Narrow Brand Internet of Things) çª„å¸¦ç‰©è”ç½‘\n- 5G\n## 2. è¿œè·ç¦»éèœ‚çªé€šè®¯\n- WiFi\n- ZigBee\n- LoRaï¼ˆLongRangeï¼‰\n## 3. è¿‘è·ç¦»é€šè®¯\n- RFIDï¼ˆRadio Frequency Identificationï¼‰å°„é¢‘è¯†åˆ«\n- NFC\n- Bluetoothï¼ˆBLEï¼‰\n- UWB ï¼ˆUltra Widebandï¼‰æ— è½½æ³¢æ— çº¿é€šè®¯æŠ€æœ¯\n## 4. æœ‰çº¿é€šä¿¡\n- USBï¼ˆUniversal Series Busï¼‰é€šç”¨ä¸²è¡Œæ€»çº¿\n- ä¸²å£é€šè®¯åè®®ï¼ŒRS-232ã€RS-422 å’Œ RS-485\n- ä»¥å¤ªç½‘\n- MBusï¼ˆsymphonic mbusï¼‰è¿œç¨‹æŠ„è¡¨ç³»ç»Ÿ\n\n# äºŒã€ç½‘ç»œå±‚ã€ä¼ è¾“åè®®\n- IPv4\n- IPv6\n- TCPï¼ˆTransmission Control Protocolï¼‰ä¼ è¾“æ§åˆ¶åè®®\n- 6LowPAN\n\n# ä¸‰ã€åº”ç”¨å±‚åè®®\n- MQTTï¼ˆMessage Queue Telemetry Transportï¼‰é¥æµ‹ä¼ è¾“åè®®\n- CoAPï¼ˆConstrained Application Protocolï¼‰åè®®\n- REST / HTTPåè®®\n- DDSï¼ˆData Distribution Serviceï¼‰åˆ†å¸ƒå¼å®æ—¶æ•°æ®åˆ†å‘æœåŠ¡ä¸­é—´ä»¶åè®®\n- AMQPï¼ˆAdvanced Message Queuing Protocolï¼‰é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®\n- XMPPï¼ˆExtensible messaging and presence protocol åŸºäºXMLåè®®ï¼‰å¯æ‰©å±•é€šè®¯å’Œè¡¨ç¤ºåè®®\n\n# å››ã€éƒ¨åˆ†åè®®æ¯”è¾ƒ\n## 1. NB-IoTåè®®å’ŒLoRaåè®®æ¯”è¾ƒ\nç¬¬ä¸€ï¼Œé¢‘æ®µã€‚LoRa å·¥ä½œåœ¨ 1GHz ä»¥ä¸‹çš„éæˆæƒé¢‘æ®µï¼Œåœ¨åº”ç”¨æ—¶ä¸éœ€è¦é¢å¤–ä»˜è´¹ï¼ŒNB-IoT å’Œèœ‚çªé€šä¿¡ä½¿ç”¨ 1GHz ä»¥ä¸‹çš„é¢‘æ®µæ˜¯2113æˆæƒçš„ï¼Œæ˜¯éœ€è¦æ”¶è´¹çš„ã€‚\n\nç¬¬äºŒï¼Œç”µæ± ä¾›ç”µå¯¿å‘½ã€‚LoRaæ¨¡å—åœ¨å¤„ç†å¹²æ‰°ã€ç½‘ç»œ5261é‡è¿­ã€å¯ä¼¸ç¼©æ€§ç­‰æ–¹é¢å…·æœ‰ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œä½†å´ä¸èƒ½æä¾›åƒèœ‚çªåè®®ä¸€æ ·çš„æœåŠ¡è´¨é‡4102ã€‚NB-IoTå‡ºäºå¯¹æœåŠ¡è´¨é‡çš„è€ƒè™‘ï¼Œä¸èƒ½æä¾›ç±»ä¼¼LoRaä¸€æ ·çš„ç”µæ± å¯¿å‘½ã€‚\n\nç¬¬ä¸‰ï¼Œè®¾å¤‡æˆæœ¬ã€‚å¯¹ç»ˆç«¯èŠ‚ç‚¹æ¥è¯´ï¼ŒLoRaåè®®æ¯”NB-IoTæ›´ç®€å•ï¼Œæ›´å®¹æ˜“å¼€å‘å¹¶ä¸”1653å¯¹äºå¾®å¤„ç†å™¨çš„é€‚ç”¨å’Œå…¼å®¹æ€§æ›´å¥½ã€‚åŒæ—¶ä½æˆæœ¬ã€æŠ€æœ¯ç›¸å¯¹æˆç†Ÿçš„LoRaæ¨¡å—å·²ç»å¯ä»¥åœ¨å¸‚åœºä¸Šæ‰¾åˆ°äº†ï¼Œå¹¶ä¸”è¿˜ä¼šæœ‰å‡çº§ç‰ˆæœ¬é™†ç»­å‡ºæ¥ã€‚\n\nç¬¬å››ï¼Œç½‘ç»œè¦†ç›–å’Œéƒ¨ç½²æ—¶é—´è¡¨ã€‚NB-IoTæ ‡å‡†åœ¨2016å¹´å…¬å¸ƒï¼Œé™¤å›ç½‘ç»œéƒ¨ç½²ä¹‹å¤–ï¼Œç›¸åº”çš„å•†ä¸šåŒ–å’Œäº§ä¸šé“¾çš„å»ºç«‹è¿˜éœ€è¦æ›´é•¿çš„æ—¶é—´å’ŒåŠªåŠ›å»æ¢ç´¢ã€‚LoRaçš„æ•´ä¸ªäº§ä¸šé“¾ç›¸å¯¹å·²ç»è¾ƒä¸ºæˆç†Ÿäº†ï¼Œäº§å“ä¹Ÿå¤„äºâ€œè“„åŠ¿å¾…ç­”å‘â€çš„çŠ¶æ€ï¼ŒåŒæ—¶å…¨çƒå¾ˆå¤šå›½å®¶æ­£åœ¨è¿›è¡Œæˆ–è€…å·²ç»å®Œæˆäº†å…¨å›½æ€§çš„ç½‘ç»œéƒ¨ç½²ã€‚\n\n## 2. è“ç‰™ã€WiFiã€ZigBeeåè®®æ¯”è¾ƒ\nç›®å‰æ¥è¯´ï¼ŒWiFiçš„ä¼˜åŠ¿æ˜¯åº”ç”¨å¹¿æ³›ï¼Œå·²ç»æ™®åŠåˆ°åƒå®¶ä¸‡æˆ·ï¼›ZigBeeçš„ä¼˜åŠ¿æ˜¯ä½åŠŸè€—å’Œè‡ªç»„ç½‘ï¼›UWBæ— è½½æ³¢æ— çº¿é€šä¿¡æŠ€æœ¯çš„ä¼˜åŠ¿æ˜¯ä¼ è¾“é€Ÿç‡ï¼›è“ç‰™çš„ä¼˜åŠ¿ç»„ç½‘ç®€å•ã€‚ç„¶è€Œï¼Œè¿™3ç§æŠ€æœ¯ï¼Œä¹Ÿéƒ½æœ‰å„è‡ªçš„ä¸è¶³ï¼Œæ²¡æœ‰ä¸€ç§æŠ€æœ¯èƒ½å®Œå…¨æ»¡è¶³æ™ºèƒ½å®¶å±…çš„å…¨éƒ¨è¦æ±‚ã€‚\n\nè“ç‰™æŠ€æœ¯çš„å‡ºç°ä½¿å¾—çŸ­è·ç¦»æ— çº¿é€šä¿¡æˆä¸ºå¯èƒ½ï¼Œä½†å…¶åè®®è¾ƒå¤æ‚ã€åŠŸè€—é«˜ã€æˆæœ¬é«˜ç­‰ç‰¹ç‚¹ä¸å¤ªé€‚ç”¨äºè¦æ±‚ä½æˆæœ¬ã€ä½åŠŸè€—çš„å·¥ä¸šæ§åˆ¶å’Œå®¶åº­ç½‘ç»œã€‚å°¤å…¶è“ç‰™æœ€å¤§çš„éšœç¢åœ¨äºä¼ è¾“èŒƒå›´å—é™ï¼Œä¸€èˆ¬æœ‰æ•ˆçš„èŒƒå›´åœ¨10ç±³å·¦å³ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›ä¸å¼ºã€ä¿¡æ¯å®‰å…¨é—®é¢˜ç­‰é—®é¢˜ä¹Ÿæ˜¯åˆ¶çº¦å…¶è¿›ä¸€æ­¥å‘å±•å’Œå¤§è§„æ¨¡åº”ç”¨çš„ä¸»è¦å› ç´ ã€‚\n\nWiFiä¹Ÿæ˜¯æ˜¯ä¸€ç§çŸ­è·ç¦»æ— çº¿ä¼ è¾“æŠ€æœ¯ï¼Œå¯ä»¥éšæ—¶æ¥å…¥æ— çº¿ä¿¡å·ï¼Œç§»åŠ¨æ€§å¼ºï¼Œæ¯”è¾ƒé€‚åˆåœ¨åŠå…¬å®¤åŠå®¶åº­çš„ç¯å¢ƒä¸‹åº”ç”¨ã€‚å½“ç„¶WiFiä¹Ÿå­˜åœ¨ä¸€ä¸ªè‡´å‘½ç¼ºç‚¹ã€‚ç”±äºWiFié‡‡ç”¨çš„æ˜¯å°„é¢‘æŠ€æœ¯ï¼Œé€šè¿‡ç©ºæ°”å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä½¿ç”¨æ— çº¿ç”µæ³¢ä¼ è¾“æ•°æ®ä¿¡å·ï¼Œæ¯”è¾ƒå®¹æ˜“å—åˆ°å¤–ç•Œçš„å¹²æ‰°ã€‚\n\nZigBeeåˆ™æ˜¯å›½é™…é€šè¡Œçš„æ— çº¿é€šè®¯æŠ€æœ¯ï¼Œå®ƒçš„æ¯ä¸ªç½‘ç»œç«¯å£å¯ä»¥æœ€å¤šæ¥å…¥6.5ä¸‡å¤šä¸ªç«¯å£ï¼Œé€‚åˆå®¶å±…ã€å·¥ä¸šã€å†œä¸šç­‰å¤šä¸ªé¢†åŸŸä½¿ç”¨ï¼Œè€Œè“ç‰™å’ŒWiFiç½‘ç«¯åªèƒ½æ¥å…¥10ä¸ªç«¯å£ï¼Œæ˜¾ç„¶ä¸èƒ½é€‚åº”å®¶åº­éœ€è¦ã€‚ZigBeeè¿˜å…·æœ‰ä½åŠŸè€—å’Œä½æˆæœ¬ä¼˜åŠ¿ã€‚\n\n## 3. MQTTåè®®å’ŒCoAPåè®®æ¯”è¾ƒ\nMQTTæ˜¯å¤šå¯¹å¤šé€šè®¯åè®®ç”¨äºåœ¨ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡ä¸­é—´ä»£ç†ä¼ é€æ¶ˆæ¯ï¼Œè§£è€¦ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ï¼Œé€šè¿‡ä½¿å¾—å®¢æˆ·ç«¯å‘å¸ƒï¼Œè®©ä»£ç†å†³å®šè·¯ç”±å¹¶ä¸”æ‹·è´æ¶ˆæ¯ã€‚è™½ç„¶MQTTæ”¯æŒä¸€äº›æŒä¹…åŒ–ï¼Œæœ€å¥½è¿˜æ˜¯ä½œä¸ºå®æ—¶æ•°æ®é€šè®¯æ€»çº¿ã€‚\n\nCoAPä¸»è¦æ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹åè®®ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“çŠ¶æ€ä¿¡æ¯ã€‚è™½ç„¶æ”¯æŒè§‚å¯Ÿèµ„æºï¼ŒCoAPæœ€å¥½é€‚åˆçŠ¶æ€ä¼ è¾“æ¨¡å‹ï¼Œä¸æ˜¯å®Œå…¨åŸºäºäº‹ä»¶ã€‚\n\nMQTTå®¢æˆ·ç«¯å»ºç«‹é•¿è¿æ¥TCPï¼Œè¿™é€šå¸¸è¡¨ç¤ºæ²¡æœ‰é—®é¢˜ï¼ŒCoAPå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨éƒ½å‘é€ä¸æ¥æ”¶UDPæ•°æ®åŒ…ï¼Œåœ¨NATç¯å¢ƒä¸­ï¼Œéš§é“æˆ–è€…ç«¯å£è½¬å‘å¯ä»¥ç”¨äºå…è®¸CoAPï¼Œæˆ–è€…åƒLWM2Mï¼Œè®¾å¤‡ä¹Ÿè®¸ä¼šå…ˆåˆå§‹åŒ–å‰ç«¯è¿æ¥ã€‚\n\nMQTTä¸æä¾›æ”¯æŒæ¶ˆæ¯æ‰“ç±»å‹æ ‡è®°æˆ–è€…å…¶ä»–å…ƒæ•°æ®å¸®åŠ©å®¢æˆ·ç«¯ç†è§£ï¼ŒMQTTæ¶ˆæ¯å¯ç”¨äºä»»ä½•ç›®çš„ï¼Œä½†æ˜¯æ‰€æœ‰çš„å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“å‘ä¸Šçš„æ•°æ®æ ¼å¼ä»¥å…è®¸é€šè®¯ï¼ŒCoAPï¼Œç›¸ååœ°ï¼Œæä¾›å†…ç½®æ”¯æŒå†…å®¹åå•†ä¸å‘ç°ï¼Œå…è®¸è®¾å¤‡ç›¸äº’æ¢æµ‹ä»¥æ‰¾åˆ°äº¤æ¢æ•°æ®çš„æ–¹å¼ã€‚\n\nä¸¤ç§åè®®å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„å–å†³äºè‡ªå·±çš„åº”ç”¨ã€‚\n\n# å‚è€ƒ\n- [ã€çŸ¥è¯†åˆ†äº«ã€‘æ‚¨äº†è§£ç‰©è”ç½‘é€šä¿¡åè®®5Gã€NB-Iotã€LoRaã€ZigBeeã€NFCâ€¦....éƒ½æ˜¯å•¥å—ï¼Ÿ](https://mp.weixin.qq.com/s/n8PnUuubTHM7ZPmmtD5jfA)","tags":["ç‰©è”ç½‘"]},{"title":"å‡ åˆ†é’Ÿå†…æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒ","url":"/2023/07/31/å‡ åˆ†é’Ÿå†…æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒ/","content":"\n# ç®€ä»‹\n\nä½¿ç”¨Dockerè™šæ‹Ÿæœºï¼Œå‡ æ­¥åœ¨æœ¬åœ°å¿«é€Ÿæ­å»ºChatGPTç¯å¢ƒï¼Œå…APIï¼Œå…ç¿»å¢™ï¼Œå³å¯ä½¿ç”¨çº¯æ­£OpenAIçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®Œå…¨å…è´¹ï¼\n\n![](/images/ChatGPT/ChatGPT_info.png)\n\n<!-- more -->\n\n# æ­£æ–‡\n## ä¸‹è½½å®‰è£…Docker\nå®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://www.docker.com/\n\n## æ‹‰å–pandoraé•œåƒ\npandoraæºç åœ°å€ï¼šhttps://github.com/pengzhile/pandora\n\nå®‰è£…å¥½Dockeråï¼Œæ‰“å¼€Macç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤\n\n```shell\ndocker pull pengzhile/pandora\n```\n\n## å¯åŠ¨pandoraé•œåƒ\nç­‰ä¸Šé¢é•œåƒä¸‹è½½å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤\n\n```shell\ndocker run  -e PANDORA_CLOUD=cloud -e PANDORA_SERVER=0.0.0.0:8899 -p 8899:8899 -d pengzhile/pandora\n```\n\næˆåŠŸè¿è¡Œæ•ˆæœ\n![docker_run](/images/ChatGPT/docker_run.png)\n\n## è·å–AccessToken\né€šè¿‡ç™»å½•OpenAIå®˜æ–¹APIï¼Œç™»å½•æˆåŠŸåï¼Œç„¶åè®¿é—® [è¿™é‡Œ](https://chat.openai.com/api/auth/session) å³å¯æ‹¿åˆ°å®˜æ–¹çš„Access Tokenï¼ˆpsï¼šè¿™ä¸€æ­¥éœ€è¦ç¿»å¢™æ‰èƒ½å®Œæˆï¼‰\n\nè·å–æˆåŠŸåæ•ˆæœå›¾\n![access_token](/images/ChatGPT/as.jpg)\n\n\n> æ³¨æ„ï¼šTokenç›®å‰çœ‹æœ‰æ•ˆæœŸæ˜¯ä¸€ä¸ªæœˆï¼Œä¸€ä¸ªæœˆåéœ€è¦é‡æ–°è·å–\n\n## è®¿é—®æœ¬åœ°é“¾æ¥\nhttp://127.0.0.1:8899 \n\nä½¿ç”¨ä¸Šä¸€æ­¥è·å–çš„Access Tokenç™»å½•å³å¯\n![login_with_access_token](/images/ChatGPT/login_with_access_token.png)\n\nç™»å½•æˆåŠŸåï¼Œå³å¯ä½¿ç”¨OpenAIçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®Œå…¨å…è´¹ï¼ğŸ‰ğŸ‰ğŸ‰\n![chat_gpt_demo](/images/ChatGPT/chat_gpt_demo.png)\n","tags":["ChatGPT, OpenAI, AIGC"]},{"title":"Flutteræœ€ä½³å®è·µæ•´ç†","url":"/2021/03/28/Flutteræœ€ä½³å®è·µæ•´ç†/","content":"\n\n\n![](/images/cover_img/johannes-andersson-v5gGwubKzEA-unsplash.jpg)\n\n<!-- more -->\n\n## Text ä»¥å­—ç¬¦çš„æ–¹å¼æˆªæ–­\n\n[https://github.com/flutter/flutter/issues/52869](https://github.com/flutter/flutter/issues/52869)\n\nåœ¨flutterä¸­ï¼ŒTextæ§ä»¶é»˜è®¤çš„æº¢å‡ºæ˜¾ç¤ºæ¨¡å¼æ˜¯`TextOverflow.fade` ,å°±æ˜¯æ·¡å‡º\n\nåœ¨iOSæˆ–è€…Androidå¹³å°é»˜è®¤çš„æ–‡ä»¶æˆªæ–­æ¨¡å¼ä¸€èˆ¬æ˜¯...çœç•¥ï¼Œflutteré‡Œé¢å¯¹åº”çš„æˆªæ–­æ¨¡å¼ä¸º`TextOverflow.ellipsis` ,ä¸è¿‡è¿™é‡Œçš„æˆªæ–­æ˜¯è‹±æ–‡æŒ‰ç…§å•è¯æ¥çš„ï¼Œè¿™æ ·çš„æ¨¡å¼ä¼šå¯¼è‡´å¦‚æœæœ€åä¸€ä¸ªå•è¯å¾ˆé•¿æ—¶ï¼Œæˆªæ–­æ˜¾ç¤ºä¼šæ•´ç†çœç•¥è€Œä¸æ˜¯æœ€åè¶…å‡ºçš„å­—ç¬¦çœç•¥ï¼Œå¯¼è‡´æ¨¡å—å¯èƒ½æœ‰ä¸€å¤§å—ç©ºç™½ã€‚\n\nDartç³»ç»Ÿå®šä¹‰çš„æˆªæ–­æ¨¡å¼\n\n```dart\n/// How overflowing text should be handled.\n///\n/// A [TextOverflow] can be passed to [Text] and [RichText] via their\n/// [Text.overflow] and [RichText.overflow] properties respectively.\nenum TextOverflow {\n  /// Clip the overflowing text to fix its container.\n  clip,\n\n  /// Fade the overflowing text to transparent.\n  fade,\n\n  /// Use an ellipsis to indicate that the text has overflowed.\n  ellipsis,\n\n  /// Render overflowing text outside of its container.\n  visible,\n}\n```\n\nå¦‚ä½•è§£å†³è‹±æ–‡å•è¯è¢«æ•´ä½“æˆªæ–­å‘¢ï¼Ÿ\n\nå°†å•è¯çš„æ¯ä¸ªå­—ç¬¦åˆ‡å‰²å¼€ï¼Œæ’å…¥å®½åº¦0çš„å ä½å­—ç¬¦ï¼Œæ‰“ç ´ç³»ç»Ÿé»˜è®¤çš„æœºåˆ¶ï¼Œè¿™æ ·å°±å¯ä»¥ä»¥å­—ç¬¦ä¸ºå•ä½çœç•¥äº†\n\n> éœ€è¦æ³¨æ„ã€‚è¿™ç§æ–¹å¼ç›¸å½“äºä¿®æ”¹äº†æ–‡æœ¬çš„å†…å®¹ï¼Œä¸€èˆ¬æ–‡æœ¬æœ€å¤§ä¸€è¡Œæ˜¾ç¤ºå¯ä»¥ç”¨ï¼Œå¦‚æœæ–‡æœ¬æ”¯æŒ2è¡Œä»¥åŠä»¥ä¸Šçš„æ˜¾ç¤ºçš„è¯ï¼Œå°†ä¼šå¯¼è‡´æ¢è¡Œä¸å†æŒ‰ç…§å­—ç¬¦è¿›è¡Œè€ŒæŒ‰ç…§å•è¯è¿›è¡Œ\n\nä¸‹é¢æ˜¯Exampleå®ç°\n\n```objectivec\nextension TextOverflowUtil on String {\n  /// å°†flutterç³»ç»Ÿé»˜è®¤çš„å•è¯æˆªæ–­æ¨¡å¼è½¬æ¢æˆå­—ç¬¦æˆªæ–­æ¨¡å¼\n  /// é€šè¿‡å‘æ–‡æœ¬ä¸­æ’å…¥å®½åº¦ä¸º0çš„ç©ºæ ¼å®ç°\n  static String toCharacterBreakStr(String word) {\n    if (word == null || word.isEmpty) {\n      return word;\n    }\n    String breakWord = '';\n    word.runes.forEach((element) {\n      breakWord += String.fromCharCode(element);\n      breakWord += '\\u200B';\n    });\n    return breakWord;\n  }\n}\n```\n\n## æ–‡æœ¬åˆ’çº¿\n\né€šè¿‡Textçš„decorationå±æ€§æ¥å®ç°åˆ’çº¿\n\n- TextDecoration.none        æ²¡æœ‰\n- TextDecoration.underline   ä¸‹åˆ’çº¿\n- TextDecoration.overline    ä¸Šåˆ’çº¿\n- TextDecoration.lineThrough ä¸­é—´çš„çº¿ï¼ˆåˆ é™¤çº¿ï¼‰\n\n// åˆ’çº¿ç›¸å…³çš„å±æ€§è®¾ç½®\ndecorationColor   decorationåˆ’çº¿çš„é¢œè‰²\ndecorationStyle   decorationåˆ’çº¿çš„æ ·å¼\n- TextDecorationStyle.solid   å®çº¿\n- TextDecorationStyle.double  ç”»ä¸¤æ¡çº¿\n- TextDecorationStyle.dotted  ç‚¹çº¿ï¼ˆä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„ï¼‰\n- TextDecorationStyle.dashed  è™šçº¿ï¼ˆä¸€ä¸ªé•¿æ–¹å½¢ä¸€ä¸ªé•¿æ–¹å½¢çš„çº¿ï¼‰\n- TextDecorationStyle.wavy    æ­£ç„æ›²\n\næ•ˆæœå›¾å¦‚ä¸‹\n\n![best_practise_01](/images/best_practise/best_practise_01.png)\n\n## VS Codeå®ç°ä¿å­˜æ—¶è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–\n\nVS Codeä¸­ä»£ç æ ¼å¼åŒ–é»˜è®¤å¿«æ·é”®ï¼šã€Shiftã€‘+ã€Altã€‘+ F\n\nå®ç°æ‰‹åŠ¨ä¿å­˜ï¼ˆCtril + Sï¼‰æ—¶è‡ªåŠ¨è§¦å‘ä»£ç æ ¼å¼åŒ–ï¼š\n\n1ï¼‰Code â†’ Perference â†’ Settting ç‚¹å‡»å³ä¸Šè§’ï¼ˆOpen Setting(JSON) ï¼‰\n\n![best_practise_02](/images/best_practise/best_practise_02.png)\n\n\n2ï¼‰åœ¨settings.jsonä¸‹çš„ã€å·¥ä½œåŒºè®¾ç½®ã€‘ä¸­æ·»åŠ ä»¥ä¸‹è¯­å¥ï¼š\n\n```dart\n\"editor.formatOnType\": true,\n\"editor.formatOnSave\": true\n```\n\n![best_practise_03](/images/best_practise/best_practise_03.png)\n\n\n## è§£å†³ setState() called after diapose()\n\nç½‘ç»œè¯·æ±‚æˆåŠŸå‰é€€å‡ºäº†é¡µé¢ï¼Œè¯¥ State è¢«ä»å¯¹è±¡æ ‘å¸è½½æ‰ï¼Œè€Œè¿™æ—¶å›è°ƒäº†ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¸­å¸¦æœ‰ setState çš„è°ƒç”¨ï¼Œä¹Ÿå°±å¯¼è‡´äº†è¯¥é—®é¢˜ã€‚\n\n```dart\nif (mounted) {\n  setState(() {\n    this._books = dataModel.books;\n  });\n}\n```\n\n## Waiting for another flutter command to release the startup lockâ€¦ç­‰å¾…å¦ä¸€ä¸ªflutterå‘½ä»¤é‡Šæ”¾å¯åŠ¨é”\n\n1. é€€å‡º VS Codeã€‚\n2. æ‰“å¼€ flutter å®‰è£…ç›®å½• å¦‚ï¼šâ€¦\\flutter\\flutter\\bin\\cache åˆ é™¤é‡Œé¢çš„ lockfileã€‚\n3. é‡å¯æ‰“å¼€VS Codeã€‚\n\nåŸå› ï¼šå½“ä½ çš„é¡¹ç›®å¼‚å¸¸å…³é—­ï¼Œä¸‹æ¬¡å¯åŠ¨å°±ä¼šå‡ºç°ä¸Šé¢çš„ä¸€è¡Œè¯ï¼Œ\næ­¤æ—¶éœ€è¦æ‰“å¼€ flutter/bin/cache/lockfileï¼Œåˆ é™¤å°±è¡Œäº†ï¼Œ\næˆ–è€…ç›´æ¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼šrm ./flutter/bin/cache/lockfileã€‚\n\n## åœ¨Statelessæ§ä»¶å†…éƒ¨æˆ–è€…æµ®å±‚å†…éƒ¨åˆ·æ–°ï¼Œå¯ä»¥ä½¿ç”¨StatefullBuilder\n\n```dart\nshowDialog<void>(\n  context: context,\n  builder: (BuildContext context) {\n    int selectedRadio = 0;\n    return AlertDialog(\n      content: StatefulBuilder(\n        builder: (BuildContext context, StateSetter setState) {\n          return Column(\n            mainAxisSize: MainAxisSize.min,\n            children: List<Widget>.generate(4, (int index) {\n              return Radio<int>(\n                value: index,\n                groupValue: selectedRadio,\n                onChanged: (int value) {\n                  setState(() => selectedRadio = value);\n                },\n              );\n            }),\n          );\n        },\n      ),\n    );\n  },\n);\n```\n\nè¿™é‡Œé€šè¿‡selectedRadioå˜é‡è®°å½•Radioçš„æ˜¯å¦é€‰ä¸­çš„çŠ¶æ€\n\n## å¹³å°ç›¸å…³çš„åˆ¤æ–­\n\nåªå…³å¿ƒæ˜¯å¦æ˜¯iOSå’ŒAndroidçš„æƒ…å†µä¸‹ä¸éœ€è¦ä¾èµ–`context`ï¼Œä¼˜å…ˆä½¿ç”¨`Platform`\n\n```json\nPlatform.isAndroid\nPlatform.isIOS\n```\n\néœ€è¦è¯¦ç»†çŸ¥é“å…·ä½“å“ªä¸ªå¹³å°æ‰ä½¿ç”¨`TargetPlatform`\n\nè¿™ä¸ªAPIçš„ç¼ºç‚¹æ˜¯éœ€è¦ä¾èµ–`context`è¿™ä¸ªå‚æ•°\n\n```dart\nfinal platform = Theme.of(context).platform;\n\nif (platform == TargetPlatform.android) {\n\t...\n} else if (platform == TargetPlatform.iOS) {\n\t...\n}\n```\n\n## ScrollView æ»‘åŠ¨éšè—é”®ç›˜\n\n[https://stackoverflow.com/questions/55306855/hide-keyboard-on-scroll-in-flutter](https://stackoverflow.com/questions/55306855/hide-keyboard-on-scroll-in-flutter)\n\nä½¿ç”¨ScrollViewçš„`keyboardDismissBehavior`å±æ€§\n\n```json\nListView(\n\tkeyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.onDrag\n)\n```\n\n## å›è°ƒå†™æ³•\n\n### a.æ— å‚æ•°å›è°ƒ\n\nVoidCallback\n\n### b.æœ‰ä¸€ä¸ªå‚æ•°å›è°ƒ\n\nValueChanged\n\n### c.å‚æ•°å¤§äºä¸€ä¸ª\n\nå¯ä»¥é€šè¿‡`typedef`è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°\n\nä¸‹é¢æ˜¯Exampleç”¨æ³•\n\n```dart\nfinal VoidCallback onPressed;\nfinal ValueChanged<T> onSelectHandler;\ntypedef ImageSwiperOnTap = void Function(int index, List<String> imgUrls);\n```\n\n## flutter pub get is stuck\n\nå¯ä»¥é€šè¿‡åˆ‡æ¢flutteré•œåƒåˆ°ä¸­æ–‡ç«™ç‚¹æ¥è§£å†³\n\nä½¿ç”¨ç³»ç»Ÿshellï¼Œè¯·ç¼–è¾‘\n\nä½¿ç”¨oh_my_zsh, éœ€è¦ç¼–è¾‘`.zshrc`\n\n```bash\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n```\n\nä¿å­˜æ–‡ä»¶åï¼Œå…³é—­ï¼Œä¸‹æ¬¡é‡æ–°æ‰“å¼€ç»ˆç«¯ç”Ÿæ•ˆ\n\nå†æ‰§è¡Œ`flutter pub get` æŸ¥çœ‹é€Ÿåº¦æ˜¯å¦æ­£å¸¸","tags":["æŠ€å·§","æ•ˆç‡"],"categories":["dart"]},{"title":"Flutterç²¾åèµ„æ–™æ”¶é›†","url":"/2020/10/19/flutterç²¾åèµ„æ–™æ”¶é›†/","content":"\n![](/images/cover_img/ray-hennessy-xUUZcpQlqpM-unsplash.jpg)\n\n<!-- more -->\n\n\n## è¯´æ˜\n\næ­¤æ–‡ç”¨äºè®°å½•æ—¥å¸¸flutterå¼€å‘ä¸­ä½¿ç”¨åˆ°æˆ–è€…çœ‹åˆ°çš„ç²¾åæ–‡ç« æˆ–è€…èµ„æºï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…\n\n## æ–‡ç« \n\n### Flutterè¿›é˜¶\n\n- [è®©FlutterçœŸæ­£æ”¯æŒViewçº§åˆ«çš„æ··åˆå¼€å‘](https://mp.weixin.qq.com/s/-vyU1JQzdGLUmLGHRImIvg)\n- [Dart Souls -ã€ŠDart ä¹‹é­‚ã€‹](https://jarontai.github.io/dart-souls/)\n- [Flutterå®Œæ•´å¼€å‘å®æˆ˜è¯¦è§£ç³»åˆ—](https://guoshuyu.cn/home/wx/)\n- [æ·±å…¥ç†è§£Flutter Platform Channel](https://www.jianshu.com/p/39575a90e820)\n- [Flutter å¸ƒå±€æ§ä»¶å®Œç»“ç¯‡](https://juejin.im/post/5bab35ff5188255c3272c228)\n- [è¶…è¯¦è§£æFlutteræ¸²æŸ“å¼•æ“|ä¸šåŠ¡æƒ³åˆ›æ–°ï¼Œä¸äº†è§£åº•å±‚åŸç†æ€ä¹ˆè¡Œï¼Ÿ](https://mp.weixin.qq.com/s/xxdgoEBIC3Bg4OCOZcm-aQ) -- from æ·˜ç³»æŠ€æœ¯\n- [æ·±å…¥ç†è§£Flutterå¼•æ“çº¿ç¨‹æ¨¡å¼](https://mp.weixin.qq.com/s/hZ5PUvPpMlEYBAJggGnJsw)\n- [Flutter çš„æ€§èƒ½åˆ†æã€å·¥ç¨‹æ¶æ„ä¸ç»†èŠ‚å¤„ç†](https://mp.weixin.qq.com/s/0R5UnVFlVbLKoV__s66HnA) -- fromæœ‰é“äº‘\n- [Flutter å›¾ç‰‡æ§ä»¶é€‚é…ä¹‹è·¯](https://juejin.cn/post/6917081883201241101) -- from ç½‘æ˜“äº‘éŸ³ä¹\n\n### ä¸šç•ŒåŠ¨æ€\n\n- [Flutter åœ¨å“ˆå•°å‡ºè¡Œ B ç«¯åˆ›æ–°ä¸šåŠ¡çš„å®è·µ](https://juejin.im/post/5eb27cc9f265da7b9625e85c)\n- [Flutteråœ¨PLUSä¸šåŠ¡ä¸­çš„æ¢ç´¢å’Œå®è·µ](https://mp.weixin.qq.com/s/eJxmeAJ0ljmbPbgNVkGttQ)\n- [&quot;é›¶&quot;å­¦ä¹ æˆæœ¬ï¼šä½¿ç”¨ Web æ ‡å‡†å¼€å‘åŠ¨æ€åŒ– Flutter åº”ç”¨](https://mp.weixin.qq.com/s/57CprMfvTtIeq6AdgcDdcw)\n- [äº¬ä¸œæŠ€æœ¯ä¸­å°çš„ Flutter å®è·µä¹‹è·¯](https://www.infoq.cn/article/qSLsru9bEvuHgKpPlWMP)\n- [æ‰“ç ´é‡é‡é˜»ç¢ï¼ŒFlutter å’Œ Web ç”Ÿæ€å¦‚ä½•å¯¹æ¥ï¼Ÿ](https://www.infoq.cn/article/16dv4pmnghv6i1lct3r4)\n\n### æ€§èƒ½ä¼˜åŒ–\n\n* [Flutteræ€§èƒ½ä¼˜åŒ–å®è·µ â€”â€” UIç¯‡](https://juejin.im/post/6844904153236373517)\n\n### Flutter åŠ¨æ€\n\n- [Dart: å¥å…¨çš„ç©ºå®‰å…¨æ¦‚è§ˆ](https://mp.weixin.qq.com/s/rL6FtCSyca8DsUuNVbSA_w)\n- [æ·±å…¥ç†è§£ Dart ç©ºå®‰å…¨](https://mp.weixin.qq.com/s/MEL5kokoyb0CJcjrPpo12w)\n- [nullsafety dartpad]( https://nullsafety.dartpad.cn/)\n- [è§‚æ‘©ï¼Flutter 1.22 æ­£å¼å‘å¸ƒ](https://juejin.im/post/6879048672597213198)\n\n## ç½‘ç«™\n\n- [Flutter å®˜ç½‘](https://flutter.io/)\n- [Flutter ä¸­æ–‡ç½‘](https://flutterchina.club/)\n- [Flutter ä¸­æ–‡å¼€å‘æ–‡æ¡£](https://flutter.cn/docs)\n- [Flutteræ•™ç¨‹ç½‘](http://book.flutterj.com/)\n\n\n## è§†é¢‘\n\n- [Introducing Widget of the Week!](https://www.youtube.com/watch?v=b_sQ9bMltGU&list=PLjxrf2q8roU23XGwz3Km7sQZFTdB996iG&index=2&t=0s)\n- [Flutter by Google](https://www.youtube.com/watch?v=fq4N0hgOWzU&list=PLOU2XLYxmsIJ7dsVN4iRuA7BT8XHzGtCr)\n- [AliFlutterç¬¬äºŒæœŸç›´æ’­å›æ”¾](http://mudu.tv/watch/5624777mudu.tv/watch/5624777)\n- [é˜¿é‡Œå·´å·´é—²é±¼æŠ€æœ¯å›¢é˜Ÿå®¢æˆ·ç«¯è´Ÿè´£äººä¸€èµ·æ¢è®¨Flutterçš„è¡Œä¸šç°çŠ¶ä¸æœªæ¥](https://www.bilibili.com/video/BV1n741117v1?from=search&seid=12211378857505011313)\n\n\n## åšå®¢\n\n- [å’¸é±¼æŠ€æœ¯ - Flutter](https://www.jianshu.com/u/cf5c0e4b1111)\n- [Lokiçš„åšå®¢](http://whysodiao.com/) â€” ç›®å‰å°±èŒäºåŒ—äº¬è…¾è®¯ï¼Œåšå®¢é‡Œé¢æœ‰å¾ˆflutteræ€»ç»“çš„æ–‡ç« \n- [è€å­Ÿflutter](http://laomengit.com/) â€” æ•´ç†äº†å‡ ä¹æ‰€æœ‰çš„widgetï¼ŒåŒ…å«ä½¿ç”¨çš„ä¾‹å­ï¼Œè¿˜æœ‰éƒ¨åˆ†å®æˆ˜é¡¹ç›®\n- [GuruMeditation](https://www.burkharts.net/apps/blog/) â€” æœ‰ä¸€äº›å…³äºflutteræ¶æ„æ–¹é¢çš„æ–‡ç« \n\n\n## æ˜é‡‘åšä¸»\n\n* [Vadaski](https://juejin.im/user/1767670428477015)\n* [å¼ é£æ·ç‰¹çƒˆ](https://juejin.im/user/149189281194766)\n* [YYDev](https://juejin.im/user/483440843559406)\n* [è€å­ŸFlutter](https://juejin.im/user/2013961034677725)\n* [é—²é±¼æŠ€æœ¯](https://juejin.im/user/1257497031878408)\n\n\n## ç”µå­ä¹¦\n\n- [Flutter å®æˆ˜](https://book.flutterchina.club/) â€” æ¥è‡ªduwen æ˜¯[dio](https://github.com/flutterchina/dio)ã€[fly](https://github.com/wendux/fly)ã€[dsBridge](https://github.com/wendux/DSBridge-Android)ç­‰å¤šä¸ªçŸ¥åå¼€æºé¡¹ç›®ä½œè€…\n\n\n## å·¥å…·\n\n- [flutteråœ¨çº¿ç¼–è¾‘å·¥å…·CodePen](https://codepen.io/flutter)\n- [Dart åœ¨çº¿ç¼–è¾‘å·¥å…· DartPad](https://dartpad.dev/)\n- [åœ¨çº¿JSON To Dart ä»£ç ç”Ÿæˆ](https://javiercbk.github.io/json_to_dart/) \n- [Json to Dart built_value class converter](https://charafau.github.io/json2builtvalue/)\n- [2020å¹´20ä¸ªFlutteræœ€æ¼‚äº®çš„UIåº“å’Œé¡¹ç›®](https://juejin.im/post/5f14e128e51d45347c1b926a)\n\n\n## ä¼˜ç§€é¡¹ç›® &amp; App\n\n-  [GSYGithubAppFlutter](https://github.com/CarGuo/gsy_github_app_flutter) â€” å¤§å‹flutteré¡¹ç›®ï¼Œ Star 10.8k\n- [Developer_quest](https://github.com/2d-inc/developer_quest)  â€” Google å®˜æ–¹æ¼”ç¤ºæ¸¸æˆDemoï¼ŒStar 2.6k\n- [Flutter Go](https://flutter-go.pub/website/) â€” Aliå¼€å‘çš„flutterç»„ä»¶demoæ¼”ç¤ºå’Œæ–°é—»èµ„è®¯\n- [Flutter Samples](https://github.com/flutter/samples) â€” Flutter å®˜æ–¹ Demoï¼ŒStar 7.3k\n- [awesome-flutter](https://github.com/Solido/awesome-flutter) â€” Flutter ç›¸å…³çš„èµ„æ–™é›†åˆï¼ŒStar 28.3k\n- [Flutter-Notebook](https://github.com/OpenFlutter/Flutter-Notebook) â€” FlutterDemoåˆé›†, Star 5.7k\n- [FlutterUnit](https://github.com/toly1994328/FlutterUnit) â€” ç»„ä»¶æ¼”ç¤ºé¡¹ç›®ï¼Œ Star 1.8k\n- [flutter-samples](https://github.com/diegoveloper/flutter-samples) â€” Flutter æ¼”ç¤ºé¡¹ç›®ï¼Œå¾ˆå¤šåŠ¨ç”»æ•ˆæœ , Star 1.5k\n- [flutter_deer](https://github.com/simplezhli/flutter_deer)  â€”  Flutter ç»ƒæ‰‹é¡¹ç›® ,åŠŸèƒ½å¾ˆä¸°å¯Œï¼Œ Star 4.1k\n- [FlutterExampleApps](https://github.com/iampawan/FlutterExampleApps)  â€” Flutter ç¤ºä¾‹Appï¼ŒåŒ…å«å¸¸è§æµè¡Œä½œå“ï¼ˆWhatsAppï¼ŒInstagramç­‰ï¼‰, Star 13.8k\n\n\n\n## PPT\n\n- [AliFlutterå›¾ç‰‡è§£å†³æ–¹æ¡ˆä¸ä¼˜åŒ–](https://files.alicdn.com/tpsservice/db6a840f7ac7a8e3d5bde69c401bcfd5.pdf)\n- [UC FlutteræŠ€æœ¯å®è·µåˆ†äº«](https://files.alicdn.com/tpsservice/d324c2a95852b22f1bdf2e60e55670a2.pdf)\n","tags":["æ•ˆç‡","flutter"],"categories":["dart"]},{"title":"Flutter å¼€å‘Tips ï¼ˆç¬¬äºŒæœŸï¼‰","url":"/2020/09/17/Flutter-å¼€å‘Tips-ï¼ˆç¬¬äºŒæœŸï¼‰/","content":"\n\n\n![](/images/cover_img/ramon-salinero-vEE00Hx5d0Q-unsplash.jpg)\n\n<!-- more -->\n\n\n\n## æé«˜flutter attachçš„æˆåŠŸç‡\n\n### æ–¹æ¡ˆ1\n\næ–­å¼€wifiï¼Œæ‰§è¡Œflutter attachï¼ŒattachæˆåŠŸåå†é“¾æ¥wifi\n\n### æ–¹æ¡ˆ2\n\né€šè¿‡æŒ‡å®šè®¾å¤‡uuidè¿›è¡Œattach\n\n1. é€šè¿‡`flutter devices`æŸ¥æ‰¾å·²é“¾æ¥è®¾å¤‡åˆ—è¡¨ï¼Œè·å–é“¾æ¥è®¾å¤‡çš„uuid\n2. `flutter attach -d <#uuid#>` æŒ‡å®šæƒ³è¦attachçš„è®¾å¤‡è¿›è¡Œè¿æ¥ï¼Œä¾‹å¦‚`flutter attach -d AE5D772C-6D56-43AD-83F2-0554257B16C4` \n\n![Xnip2020-09-17_02-35-23](/images/flutter_tips_s2/flutter_attach.jpg)\n\n### æ–¹æ¡ˆ3\n\né€šè¿‡æŒ‡å®šåº”ç”¨çš„app-idè¿›è¡Œattach\n\n1. åŒä¸€wifiç¯å¢ƒä¸‹å¦‚æœæœ‰å¤šå°ç›¸åŒé¡¹ç›®è®¾å¤‡è¿æ¥ä¸­ï¼Œæ‰¾åˆ°ä½ éœ€è¦attachçš„app-idè¿›è¡Œè¿æ¥\n2. æ‰§è¡Œï¼š`flutter attach --app-id <#app_id#> `ä¾‹å¦‚ï¼š`flutter attach --app-id com.xxx.xxx`                            \n\n## ä»packageä¸­åŠ è½½jsonæ–‡ä»¶\n\n### èƒŒæ™¯\n\nä¾‹å¦‚æˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªflutterçš„demoé¡¹ç›®å«`flutter_demo_package_json_load`ï¼Œåœ¨æ ¹ç›®å½•é€šè¿‡å‘½ä»¤ï¼š`flutter create --template=package json_test_package`,åˆ›å»ºäº†ä¸€ä¸ªåä¸º`json_test_package`çš„packageï¼Œåœ¨packageçš„assetsä¸­æœ‰ä¸€ä¸ªä¸ºtest2.jsonæ–‡ä»¶ï¼Œç°åœ¨éœ€è¦åœ¨packageä¸­åŠ è½½åˆ°æ”¹æ–‡ä»¶ã€‚\n\n\n\n### ä»å·¥ç¨‹åŠ è½½json\n\nå¯¹äºæ™®é€šé¡¹ç›®çš„jsonæ–‡ä»¶ï¼ŒåŠ è½½æ–¹å¼å¦‚ä¸‹ï¼š\n\n1. åœ¨é¡¹ç›®ä¸­æ·»åŠ jsonæ–‡ä»¶ï¼Œä¾‹å¦‚é¡¹ç›®çš„assetsä¸‹æœ‰ä¸€ä¸ªåä¸ºtest1.jsonçš„æ–‡ä»¶\n\n2. æˆ‘ä»¬åœ¨yamlä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–\n\n   ```yaml\n   # åªåŠ è½½assetsä¸‹çš„test1.jsonæ–‡ä»¶\n   assets:\n     - assets/test1.json\n   \n   # æˆ–è€…\n   # åŠ è½½assetsä¸‹çš„æ‰€æœ‰æ–‡ä»¶\n    assets:\n     - assets/\n   ```\n\n3. é€šè¿‡rootBundleåŠ è½½\n\n   ```dart\n   Future<String> _loadFromProjectAsset() async {\n     // json file in project,is ok\n     return rootBundle.loadString(\"assets/test1.json\");\n   }\n   ```\n\nä½†æ˜¯å¯¹äºpackageä¸‹é¢jsonæ–‡ä»¶ä¸Šé¢çš„æ–¹æ³•å¤±æ•ˆäº†ï¼Œä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•åŠ è½½å°†ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š\n\n![image-20200917144141986](/images/flutter_tips_s2/flutter_tips_15.png)\n\né”™è¯¯åŸå› æ˜¯èµ„æºè·¯å¾„ä¸å¯¹ï¼ŒåŠ è½½ä¸åˆ°ï¼Œå› ä¸ºrootBundleç±»æ²¡æœ‰æä¾›package nameçš„å‚æ•°ï¼Œæˆ‘ä»¬åªèƒ½æŠŠpackage nameä¿¡æ¯æ”¾åœ¨èµ„æºè·¯å¾„é‡Œé¢ã€‚\n\n### ä»packageåŠ è½½json\n\nçµæ„Ÿæ¥è‡ªhttps://pub.dev/packages/lottieåº“çš„`Lottie.asset(\"assetsPath\",package: \"package_name\")`æ–¹æ³•ï¼Œå› ä¸ºlottieå®ç°åŠ¨ç”»çš„åŸç†ä¹Ÿæ˜¯åŠ è½½ä¸€ä»½jsoné…ç½®ï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ³•æ”¯æŒæŒ‡å®špackageé…ç½®ã€‚\n\n![image-20200917145538741](/images/flutter_tips_s2/flutter_tips_16.png)\n\nè¿™é‡Œçš„keyNameå°±æ˜¯æˆ‘ä»¬rootBundleç±»é‡Œé¢éœ€è¦ç”¨çš„èµ„æºè·¯å¾„ï¼ŒåŒ…å«å¸¦packageçš„æƒ…å†µã€‚\n\næ­£ç¡®çš„æ–¹å¼å¦‚ä¸‹ï¼š\n\n1. ç¬¬ä¸€æ­¥å’Œä¸Šé¢ä¸€æ ·ï¼Œå°†jsonæ–‡ä»¶æ·»åŠ åˆ°å·¥ç¨‹ä¸­ï¼Œå‡å¦‚è¿™é‡Œæˆ‘ä»¬packageé‡Œé¢çš„jsonæ–‡ä»¶åä¸ºtest2.json\n2. åœ¨yamlä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–\n```yaml\n# åªåŠ è½½assetsä¸‹çš„test2.jsonæ–‡ä»¶\nassets:\n - assets/test2.json\n\n# æˆ–è€…\n# åŠ è½½assetsä¸‹çš„æ‰€æœ‰æ–‡ä»¶\nassets:\n - assets/\n```\n3. é€šè¿‡rootBundleåŠ è½½ï¼Œä½†æ˜¯pathçš„æ ¼å¼ä¸º `packages/<#package_name#>/<#file_path#>`\n\nè¿™é‡Œä¸º\n\n```dart\n// json file in package,this is work\nFuture<String> _loadFromPackageAsset() async {\n  // ã€importanceã€‘ packag json file need use this formate:\n  // `packages/$package/$assetName`\n  return rootBundle.loadString(\"packages/json_test_package/assets/test2.json\");\n}\n```\n\né€šè¿‡`DefaultAssetBundle`ä¹Ÿæ˜¯ä¸€æ ·å¯ä»¥\n\n```dart\n// This is work too.\nFuture<String> testLoadJsonFileByDefaultAssetBundle(BuildContext context) {\n  // ã€importanceã€‘ packag json file need use this formate:\n  // `packages/$package/$assetName`\n  return DefaultAssetBundle.of(context)\n      .loadString('packages/json_test_package/assets/test2.json');\n}\n```\n\n> [Demoé“¾æ¥](https://github.com/wangruofeng/flutter_demo_package_json_load)\n\n## flutter analyse\n\n### é…ç½®æ­¥éª¤\n\n  * åœ¨é¡¹ç›®æ›´ç›®å½•æ·»åŠ `analysis_options.yaml`æ–‡ä»¶å¯ä»¥é…ç½®lintè§„åˆ™å’Œanalyzerè¡Œä¸º\n\n  * å…·ä½“æ”¯æŒçš„lintè§„åˆ™å‚è€ƒhttps://dart-lang.github.io/linter/lints/\n\n  * ç›®å‰æœ‰3ç±»å·²ç»å®šä¹‰çš„å¸¸ç”¨è§„åˆ™\n\n      > Many lints are included in various predefined rulesets:\n\n      - [pedantic](https://github.com/dart-lang/pedantic) for rules enforced internally at Google\n      - [effective_dart](https://github.com/tenhobi/effective_dart) for rules corresponding to the [Effective Dart](https://dart.dev/guides/language/effective-dart) style guide\n      - [flutter](https://github.com/flutter/flutter/blob/master/packages/flutter/lib/analysis_options_user.yaml) for rules used in `flutter analyze`\n\n  * æ¨èä½¿ç”¨googleå›¢é˜Ÿå†…éƒ¨çš„è§„åˆ™åº“pedantic\n\n      * åœ¨yamlé‡Œé¢æ·»åŠ ä¾èµ– `pedantic: ^1.8.0+1`\n      \n* åœ¨`analysis_options.yaml`é‡Œé¢å¼•å…¥ä½¿ç”¨\n\n     > `include: package:pedantic/analysis_options.1.8.0.yaml`\n\n### ä½¿ç”¨\n\né…ç½®å¥½`analysis_options.yaml`æ–‡ä»¶çš„è§„åˆ™å,æ‰§è¡Œ`flutter analyse`å‘½ä»¤å°†å¯¹ä½ æ•´ä¸ªé¡¹ç›®æˆ–è€…packageçš„ä»£ç è¿›è¡Œé™æ€åˆ†æ\n\n### ä¿®å¤\n\n- æ ¹æ®æç¤ºä¿®å¤\n\nç‚¹å‡»æç¤ºçš„è§„åˆ™ï¼Œå°±ä¼šè·³è½¬åˆ°éœ€è¦ä¿®å¤ä½ç½®ï¼ŒæŒ‰ç…§lintè§„åˆ™çš„è¯´æ˜å’Œä¾‹å­å°±å¯ä»¥ä¿®æ­£äº†ã€‚![flutter_analyse_1](/images/flutter_tips_s2/flutter_analyse_2.png)\n\n- åˆ©ç”¨VSCodeå¿«é€Ÿä¿®å¤\n\nåœ¨æç¤ºæœ‰é—®é¢˜çš„ä»£ç çš„åœ°æ–¹`Ctrl +.`, å°±ä¼šè‡ªåŠ¨å¼¹å‡ºå¿«é€Ÿä¿®å¤ï¼Œæ¯”å¦‚å›¾ä¸­ä¸ºå¢åŠ `const`æ ‡è¯†ã€‚ æ˜¯ä¸æ˜¯å¿«å¤šäº†ã€‚![flutter_analyse_1](/images/flutter_tips_s2/flutter_analyse_1.png)![å±å¹•å¿«ç…§ 2020-09-17 ä¸Šåˆ2.24.55](/images/flutter_tips_s2/flutter_analyse_2.png)\n\n\n\n\n### å‚è€ƒé…ç½®\n\nå½“ç„¶ä½ è¿˜å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å®šåˆ¶è‡ªå·±çš„é™æ€åˆ†æè§„åˆ™ï¼Œä¸‹é¢æ˜¯æœ€è¿‘ä½¿ç”¨çš„ä¸€å¥—é…ç½®ï¼Œä»…ä¾›ä½ å‚è€ƒï¼š\n\n> [analysis_options.yamlå‚è€ƒé…ç½®](https://gist.github.com/wangruofeng/1451c04c0149fc229a726d819b3135c2)\n\n## dartfmt å‘½ä»¤\n  * `dartfmt ./ -w` é™æ€åˆ†æä»£ç ï¼Œå¹¶å°è¯•è‡ªåŠ¨ä¿®å¤\n  * `dartfmt ./ -n` é™æ€åˆ†æä»£ç ï¼Œä¸ä¼šä¿®å¤ä»£ç \n\n\n\n## DevToolä»‹ç»\n\nflutteræä¾›äº†ä¸€ä¸ªdevToolç³»åˆ—å·¥å…·ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œè°ƒè¯•ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼Œç½‘ç»œè¯·æ±‚ï¼Œæ€§èƒ½ç­‰ä¿¡æ¯ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚è€ƒ[DevTools](https://flutter.dev/docs/development/tools/devtools/overview)\n\n### Install DevTools\n\n * [Install from command line](https://flutter.dev/docs/development/tools/devtools/cli)\n * [Install and run DevTools from Android Studio](https://flutter.dev/docs/development/tools/devtools/android-studio)\n * [Install from VS Code](https://flutter.dev/docs/development/tools/devtools/vscode)\n\n\n\n### Launch the DevTools application server\n\nå¯åŠ¨æœ¬åœ°webæœåŠ¡\n\n```\npub global run devtools   # If you have `pub` on your path.\n```\n\nor\n\n```\nflutter pub global run devtools   # If you have `flutter` on your path.\n```\n\nåœ¨å‘½ä»¤è¡Œï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢è¾“å‡ºï¼Œè¡¨æ˜æœåŠ¡å¯åŠ¨æˆåŠŸ\n\n```\nServing DevTools at http://127.0.0.1:9100\n```\n\n### Start an application to debug\n\nè¿è¡Œapp\n\n```\ncd path/to/flutter/app\nflutter run\n```\n\nä¸€æ—¦ä½ æˆåŠŸè¿è¡Œèµ·æ¥ä½ çš„appï¼Œä½ å°†åœ¨ç»ˆç«¯æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹ç±»ä¼¼çš„ä¿¡æ¯\n\n![image-20200917151951722](/images/flutter_tips_s2/flutter_tips_01.png)\n\nç”¨æµè§ˆå™¨æ‰“å¼€é‡Œé¢çš„åœ°å€ï¼Œæ ¼å¼å¦‚ä¸‹\n\n> http://127.0.0.1:59681/fVO-_3yziG8=/\n\næ‰“å¼€å°†ä¼šçœ‹åˆ°ä¸‹é¢çš„è°ƒè¯•é¢æ¿ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œè°ƒè¯•\n\n![image-20200917152140975](/images/flutter_tips_s2/flutter_tips_02.png)\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œã€debugã€‘\n\næ‰“å¼€é¡µé¢å¯ä»¥æŸ¥çœ‹æ–­ç‚¹çš„å¸§å’Œæ§åˆ¶å°çš„æ—¥å¿—ã€‚\n\n![image-20200917152456458](/images/flutter_tips_s2/flutter_tips_03.png)\n\n### Open DevTools and connect to the target app\n\nä¸€æ—¦å·¥ç¨‹è¿è¡Œèµ·æ¥äº†ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:9100ï¼Œæ‰“å¼€DevToolså®Œæ•´ç‰ˆæœ¬\n\n![image-20200917152646210](/images/flutter_tips_s2/flutter_tips_04.png)\n\nè¾“å…¥ä¸Šé¢çš„åœ°å€ï¼Œç‚¹å‡»Connectï¼Œè·³è½¬åˆ°å®Œæ•´devTools\n\n![image-20200917152806254](/images/flutter_tips_s2/flutter_tips_05.png)\n\nè¿™é‡Œçš„åŠŸèƒ½éå¸¸å¼ºå¤§å’Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£\n\n\n\n## flutter è°ƒè¯•\n\nè¿™é‡Œä»¥VSCodeä¸ºä¾‹\n\n### çº¯flutteré¡¹ç›®\n\nçº¯flutteré¡¹ç›®æ¯”è¾ƒç®€å•ï¼ŒVSCodeæ”¯æŒå„ç§devtoolï¼Œä½¿ç”¨debugæ¨¡å¼è¿è¡Œappï¼Œæˆ–è€…ç›´æ¥æŒ‰F5\n\n![image-20200917150502934](/images/flutter_tips_s2/flutter_tips_06.png)\n\nè¿è¡ŒæˆåŠŸåä¼šå‡ºç°ä¸€ä¸‹å·¥å…·æ¡\n\n![image-20200917150559335](/images/flutter_tips_s2/flutter_tips_07.png)\n\næ§åˆ¶å°è¾“å‡ºä»¥ä¸‹å†…å®¹\n\n![image-20200917150622481](/images/flutter_tips_s2/flutter_tips_08.png)\n\nä¾‹å¦‚è¿™é‡Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶107è¡Œç›´æ¥ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œä»£ç æ‰§è¡Œåˆ°æ—¶ä¼šè§¦å‘æ–­ç‚¹\n\n![image-20200917150821892](/images/flutter_tips_s2/flutter_tips_09.png)\n\næ­¤æ—¶å·¥å…·æ å˜æˆä¸‹é¢çš„æ ·å¼\n\n![image-20200917150846708](/images/flutter_tips_s2/flutter_tips_10.png)\n\nå¯ä»¥é€šè¿‡ç›¸å…³çš„æŒ‰é’®è¿›è¡Œæ–­ç‚¹è°ƒè¯•\n\n### æ··åˆé¡¹ç›®(åŸç”Ÿ+flutter)\n\n1. æ‰“å¼€å·²ç»ç¼–è¯‘è¿è¡Œè¿‡çš„åŸç”Ÿç«¯App\n\n2. é€šè¿‡VSCodeæ‰“å¼€å£³å·¥ç¨‹ï¼Œè¿›å…¥å£³å·¥ç¨‹æ ¹ç›®å½•\n\n3. é€‰æ‹©main.dartæ–‡ä»¶\n\n4. æ‰§è¡Œcmd+shift+p,å‘¼å‡ºVSCodeå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥`>attach to flutter onDevice`\n\n   ![image-20200917153401365](/images/flutter_tips_s2/flutter_tips_11.png)\n\n   é€‰æ‹©ä¸‹é¢çš„å¯¹åº”çš„å‘½ä»¤æ‰§è¡Œ\n\n   > å¦‚æœattachä¸ä¸Šè¯·æ–­å¼€wifié‡è¯•\n\n5. Attach æˆåŠŸçš„è¯ä¼šæ˜¾ç¤ºä¸‹é¢ä¸€æ¡æ‚¬æµ®å·¥å…·æ å’Œçº¯flutterç›¸æ¯”é‡Œé¢å¤šäº†ä¸€ä¸ªç±»ä¼¼æ’å¤´çš„æŒ‰é’®\n\n   ![image-20200917153656732](/images/flutter_tips_s2/flutter_tips_12.png)\n\n   Debug Consoleæ§åˆ¶å°ä¹Ÿä¼šè¾“å‡ºä¸‹é¢ä¿¡æ¯\n\n   ![image-20200917153719698](/images/flutter_tips_s2/flutter_tips_13.png)\n\n5. å‰©ä¸‹çš„è°ƒè¯•å’Œä¸Šé¢DevToolä»‹ç»çš„æµç¨‹ä¸€è‡´\n\n6. åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢å¯ä»¥ç›´æ¥å¯¹å¼•ç”¨åˆ°çš„ä»£ç è¿›è¡Œæ–­ç‚¹è°ƒè¯•\n\n   ![image-20200917154306797](/images/flutter_tips_s2/flutter_tips_14.png)\n\n\n\n## å‚è€ƒ\n\n* [analyzer](https://pub.dev/packages/analyzer)\n\n* [dartfmt](https://dart.dev/tools/dartfmt)\n\n* [Flutter Analysis Options](https://juejin.im/post/6844904176162439182#heading-11)\n\n* [Customizing static analysis](https://dart.dev/guides/language/analysis-options)\n\n* [How to access assets in package](https://stackoverflow.com/questions/63914819/how-to-access-assets-in-package)\n\n*  [DevTools](https://flutter.dev/docs/development/tools/devtools/overview)","tags":["æ•ˆç‡"],"categories":["dart"]},{"title":"Flutter å¼€å‘Tips ï¼ˆç¬¬ä¸€æœŸï¼‰","url":"/2020/09/07/Flutter-å¼€å‘Tips-ï¼ˆç¬¬ä¸€æœŸï¼‰/","content":"\n\n\n![](/images/cover_img/markus-spiske-qjnAnF0jIGk-unsplash.jpg)\n\n<!-- more -->\n\n## ...\n\nå»¶å±•æ“ä½œç¬¦(`...`)å¯ä»¥å¯¹æ•°ç»„æˆ–è€…å­—å…¸è¿›è¡Œæ“ä½œ\n\n```dart\n// åˆå¹¶æ•°ç»„\ntest1() {\n  var list = [1, 2, 3];\n  var list2 = [0, ...list, 4];\n  print(list2);\n  // [0, 1, 2, 3, 4]\n}\n\n// åˆå¹¶å­—å…¸\ntest2() {\n  var map1 = {\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n  };\n  var map2 = {\n    \"key3\": \"value3\",\n    \"key4\": \"value4\",\n  };\n  var map3 = {...map1, ...map2};\n  print(map3);\n  // {key1: value1, key2: value2, key3: value3, key4: value4}\n}\n```\n\n\n\n## for ()...[]\n\nåˆå¹¶widgetsåˆ°é›†åˆä¸­ï¼Œä½¿ç”¨`for ()...[]`èŒƒå¼ï¼Œä½¿ç”¨å»¶å±•æ“ä½œç¬¦(`...`)æ¥åˆå¹¶ä¸€ä¸ªæ•°ç»„çš„widgetsåˆ°ä¸€ä¸ªå­˜åœ¨çš„é›†åˆä¸­ã€‚ä¾‹å¦‚åœ¨æ„é€ Rowæˆ–è€…Columnçš„childrenæ—¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š\n\n```dart\nList<Food> foods = [\n  Food(name: 'apple', isVegetarian: true),\n  Food(name: 'nuts', isVegetarian: true),\n  Food(name: 'eggs', isVegetarian: true),\n  Food(name: 'chicken', isVegetarian: false),\n];\n\nclass Food {\n  Food({\n    this.name,\n    this.isVegetarian,\n  });\n\n  String name;\n  bool isVegetarian;\n}\n\nclass HomePage extends StatelessWidget {\n  const HomePage({Key key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      child: Column(\n        children: [\n          Container(),\n          for (final food in foods) ...[\n            if (food.isVegetarian) ListTile(title: Text(food.name)),\n            SizedBox(height: 50.0),\n          ],\n        ],\n      ),\n    );\n  }\n```\n\n## () {} ()\n\nç«‹å³æ‰§è¡Œä¸€ä¸ªåŒ¿åå‡½æ•°ï¼š`() {} ()`,ç›¸å½“äºå£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°å¹¶ä¸”é‡Œé¢æ‰§è¡Œï¼Œè¿™ç§èŒƒå¼åœ¨å¤„ç†ä¸€ä¸ªwidgetå¯èƒ½æœ‰å¤šç§è¾“å‡ºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚è€Œä¸æ˜¯ä½¿ç”¨é•¶åµŒçš„ä¸‰ç›®è¿ç®—ç¬¦æˆ–è€…é€šè¿‡ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œè¿™ä¸ªä»£ç è·Ÿå†…è”ã€‚ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼š\n\n```dart\nT getRandomElement<T>(List<T> list) => list[Random().nextInt(list.length)];\n\nColumn(\n          children: [\n            Container(\n              color: () {\n                switch (getRandomElement(foods).name) {\n                  case 'apple':\n                    return Colors.green;\n                  case 'nuts':\n                    return Colors.brown;\n                  case 'eggs':\n                    return Colors.yellow;\n                  default:\n                    return Colors.transparent;\n                }\n              }(),\n              child: Text('Food of the Day'),\n            ),\n          ],\n        )\n```\n\n\n\n## ä»£ç é™æ€åˆ†æ\n\nåœ¨æäº¤ä»£ç æ—¶ä¸ºäº†æé«˜ä»£ç è´¨é‡ï¼Œä¿æŒå›¢é˜Ÿçš„ä»£ç é£æ ¼ä¸€è‡´ï¼Œéœ€è¦è¿›è¡Œä»£ç é™æ€åˆ†æï¼Œä¸€èˆ¬é€šè¿‡ä¸‹é¢2ç§æ–¹æ³•æ¥è¿›è¡Œ\n\n### flutter analyze\n\nä½¿ç”¨`flutter analyze`è¿›è¡Œä»£ç é™æ€åˆ†æ,æ­¤å‘½ä»¤ä¼šæ ¹æ®`analysis_options.yaml`å®šä¹‰çš„è§„åˆ™è¿›è¡Œé™æ€åˆ†æ\n\n### dartfmt\n\nä½¿ç”¨`dartfmt ./ -w`å¯¹å½“å‰ç›®å½•ä»¥åŠå­ç›®å½•çš„dartä»£ç è¿›è¡Œä»£ç ,`-w`é€‰é¡¹ä¼šè‡ªåŠ¨é‡å†™æ–‡ä»¶ä½¿å…¶ç¬¦åˆè§„èŒƒã€‚\n\nä½¿ç”¨`dartfmt ./ -n`æ˜¾ç¤ºå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•çš„dartä»£ç æ ¼å¼å¯ä»¥ä¿®æ”¹çš„æ–‡ä»¶ä½†æ˜¯ä¸åšä¿®æ”¹ï¼Œå¯ä»¥é…åˆciåˆ†æä»£ç æ ¼å¼é—®é¢˜ã€‚\n\næ›´å¤šé€‰é¡¹è¯·ä½¿ç”¨`dartfmt --help`æŸ¥çœ‹\n\n## Push & present & Pop\n\n```dart\n// Push by route\nNavigator.pushNamed(context, '/b')\n  \n// push \nNavigator.of(context).push(MaterialPageRoute(builder: (BuildContext context) => MyPage()));\n\n// present\nNavigator.of(context).push(MaterialPageRoute(builder: (BuildContext context) => MyPage(),fullscreenDialog: true));\n\n// pop\nNavigator.pop(context)\n  \n// pop + push\nNavigator.of(context)\n\t..pop()\n\t..pop()\n\t..pushNamed('/settings');\n```\n\nAPI\n\n```dart\n// push\nFuture push(BuildContext context, Route route)\n\n// pop\nbool pop(BuildContext context, [ result ])\n  \n// ä¸‹é¢ä¸¤ç§æ˜¯ç­‰æ•ˆçš„\nNavigator.push(BuildContext context, Route route)\nNavigator.of(context).push(Route route)\n```\n\n## è·å–widgetçš„ä½ç½®å’Œå®½é«˜\n\n```dart\nfinal RenderBox box = keyContext.findRenderObject();\nfinal size = box.size;\nfinal topLeftPosition = box.localToGlobal(Offset.zero);\n```\n\nSee more\n* [How to get a height of a Widget?](https://stackoverflow.com/questions/49307677/how-to-get-a-height-of-a-widget)\n\n* [Flutter : Widget Size and Position](https://medium.com/@diegoveloper/flutter-widget-size-and-position-b0a9ffed9407)\n\n## Model To JSON\n\n### json_serializable\n\n1. å¼•å…¥\n\n    ```yaml\n    dependencies:\n      # Your other regular dependencies here\n      json_annotation: ^2.0.0\n    \n    dev_dependencies:\n      # Your other dev_dependencies here\n      build_runner: ^1.0.0\n      json_serializable: ^2.0.0\n    ```\n\n2. ä½¿ç”¨\n\n   ```dart\n   import 'package:json_annotation/json_annotation.dart';\n   \n   // user.g.dart å°†åœ¨æˆ‘ä»¬è¿è¡Œç”Ÿæˆå‘½ä»¤åè‡ªåŠ¨ç”Ÿæˆ\n   part 'user.g.dart';\n   \n   ///è¿™ä¸ªæ ‡æ³¨æ˜¯å‘Šè¯‰ç”Ÿæˆå™¨ï¼Œè¿™ä¸ªç±»æ˜¯éœ€è¦ç”ŸæˆModelç±»çš„\n   @JsonSerializable()\n   \n   class User{\n     User(this.name, this.email);\n   \n     String name;\n     String email;\n     //ä¸åŒçš„ç±»ä½¿ç”¨ä¸åŒçš„mixinå³å¯\n     factory User.fromJson(Map<String, dynamic> json) => _$UserFromJson(json);\n     Map<String, dynamic> toJson() => _$UserToJson(this);\n   }\n   ```\n\n   \n\n3. å•æ¬¡è§£æï¼š`flutter packages pub run build_runner build`\n\n4. æŒç»­é›†æˆï¼š`flutter packages pub run build_runner watch`\n\n5. [json_serializable åœ¨çº¿jsonè½¬dart modelå·¥å…·](https://caijinglong.github.io/json2dart/index_ch.html)\n\n### Built value\n\n1. åœ¨çº¿jsonè½¬build value æ¨¡æ¿å·¥å…· https://charafau.github.io/json2builtvalue/\n\n2. [VSCode built value æ’ä»¶ ](https://marketplace.visualstudio.com/items?itemName=GiancarloCode.built-value-snippets) \n\n3. Sample code\n\n   ```dart\n   // interface model\n   import 'package:built_value/built_value.dart';\n   \n   part 'user.g.dart';\n   \n   abstract class User implements Built<User, UserBuilder> {\n     String get name;\n     @nullable\n     String get nickname;\n     User._();\n     factory User([updates(UserBuilder b)]) = _$User;\n   }\n   \n   // init\n   var user1 = new User((b) => b\n       ..name = 'John Smith'\n       ..nickname = 'Joe');\n   \n   // update\n   var user2 = user.rebuild((b) => b\n       ..nickname = 'Jojo');\n   \n   // update\n   var updatedStructuredData = structuredData.rebuild((b) => b\n       ..user.update((b) => b\n           ..name = 'Johnathan Smith')\n       ..credentials.phone.update((b) => b\n           ..country = Country.switzerland\n           ..number = '555 01234 555'));\n   \n   \n   // nested builders\n   abstract class Node implements Built<Node, NodeBuilder> {\n     @nullable\n     String get label;\n     @nullable\n     Node get left; \n     @nullable\n     Node get right;\n     Node._();\n     factory Node([updates(NodeBuilder b)]) = _$Node;\n   }\n   \n   // new or update\n   var node = new Node((b) => b\n     ..left.left.left.right.left.right.label = 'Iâ€™m a leaf!'\n     ..left.left.right.right.label = 'Iâ€™m also a leaf!');\n   var updatedNode = node.rebuild((b) => b\n     ..left.left.right.right.label = 'Iâ€™m not a leaf any more!'\n     ..left.left.right.right.right.label = 'Iâ€™m the leaf now!');\n   ```\n   \n## å‚è€ƒ\n\n* [3 cool Dart patterns](https://medium.com/dartlang/3-cool-dart-patterns-6d8d9d3d8fb8)\n\n* [built_collection - pub.dev](https://pub.dev/packages/built_collection)\n\n* [Dartâ€™s built_collection for Immutable Collections](https://medium.com/dartlang/darts-built-collection-for-immutable-collections-db662f705eff)\n\n* [dartfmt](https://dart.dev/tools/dartfmt)\n\n* [Customizing static analysis](https://dart.dev/guides/language/analysis-options)","tags":["æ•ˆç‡"],"categories":["dart"]},{"title":"å¼€å‘Flutteræœ‰å“ªäº›å¥½ç”¨çš„VSCodeæ’ä»¶","url":"/2020/07/31/å¼€å‘Flutteræœ‰å“ªäº›å¥½ç”¨çš„VSCodeæ’ä»¶/","content":"\n![](/images/cover_img/pexels-nastyasensei-335393.jpg)\n\n<!-- more -->\n\n\n\n## ç®€ä»‹\n\nè¿™é‡Œæ•´ç†äº†æ—¥å¸¸ä½¿ç”¨vscodeå¼€å‘flutterç›¸å…³çš„æ’ä»¶ï¼Œä¹Ÿæœ‰éƒ¨åˆ†é€šç”¨ç±»å‹çš„æ’ä»¶\n\n## [Flutter](https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter) & [Dart](https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code)  \n\nè¿™2ä¸ªæ˜¯flutterå®˜æ–¹æ’ä»¶ï¼Œå¼€å‘flutterè£…æœºå¿…å¤‡ï¼Œä¸ç”¨å¤šè¯´ã€‚\n\n## [Awesome Flutter Snippets](https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets)\n\n> Awesome Flutter Snippets is a collection snippets and shortcuts for commonly used Flutter functions and classes\n\nè¿™é‡Œé¢åŒ…å«Flutterä¸­éå¸¸å¸¸ç”¨çš„ä»£ç ç‰‡æ®µ\n\n## [Bracket Pair Colorizer 2](https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2) \n\n> A customizable extension for colorizing matching brackets\n\nè¿™ä¸ªæ’ä»¶å¯ä»¥ä½¿æˆå¯¹çš„æ‹¬å·å¸¦ä¸Šä¸åŒé¢œè‰²ï¼Œç‰¹åˆ«é€‚åˆdartè¿™ç§åµŒå¥—å±‚çº§å¾ˆæ·±å£°æ˜å¼è¯­è¨€ï¼Œ è¿™ä¸ªæ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„åŒºåˆ†æ‹¬å·çš„å¼€å§‹å’Œæˆªæ­¢ä½ç½®\n\n![Bracket _Pair_Colorizer_2](/images/flutter_plugin/Bracket _Pair_Colorizer_2.jpg)\n\n## [GitLens](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens) \n\n> Supercharge the Git capabilities built into Visual Studio Code â€” Visualize code authorship at a glance via Git blame annotations and code lens, seamlessly navigate and explore Git repositories, gain valuable insights via powerful comparison commands, and so much more\n\næœ€å¥½ç”¨çš„featureæ˜¯åœ¨è¯¥[**è¡Œ**](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens#current-line-blame-)æœ«å°¾çš„å¼•äººæ³¨ç›®çš„[**å½“å‰è¡Œè´£ä»»**](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens#current-line-blame-)æ³¨é‡Šï¼Œå¯é€šè¿‡[**æ‚¬åœ**](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens#hovers-)è·å–è¯¦ç»†çš„è´£ä»»ä¿¡æ¯ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„featureï¼Œè¯·è‡ªè¡Œæ¢ç´¢ã€‚\n\n![GitLens_01](/images/flutter_plugin/GitLens_01.png)\n\ngitç›¸å…³çš„å³é”®èœå•\n\n![GitLens_02](/images/flutter_plugin/GitLens_02.png)\n\n## [Color Highlight](https://marketplace.visualstudio.com/items?itemName=naumovs.color-highlight)\n\n> Highlight web colors in your editor\n\nwebé¢œè‰²é«˜äº®ï¼Œç›´æ¥å°†é¢œè‰²å¯¹åº”çš„cssæ˜¾ç¤ºå‡ºæ¥ï¼Œéå¸¸ç›´è§‚\n\n![color_highlight](/images/flutter_plugin/color_highlight.png)\n\n## [Image Preview](https://marketplace.visualstudio.com/items?itemName=kisstkondoros.vscode-gutter-preview)\n\n> Shows image preview in the gutter and on hover\n\nå•é¼ æ ‡æ‚¬æµ®åœ¨å¸¦æœ‰å›¾ç‰‡çš„è¶…é“¾æ¥ä¸Šä¼šæ˜¾ç¤ºé¢„è§ˆå›¾ç‰‡\n\n![image_preview](/images/flutter_plugin/image_preview.png)\n\n\n\n## [pubspec assist](https://marketplace.visualstudio.com/items?itemName=jeroen-meijer.pubspec-assist)\n\n> Easily add and update dependencies to your Dart and Flutter project.\n\nä¸‹é¢æ˜¯å®˜æ–¹çš„æ¼”ç¤ºæ•ˆæœï¼Œå¯ä»¥ç›´æ¥å‘½ä»¤æœç´¢flutterç›¸å…³åº“\n\n![img](https://i.imgur.com/W2cGuPL.gif)\n\n## [Material Icon Theme](https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme)\n\n> Material Design Icons for Visual Studio Code\n\né’ˆå¯¹ä¸åŒçš„æ–‡ä»¶iconå’Œæ–‡ä»¶å¤¹iconè®¾è®¡äº†ä¸€å¥—ä¸»é¢˜å›¾æ ‡\n\n![file_icons](/images/flutter_plugin/file_icons.png)\n\n![folder_icons](/images/flutter_plugin/folder_icons.png)\n\n## [Error lens](https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens)\n\n> Improve highlighting of errors, warnings and other language diagnostics.\n\nå¢å¼ºäº†è¯­è¨€ä¸­çš„é”™è¯¯é«˜äº®æ•ˆæœï¼Œä½¿é”™è¯¯æç¤ºåœ¨ä»£ç åé¢æ˜¾ç¤º\n\n![error_lens](/images/flutter_plugin/error_lens.png)\n\n## [flutter-stylizer](https://marketplace.visualstudio.com/items?itemName=gmlewis-vscode.flutter-stylizer) \n\n> Flutter Stylizer organizes your Flutter classes in an opinionated and consistent manner.\n\nä½¿flutterä¸­çš„ä»£ç æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ’åºï¼Œæ–¹ä¾¿ç»Ÿä¸€çº¦æŸå›¢é˜Ÿä»£ç çš„ç»“æ„\n\n```json\n  \"flutterStylizer.memberOrdering\": [\n      \"public-constructor\",\n      \"named-constructors\",\n      \"public-static-variables\",\n      \"public-instance-variables\",\n      \"private-static-variables\",\n      \"private-instance-variables\",\n      \"public-override-methods\",\n      \"public-other-methods\",\n      \"build-method\",\n  ],\n```\n\nå½“ç„¶è¿™åªæ˜¯é»˜è®¤é¡ºåºï¼Œå…·ä½“çš„é¡ºåºå¯ä»¥è‡ªè¡Œè°ƒæ•´,æ’ä»¶å®‰è£…å®Œæˆåï¼Œé€šè¿‡å¿«æ·é”®æ ¼å¼åŒ–å½“å‰çš„æ–‡ä»¶\n\n## [RESTClient](https://marketplace.visualstudio.com/items?itemName=humao.rest-client)\n\n> REST Client for Visual Studio Code\n\nåœ¨VSCodeé‡Œé¢ç›´æ¥å‘é€è¯·æ±‚ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«`.http`å’Œ`.rest`åç¼€çš„æ–‡ä»¶\n\nç‚¹å‡»`Send Request`å¼€å§‹å‘é€è¯·æ±‚ã€‚\n\n![RESTClient_02](/images/flutter_plugin/RESTClient_02.png)\n\n![RESTClient_01](/images/flutter_plugin/RESTClient_01.png)","tags":["æ•ˆç‡"],"categories":["dart"]},{"title":"Flutterä¸­Keyçš„ä½œç”¨","url":"/2020/07/26/Flutterä¸­Keyçš„ä½œç”¨/","content":"\n![](/images/cover_img/img_2-people-sitting-with-view-of-yellow-flowers-during-daytime.jpg)\n\n<!-- more -->\n\n## keyçš„å®šä¹‰\n\nKey Classå®˜æ–¹ä»‹ç»ï¼š\n\n>  A [Key] is an identifier for [Widget]s, [Element]s and [SemanticsNode]s.\n>\n> \n>\n>  A new widget will only be used to update an existing element if its key is\n>\n>  the same as the key of the current widget associated with the element.\n>\n> \n>\n>  {@youtube 560 315 https://www.youtube.com/watch?v=kn0EOS-ZiIc}\n>\n> \n>\n>  Keys must be unique amongst the [Element]s with the same parent.\n>\n> \n>\n>  Subclasses of [Key] should either subclass [LocalKey] or [GlobalKey].\n\nç¿»è¯‘è¿‡æ¥ï¼š\n\n> ä¸€ä¸ªKeyæ˜¯Widgetï¼ŒElementä»¥åŠSemanticsNodeçš„æ ‡è¯†ã€‚\n>\n> \n>\n> ä¸€ä¸ªæ–°widgetå°†ä»…ç”¨æ¥æ›´æ–°ä¸€ä¸ªå·²å­˜åœ¨çš„elementå‡å¦‚å®ƒçš„keyå’Œå½“å‰widgetå…³è”çš„å…ƒç´ ä¸€è‡´ã€‚\n>\n> \n>\n> å®˜æ–¹ä»‹ç»è§†é¢‘ https://www.youtube.com/watch?v=kn0EOS-ZiIc\n>\n> \n>\n> åœ¨æœ‰ç€ç›¸åŒçˆ¶èŠ‚ç‚¹çš„elementä¸­ï¼ŒKeyå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚\n>\n> \n>\n> Keyçš„å­ç±»è¦ä¹ˆæ˜¯LocalKeyï¼Œè¦ä¹ˆæ˜¯GlobalKeyã€‚\n\n\n\nKey å®˜æ–¹ä»‹ç»ï¼š\n\n> Controls how one widget replaces another widget in the tree.\n>\n> If the [runtimeType](https://api.flutter.dev/flutter/widgets/Widget/dart-core/Object/runtimeType.html) and [key](https://api.flutter.dev/flutter/widgets/Widget/widgets/Widget/key.html) properties of the two widgets are [operator==](https://api.flutter.dev/flutter/widgets/Widget/widgets/Widget/operator_equals.html), respectively, then the new widget replaces the old widget by updating the underlying element (i.e., by calling [Element.update](https://api.flutter.dev/flutter/widgets/Widget/widgets/Element/update.html)with the new widget). Otherwise, the old element is removed from the tree, the new widget is inflated into an element, and the new element is inserted into the tree.\n>\n> In addition, using a [GlobalKey](https://api.flutter.dev/flutter/widgets/Widget/widgets/GlobalKey-class.html) as the widget's [key](https://api.flutter.dev/flutter/widgets/Widget/widgets/Widget/key.html) allows the element to be moved around the tree (changing parent) without losing state. When a new widget is found (its key and type do not match a previous widget in the same location), but there was a widget with that same global key elsewhere in the tree in the previous frame, then that widget's element is moved to the new location.\n>\n> Generally, a widget that is the only child of another widget does not need an explicit key.\n\nç¿»è¯‘è¿‡æ¥ï¼š\n\n> æ§åˆ¶ä¸€ä¸ªå°éƒ¨ä»¶å¦‚ä½•æ›¿æ¢æ ‘ä¸­çš„å¦ä¸€ä¸ªå°éƒ¨ä»¶ã€‚\n>\n> å¦‚æœä¸¤ä¸ªwidgetçš„[runtimeType](https://api.flutter.dev/flutter/dart-core/Object/runtimeType.html)å’Œ[key](https://api.flutter.dev/flutter/widgets/Widget/key.html)å±æ€§åˆ†åˆ«æ˜¯ç›¸ç­‰çš„([==](https://api.flutter.dev/flutter/widgets/Widget/operator_equals.html))ï¼Œåˆ™æ–°widgeté€šè¿‡æ›´æ–°åŸºç¡€elementï¼ˆå³ï¼Œé€šè¿‡ä½¿ç”¨æ–°çš„widgetè°ƒç”¨[Element.update](https://api.flutter.dev/flutter/widgets/Element/update.html)ï¼‰æ¥æ›¿æ¢æ—§widgetã€‚å¦åˆ™ï¼Œå°†ä»æ ‘ä¸­åˆ é™¤æ—§elementï¼Œå°†æ–°widgetæ”¾å¤§ä¸ºä¸€ä¸ªelementï¼Œç„¶åå°†æ–°elementæ’å…¥åˆ°æ ‘ä¸­ã€‚\n>\n> å¦å¤–ï¼Œä½¿ç”¨[GlobalKey](https://api.flutter.dev/flutter/widgets/GlobalKey-class.html)ä½œä¸ºçª—å£å°éƒ¨ä»¶çš„[key](https://api.flutter.dev/flutter/widgets/Widget/key.html)å…è®¸è¯¥elementåœ¨æ ‘ä¸Šç§»åŠ¨ï¼ˆæ›´æ”¹çˆ¶çº§ï¼‰è€Œä¸ä¼šä¸¢å¤±çŠ¶æ€ã€‚å½“æ‰¾åˆ°æ–°çš„widgetï¼ˆå…¶é”®å’Œç±»å‹ä¸ç›¸åŒä½ç½®çš„å…ˆå‰widgetä¸åŒ¹é…ï¼‰ï¼Œä½†æ˜¯åœ¨å‰ä¸€å¸§çš„æ ‘ä¸­å…¶ä»–ä½ç½®æœ‰ä¸€ä¸ªå…·æœ‰ç›¸åŒå…¨å±€é”®çš„widgetæ—¶ï¼Œè¯¥widgetçš„elementå°†ç§»è‡³æ–°ä½ç½®ã€‚\n>\n> é€šå¸¸ï¼Œä½œä¸ºå¦ä¸€ä¸ªwidgetçš„å”¯ä¸€childçš„widgetä¸éœ€è¦æ˜¾å¼keyã€‚\n\n\n\n## Keyçš„ä½œç”¨\n\nå¤§å¤šæ•°æ—¶å€™å¹¶ä¸éœ€è¦ä½¿ç”¨keyã€‚\n\nå½“éœ€è¦åœ¨ä¸€ä¸ª**StatefulWidget**é›†åˆä¸­è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€é‡æ’åºç­‰æ“ä½œæ—¶ï¼Œæ‰æ˜¯keyç™»åœºçš„æ—¶å€™ã€‚\n\n### æ— çŠ¶æ€ç»„ä»¶\n\nä¸‹é¢è¿™æ®µä»£ç åœ¨ä¸€ä¸ªRowä¸­å±•ç¤ºäº†ä¸¤ä¸ªå½©è‰²æ–¹ç‰‡ï¼ˆStatelessContainerï¼‰ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šäº¤æ¢ä¸¤ä¸ªæ–¹ç‰‡çš„ä½ç½®ï¼š\n\n![img_key_screen](/images/flutter_key/img_key_screen.png)\n\nä»£ç å¦‚ä¸‹\n\n```dart\nimport 'dart:math';\nimport 'package:flutter/material.dart';\n\nclass StatelessContainer extends StatelessWidget {\n  final Color color = Color.fromRGBO(\n      Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      width: 100,\n      height: 100,\n      color: color,\n    );\n  }\n}\n\nclass Screen extends StatefulWidget {\n  @override\n  _ScreenState createState() => _ScreenState();\n}\n\nclass _ScreenState extends State<Screen> {\n  List<Widget> widgets = [\n    StatelessContainer(),\n    StatelessContainer(),\n  ];\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Row(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: widgets,\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: switchWidget,\n        child: Icon(Icons.undo),\n      ),\n    );\n  }\n\n  switchWidget() {\n    widgets.insert(0, widgets.removeAt(1));\n    setState(() {});\n  }\n}\n```\n\n### æœ‰çŠ¶æ€ç»„ä»¶\n\næœ‰çŠ¶æ€ç»„ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼ˆå¦‚é¢œè‰²ï¼‰é€šå¸¸æ˜¯å­˜å‚¨åœ¨stateä¸­çš„ï¼Œè€Œstateæ˜¯å­˜å‚¨åœ¨elementæ ‘ä¸­çš„ã€‚\n\né‚£ä¹ˆKeyåˆ°åº•åº”è¯¥ç”¨åˆ°å“ªå‘¢ï¼Ÿ\næˆ‘ä»¬å†æ¥ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æŠŠè‰²å—ç”¨PaddingåŒ…è£…ä¸€ä¸‹ã€‚è¿è¡Œä¹‹åä¼šå‘ç°ï¼Œè‰²å—å¹¶æ²¡æœ‰äº¤æ¢ï¼Œè€Œæ˜¯ä»¥éšæœºçš„å½¢å¼åœ¨å˜æ¢é¢œè‰²ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\n```dart\nimport 'dart:math';\nimport 'package:flutter/material.dart';\n\nclass Screen extends StatefulWidget {\n  Screen({Key key}) : super(key: key);\n\n  @override\n  _ScreenState createState() => _ScreenState();\n}\n\nclass _ScreenState extends State<Screen> {\n  List<Widget> widgets = [\n    Padding(\n      padding: const EdgeInsets.all(8.0),\n      child: StatefulContainer(key: UniqueKey()),\n    ),\n    Padding(\n      padding: const EdgeInsets.all(8.0),\n      child: StatefulContainer(key: UniqueKey()),\n    ),\n  ];\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Row(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: widgets,\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: switchWidget,\n        child: Icon(Icons.undo),\n      ),\n    );\n  }\n\n  switchWidget() {\n    widgets.insert(0, widgets.removeAt(1));\n    setState(() {});\n    print('${widgets[0]}, ${widgets[1]}');\n  }\n}\n\nclass StatefulContainer extends StatefulWidget {\n  StatefulContainer({Key key}) : super(key: key);\n\n  @override\n  _StatefulContainerState createState() => _StatefulContainerState();\n}\n\nclass _StatefulContainerState extends State<StatefulContainer> {\n  final Color color = Color.fromRGBO(\n      Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      color: color,\n      width: 100,\n      height: 100,\n    );\n  }\n}\n```\n\nç»“åˆæˆ‘ä»¬ä¸Šé¢çš„ç†è®ºï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™æ¬¡çš„Widget Tree å’Œ Element Treeï¼Œå½“æˆ‘ä»¬äº¤æ¢å…ƒç´ åï¼ŒFlutter element-to-widget matching algorithm,(å…ƒç´ -ç»„ä»¶åŒ¹é…ç®—æ³•)ï¼Œå¼€å§‹è¿›è¡Œå¯¹æ¯”ï¼Œç®—æ³•æ¯æ¬¡åªå¯¹æ¯”ä¸€å±‚ï¼Œå³Paddingè¿™ä¸€å±‚ã€‚æ˜¾ç„¶ï¼ŒPaddingå¹¶æ²¡æœ‰å‘ç”Ÿæœ¬è´¨çš„å˜åŒ–ã€‚\n\n\n\näºæ˜¯å¼€å§‹è¿›è¡Œç¬¬äºŒå±‚å¯¹æ¯”ï¼Œåœ¨å¯¹æ¯”æ—¶Flutterå‘ç°å…ƒç´ ä¸ç»„ä»¶çš„Keyå¹¶ä¸åŒ¹é…ï¼Œäºæ˜¯ï¼ŒæŠŠå®ƒè®¾ç½®æˆä¸å¯ç”¨çŠ¶æ€ï¼Œä½†æ˜¯è¿™é‡Œæ‰€ä½¿ç”¨çš„Keyåªæ˜¯æœ¬åœ°Keyï¼ˆLocal Keyï¼‰ï¼ŒFlutterå¹¶ä¸èƒ½æ‰¾åˆ°å¦ä¸€å±‚é‡Œé¢çš„Keyï¼ˆå³å¦å¤–ä¸€ä¸ªPadding Widgetä¸­çš„Keyï¼‰æ‰€ä»¥ï¼ŒFlutterå°±åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Widgetï¼Œè€Œè¿™ä¸ªWidgetçš„é¢œè‰²å°±æˆäº†æˆ‘ä»¬çœ‹åˆ°çš„ã€éšæœºè‰²ã€ã€‚\n\n\n\né€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬èƒ½æ˜æ˜¾çš„çœ‹å‡ºï¼Œæˆ‘ä»¬çš„Keyè¦è®¾ç½®åˆ°ç»„ä»¶æ ‘çš„ **é¡¶å±‚**ï¼Œè€Œè¿™ä¸€å±‚åœ¨æ”¹å˜æ—¶ï¼Œæ‰èƒ½å¤ç”¨æˆ–è€…æ›´æ–°çŠ¶æ€ã€‚\n\nä¿®æ­£ç‰ˆæœ¬ï¼š\n\n```dart\nimport 'dart:math';\n\nimport 'package:flutter/material.dart';\n\nclass Screen extends StatefulWidget {\n  Screen({Key key}) : super(key: key);\n\n  @override\n  _ScreenState createState() => _ScreenState();\n}\n\nclass _ScreenState extends State<Screen> {\n  List<Widget> widgets = [\n    Padding(\n      key: UniqueKey(),\n      padding: const EdgeInsets.all(8.0),\n      child: StatefulContainer(),\n    ),\n    Padding(\n      key: UniqueKey(),\n      padding: const EdgeInsets.all(8.0),\n      child: StatefulContainer(),\n    ),\n  ];\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Row(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: widgets,\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: switchWidget,\n        child: Icon(Icons.undo),\n      ),\n    );\n  }\n\n  switchWidget() {\n    widgets.insert(0, widgets.removeAt(1));\n    setState(() {});\n    print('${widgets[0]}, ${widgets[1]}');\n  }\n}\n\nclass StatelessContainer extends StatelessWidget {\n  final Color color = Color.fromRGBO(\n      Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      color: color,\n      width: 100,\n      height: 100,\n    );\n  }\n}\n\nclass StatefulContainer extends StatefulWidget {\n  StatefulContainer({Key key}) : super(key: key);\n\n  @override\n  _StatefulContainerState createState() => _StatefulContainerState();\n}\n\nclass _StatefulContainerState extends State<StatefulContainer> {\n  final Color color = Color.fromRGBO(\n      Random().nextInt(256), Random().nextInt(256), Random().nextInt(256), 1);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      color: color,\n      width: 100,\n      height: 100,\n    );\n  }\n}\n```\n\n\n\n## Keyçš„åˆ†ç±»\n\n![img_key](/images/flutter_key/img_key.png)\n\n- ValueKey:ä»¥ä¸€ä¸ªå€¼ä¸ºkeyã€‚\n- ObjectKey:ä»¥ä¸€ä¸ªå¯¹è±¡ä¸ºkeyã€‚\n- UniqueKey:ç”Ÿæˆå”¯ä¸€çš„éšæœºæ•°ä½œä¸ºkeyã€‚\n- PageStorageKey:ä¸“ç”¨äºå­˜å‚¨é¡µé¢æ»šåŠ¨ä½ç½®çš„keyã€‚\n- GlobalKey:è§åæ–‡ã€‚\n\n## ä½•æ—¶ä½¿ç”¨key\n\n### ValueKey\n\nå¦‚æœæ‚¨æœ‰ä¸€ä¸ª Todo List åº”ç”¨ç¨‹åºï¼Œå®ƒå°†ä¼šè®°å½•ä½ éœ€è¦å®Œæˆçš„äº‹æƒ…ã€‚æˆ‘ä»¬å‡è®¾æ¯ä¸ª Todo äº‹æƒ…éƒ½å„ä¸ç›¸åŒï¼Œè€Œä½ æƒ³è¦å¯¹æ¯ä¸ª Todo è¿›è¡Œæ»‘åŠ¨åˆ é™¤æ“ä½œã€‚\n\nè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ ValueKeyï¼\n\n```dart\nreturn TodoItem(\n    key: ValueKey(todo.task),\n    todo: todo,\n    onDismissed: (direction){\n        _removeTodo(context, todo);\n    },\n);\n```\n\n### ObjectKey\n\nå¦‚æœä½ æœ‰ä¸€ä¸ªç”Ÿæ—¥åº”ç”¨ï¼Œå®ƒå¯ä»¥è®°å½•æŸä¸ªäººçš„ç”Ÿæ—¥ï¼Œå¹¶ç”¨åˆ—è¡¨æ˜¾ç¤ºå‡ºæ¥ï¼ŒåŒæ ·çš„è¿˜æ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ»‘åŠ¨åˆ é™¤æ“ä½œã€‚\n\næˆ‘ä»¬çŸ¥é“äººåå¯èƒ½ä¼šé‡å¤ï¼Œè¿™æ—¶å€™ä½ æ— æ³•ä¿è¯ç»™ Key çš„å€¼æ¯æ¬¡éƒ½ä¼šä¸åŒã€‚ä½†æ˜¯ï¼Œå½“äººåå’Œç”Ÿæ—¥ç»„åˆèµ·æ¥çš„ Object å°†å…·æœ‰å”¯ä¸€æ€§ã€‚\n\nè¿™æ—¶å€™ä½ éœ€è¦ä½¿ç”¨ ObjectKeyï¼\n\n### UniqueKey\n\nå¦‚æœç»„åˆçš„ Object éƒ½æ— æ³•æ»¡è¶³å”¯ä¸€æ€§çš„æ—¶å€™ï¼Œä½ æƒ³è¦ç¡®ä¿æ¯ä¸€ä¸ª Key éƒ½å…·æœ‰å”¯ä¸€æ€§ã€‚é‚£ä¹ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ UniqueKeyã€‚å®ƒå°†ä¼šé€šè¿‡è¯¥å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå…·æœ‰å”¯ä¸€æ€§çš„ hash ç ã€‚\n\nä¸è¿‡è¿™æ ·åšï¼Œæ¯æ¬¡ Widget è¢«æ„å»ºæ—¶éƒ½ä¼šå»é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ UniqueKeyï¼Œå¤±å»äº†ä¸€è‡´æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ çš„å°éƒ¨ä»¶è¿˜æ˜¯ä¼šæ”¹å˜ã€‚ï¼ˆè¿˜ä¸å¦‚ä¸ç”¨ğŸ˜‚ï¼‰\n\n### PageStorageKey\n\nå½“ä½ æœ‰ä¸€ä¸ªæ»‘åŠ¨åˆ—è¡¨ï¼Œä½ é€šè¿‡æŸä¸€ä¸ª Item è·³è½¬åˆ°äº†ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œå½“ä½ è¿”å›ä¹‹å‰çš„åˆ—è¡¨é¡µé¢æ—¶ï¼Œä½ å‘ç°æ»‘åŠ¨çš„è·ç¦»å›åˆ°äº†é¡¶éƒ¨ã€‚è¿™æ—¶å€™ï¼Œç»™ Sliver ä¸€ä¸ª PageStorageKeyï¼å®ƒå°†èƒ½å¤Ÿä¿æŒ Sliver çš„æ»šåŠ¨çŠ¶æ€ã€‚\n\n### GlobalKey\n\næ¯ä¸ªglobalkeyéƒ½æ˜¯ä¸€ä¸ªåœ¨æ•´ä¸ªåº”ç”¨å†…å”¯ä¸€çš„keyã€‚\n\nglobalkeyç›¸å¯¹è€Œè¨€æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œå¦‚æœä½ å¹¶ä¸éœ€è¦globalkeyçš„æŸäº›ç‰¹æ€§ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨Keyã€ValueKeyã€ObjectKeyæˆ–UniqueKeyã€‚\n\n#### ç”¨é€”1\n\nå…è®¸widgetåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•ä½ç½®æ›´æ”¹å…¶parentè€Œä¸ä¸¢å¤±å…¶çŠ¶æ€ã€‚åº”ç”¨åœºæ™¯ï¼šåœ¨ä¸¤ä¸ªä¸åŒçš„å±å¹•ä¸Šæ˜¾ç¤ºç›¸åŒçš„widgetï¼Œå¹¶ä¿æŒçŠ¶æ€ç›¸åŒã€‚\n\n#### ç”¨é€”2\n\nGlobalKey èƒ½å¤Ÿè·¨ Widget è®¿é—®çŠ¶æ€ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Switcher å°éƒ¨ä»¶ï¼Œå®ƒå¯ä»¥é€šè¿‡ changeState æ”¹å˜å®ƒçš„çŠ¶æ€ã€‚\n\n```dart\nclass SwitcherScreenState extends State<SwitcherScreen> {\n  bool isActive = false;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Switch.adaptive(\n            value: isActive,\n            onChanged: (bool currentStatus) {\n              isActive = currentStatus;\n              setState(() {});\n            }),\n      ),\n    );\n  }\n\n  changeState() {\n    isActive = !isActive;\n    setState(() {});\n  }\n}\n```\n\nä½†æ˜¯æˆ‘ä»¬æƒ³è¦åœ¨å¤–éƒ¨æ”¹å˜è¯¥çŠ¶æ€ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ GlobalKeyã€‚\n\n```dart\nclass _ScreenState extends State<Screen> {\n  final GlobalKey<SwitcherScreenState> key = GlobalKey<SwitcherScreenState>();\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: SwitcherScreen(\n        key: key,\n      ),\n      floatingActionButton: FloatingActionButton(onPressed: () {\n        key.currentState.changeState();\n      }),\n    );\n  }\n}\n```\n\nè¿™é‡Œæˆ‘ä»¬é€šè¿‡å®šä¹‰äº†ä¸€ä¸ª GlobalKey å¹¶ä¼ é€’ç»™ SwitcherScreenã€‚ç„¶åæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡è¿™ä¸ª key æ‹¿åˆ°å®ƒæ‰€ç»‘å®šçš„ SwitcherState å¹¶åœ¨å¤–éƒ¨è°ƒç”¨ changeState æ”¹å˜çŠ¶æ€äº†ã€‚\n\n\n\n## å‚è€ƒèµ„æ–™\n\n* [ä½•æ—¶ä½¿ç”¨å¯†é’¥ - Flutterå°éƒ¨ä»¶ 101 ç¬¬å››é›†](https://www.youtube.com/watch?v=kn0EOS-ZiIc&feature=youtu.be)\n\n* [widgets-intro#keys](https://flutter.dev/docs/development/ui/widgets-intro#keys)\n\n* [Flutter | æ·±å…¥æµ…å‡ºKey](https://juejin.im/post/5ca2152f6fb9a05e1a7a9a26)\n\n* [Flutterä¸­çš„Keyå’ŒGlobalKey](https://blog.csdn.net/al4fun/article/details/95854045)","tags":["æ•ˆç‡","flutter"],"categories":["dart"]},{"title":"Flutter factory ä½¿ç”¨æ€»ç»“","url":"/2020/07/26/Flutter-factory-ä½¿ç”¨æ€»ç»“/","content":"\n![](/images/cover_img/img_photography-of-airplane-during-sunrise.jpg)\n\n<!-- more -->\n\n## 0x01å®˜æ–¹æè¿°\n\n> Use the `factory` keyword when implementing a constructor that doesnâ€™t always create a new instance of its class. For example, a factory constructor might return an instance from a cache, or it might return an instance of a subtype.\n>\n> å½“å®ç°å¹¶éæ€»æ˜¯åˆ›å»ºå…¶ç±»çš„æ–°å®ä¾‹çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¯·ä½¿ç”¨â€œ factoryâ€å…³é”®å­—ã€‚ä¾‹å¦‚ï¼Œå·¥å‚æ„é€ å‡½æ•°å¯èƒ½ä¼šä»ç¼“å­˜è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œæˆ–è€…å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªå­ç±»å‹çš„å®ä¾‹ã€‚\n\n\n\n## 0x02ä½¿ç”¨åœºæ™¯\n\n1. é¿å…åˆ›å»ºè¿‡å¤šçš„é‡å¤å®ä¾‹ï¼Œå¦‚æœè¯¥å®ä¾‹å·²åˆ›å»ºï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜è·å–ã€‚\n\n2. è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°(å·¥å‚æ¨¡å¼ factory patternï¼‰\n\n3. å®ç°å•ä¾‹æ¨¡å¼(singleton pattern)\n\n## 0x03 Demo\n\n### åˆ›å»ºç¼“å­˜å®ä¾‹\n\n> å¼•ç”¨è‡ª https://dart.dev/guides/language/language-tour#factory-constructors\n\n```dart\nclass Logger {\n  final String name;\n  // ç¼“å­˜Map\n  static final Map<String, Logger> _cache = <String, Logger>{};\n\n  factory Logger(String name) {\n    // nameå¯¹åº”çš„keyåœ¨_cacheä¸å­˜åœ¨ï¼Œæ‰§è¡ŒLogger._internal(name)ï¼Œå¦åˆ™ç›´æ¥è¿”å›\n    return _cache.putIfAbsent(name, () => Logger._internal(name));\n  }\n\n  // ç§æœ‰æ„é€ å‡½æ•°\n  Logger._internal(this.name) {\n    print('ç”Ÿæˆæ–°å®ä¾‹:$name');\n  }\n}\n\nvoid main(List<String> args) {\n  var p1 = Logger('1');\n  var p2 = Logger('2');\n  var p3 = Logger('1');\n  print(identical(p1, p2));\n  print(identical(p1, p3));\n  // ç”Ÿæˆæ–°å®ä¾‹:1\n  // ç”Ÿæˆæ–°å®ä¾‹:2\n  // false\n  // true\n}\n```\n\n### è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°\n\n```dart\nabstract class Animal extends Object {\n  String name;\n  void getNoise();\n  factory Animal(String type, String name) {\n    switch (type) {\n      case 'cat':\n        return Cat(name);\n        break;\n      case 'dog':\n        return Dog(name);\n        break;\n      default:\n        throw \"The '$type' is not an animal\";\n    }\n  }\n}\n\nclass Cat implements Animal {\n  String name;\n  Cat(this.name);\n  @override\n  void getNoise() {\n    print('${this.name}:mew~');\n  }\n}\n\nclass Dog implements Animal {\n  String name;\n  Dog(this.name);\n  @override\n  void getNoise() {\n    print('${this.name}:wang~');\n  }\n}\n\nvoid main(List<String> args) {\n  var cat = Animal('cat', 'haha');\n  var dog = Animal('dog', 'hehe');\n  cat.getNoise();\n  dog.getNoise();\n  // haha:mew~\n  // hehe:wang~\n}\n```\n\n### å®ç°å•ä¾‹æ¨¡å¼\n\n```dart\nclass Singleton {\n  static final Singleton _singleton = Singleton._internal();\n\n  factory Singleton() {\n    return _singleton;\n  }\n\n  Singleton._internal();\n}\n\nvoid main(List<String> args) {\n  var s1 = Singleton();\n  var s2 = Singleton();\n  print(identical(s1, s2));\n  // true\n}\n```\n\n","tags":["æ•ˆç‡","flutter"],"categories":["dart"]},{"title":"Flutter ShapeBorder ä½¿ç”¨æ‰‹å†Œ","url":"/2020/07/12/Flutter-ShapeBorder-ä½¿ç”¨æ‰‹å†Œ/","content":"\n\n## ç®€ä»‹\n\nShapeBorder ç”¨äºè®¾ç½®å½¢çŠ¶å’Œè½®å»“ï¼Œæ¯”å¦‚åœ†å½¢ï¼ŒçŸ©å½¢ï¼Œåœ†è§’çŸ©å½¢ç­‰ã€‚å¸¸ç”¨äº Container ä¸­ã€‚\n\n<!-- more -->\n\nç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼š\n\n- ShapeBorderã€abstractã€‘\n  - BeveledRectangleBorder\n  - BoxBorderã€abstractã€‘\n    - Border\n    - BorderDirectional\n  - CircleBorder\n  - ContinuousRectangleBorder\n  - RoundedRectangleBorder\n  - StadiumBorder\n  - InputBorderã€abstractã€‘\n    - OutlineInputBorder\n    - UnderlineInputBorder\n\nå…¶ä¸­ ShapeBorderã€BoxBorderã€InputBorder æ˜¯æŠ½è±¡çˆ¶ç±»ã€‚InputBorder é€šå¸¸ç”¨äºè¾“å…¥æ¡†ç›¸å…³çš„ã€‚\n\n\n\nç±»çš„å…³ç³»å›¾\n\n![ShapeBorderå­ç±»ç»§æ‰¿å…³ç³»å›¾](/images/flutter_shape_border/ShapeBorderå­ç±»ç»§æ‰¿å…³ç³»å›¾.png)\n\n\n\n## BeveledRectangleBorder\n\næ–œé¢åœ†è§’çŸ©å½¢\n\nç»§æ‰¿å…³ç³»:\n\n `BeveledRectangleBorder > ShapeBorder`\n\n```dart\nWidget _beveledRectangleBorder() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: BeveledRectangleBorder(\n          borderRadius: BorderRadius.circular(20),\n          side: BorderSide(\n            width: 2,\n            color: Colors.blue,\n            style: BorderStyle.solid,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![beveled_rectangle_border](/images/flutter_shape_border/beveled_rectangle_border.png)\n\n\n\n\n\n## BoxBorder\n\nBoxBorderä¸»è¦æŒç®¡è¾¹çº¿æ–¹é¢çš„äº‹ï¼Œè‡ªèº«æ˜¯abstractï¼Œä¸èƒ½ç›´æ¥ç”¨\n\nBoxBorderå®˜æ–¹è¯´æ˜\n\n>  Base class for box borders that can paint as rectangles, circles, or rounded rectangles.\n\n### Border\n\nç»§æ‰¿å…³ç³»:\n\n`Border > BoxBorder > ShapeBorder`\n\nBorderå®˜æ–¹è¯´æ˜\n\n> A border of a box, comprised of four sides: top, right, bottom, left.\n\n```dart\nWidget _border() {\n  return Center(\n    child: Container(\n      margin: EdgeInsets.all(16),\n      padding: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        color: Colors.orange,\n        shape: Border(\n          top: BorderSide(width: 6.0, color: Colors.black12),\n          left: BorderSide(width: 6.0, color: Colors.black12),\n          right: BorderSide(width: 6.0, color: Colors.black26),\n          bottom: BorderSide(width: 6.0, color: Colors.black26),\n        ),\n      ),\n      child: Text(\n        \"Border\",\n        style: TextStyle(color: Colors.white, fontSize: 20),\n      ),\n    ),\n  );\n}\n\n```\n\næ•ˆæœå›¾ï¼š\n\n![border](/images/flutter_shape_border/border.png)\n\n### BorderDirectional\n\nç»§æ‰¿å…³ç³»:\n\n `BorderDirectional > BoxBorder > ShapeBorder`\n\n`BorderDirectional` é€šè¿‡ `top`,`bottom`,`start`,`end`åˆ†åˆ«æ§åˆ¶ä¸Šä¸‹å·¦å³çš„è¾¹çº¿\nè¾¹çº¿å¯¹è±¡`BorderSide`\n\n```dart\nWidget _borderDirectional() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: BorderDirectional(\n          start: BorderSide(color: Colors.black, width: 15),\n          end: BorderSide(color: Colors.black, width: 15),\n          top: BorderSide(\n            color: Colors.black,\n          ),\n          bottom: BorderSide(\n            color: Colors.black,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![border_directional_01](/images/flutter_shape_border/border_directional_01.png)\n\nåªè®¾ç½®å·¦å³çš„`BorderSide`\n\n```dart\nWidget _borderDirectional2() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: BorderDirectional(\n          start: BorderSide(color: Colors.black, width: 15),\n          end: BorderSide(color: Colors.black, width: 15),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![border_directional_02](/images/flutter_shape_border/border_directional_02.png)\n\n\n\n\n\n## CircleBorder\n\nåœ†å½¢è¾¹æ¡†ã€‚\n\nç»§æ‰¿å…³ç³»:\n\n `CircleBorder > ShapeBorder`\n\n```dart\nWidget _circleBorder1() {\n  return Center(\n    child: Container(\n      width: 120,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: CircleBorder(\n          side: BorderSide(),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![circle_border_01](/images/flutter_shape_border/circle_border_01.jpg)\n\nä¸Šé¢çš„æ˜¯ä½¿ç”¨é»˜è®¤å‚æ•°çš„æ•ˆæœ\n\n![circle_border_03](/images/flutter_shape_border/circle_border_03.png)\n\né€šè¿‡è®¾ç½®BorderSideæ¥è®¾ç½®è¾¹æ¡†é¢œè‰²å’Œå®½åº¦ï¼Œä»¥åŠæ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†\n\n```dart\nWidget _circleBorder2() {\n  return Center(\n    child: Container(\n      width: 120,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: CircleBorder(\n          side: BorderSide(\n            width: 10,\n            color: Colors.blue,\n            style: BorderStyle.solid,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![circle_border_02](/images/flutter_shape_border/circle_border_02.jpg)\n\n\n\n## ContinuousRectangleBorder\n\nå¹³æ»‘è¿‡æ¸¡çš„çŸ©å½¢è¾¹æ¡†\n\nç»§æ‰¿å…³ç³»:\n\n`ContinuousRectangleBorder > ShapeBorder`\n\n```dart\n\nWidget _continuousRectangleBorder() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: ContinuousRectangleBorder(\n          borderRadius: BorderRadius.circular(40),\n          side: BorderSide(\n            width: 2,\n            color: Colors.blue,\n            style: BorderStyle.solid,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![continuous_rectangle_border](/images/flutter_shape_border/continuous_rectangle_border.png)\n\n\n## RoundedRectangleBorder\n\nåœ†è§’çŸ©å½¢ã€‚\n\nç»§æ‰¿å…³ç³»:\n\n`RoundedRectangleBorder > ShapeBorder`\n\n```dart\nWidget _roundedRectangleBorder() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(20),\n          side: BorderSide(\n            width: 2,\n            color: Colors.blue,\n            style: BorderStyle.solid,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![rounded_rectangle_border_01](/images/flutter_shape_border/rounded_rectangle_border_01.png)\n\n## StadiumBorder\n\nä½“è‚²åœºå½¢çŠ¶ã€‚å³ä¸¤è¾¹æ˜¯åŠåœ†ã€‚\n\nç»§æ‰¿å…³ç³»:\n\n`StadiumBorder > ShapeBorder`\n\n```dart\nWidget _stadiumBorder() {\n  return Center(\n    child: Container(\n      width: 240,\n      height: 120,\n      margin: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        image: DecorationImage(\n          image: AssetImage('lib/assets/img_flutter.png'),\n          fit: BoxFit.cover,\n        ),\n        shape: StadiumBorder(\n          side: BorderSide(\n            width: 2,\n            color: Colors.blue,\n            style: BorderStyle.solid,\n          ),\n        ),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![stadiu_border_01](/images/flutter_shape_border/stadiu_border_01.png)\n\n## InputBorder\n\nç»§æ‰¿å…³ç³»:\n\n `InputBorder > ShapeBorder`\n\nå®˜æ–¹è¯´æ˜ï¼š\n\n> Defines the appearance of an [InputDecorator]'s border.\n>\n> \n>\n> An input decorator's border is specified by [InputDecoration.border].\n>\n> \n>\n> The border is drawn relative to the input decorator's \"container\" which\n>\n> is the optionally filled area above the decorator's helper, error,and counter.\n\nå¸¸ç”¨çš„è¾“å…¥è¾¹æ¡†ï¼Œæœ‰2ä¸ªè¡ç”Ÿå­ç±»`OutlineInputBorder` å’Œ`UnderlineInputBorder`\n\n### OutlineInputBorder\n\nç»§æ‰¿å…³ç³»:\n\n `OutlineInputBorder > InputBorder > ShapeBorder`\n\n```dart\nWidget _outlineInputBorder() {\n  return Center(\n    child: Container(\n      margin: EdgeInsets.all(16),\n      padding: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        color: Colors.orange,\n        shape: OutlineInputBorder(\n          borderSide: BorderSide(width: 2.0, color: Colors.purple),\n          borderRadius: BorderRadius.circular(20.0),\n        ),\n      ),\n      child: Text(\n        \"OutlineInputBorder\",\n        style: TextStyle(color: Colors.white, fontSize: 20),\n      ),\n    ),\n  );\n}\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![outlineInput_borde](/images/flutter_shape_border/outlineInput_borde.png)\n\n\n\n### UnderlineInputBorder\n\nç»§æ‰¿å…³ç³»:\n\n`UnderlineInputBorder > InputBorder > ShapeBorder`\n\n```dart\nWidget _underlineInputBorder() {\n  return Center(\n    child: Container(\n      margin: EdgeInsets.all(16),\n      padding: EdgeInsets.all(16),\n      decoration: ShapeDecoration(\n        color: Colors.orange,\n        shape: UnderlineInputBorder(\n          borderSide: BorderSide(width: 2.0, color: Colors.purple),\n          borderRadius: BorderRadius.circular(20.0),\n        ),\n      ),\n      child: Text(\n        \"UnderlineInputBorder\",\n        style: TextStyle(color: Colors.white, fontSize: 20),\n      ),\n    ),\n  );\n}\n```\n\n\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![underlineInput_border](/images/flutter_shape_border/underlineInput_border.png)","tags":["æ•ˆç‡","flutter"],"categories":["dart"]},{"title":"VSCode Snippets ä½¿ç”¨æ‰‹å†Œ","url":"/2020/06/13/VSCode-Snippets-ä½¿ç”¨æ‰‹å†Œ/","content":"\n# VSCode Snippets ä½¿ç”¨æ‰‹å†Œ\n\n## å‰è¨€\n\nå½“æˆ‘ä»¬ä¸ºäº†å‡å°‘æ¨¡æ¿ä»£ç ï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªå¾ˆå¯èƒ½æƒ³åˆ°ä½¿ç”¨`Code Snippets`,å¾ˆå¤šIDEå’Œæ–‡ä»¶ç¼–è¾‘å™¨å·²ç»ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé¢„è£…çš„ä»£ç ç‰‡æ®µï¼Œå½“é¢„è£…çš„ä»£ç ç‰‡æ®µä¸èƒ½ç’ç€æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè‡ªå·±å®šåˆ¶ä¸€äº›è‡ªå·±çš„ä¸“æœ‰ä»£ç ä»£ç ç‰‡æ®µï¼Œä¸‹é¢å°±ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•åœ¨VSCodeå®šåˆ¶è‡ªå·±çš„ä»£ç ç‰‡æ®µä»¥åŠä¸€äº›å°æŠ€å·§ã€‚\n\n<!-- more -->\n\n## å¦‚ä½•æ·»åŠ  \n\n### æ–¹æ³•ä¸€ï¼šé€šè¿‡æ§åˆ¶å°\n\n1. æ‰“å¼€VSCode,æŒ‰ä¸‹å¿«æ·é”®ç»„åˆ`shift+command+p`å‘¼å‡ºæ§åˆ¶å°\n\n2. åœ¨æ§åˆ¶å°è¾“å…¥ï¼š `Configure User Snippets`é€‰æ‹©![configure_user_snippets](/images/vscode_snippets/configure_user_snippets.jpg)\n\n3. è¾“å…¥`new`ï¼Œæ‰¾åˆ°æ–°å»ºä»£ç ç‰‡æ®µå‘½ä»¤ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©åˆ›å»ºå…¨å±€çš„æˆ–è€…ä¸ºæŸä¸ªé¡¹ç›®ä¸“å±çš„ä»£ç ç‰‡æ®µ,è¿™é‡Œæˆ‘ä»¬é€‰æ‹©`New Global Snippets file...`ã€‚![new_snippets](/images/vscode_snippets/new_snippets.jpg)\n\n4. ç»™ç‰‡æ®µèµ·ä¸€ä¸ªæ˜“äºç†è§£çš„å‘½åï¼Œå›è½¦![new_snippet_with_name](/images/vscode_snippets/new_snippet_with_name.png)\n\n5. ç¼–è¾‘ä»£ç ç‰‡æ®µçš„å†…å®¹![snippets_sample](/images/vscode_snippets/snippets_sample.png)\n\n   ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå·±åå­—çš„TODO, ç±»ä¼¼è¿™æ ·çš„é£æ ¼ï¼š`// TODO(ruofeng): some comment`\n\n   æœ€ç»ˆç‰ˆæœ¬å¦‚ä¸‹ï¼š![todo_snippets](/images/vscode_snippets/todo_snippets.png)\n   \n   æ•ˆæœå›¾\n   \n   ![todo_snippets_auto_tip2](/images/vscode_snippets/todo_snippets_auto_tip2.png)\n\n### æ–¹æ³•äºŒï¼šé€šè¿‡é¦–é€‰é¡¹\n\n1. Code -> Preferences->User Snippets\n\n![preffer_setting_code_snippets](/images/vscode_snippets/preffer_setting_code_snippets.jpg)\n\n2. åé¢çš„æ­¥éª¤å’Œç¬¬ä¸€ç§çš„4ï¼Œ5ä¸€æ ·ï¼Œè¿™é‡Œä¸å†èµ˜è¿°\n\n## ä½¿ç”¨æµ‹è¯•\n\næ–°å»ºä¸€ä¸ª`.dart`ç»“å°¾çš„æ–‡ä»¶,è¿™é‡Œå°±å«`test.dart` ,è¾“å…¥todoï¼Œå‡ºç°äº†æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ä»£ç ç‰‡æ®µ\n\n![todo_snippets_auto_tip](/images/vscode_snippets/todo_snippets_auto_tip.png)\n\né€‰æ‹©todo,å‡ºç°æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ä»£ç ç‰‡æ®µ\n\n![todo_snippets_auto_tip2](/images/vscode_snippets/todo_snippets_auto_tip2.png)\n\n## å¸¸ç”¨è¯­æ³•\n\n1. å˜é‡ï¼Œ æ ¼å¼ `$+num`, ä¾‹å¦‚ï¼š \n\n   `\"console.log('$1');\"`\n\n2. å˜é‡å ä½æè¿°,æ ¼å¼`${num:desc}`,ä¾‹å¦‚ï¼š\n\n   `\"${1:label}, ${2:another};\"`\n\n3. ç¼©è¿›ï¼Œ`\\t`,æ³¨æ„ç¼©è¿›çš„å¯¹ç§°æ€§\n\n   ![demo_snippets](/images/vscode_snippets/demo_snippets.png)\n\n### å˜é‡\n\n>  ä¸ºäº†è·Ÿè¿›ç¯å¢ƒåŠ¨æ€å®šåˆ¶ä¸€äº›ç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œ[å®˜æ–¹ä»‹ç»](https://code.visualstudio.com/docs/editor/userdefinedsnippets#_variables)\n\n![snippets_variables](/images/vscode_snippets/snippets_variables.png)\n\nç¤ºä¾‹ï¼š\n\næˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªXcodeç‰ˆæœ¬çš„OCé»˜è®¤é£æ ¼ä»£ç ç‰‡æ®µ\n\n![snippets_copywright](/images/vscode_snippets/snippets_copywright.png)\n\næ–°å»ºä¸€ä¸ªtest.dartæ–‡ä»¶ï¼Œåœ¨é‡Œé¢è¾“å…¥copywrightï¼Œé€‰æ‹©åˆšæ‰æˆ‘ä»¬çš„æ·»åŠ çš„ä»£ç ç‰‡æ®µï¼Œæ•ˆæœå¦‚ä¸‹\n\n![snippets_copywright_dart](/images/vscode_snippets/snippets_copywright_dart.png)\n\n### å˜é‡è½¬æ¢\n\nè¯­æ³•è¯´æ˜ï¼š\n\n```\nany         ::= tabstop | placeholder | choice | variable | text\ntabstop     ::= '$' int\n                | '${' int '}'\n                | '${' int  transform '}'\nplaceholder ::= '${' int ':' any '}'\nchoice      ::= '${' int '|' text (',' text)* '|}'\nvariable    ::= '$' var | '${' var '}'\n                | '${' var ':' any '}'\n                | '${' var transform '}'\ntransform   ::= '/' regex '/' (format | text)+ '/' options\nformat      ::= '$' int | '${' int '}'\n                | '${' int ':' '/upcase' | '/downcase' | '/capitalize' '}'\n                | '${' int ':+' if '}'\n                | '${' int ':?' if ':' else '}'\n                | '${' int ':-' else '}' | '${' int ':' else '}'\nregex       ::= JavaScript Regular Expression value (ctor-string)\noptions     ::= JavaScript Regular Expression option (ctor-options)\nvar         ::= [_a-zA-Z] [_a-zA-Z0-9]*\nint         ::= [0-9]+\ntext        ::= .*\n```\n\nä¸‹é¢å°†å®ç°è¯»å–æ–‡ä»¶åç§°æˆªå–æ‰æ–‡ä»¶çš„åç¼€æ•ˆæœï¼š `foo.text` ==> `foo`\n\n```\n${TM_FILENAME/(.*)\\\\..+$/$1/}\n  |           |         |  |\n  |           |         |  |-> no options\n  |           |         |\n  |           |         |-> references the contents of the first\n  |           |             capture group\n  |           |\n  |           |-> regex to capture everything before\n  |               the final `.suffix`\n  |\n  |-> resolves to the filename\n```\n\nTransform Exampleï¼š\n\n| Example                               | Output                    | Explanation                        |\n| :------------------------------------ | :------------------------ | :--------------------------------- |\n| `\"${TM_FILENAME/[\\\\.]/_/}\"`           | `example-123_456-TEST.js` | Replace the first `.` with `_`     |\n| `\"${TM_FILENAME/[\\\\.-]/_/g}\"`         | `example_123_456_TEST_js` | Replace each `.` or `-` with `_`   |\n| `\"${TM_FILENAME/(.*)/${1:/upcase}/}\"` | `EXAMPLE-123.456-TEST.JS` | Change to all uppercase            |\n| `\"${TM_FILENAME/[^0-9^a-z]//gi}\"`     | `example123456TESTjs`     | Remove non-alphanumeric characters |\n\n### Build value ä»£ç ç‰‡æ®µæ’ä»¶`bvtf` çš„å®ç°\n\n`bvtf`ï¼Œæ˜¯ä¸Šé¢å˜é‡å’Œå˜é‡è½¬æ¢çš„ç»¼åˆåº”ç”¨ï¼Œå®ç°äº†ä¸‹é¢åŠŸèƒ½\n\n1. è‡ªåŠ¨è¯†åˆ«æ–‡ä»¶åç§°\n2. å°†æ–‡ä»¶åç§°å»æ‰åç¼€ï¼Œè½¬æ¢ä¸ºå¤§å†™é©¼å³°æ³•ï¼ˆpascalcaseï¼‰\n\n\n\næºç è·å–æ­¥éª¤ï¼š\n\n1. å»githubå®˜ç½‘ä¸‹è½½å®ƒçš„æºç ï¼Œ[built-value-snippets](https://github.com/GiancarloCode/built-value-snippets)\n\n2. åœ¨vscode->snippets->snippets.json æ‰¾åˆ°å¯¹åº”çš„æºç ï¼Œå¦‚ä¸‹\n\n   ```json\n   {\n   \"Built Value Type File\": {\n           \"prefix\": \"bvtf\",\n           \"body\": [\n               \"import 'package:built_collection/built_collection.dart';\",\n               \"import 'package:built_value/built_value.dart';\",\n               \"\",\n               \"part '$TM_FILENAME_BASE.g.dart';\",\n               \"\",\n               \"abstract class ${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/} implements Built<${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}, ${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}Builder> {\",\n               \"  ${2}\",\n               \"\",\n               \"  ${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}._();\",\n               \"  factory ${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}([void Function(${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}Builder) updates]) = _$${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/};\",\n               \"}\"\n           ],\n           \"description\": \"Built Value Type File whose name corresponds to the file name\"\n       }\n   }\n   ```\n\n   \n\n   æ ¸å¿ƒçš„å˜é‡å¦‚ä¸‹ï¼š\n\n   ```json\n   // file name: home_page.dart => HomePage\n   \"${TM_FILENAME_BASE/(.*)$/${1:/pascalcase}/}\"\n   ```\n\n   é€šè¿‡ä¸Šé¢çš„å­¦ä¹ æˆ‘ä»¬å‡ ä¹å¯èƒ½ç¼–å†™æˆ‘ä»¬çš„æ—¥å¸¸éœ€è¦å„ç§ä»£ç ç‰‡æ®µ\n\n   \n\n## å¼•ç”¨\n\n* [built-value-snippets](https://github.com/GiancarloCode/built-value-snippets)\n\n* [Built Value Snippets VSCode æ’ä»¶](https://marketplace.visualstudio.com/items?itemName=GiancarloCode.built-value-snippets)\n\n* [Snippets in Visual Studio Code](https://code.visualstudio.com/docs/editor/userdefinedsnippets#_variables)","tags":["æ•ˆç‡"],"categories":["dart"]},{"title":"ç”¨Typoraçš„MarkDownç»˜åˆ¶Diagrams(å›¾è§£)","url":"/2019/11/29/ç”¨Typoraçš„MarkDownç»˜åˆ¶Diagrams-å›¾è§£/","content":"\n\n## ç®€ä»‹\n\næœ€è¿‘åœ¨ç ”ç©¶è½¯ä»¶è®¾è®¡é¢†åŸŸå¸¸ç”¨å„ç§å›¾è§£ï¼Œå‘ç°[Typora](https://typora.io)då¯¹MarkDownæ¸²æŸ“diagramsçš„æ”¯æŒç‰¹åˆ«å¥½ï¼Œäºæ˜¯æ•´ç†äº†ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ä½¿ç”¨ï¼Œç›®å‰(æµ‹è¯•ç‰ˆæœ¬`0.9.9.18.1(1088)`)æ”¯æŒä»¥ä¸‹å‡ å¤§ç±»å›¾è§£:\n\n* Sequence\n* Flowchart \n* Mermaid \n  * sequence  (æ—¶åºå›¾)\n  * flowchart   (æµç¨‹å›¾)\n  * gantt          (ç”˜ç‰¹å›¾)\n\n<!-- more -->\n\n\n>Sequenceç”±[js-sequence](https://bramp.github.io/js-sequence-diagrams/)é©±åŠ¨\n>\n>Flowchartç”±[flowchart.js](http://flowchart.js.org/)é©±åŠ¨\n>\n>Mermaidç”±[mermaid](https://mermaid-js.github.io/mermaid/#/)é©±åŠ¨ï¼Œæ”¯æŒsequenceï¼Œflowchartï¼Œgantt\n\n## Sequence -- æ—¶åºå›¾\n\n### UMLæ—¶åºå›¾(sequence)\n\n```sequence\nå¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰\nNote right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°\nNote left of  å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)\nå¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)\nå¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ\n```\n\n![UML_sequence_01](/images/Diagrams/UML_sequence_01.png)\n\n### UMLæ—¶åºå›¾å¤æ‚(sequence)\n\n```sequence\nTitle: æ ‡é¢˜ï¼šå¤æ‚ä½¿ç”¨\nå¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰\nNote right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°\nNote left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)\nå¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)\nå¯¹è±¡B->å°ä¸‰: ä½ å¥½å—\nå°ä¸‰-->>å¯¹è±¡A: å¯¹è±¡Bæ‰¾æˆ‘äº†\nå¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ\nNote over å°ä¸‰,å¯¹è±¡B: æˆ‘ä»¬æ˜¯æœ‹å‹\nparticipant C\nNote right of C: æ²¡äººé™ªæˆ‘ç©\n```\n\n![UML_sequence_02](/images/Diagrams/UML_sequence_02.png)\n\n### UMLæ ‡å‡†æ—¶åºå›¾(mermaid)\n\n```mermaid\n%% æ—¶åºå›¾ä¾‹å­,-> ç›´çº¿ï¼Œ-->è™šçº¿ï¼Œ->>å®çº¿ç®­å¤´\nsequenceDiagram\nparticipant å¼ ä¸‰\nparticipant æå››\nå¼ ä¸‰->ç‹äº”: ç‹äº”ä½ å¥½å—ï¼Ÿ\nloop å¥åº·æ£€æŸ¥\nç‹äº”->ç‹äº”: ä¸ç–¾ç—…æˆ˜æ–—\nend\nNote right of ç‹äº”: åˆç† é£Ÿç‰© <br/>çœ‹åŒ»ç”Ÿ...\næå››-->>å¼ ä¸‰: å¾ˆå¥½!\nç‹äº”->æå››: ä½ æ€ä¹ˆæ ·?\næå››-->ç‹äº”: å¾ˆå¥½!\n```\n\nè¯­æ³•è¯´æ˜ï¼š\n```\nTitle: Here is a title\nA->B: Normal line\nB-->C: Dashed line\nC->>D: Open arrow\nD-->>A: Dashed open arrow\n```\n\n\n![UML_mermaid](/images/Diagrams/UML_mermaid.png)\n\n## flowchart -- æµç¨‹å›¾\n\n### æ¨ªå‘æµç¨‹å›¾(mermaid)\n\n```mermaid\ngraph LR\nA[æ–¹å½¢] -->B(åœ†è§’)\nB --> C{æ¡ä»¶a}\nC -->|a=1| D[ç»“æœ1]\nC -->|a=2| E[ç»“æœ2]\nF[æ¨ªå‘æµç¨‹å›¾]\n```\n\n![flowchart_mermaid_01](/images/Diagrams/flowchart_mermaid_01.png)\n\n### ç«–å‘æµç¨‹å›¾(mermaid)\n\n```mermaid\ngraph TB\nA[æ–¹å½¢] -->B(åœ†è§’)\nB --> C{æ¡ä»¶a}\nC -->|a=1| D[ç»“æœ1]\nC -->|a=2| E[ç»“æœ2]\nF[ç«–å‘æµç¨‹å›¾]\n```\n\n![flowchart_mermaid_02](/images/Diagrams/flowchart_mermaid_02.png)\n\n### æ ‡å‡†æµç¨‹å›¾(flow)\n\n```flow\nst=>start: å¼€å§‹æ¡†\nop=>operation: å¤„ç†æ¡†\ncond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)\nsub1=>subroutine: å­æµç¨‹\nio=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†\ne=>end: ç»“æŸæ¡†\nst->op->cond\ncond(yes)->io->e\ncond(no)->sub1(right)->op\n```\n\n![flowchart_flow_01](/images/Diagrams/flowchart_flow_01.png)\n\n### æ ‡å‡†æµç¨‹å›¾-æ¨ªå‘(flow)\n\n```flow\n\nst=>start: å¼€å§‹æ¡†\nop=>operation: å¤„ç†æ¡†\ncond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)\nsub1=>subroutine: å­æµç¨‹\nio=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†\ne=>end: ç»“æŸæ¡†\nst(right)->op(right)->cond\ncond(yes)->io(bottom)->e\ncond(no)->sub1(right)->op\n```\n\n![flowchart_flow_02](/images/Diagrams/flowchart_flow_02.png)\n\n## ç”˜ç‰¹å›¾æ ·ä¾‹ (gantt)\n\n```mermaid\n%% è¯­æ³•ç¤ºä¾‹\ngantt\ndateFormat  YYYY-MM-DD\ntitle è½¯ä»¶å¼€å‘ç”˜ç‰¹å›¾\n\nsection è®¾è®¡\néœ€æ±‚:done,    des1, 2014-01-06,2014-01-08\nåŸå‹:active,  des2, 2014-01-09, 3d\nUIè®¾è®¡: des3, after des2, 5d\næœªæ¥ä»»åŠ¡: des4, after des3, 5d\n\nsection å¼€å‘\nå­¦ä¹ å‡†å¤‡ç†è§£éœ€æ±‚ :crit, done, 2014-01-06,24h\nè®¾è®¡æ¡†æ¶ :crit, done, after des2, 2d\nå¼€å‘ :crit, active, 3d\næœªæ¥ä»»åŠ¡ :crit, 5d\nè€ :2d\n\nsection æµ‹è¯•\nåŠŸèƒ½æµ‹è¯• :active, a1, after des3, 3d\nå‹åŠ›æµ‹è¯• :after a1  , 20h\næµ‹è¯•æŠ¥å‘Š : 48h\n```\n\n![Gantt](/images/Diagrams/Gantt.png)\n\n\n## ä¸é”™çš„ç”»å›¾å·¥å…·ç½‘ç«™\n* https://www.processon.com\n* https://www.draw.io\n\n## å‚è€ƒèµ„æ–™\n\n* [Draw Diagrams With Markdown](http://support.typora.io/Draw-Diagrams-With-Markdown/)\n* [Typoraç”»æµç¨‹å›¾ã€æ—¶åºå›¾(é¡ºåºå›¾)ã€ç”˜ç‰¹å›¾ï¼ˆè½¬ï¼‰](https://www.jianshu.com/p/7ddbb7dc8fec)\n* [mermaid](http://mermaid-js.github.io/mermaid/#/)\n* [mermaid-live-editor](https://github.com/mermaidjs/mermaid-live-editor)\n","tags":["æ•ˆç‡","Typora"]},{"title":"[è½¬]Objective-C Runtime å¤§ä½¬ç³»åˆ—æ–‡ç« æ•´ç†","url":"/2019/11/18/è½¬-Objective-C-Runtime-å¤§ä½¬ç³»åˆ—æ–‡ç« æ•´ç†/","content":"\n## ç®€ä»‹\næ­¤æ–‡è½¬è‡ª[kangzubin æ”¶é›†çš„runtimeå¤§ä½¬ç³»åˆ—æ–‡ç« ](https://kangzubin.com/objc-runtime-articles/)ï¼Œç‰¹åˆ«é¸£è°¢ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…ã€‚\n\n<!-- more -->\n\n## kangzubin\n\næœ€è¿‘é‡æ–°æ¸©ä¹ äº†ä¸‹ Objective-C Runtime ç›¸å…³çš„çŸ¥è¯†ï¼Œè‡ªå·±æ•´ç†äº†ä¸¤ç¯‡æ°´æ–‡ï¼š\n\n- [Objective-C 1.0 ä¸­ç±»ä¸å¯¹è±¡çš„å®šä¹‰](https://kangzubin.com/objc1.0-class-object/)\n- [Objective-C 2.0 ä¸­ç±»ä¸å¯¹è±¡çš„å®šä¹‰](https://kangzubin.com/objc2.0-class-object/)\n\nç„¶ååœ¨ç½‘ä¸Šæœç½—äº†ä¸€åœˆï¼Œå‘ç°å¾ˆå¤šå¤§ä½¬ä¹‹å‰éƒ½å†™äº†ä¸€ç³»åˆ—å…³äº Runtime çš„æ–‡ç« ï¼Œæ·±å…¥æµ…å‡ºï¼ŒçœŸæ˜¯è®©äººéš¾ä»¥æœ›å…¶é¡¹èƒŒï¼Œæ”¶é›†å¦‚ä¸‹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ï¼Œæ¬¢è¿è¡¥å……ã€‚\n\n\n\n## [Greg Parker](http://www.sealiesoftware.com/blog/)\n\n- [Classes and metaclasses](http://www.sealiesoftware.com/blog/archive/2009/04/14/objc_explain_Classes_and_metaclasses.html)\n\n## [Matt Gallagher](https://www.cocoawithlove.com/)\n\n- [What is a meta-class in Objective-C?](https://www.cocoawithlove.com/2010/01/what-is-meta-class-in-objective-c.html)\n\n## [å—å³°å­](https://southpeak.github.io/)\n\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹ä¸€ï¼šç±»ä¸å¯¹è±¡](http://southpeak.github.io/2014/10/25/objective-c-runtime-1/)\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹äºŒï¼šæˆå‘˜å˜é‡ä¸å±æ€§](http://southpeak.github.io/2014/10/30/objective-c-runtime-2/)\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹ä¸‰ï¼šæ–¹æ³•ä¸æ¶ˆæ¯](http://southpeak.github.io/2014/11/03/objective-c-runtime-3/)\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹å››ï¼šMethod Swizzling](http://southpeak.github.io/2014/11/06/objective-c-runtime-4/)\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹äº”ï¼šåè®®ä¸åˆ†ç±»](http://southpeak.github.io/2014/11/08/objective-c-runtime-5/)\n- [Objective-C Runtime è¿è¡Œæ—¶ä¹‹å…­ï¼šæ‹¾é—](http://southpeak.github.io/2014/11/09/objective-c-runtime-6/)\n\n## [halfrost](https://halfrost.com/)\n\n- [ç¥ç»ç—…é™¢ Objective-C Runtime å…¥é™¢ç¬¬ä¸€å¤© â€”â€” isa å’Œ Class](http://halfrost.com/objc_runtime_isa_class/)\n- [ç¥ç»ç—…é™¢ Objective-C Runtime ä½é™¢ç¬¬äºŒå¤© â€”â€” æ¶ˆæ¯å‘é€ä¸è½¬å‘](http://halfrost.com/objc_runtime_objc_msgsend/)\n- [ç¥ç»ç—…é™¢ Objective-C Runtime å‡ºé™¢ç¬¬ä¸‰å¤© â€”â€” å¦‚ä½•æ­£ç¡®ä½¿ç”¨ Runtime](http://halfrost.com/how_to_use_runtime/)\n- [Objc å¯¹è±¡çš„ä»Šç”Ÿä»Šä¸–](http://halfrost.com/objc_life/)\n\n## [æ¨è§ç‰](http://yulingtianxia.com/)\n\n- [Objective-C Runtime](http://yulingtianxia.com/blog/2014/11/05/objective-c-runtime/)\n- [Objective-C å¼•ç”¨è®¡æ•°åŸç†](http://yulingtianxia.com/blog/2015/12/06/The-Principle-of-Refenrence-Counting/)\n- [Objective-C æ¶ˆæ¯å‘é€ä¸è½¬å‘æœºåˆ¶åŸç†](http://yulingtianxia.com/blog/2016/06/15/Objective-C-Message-Sending-and-Forwarding/)\n\n## [é›·çº¯é”‹](http://blog.leichunfeng.com/)\n\n- [Objective-C å¯¹è±¡æ¨¡å‹](http://blog.leichunfeng.com/blog/2015/04/25/objective-c-object-model/)\n- [Objective-C +load vs +initialize](http://blog.leichunfeng.com/blog/2015/05/02/objective-c-plus-load-vs-plus-initialize/)\n- [Objective-C Category çš„å®ç°åŸç†](http://blog.leichunfeng.com/blog/2015/05/18/objective-c-category-implementation-principle/)\n- [Objective-C Autorelease Pool çš„å®ç°åŸç†](http://blog.leichunfeng.com/blog/2015/05/31/objective-c-autorelease-pool-implementation-principle/)\n- [Objective-C Method Swizzling çš„æœ€ä½³å®è·µ](http://blog.leichunfeng.com/blog/2015/06/14/objective-c-method-swizzling-best-practice/)\n- [Objective-C Associated Objects çš„å®ç°åŸç†](http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/)\n\n## [draveness/analyze](https://github.com/draveness/analyze)\n\n- [ä» NSObject çš„åˆå§‹åŒ–äº†è§£ isa](https://github.com/draveness/analyze/blob/master/contents/objc/%E4%BB%8E%20NSObject%20%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%86%E8%A7%A3%20isa.md)\n- [æ·±å…¥è§£æ ObjC ä¸­æ–¹æ³•çš„ç»“æ„](https://github.com/draveness/analyze/blob/master/contents/objc/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90%20ObjC%20%E4%B8%AD%E6%96%B9%E6%B3%95%E7%9A%84%E7%BB%93%E6%9E%84.md)\n- [ä»æºä»£ç çœ‹ ObjC ä¸­æ¶ˆæ¯çš„å‘é€](https://github.com/draveness/analyze/blob/master/contents/objc/%E4%BB%8E%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9C%8B%20ObjC%20%E4%B8%AD%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%91%E9%80%81.md)\n- [ä½ çœŸçš„äº†è§£ load æ–¹æ³•ä¹ˆï¼Ÿ](https://github.com/draveness/analyze/blob/master/contents/objc/%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%20load%20%E6%96%B9%E6%B3%95%E4%B9%88%EF%BC%9F.md)\n- [è‡ªåŠ¨é‡Šæ”¾æ± çš„å‰ä¸–ä»Šç”Ÿ](https://github.com/draveness/analyze/blob/master/contents/objc/%E8%87%AA%E5%8A%A8%E9%87%8A%E6%94%BE%E6%B1%A0%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F.md)\n- [é»‘ç®±ä¸­çš„ retain å’Œ release](https://github.com/draveness/analyze/blob/master/contents/objc/%E9%BB%91%E7%AE%B1%E4%B8%AD%E7%9A%84%20retain%20%E5%92%8C%20release.md)\n- [å…³è”å¯¹è±¡ AssociatedObject å®Œå…¨è§£æ](https://github.com/draveness/analyze/blob/master/contents/objc/%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%20AssociatedObject%20%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90.md)\n- [æ‡’æƒ°çš„ initialize æ–¹æ³•](https://github.com/draveness/analyze/blob/master/contents/objc/%E6%87%92%E6%83%B0%E7%9A%84%20initialize%20%E6%96%B9%E6%B3%95.md)\n- [å¯¹è±¡æ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ï¼ˆiOSï¼‰](https://github.com/draveness/analyze/blob/master/contents/objc/%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%EF%BC%88iOS%EF%BC%89.md)\n\n## [CornBallast](https://www.jianshu.com/u/a9008a597529)\n\n- [Runtime æ·±åº¦è§£æä»¥åŠå®ç”¨æŠ€å·§](https://www.jianshu.com/p/88d11bb12ba1)\n- [Runtime å¥‡æŠ€æ·«å·§__å¸¦ä½ æ·±å…¥ç†è§£ Runtime ç‰¹æœ‰æ¦‚å¿µ](https://www.jianshu.com/p/37e1b71ad03a)\n- [Runtime å¥‡æŠ€æ·«å·§__ä¸å—é™åˆ¶çš„æ¶ˆæ¯å‘é€](https://www.jianshu.com/p/38bbde2c5632)\n- [Runtime å¥‡æŠ€æ·«å·§__è·å–ç±»çš„å®ä¾‹å˜é‡ä»¥åŠå±æ€§å¹¶å¼ºåŠ¿ ä¸KVCã€msgSend æ··ç”¨](https://www.jianshu.com/p/cb55dbb72c84)\n- [Runtime å¥‡æŠ€æ·«å·§__æ–¹æ³•äº¤æ¢](https://www.jianshu.com/p/13ab44c46904)\n- [Runtime å¥‡æŠ€æ·«å·§__åŠ¨æ€é“¾æ¥å¯¹è±¡ä»¥åŠç»™åˆ†ç±»æ·»åŠ å±æ€§](https://www.jianshu.com/p/48220940118f)\n- [Runtime å¥‡æŠ€æ·«å·§__åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘æ”¹å–„å¼‚å¸¸](https://www.jianshu.com/p/c5bdd6f7a68c)\n\n## [å”å·§](https://blog.devtang.com/)\n\n- [Objective-Cå¯¹è±¡æ¨¡å‹åŠåº”ç”¨](https://blog.devtang.com/2013/10/15/objective-c-object-model/)\n\n## [ibireme](https://blog.ibireme.com/2013/11/25/objc-object/)\n\n- [Objective-C ä¸­çš„ç±»å’Œå¯¹è±¡](https://blog.ibireme.com/2013/11/25/objc-object/)\n\n## [sunnyxx](http://blog.sunnyxx.com/)\n\n- [objc ä¸é¸­å­å¯¹è±¡ï¼ˆä¸Šï¼‰](http://blog.sunnyxx.com/2014/08/24/objc-duck/)\n- [objc ä¸é¸­å­å¯¹è±¡ï¼ˆä¸‹ï¼‰](http://blog.sunnyxx.com/2014/08/26/objc-duck-advanced/)\n- [ç¥ç»ç—…é™¢ objc runtime å…¥é™¢è€ƒè¯•](http://blog.sunnyxx.com/2014/11/06/runtime-nuts/)\n- [é‡è¯† Objective-C Runtime - Smalltalk ä¸ C çš„èåˆ](http://blog.sunnyxx.com/2016/08/13/reunderstanding-runtime-0/)\n- [é‡è¯† Objective-C Runtime - çœ‹é€ Type ä¸ Value](http://blog.sunnyxx.com/2016/08/13/reunderstanding-runtime-1/)\n\n## å…¶ä»–\n\næ­¤å¤–ï¼Œåœ¨ç®€ä¹¦ã€æ˜é‡‘ç­‰æŠ€æœ¯åšå®¢å¹³å°ï¼Œä»¥åŠ Google ä¸Šæœç´¢ `Objective-C Runtime` å…³é”®è¯ï¼Œä¹Ÿèƒ½æ‰¾å‡ºæˆåƒä¸Šä¸‡ç›¸å…³çš„æ–‡ç« ã€‚\n","tags":["Runtime"]},{"title":"ä»é›¶å¼€å§‹åˆ›å»ºcocoaPodså…¬æœ‰åº“","url":"/2019/11/17/ä»é›¶å¼€å§‹åˆ›å»ºcocoaPodså…¬æœ‰åº“/","content":"\n## ç®€ä»‹\nè¿™ç¯‡æ–‡ç« è®°å½•äº†ä¸€ä¸ªå…¬å…±Podåº“ [RFSegmentView](https://github.com/wangruofeng/RFSegmentView)çš„åˆ›å»ºè¿‡ç¨‹\n\n<!-- more -->\n\n## æ³¨å†ŒCocoaPodsè´¦å·\n\næƒ³è¦åˆ›å»ºä¸€ä¸ªå¼€æºpodåº“, é¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†ŒCocoaPods, è¿™é‡Œä½¿ç”¨trunkæ–¹å¼,  é‚£ä¹ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œï¼ˆè¿™é‡Œé»˜è®¤ä½ å·²ç»å®‰è£…å¥½CocoaPodsç¯å¢ƒï¼‰:\n\n```ruby\npod trunk register é‚®ç®±åœ°å€ 'ç”¨æˆ·å' --verbose\n```\n\nè¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨githubé‚®ç®±å’Œç”¨æˆ·å, ç„¶ååœ¨ä½ çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶,ä¸‹é¢æ˜¯ç¡®è®¤é‚®ä»¶çš„å†…å®¹ï¼š\n\n![img](/images/cocoapod_trunk_register.png)\n\n åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»é“¾æ¥ç¡®è®¤å³æ³¨å†ŒæˆåŠŸ, æˆåŠŸä¹‹åå¯ä»¥ç»ˆç«¯æ‰§è¡Œ:\n\n```ruby\npod trunk me\n```\n\né€šè¿‡ä¸Šé¢çš„å‘½ä»¤æŸ¥çœ‹æ³¨å†Œä¿¡æ¯ï¼Œé‡Œé¢ä¼šå±•ç¤ºè¯¥è´¦å·ä¸‹çš„æ‰€æœ‰çš„Podåº“ï¼Œå¯ä»¥ç”¨æ­¤æ–¹å¼æŸ¥çœ‹è‡ªå·±å‘å¸ƒè¿‡çš„Pods\n\n```shell\nâœ  myBlog git:(master) âœ— pod trunk me\n  - Name:     wangruofeng\n  - Email:    wangruofeng007@gmail.com\n  - Since:    November 16th, 12:17\n  - Pods:\n    - RFSegmentView\n  - Sessions:\n    - November 16th, 12:17 - March 24th, 2020 04:54. IP: 119.123.133.39\n```\n\n\n\n## åˆ›å»ºå…±äº«åº“æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“\n\nå…±äº«åº“éœ€è¦ä¸‰ä¸ªå¿…ä¸å¯å°‘çš„éƒ¨åˆ†:\n\n1. `å…±äº«æ–‡ä»¶å¤¹`(æ–‡ä»¶å¤¹å­˜æ”¾ç€ä½ è¦å…±äº«çš„å†…å®¹, ä¹Ÿå°±æ˜¯å…¶ä»–äººé€šè¿‡podå®‰è£…å¾—åˆ°çš„æ–‡ä»¶, .podspecæ–‡ä»¶ä¸­çš„source_fileséœ€è¦æŒ‡å®šæ­¤æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ç±»å‹);\n2. `LICENSEæ–‡ä»¶`(é»˜è®¤ä¸€èˆ¬é€‰æ‹©MIT);\n3. `åº“å.podspec`(æœ¬åº“çš„å„é¡¹ä¿¡æ¯æè¿°, éœ€è¦æäº¤ç»™CocoaPods, podé€šè¿‡è¿™ä¸ªæ–‡ä»¶æŸ¥æ‰¾åˆ°ä½ å…±äº«çš„åº“).\n\n\n\nå¦‚æœæ²¡æœ‰ `podspec` æ–‡ä»¶å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œåˆå§‹åŒ–\n\n```\npod lib create åº“å\n```\n\n\n\n## ç¼–è¾‘.podspecæ–‡ä»¶\n\nä»¥ `RFSegmentView.podspec` ä¸ºä¾‹ï¼š\n\n```ruby\nPod::Spec.new do |spec|\n\n  spec.name         = \"RFSegmentView\"\n  spec.version      = \"1.3.0\"\n  spec.summary      = \"Imitate iOS7 style segmented controls, simple, practicalï¼\"\n  spec.homepage     = \"https://github.com/wangruofeng/RFSegmentView\"\n  spec.license      = { :type => \"MIT\", :file => \"LICENSE.md\" }\n  spec.author       = { \"wangruofeng\" =>\"wangruofeng007@gmail.com\" }\n  spec.platform     = :ios, \"8.0\"\n  spec.source       = { :git => 'https://github.com/wangruofeng/RFSegmentView.git', :tag => spec.version.to_s}\n  spec.source_files  = \"RFSegmentView/RFSegmentView.{h,m}\"\n  # spec.exclude_files = \"Classes/Exclude\"\n  # spec.public_header_files = \"Classes/**/*.h\"\n\n  spec.frameworks = 'UIKit', 'CoreGraphics', 'Foundation'\n  spec.requires_arc = true\n\n  # spec.dependency \"JSONKit\", \"~> 1.4\" æ·»åŠ ä¾èµ–åº“\n\nend\n```\n\nç¼–å†™å®Œæˆå, æˆ‘ä»¬éœ€è¦éªŒè¯.podspecæ–‡ä»¶çš„åˆæ³•æ€§, è¿™é‡Œéœ€è¦ç»ˆç«¯cdåˆ°.podspecæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹, æ‰§è¡Œ:\n\n```shell\npod lib lint RFSegmentView.podspec\n```\n\nå¦‚æœ‰è­¦å‘Šæˆ–è€…é”™è¯¯è¯·é‡æ–°æ£€æŸ¥ä½ çš„ç¼–å†™æ­£ç¡®æ€§, å¦‚æœæ²¡æœ‰é—®é¢˜ä¼šå‡ºç°\n\n```shell\n-> RFSegmentView (1.3.0)\n    \nRFSegmentView passed validation.\n```\n\n\n\n## æ‰“tagï¼Œå‘å¸ƒæ–°ç‰ˆæœ¬\n\nä¸€åˆ‡å‡†å¤‡å°±ç»ªå, æˆ‘ä»¬éœ€è¦åœ¨ä½ çš„gitä»“åº“é‡Œé¢å­˜åœ¨ä¸€ä¸ªä¸.podspecæ–‡ä»¶ä¸­ä¸€è‡´çš„ç‰ˆæœ¬, è¿™é‡Œä½ å¯ä»¥åœ¨ä½ çš„gitä»“åº“ä¸­çš„å‡†å¤‡ä¸€ä¸ªç‰ˆæœ¬, ä¹Ÿå¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ç»ˆç«¯å‘½ä»¤:\n\n```\ngit tag -m 'first release' '1.3.0'\ngit push --tag #æ¨é€tagåˆ°è¿œç«¯ä»“åº“\n```\n\næˆåŠŸä¹‹åå³å¯åœ¨ä½ åˆ†æ”¯é‡Œé¢çœ‹åˆ°è¿™ä¸ªtagçš„ç‰ˆæœ¬.\n\n\n\n## å‘å¸ƒåº“æè¿°æ–‡ä»¶\n\nä¸‹é¢æˆ‘ä»¬éœ€è¦å‘å¸ƒè‡ªå·±çš„åº“æè¿°æ–‡ä»¶podspecç»™cocoapods\nåŒæ ·åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹, ç»ˆç«¯æ‰§è¡Œ:\n\n```shell\npod trunk push RFSegmentView.podspec\n```\n\nå°†ä½ çš„åº“æ–‡ä»¶.podspecæ–‡ä»¶æäº¤åˆ°å…¬æœ‰çš„specsä¸Šé¢, è¿™ä¸€æ­¥åšçš„æ“ä½œæ˜¯éªŒè¯ä½ çš„podspecæ–‡ä»¶æ˜¯å¦åˆæ³•+æäº¤åˆ°specsä¸­+å°†ä¸Šä¼ çš„podspecæ–‡ä»¶è½¬æˆjsonæ ¼å¼æ–‡ä»¶,å¦‚æœé‡å¤æäº¤ä¼šå‡ºç°ä¸‹é¢çš„ä¿¡æ¯:\n\n```\n[!] Unable to accept duplicate entry for: RFSegmentView (1.3.0)\n```\n\nä¸ºäº†æµ‹è¯•å°†RFSegmentView.podspecé‡Œé¢çš„spec.versionä¿®æ”¹æˆ1.3.1,æˆåŠŸåä¼šå‡ºç°Congratsä¿¡æ¯:\n\n```\nâœ  RFSegmentView git:(master) pod trunk push RFSegmentView.podspec\nUpdating spec repo `trunk`\nValidating podspec\n -> RFSegmentView (1.3.1)\n    - NOTE  | xcodebuild:  note: Using new build system\n    - NOTE  | [iOS] xcodebuild:  note: Planning build\n    - NOTE  | [iOS] xcodebuild:  note: Constructing build description\n    - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (in target 'App' from project 'App')\n\nUpdating spec repo `trunk`\n\n--------------------------------------------------------------------------------\n ğŸ‰  Congrats\n\n ğŸš€  RFSegmentView (1.3.1) successfully published\n ğŸ“…  November 17th, 07:08\n ğŸŒ  https://cocoapods.org/pods/RFSegmentView\n ğŸ‘  Tell your friends!\n--------------------------------------------------------------------------------\n```\n\n## æŸ¥æ‰¾å’Œä½¿ç”¨æ–°åˆ›å»ºçš„åº“\n\næˆåŠŸåéœ€è¦ç­‰å¾…çš„æ—¶é—´ä¸å®š, ç›®å‰ä¸€èˆ¬æ¯”è¾ƒå¿«, ä¸€èˆ¬ä½¿ç”¨pod setupå’Œpod searchæŸ¥çœ‹æ˜¯å¦å·²ç»å¯ä»¥ä½¿ç”¨, å¦‚æœ\n\n`pod search RFSegmentView` ä¸€ç›´æœç´¢ä¸åˆ°ï¼Œå°è¯•åˆ é™¤`pod setup`æˆåŠŸåç”Ÿæˆçš„`~/Library/Caches/CocoaPods/search_index.json`æ–‡ä»¶, è¯¥æ–‡æ˜¯ç”¨æ¥æŸ¥æ‰¾çš„ç´¢å¼•æ–‡ä»¶, \n\nç»ˆç«¯è¾“å…¥:\n\n```shell\nrm ~/Library/Caches/CocoaPods/search_index.json\n```\n\nåˆ é™¤æˆåŠŸåå†æ‰§è¡Œ:`pod search åº“å`, ç­‰å¾…è¾“å‡ºï¼š`Creating search index for spec repo 'master'.. Done!`ç¨ç­‰ç‰‡åˆ»å°±ä¼šå‡ºç°ä½ æƒ³è¦çš„ç»“æœ,å¦‚æœè¿˜æ˜¯æ²¡æœ‰ç»“æœéœ€è¦ç­‰å¾…podåŒæ­¥ï¼Œè¿‡ä¸€æ®µæ—¶é—´å†æ¥å°è¯•ã€‚\n\n## æ›´æ–°ç»´æŠ¤podspec\n\nå¦‚æœæœ‰é”™è¯¯æˆ–è€…éœ€è¦è¿­ä»£ç‰ˆæœ¬,ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶åæ¨é€åˆ°è¿œç«¯ä»“åº“å, éœ€è¦ä¿®æ”¹podspecä¸­çš„ç‰ˆæœ¬å·, å¹¶é‡æ–°æ‰“tagä¸Šä¼ , å†è¿›è¡Œæ–°ä¸€è½®çš„éªŒè¯å’Œå‘å¸ƒã€‚\n\n\n## å‚è€ƒèµ„æ–™\n\n* [[CocoaPodsåˆ›å»ºå…¬æœ‰å’Œç§æœ‰Podåº“æ–¹æ³•æ€»ç»“](https://segmentfault.com/a/1190000007947371)](https://segmentfault.com/a/1190000007947371)\n* [Podspecs](https://github.com/CocoaPods/Specs/)\n* [Podspec attributes](https://guides.cocoapods.org/syntax/podspec.html)\n","tags":["CocoaPods"]},{"title":"Podå¸¸ç”¨å‘½ä»¤","url":"/2019/11/14/Podå¸¸ç”¨å‘½ä»¤/","content":"\n\n# ç®€ä»‹\nä»‹ç»Podå¸¸ç”¨çš„å‡ ç§å‘½ä»¤\n\n<!-- more -->\n\n## pod init\n\nç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šåˆå§‹åŒ–é¡¹ç›®ï¼Œå¦‚æœå·²ç»åˆå§‹åŒ–åè°ƒç”¨ä¼šæŠ›å‡ºä»¥ä¸‹é”™è¯¯ã€‚\n\n\n> [!] Existing Podfile found in directory\n\n\n## pod install\n\næ ¹æ®podfile.lockæ–‡ä»¶ä¸­æŒ‡å®šçš„podä¾èµ–åº“çš„ç‰ˆæ›´æ–°é¡¹ç›®çš„podä¾èµ–åº“ã€‚åœ¨é¦–æ¬¡æ‰§è¡Œpod installå‘½ä»¤æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨podfile.lockæ–‡ä»¶ä¼šç”Ÿæˆè¯¥æ–‡ä»¶ï¼Œå¹¶ä¸”åŒæ—¶ç”Ÿæˆ`xcworkspace`æ–‡ä»¶å’Œpodsæ–‡ä»¶å¤¹ã€‚ \n\n> pod installæ‰§è¡Œåï¼Œåç»­çš„é¡¹ç›®éœ€è¦ä½¿ç”¨`xxx.xcworkspace`æ‰“å¼€\n\n\n\nå‚æ•°ï¼š--no-repo-update\n\nä¸æ›´æ–°podä»“åº“ï¼Œä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥åŠ å¿«pod installçš„æ›´æ–°é€Ÿåº¦ã€‚\n\neg: `pod install --no-repo-update`\n\n\n\n## pod update\n\nè¿™ä¸ªå‘½ä»¤ä¼šæ£€æŸ¥podfile.lockæ–‡ä»¶ä¸­çš„podä¾èµ–åº“çš„ç‰ˆæœ¬ï¼Œå¹¶æ›´æ–°ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°podfile.lockæ–‡ä»¶ã€‚\n\n\n\né€‰é¡¹ï¼š--exclude-pods=xxx\n\nåªæ›´æ–°xxxä¹‹å¤–çš„ä»“åº“ã€‚\n\neg: `pod update --exclude-pods=AFNetworking`\n\n\n\né€‰é¡¹ï¼šxxx --no-repo-update\n\nåªæ›´æ–°`xxx`ä¾èµ–ä¸æ›´æ–°é™¤å®ƒä¹‹å¤–çš„å…¶ä»–ä¾èµ–ã€‚\n\neg: `pod update AFNetworking --no-repo-update`\n\n\n\n> ä¸€èˆ¬æ²¡æœ‰ç‰¹åˆ«å¿…è¦æ—¶ä¸å»ºè®®ä½¿ç”¨pod updateå‘½ä»¤,å°½é‡ä½¿ç”¨pod installï¼Œå¦‚æœå®åœ¨ä¸è¡Œå†ä½¿ç”¨å¸¦ä¸Šé¢é€‰é¡¹çš„od updateï¼Œå¦‚æœæ›´æ–°å¤±è´¥æ‰ä½¿ç”¨pod updateå‘½åï¼Œè¿™æ ·èƒ½æ˜æ˜¾åŠ å¿«æ›´æ–°æµç¨‹ï¼ŒèŠ‚çº¦æ›´æ–°ä¾èµ–çš„æ—¶é—´ã€‚\n\n\n\n## pod search \n\nåé¢æ›´æ–°ä¾èµ–åº“çš„åç§°ï¼Œæœç´¢æŒ‡å®šä¾èµ–åº“\n\neg: pod search AFNetworking\n\n```ruby\n-> AFNetworking (3.2.1)\n   A delightful iOS and OS X networking framework.\n   pod 'AFNetworking', '~> 3.2.1'\n   - Homepage: https://github.com/AFNetworking/AFNetworking\n   - Source:   https://github.com/AFNetworking/AFNetworking.git\n   - Versions: 3.2.1, 3.2.0, 3.1.0, 3.0.4, 3.0.3, 3.0.2, 3.0.1, 3.0.0,\n   3.0.0-beta.3, 3.0.0-beta.2, 3.0.0-beta.1, 2.7.0, 2.6.3, 2.6.2, 2.6.1, 2.6.0,\n   2.5.4, 2.5.3, 2.5.2, 2.5.1, 2.5.0, 2.4.1, 2.4.0, 2.3.1, 2.3.0, 2.2.4, 2.2.3,\n   2.2.2, 2.2.1, 2.2.0, 2.1.0, 2.0.3, 2.0.2, 2.0.1, 2.0.0, 2.0.0-RC3, 2.0.0-RC2,\n   2.0.0-RC1, 1.3.4, 1.3.3, 1.3.2, 1.3.1, 1.3.0, 1.2.1, 1.2.0, 1.1.0, 1.0.1,\n   1.0, 1.0RC3, 1.0RC2, 1.0RC1, 0.10.1, 0.10.0, 0.9.2, 0.9.1, 0.9.0, 0.7.0,\n   0.5.1 [master repo]\n   - Subspecs:\n     - AFNetworking/Serialization (3.2.1)\n     - AFNetworking/Security (3.2.1)\n     - AFNetworking/Reachability (3.2.1)\n     - AFNetworking/NSURLSession (3.2.1)\n     - AFNetworking/UIKit (3.2.1)\n```\n\n\n\n## pod repo\n\næŸ¥çœ‹æ‰€æœ‰pod ä»“åº“çš„æº\n\n```ruby\nmaster\n- Type: git (master)\n- URL:  https://github.com/CocoaPods/Specs.git\n- Path: /Users/wangruofeng/.cocoapods/repos/master\n```\n\n\n\né€‰é¡¹ï¼šremove xxx\n\neg: pod repo remove xxx\n\nç§»é™¤xxx repoæº\n\n\n\n## pod try\n\néå¸¸æ£’ï¼Œå´å¾ˆå°‘æœ‰äººçŸ¥é“ï¼Œä½¿æ‚¨å¯ä»¥åœ¨å°†åº“æ·»åŠ åˆ°é¡¹ç›®ä¹‹å‰å¯¹å…¶è¿›è¡Œæµ‹è¯•é©±åŠ¨ã€‚\n\né€‰é¡¹ï¼štry xxx\n\n```ruby\npod try AFNetworking\n```\n\n\n\n## pod outdated\n\næ˜¾ç¤ºå½“å‰ Podfile.lockæ–‡ä»¶ä¸­è¿‡æœŸçš„podsï¼Œä»…ä»…æ˜¯æ¥è‡ªspec reposï¼Œä¸åŒ…å«æ¥è‡ªæœ¬åœ°å’Œå¤–éƒ¨çš„èµ„æºã€‚\n\n![pod_outdated](/images/pod_outdated.png)\n\n ## gem source æ“ä½œ\n\nå½“å‰gemæºæŸ¥çœ‹\n\n>  gem source -l\n\n```ruby\n*** CURRENT SOURCES ***\n\nhttps://gems.ruby-china.com/\n```\n\nç§»é™¤æŒ‡å®šçš„gemæº\n\n> gem source  - - remove <https://rubygems.org/>\n\næ·»åŠ æŒ‡å®šçš„gemæº\n\n> gem source - a https://gems.ruby-china.com/\n\næ›´æ–°cocoapod\n\n> sudo gem install cocoapods\n\n","tags":["CocoaPods","Skill"]},{"title":"ä»Octopressè¿ç§»åšå®¢åˆ°hexo","url":"/2019/11/10/ä»Octopressè¿ç§»åšå®¢åˆ°hexo/","content":"\n![hexo](/images/baner_hexo.jpg)\n<!-- more -->\n\n## ç®€ä»‹\n\næœ€è¿‘å‡†å¤‡æ›´æ–°åšå®¢ï¼ˆä»¥å‰çš„åŸºäºOctopressï¼‰ï¼Œå»å†™çš„æ—¶å€™çªç„¶å‘ç°ä»¥å‰çš„åšå®¢è·‘ä¸èµ·æ¥äº†ã€‚ã€‚ã€‚å€’è…¾äº†ä¸€ä¸‹ï¼Œåœ¨æ‰§è¡Œåšå®¢æ›´æ–°æ—¶`rake generate`ï¼Œä¸€ç›´æŠ¥é”™ï¼Œé”™è¯¯å‡ºç°åœ¨é«˜äº®è§£ææ¨¡å— `Pygments`ï¼Œå°è¯•å‡çº§`jekyll`ä½†æ˜¯å’Œå®ƒç›¸å…³çš„ä¾èµ–æ¨¡å—è¿˜æ˜¯æœ‰é—®é¢˜ã€‚\n\n```shell\nâœ  Octopress git:(source) âœ— rake generate\n## Generating Site with Jekyll\nConfiguration file: /Users/wangruofeng/Documents/Git Repositories/Octopress/_config.yml\n            Source: source\n       Destination: public\n      Generating... \njekyll 2.5.3 | Error:  Pygments can't parse unknown language: objective-c.\n```\n\n\n\nåé¢å»[Octopress](http://octopress.org)å®˜ç½‘æŸ¥äº†äº†ï¼Œå‘ç°ä¸Šæ¬¡æ›´æ–°è¿˜æ˜¯[2015.01.15](http://octopress.org/2015/01/15/octopress-3.0-is-coming/)çš„äº‹äº†ï¼Œåç»­ä¹Ÿæ²¡æœ‰æ›´æ–°ï¼Œäºæ˜¯è§‰å¾—è¿™ä¸ªä¸å¤ªé è°±ï¼Œå‡†å¤‡æ¢ä¸€ä¸ªï¼Œè°ƒç ”äº†ä¸€ä¸‹ï¼Œå‘ç°ä½¿ç”¨hexoçš„æŒºå¤šï¼Œäºæ˜¯å¼€å§‹æ£è…¾èµ·æ¥ã€‚ã€‚ã€‚\n\n\n\n## å‡†å¤‡ç¯å¢ƒ\n\n\bå‡†å¤‡ node å’Œ git ç¯å¢ƒï¼Œ é¦–å…ˆï¼Œå®‰è£… [NodeJS](https://nodejs.org/en/)ï¼Œå› ä¸º [Hexo](https://hexo.io/zh-cn/) æ˜¯åŸºäº Node.js é©±åŠ¨çš„ä¸€æ¬¾åšå®¢æ¡†æ¶ã€‚\n\n\n\nåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç›¸åº”å‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæˆåŠŸä¼šæœ‰ç›¸åº”çš„ç‰ˆæœ¬å·ã€‚\n\n```shell\nâœ  myBlog git:(master) âœ— git version\ngit version 2.24.0\nâœ  myBlog git:(master) âœ— node -v\nv12.13.0\nâœ  myBlog git:(master) âœ— npm -v\n6.12.0\n```\n\n\n\n## å®‰è£…Hexo\n\nå¦‚æœä»¥ä¸Šç¯å¢ƒå‡†å¤‡å¥½äº†å°±å¯ä»¥ä½¿ç”¨ npm å¼€å§‹å®‰è£… Hexo äº†ã€‚ä¹Ÿå¯æŸ¥çœ‹ [Hexo](https://hexo.io/zh-cn/) çš„è¯¦ç»†æ–‡æ¡£ã€‚ åœ¨å‘½ä»¤è¡Œè¾“å…¥æ‰§è¡Œä»¥ä¸‹\bå‘½ä»¤ï¼š\n\n```bash\nnpm install -g hexo-cli\n```\n\næ²¡æœ‰æƒé™çš„è¯å¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯:\n\n```shell\nnpm ERR! code EACCES\nnpm ERR! syscall mkdir\nnpm ERR! path /Users/wangruofeng/.npm/_cacache/content-v2/sha512/0b/8a\nnpm ERR! errno -13\nnpm ERR! \nnpm ERR! Your cache folder contains root-owned files, due to a bug in\nnpm ERR! previous versions of npm which has since been addressed.\nnpm ERR! \nnpm ERR! To permanently fix this problem, please run:\nnpm ERR!   sudo chown -R 501:20 \"/Users/wangruofeng/.npm\"\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /Users/wangruofeng/.npm/_logs/2019-11-10T07_21_42_135Z-debug.log\n```\n\næŠ¥é”™çš„è¯åŠ ä¸Š sudoé‡è¯•ä¸€æ¬¡æˆ–è€…æ‰§è¡Œ**sudo chown -R 501:20 \"/Users/wangruofeng/.npm\"**\n\n```shell\nâœ  Git Repositories sudo npm install -g hexo-cli\n/usr/local/Cellar/node/5.7.0/bin/hexo -> /usr/local/Cellar/node/5.7.0/lib/node_modules/hexo-cli/bin/hexo\n+ hexo-cli@3.1.0\nadded 67 packages from 317 contributors in 27.347s\n```\n\n\n\nå®‰è£… Hexo å®Œæˆåï¼Œå†æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚\n\n```sh\nhexo init myBlog\ncd myBlog\nnpm install\n```\n\n\n\næ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š\n\n```\n.\nâ”œâ”€â”€ _config.yml # ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ \nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ scaffolds # æ¨¡ç‰ˆæ–‡ä»¶å¤¹\nâ”œâ”€â”€ source  # èµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤ _posts æ–‡ä»¶ï¼Œå…¶ä»–ä»¥ä¸‹åˆ’çº¿_å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ä¸ä¼šè¢«ç¼–è¯‘æ‰“åŒ…åˆ°publicæ–‡ä»¶å¤¹\n|   â”œâ”€â”€ _drafts # è‰ç¨¿æ–‡ä»¶\n|   â””â”€â”€ _posts # æ–‡ç« Markdowmæ–‡ä»¶ \nâ””â”€â”€ themes  # ä¸»é¢˜æ–‡ä»¶å¤¹\n```\n\n\n\nå¥½äº†ï¼Œå¦‚æœä¸Šé¢çš„\bå‘½ä»¤éƒ½æ²¡æŠ¥é”™çš„è¯ï¼Œå°±æ­å–œäº†ï¼Œè¿è¡Œ hexo s å‘½ä»¤ï¼Œå…¶ä¸­ s æ˜¯ server çš„\bç¼©å†™ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ [http://localhost:4000](http://localhost:4000/) å›è½¦å°±å¯ä»¥é¢„è§ˆæ•ˆæœäº†ã€‚\n\n```shell\nhexo s\n```\n\nè‡³æ­¤ï¼Œä½ æœ¬åœ°çš„åšå®¢å°±å·²ç»æ­å»ºæˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯éƒ¨ç½²åˆ° Github Page äº†ã€‚\n\n\n\n## éƒ¨ç½²åˆ°GitHub\n\næ­¤æ—¶ï¼Œæœ¬åœ°å’ŒGithubçš„å·¥ä½œåšå¾—å·®ä¸äº†ï¼Œæ˜¯æ—¶å€™æŠŠå®ƒä»¬ä¸¤ä¸ªè¿æ¥èµ·æ¥äº†ã€‚ä½ \bä¹Ÿå¯ä»¥æŸ¥çœ‹å®˜ç½‘çš„[éƒ¨ç½²](https://hexo.io/zh-cn/docs/deployment)æ•™ç¨‹ã€‚ å…ˆä¸ç€æ€¥ï¼Œéƒ¨ç½²ä¹‹å‰è¿˜éœ€è¦ä¿®æ”¹é…ç½®å’Œå®‰è£…éƒ¨ç½²æ’ä»¶ã€‚ ç¬¬ä¸€ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ _config.yml é…ç½®æ–‡ä»¶\bé…ç½®å‚æ•°ã€‚æ‹‰åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¡«ä¸Šå¦‚ä¸‹é…ç½®ï¼ˆä¹Ÿå¯åŒæ—¶éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“ï¼Œåé¢å†è¯´ï¼‰ï¼š\n\n```yaml\n# Deployment\n## Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo:\n    github: https://github.com/wangruofeng/wangruofeng.github.io.git\n  branch: master\n```\n\n\n\nç¬¬äºŒï¼šè¦å®‰è£…ä¸€ä¸ªéƒ¨ç½²\bæ’ä»¶ [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git)ã€‚\n\n```shell\nnpm install hexo-deployer-git --save\n```\n\næœ€åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥éƒ¨ç½²ä¸Šä¼ å•¦ï¼Œä»¥ä¸‹ g æ˜¯ generate ç¼©å†™ï¼Œd æ˜¯ deploy ç¼©å†™\n\n```shell\nhexo g -d\n```\n\nç¨ç­‰ä¸€ä¼šï¼Œåœ¨æµè§ˆå™¨è®¿é—®ç½‘å€ï¼š [https://ä½ çš„ç”¨æˆ·å.github.io](https://ä½ çš„ç”¨æˆ·å.github.io]) å°±ä¼šçœ‹åˆ°ä½ çš„åšå®¢å•¦ï¼ï¼\n\n\n\n## å¼€å§‹å†™ä½œ\n\nåšå®¢æ­å¥½äº†ï¼Œå°±å¼€å§‹å†™æ–‡ç« äº†ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œè¯¦ç»†çš„æ–‡æ¡£å¯ä»¥çœ‹ [hexo](https://hexo.io/zh-cn/) å®˜ç½‘ã€‚ æ–°å»ºæ–‡ç« ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯\n\n```\nhexo new 'æ–‡ç« æ ‡é¢˜'\n```\n\næ‰§è¡Œå®Œæˆåå¯ä»¥åœ¨ /source/_posts ä¸‹çœ‹åˆ°ä¸€ä¸ªâ€œ[æ–‡ç« æ ‡é¢˜.md](http://xn--7dvp9ct91as61a.md/)â€çš„æ–‡ç« æ–‡ä»¶å•¦ã€‚.md å°±æ˜¯ Markdown æ ¼å¼çš„æ–‡ä»¶ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸€ä¸‹ï¼Œè¯­æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚\n\nåœ¨ Markdown æ–‡ç« é‡Œé¢è¾“å…¥ä½ çš„æ–‡ç« å†…å®¹\n\nå†æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤\n\n```shell\nhexo g # ç”Ÿæˆç›¸å…³æ–‡ä»¶\nhexo s # éƒ¨ç½²åˆ°æœ¬åœ°\n```\n\n\n\næœ€åï¼Œåªè¦éƒ¨ç½²åˆ°ä½ çš„ Github ä¸Šå°±å¯ä»¥äº†ï¼\n\n```shell\nhexo clean\nhexo g -d\n```\n\néƒ¨ç½²å‰æœ€å¥½èƒ½å…ˆæ‰§è¡Œä¸€ä¸‹ hexo clean å‘½ä»¤ï¼Œæ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚\n\n\n\nå¦å¤–ï¼Œå¦‚æœä½ çš„æ–‡ç« æš‚æ—¶ä¸å‘å¸ƒå¯ä»¥å…ˆä¿å­˜åœ¨è‰ç¨¿é‡Œé¢ã€‚ç”Ÿæˆè‰ç¨¿çš„æ–¹æ³•å’Œæ–‡ç« å·®ä¸å¤š hexo new draft \"æ–‡ç« æ ‡é¢˜\"ï¼Œç”Ÿæˆåä¼šåœ¨ /source/_drafts é‡Œçœ‹åˆ°ä½ çš„è‰ç¨¿æ–‡ç« ã€‚å½“ä½ æƒ³å‘å¸ƒæ—¶åªè¦æ‰§è¡Œ publish å‘½ä»¤å³å¯å‘å¸ƒåˆ°åšå®¢ã€‚\n\n```\nhexo publish [layout] <filename>\n```\n\n\n\n## é‡åˆ°çš„å‘ \n\n### 1. Hexo: TypeError: Cannot set property â€˜lastIndexâ€™ of undefined\n\nè§£å†³æ–¹æ¡ˆæ˜¯ å°†ä½ å·¥ç¨‹ä¸‹çš„ _config.yml (è¿™ä¸ªä¸æ˜¯ä¸»é¢˜çš„_config.yml) æ–‡ä»¶é‡Œé¢çš„ `auto_detect` è®¾ç½®ä¸º falseã€‚\n\n```yaml\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: false\n  tab_replace:\n```\n\n\n\n### 2.ä¿®æ”¹å®Œ hexo ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ é‡æ–° generate æ–‡ä»¶ä¸ç”Ÿæ•ˆ\n\nä½¿ç”¨ hexo çš„å‘½ä»¤ `hexo clean`,æ¸…é™¤ä¸€ä¸‹ã€‚\n\n\n\n## å‚è€ƒé“¾æ¥\n\n* [è¿è¡Œ hexo g å‡ºé”™ #1913](https://github.com/hexojs/hexo/issues/1913)\n* [æœ‰å“ªäº›å¥½çœ‹çš„ Hexo ä¸»é¢˜ï¼Ÿ](https://www.zhihu.com/question/24422335)\n* [è¶…è¯¦ç»†Hexo+Github Pageæ­å»ºæŠ€æœ¯åšå®¢æ•™ç¨‹ã€æŒç»­æ›´æ–°ã€‘](https://juejin.im/post/5c4730c9f265da61616efeec)\n","tags":["Hexo"],"categories":["åšå®¢æ­å»º"]},{"title":"NSNumberè½¬NSStringä¸¢ç²¾é—®é¢˜","url":"/2017/10/14/2017-10-14-nsnumberzhuan-nsstringdiu-jing-wen-ti/","content":"\n\n### é—®é¢˜å¼•å‡º\n\nåœ¨å¼€å‘ä¸­ï¼Œæ¶‰åŠä»·æ ¼é‡‘é¢å¤„ç†ï¼Œåå°ä¼šè¿”å›Numberç±»å‹çš„æ•°æ®ï¼Œæ‰“å°æˆ–è€…ç»è¿‡Jsonè½¬Modelåçš„NSStringå¯èƒ½å‡ºç°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ï¼Œå¦‚æœæ¶‰åŠåˆ°é‡‘é¢çš„åŠ å‡ä¹˜é™¤è¿ç®—é—®é¢˜å°†æš´éœ²å¾—æ›´ä¸ºæ˜æ˜¾ã€‚è¿™é‡Œå°±iOSæ•°æ®ç²¾åº¦å¤„ç†åšä¸€ä¸ªæ€»ç»“ã€‚\n\n### é—®é¢˜å¤ç°\n\n#### NSNumberè½¬NSSting\n\n```objc\n    NSArray *numbers = @[\n                         @99.00,\n                         @99.09,\n                         @99.19,\n                         @99.29,\n                         @99.39,\n                         @99.49,\n                         @99.59,\n                         @99.69,\n                         @99.79,\n                         @99.89,\n                         @99.99,\n                         ];\n    \n    for (int i = 0; i < numbers.count; i++) {\n        NSNumber *number = numbers[i];\n        NSString *strValue = [number stringValue];\n        \n        NSLog(@\"strValue:%@\",strValue);\n    }\n    \n    /*\n     oldVlue:99.00 strValue:99\n     oldVlue:99.09 strValue:99.09\n     oldVlue:99.19 strValue:99.19\n     oldVlue:99.29 strValue:99.29000000000001\n     oldVlue:99.39 strValue:99.39\n     oldVlue:99.48 strValue:99.48999999999999\n     oldVlue:99.59 strValue:99.59\n     oldVlue:99.69 strValue:99.69\n     oldVlue:99.79 strValue:99.79000000000001\n     oldVlue:99.89 strValue:99.89\n     oldVlue:99.99 strValue:99.98999999999999\n     */\n```\n\nåœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°å°†NSNumberè½¬æ¢æˆNSStingçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ã€‚\n\n#### Jsonåˆ°Model\n\n```objc\n    //å‡ºç°BUGçš„æ¡ä»¶å¿…é¡»æ˜¯ä¸¤ä½æ•°ï¼Œä¸”å¸¦ä¸¤ä½å°æ•°ï¼Œç±»å‹è¿˜å¿…é¡»æ˜¯float\n    //ä¸¤ä½æ•°ï¼šåä½å¿…é¡»æ˜¯7ã€8ã€9ï¼›ä¸ªä½æ•°éšæ„\n    //ä¸¤ä½å°æ•°ï¼šä¸ªä½æ•°éšæ„ï¼›åä½æ•°å¿…é¡»æ˜¯0\n    NSString *jsonStr = @\"{\\\"71.40\\\":71.40, \\\"97.40\\\":97.40, \\\"80.40\\\":80.40, \\\"188.40\\\":188.40}\";\n    NSLog(@\"json:%@\", jsonStr);\n    \n    NSData *jsonData = [jsonStr dataUsingEncoding:NSUTF8StringEncoding];\n    NSError *jsonParsingError = nil;\n    NSDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:[NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&jsonParsingError]];\n    \n    NSLog(@\"dic:%@\", dic);\n    /*\n    2017-10-14 18:29:19.434 FloatTransferDemo[62722:3093992] dic:{\n        \"188.40\" = \"188.4\";\n        \"71.40\" = \"71.40000000000001\";\n        \"80.40\" = \"80.40000000000001\";\n        \"97.40\" = \"97.40000000000001\";\n    }\n    */\n```\n\nåœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°å°†Jsonè§£ææˆModelçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ã€‚\n\n### é—®é¢˜åˆ†æ\n\nå› ä¸ºæµ®ç‚¹æ•°åœ¨è®¡ç®—æœºä¸­æ˜¯é‡‡ç”¨IEEEè§„å®šçš„æ ‡å‡†æµ®ç‚¹æ ¼å¼ï¼Œå³äºŒè¿›åˆ¶ç§‘å­¦è¡¨ç¤ºæ³•ã€‚\nåœ¨è¿™ç§è¡¨ç¤ºæ³•ä¸­ï¼Œä¸€ä¸ªæ•° `S = M * 2 ^ N`ã€‚\n\nå…¶ä¸­Nè¡¨ç¤ºé˜¶ç ï¼ŒMè¡¨ç¤ºä½æ•°(æœ‰æ•ˆæ•°å­—ä½)ã€‚\nä¾‹å¦‚ä¸€ä¸ªfloatç±»å‹çš„æµ®ç‚¹ï¼Œåœ¨32bitä½ä¸Šï¼Œå 4ä¸ªå­—èŠ‚ï¼Œå­—èŠ‚è¡¨ç¤ºä¸º\n\n\tã€31ã€‘N:ã€30 ~ 23ã€‘ M:ã€22~0ã€‘\n\n* 31ä½è¡¨ç¤ºç¬¦å·ä½: 0æ­£ï¼Œ1è´Ÿ\n* ä¸­é—´8ä½æ˜¯é˜¶ç ä½: è¡¨ç¤ºèŒƒå›´ã€-128 ~ 127ã€‘,å¯¹äºfloatç±»å‹æ•°æ®è§„å®šå…¶åç§»é‡ä¸º127\n* åé¢23ä½æ˜¯æœ‰æ•ˆæ•°å­—ä½: å› ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œæ•´æ•°ä½å®šæ­»äº†æ˜¯1ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•çš„æ˜¯å°æ•°ç‚¹åé¢çš„äºŒè¿›åˆ¶ä¸º\n\næŒ‡æ•°Nå†³å®šå®ƒçš„èŒƒå›´ï¼Œå› ä¸ºMæ€»æ˜¯ä¸€ä¸ªä»¥1å¼€å¤´çš„å°æ•°ï¼Œä»¥floatæ¥è¯´å³æ˜¯ï¼š-2 ^ 128 ~ 2 ^ 128,å³floatèƒ½è¡¨ç¤ºçš„æ•°çš„å¤§å°çš„èŒƒå›´ã€‚\n\nè€Œå®ƒçš„ç²¾åº¦æ˜¯ç”±ä½æ•°(ä¹Ÿå°±æ˜¯æœ‰æ•ˆçš„æ•°æ®ä½)æ¥å†³å®šçš„ï¼Œ 2 ^ 23 = 8388608ï¼Œæ€»å…±7ä½ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½ç”¨7ä½æœ‰æ•ˆæ•°å­—ï¼Œæœ€å¤šèƒ½è¡¨ç¤ºåˆ°.8388708å³å°æ•°ç‚¹å7ä½ï¼Œç”±äºä¸èƒ½å®Œå…¨è¡¨ç¤ºå…¨éƒ¨çš„7ä½æ•°ï¼Œæ‰€ä»¥å®ƒçš„ç²¾åº¦èŒƒå›´æ˜¯6ä½~7ä½ã€‚\n\nåŒç†å¯å¾—doubleçš„ç²¾åº¦æ˜¯2 ^ 52 = 4503599627370496ï¼Œ å…±16ä½ï¼Œæ‰€ä»¥ç²¾åº¦ä¸º15 ~ 16ä½ã€‚\n\n#### æ€»ç»“ï¼šfloat/doubleç±»å‹çš„èŒƒå›´å’Œç²¾åº¦çš„è®¡ç®—æ–¹å¼\n\n\tä¸åŒæœºå™¨å­—èŠ‚åºçš„è§„å®š\n\tå…¬å¼ï¼š S = M * 2 ^ N\n\täºŒè¿›åˆ¶åœ¨å†…å­˜ä¸­æ˜¯ä»¥è¡¥ç å½¢å¼å­˜å‚¨ï¼Œè´Ÿæ•°è¦å¯¹å…¶äºŒè¿›åˆ¶ç»å¯¹å€¼æŒ‰ä½å–åå†åŠ ä¸€ï¼Œæ­£æ•°çš„è¡¥ç ä¸åŸç å½¢å¼ç›¸åŒ\n\t\nä¹Ÿå°±æ˜¯è¯´floatå’Œdoublelç±»å‹æ•°æ®åœ¨è®¡ç®—æœºä¸­å­˜å‚¨å¯èƒ½æ˜¯ä¸ç²¾ç¡®çš„ã€‚\nå½“æˆ‘ä»¬éœ€è¦è½¬æ¢æˆæµ®ç‚¹ç±»å‹æ˜¯æ•°æ®æ—¶ï¼Œæœ€å¥½ç”¨doubleï¼Œå› ä¸ºdoubleçš„ç²¾åº¦æ›´é«˜ï¼Œå‡ºç°ä¸¢ç²¾åº¦çš„æ¦‚ç‡ç›¸å¯¹æ˜¯è¾ƒå°çš„ã€‚\n\nåœ¨iOSä¸­æä¾›ä¸€ä¸ªä¸“ç”¨çš„ç±»æ¥å¤„ç†æµ®ç‚¹æ•°æ®ç›¸å…³çš„è¿ç®—ï¼š`NSDecimalNumber`\n\n### è§£å†³æ–¹æ¡ˆ\n\nä½¿ç”¨`NSDecimalNumber`æ¥è¿›è¡Œæµ®ç‚¹æ•°å¤„ç†ã€‚\næˆ‘ä»¬ç»™NSStringæ·»åŠ ä¸€ä¸ªåˆ†ç±»æ¥å¤„ç†æµ®ç‚¹è¿ç®—é—®é¢˜\n\n```objc\n///.h\n@interface NSString (DecimalNumber)\n\n+ (NSString *)decimalNumberWithNSNumber:(NSNumber * )number;\n+ (NSString *)decimalNumberWithDouble:(double)conversionValue;\n\n@end\n\n///.m\n#import \"NSString+DecimalNumber.h\"\n\n@implementation NSString (DecimalNumber)\n\n+ (NSString *)decimalNumberWithNSNumber:(NSNumber * )number\n{\n    double conversionValue = [number doubleValue];\n    NSString *doubleString        = [NSString stringWithFormat:@\"%lf\", conversionValue];\n    NSDecimalNumber *decNumber    = [NSDecimalNumber decimalNumberWithString:doubleString];\n    return [decNumber stringValue];\n}\n\n+ (NSString *)decimalNumberWithDouble:(double)conversionValue\n{\n    NSString *doubleString        = [NSString stringWithFormat:@\"%lf\", conversionValue];\n    NSDecimalNumber *decNumber    = [NSDecimalNumber decimalNumberWithString:doubleString];\n    return [decNumber stringValue];\n}\n\n@end\n```\n\n### å¦‚ä½•ä½¿ç”¨\n\n```objc\n    NSArray *numbers = @[\n                         @99.00,\n                         @99.09,\n                         @99.19,\n                         @99.29,\n                         @99.39,\n                         @99.49,\n                         @99.59,\n                         @99.69,\n                         @99.79,\n                         @99.89,\n                         @99.99,\n                         ];\n    \n    for (int i = 0; i < numbers.count; i++) {\n        NSNumber *number = numbers[i];\n        NSString *strValue = [NSString decimalNumberWithNSNumber:number];\n        \n        NSLog(@\"strValue:%@\",strValue);\n    }\n    \n    /*\n     oldVlue:99.00 strValue:99\n     oldVlue:99.09 strValue:99.09\n     oldVlue:99.19 strValue:99.19\n     oldVlue:99.29 strValue:99.29\n     oldVlue:99.39 strValue:99.39\n     oldVlue:99.48 strValue:99.49\n     oldVlue:99.59 strValue:99.59\n     oldVlue:99.69 strValue:99.69\n     oldVlue:99.79 strValue:99.79\n     oldVlue:99.89 strValue:99.89\n     oldVlue:99.99 strValue:99.99\n     */\n```\n\né—®é¢˜å¾—ä»¥è§£å†³ã€‚â˜•ï¸\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* https://developer.apple.com/documentation/foundation/nsdecimalnumber\n* http://www.jianshu.com/p/4703d704c953\n* https://eezytutorials.com/ios/nsdecimalnumber-by-example.php\n* http://www.skyfox.org/ios-nsdecimalnumber-use.html\n* https://stackoverflow.com/questions/421463/should-i-use-nsdecimalnumber-to-deal-with-money\n","tags":["æŠ€å·§","æ•ˆç‡"],"categories":["iOS"]},{"title":"NSSortDescriptoræ­£ç¡®çš„æ‰“å¼€æ–¹å¼","url":"/2017/06/07/2017-06-07-nssortdescriptorzheng-que-de-da-kai-fang-shi/","content":"\n\næ’åºæ˜¯åº”ç”¨å¸¸è§éœ€æ±‚ä¹‹ä¸€ï¼Œå¦‚ä½•æ­£ç¡®ä¼˜é›…çš„å®ç°ä¸€ä¸ªæ’åºï¼Œ`NSSortDescriptor`æˆ–è®¸æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚\n\n`NSSortDescriptor`ç”±3ä¸ªå‚æ•°ç»„æˆï¼š\n\n* **key**(é”®):å¯¹äºä¸€ä¸ªç»™å®šçš„é›†åˆï¼Œå°†å¯¹é›†åˆç§çš„æ¯ä¸ªå¯¹è±¡æŒ‰ç…§è¯¥é”®æ¥è¿›è¡Œæ’åº\n* **ascending**(å‡åº):æŒ‡å®šé›†åˆæŒ‰ç…§å‡åº(YES)è¿˜æ˜¯é™åº(NO)è¿›è¡Œæ’åº\n* **selector**(æ–¹æ³•å­):æ’åºæ—¶çš„æ¯”è¾ƒå‡½æ•°ï¼Œå½“å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºæ—¶ï¼Œåº”å½“åŠ å…¥`localizedStandardCompare:`é€‰æ‹©å™¨ï¼Œå®ƒå°†æ ¹æ®è¯­è¨€è§„åˆ™è¿›è¡Œæ’åº(ä¾‹å¦‚å¤§å°å†™ï¼Œå˜éŸ³ç¬¦å·ç­‰ç­‰çš„é¡ºåº)\n\n### å¦‚ä½•ä½¿ç”¨\n\n`NSSortDescriptor`ä¸»è¦é’ˆå¯¹å„ç§é›†åˆæ’åº,`NSArray`,`NSMutableArray`,`NSSet`,`NSOrderedSet`,`NSMutableOrderedSet`\n\nå¦‚æœé›†åˆæ˜¯å¯å˜çš„ï¼Œåˆ™å¯¹é›†åˆæœ¬èº«æ’åºä¾‹å¦‚\n\n* `NSMutableOrderedSet`çš„`sortUsingDescriptors:`\n* `NSMutableArray`çš„`sortUsingDescriptors:`\n\nå¦‚æœé›†åˆæ˜¯å¯å˜çš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ’å¥½åºçš„æ–°é›†åˆä¾‹å¦‚\n\n* `NSArray`çš„`sortedArrayUsingDescriptors:`\n* `NSSet`çš„`sortedArrayUsingDescriptors:`\n* `NSOrderedSet`çš„`sortedArrayUsingDescriptors:`\n\næ³¨æ„æ’åºæè¿°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ’åºå¯ä»¥æ”¯æŒæŒ‰ç…§å¤šä¸ªæè¿°ç»¼åˆæ’åºã€‚å¦‚æœå­˜åœ¨å¤šä¸ªè§„åˆ™å…ˆæ»¡è¶³å‰é¢çš„è§„åˆ™å†æ»¡è¶³åé¢çš„è§„åˆ™ã€‚ä¾‹å¦‚ä¸¤ä¸ªå…ƒç´ æŒ‰ç…§ç¬¬ä¸€å¤©è§„åˆ™é¡ºåºä¸€è‡´ï¼Œé‚£ä¹ˆå¦‚æœè¿˜å­˜åœ¨ç¬¬äºŒå¤©è§„åˆ™ï¼Œå®ƒä»¬å°†æŒ‰ç…§ç¬¬äºŒæ¡è§„åˆ™ç»§ç»­æ’åºï¼Œå¦‚æœå‰é¢çš„è§„åˆ™å·²ç»åŒºåˆ†å‡ºé¡ºåºåé¢çš„è§„åˆ™å°†å¤±æ•ˆã€‚\n\n### å®ä¾‹è¯´æ˜\n\nä¸ºäº†æ›´å¥½çš„æè¿°ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª`Person`å¯¹è±¡ï¼Œå®ƒæœ‰**NSString * **ç±»å‹çš„å§“å’Œåå±æ€§ï¼Œä»¥åŠä¸€ä¸ª`NSNumber`ç±»å‹çš„å¹´é¾„å±æ€§ã€‚\n\n```objc\n@interface Person : NSObject\n\n@property (nonatomic, copy  ) NSString *firstName;\n@property (nonatomic, copy  ) NSString *lastName;\n@property (nonatomic, strong) NSNumber *age;\n\n@end\n```\n\nç»™å®šä»¥ä¸‹æ•°æ®é›†ï¼š\n\n| index        | 0     | 1    |   2    |    3   |   4    |\n| ------------ |:-----:| -----| ------ | -------| ------ |\n| firstName    | Alice | Bod  | Charlie| Quentin|        |\n| lastName     | Smith | Jones| Smith  |        | Alberts|\n| age          | 24    |    27| 33     | 31     | 19     |\n\n\nä½¿ç”¨ä¸åŒçš„`NSSortDescriptor`çš„ä¸åŒç»„åˆæ¥å°†å®ƒä»¬æ’åºï¼š\n\n```objc\nNSArray *firstNames = @[@\"Alice\", @\"Bod\", @\"Charlie\", @\"Quentin\", @\"\"];\nNSArray *lastNames = @[@\"Smith\", @\"Jones\", @\"Smith\", @\"\", @\"Alberts\"];\nNSArray *ages = @[@24, @27, @33, @31, @12];\n\nNSMutableArray *people = [NSMutableArray array];\n[firstNames enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {\n    Person *person = [[Person alloc] init];\n    person.firstName = [firstNames objectAtIndex:idx];\n    person.lastName = [lastNames objectAtIndex:idx];\n    person.age = [ages objectAtIndex:idx];\n    \n    [people addObject:person];\n}];\n\nNSSortDescriptor *firstNameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@\"firstName\" ascending:YES selector:@selector(localizedStandardCompare:)];\nNSSortDescriptor *lastNameSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@\"lastName\" ascending:YES selector:@selector(localizedStandardCompare:)];\nNSSortDescriptor *ageSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@\"age\" ascending:NO];\n\nNSLog(@\"By age: %@\",[people sortedArrayUsingDescriptors:@[ageSortDescriptor]]);\n/*\n 2017-06-06 23:15:02.101 NSSortâ€‹Descriptor_Demo[9103:1255482] By age: (\n \"Charlie Smith 33\",\n \"Quentin  31\",\n \"Bod Jones 27\",\n \"Alice Smith 24\",\n \" Alberts 12\"\n )\n */\n\nNSLog(@\"By first name: %@\",[people sortedArrayUsingDescriptors:@[firstNameSortDescriptor]]);\n/*\n 2017-06-06 23:15:02.102 NSSortâ€‹Descriptor_Demo[9103:1255482] By first name: (\n \" Alberts 12\",\n \"Alice Smith 24\",\n \"Bod Jones 27\",\n \"Charlie Smith 33\",\n \"Quentin  31\"\n )\n*/\n \nNSLog(@\"By last name, first name: %@\",[people sortedArrayUsingDescriptors:@[lastNameSortDescriptor ,firstNameSortDescriptor]]);\n/*\n 2017-06-06 23:15:02.102 NSSortâ€‹Descriptor_Demo[9103:1255482] By last name, first name: (\n \"Quentin  31\",\n \" Alberts 12\",\n \"Bod Jones 27\",\n \"Alice Smith 24\",\n \"Charlie Smith 33\"\n )\n */\n \n```\n\n### æ³¨æ„äº‹é¡¹\n\n* ç©ºå­—ç¬¦æ˜¯æ’åœ¨æ™®é€šå­—ç¬¦ä¹‹å‰çš„\n* åŸºæœ¬æ•°æ®ç±»å‹éœ€è¦åŒ…è£…æˆ`NSNumber`å¯¹è±¡æ¥æ’åº\n* å­—ç¬¦ä¸²ç±»å‹æ’åºéœ€è¦åŠ å…¥`localizedStandardCompare:`é€‰æ‹©å™¨\n\n\nå‚è€ƒé“¾æ¥\n\n* [NSSortâ€‹Descriptor -- NSHipster](http://nshipster.cn/nssortdescriptor/)\n","tags":["æŠ€å·§"],"categories":["iOS"]},{"title":"ä»OCåˆ°Swiftä½ è¦çŸ¥é“çš„äº‹","url":"/2017/03/10/2017-03-10-cong-ocdao-swiftni-yao-zhi-dao-de-shi/","content":"\n\n### æšä¸¾\n\n#### æ¦‚è¿°\n\nSwiftä¸­æšä¸¾å’Œç»“æ„ä½“ä¹Ÿä¸Šå‡åˆ°å¯¹è±¡çš„ä½ç½®ï¼Œä½†æ˜¯å´ä¸å…·å¤‡å®Œæ•´çš„å¯¹è±¡ç‰¹å¾ï¼Œæ¯”å¦‚è¯´ä»–ä»¬ä¸èƒ½ç»§æ‰¿ã€‚\n\nåœ¨OCä¸­æšä¸¾æœ¬è´¨å…¶å®æ˜¯æ•´æ•°ç±»å‹ï¼Œåªæ˜¯ç»™ä»–ä»¬å–äº†ä¸€äº›æ„ä¹‰ç›´è§‚çš„åç§°è€Œå·²ï¼Œè€ŒSwiftå®Œå…¨æ‘†è„±ä»¥å‰çš„æ€æƒ³çš„æŸç¼šç¼–çš„æ›´è‡ªç”±ï¼Œæ‹¥æœ‰äº†ä»¥ä¸‹ç‰¹å¾ã€‚\n\n* ç±»å‹æ›´å¹¿ï¼Œä¸é™äºæ•´å½¢ï¼Œå¯ä»¥æ˜¯`Character`ï¼Œ`String`ï¼Œ`Float`ï¼Œ`Double`ç­‰ï¼Œè¿™äº›å«åšåŸå§‹å€¼\n* å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„é™æ€æˆå‘˜å˜é‡æ¥å‚¨å­˜ä¸€äº›å¸¸é‡\n* å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•å’Œå˜é‡\n* `case`æ¡ä»¶åŒ¹é…å¯ä»¥å®šä¹‰å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨`where`æ¥è¿‡æ»¤\n* é€šè¿‡`rawValue`å¯ä»¥æ‹¿åˆ°æšä¸¾çš„åŸå§‹å€¼\n\n####  åŸå§‹å€¼\n\nå¦‚æœæä¾›äº†åŸå§‹å€¼ï¼Œå°±å¯ä»¥åœ¨caseå£°æ˜æˆå‘˜æ—¶æä¾›é»˜è®¤å€¼ï¼Œè¿™æ ·è·ŸOCçš„æšä¸¾åœ¨ç»“æ„ä¸Šä¸€äº›ç±»ä¼¼\n\n```objc\nenum WeekDays : Int {\n    case Monday    = 0\n    case Tuesday   = 1\n    case Wednesday = 2\n    case Thursday  = 3\n    case Friday    = 4\n}\n```\n\n1.å£°æ˜ä¸€ä¸ªæšä¸¾å€¼\n\n```swift\nlet monday = WeekDays.Monday\n```\n\n2.è·å–åŸå§‹å€¼\n\n```swift\nlet rawVlaue = WeekDays.Tuesday.rawValue\n```\n\t\n3.é€šè¿‡åŸå§‹å€¼æ„é€ æŸä¸ªæšä¸¾å˜é‡\n\n```swift\nlet wednesday = WeekDays.init(rawValue: 2)\n```\n\t\n####  ç›¸å…³å€¼\n\nå’ŒCçš„è”åˆä½“æœ‰ç‚¹ç±»ä¼¼\n\n1.å£°æ˜\n\n```objc\nenum Figure {\n    case Rectangle(Int, Int)\n    case Circle(Int)\n}\n```\n\t\n2.ä½¿ç”¨\n\n```swift\nfunc printFigure(figure: Figure) {\n    switch figure {\n    case .Rectangle(let width, let height):\n        print(\"width:\\(width), height:\\(height)\")\n    case .Circle(let radius):\n        print(\"the circle's radius is:\\(radius)\")\n    }\n}\n\n\nvar figure = Figure.Rectangle(1024, 768)\nprintFigure(figure)\n\nfigure = .Circle(600)\nprintFigure(figure)\n```\t\n\t\n### OCä¸Swiftä¸­Optionsæšä¸¾çš„ä¸åŒå®šä¹‰\n\n##### OCç‰ˆæœ¬NS_OPTIONS\n\n```objc\ntypedef NS_OPTIONS(NSUInteger, NSVolumeEnumerationOptions) {\n    /* The mounted volume enumeration will skip hidden volumes.\n     */\n    NSVolumeEnumerationSkipHiddenVolumes = 1UL << 1,\n    \n    /* The mounted volume enumeration will produce file reference URLs rather than path-based URLs.\n     */\n    NSVolumeEnumerationProduceFileReferenceURLs = 1UL << 2\n}\n```\n##### Swiftç‰ˆæœ¬OPTIONS\n\n```swift\nstruct NSVolumeEnumerationOptions : OptionSetType {\n    init(rawValue rawValue: UInt)\n    static var SkipHiddenVolumes: NSVolumeEnumerationOptions { get }\n    static var ProduceFileReferenceURLs: NSVolumeEnumerationOptions { get }\n}\n```\n##### ä½¿ç”¨\n\n```swift\nUIView.animateWithDuration(0.3,\n                           delay: 0.0,\n                           options: [.CurveEaseIn, .AllowUserInteraction],\n                           animations: {},\n                           completion: nil)\n```\n\n### ç»“æ„ä½“\n\nSwiftä¸­åŠ å¼ºäº†ç»“æ„ä½“çš„èƒ½åŠ›ï¼Œå¯ä»¥å®šä¹‰å’Œä½¿ç”¨å±æ€§ï¼Œæ–¹æ³•ï¼Œä¸‹æ ‡ï¼Œæ„é€ å™¨ç­‰ï¼Œä½†æ˜¯ä¸èƒ½è¢«ç»§æ‰¿ï¼Œæ²¡æœ‰å¼ºåˆ¶ç±»å‹æŠ“æ¢ï¼Œä½¿ç”¨ææ„å™¨å’Œå¼•ç”¨è®¡æ•°ç­‰èƒ½åŠ›\n\né€šå¸¸ä½¿ç”¨ç»“æ„ä½“æ¥å……å½“æ•°æ®æ¨¡å‹ï¼Œå¸¸é‡å¯ä»¥ä½¿ç”¨é™æ€å…³é”®è¯`static`æ ‡ç¤º\n\n### å¾ªç¯å¼•ç”¨\n\n#### Swiftä¸­è§£å†³å¾ªç¯å¼ºå¼•ç”¨çš„æ–¹å¼\n\n* å¼±å¼•ç”¨ -- `weak`\n* æ— ä¸»å¼•ç”¨ -- `unowned`\n\n#### è§£å†³é—­åŒ…ä¸­å¾ªç¯å¼•ç”¨\n\n[unowned æ•è·å¯¹è±¡]æˆ–è€…\n[weak æ•è·å¯¹è±¡]\n\n\nä½¿ç”¨å®ä¾‹\n\n```objc\n\tclass Person {\n\t    let name: String\n\t    \n\t    // å†™æ³•1\n\t//    lazy var printName: () ->() = {\n\t//        [weak self] in if let strongSelf = self {\n\t//            print(\"The name is \\(strongSelf.name)\")\n\t//        }\n\t//    }\n\t    \n\t    // å†™æ³•2\n\t    lazy var printName: () ->() = {\n\t        [unowned self] in print(\"The name is \\(self.name)\")\n\t    }\n\t    \n\t    init(personName: String) {\n\t        name = personName\n\t    }\n\t    \n\t    deinit {\n\t        print(\"Person deinit \\(self.name)\")\n\t    }\n\t}\n\t\n\tvar xiaoMing: Person? = Person(personName: \"xiaoMing\")\n\txiaoMing!.printName\n\txiaoMing = nil\n```\n\n##### äºŒè€…çš„åŒºåˆ«\n\nå¦‚æœæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ self ä¸ä¼šè¢«é‡Šæ”¾çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ weak æ”¹ä¸º unownedï¼Œè¿™æ ·å°±ä¸å†éœ€è¦ strongSelf çš„åˆ¤æ–­ã€‚ä½†æ˜¯å¦‚æœåœ¨è¿‡ç¨‹ä¸­ self è¢«é‡Šæ”¾äº†è€Œ printName è¿™ä¸ªé—­åŒ…æ²¡æœ‰è¢«é‡Šæ”¾çš„è¯ (æ¯”å¦‚ ç”Ÿæˆ Person åï¼ŒæŸä¸ªå¤–éƒ¨å˜é‡æŒæœ‰äº† printNameï¼Œéšåè¿™ä¸ª Persone å¯¹è±¡è¢«é‡Šæ”¾äº†ï¼Œä½†æ˜¯ printName å·²ç„¶å­˜åœ¨å¹¶å¯èƒ½è¢«è°ƒç”¨)ï¼Œä½¿ç”¨ unowned å°†é€ æˆå´©æºƒã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦æ ¹æ®å®é™…çš„éœ€æ±‚æ¥å†³å®šæ˜¯ä½¿ç”¨ weak è¿˜æ˜¯ unownedã€‚\n\n\n### OCå’ŒSwiftä¸­å¸¸ç”¨æ•°æ®ç±»å‹\n\n#### å­—ç¬¦ä¸²\n\n* OCï¼š NSStringï¼Œ NSMutableString\n* Swiftï¼š String\n\nNSStringå’ŒStringçš„å…³ç³»ï¼šåœ¨Swiftä¸­ï¼Œä½¿ç”¨å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨Foundatioä¸­çš„NSStringå’ŒSwiftä¸­çš„Stringã€‚\n\nSwiftåœ¨åº•å±‚èƒ½å¤Ÿå°†Stringä¸NSStringæ— ç¼åœ°æ¡¥æ¥èµ·æ¥ï¼ŒStringå¯ä»¥è°ƒç”¨NSStringçš„å…¨éƒ¨APIã€‚\n\n#### æ•°ç»„ç±»\n\n* OCï¼š NSArray, NSMutableArray\n* Swiftï¼š Array [AnyObject]\n\nNSArrayå’ŒArrayçš„å…³ç³»ï¼šSwiftèƒ½åœ¨åº•å±‚å°†ä»–ä»¬è‡ªåŠ¨æ¡¥æ¥èµ·æ¥ï¼Œä¸€ä¸ªNSArrayå¯¹è±¡æ¡¥æ¥åçš„ç»“æœæ˜¯[AnyObject]ã€‚\n\n#### å­—å…¸\n\n* OCï¼š NSDictionaryï¼Œ NSMutableDictionary\n* Swiftï¼š Dictionary [Object: AnyObject]\n\nNSDictionaryå’ŒDictionaryçš„å…³ç³»ï¼š åº•å±‚è‡ªåŠ¨æ¡¥æ¥ï¼Œä¸€ä¸ªNSDictionaryå¯¹è±¡æ¡¥æ¥åçš„ç»“æœæ˜¯[Object: AnyObject]ã€‚\n\n### ç±»å‹è½¬æ¢\n\nç±»çš„è½¬æ¢ä½¿ç”¨ `as`\næ•°æ®ç±»å‹åŠ æ‹¬å· `Int()`\n\nOCä½¿ç”¨ `ï¼ˆæ–°çš„ç±»å‹ï¼‰åŸæ¥çš„å˜é‡`\n### ç±»å‹åˆ¤æ–­\n\n`is`å…³é”®è¯\n\nç›¸å½“äºOCçš„`isKindofClass:`\n\n### è¾…åŠ©å‘½ä»¤\n\n* \\#file --> \\__FILE__\n* \\#line --> \\__LINE__\n* \\#function --> \\__func__  æˆ–è€… \\__FUNCTION__\n\n### é€€å‡ºç¨‹åº\n* C: exitï¼ˆ0ï¼‰\n* Swift: fatalError() æˆ–è€… fatalError(message: String)\n\n### æ–­è¨€\n\n* OC: `NSAssert`\n* Swift: `assert()`\n","tags":["æŠ€å·§"],"categories":["Swift"]},{"title":"Layer Animations Tips","url":"/2017/03/10/2017-03-10-layer-animations-tips/","content":"\n### beginTimeçš„å¦™ç”¨\nåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ï¼Œæ·»åŠ åˆ°ä¸åŒçš„å›¾å±‚ä¸Šï¼Œå¯ä»¥å®ç°å¤ç”¨ï¼Œé€šè¿‡è°ƒèŠ‚`beginTime`å¯ä»¥è°ƒèŠ‚åŠ¨ç”»å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ°´å¹³ä½ç§»åŠ¨ç”»ï¼Œæ·»åŠ åˆ°ä¸åŒçš„å›¾å±‚å¯¹è±¡ä¸Šï¼Œå¹¶ä¸”è®©ä»–ä»¬è½®æµæ‰§è¡Œã€‚\n\n```swift\nlet flyRight = CABasicAnimation(keyPath: \"position.x\")\nflyRight.fromValue = 0\nflyRight.toValue = 100\nflyRight.duration = 0.5\nflyRight.fillMode = kCAFillModeBoth\n\nfirstView.layer.addAnimation(flyRight, forKey: nil)\n\n// make secondView perform animation on delay 0.3 seconds.\nflyRight.beginTime = CACurrentMediaTime() + 0.3\nsecondView.layer.addAnimation(flyRight, forKey: nil)\nsecondView.layer.position.x = 100\n\n// make thirdView perform animation on delay 0.4 seconds.\nflyRight.beginTime = CACurrentMediaTime() + 0.4\nthirdView.layer.addAnimation(flyRight, forKey: nil)\nthirdView.layer.position.x = 100\n```\n\nåŠ¨ç”»çš„`beginTime`å±æ€§å¯ä»¥è®¾ç½®å°†è¦æ‰§è¡Œçš„åŠ¨ç”»çš„ç»å¯¹å¼€å§‹æ—¶é—´ï¼Œé€šè¿‡`CACurrentMediaTime()`å‡½æ•°è·å–å½“å‰æ—¶é—´å†åŠ ä¸Šä½ æƒ³è¦å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´çš„ï¼Œå•ä½ç§’ã€‚\n\n\n### åŠ¨ç”»ä»£ç†\n\nåŠ¨ç”»ä»£ç†å¯ä»¥ç›‘å¬åŠ¨ç”»çš„è¿›è¡ŒçŠ¶æ€ï¼Œåœ¨åŠ¨ç”»å¼€å§‹å’Œç»“æŸçš„æ—¶å€™å›é€šçŸ¥ä»£ç†.\nä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š\n\n```swift\nfunc animationDidStart(anim: CAAnimation)\nfunc animationDidStop(anim: CAAnimation, finished flag: Bool)\n```\n\n### CAAnimation\n\n`CAAnimation`å’Œå®ƒçš„å­ç±»éµå¾ªKVOï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å¯ä»¥æŠŠå®ƒä»¬å½“æˆå­—å…¸ä¸€æ ·ä½¿ç”¨æ¥æ·»åŠ æ–°çš„æ¥å£åœ¨è¿è¡Œæ—¶ã€‚\n\nä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨è¿™ç§æœºåˆ¶æ¥ç»™æŸä¸ªåŠ¨ç”»æŒ‡å®šä¸€ä¸ªåå­—ï¼Œä»¥ä¾¿ä½ èƒ½å¤ŸæŠŠå®ƒå’Œå…¶å®ƒåŠ¨ç”»åŒºåˆ†å¼€ã€‚\n\n```swift\nflyRight.setValue(\"somename\", forKey: \"name\")\n```\n\n### CASpringAnimation\n\n|Property        | Default Value|\n|----------------|--------------|\n|damping         |10.0          |\n|mass            |1.0           |\n|stiffness       |100.0         |\n|initialVelocity |0.0           |\n\nå‚æ•°è¯´æ˜ï¼š\n\n* `damping` - åº”ç”¨ç»™ç³»ç»Ÿçš„é˜»å°¼\n* `mass` - åœ¨ç³»ç»Ÿä¸­é‡ç‰©çš„è´¨é‡\n* `stiffness` - é™„åŠ åœ¨é‡ç‰©ä¸Šçš„å¼¹ç°§çš„ç¡¬åº¦\n* `initialVelocity` - é™„åŠ åœ¨é‡ç‰©ä¸Šçš„åˆå§‹é€Ÿåº¦\n\n\nä½¿ç”¨å®ä¾‹ï¼š\n\n```swift\nlet jump = CASpringAnimation(keyPath: \"position.y\")\njump.initialVelocity = 100.0\njump.mass = 10.0\njump.stiffness = 1500.0\njump.damping = 50.0\n\njump.fromValue = textField.layer.position.y + 1.0\njump.toValue = textField.layer.position.y\njump.duration = jump.settlingDuration\ntextField.layer.addAnimation(jump, forKey: nil)\n```\n\nå¤‡æ³¨ï¼š\næ­¤åŠ¨ç”»çš„`duration`å‚æ•°å¯ä»¥é€šè¿‡å‰é¢å‡ ä¸ªå‚æ•°è‡ªåŠ¨è®¡ç®—å¾—å‡º\n\n\tjump.duration = jump.settlingDuration\n\n### ä½¿ç”¨CAGradientLayerçš„locationså®ç°æ»‘åŠ¨è§£é”\n\nå¯¹`CAGradientLayer`çš„`locations`å±æ€§åšåŠ¨ç”»è½»æ¾çš„å®ç°iPhoneè‡ªå¸¦çš„æ»‘åŠ¨è§£é”æ•ˆæœ\n\n a.åˆ›å»ºä¸€ä¸ªæ¸å˜å›¾å±‚\n\n```swift\nlet gradientLayer: CAGradientLayer = {\n    let gradientLayer = CAGradientLayer()\n    \n    // Configure the gradient here\n    \n    gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5)\n    gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5)\n    \n    let colors = [\n        UIColor.blackColor().CGColor,\n        UIColor.whiteColor().CGColor,\n        UIColor.blackColor().CGColor\n    ]\n    gradientLayer.colors = colors\n    \n    let locations = [\n        0.25,\n        0.5,\n        0.75\n    ]\n    gradientLayer.locations = locations\n    \n    return gradientLayer\n}()\n```\n\n\nb.åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ ·å¼å­—å…¸\n\n```swift\nlet textAttributes : [String: AnyObject] = {\n    let style = NSMutableParagraphStyle()\n    style.alignment = .Center\n    \n    return [\n        NSFontAttributeName:UIFont(name: \"HelveticaNeue-Thin\", size: 28.0)!,\n        NSParagraphStyleAttributeName:style\n    ]\n}()\n```\n\nc.å½“è®¾ç½®æ–‡æœ¬æ—¶ç»˜åˆ¶å†…å®¹ï¼Œæ·»åŠ `@IBInspectable`æ–¹ä¾¿çœ‹å®æ—¶æ•ˆæœ\n\n```swift\n@IBInspectable var text: String! {\ndidSet {\n    setNeedsDisplay()\n    \n    UIGraphicsBeginImageContextWithOptions(frame.size, false, 0)\n    text.drawInRect(bounds, withAttributes: textAttributes)\n    let image = UIGraphicsGetImageFromCurrentImageContext()\n    UIGraphicsEndImageContext()\n    \n    let maskLayer = CALayer()\n    maskLayer.backgroundColor = UIColor.clearColor().CGColor\n    maskLayer.frame = CGRectOffset(bounds, bounds.size.width, 0)\n    maskLayer.contents = image.CGImage\n    \n    gradientLayer.mask = maskLayer\n    }\n}\n```\n\nd.é‡æ–°å¸ƒå±€`gradientLayer`\n\n```swift\noverride func layoutSubviews() {\n    gradientLayer.frame = CGRect(\n        x: -bounds.size.width,\n        y: bounds.origin.y,\n        width: 3 * bounds.size.width,\n        height: bounds.size.height)\n}\n```\n\ne.æ·»åŠ åˆ°windowæ—¶å‘æ¸å˜å±‚æ·»åŠ åŠ¨ç”»\n\n```swift\noverride func didMoveToWindow() {\n    super.didMoveToWindow()\n    \n    layer.addSublayer(gradientLayer)\n    \n    let gradientAnimation = CABasicAnimation(keyPath: \"locations\")\n    gradientAnimation.fromValue = [0.0, 0.0, 0.25]\n    gradientAnimation.toValue = [0.75, 1.0, 1.0]\n    gradientAnimation.duration = 3.0\n    gradientAnimation.repeatCount = Float.infinity\n    \n    gradientLayer.addAnimation(gradientAnimation, forKey: nil)\n}\n```\n","tags":["æŠ€å·§"],"categories":["iOS"]},{"title":"VFLæ·±å…¥æµ…å‡º","url":"/2017/03/02/2017-03-02-vflshen-ru-qian-chu/","content":"\n\n### ä½¿ç”¨åœºæ™¯\n\nç»™è§†å›¾å¯¹è±¡å¿«é€Ÿåˆ›å»ºçº¦æŸï¼Œå¯ä»¥ä½¿ç”¨æ¯”è¾ƒå†·é—¨çš„VFL(Visual Format Language),æœ¬è´¨æ˜¯æ˜¯åŸºäºè‡ªåŠ¨å¸ƒå±€(AutoLayout)ã€‚\n\n### è§£å†³çš„é—®é¢˜\n\nä»¥ä¸€ç§ç›´è§‚çš„æ–¹å¼ï¼Œä¸ºè§†å›¾åˆ›å»ºçº¦æŸ\n\n### æ€æ ·è§£å†³\n\næ ¸å¿ƒæ–¹æ³•ï¼š\n\n```objc\n+ (NSArray<__kindof NSLayoutConstraint *> *)constraintsWithVisualFormat:(NSString *)format\n                                                                options:(NSLayoutFormatOptions)opts\n                                                                metrics:(nullable NSDictionary<NSString *,id> *)metrics\n                                                                  views:(NSDictionary<NSString *, id> *)views;\n```\n\nExample:\n\n```objc\n[NSLayoutConstraint constraintsWithVisualFormat:@\"|-[button1]-[button2]-[textField(>=20)]-|\"\n                                        options:0\n                                        metrics:metrics\n                                          views:views]\n```\n\nå‚æ•°ï¼š\n\n* format:æŒ‡å®šçº¦æŸçš„æ ¼å¼ã€‚æ›´å¤šä¿¡æ¯ï¼Œåœ¨[Auto Layout Guide](file:///Users/wangruofeng/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.iOS.docset/Contents/Resources/Documents/documentation/UserExperience/Conceptual/AutolayoutPG/index.html#//apple_ref/doc/uid/TP40010853)æŸ¥çœ‹[Visual Format Language](file:///Users/wangruofeng/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.iOS.docset/Contents/Resources/Documents/documentation/UserExperience/Conceptual/AutolayoutPG/LayoutUsingStackViews.html#//apple_ref/doc/uid/TP40010853-CH3)ã€‚\n* opts:æè¿°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„å¸ƒå±€å±æ€§å’Œæ–¹å‘\n* metrics:å°†å‡ºç°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å¸¸é‡å­—å…¸ã€‚å­—å…¸çš„Keyså¿…é¡»æ˜¯åœ¨å‡ºç°åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯¹åº”çš„valueså¿…é¡»æ˜¯NSNumberå¯¹è±¡ã€‚\n* views:å‡ºç°çš„è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—å…¸viewï¼Œæ‰€æœ‰çš„Keyså¿…é¡»æ˜¯ä½¿ç”¨åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯¹åº”çš„valueså¿…é¡»æ˜¯viewå¯¹è±¡ã€‚\n\nè¿”å›å€¼ï¼š\n\nä¸€ä¸ªçº¦æŸç»„åˆçš„æ•°ç»„ï¼Œåƒè§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²æè¿°çš„ä¸€æ ·è¡¨è¿°äº†åœ¨æä¾›çš„è§†å›¾å’Œå®ƒä»¬çš„çˆ¶è§†å›¾ä¹‹é—´çš„å…³ç³»ã€‚æ‰€æœ‰çš„çº¦æŸä»¥åœ¨è§†è§‰æ ¼å¼åŒ–å­—ç¬¦ä¸²è¢«æŒ‡å®šçš„çº¦æŸé¡ºåºä¸€è‡´ã€‚\n\n\n### æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§\n\néœ€è¦å¯¹VFLç†è§£æ¯”è¾ƒå…¨é¢å’Œæ·±å…¥ï¼Œæœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œç»´æŠ¤èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œä½†æ˜¯å¦‚æœç†è§£çš„æ¯”è¾ƒæ·±åˆ»ï¼Œå¯¹äºç®€å•çš„å¸ƒå±€æ•ˆç‡éå¸¸é«˜ï¼Œæ¯”ç›´æ¥åˆ›å»ºçº¦æŸè¦ç›´è§‚ã€‚\n\n\n### æœ€ä½³å®è·µ\n\n* æ¯æ¡çº¦æŸæ ¼å¼å­—ç¬¦ä¸²åˆ†æ°´å¹³(`H`ï¼Œå¯çœç•¥)å’Œå‚ç›´æ–¹å‘(`V`)ã€‚\n* `|` ä»£è¡¨çˆ¶è§†å›¾ã€‚\n* `-` ä»£è¡¨æ ‡å‡†é—´è·ï¼Œä¸¤ä¸ªå­è§†å›¾ç›´æ¥çš„å€¼æ˜¯8ï¼Œä¸çˆ¶è§†å›¾ä¹‹é—´çš„å€¼æ˜¯16ã€‚\n* `[view]` æ¯ä¸ªè§†å›¾å¿…é¡»ç”¨[]åŒ…è£¹èµ·æ¥ï¼Œå¦åˆ™è¯­æ³•é”™è¯¯ã€‚\n* `[view(>=44)]` å¯ä»¥ä¸ºæ¯ä¸ªè§†å›¾è®¾ç½®ä¸€äº›å±æ€§æˆ–è€…å…³ç³»ï¼Œå†™ä¸€ä¸ªç´§è·Ÿviewåçš„æ‹¬å·é›†åˆï¼Œæ”¯æŒå®½é«˜ï¼Œä¼˜å…ˆçº§ï¼Œå’Œå…¶å®ƒè§†å›¾ä¹‹é—´çš„å…³ç³»ã€‚\n* `[view@20]` å¯ä»¥è®¾ç½®è§†å›¾çš„çº¦æŸçš„ä¼˜å…ˆçº§ï¼Œä»¥@å¼€å¤´ï¼Œå–å€¼èŒƒå›´(0 1000]ã€‚\n* `[view1]-20-[view2]` å¯ä»¥æŒ‡å®šviewä¹‹é—´çš„æ°´å¹³æˆ–è€…å‚ç›´é—´è·ï¼Œå†™åœ¨ä¸€å¯¹ `-` å³å¯ã€‚\n* `[view1][view2]` å¦‚æœ `-` çœç•¥åˆ™ä»–ä»¬ä¹‹é—´çš„è·ç¦»ä¸º0ã€‚\n* `[flexibleButton(>=70,<=100)]` å¤šä¸ªæ¡ä»¶ä¹‹é—´ç”¨`,`è¿æ¥å¹¶ä¸”ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚\n\n### å…¶å®ƒæ–¹æ¡ˆ\n\n1. ä½¿ç”¨`NSLayoutConstraint`çš„ç±»æ–¹æ³•åˆ›å»º(iOS96.0åŠä»¥ä¸Šå¯ç”¨)\n\n```objc\n+ (instancetype)constraintWithItem:(id)view1\n                        attribute:(NSLayoutAttribute)attr1\n                        relatedBy:(NSLayoutRelation)relation\n                           toItem:(nullable id)view2\n                        attribute:(NSLayoutAttribute)attr2\n                       multiplier:(CGFloat)multiplier\n                         constant:(CGFloat)c;\n```\n2. ä½¿ç”¨`NSLayoutAnchor`çš„å·¥å‚æ–¹æ³•åˆ›å»º(iOS9.0åŠä»¥ä¸Šå¯ç”¨)\n\n```objc\n- (NSLayoutConstraint *)constraintEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor;\n- (NSLayoutConstraint *)constraintGreaterThanOrEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor;\n- (NSLayoutConstraint *)constraintLessThanOrEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor;\n\n- (NSLayoutConstraint *)constraintEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor constant:(CGFloat)c;\n- (NSLayoutConstraint *)constraintGreaterThanOrEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor constant:(CGFloat)c;\n- (NSLayoutConstraint *)constraintLessThanOrEqualToAnchor:(NSLayoutAnchor<AnchorType> *)anchor constant:(CGFloat)c;\n```\n\n### ä½¿ç”¨æ³¨æ„äº‹é¡¹\n\n* ä½¿ç”¨æ—¶ï¼Œå¿…é¡»æŠŠviewçš„`translatesAutoresizingMaskIntoConstraints`å±æ€§è®¾ç½®ä¸º`NO`ï¼Œå¦åˆ™çº¦æŸå¯èƒ½æ›´é¢„æœŸä¸ä¸€è‡´ã€‚è¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™çš„é—®é¢˜ï¼Œç”±äºåœ¨`AutoLayout`è¯ç”Ÿä»¥å‰ä¸€ç›´ä½¿ç”¨`Autoresizing`æ¥æ§åˆ¶å¸ƒå±€.\n\n* é‡å†™`updateConstraints()`æ–¹æ³•ï¼Œåœ¨é‡Œé¢è®¡ç®—çº¦æŸï¼Œç„¶åè°ƒç”¨`setNeedsUpdateConstraints()`è§¦å‘æ›´æ–°çº¦æŸã€‚\n\n* ç³»ç»Ÿè®¡ç®—å¸ƒå±€é¡ºåº: \n\t* updateConstraints()\n\t* layoutSubviews()\n\t* drawRect(_:)\n\nç³»ç»Ÿè®¡ç®—å¸ƒå±€é¡ºåºå‚è€ƒ\n\n![LayoutCycle](https://koenig-media.raywenderlich.com/uploads/2016/05/LayoutCycle-1.png)\n\nå…·ä½“ä½¿ç”¨ç¤ºä¾‹ï¼ŒæŸ¥çœ‹ä¸‹é¢çš„Demoï¼Œæ ·å“å·¥ç¨‹\n\n----\nDemoåœ°å€ï¼š[VFLDemo](https://github.com/wangruofeng/VFLDemo)\n\nå‚è€ƒé“¾æ¥\n\n* [coding-auto-layout](https://www.raywenderlich.com/125718/coding-auto-layout)\n* [Visual Format Language](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/AutolayoutPG/VisualFormatLanguage.html#//apple_ref/doc/uid/TP40010853-CH27-SW1)\n","tags":["æŠ€å·§"],"categories":["iOS"]},{"title":"UIActivityâ€‹Viewâ€‹Controller è¯¦è§£","url":"/2017/02/23/2017-02-23-uiactivityviewcontroller-xiang-jie/","content":"\n\n> ç¿»è¯‘è‡ªNSHipsterçš„[UIActivityâ€‹Viewâ€‹Controller](http://nshipster.com/uiactivityviewcontroller/)\n\n\nä¸€ç›´éå¸¸å¥½å¥‡ä»£ç å’Œæ•°æ®ä¹‹é—´çš„è”ç³»ã€‚\n\næŸäº›ç¼–ç¨‹è¯­è¨€ï¼Œä¾‹å¦‚[Lisp](http://en.wikipedia.org/wiki/Lisp_programming_language)ï¼Œ[Io](http://en.wikipedia.org/wiki/Io_%28programming_language%29)å’Œ[Mathematica](http://en.wikipedia.org/wiki/Mathematica)ä»–ä»¬æ˜¯[åŒå‹æ€§](http://en.wikipedia.org/wiki/Homoiconicity)(ä»£ç å³æ•°æ®)ï¼Œé‚£å°±æ„å‘³ç€å®ƒä»¬çš„ä»£ç æ˜¯åŸå§‹æ•°æ®çš„å‘ˆç°å½¢å¼ï¼Œå®ƒä»¬æœ¬èº«åœ¨ä»£ç ä¸­ä¹Ÿèƒ½å¤Ÿè¢«ç»´æŠ¤ã€‚ç„¶è€Œå¤§å¤šæ•°å…¶å®ƒè¯­è¨€ï¼ŒåŒ…æ‹¬Objective-Cï¼Œç„¶è€Œï¼Œåœ¨è¿™ä¸¤è€…ä¹‹é—´æœ‰ä¸¥æ ¼çš„è¾¹ç•Œï¼Œé¿å…eval()å’Œå…¶å®ƒæœ‰åŠ¨æ€å¼•å¯¼åŠ è½½çš„æ½œåœ¨å±é™©æ–¹æ³•ã€‚\n\nå½“æ•°æ®å‡ºç°å¤ªå¤§å’Œå‘ˆç°ä¸€äº›ä¸œè¥¿è¿‡äºç¬¨é‡é™¤äº†ä½¿ç”¨äºŒè¿›åˆ¶æµçš„é—®é¢˜æ—¶ä»£ç å’Œæ•°æ®ä¹‹é—´çš„ä¸å®‰è¢«æ¨å‘åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„é«˜åº¦ã€‚è‡ªä»ç¬¬ä¸€ä¸ªæ“ä½œç³»ç»Ÿå‡ºç°å¼€å§‹ï¼Œæ€æ ·ç¼–ç ï¼Œè§£ç ï¼Œè§£é‡ŠäºŒè¿›åˆ¶ä»£è¡¨çš„å›¾ç‰‡ï¼Œæ–‡æ¡£ï¼Œå’Œåª’ä½“ä¸€ç›´æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚\n\nåœ¨OS Xä¸Šçš„æ ¸å¿ƒæœåŠ¡æ¡†æ¶å’ŒiOSä¸Šæä¾›æ ‡è¯†åŠŸèƒ½å’Œé€šè¿‡æ–‡ä»¶æ‹“å±•å’Œ[MIMIE type](http://en.wikipedia.org/wiki/Internet_media_type)--æ ¹æ®[é€šç”¨æ•°æ®æ ‡ç¤º](http://en.wikipedia.org/wiki/Uniform_Type_Identifier)ï¼Œç»™æ•°æ®ç±»å‹çš„åˆ†ç±»æ ¸å¿ƒæœåŠ¡æ¡†æ¶ã€‚UTIsæä¾›äº†ä¸€ç§å¯æ‹“å±•ï¼Œé˜¶æ¢¯åˆ†å±‚ç³»ç»Ÿï¼Œè¿™ç»™å¼€å‘è€…åœ¨å¤„ç†å¤§é‡ä¸åŒçš„æ–‡ä»¶ç±»å‹æä¾›äº†å·¨å¤§çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªRubyçš„æºæ–‡ä»¶(.rb)è¢«å½’ç±»ä¸ºï¼šRuby Source Code > Source Code > Text > Content > Dataï¼›ä¸€ä¸ªQuickTimeç”µå½±æ–‡ä»¶(.mov)è¢«å½’ç±»ä¸º Video > Movie > Audiovisual Content > Content > Dataã€‚\n\nUTIsè¡¨ç°å¾—éå¸¸å¥½åœ¨æ¡Œé¢çš„æŠ½è±¡æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ç„¶è€Œï¼Œåœ¨ä¸€ä¸ªç§»åŠ¨èŒƒä¾‹ä¸­è¿™å°±å´©æºƒå¾—å¾ˆå¿«ï¼Œå› ä¸ºæ–‡ä»¶å’Œç›®å½•æ˜¯å¯¹ç”¨æˆ·éšè—çš„ã€‚è¿˜æœ‰ï¼Œéšç€äº‘æœåŠ¡å’Œç¤¾äº¤åª’ä½“æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²åœ¨è¿œç¨‹å®ä½“é€šè¿‡æœ¬åœ°æ–‡ä»¶ã€‚å› æ­¤ï¼ŒUTIså’ŒURLsä¹‹é—´å¾ˆç´§å¼ ã€‚\n\næˆ‘ä»¬éå¸¸æ¸…æ¥šæˆ‘ä»¬éœ€è¦ä¸€äº›åˆ«çš„ä¸œè¥¿ã€‚`UIActivityViewController`èƒ½å¦æˆä¸ºæˆ‘ä»¬æ­£åœ¨æ€¥åˆ‡å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆå‘¢?\n\n----\n\n`UIActivityViewController`ï¼Œåœ¨iOS6ä¸­è¢«å¼•å…¥ï¼Œæä¾›äº†ä¸€å¥—åˆ†äº«å’Œåœ¨åº”ç”¨å†…æ‰§è¡Œæ•°æ®æ“ä½œçš„ç»Ÿä¸€æœåŠ¡ç•Œé¢ã€‚\n\nè€ƒè™‘åˆ°å¯æ“ä½œçš„æ•°æ®é›†åˆï¼Œä¸€ä¸ª`UIActivityViewController`å®ä¾‹é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ›å»ºï¼š\n\n```objc\nNSString *string = ...;\nNSURL *URL = ...;\n\nUIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[string, URL]\n                                    applicationActivities:nil];\n[navigationController presentViewController:activityViewController\n                                   animated:YES\n                                 completion:^{\n  // ...\n}];\n```\n\nè¿™å°†åœ¨å±å¹•åº•éƒ¨å‘ˆç°å¦‚ä¸‹ç•Œé¢ï¼š\n\n![activity sharing img](http://nshipster.s3.amazonaws.com/uiactivityviewcontroller.png)\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œ`UIActivityViewController`å°†ä¼šæ˜¾ç¤ºæ‰€æœ‰æ”¯æŒçš„å¯ç”¨æœåŠ¡ç±»å‹ï¼Œä½†æ˜¯æŸäº›æ´»åŠ¨ç±»å‹ä¹Ÿå¯ä»¥æ’é™¤ï¼š\n\n```objc\nactivityViewController.excludedActivityTypes = @[UIActivityTypePostToFacebook];\n```\n\næ´»åŠ¨ç±»å‹è¢«åˆ’åˆ†â€œåŠ¨ä½œâ€(action)å’Œâ€œåˆ†äº«â€(share)ç±»å‹ï¼š\n\n### UIActivityCategoryAction\n\n* UIActivityTypePrint\n* UIActivityTypeCopyToPasteboard\n* UIActivityTypeAssignToContact\n* UIActivityTypeSaveToCameraRoll\n* UIActivityTypeAddToReadingList\n* UIActivityTypeAirDrop\n\n### UIActivityCategoryShare\n\n* UIActivityTypeMessage\n* UIActivityTypeMail\n* UIActivityTypePostToFacebook\n* UIActivityTypePostToTwitter\n* UIActivityTypePostToFlickr\n* UIActivityTypePostToVimeo\n* UIActivityTypePostToTencentWeibo\n* UIActivityTypePostToWeibo\n\næ¯ç§æ´»åŠ¨ç±»å‹ï¼Œæ”¯æŒä¸€ç³»åˆ—ä¸åŒçš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª`Tweet`å¯èƒ½ç”±ä¸€ä¸ª`NSString`å¹¶é™„å¸¦ä¸€ä¸ª`image`å’Œæˆ–è€…`URL`ã€‚\n\n\nä¸åŒæ´»åŠ¨ç±»å‹æ”¯æŒçš„æ•°æ®ç±»å‹\n\n| Activity Type         | String        | Attributed String | URL  | Data | Image | Asset | Other |\n| --------------------- |:-------------:| ----------------- | ---- | ---- | ----  | ----- | ----- |\n| Post To Facebook      | âœ“             | âœ“                 |âœ“     |      |âœ“      |       |       |\n| Post To Twitter       | âœ“             | âœ“                 |âœ“     |      |âœ“      |       |       |\n| Post To Weibo         | âœ“             | âœ“                 |âœ“     |      |âœ“      |âœ“      |       |\n| Message               | âœ“             | âœ“                 |âœ“*    |âœ“*    |       |âœ“      | sms:// NSURL|\n| Mail                  | âœ“+            | âœ“+                |âœ“+    |      |       |       |       |\n| Print                 |               |                   |      |âœ“+    |âœ“+     |       |UIPrintPageRenderer, UIPrintFormatter, & UIPrintInfo|\n| Copy To Pasteboard    | âœ“             |                   |âœ“     |      |âœ“      |       |UIColor, NSDictionary |\n| Assign To Contact     |               |                   |      |      |âœ“      |       |       |\n| Save To Camera Roll   |               |                   |âœ“     |      |âœ“      |       |       |\n| Add To Reading List   |               |                   |âœ“     |      |       |       |       |\n| Post To Flickr        |               |                   |âœ“     |âœ“     |âœ“      |âœ“      |       |\n| Post To Vimeo         | âœ“             | âœ“                 |âœ“     |âœ“     |       |âœ“      |       |\n| Post To Tencent Weibo | âœ“             | âœ“                 |âœ“     |      |âœ“      |âœ“      |       |\n| AirDrop               | âœ“             | âœ“                 |âœ“     |      |âœ“      |âœ“      |       |\n\n\n### UIActivityItemSource & UIActivityItemProvider\n\nå½“å¿…è¦æ—¶å’Œä¸€ä¸ªç²˜è´´æ¿é¡¹ç›®èƒ½ç”¨æ¥æä¾›çš„æ•°æ®ç±»ä¼¼ï¼Œä¸ºäº†é¿å…è¿‡åº¦çš„å†…æµ‹å¼€é”€æˆ–å¤„ç†æ—¶é—´ï¼Œæ´»åŠ¨ç±»å‹å¯ä»¥æ˜¯ä¸€ç§è‡ªå®šä¹‰ç±»å‹ã€‚\n\nä»»ä½•éµå¾ª`<UIActivityItemSource>`åè®®çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å†…æ„`UIActivityItemProvider`ç±»ï¼Œå¯ä»¥ç”¨æ¥åŠ¨æ€æä¾›ä¸åŒç±»å‹çš„æ•°æ®æ ¹æ®æ´»åŠ¨çš„ç±»å‹ã€‚\n\n#### UIActivityItemSource\n\nè·å–æ•°æ®é¡¹ç›®ï¼š\n\n* activityViewControllerPlaceholderItem:\n* activityViewController:itemForActivityType:\n\næä¾›æ•°æ®é¡¹ç›®ä¿¡æ¯ï¼š\n\n* activityViewController:subjectForActivityType:\n* activityViewController:dataTypeIdentifierForActivityType:\n* activityViewController:thumbnailImageForActivityType:suggestedSize:\n\n\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ ¹æ®æ˜¯å¦åˆ†äº«åˆ°FaceBookæˆ–è€…Twitteræ¥å±•ç¤ºè‡ªå®šä¹‰ä¸€æ¡æ¶ˆæ¯æ˜¯æ€æ ·ä½¿ç”¨çš„:\n\n```objc\n- (id)activityViewController:(UIActivityViewController *)activityViewController\n         itemForActivityType:(NSString *)activityType\n{\n    if ([activityType isEqualToString:UIActivityTypePostToFacebook]) {\n        return NSLocalizedString(@\"Like this!\");\n    } else if ([activityType isEqualToString:UIActivityTypePostToTwitter]) {\n        return NSLocalizedString(@\"Retweet this!\");\n    } else {\n        return nil;\n    }\n}\n```\n\n### åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰UIActivity\n\né™¤äº†ä¸Šè¿°çš„ç³»ç»Ÿæä¾›çš„æ´»åŠ¨ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„æ´»åŠ¨ã€‚\n\nä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ´»åŠ¨ç±»å‹ï¼Œå®ƒèƒ½ä½¿ä¸€ä¸ªURLä¸­çš„å›¾ç‰‡æ·»åŠ ä¸Šèƒ¡é¡»é€šè¿‡ä½¿ç”¨[mustache.me](http://mustache.me/)ã€‚\n\nBefore:\n\n![Before](http://nshipster.s3.amazonaws.com/jony-ive-unstache.png)\n\nAfter:\n\n![After](http://nshipster.s3.amazonaws.com/jony-ive-mustache.png)\n\né¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª[åå‘åŸŸåè§£æçš„æ ‡è¯†ç¬¦](http://en.wikipedia.org/wiki/Reverse_domain_name_notation)ç»™æ´»åŠ¨ç±»å‹ï¼š\n\n```objc\nstatic NSString * const HIPMustachifyActivityType = @\"com.nshipster.activity.Mustachify\";\n```\n\nç„¶åæŒ‡å®šå®ƒçš„åˆ†ç±»ä¸º`UIActivityCategoryAction`å¹¶ä¸”æä¾›ä¸€ä¸ªæœ¬åœ°åŒ–æ ‡é¢˜å’ŒiOSç‰ˆæœ¬ç›¸åº”çš„å›¾ç‰‡ï¼š\n\n```objc\n#pragma mark - UIActivity\n\n+ (UIActivityCategory)activityCategory {\n    return UIActivityCategoryAction;\n}\n\n- (NSString *)activityType {\n    return HIPMustachifyActivityType;\n}\n\n- (NSString *)activityTitle {\n    return NSLocalizedString(@\"Mustachify\", nil);\n}\n\n- (UIImage *)activityImage {\n    if (NSFoundationVersionNumber > NSFoundationVersionNumber_iOS_6_1) {\n        return [UIImage imageNamed:@\"MustachifyUIActivity7\"];\n    } else {\n        return [UIImage imageNamed:@\"MustachifyUIActivity\"];\n    }\n}\n```\n\nä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œ`HIPMatchingURLsInActivityItems`ï¼Œé€šè¿‡å®ƒè¿”å›ä¸€ä¸ªæ”¯æŒç±»å‹çš„å›¾ç‰‡URLçš„æ•°ç»„ã€‚\n\n```objc\nstatic NSArray * HIPMatchingURLsInActivityItems(NSArray *activityItems) {\n    return [activityItems filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:\n    ^BOOL(id item, __unused NSDictionary *bindings) {\n        if ([item isKindOfClass:[NSURL class]] &&\n            ![(NSURL *)item isFileURL]) {\n            return [[(NSURL *)item pathExtension] caseInsensitiveCompare:@\"jpg\"] == NSOrderedSame ||\n            [[(NSURL *)item pathExtension] caseInsensitiveCompare:@\"png\"] == NSOrderedSame;\n        }\n\n        return NO;\n    }]];\n}\n```\n\nè¿™ä¸ªå‡½æ•°è®©åè¢«ç”¨åœ¨`-canPerformWithActivityItems:`å’Œ`prepareWithActivityItems:`æ¥è·å–å°èƒ¡å­çš„ç¬¬ä¸€å¼ PNGæˆ–JPEGå›¾ç‰‡çš„URLï¼Œå‡å¦‚æœ‰çš„è¯ã€‚\n\n```objc\n- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems {\n    return [HIPMatchingURLsInActivityItems(activityItems) count] > 0;\n}\n\n- (void)prepareWithActivityItems:(NSArray *)activityItems {\n    static NSString * const HIPMustachifyMeURLFormatString = @\"http://mustachify.me/%d?src=%@\";\n\n    self.imageURL = [NSURL URLWithString:[NSString stringWithFormat:HIPMustachifyMeURLFormatString, self.mustacheType, [HIPMatchingURLsInActivityItems(activityItems) firstObject]]];\n}\n```\n\næˆ‘ä»¬çš„ç½‘ç«™æœåŠ¡æä¾›äº†å„ç§èƒ¡é¡»é€‰é¡¹ï¼Œå®ƒè¢«å®šä¹‰åœ¨ä¸€ä¸ªæšä¸¾ä¸­ï¼š\n\n```objc\ntypedef NS_ENUM(NSInteger, HIPMustacheType) {\n    HIPMustacheTypeEnglish,\n    HIPMustacheTypeHorseshoe,\n    HIPMustacheTypeImperial,\n    HIPMustacheTypeChevron,\n    HIPMustacheTypeNatural,\n    HIPMustacheTypeHandlebar,\n};\n```\n\næœ€ç»ˆï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª`UIViewController`æ¥æ˜¾ç¤ºå›¾ç‰‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¸ªç®€å•çš„`UIWebView`æ§åˆ¶å™¨å°±å¤Ÿç”¨äº†ã€‚\n\n```objc\n@interface HIPMustachifyWebViewController : UIViewController <UIWebViewDelegate>\n@property (readonly, nonatomic, strong) UIWebView *webView;\n@end\n\n- (UIViewController *)activityViewController {\n    HIPMustachifyWebViewController *webViewController = [[HIPMustachifyWebViewController alloc] init];\n\n    NSURLRequest *request = [NSURLRequest requestWithURL:self.imageURL];\n    [webViewController.webView loadRequest:request];\n\n    return webViewController;\n}\n```\n\nä¸ºäº†ä½¿ç”¨æˆ‘ä»¬åŠ äº†æ–°èƒ¡é¡»çš„æ´»åŠ¨ï¼Œæˆ‘ä»¬ç®€å•æŠŠå®ƒä¼ é€’åˆ°`UIActivityViewController`æ„é€ å™¨ä¸­ï¼š\n\n```objc\nHIPMustachifyActivity *mustacheActivity = [[HIPMustachifyActivity alloc] init];\nUIActivityViewController *activityViewController =\n  [[UIActivityViewController alloc] initWithActivityItems:@[imageURL]\n                                    applicationActivities:@[mustacheActivity]];\n```\n\n### æ‰‹åŠ¨æ‰§è¡ŒåŠ¨ä½œ\n\nç°åœ¨æ˜¯ä¸€ä¸ªæé†’çš„å¥½æ—¶æœºï¼Œå½“`UIActivityViewController`å…è®¸ç”¨æˆ·æ‰§è¡Œä»–ä»¬é€‰æ‹©çš„åŠ¨ä½œï¼Œåˆ†äº«ä¹Ÿèƒ½é€šè¿‡æ‰‹åŠ¨æ‰§è¡Œï¼Œå½“åœºæ™¯å‡ºç°æ—¶ã€‚\n\næ‰€æœ‰ä¸ºäº†å®Œæ•´æ€§ï¼Œä¸‹é¢æ˜¯æ€æ ·æ‰‹åŠ¨æ‰§è¡Œè¿™äº›åŠ¨ä½œç¤ºä¾‹ï¼š\n\n#### Open URL\n\n```objc\nNSURL *URL = [NSURL URLWithString:@\"http://nshipster.com\"];\n[[UIApplication sharedApplication] openURL:URL];\n```\nç³»ç»Ÿæ”¯æŒçš„URLåè®®åŒ…æ‹¬ï¼š`mailto:`ï¼Œ` tel:`ï¼Œ`sms:`å’Œ`maps:`ã€‚\n\n#### æ·»åŠ åˆ°Safarié˜…è¯»åˆ—è¡¨\n\n```objc\n@import SafariServices;\n\nNSURL *URL = [NSURL URLWithString:@\"http://nshipster.com/uiactivityviewcontroller\"];\n[[SSReadingList defaultReadingList] addReadingListItemWithURL:URL\n                                                        title:@\"NSHipster\"\n                                                  previewText:@\"...\"\n                                                        error:nil];\n```\n\n#### ä¿å­˜åˆ°ç›¸å†Œ\n\n```objc\nUIImage *image = ...;\nid completionTarget = self;\nSEL completionSelector = @selector(didWriteToSavedPhotosAlbum);\nvoid *contextInfo = NULL;\nUIImageWriteToSavedPhotosAlbum(image, completionTarget, completionSelector, contextInfo);\n```\n\n#### å‘é€ SMS\n\n```objc\n@import MessageUI;\n\nMFMessageComposeViewController *messageComposeViewController = [[MFMessageComposeViewController alloc] init];\nmessageComposeViewController.messageComposeDelegate = self;\nmessageComposeViewController.recipients = @[@\"mattt@nshipsterâ€¢com\"];\nmessageComposeViewController.body = @\"Lorem ipsum dolor sit amet\";\n[navigationController presentViewController:messageComposeViewController animated:YES completion:^{\n    // ...\n}];\n```\n\n#### å‘é€ Email\n\n```objc\n@import MessageUI;\n\nMFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];\nmailComposeViewController.mailComposeDelegate = self;\n[mailComposeViewController setToRecipients:@[@\"mattt@nshipsterâ€¢com\"]];\n[mailComposeViewController setSubject:@\"Hello\"];\n[mailComposeViewController setMessageBody:@\"Lorem ipsum dolor sit amet\" isHTML:NO];\n[navigationController presentViewController:mailComposeViewController animated:YES completion:^{\n    // ...\n}];\n```\n\n#### å‘é€ Tweet\n\n```objc\n@import Social;\n\nSLComposeViewController *tweetComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];\n[tweetComposeViewController setInitialText:@\"Lorem ipsum dolor sit amet.\"];\n[self.navigationController presentViewController:tweetComposeViewController\n                                        animated:YES\n                                      completion:^{\n                                          // ...\n                                      }];\n```\n\n\n### IntentKit\n\n\nå½“æ‰€æœ‰çš„è¿™äº›éƒ½æ˜¯å°è±¡æ·±åˆ»å’Œéå¸¸æœ‰ç”¨ï¼Œå®ƒåœ¨iOSä¸­çš„æ´»åŠ¨èŒƒä¾‹ç‰¹åˆ«ç¼ºä¹ï¼Œå½“å’Œåœ¨Androidä¸­çš„ä¸°å¯Œçš„[Intents Model](http://developer.android.com/guide/components/intents-filters.html)ç›¸æ¯”ã€‚\n\n\nåœ¨Androidä¸­ï¼Œappsèƒ½å¤Ÿæ³¨å†Œä¸åŒçš„intentsï¼Œæ¥æŒ‡ç¤ºå®ƒä»¬èƒ½å¤Ÿç”¨åœ¨Mapsï¼Œæˆ–è€…å……å½“ä¸€ä¸ªæµè§ˆå™¨ï¼Œèƒ½å¤Ÿè¢«æ¶‰åŠåˆ°ç›¸å…³æ´»åŠ¨çš„é»˜è®¤appé€‰ä¸­ï¼Œæ¯”å¦‚æŒ‡å¼•æ–¹å‘ï¼Œæˆ–è€…ä¸€ä¸ªä¹¦ç­¾çš„URLã€‚\n\nç„¶è€ŒiOSç¼ºä¹æ¥æ”¯æŒè¿™äº›çš„å¯æ‹“å±•çš„åŸºç¡€æ¶æ„ï¼Œæœ‰ä¸€ä¸ªå«[IntentKit](https://github.com/intentkit/IntentKit)ç¬¬ä¸‰æ–¹åº“ï¼Œä½œè€…[@lazerwalker](https://github.com/lazerwalker)(å› [f*ingblocksyntax.com](http://goshdarnblocksyntax.com/)æˆå)ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­å…³äºæˆ‘ä»¬æ€æ ·ç¼©å°è¿™æ–¹é¢çš„å·®è·ã€‚\n\n\n![IntentKit demo](https://raw.github.com/intentkit/IntentKit/master/example.gif)\n\né€šå¸¸ï¼Œä¸€ä¸ªå¼€å‘è€…å¯èƒ½å·²ç»åšäº†å¾ˆå¤šç¬¬ä¸€æ­¥çš„å·¥ä½œï¼Œæ¥å†³å®šæ˜¯å¦æŸä¸ªappæ˜¯å¦å®‰è£…ï¼Œç„¶åæ€æ ·æ„é€ ä¸€ä¸ªURLæ¥æ”¯æŒæŸä¸ªç‰¹æ®Šçš„æ´»åŠ¨ã€‚\n\nIntentKitåŠ å¼ºäº†è¿ç»“åˆ°å¤§å¤šæ•°æµè¡Œçš„Webï¼ŒMaps,Mail,Twitter,Facebook,å’ŒGoogle+å®¢æˆ·çš„çš„é€»è¾‘ï¼Œä»¥å’Œ`UIActivityViewController`ç›¸ä¼¼çš„UIã€‚\n\nä»»ä½•å¯»æ‰¾æå‡ä»–ä»¬çš„åˆ†äº«ä½“éªŒåˆ°ä¸‹ä¸€ä¸ªçº§åˆ«çš„äººéƒ½åº”è¯¥ä»”ç»†çœ‹çœ‹è¿™ä¸ªã€‚\n\n--\n\nåœ¨iOSé•¿æœŸç”Ÿå­˜èƒ½åŠ›ä½œä¸ºä¸€ä¸ªå¹³å°å–å†³äºåƒ`UIActivityViewController`ç±»å‹çš„åˆ†äº«æœºåˆ¶å­˜ä¸Šåœ¨å¾ˆå¤§çš„äº‰è®ºã€‚æ­£å¦‚ä¿—è¯­æ‰€è¨€ï¼šâ€œèµ„è®¯åº”è¯¥å…è´¹â€ã€‚ä»»ä½•é˜»ç¢æ–¹å¼ç»Ÿä¸€çš„ä¸œè¥¿ï¼Œæœ€ç»ˆéƒ½ä¼šå¤±å»ä¸€äº›æ²¡æœ‰çš„ä¸œè¥¿ã€‚\n\nå°†æ¥çš„æ™¯è±¡æ˜¯å…¬å…±çš„è¿œç¨‹è§†å›¾æ§åˆ¶å™¨APIså¸¦ç»™æˆ‘å¸Œæœ›ï¼Œå¯¹äºå°†æ¥åœ¨iOSå¹³å°ä¸Šçš„åˆ†äº«åŠŸèƒ½ã€‚ç„¶è€Œç°åœ¨æˆ‘ä»¬åšçš„å’ŒUIActivityViewControllerç›¸æ¯”ç³Ÿç³•å¾—å¤šã€‚\n","tags":["ç¿»è¯‘","Favorite","æŠ€å·§"],"categories":["iOS"]},{"title":"2016ä¸ªäººå¹´åº¦æ€»ç»“","url":"/2017/01/09/2017-01-10-2016ge-ren-nian-du-zong-jie/","content":"\n### å‰è¨€\n\n2016å¯¹äºæˆ‘æ¥è¯´çš„æ„ä¹‰ï¼Œå°±åƒ10å¹´å‰çš„ä»Šå¤©ï¼Œ`iPhone`ä¹‹ä½™ä¹”å¸ƒæ–¯ï¼Œ`iPhone`å‘å¸ƒå10å¹´åçš„ä»Šå¤©ï¼Œå°ç¨‹åºä¹‹ä½™å¼ å°é¾™ã€‚å®ƒè·¨è¶Šäº†ä¸€é“æ·±æ·±çš„é¸¿æ²Ÿï¼Œå¹¶å‘è‡ªå·±ç†æƒ³çš„æ–¹å‘åšå®šå‰è¡Œã€‚\n\nä¸€ç›´ç›¸ä¿¡åŠªåŠ›å°±ä¼šæœ‰å›æŠ¥ï¼Œä»˜å‡ºå°±ä¼šæœ‰æ”¶è·ï¼Œæ˜¯é‡‘å­æ€»ä¼šå‘å…‰ã€‚\n\n* 2016æ˜¯æˆ‘åŠ å…¥[å®¢è·¯](www.klook.com)ä¸€å‘¨å¹´çš„æ—¶é—´ï¼Œè®¤è¯†äº†å¾ˆå¤šæœ‰è¶£çš„æœ‹å‹å’ŒåŒäº‹çš„ä¸€\n* 2016æ˜¯æˆ‘è¿ˆå‡ºè‡ªæˆ‘ï¼Œèµ°å‡ºä¸­å›½æ¢ç´¢æœªçŸ¥çš„ä¸–ç•Œçš„ä¸€å¹´ã€‚\n* 2016æ˜¯æ—…è¡Œï¼Œå·¥ä½œï¼Œç”Ÿæ´»ï¼Œå­¦ä¹ ï¼Œç¤¾äº¤ä¸€æ ·éƒ½æ²¡è½ä¸‹çš„ä¸€å¹´ã€‚\n\næ›¾ç»çš„é“å“¥ä»¬ä¹Ÿå³å°†å›å½’ä¸œèï¼Œè¿™æ ·æˆ‘ä»¬çš„è·ç¦»åˆè¿›äº†ä¸€æ­¥ï¼Œä»¥åæœ‰æ›´å¤šçš„æ—¶é—´èŠç†æƒ³è°ˆäººç”Ÿï¼Œæƒ³æƒ³çªç„¶å¥½æ¿€åŠ¨ã€‚\n\n### ä¸šç»©\n\n2016-2017å¹´é—´ä¸€å…±å‘å¸ƒ17ä¸ªç‰ˆæœ¬ï¼Œå¤šæ¬¡è¢«`Apple`æ¨èï¼Œå´©æºƒç‡å°äº0.2%ï¼Œè¿™å°±æ˜¯ç»™è‡ªå·±å’Œå…¬å¸äº¤å‡ºæœ€æ»¡æ„çš„ç­”å·ã€‚\n\nä¸‹é¢æ˜¯Klook Appä¸ŠAppleçš„æ¨èé¡µæˆªå›¾ï¼š\n\n<img src=\"/images/2016_year_end_review/klook Apple App recommend.PNG\" alt=\"klook Apple App recommend\" width=\"50%\" />\n\nä¸‹é¢æ˜¯Klook iMessage Appä¸ŠAppleçš„æ¨èé¡µæˆªå›¾ï¼š\n\n<img src=\"/images/2016_year_end_review/klook Apple iMessage App recommend.JPG\" alt=\"klook Apple iMessage App recommend\" width=\"50%\" />\n\næœ‰æ—¶å‘ç°äº’è”ç½‘çœŸçš„å¾ˆå¥‡å¦™ï¼Œä»–èƒ½è®©å¾ˆå¤šäººè¿…é€Ÿç§¯ç´¯å¤§é‡çš„è´¢å¯Œæˆåèµ°ä¸Šäººç”Ÿçš„å·…å³°ï¼Œè¿‡ä¸Šè‡ªå·±æƒ³è¦çš„ç”Ÿæ´»ï¼Œåªè¦ä½ ä¸€ä¸ªå¥½çš„ideaå’Œä¸€ä¸ªå¼ºå¤§çš„æ‰§è¡ŒåŠ›ã€‚\n\nè¿™ä¸€å¹´æ¥ä¸ªäººæŠ€æœ¯åšå®¢ä¸€å…±å†™äº†**46**éæ–‡ç« ï¼Œä¹Ÿç®—ä¸€ç‚¹å°ç§¯è“„ï¼Œå¸Œæœ›æ¥å¹´ç»§ç»­åšæŒï¼Œèƒ½å¤Ÿå½±å“å’Œå¸®åŠ©æ›´å¤šçš„äººï¼Œå› ä¸ºæŠ€æœ¯è¿™æ¡é“è·¯ä¸Šå‘å®åœ¨æ˜¯å¤ªå¤šã€‚\n\n`Github`ä¸Š**405**æ¬¡commitè¿˜ç®—ä¸­è§„ä¸­çŸ©ï¼Œå¸Œæœ›æ¥å¹´åˆ†äº«æ›´å¤šçš„æœ‰ä»·å€¼çš„ä¸œè¥¿ç»™æœ‰éœ€è¦çš„å°ä¼™ä¼´ï¼Œä¹Ÿç•™ç»™è‡ªå·±æ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚\n\n![github 2016 commit record](/images/2016_year_end_review/github 2016 commit record.png)\n\nå½“ç„¶ç°åœ¨`Github`ä¸Šçš„å†…å®¹Forkå’Œåšå®¢å±…å¤šï¼ŒåŸåˆ›å¼€æºé¡¹ç›®è¿˜æ¯”è¾ƒå°‘ï¼Œå¸Œæœ›æ¥å¹´å¤šè¾“å‡ºä¸€ç‚¹ä¸œè¥¿ã€‚\n\n### æœªæ¥\n\næ„¿æœ›è¿™ä¸œè¥¿è¿˜çœŸç¥å¥‡ï¼Œè®¸ä¸€ä¸ªè¯•è¯•å§ï¼Œæˆ–è®¸å®ƒçœŸçš„å®ç°äº†å‘¢ï¼Œå°±éå¸¸æœ‰è¶£äº†ã€‚\nç»™è‡ªå·±å®šä¸‹çš„æ—…è¡Œæ¸…å•ï¼Œå­¦ä¹ æ¸…å•ï¼Œé˜…è¯»æ¸…å•ï¼Œç”µå½±æ¸…å•åŸºæœ¬éƒ½å®Œæˆï¼Œè¿™æ˜¯ä¸€ä»¶éå¸¸æ£’çš„äº‹æƒ…ï¼Œä¸ºè‡ªå·±ç‚¹ä¸ªèµã€‚å•åå·²ç»ä»é£å…‰è½¬äººåƒï¼Œå¸Œæœ›æ¥å¹´å¤šå‡ºç‚¹ç‰‡ï¼Œæ–°å¹´å³å°†æ¥ä¸´ï¼Œå¸Œæœ›è‡ªå·±åšæŒä¸€å‘¨2æ¬¡çš„é”»ç‚¼ï¼Œä¿æŒç²¾åŠ›å……æ²›ä»¥ä¾¿å¥½æŠ•å…¥åˆ°æ„Ÿæƒ…ï¼Œç”Ÿæ´»ä¸­ä»¥åŠå­¦ä¹ ä¸­ï¼Œæ¯•ç«Ÿäº’è”ç½‘æ˜¯ä¸€é—¨ç»ˆç”Ÿå­¦ä¹ çš„èŒä¸šï¼Œä¹Ÿæ˜¯å®¹æ˜“äº§ç”Ÿå¥‡è¿¹çš„èŒä¸šï¼Œè¯´ä¸å®šä¸€ä¸‹ä¸ªå°±æ˜¯ä½ å‘¢ã€‚\n\næ¥å¹´å¸Œæœ›å’Œè‡ªå·±å–œæ¬¢çš„äººæ—…æ‹ï¼Œå¤šå°è¯•ä¸€äº›æ²¡å°è¯•è¿‡çš„äº‹æƒ…ï¼Œäº¤æ›´å¤šæœ‰è¶£çš„æœ‹å‹ã€‚å¹²å·´çˆ¹ğŸ˜ğŸ˜ğŸ˜\n\n","tags":["Favorite"],"categories":["ç”Ÿæ´»"]},{"title":"è§†é¢‘æ’­æ”¾Tips","url":"/2016/12/08/2016-12-08-shi-pin-bo-fang-tips/","content":"\nä¸»è¦æ¶‰åŠåˆ°Tipsï¼š\n1. è·å–è®¾å¤‡éŸ³é‡\n2. é™éŸ³æ¨¡å¼å¤±æ•ˆ\n3. ç›‘å¬éŸ³é‡æ”¹å˜\n4. è®¾ç½®è®¾å¤‡éŸ³é‡ \n5. ç›‘å¬é™éŸ³æŒ‰é’®\n6. ç›‘å¬è€³æœºæ‹”æ’\n\n## è·å–è®¾å¤‡éŸ³é‡\n\næ’­æ”¾éŸ³é¢‘å¯ä»¥é€šè¿‡ï¼š\n\n```objc\nMPMusicPlayerController *iPod = [MPMusicPlayerController systemMusicPlayer];\nfloat volumeLevel = iPod.volume;\n```\n\næ’­æ”¾è§†é¢‘å¯ä»¥é€šè¿‡ï¼š\n\n```objc\nfloat outputVolume = [[AVAudioSession sharedInstance] outputVolume];\n```\n\n> æ¨èä¸‹é¢çš„æ–¹æ³•ï¼Œä¸Šé¢çš„åœ¨æŸäº›ç‰ˆæœ¬å¯èƒ½æœ‰é—®é¢˜ï¼Œä¸‹é¢çš„æ–¹æ³•å…¼å®¹**iOS6åŠä»¥ä¸Š**ã€‚\n\n## é™éŸ³æ¨¡å¼å¤±æ•ˆ\n\né€šè¿‡è®¾ç½®éŸ³é¢‘ä¼šè¯çš„categoryå®ç°ï¼š\n\n```objc\nNSError *setCategoryError = nil;\nBOOL success = [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback\n\t                                                  error: &setCategoryError];\n    \nif (!success) { /* handle the error in setCategoryError */ }\n```\n\n> è¿™æ ·Appå°±ä¸ä¼šéšç€æ‰‹æœºé™éŸ³é”®æ‰“å¼€è€Œé™éŸ³ï¼Œå¯åœ¨æ‰‹æœºé™éŸ³ä¸‹æ’­æ”¾å£°éŸ³ğŸ˜\n\n## ç›‘å¬éŸ³é‡æ”¹å˜\n\nç›‘å¬éŸ³é¢‘æ”¹å˜ç§æœ‰é€šçŸ¥ï¼š\n\n```objc\n[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChanged:) name:@\"AVSystemController_SystemVolumeDidChangeNotification\" object:nil];\n```\n\nå®ç°é€šè¿‡å›è°ƒï¼š\n\n```objc\n- (void)volumeChanged:(NSNotification *)notification\n{\n    float volume = [[[notification userInfo] objectForKey:@\"AVSystemController_AudioVolumeNotificationParameter\"]\n     floatValue];\n     \n     // do something\n}\n```\n\n## è®¾ç½®è®¾å¤‡éŸ³é‡ \n\nä½¿ç”¨`MPVolumeView`ç±»ï¼Œä¾¿åˆ©å®ƒçš„å­viewsæ‰¾åˆ°ç±»ä¸º`MPVolumeSlider`çš„æ»‘ç«¿ã€‚\n\n```objc\nMPVolumeView *volumeView = [[MPVolumeView alloc] init];\nUISlider *volumeViewSlider = nil;\n\tfor (UIView *view in [volumeView subviews]){\n\t    if ([view.class.description isEqualToString:@\"MPVolumeSlider\"])\t{\n\t        volumeViewSlider = (UISlider *)view;\n\t        break;\n\t    }\n\t}\n```\n\nç„¶åå†é€šè¿‡è®¾ç½®`volumeViewSlider`çš„`value`å³å¯ã€‚\n\n```objc\n_volumeViewSlider.value = someVolume;\n```\n\n## ç›‘å¬é™éŸ³æŒ‰é’®\n\nå‚è€ƒ[Sound Switch - Sharkfood](http://sharkfood.com/content/Developers/content/Sound%20Switch/)çš„å®ç°ã€‚\n\nä½¿ç”¨å¾ˆç®€å•ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé™éŸ³æ¨¡å¼ï¼š\n\n```objc\nif ([SharkfoodMuteSwitchDetector shared].isMute) {\n    // do something\n}\n```\nåŠ¨æ€ç›‘å¬ï¼Œé€šè¿‡blockå›è°ƒï¼š\n\n```objc\n[SharkfoodMuteSwitchDetector shared].silentNotify = ^(BOOL silent){\n      // do something\n};\n```\n\n## ç›‘å¬è€³æœºæ‹”æ’\n\nç›‘å¬`AVAudioSessionRouteChangeNotification`é€šçŸ¥ï¼š\n\n```objc\n[[NSNotificationCenter defaultCenter] addObserver:self\n\t\t\t\t\t\t\t\t\t      selector:@selector(audioRouteChangeListenerCallback:) \t\t\t\t\t\t\t\t\t\t      name:AVAudioSessionRouteChangeNotification \n\t\t\t\t\t\t\t\t\t        object:nil];\n```\n\nå®ç°å›è°ƒï¼š\n\n```objc\n- (void)audioRouteChangeListenerCallback:(NSNotification*)notification\n{\n    NSDictionary *interuptionDict = notification.userInfo;\n    \n    NSInteger routeChangeReason = [[interuptionDict valueForKey:AVAudioSessionRouteChangeReasonKey] integerValue];\n    switch (routeChangeReason) {\n        case AVAudioSessionRouteChangeReasonNewDeviceAvailable:\n            // è€³æœºæ’å…¥\n            break;\n            \n        case AVAudioSessionRouteChangeReasonOldDeviceUnavailable:\n            // è€³æœºæ‹”æ‰\n            break;\n            \n        case AVAudioSessionRouteChangeReasonCategoryChange:\n            // called at start - also when other audio wants to play\n            NSLog(@\"AVAudioSessionRouteChangeReasonCategoryChange\");\n            break;\n    }\n}\n```\n","tags":["æŠ€å·§","éŸ³è§†é¢‘"],"categories":["iOS"]},{"title":"åŠ¨ç”»åˆ‡æ¢Imageæœ€ä½³å®è·µ","url":"/2016/11/26/2016-11-26-dong-hua-qie-huan-imagezui-jia-shi-jian/","content":"\n### å‰è¨€\n\n`UIImageView`åº”è¯¥æ˜¯iOSä¸­ä½¿ç”¨æœ€é¢‘æ¢çš„æ§ä»¶ï¼Œå°±å¦‚æ—¥å¸¸åƒé¥­ä¸€æ ·ï¼Œå¤©å¤©éƒ½åœ¨é‡å¤ï¼Œæœ‰æ—¶æˆ–è®¸åº”è¯¥åæ€ä¸€ä¸‹ï¼Œæ€ä¹ˆä½¿ç”¨è¿™ä¸ªæ§ä»¶ï¼Œè¾¾åˆ°ä½èƒ½è€—ï¼Œæœ€ä½³ç”¨æˆ·ä½“éªŒã€‚\n\né’ˆå¯¹å•å¼ å›¾ç‰‡æ¥è¯´ï¼Œå¸¸è§çš„å¤„ç†æ˜¯åœ¨å›¾ç‰‡å‡†å¤‡æ˜¾ç¤ºæ—¶å¢åŠ ä¸€ä¸ªæ·¡å‡ºåŠ¨ç”»ï¼Œèƒ½ä½¿å›¾ç‰‡æ˜¾ç¤ºé—²çš„å¾ˆå¹³æ»‘ã€‚\n\nå¤šå¼ å›¾ç‰‡ä¹Ÿä¸€æ ·ï¼Œåœ¨ç¬¬ä¸€å¼ å›¾ç‰‡çš„åŸºç¡€ä¸Šæ·¡å‡ºåŸæ¥çš„å›¾ç‰‡ï¼Œæ·¡å…¥æ–°çš„å›¾ç‰‡ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯æº¶è§£æ•ˆæœã€‚\n\nå¾ˆå¤šäººå–œæ¬¢å¯¹å›¾ç‰‡çš„`alpha`åšæ·¡å‡ºåŠ¨ç”»ï¼Œä½¿`alpha`ä»0åˆ°1åŠ¨ç”»æ”¹å˜ã€‚è¿™ç§åŠ¨ç”»æœ‰ä¸€ç‚¹ä¸å¥½çš„æ˜¯ï¼Œåœ¨åŠ¨ç”»ç»“æŸåï¼Œå›¾ç‰‡ä¼šæ˜æ˜¾çš„å‡ºç°ä¸€é—ªï¼Œè¿™æ ·ä½¿åŠ¨ç”»çœ‹èµ·æ¥æœ‰ç‚¹çªå…€ã€‚æ¯”è¾ƒå¥½çš„åšæ³•æ—¶ï¼Œåœ¨å°†è¦æ˜¾ç¤ºæ—¶ç»™å›¾ç‰‡åšä¸€ä¸ªè½¬åœºåŠ¨ç”»ã€‚\n\n### æ·¡å‡ºåŠ¨ç”»å®ç°\n\nä¸‹é¢æ˜¯å…¶ä¸­ä¸€ç§ç®€å•çš„å®ç°ï¼š\n\n```objc\n@implementation UIImageView (RFWebImage)\n\n- (void)animatedChangeToImage:(UIImage *)img\n{\n    [UIView transitionWithView:self\n                      duration:0.3f\n                       options:UIViewAnimationOptionTransitionCrossDissolve\n                    animations:^{\n                        self.image = img;\n                    } completion:NULL];\n}\n\n@end\n```\n\næ€è·¯ï¼šåœ¨ImageViewå°†è¦æ˜¾ç¤ºæ˜¯ä½¿ç”¨è½¬åœºåŠ¨ç”»å‡½æ•°æ¥å®ç°æ·¡å‡ºåŠ¨ç”»æ•ˆæœï¼Œä½“éªŒåº”è¯¥æ˜¯æ˜¯å„ç§åŠ¨ç”»ä¸­æœ€å¥½çš„äº†ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ã€‚\n\n\nåœ¨æ·¡å‡ºæ˜¾ç¤ºçš„åŠ¨ç”»åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¼•å‡ºä»Šå¤©çš„ä¸»è§’ï¼ŒåŠ¨ç”»åˆ‡æ¢Imageã€‚\n\næ€è·¯ï¼šå•å¼ å›¾ç‰‡æ·¡å‡ºæˆ‘ä»¬å·²ç»å®ç°ï¼Œç°åœ¨åšçš„å°±æ˜¯åœ¨åˆ‡æ¢ä¸€å¼ æ–°çš„å›¾ç‰‡æ—¶åŒæ—¶å†åŠ å…¥æ·¡å‡ºæˆ–è€…è¯´æº¶è§£æ•ˆæœå³å¯ã€‚\n\n### åŠ¨ç”»åˆ‡æ¢Image\n\næ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‹é¢3ç§å®ç°ï¼š\n\n* `CATransition`ç±»å®ç°\n* `UIView`åŠ¨ç”»è½¬åœºAPIå®ç°\n* `CABasicAnimation`ç±»å®ç°\n\n#### CATransitionå®ç°\n\n`CATransition`ç±»æ˜¯iOSä¸­å¾ˆå¥½ç”¨çš„æ§åˆ¶è½¬åœºåŠ¨ç”»çš„ç±»ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å¯ä»¥å®ç°å¸¸è§è€Œç‚«é…·çš„åŠ¨ç”»æ•ˆæœï¼Œå˜æ¢ç±»å‹é€šè¿‡`type`å­—æ®µæ§åˆ¶ï¼Œ`subtype`å¯ä»¥å¾ˆç»†åŒ–æ§åˆ¶åŠ¨ç”»çš„æ–¹å‘ï¼ˆæ¯”å¦‚åŠ¨ç”»å¼€å§‹çš„ä¸Šä¸‹å·¦å³æ–¹å‘ï¼‰ã€‚`CATransition`ç»§æ‰¿è‡³`CAAnimation`å¯ä»¥å¯¹åŠ¨ç”»è®¾ç½®åŠ¨ç”»æ›²çº¿ï¼ˆtimingFunctionï¼‰ï¼Œå¯ä»¥é€šè¿‡ä»£ç†è·å–åŠ¨ç”»çŠ¶æ€ï¼ˆæ˜¯å·²ç»å¼€å§‹ï¼Œè¿˜æ˜¯å·²ç»åœæ­¢ï¼Œå·²ç»æ˜¯å¦å®Œæˆï¼‰ã€‚\n\n`type`æ”¯æŒå››ç§ç±»å‹ï¼š\n\n* kCATransitionFade    // æ·¡å…¥æ·¡å‡º\n* kCATransitionMoveIn  // ä»æŸä¸ªæ–¹å‘å‘ç»ˆç‚¹å¹³ç§»çŸ¥é“è¦†ç›–åœ¨ä¸Šæ–¹\n* kCATransitionPush    // æŠŠåŸæ¥çš„æ¨å‡ºå»ï¼Œè‡ªå·±æ¨å‡ºå»\n* kCATransitionReveal  // æŠŠåŸæ¥çš„ä»æ­£ä¸Šæ–¹è§£å¼€ï¼Œè‡ªå·±åœ¨ä¸‹é¢\n\n*ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š*\n\n```objc\n- (void)animatedSwichImageMethodOne {\n\n    UIImage *toImage = [self getRadomImage];\n    \n    CATransition *transition = [CATransition animation];\n    transition.duration = 0.3f;\n    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];\n    transition.type = kCATransitionFade;\n    transition.subtype = kCATransitionFromTop;\n    \n    [self.imageViewOne.layer addAnimation:transition forKey:nil];\n    [self.imageViewOne setImage:toImage];\n}\n```\n\n#### UIViewåŠ¨ç”»è½¬åœº\n\n```objc\n+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^ __nullable)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(4_0);\n```\n\né€šè¿‡ä¸Šé¢çš„å‡½æ•°å®ç°ï¼Œå…¶å®æ˜¯å¯¹ç¬¬ä¸€ç§çš„é«˜çº§å°è£…ã€‚é€šè¿‡è®¾ç½®`options`ä¸º`UIViewAnimationOptionTransitionCrossDissolve`å³å¯ã€‚\n\n*ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š*\n\n```objc\n- (void)animatedSwichImageMethodTwo {\n    \n    UIImage *toImage = [self getRadomImage];\n    \n    [UIView transitionWithView:self.imageViewTwo\n                      duration:0.3f\n                       options:UIViewAnimationOptionTransitionCrossDissolve | UIViewAnimationOptionCurveEaseInOut\n                    animations:^{\n                        self.imageViewTwo.image = toImage;\n                    } completion:nil];\n}\n```\n\n#### CABasicAnimationå®ç°\n\n`CABasicAnimation`æ˜¯æ ¸å¿ƒåŠ¨ç”»ä¸€ä¸ªé‡è¦çš„ç±»ï¼Œç»§æ‰¿è‡³`CAPropertyAnimation`ï¼Œå¯ä»¥å¯¹æ‰€æœ‰çš„å¯åŠ¨ç”»å±æ€§åšåŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡`fromValue`ï¼Œ`toValue`ï¼Œ`byValue`å­—æ®µæ§åˆ¶åŠ¨ç”»çš„è¿›åº¦ã€‚\nåœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯å¯¹`CALayer`çš„`contents`å±æ€§åšåŠ¨ç”»ï¼Œåœ¨æ”¹å˜å›¾ç‰‡æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª`CABasicAnimation`å¯¹è±¡æ·»åŠ åˆ°ImageViewçš„å›¾å±‚ä¸Šå³å¯ã€‚\n\n*ä¸‹é¢æ˜¯æ ·æ¿ä»£ç ï¼š*\n\n```objc\n- (void)animatedSwichImageMethodThree {\n    \n    UIImage *toImage = [self getRadomImage];\n    \n    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@\"contents\"];\n    animation.toValue = toImage;\n    animation.duration = 0.3f;\n    \n    [self.imageViewThree.layer addAnimation:animation forKey:@\"contentsAnimationKey\"];\n    [self.imageViewThree setImage:toImage];\n}\n```\n\n> æ›´å¤šå†…å®¹è¯·ä¸‹è½½[Demo](https://github.com/wangruofeng/AnimatedSwitchImageDemo)æŸ¥çœ‹ï¼ˆ**ğŸ¤”Bonusï¼š Flipæ•ˆæœğŸ¤”**ï¼‰\n","tags":["åŠ¨ç”»","æŠ€å·§"],"categories":["iOS"]},{"title":"iOSæ— ç¼æ¡¥æ¥ã€ç¿»è¯‘Appleå®˜æ–¹æ–‡æ¡£ã€‘","url":"/2016/11/17/2016-11-17-ioswu-feng-qiao-jie/","content":"\n### Toll-Free Bridged Types\n\nåœ¨`Core Foundation`æ¡†æ¶å’Œ`Foundation `æ¡†æ¶ä¸­æœ‰å¾ˆå¤šæ•°æ®ç±»å‹å¯ä»¥äº¤æ›¿è½¬æ¢ã€‚èƒ½å¤Ÿè¢«äº¤æ›¿è½¬æ¢çš„æ•°æ®ç±»å‹ä¹Ÿè¢«å«åš`Toll-Free Bridged`æ•°æ®ç±»å‹ã€‚è¿™æ„å‘³ç€ä½ èƒ½åƒå‚æ•°ä¸€æ ·ä½¿ç”¨ç›¸åŒçš„æ•°æ®ç»“æ„å¯¹ä¸€ä¸ª`Core Foundation`çš„å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œæˆ–è€…åƒ`Objective-C`çš„æ¶ˆæ¯æ¥å—æ¨¡å¼ä¸€æ ·æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œ`NSLocale`ï¼ˆæŸ¥çœ‹[NSLocale Class Reference](https://developer.apple.com/reference/foundation/nslocale)ï¼‰å¯ä»¥ä¸åœ¨`Core Foundation`ä¸­å¯¹åº”çš„`CFLocale `ï¼ˆæŸ¥çœ‹[CFLocale Reference](https://developer.apple.com/reference/corefoundation/1666963-cflocale)ï¼‰ä¹‹é—´äº’ç›¸è½¬æ¢ã€‚\n\n\nä¸æ˜¯æ‰€æœ‰æ•°æ®ç±»å‹éƒ½æ˜¯`Toll-Free Bridged`,å³ä½¿å®ƒä»¬çš„åå­—å¯èƒ½è®©ä½ è®¤ä¸ºå®ƒä»¬æ˜¯ã€‚ä¾‹å¦‚ï¼Œ`NSRunLoop`æ˜¯æ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹`CFRunLoop`,`NSBundle`ä¹Ÿæ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹`CFBundle`ï¼Œ`NSDateFormatter`åŒæ ·æ²¡æœ‰å¯¹åº”çš„æ¡¥æ¥ç±»å‹`CFDateFormatter`ã€‚\n\næ–‡ç« æœ«å°¾è¡¨1æä¾›äº†ä¸€ä»½æ”¯æŒæ— ç¼æ¡¥æ¥çš„æ•°æ®ç±»å‹çš„åˆ—è¡¨ã€‚\n\n> **æ³¨æ„**ï¼šå‡å¦‚ä½ ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å›è°ƒåœ¨ä¸€ä¸ª`Core Foundation`æ¡†æ¶çš„é›†åˆä¸­ï¼ŒåŒ…å«ä¸€ä¸ª`NULL`å›è°ƒï¼Œå½“ä½¿ç”¨`Objective-C`çš„æ–¹å¼æ¥å…¥å®ƒï¼Œå®ƒçš„å†…å­˜ç®¡ç†æ–¹å¼æ˜¯æœªå®šä¹‰çš„ã€‚\n\n### ç±»å‹è½¬æ¢å’Œå¯¹è±¡è¯­ä¹‰å‘¨æœŸå£°æ˜\n\né€šè¿‡æ— ç¼æ¡¥æ¥æŠ€æœ¯ï¼Œåœ¨ä¸€ä¸ªä½ ä»¥`NSLocale *`åšä¸ºä¸€ä¸ªå‚æ•°çš„æ–¹æ³•çš„ä¾‹å­ä¸­ï¼Œä½ èƒ½ä¼ é€’ä¸€ä¸ª`CFLocaleRef`ç»“æ„ä½“ï¼Œå¹¶ä¸”å½“ä½ çœ‹åˆ°æœ‰ä¸€ä¸ª`CFLocaleRef `å‚æ•°çš„å‡½æ•°ä¸­ï¼Œä½ èƒ½å¤Ÿä¼ é€’ä¸€ä¸ª`NSLocale`å®ä¾‹å¯¹è±¡ã€‚å½“ç„¶ä½ ä¹Ÿå¿…é¡»æä¾›ç»™ç¼–è¯‘å™¨ç›¸å…³çš„ä¸€äº›å…¶å®ƒä¿¡æ¯:ç¬¬ä¸€ï¼Œä½ å¿…é¡»è½¬æ¢ä¸€ç§ç±»å‹æˆå…¶å®ƒï¼›ç¬¬äºŒï¼Œä½ å¯èƒ½å¿…é¡»æŒ‡æ˜å¯¹è±¡çš„è¯­ä¹‰ç”Ÿå‘½å‘¨æœŸã€‚\n\nç¼–è¯‘å™¨ç†è§£`Objective-C`çš„æ–¹æ³•å¹¶ä¸”è¿”å›`Core Foundation`æ•°æ®ç±»å‹ï¼Œä¸‹é¢æ˜¯`Cocoa`å‘½åè½¬æ¢çš„å†å²ï¼ˆæŸ¥çœ‹[Advanced Memory Management Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)ï¼‰ã€‚ä¾‹å¦‚ï¼Œç¼–è¯‘å™¨çŸ¥é“ï¼Œåœ¨`iOS`ä¸­ï¼Œé€šè¿‡`UIColor `çš„`CGColor`æ–¹æ³•è¿”å›çš„`CGColor`å¹¶ä¸åº”è¯¥è¢«æŒæœ‰ã€‚ä½ å¿…é¡»ä½¿ç”¨æ°å½“çš„ç±»å‹è½¬æ¢ï¼Œåƒä¸‹é¢ä¾‹å­æ¼”ç¤ºçš„é‚£æ ·ï¼š\n\n```objc\nNSMutableArray *colors = [NSMutableArray arrayWithObject:(id)[[UIColor darkGrayColor] CGColor]];\n[colors addObject:(id)[[UIColor lightGrayColor] CGColor]];\n```\n\nç¼–è¯‘å™¨å¹¶ä¸ä¼šè‡ªåŠ¨ç®¡ç†`Core Foundation`å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨å¯¹è±¡çš„è¯­ä¹‰æ‰€å±å…³ç³»é€šè¿‡ä½¿ç”¨ä¸€ç§è½¬æ¢ï¼ˆå®šä¹‰åœ¨**objc/runtime.h**ï¼‰æˆ–è€…`Core Foundation`é£æ ¼çš„å®ï¼ˆå®šä¹‰åœ¨ **NSObject.h**ï¼‰ï¼š\n\n* `__bridge`å…³é”®å­—è¡¨ç¤ºè½¬æ¢æŒ‡é’ˆåœ¨`Objective-C`å’Œ`Core Foundation`ä¹‹é—´è€Œä¸ä¼šè½¬æ¢æ‰€å±å…³ç³»ã€‚\n* `__bridge_retained `å…³é”®å­—æˆ–è€…`CFBridgingRetain `è¡¨ç¤ºè½¬æ¢æŒ‡é’ˆåœ¨`Objective-C`å’Œ`Core Foundation`ä¹‹é—´å¹¶ä¸”æŠŠæ‰€å±æƒäº¤ç»™ä½ ã€‚ä½ è´Ÿè´£è°ƒç”¨`CFRelease`æˆ–è€…ç›¸å…³çš„å‡½æ•°æ¥äº¤å‡ºå¯¹è±¡çš„æ‰€å±æƒã€‚\n* `__bridge_transfer`å…³é”®å­—æˆ–è€…`CFBridgingRelease`è¡¨ç¤ºè½¬æ¢ä¸€ä¸ªé`Objective-C`çš„æŒ‡é’ˆåˆ°`Objective-C`å¹¶ä¸”è½¬æ¢æ‰€å±æƒç»™**ARC**ã€‚**ARC**è´Ÿè´£äº¤å‡ºå¯¹è±¡çš„æ‰€å±æƒã€‚\n\n\nä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```objc\nNSLocale *gbNSLocale = [[NSLocale alloc] initWithLocaleIdentifier:@\"en_GB\"];\nCFLocaleRef gbCFLocale = (__bridge CFLocaleRef)gbNSLocale;\nCFStringRef cfIdentifier = CFLocaleGetIdentifier(gbCFLocale);\nNSLog(@\"cfIdentifier: %@\", (__bridge NSString *)cfIdentifier);\n// Logs: \"cfIdentifier: en_GB\"\n \nCFLocaleRef myCFLocale = CFLocaleCopyCurrent();\nNSLocale *myNSLocale = (NSLocale *)CFBridgingRelease(myCFLocale);\nNSString *nsIdentifier = [myNSLocale localeIdentifier];\nCFShow((CFStringRef)[@\"nsIdentifier: \" stringByAppendingString:nsIdentifier]);\n// Logs identifier for current locale\n```\n\nä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†ä½¿ç”¨å£è¿°çš„`Core Foundation`å†…å­˜ç®¡ç†è§„åˆ™æ¥ç®¡ç†`Core Foundation`å†…å­˜ï¼š\n\n```objc\n- (void)drawRect:(CGRect)rect {\n    CGContextRef ctx = UIGraphicsGetCurrentContext();\n    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();\n    CGFloat locations[2] = {0.0, 1.0};\n    NSMutableArray *colors = [NSMutableArray arrayWithObject:(id)[[UIColor darkGrayColor] CGColor]];\n    [colors addObject:(id)[[UIColor lightGrayColor] CGColor]];\n    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)colors, locations);\n    CGColorSpaceRelease(colorSpace);  // Release owned Core Foundation object.\n \n    CGPoint startPoint = CGPointMake(0.0, 0.0);\n    CGPoint endPoint = CGPointMake(CGRectGetMaxX(self.bounds), CGRectGetMaxY(self.bounds));\n    CGContextDrawLinearGradient(ctx, gradient, startPoint, endPoint,\n                                kCGGradientDrawsBeforeStartLocation | kCGGradientDrawsAfterEndLocation);\n    CGGradientRelease(gradient);  // Release owned Core Foundation object.\n}\n```\n### æ— ç¼æ¡¥æ¥ç±»å‹\n\nè¡¨1æä¾›äº†ä¸€ä¸ªåœ¨`Core Foundation`å’Œ`Foundation`ä¸­å¯ä»¥äº¤æ›¿è½¬æ¢æ•°æ®ç±»å‹åˆ—è¡¨ã€‚å¯¹æ¯ä¸€å¯¹æ¡¥æ¥ç±»å‹ï¼Œè¡¨ä¹Ÿåˆ—ä¸¾å‡ºäº†è¿™äº›æ— ç¼æ¡¥æ¥ç±»å‹åœ¨`OS X`ä¸­çš„å¯ç”¨ç‰ˆæœ¬ã€‚\n\n| Core Foundation ç±»å‹         | Foundation ç±»å‹           | å¯ç”¨æ€§     |\n| :----------------------------|:--------------------------| :---------:|\n| CFArrayRef                  | NSArray                   | OS X v10.0|\n| CFAttributedStringRef       | NSAttributedString        | OS X v10.4|\n| CFCalendarRef               | NSCalendar                | OS X v10.0|\n| CFCharacterSetRef           | NSCharacterSet            | OS X v10.4|\n| CFDataRef                   | NSData                    | OS X v10.0|\n| CFDateRef                   | NSDate                    | OS X v10.4 |\n| CFDictionaryRef             | NSDictionary              | OS X v10.0|\n| CFErrorRef                  | NSError                   | OS X v10.4|\n| CFLocaleRef                 | NSLocale                  | OS X v10.0|\n| CFMutableArrayRef           | NSMutableArray            | OS X v10.4|\n| CFMutableAttributedStringRef| NSMutableAttributedString | OS X v10.0|\n| CFMutableCharacterSetRef    | NSMutableCharacterSet     | OS X v10.4|\n| CFMutableDataRef            | NSMutableData             | OS X v10.0|\n| CFMutableDictionaryRef      | NSMutableDict             | OS X v10.4|\n| CFMutableSetRef             | NSMutableSet              | OS X v10.0|\n| CFMutableStringRef          | NSMutableString           | OS X v10.4|\n| CFNumberRef                 | NSNumber                  | OS X v10.0|\n| CFReadStreamRef             | NSInputStream             | OS X v10.4|\n| CFRunLoopTimerRef           | NSTimer                   | OS X v10.0|\n| CFSetRef                    | NSSet                     | OS X v10.4|\n| CFStringRef                 | NSString                  | OS X v10.0|\n| CFTimeZoneRef               | NSTimeZone                | OS X v10.4|\n| CFURLRef                    | NSURL                     | OS X v10.0|\n| CFWriteStreamRef            | NSOutputStream            | OS X v10.4|\n\nè¡¨1\n\n###  å‚è€ƒèµ„æ–™\n* [Toll-Free Bridged Types](https://developer.apple.com/library/content/documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html)\n","tags":["ç¿»è¯‘","Favorite","æ•ˆç‡"],"categories":["iOS"]},{"title":"blockå¤‡å¿˜å½•","url":"/2016/11/17/2016-11-17-blockbei-wang-lu/","content":"\n### å‰è¨€\n\néšè‘—`block`åœ¨**iOS4.0**å’Œ**OS X 10.6**çš„å¼•å…¥ï¼Œç»™äº‹ä»¶ä¼ é€’ä¸€ç§æ–°çš„æ–¹å¼å®ç°ï¼Œåœ¨å¼€å‘ä¸­ç”¨å¾—æœ€å¤šçš„åœºæ™¯è«è¿‡äºäº‹ä»¶å›è°ƒã€‚ä½¿ç”¨`block`ç›¸å¯¹ä¸`delegate`çš„ä¼˜åŠ¿åœ¨äºï¼Œä¸šåŠ¡é›†ä¸­ï¼Œå¯è¯»æ€§å¼ºï¼Œä»£ç å†…è”ï¼Œä¸åƒä»£ç†éœ€è¦å®ç°å¾ˆå¤šå‡½æ•°ï¼Œåœ¨é€‚å½“çš„åœºæ™¯é€‰æ‹©è¿™ç§æ–¹å¼å®ç°äº‹ä»¶ä¼ é€’æˆ–è€…ä¼ å‚æ•ˆæœéå¸¸å¥½ï¼Œç°åœ¨å¾ˆå¤šå¼€æºé¡¹ç›®éƒ½å®ç°äº†ä¸¤ç§æ–¹æ³•çš„äº‹ä»¶å›è°ƒã€‚\n\n`block`ç”¨èµ·æ¥è™½ç„¶å¾ˆçˆ½ï¼Œä½†ä¹Ÿæœ‰å®ƒçš„ä¸è¶³ï¼Œå­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œè½»è€…å†…å­˜æ³„éœ²ï¼Œç”šè‡³å¯¼è‡´Appå´©æºƒï¼Œä¸æ˜“è°ƒè¯•è¿½æº¯ï¼Œå› æ­¤ä½¿ç”¨å®ƒä½¿ä¸€å®šè¦å°å¿ƒã€‚é‰´äºå®è·µä¸­çš„è¸©è¿‡å„ç§å‘ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œæ–¹ä¾¿è‡ªå·±å’Œä»–äººä»¥åæŸ¥é˜…ï¼Œè¿™å°±æ˜¯**blockå¤‡å¿˜å½•**å†™ä½œçš„åˆè¡·ã€‚\n\n### blockçš„æœ¬è´¨\n\n`block`å®é™…ä¸Šæ˜¯æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç¼–è¯‘æ—¶ï¼Œ`block`çš„å†…éƒ¨ä»£ç ç”Ÿäº§å¯¹åº”çš„å‡½æ•°ã€‚\n\nå…·ä½“ç»“æ„å¦‚ä¸‹ï¼š\n\n![blockç»“æ„å›¾](/images/block_structure.jpg)\n\n### ä¸Cè¯­è¨€çš„å‡½æ•°æŒ‡é’ˆçš„åŒºåˆ«\n\n* `block`çš„ä»£ç æ˜¯å†…è”çš„ï¼Œæ•ˆç‡é«˜äºå‡½æ•°è°ƒç”¨\n* `block`å¯¹äºå¤–éƒ¨å˜é‡é»˜è®¤æ˜¯åªè¯»å±æ€§\n* `block`è¢«`Objective-C`çœ‹æˆæ˜¯å¯¹è±¡å¤„ç†\n\n### blockå£°æ˜\n* ä½œä¸º`property`\n\n\t> @property (nonatomic, copy) returnType \t(^blockName)(parameterTypes);\n\t\n* ä½œä¸ºæ–¹æ³•å‚æ•°\n\n\t> \\- (void)someMethodThatTakesABlock:(returnType (^)(parameterTypes))blockName;\n\t\n* ä½œä¸ºä¸€ä¸ªæ–¹æ³•è°ƒç”¨å‚æ•°\n\n\t> [someObject someMethodThatTakesABlock:^returnType \t(parameters) {...}];\n\t\n* ä½œä¸ºä¸€ä¸ª`typedef`\n\n\t> typedef returnType (^TypeName)(parameterTypes);\n\t\n\t> TypeName blockName = ^returnType(parameters) {...};\n\n* ä½œä¸ºå‡½æ•°å‚æ•°\n\n\t> int (^sumOfNumbers)(int a, int b) = ^(int a, int \tb) \t{\n\t    return a + b;\n\t};\n\n### `SDWebImage`ä¸­ä½¿ç”¨çš„`block`ç¤ºä¾‹ï¼š\n\n```objc\ntypedef void(^SDWebImageCompletionBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL);\n\ntypedef void(^SDWebImageCompletionWithFinishedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL);\n\ntypedef NSString *(^SDWebImageCacheKeyFilterBlock)(NSURL *url);\n```\n\n### blockè°ƒç”¨\n\nè·ŸCå‡½æ•°ç±»ä¼¼ä½¿ç”¨`ï¼ˆï¼‰`ï¼Œæ‹¬å·é‡Œé¢è¿˜å¯ä»¥å¸¦ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°\n\n```objc\n// blockå£°æ˜\nï¼ˆvoidï¼‰(^loggerBlock)(void); \n\n// blockå®šä¹‰\nloggerBlock = ^{ \n     NSLog(\"hello world\")\n};\n\n// blockè°ƒç”¨\nloggerBlock(); \n```\n\n\n### blockå†…å­˜ç®¡ç†\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œ`block`æ˜¯åœ¨æ ˆå†…å­˜ä¸­ï¼Œå®ƒä¸ä¼šå¯¹æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œä»»ä½•æ“ä½œï¼›å¦‚æœå¯¹`block`è¿›è¡Œä¸€æ¬¡`copy`æ“ä½œï¼Œ`block`å°±ä¼šåœ¨å †å†…å­˜ä¸­ï¼Œå¹¶ä¸”å®ƒä¼šå®ƒæ‰€æœ‰çš„å¼•ç”¨çš„å¯¹è±¡åšä¸€æ¬¡`retain`æ“ä½œ\n\n1. å¯¹äºblockå¤–çš„å˜é‡å¼•ç”¨ï¼Œblock é»˜è®¤æ˜¯å°†å…¶å¤åˆ¶åˆ°å…¶æ•°æ®ç»“æ„ä¸­æ¥å®ç°è®¿é—®çš„\n2. å¯¹äºç”¨ `__block` ä¿®é¥°çš„å¤–éƒ¨å˜é‡å¼•ç”¨ï¼Œblock æ˜¯å¤åˆ¶å…¶å¼•ç”¨åœ°å€æ¥å®ç°è®¿é—®çš„\n3. è€Œblockä¼šæ•è·ä»£ç å¤–çš„å±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”ä»…é™äºåªè¯»æ“ä½œ\n4. åœ¨blockä¸­å¸Œæœ›ä¿®æ”¹çš„å¤–ç•Œå±€éƒ¨å¯¹è±¡ï¼Œå¿…é¡»åŠ ä¸Š`__block`å…³é”®è¯\n\nARC\n\n\tå¦‚æœå¯¹è±¡ä½¿ç”¨`__unsafe_unretained`æˆ–`__weak`ä¿®é¥°ï¼Œå°±ä¸ä¼šå¯¹å…¶åš`retain`æ“ä½œ\n\nMRC\n\n\tå¦‚æœå¯¹è±¡ä½¿ç”¨äº†`__block`ä¿®é¥°, å°±ä¸ä¼šå¯¹å…¶åš`retain`æ“ä½œ\n\nä¸ºäº†é˜²æ­¢`block`ä¸­çš„å¾ªç¯å¼•ç”¨ï¼Œå¯ä»¥ç”¨`__weak`å…³é”®è¯æŠŠç›¸åº”çš„å¯¹è±¡å£°æ˜ä¸ºå¼±å¼•ç”¨,åœ¨`block`å¿«å†…éƒ¨éœ€è¦å¤šæ¬¡è®¿é—®ï¼Œé˜²æ­¢è¯¥å¯¹è±¡è¢«é‡Šæ”¾ï¼Œå¯ä»¥ç”¨`__strong`å…³é”®è¯å°†å£°æ˜ä¸ºå¼ºå¼•ç”¨ï¼š\n\n```objc\n__weak __typeof__(self) weakSelf = self;\n\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n\n    __strong __typeof(self) strongSelf = weakSelf;\n    \n    [strongSelf doSomething];\n    [strongSelf doOtherThing];\n});\n```\n\n### å‚è€ƒé“¾æ¥\n\n* [è°ˆObjective-C blockçš„å®ç°](http://blog.devtang.com/2013/07/28/a-look-inside-blocks/)\n* [A look inside blocks: Episode 1](http://www.galloway.me.uk/2012/10/a-look-inside-blocks-episode-1/)\n* [A look inside blocks: Episode 2](http://www.galloway.me.uk/2012/10/a-look-inside-blocks-episode-2/)\n* [A look inside blocks: Episode 3](http://www.galloway.me.uk/2013/05/a-look-inside-blocks-episode-3-block-copy/)\n* [å¯¹ Objective-C ä¸­ Block çš„è¿½æ¢](http://www.cnblogs.com/biosli/archive/2013/05/29/iOS_Objective-C_Block.html)\n* [LLVM ä¸­ block å®ç°æºç ](https://llvm.org/svn/llvm-project/compiler-rt/trunk/BlocksRuntime/Block_private.h)\n* [objective-c-blocks-quiz](http://blog.parse.com/2013/02/05/objective-c-blocks-quiz/)\n* [Blocks](http://rypress.com/tutorials/objective-c/blocks.html)\n* [iOSå¼€å‘-ç”±æµ…è‡³æ·±å­¦ä¹ block](http://www.jianshu.com/p/29d70274374b)\n","tags":["Favorite","æ•ˆç‡"],"categories":["iOS"]},{"title":"Appå¸¸è§å´©æºƒé—®é¢˜åˆ†æ","url":"/2016/10/23/2016-10-23-appchang-jian-beng-kui-wen-ti-fen-xi/","content":"\n### å‰è¨€\næ­¤æ–‡æ˜¯åŸºäºè¿™äº›å¹´å·¥ä½œä¸­é¡¹ç›®é‡Œé¢å¸¸è§å´©æºƒçš„ä¸€äº›æ€»ç»“ï¼Œæ•´ç†å‡ºæ¥æ–¹ä¾¿æŸ¥é˜…ï¼Œå¸Œæœ›å¯¹å¤§å®¶éƒ½æœ‰æ‰€å¸®åŠ©ã€‚\n\n### Appå¸¸è§å´©æºƒ\n\n1. æ•°ç»„ä¸‹æ ‡è¶Šç•Œ\n2. å­—å…¸æ„é€ ä¸ä¿®æ”¹\n3. `NSAttributedString`ç›¸å…³\n4. å‘ˆç°ä¸€ä¸ªç©ºæ§åˆ¶å™¨\n5. unrecognized selector\n6. æ“ä½œ`tableView`æ•°æ®\n7. Pushåˆ°åŒä¸€ä¸ªæ§åˆ¶å™¨å¤šæ¬¡\n\n\n#### 1.æ•°ç»„ä¸‹æ ‡è¶Šç•Œ\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```objc\n- (void)testArrayOutOfBounds\n{\n    NSArray *testArray = @[@1,@2,@3];\n    NSNumber *num = testArray[3];\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\n*Terminating app due to uncaught exception 'NSRangeException', reason: '\\*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]'*\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\nåœ¨æ•°ç»„ä¸­å–å€¼æ—¶éœ€è¦å…ˆè¿›ç»„ä¸‹æ ‡ç´¢å¼•è¾¹ç•Œæ£€æŸ¥ï¼Œå¦‚æœæ²¡æœ‰è¶Šç•Œæ–¹å¯å–å€¼ã€‚\n\n\n\n#### 2.å­—å…¸æ„é€ é€ ä¸ä¿®æ”¹\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```\n- (void)testDicSetNilValueCrash\n{\n    // æ„é€ ä¸å¯å˜å­—å…¸æ—¶ keyå’Œvalueéƒ½ä¸èƒ½ä¸ºç©º\n    NSString *nilValue = nil;\n    NSString *nilKey = nil;\n    NSDictionary *dic1 = @{@\"key\" : nilValue};\n    NSDictionary *dic2 = @{nilKey : @\"value\"};\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\n*Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '\\*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]'*\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\nåœ¨æˆ‘ä»¬ä½¿ç”¨å­—é¢é‡å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå­—å…¸çš„æ—¶å€™éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸ºå¾ˆå¯èƒ½å­—å…¸çš„é”®å’Œå€¼ä¸èƒ½ä¿è¯åŒæ—¶ä¸ä¸ºç©ºã€‚æœ‰æ½œåœ¨å´©æºƒçš„é£é™©ï¼Œè¿™ç§å´©æºƒéå¸¸å®¹æ˜“å‡ºç°ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œä½†æ˜¯å½“ä½ ç•™å¿ƒçš„è¯ä¹Ÿéå¸¸å¥½é¿å…ï¼Œå°±æ˜¯è®¾ç½®å­—å…¸çš„é”®æˆ–è€…å€¼çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦éç©ºï¼Œå¯å˜å­—å…¸è®¾ç½®æŸä¸ªé”®çš„å€¼æ˜¯å¯ä»¥ä¸ºç©ºï¼Œç›¸å½“äºåˆ é™¤å­—å…¸ä¸­çš„æŸä¸ªé”®å€¼ã€‚ä¸ºäº†ä½¿Appä¿æŒå¥å£®æ¨èä½¿ç”¨`KVO`æˆ–è€…å­—é¢é‡çš„æ–¹å¼æ¥è®¾ç½®å­—å…¸çš„å€¼\n\n```objc\n- (void)testMutableDicSetNilValueCrash\n{\n    NSString *value = nil;\n    NSMutableDictionary *mDic = [NSMutableDictionary dictionary];\n\n    // via Dic set, leading crash\n    [mDic setObject:value forKey:@\"key\"];\n\n    // via KVO set, it's safe\n    [mDic setValue:value forKey:@\"key\"];\n\n    // or via literal set, it's safe\n    mDic[@\"key\"] = value;\n}\n```\n\n\n#### 3.NSAttributedStringç›¸å…³\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```objc\n- (void)testAttributedStringInitCrash\n{\n    NSString *nilStr = nil;\n    NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:nilStr];\n}\n\n- (void)testAttributedStringAddAttributeCrash\n{\n    NSString *nonnullStr = @\"str\";\n    NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:nonnullStr];\n\n    NSString *nilValue = nil;\n    [attributedStr addAttribute:NSAttachmentAttributeName value:nilValue range:NSMakeRange(0, 1)];\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\n*Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'NSConcreteMutableAttributedString initWithString:: nil value'*\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\nåœ¨æ„é€ `NSMutableAttributedString`æˆ–è€…`NSAttributedString`éœ€è¦ç•™æ„ï¼Œè®¾ç½®çš„å±æ€§çš„å€¼æ˜¯å¦æœ‰å¯èƒ½å­˜åœ¨`nil`çš„æƒ…å†µã€‚è¿™ä¸ªå¾ˆå®¹æ˜“è¢«äººå¿½è§†ï¼Œå€¼å¾—æ³¨æ„ã€‚\n\n\n\n#### 4.å‘ˆç°ä¸€ä¸ªç©ºæ§åˆ¶å™¨\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```objc\n- (void)testPresentNilControllerCrash\n{\n    UIViewController *someVC = [UIViewController new];\n    UIViewController *presentVC = nil;\n\n    [someVC presentViewController:presentVC animated:YES completion:nil];\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\npresentä¸€ä¸ªç©ºçš„æ§åˆ¶å™¨å¯¼è‡´App crash\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\npresentä¸€ä¸ªæ–°æ§åˆ¶å™¨æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨æ‰æ‰§è¡Œï¼Œå¦åˆ™ç›´æ¥è¿”å›\n\n```objc\n- (void)testPresentNilControllerCrashFixed\n{\n    UIViewController *someVC = [UIViewController new];\n    UIViewController *presentVC = [UIViewController new];\n    \n    if (presentVC) {\n        [someVC presentViewController:presentVC animated:YES completion:nil];\n    }\n}\n```\n\n#### 5.unrecognized selector \n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```objc\n- (void)testUnrecogernizedSelectorCash\n{\n    [self performSelector:@selector(testSel) withObject:nil afterDelay:0];\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\n*Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController testSel]: unrecognized selector sent to instance 0x7ffd41609d10'*\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\næ­¤ç±»å´©æºƒç»å¸¸å‡ºç°ï¼Œç‰¹åˆ«æ˜¯å½“æœåŠ¡å™¨æ•°æ®æ”¾å›å¼‚å¸¸æ—¶ï¼Œæ¯”å¦‚æœ¬æ¥åº”è¯¥è¿”å›ä¸€ä¸ª`NSString`ç±»å‹å­—ç¬¦ä¸²ï¼Œç»“æœè¿”å›`NULL`,å½“ä½ è°ƒç”¨å­—ç¬¦ä¸²çš„`length`æ–¹å¼æ—¶ï¼Œå¯¼è‡´Appå´©æºƒã€‚é¢„é˜²æ–¹æ³•ï¼Œé‡è¦çš„åœ°æ–¹å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­å†è°ƒç”¨è¯¥ç±»çš„ç›¸å…³æ–¹æ³•ï¼Œæˆ–è€…å†™ä¸€ä¸ªåˆ†ç±»ç»Ÿä¸€å¤„ç†æ­¤ç±»é€»è¾‘ã€‚\n\n\n\n\n#### 6.æ“ä½œtableViewæ•°æ®\n\n**ç¤ºä¾‹ä»£ç **ï¼š\n\n```objc\n- (void)testTableViewUpdateCrash\n{\n    NSIndexPath *insertIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];\n    NSIndexPath *deleteIndexPath = [NSIndexPath indexPathForRow:1 inSection:0];\n    NSIndexPath *reloadIndexPath = [NSIndexPath indexPathForRow:2 inSection:0];\n    NSIndexPath *moved1IndexPath = [NSIndexPath indexPathForRow:3 inSection:0];\n    NSIndexPath *moved2IndexPath = [NSIndexPath indexPathForRow:4 inSection:0];\n    [self.tableView beginUpdates];\n\n    [self.tableView insertRowsAtIndexPaths:@[insertIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];\n    [self.tableView deleteRowsAtIndexPaths:@[deleteIndexPath]withRowAnimation:UITableViewRowAnimationAutomatic];\n    [self.tableView reloadRowsAtIndexPaths:@[reloadIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];\n    [self.tableView moveRowAtIndexPath:moved1IndexPath toIndexPath:moved2IndexPath];\n\n    [self.tableView endUpdates];\n}\n```\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\n*Fatal Exception: NSInternalInconsistencyException*\n\n*Invalid update: invalid number of sections. The number of sections contained in the table view after the update (1) must be equal to the number of sections contained in the table view before the update (1), plus or minus the number of sections inserted or deleted (1 inserted, 0 deleted).*\n\n**é¢„é˜²æ–¹æ¡ˆ**ï¼š\n\nå½“éœ€è¦åŠ¨æ€æ›´æ–°`tableView`çš„æ•°æ®æ—¶ï¼Œè®¡ç®—å¥½æ¨¡å‹çš„æ•°æ®ä½¿æ¨¡å‹çš„æ•°æ®å’Œæ›´æ–°`tableView`çš„åçš„æ•°æ®ä¿æŒåŒæ­¥ã€‚\n\n\n\n\n#### 7.Pushåˆ°åŒä¸€ä¸ªæ§åˆ¶å™¨å¤šæ¬¡\n\n**å¼‚å¸¸ç°è±¡**ï¼š\n\nFatal Exception: NSInvalidArgumentException\n\nPushing the same view controller instance more than once is not supported (<PPSelectPayMethodViewControllerIOS7: 0x10d7e7f10>)\n\n**å‚è€ƒé“¾æ¥**ï¼š\n\n* [é˜²æ­¢ç‚¹å‡» Cell æ—¶ ViewController è¢«é‡å¤ Push](https://github.com/nixzhu/dev-blog/blob/master/2016-01-04-duplicate-push.md)\n\n\nä»¥ä¸Šå°±æ˜¯å·¥ä½œä¸­å¸¸è§çš„å¼‚å¸¸å´©æºƒä»¥åŠå¤„ç†æ–¹æ¡ˆï¼Œä¸‹é¢çš„å¼‚å¸¸åˆ†ç±»å†…å®¹æ¥è‡ª`Apple`çš„å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŸ¥é˜…ã€‚â˜•ï¸\n\n\n### Appleå®˜æ–¹å¸¸è§å¼‚å¸¸ç±»å‹(Exception types)\n\n1. è®¿é—®ä¸€å—åå†…å­˜`[EXC_BAD_ACCESS] // SIGSEGV // SIGBUS]`\n2. å¼‚å¸¸é€€å‡º`[EXC_CRASH // SIGABRT]`\n3. è¿½è¸ªå—é™`[EXC_BREAKPOINT // SIGTRAP]`\n4. éæ³•æŒ‡ä»¤`[EXC_BAD_INSTRUCTION // SIGILL]`\n5. è¢«ä¿æŠ¤çš„èµ„æºé­åˆ°ä¾µå®³`[EXC_GUARD]`\n6. èµ„æºé™åˆ¶`[EXC_RESOURCE]`\n7. å…¶ä»–å¼‚å¸¸ç±»å‹\n\n#### 1.è®¿é—®ä¸€å—åå†…å­˜(Bad Memory Access)\n\nå½“ç¨‹åºè¯•å›¾æ¥å…¥æ— æ•ˆå†…å®¹æˆ–è€…å°è¯•ä»¥ä¸è¢«å…è®¸çš„æ–¹å¼æ¥å…¥ç”±äºå†…å­˜çš„ä¿æŠ¤ç­‰çº§(ä¾‹å¦‚ï¼Œå°è¯•å†™å…¥åªè¯»çš„å†…å­˜)ã€‚`Exception Subtype`å­—æ®µåŒ…å«ä¸€ä¸ª**kern_return_t**ç»“æ„ä½“ç”¨æ¥æè¿°é”™è¯¯å’Œä¸æ­£ç¡®æ¥å…¥çš„å†…å­˜åœ°å€ã€‚\n\nä¸‹é¢æ˜¯ä¸€äº›è°ƒè¯•åå†…å­˜æ¥å…¥å¯¼è‡´å´©æºƒçš„å»ºè®®ï¼š\n\n* å‡å¦‚**objc_msgSend**æˆ–è€…**objc_release**åœ¨å´©æºƒçº¿ç¨‹å›æº¯(**Backtraces**)çš„é¡¶éƒ¨é™„è¿‘,è¿™ä¸ªçº¿ç¨‹å¯èƒ½å°è¯•ç»™ä¸€ä¸ªé‡Šæ”¾çš„å¯¹è±¡å‘æ¶ˆæ¯ã€‚ä½ åº”è¯¥profileåº”ç”¨ä½¿ç”¨**Zombies instrument**æ¥æ›´å¥½çš„ç†è§£è¿™ä¸ªå´©æºƒå‘ç”Ÿçš„æ¡ä»¶ã€‚\n* å‡å¦‚**gpus_ReturnNotPermittedKillClient**åœ¨å´©æºƒçº¿ç¨‹å›æº¯(**Backtraces**)çš„é¡¶éƒ¨é™„è¿‘ï¼Œçº¿ç¨‹è¢«ç»ˆç»“å› ä¸ºå®ƒå°è¯•ç”¨**OpenGL ES**æˆ–è€…**Metal**æ‰§è¡Œæ¸²æŸ“å½“ç¨‹åºå¤„äºåå°æ—¶ã€‚æŸ¥çœ‹[QA1766: How to fix OpenGL ES application crashes when moving to the background](https://developer.apple.com/library/ios/qa/qa1766/_index.html)\n* æ‰“å¼€`Address Sanitizer`è¿è¡Œä½ çš„åº”ç”¨ã€‚Address Sanitizeræ·»åŠ äº†é¢å¤–çš„è¯´æ˜åœ¨å†…å®¹æ¥å…¥å½“ä½ ç¼–è¯‘ä»£ç çš„æ—¶å€™ã€‚éšç€ä½ åº”ç”¨çš„è¿è¡Œï¼ŒXcodeå°†âš ï¸ä½ å‡å¦‚å†…å­˜ä»¥ä¸€ç§å¯èƒ½å¯¼è‡´å´©æºƒçš„æ–¹å¼æ¥å…¥ã€‚\n\n#### 2.å¼‚å¸¸é€€å‡ºï¼ˆAbnormal Exitï¼‰\n\nç¨‹åºå¼‚å¸¸é€€å‡ºï¼Œæ˜¯æœ€å¸¸è§å¯¼è‡´è¿™ç±»å¼‚å¸¸å´©æºƒçš„åŸå› æ˜¯æ•è·åˆ°`Objective-C/C++`å¼‚å¸¸å’Œè°ƒç”¨äº†`abort()`å‡½æ•°ã€‚\n\n**App Extensions**å°†è¢«ç»ˆç»“å‘ç”Ÿè¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œå‡å¦‚ä»–ä»¬åˆå§‹åŒ–èŠ±è´¹å¤ªå¤šçš„æ—¶é—´(*watchdog*ç»ˆç»“)ã€‚å‡å¦‚ä¸€ä¸ª**extension**ç”±äºè½½å…¥æ—¶é—´å¤ªé•¿è¢«ç»ˆç»“ï¼Œäº§ç”Ÿå´©æºƒæŠ¥å‘Šçš„**Exception Subtype**å°†æ˜¯*LAUNCH_HANG*ã€‚å› ä¸º**extensions**å¹¶æ²¡æœ‰ä¸€ä¸ª`main`å‡½æ•°ï¼Œä»»ä½•èŠ±é”€åœ¨åˆå§‹åŒ–çš„æ—¶é—´éƒ½å‘ç”Ÿåœ¨**static constructors**å’Œå‘ˆç°åœ¨ä½ çš„**extensions**å’Œä¾èµ–åº“çš„`+load`æ–¹æ³•ã€‚ä½ åº”è¯¥å°½å¯èƒ½çš„å»¶è¿Ÿåšè¿™äº›å·¥ä½œã€‚\n\n#### 3.è¿½è¸ªå—é™ï¼ˆTrace Trapï¼‰\n\nå’Œå¼‚å¸¸é€€å‡ºç±»ä¼¼ï¼Œè¿™ç§å¼‚å¸¸çš„ç›®çš„æ˜¯ç»™ä¸€ä¸ªè¿½åŠ çš„è°ƒè¯•å™¨ï¼Œè®©å®ƒæœ‰æœºä¼šæ¥æ‰“æ–­åœ¨ä¸€ä¸ªå½“å®ƒæ‰§è¡Œæ—¶å€™æŒ‡å®šçš„ç‚¹çš„è¿›ç¨‹ã€‚ä½ å¯ä»¥ä½¿ç”¨`__builtin_trap()`å‡½æ•°åœ¨ä½ çš„ä»£ç ä¸­æ¥è§¦å‘è¿™ä¸ªå¼‚å¸¸ã€‚å‡å¦‚æ²¡æœ‰è°ƒè¯•å™¨è¿½åŠ çš„è¯ï¼Œçº¿ç¨‹å°†è¢«ç»ˆç»“å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚\n\nä½ç­‰çº§çš„åº“ï¼ˆä¾‹å¦‚**libdispatch**ï¼‰å°†å—é™è¿™ä¸ªè¿›ç¨‹ä¸€æ—¦é‡åˆ°ä¸€ä¸ªé‡å¤§çš„é”™è¯¯ã€‚å…³äºé”™è¯¯çš„é¢å¤–ä¿¡æ¯å¯ä»¥åœ¨[Additional Diagnostic Information](https://developer.apple.com/library/content/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-APPINFO)ç« èŠ‚ä¸­çš„å´©æºƒæŠ¥å‘Šæ‰¾åˆ°ï¼Œæˆ–è€…åœ¨è®¾å¤‡çš„æ§åˆ¶å°ã€‚\n\nå‡å¦‚åœ¨`runtime`é‡åˆ°è¯¸å¦‚ä¸‹é¢çš„ä¸€ä¸ªæ„å¤–çš„æ¡ä»¶ï¼Œ`Swift`ä»£ç å°†ç»ˆç»“å‡ºç°è¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼š\n\n* éå¯é€‰ç±»å‹å¸¦æœ‰ä¸€ä¸ª`nil`å€¼\n* é”™è¯¯çš„å¼ºåˆ¶ç±»å‹è½¬æ¢\n\næŸ¥çœ‹[Backtraces](https://developer.apple.com/library/content/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-STACKTRACE)æ¥å†³å‘ç”Ÿå®šå¼‚å¸¸æ¡ä»¶çš„ä½ç½®ã€‚é¢å¤–çš„ä¿¡æ¯å¯èƒ½å·²ç»åœ¨è®¾å¤‡çš„æ§åˆ¶å°æ‰“å°å‡ºæ¥äº†ã€‚ä½ åº”è¯¥ä¿®æ”¹å´©æºƒå¤„çš„ä»£ç æ¥ä¼˜é›…çš„å¤„ç†`runtime`é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨[Optional Binding](https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html)è€Œä¸æ˜¯å¼ºåˆ¶è§£åŒ…ä¸€ä¸ªå¯é€‰å˜é‡ã€‚\n\n#### 4.éæ³•æŒ‡ä»¤ï¼ˆIllegal Instructionï¼‰\n\nè¿›ç¨‹å°è¯•æ‰§è¡Œä¸€ä¸ªéæ³•æˆ–è€…æœªå®šä¹‰çš„æŒ‡ä»¤ã€‚è¿›ç¨‹å¯èƒ½å·²ç»å°è¯•è·³è¿›åˆ°ä¸€ä¸ªæ— æ•ˆçš„åœ°å€é€šè¿‡ä¸€ä¸ªé…ç½®é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆã€‚åœ¨`Intel`å¤„ç†å™¨ä¸­ï¼Œ`ud2`æ“ä½œç å¯¼è‡´ä¸€ä¸ª**EXC_BAD_INSTRUCTION**å¼‚å¸¸ï¼Œä½†æ˜¯å®ƒé€šå¸¸è¢«ç”¨æ¥å›°ä½è¿›ç¨‹è¾¾åˆ°è°ƒè¯•çš„ç›®çš„ã€‚`Swift`ä»£ç åœ¨`Intel`å¤„ç†å™¨ä¸­å°†ä»¥è¿™ç§å¼‚å¸¸ç»ˆç»“ï¼Œå‡å¦‚åœ¨`runtime`ä½ç½®æ¡ä»¶å‘ç”Ÿã€‚æ›´å¤šè¯¦æƒ…æŸ¥çœ‹**Trace Trap**ã€‚\n\n#### 5.è¢«ä¿æŠ¤çš„èµ„æºé­åˆ°ä¾µå®³ï¼ˆGuarded Resource Violationï¼‰\n\nè¿›ç¨‹ä¾µçŠ¯ä¸€ä¸ªè¢«ä¿æŠ¤çš„èµ„æºã€‚ç³»ç»Ÿåº“å¯èƒ½æŸä¸ªæ–‡ä»¶çš„æè¿°å™¨æˆ`guarded`ï¼Œåœ¨é‚£ä»¥åï¼Œæ‰€æœ‰ä¸æ­£å¸¸çš„æ“ä½œåœ¨è¿™äº›æè¿°å™¨ä¸Šéƒ½å°†è§¦å‘ä¸€ä¸ª**EXC_GUARD**å¼‚å¸¸ï¼ˆå½“å®ƒæƒ³æ“ä½œåœ¨è¿™äº›æ–‡ä»¶æè¿°å™¨ä¸Šï¼Œç³»ç»Ÿå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„`guarded`æ ‡è®°çš„ç§æœ‰APIsï¼‰ã€‚è¿™å¯ä»¥å¸®ä½ å‘ä¸‹å¿«é€Ÿè¿½è¸ªé—®é¢˜ï¼Œä¾‹å¦‚å…³é—­ä¸€ä¸ªå·²ç»è¢«ç³»åº“æ‰“å¼€çš„æ–‡ä»¶æè¿°å™¨ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä¸€ä¸ªappå…³é—­æ–‡ä»¶ç§’æ€å™¨é€šè¿‡ä½¿ç”¨æˆªå›¾`SQLite`æ–‡ä»¶åˆ°ä¸€ä¸ª`Core Data`å­˜å‚¨ï¼Œ`Core Data`å°†ä¼šåœ¨éšåè¯¡å¼‚çš„å´©æºƒã€‚**guard exception**å°†è®©è¿™äº›é—®é¢˜å°½æ—©å¼•èµ·ä½ çš„æ³¨æ„ï¼Œè¿™æ ·ä¹Ÿè®©ä»–ä»¬å˜å¾—æ›´å®¹æ˜“è°ƒè¯•ã€‚\n\nå´©æºƒæŠ¥å‘Šæ¥è‡ªæ–°ç‰ˆçš„`iOS`åŒ…å«äº†äººç±»å¯è¯»çš„è¯¦ç»†ä¿¡æ¯å…³äºå¼•èµ·`EXC_GUARD`å¼‚å¸¸çš„æ“ä½œåœ¨`Exception Subtype`å’Œ`Exception Message`å­—æ®µä¸­ã€‚åœ¨æ¥è‡ª`macOS`æˆ–è€…è€ç‰ˆæœ¬çš„`iOS`çš„å´©æºƒæŠ¥å‘Šä¸­ï¼Œè¿™äº›ä¿¡æ¯è¢«ç¼–ç åˆ°ç¬¬ä¸€ä¸ª` Exception Code`å°±åƒä¸€ä¸ªåˆ†è§£æˆå¦‚ä¸‹çš„ä½æ®µï¼š\n\n* **[63:61] - Guard Type**ï¼šè¢«ä¿æŠ¤çš„èµ„æºç±»å‹ã€‚`0x2`ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶æè¿°å™¨èµ„æºã€‚\n* **[60:32] - Flavor**ï¼šä¾µå®³è¢«å¤„ç½šæ—¶çš„æ¡ä»¶\n\t* å‡å¦‚ç¬¬ä¸€ä¸ª`(1 << 0)`ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•æ‰§è¡Œ`close()`å‡½æ•°åœ¨ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚\n\t* å‡å¦‚ç¬¬äºŒä¸ª`(1 << 1)`ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•æ‰§è¡Œ`dup()`ï¼Œ`dup2()`ï¼Œæˆ–è€…`fcntl()`å¸¦`F_DUPFD`æˆ–è€…`F_DUPFD_CLOEXEC`å‘½ä»¤åœ¨ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚\n\t* å‡å¦‚ç¬¬ä¸‰ä¸ª`(1 << 2)`ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•é€šè¿‡ä¸€ä¸ª`socket`å‘é€ç»™ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚\n\t* å‡å¦‚ç¬¬ä¸‰ä¸ª`(1 << 3)`ä½è¢«è®¾ç½®ï¼Œè¿›ç¨‹å°è¯•å†™å…¥åˆ°ä¸€ä¸ªå—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚\n* **[31:0] - File Descriptor**ï¼šè¿›ç¨‹å°è¯•ä¿®æ”¹çš„å—ä¿æŠ¤çš„æ–‡ä»¶æè¿°å™¨ã€‚\n\n#### 6.èµ„æºé™åˆ¶ï¼ˆResource Limitï¼‰\n\nè¿›ç¨‹è¶…å‡ºäº†ä¸€ä¸ªèµ„æºæ¶ˆè€—çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªæ¥è‡ªæ“ä½œç³»ç»Ÿé€šçŸ¥ï¼Œå‘Šè¯‰è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„èµ„æºè¿‡å¤šã€‚ç²¾ç¡®çš„èµ„æºåˆ—åœ¨`Exception Subtype`å­—æ®µä¸­ã€‚å‡å¦‚`Exception Note`å­—æ®µåŒ…å«`NON-FATAL CONDITION`ï¼Œè¿›ç¨‹ä¸ä¼šè¢«ç»ˆç»“å³ä½¿äº§ç”Ÿäº†ä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚\n\n* å¼‚å¸¸å­ç±»å‹`MEMORY`è¡¨æ˜è¿›ç¨‹å·²ç»è¶Šè¿‡ç³»ç»Ÿåº”ç”¨çš„å†…å­˜é™åˆ¶ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªç»ˆç»“çš„å…ˆå…†ç”±äºè¶…é¢çš„ä½¿ç”¨å†…å­˜ã€‚\n* å¼‚å¸¸å­ç±»å‹`WAKEUPS`è¡¨æ˜åœ¨è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ¯ç§’è¢«å”¤é†’å¤ªå¤šæ¬¡ï¼Œè¿™å¼ºåˆ¶`CPU`éå¸¸é¢‘ç¹çš„å”¤é†’æ¶ˆè€—ç”µæ± å¯¿å‘½ã€‚\n\n\tå…¸å‹çš„ï¼Œè¿™ä¸ªé€šè¿‡ç”±çº¿ç¨‹ä¸çº¿ç¨‹çš„é€šä¿¡äº§ç”Ÿï¼ˆé€šå¸¸æ˜¯ä½¿ç”¨`peformSelector:onThread:`æˆ–`dispatch_async`ï¼‰,é‚£æ ·æ— æ„çš„å‘ç”Ÿäº†è¿œè¿œè¶…å‡ºå®ƒæ­£å¸¸åº”è¯¥çš„åˆ‡æ¢é¢‘ç‡ã€‚å› ä¸ºé€šä¿¡çš„åè°ƒå‘ç”Ÿå¾—éå¸¸é¢‘ç¹è€Œå‡ºå‘æ­¤ç±»çš„å¼‚å¸¸ï¼Œè¿™ä¸ªé€šå¸¸å’Œå¤šä¸ªåå°çº¿ç¨‹æœ‰ç€ç›¸ä¼¼`Backtraces` -- è¡¨æ˜é‚£äº›åœ°æ–¹å‘ç”Ÿè¿‡é€šä¿¡ã€‚\n\t\n#### 7.å…¶ä»–å¼‚å¸¸ç±»å‹ï¼ˆOther Exception Typesï¼‰\n\nä¸€äº›å´©æºƒæŠ¥å‘Šå¯èƒ½å«æœ‰ä¸€ä¸ªæœªå‘½åçš„`Exception Type`ï¼Œå°†ä»¥ä¸€ä¸ª16è¿›åˆ¶çš„å€¼ï¼ˆä¾‹å¦‚ï¼Œ00000020ï¼‰çš„å½¢å¼æ‰“å°ã€‚å‡å¦‚ä½ çš„è®¾å¤‡æ”¶åˆ°äº†ä¸€ä¸ªè¿™æ ·çš„å´©æºƒæŠ¥å‘Šï¼Œç›´æ¥æŸ¥çœ‹`Exception Codes`å­—æ®µå¯»æ‰¾æ›´å¤šçš„ä¿¡æ¯ã€‚\n\n* å¼‚å¸¸ä»£ç `0xbaaaaaad`è¡¨æ˜è®°å½•æ˜¯æ•´ä¸ªç³»ç»Ÿçš„`stackshot`ï¼Œä¸æ˜¯ä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ä¸ºäº†è·å¾—ä¸€ä¸ª`stackshot`ï¼ŒæŒ‰`Home`é”®å’Œä»»æ„éŸ³é‡é”®ã€‚è¿™äº›è®°å½•ç»å¸¸è¢«ç”¨æˆ·å¶ç„¶åˆ›å»ºï¼Œå¹¶ä¸è¡¨æ˜æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚\n* å¼‚å¸¸ä»£ç `0xbad22222`è¡¨æ˜ä¸€ä¸ª`VoIP`åº”ç”¨å·²ç»è¢«`iOS`ç»ˆç»“ï¼Œå› ä¸ºå®ƒå¯åŠ¨å¾—å¤ªé¢‘ç¹ã€‚\n* å¼‚å¸¸ä»£ç `0x8badf00d`è¡¨æ˜åº”ç”¨å·²ç»è¢«`iOS`ç»ˆç»“å› ä¸ºå‘ç”Ÿ`watchdog`è¶…æ—¶ã€‚åº”ç”¨èŠ±è´¹å¤ªé•¿æ—¶é—´å¯åŠ¨ï¼Œç»ˆç»“ï¼Œæˆ–è€…å“åº”ç³»ç»Ÿäº‹ä»¶ã€‚é€šå¸¸å¯¼è‡´è¿™æ­Œé—®é¢˜æ˜¯åšäº†[åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œäº†åŒæ­¥çš„ç½‘ç»œè¯·æ±‚](http://developer.apple.com/library/ios/qa/qa1693/)ã€‚æ— è®ºä»€ä¹ˆæ“ä½œåœ¨`Thread 0`éƒ½éœ€è¦ç§»åŠ¨åˆ°åå°çº¿ç¨‹ï¼Œæˆ–è€…å¼‚æ­¥å¤„ç†ï¼Œä»¥å…å®ƒé˜»å¡ä¸»çº¿ç¨‹ã€‚\n* å¼‚å¸¸ä»£ç `0xc00010ff`è¡¨æ˜å¼•ç”¨è¢«æ“ä½œç³»ç»Ÿç»ˆç»“ä¸ºäº†å“åº”ä¸€ä¸ªå‘çƒ­äº‹ä»¶ã€‚è¿™ä¸ªå¯èƒ½ç”±äºä¸€ä¸ªå‘ç”Ÿå´©æºƒçš„ç‰¹å®šçš„è®¾å¤‡çš„é—®é¢˜æˆ–è€…ç¯å¢ƒè¢«æ“ä½œå¯¼è‡´ã€‚ä¸ºäº†ä½¿ä½ çš„åº”ç”¨æ›´é«˜æ•ˆè¿è¡Œçš„å»ºè®®ï¼ŒæŸ¥çœ‹**WWDC session**[ iOS Performance and Power Optimization with Instruments](https://developer.apple.com/videos/wwdc/2011/?id=312)ã€‚\n* å¼‚å¸¸ä»£ç `0xdead10cc`è¡¨æ˜åº”ç”¨è¢«`iOS`ç»ˆç»“ï¼Œç”±äºå½“åœ¨åå°è¿è¡Œæ—¶å®ƒæŒæœ‰äº†ä¸€ä¸ªç³»ç»Ÿçš„èµ„æºï¼ˆåƒé€šä¿¡å½•æ•°æ®åº“ï¼‰ã€‚\n* å¼‚å¸¸ä»£ç `0xdeadfa11`è¡¨æ˜åº”ç”¨è¢«ç”¨æˆ·å¼ºåˆ¶é€€å‡ºã€‚å¼ºåˆ¶é€€å‡ºå‘ç”Ÿåœ¨å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æŒ‰ä¸‹å¼€å…³æœºæŒ‰é’®ç›´åˆ°\"æ»‘åŠ¨æ¥å…³æœº\"å‡ºç°ï¼Œç„¶ååœ¨æŒ‰ä¸‹Homeé”®ã€‚è¿™æ˜¯åˆç†çš„å‡å¦‚ç”¨æˆ·è¿™æ ·åšäº†ï¼Œå› ä¸ºåº”ç”¨å·²ç»å˜å¾—ä¸å¯å“åº”ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯ - å¼ºåˆ¶é€€å‡ºä»»ä½•æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ã€‚\n\n\t> æ³¨æ„ï¼šç»ˆç»“ä¸€ä¸ªæŒ‚èµ·çš„appé€šè¿‡ä»å¤šä»»åŠ¡å…³ç³»é¢æ¿ä¸­ç§»é™¤å¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ªå´©æºƒæŠ¥å‘Šã€‚ä¸€æ—¦ä¸€ä¸ªappè¢«æŒ‚èµ·ï¼Œ**iOS**å®ƒæœ‰èµ„æ ¼åœ¨ä»»ä½•æ—¶å€™ç»ˆç»“å®ƒï¼Œæ‰€æœ‰æ²¡æœ‰å´©æºƒæŠ¥å‘Šäº§ç”Ÿã€‚\n\n### å‚è€ƒèµ„æ–™\n\n* [Understanding and Analyzing Application Crash Reports](https://developer.apple.com/library/content/technotes/tn2151/_index.html)\n* [Analyzing Crash Reports](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/AnalyzingCrashReports/AnalyzingCrashReports.html)\n\n","tags":["æ•ˆç‡"],"categories":["iOS"]},{"title":"å¿«é€Ÿå°è£…Airbnbé£æ ¼Loadingview","url":"/2016/09/10/2016-09-10-kuai-su-feng-zhuang-airbnbfeng-ge-loadingview/","content":"\n### å‰è¨€\n\nä¸€ç›´åœ¨è§‚å¯Ÿå„ç§Appçš„`LoadingView`ï¼Œæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ˜¯`MBProgressVHUD`ï¼Œ`SVProgressHUD`ï¼Œè¿™ä¸¤ä¸ªä½¿ç”¨å¾—éå¸¸å¹¿æ³›ï¼Œå¤§åˆ°QQï¼Œæ”¯ä»˜å®ï¼Œå°åˆ°å„ç§ä¸çŸ¥é“åçš„Appï¼Œé•¿æ—¶é—´çš„è¿­ä»£è®©å®ƒä»¬çš„é€»è¾‘éå¸¸å®Œå–„ï¼ŒåŒæ—¶ä¹Ÿå¯¼è‡´äº†æœ‰äº›ç´¯èµ˜ï¼Œå¦‚æœæŠŠå®ƒä»¬å½“ä¸€ä¸ªäº§å“æ¥åˆ†æï¼Œå¯ä»¥çœ‹å‡ºï¼Œå®ƒä»¬åœ¨ä¸æ–­åœ°å¢åŠ éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯ï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªéå¸¸ç®€æ´çš„HUDæ²¡æœ‰æˆ‘ä»¬ä¸éœ€è¦çš„é‚£äº›å¤šä½™çš„é€»è¾‘åªæ˜¯è´Ÿè´£æ˜¾ç¤ºæŒ‡ç¤ºå’Œéšè—å‘¢ï¼Ÿ\n\nå¥½åƒæ²¡æœ‰ï¼Œæ‰€æœ‰ä»Šå¤©åŠ¨æ‰‹å‡†å¤‡è‡ªå·±å°è£…ä¸€ä¸ª`LoadingView`ï¼Œçµæ„Ÿæ¥è‡ªAirbnbï¼Œç”¨è¿‡Airbnbçš„åŒå­¦éƒ½çŸ¥é“ï¼Œå®ƒçš„`LoadingView`å¾ˆæœ‰é£æ ¼,Airbnbæ˜¯å‡ å¼ å›¾ç‰‡å¾ªç¯ç¿»è½¬åˆ‡æ¢ï¼Œå½“ç„¶æˆ‘ä¸å‡†å¤‡å¤åˆ¶ä»–ä»¬çš„ideaï¼Œæˆ‘å‡†å¤‡åšä¸€ä¸ªå¾ªç¯å·¦å³ä¸Šä¸‹åˆ‡æ¢çš„`LoadingView`ã€‚\n\n<img src=\"/images/loading_img/loading_img_01.jpg\" width=\"375\" height=\"667\">\n\nåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œæœ€ç»ˆæ•ˆæœçš„åŸå‹å›¾\n\n![RFLoadingView](/images/loading_img/loading_img_02.jpg)\n\n### æ€è·¯\nåˆ†æä¸€ä¸‹æ€è·¯ï¼š\n\n * å››æ¡è™šçº¿äº¤å‰å½¢æˆçš„åŒºåŸŸå°±æ˜¯æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°çš„å›¾ç‰‡\n * é¦–å…ˆå‡†å¤‡ä¸¤å¼ å›¾ç‰‡ï¼Œä½ç½® ä¸­+ä¸Š\n * å¼€å§‹ç¬¬ä¸€æ®µåŠ¨ç”»ï¼Œå‘ä¸‹åˆ‡æ¢ï¼Œä½ç½® å˜æˆ ä¸­+ä¸‹\n * ç¬¬ä¸€æ®µåŠ¨ç”»ç»“æŸï¼Œå°†ä¸‹é¢çš„å›¾ç‰‡ç§»åŠ¨åˆ°å³è¾¹ï¼Œå‡†å¤‡å¼€å§‹ç¬¬äºŒæ®µåŠ¨ç”»\n * ç¬¬äºŒåŠ¨ç”»è·Ÿç¬¬ä¸€æ®µç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘æ˜¯ä»å³å‘å·¦ï¼ŒåŠ¨ç”»ç»“æŸå ä½ç½®å˜æˆ ä¸­+å·¦\n * å°†å·¦è¾¹çš„å›¾ç‰‡ç§»åŠ¨åˆ°ä¸Šæ–¹ä½ç½®ï¼Œå®Œæˆä¸€ä¸ªå¾ªç¯\n\n ä¸ºäº†ä½¿åŠ¨ç”»æ›´æµç•…ä¸è‡³äºç”Ÿç¡¬ï¼Œæˆ‘ä»¬ä½¿ç”¨iOS7æ¨å‡ºçš„å¸¦å¼¹ç°§æ•ˆæœçš„API\n\n```objc\n \n+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0);\n \n```\n\n###  APIæ¥å£\n\nåœ¨APIæ¥å£è®¾è®¡ä¸Šï¼Œæˆ‘å¸Œæœ›å°½é‡ç®€å•å®ç”¨ï¼Œå°è£…äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºï¼Œä¸€ä¸ªç”¨æ¥éšè—ï¼Œå¯ä»¥æŒ‡å®šæ˜¾ç¤ºåˆ°æŸä¸ªviewï¼Œä»¥åŠæŒ‡å®šæ˜¾ç¤ºå’Œéšè—æ—¶æ˜¯å¦ä½¿ç”¨åŠ¨ç”»ã€‚\n\n```objc\n \n+ (void)showViewAddedTo:(UIView *)view animated:(BOOL)animated;\n+ (void)hideViewForView:(UIView *)view animated:(BOOL)animated;\n\n```\n\n###  APIå®ç°\n\næ ¹æ®åˆšæ‰çš„åˆ†æï¼Œæ ¸å¿ƒçš„åŠ¨ç”»å®ç°å·²ç»æœ‰äº†æ€è·¯ï¼Œç°åœ¨å°±æ˜¯æ€ä¹ˆè®¾è®¡å†…éƒ¨ä»£ç å®ç°ï¼Œä¸ºäº†æ–¹ä¾¿æ˜¾ç¤ºè’™ç‰ˆé˜»æ­¢åŠ è½½çš„æ—¶å€™ç”¨æˆ·äº¤äº’ï¼Œæˆ‘æŠŠviewçš„èƒŒæ™¯é¢œè‰²è®¾ç½®äº†ä¸€ä¸ªæ·¡ç°è‰²ï¼Œviewçš„ä¸­é—´æœ‰ä¸‰ä¸ªå­viewï¼Œä¸€ä¸ªæ˜¯ä½äºä¸­é—´çš„å®¹å™¨`centralView`,è´Ÿè´£æ˜¾ç¤ºæˆ‘ä»¬æ‰€çœ‹åˆ°çš„åŒºåŸŸï¼Œæ–¹ä¾¿å®ç°åœ†è§’å’ŒåŠ¨ç”»æ•ˆæœï¼Œé‡Œé¢åŠ å…¥ä¸¤ä¸ªå­viewï¼Œ`firstView`å’Œ`secondView`ç”¨äºæ˜¾ç¤ºåŠ¨ç”»åˆ‡æ¢çš„å›¾ç‰‡ã€‚\n\nå†…éƒ¨æ¥å£å¤§æ¦‚è¿™æ ·\n\n```objc\n\n@property (nonatomic, strong) UIView      *centralView;\n@property (nonatomic, strong) UIImageView *firstView;\n@property (nonatomic, strong) UIImageView *secondView;\n\n```\n\nä¸ºäº†é˜²æ­¢å¤šæ¬¡æ·»åŠ `LoadingView`ï¼Œåœ¨æ¯æ¬¡æ·»åŠ å‰ï¼Œæˆ‘ä»¬ä¼šæŸ¥æ‰¾è¯¥viewæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è·³è¿‡æ·»åŠ æ“ä½œã€‚åå‘éå†ï¼Œå¿«é€ŸæŸ¥æ‰¾ã€‚\n\n```objc\n\n+ (RFLoadingView *)loadingViewForView:(UIView *)view\n{\n    NSEnumerator *subviewsEnum = [view.subviews reverseObjectEnumerator];\n    for (UIView *subview in subviewsEnum) {\n        if ([subview isKindOfClass:self]) {\n            return (RFLoadingView *)subview;\n        }\n    }\n    \n    return nil;\n}\n\n```\n\nåŠ¨ç”»æ ¸å¿ƒå®ç°,ä¸¤ç«¯åŠ¨ç”»ï¼Œå°è£…æˆä¸¤ä¸ªæ–¹æ³•\n\n* `- (void)animatedImageFromTopToBottom`\n* `- (void)animatedImageFromTopToBottom`\n\nå…·ä½“å®ç°å¦‚ä¸‹\n\n```objc\n\n- (void)animatedImageFromTopToBottom\n{\n    [UIView animateWithDuration:0.3 delay:0.5 usingSpringWithDamping:0.7 initialSpringVelocity:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{\n        _firstView.centerY  += kCenterViewSize;\n        _secondView.centerY += kCenterViewSize;\n    } completion:^(BOOL finished) {\n        _firstView.centerX += kCenterViewSize;\n        _firstView.centerY -= kCenterViewSize;\n        \n        [self changeFirstImage];\n        [self animatedImageFromRightToLeft];\n    }];\n}\n\n- (void)animatedImageFromRightToLeft\n{\n    \n    [UIView animateWithDuration:0.3 delay:0.5 usingSpringWithDamping:0.7 initialSpringVelocity:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{\n        _firstView.centerX  -= kCenterViewSize;\n        _secondView.centerX -= kCenterViewSize;\n    } completion:^(BOOL finished) {\n        _secondView.centerX += kCenterViewSize;\n        _secondView.centerY -= kCenterViewSize;\n        \n        if (self.alpha && self) {\n            [self changeSecondImage];\n            [self animatedImageFromTopToBottom];\n        }\n        \n    }];\n}\n\n```\n\n> éœ€è¦éå¸¸æ³¨æ„çš„æ˜¯ï¼Œä¸€å®šè¦å†™ä¸Šç»ˆæ­¢åŠ¨ç”»çš„æ¡ä»¶ï¼Œä¸ç„¶ä¼šæ— é™å¾ªç¯ï¼Œå½±å“æ€§èƒ½\n\n### showå’Œhide\n\n```\n- (void)showAnimated:(BOOL)animated\n{\n    RFMainThreadAssert();\n    \n    self.alpha = 1;\n    \n    [UIView animateWithDuration:animated ? 0.3 : 0 animations:^{\n        _centralView.alpha = 1;\n    } completion:^(BOOL finished) {\n        [self animatedImageFromTopToBottom];\n    }];\n}\n\n- (void)hideAnimated:(BOOL)animated\n{\n    RFMainThreadAssert();\n    \n    [UIView animateWithDuration:animated ? 0.3 : 0 animations:^{\n        self.alpha = 0;\n    } completion:^(BOOL finished) {\n        [self removeFromSuperview];\n    }];\n}\n\n```\n\n### æœ€ç»ˆæ•ˆæœ\n\n<img src=\"/images/loading_img/loading_img_03.jpg\" width=\"375\" height=\"667\">\n\n* Github Demoåœ°å€:\n[RFLoadingViewDemo](https://github.com/wangruofeng/RFLoadingView)\n\n \n\n\n\n\n\n\n","tags":["æ•ˆç‡"],"categories":["iOS"]},{"title":"iOSç¬¬ä¸‰æ–¹åº“æ±‡æ€»","url":"/2016/04/15/2016-04-15-iosdi-san-fang-ku-hui-zong/","content":"\n### ç®€ä»‹\n\næ­¤æ–‡ç”¨äºæ€»ç»“ï¼Œæœ¬äººä½¿ç”¨è¿‡æˆ–è€…æ”¶è—è¿‡çš„`Github`ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼Œä¹Ÿä¾¿ä»–äººå€Ÿé‰´ã€‚\n\nèµ„æ–™æ•´ç†ä¸­ä¸å®šæœŸæ›´æ–°ã€‚ã€‚ã€‚\n\n### å¼€æºé¡¹ç›®\n\n* [CodeHub](https://github.com/thedillonb/CodeHub)\n\t>  browse and maintain your GitHub repositories on any iOS device!\n* [Open-Source iOS Apps](https://github.com/dkhamsing/open-source-ios-apps)\n\t> å¼€æºiOS appsåˆ—è¡¨\n\n### APPç›¸å…³\n\n* [iVersion](https://github.com/nicklockwood/iVersion)\n\t> æç¤ºç‰ˆæœ¬æ›´æ–°\n* [BonMot](https://github.com/Raizlabs/BonMot)\n\t> å­—ä½“ç›¸å…³çš„åº“ï¼Œè®¾ç½®å­—ä½“æ ·å¼\n* [FontAwesomeKit](https://github.com/PrideChung/FontAwesomeKit)\n\t> FontAwesomeKit æä¾›ä¸€äº›ç®€å•çš„åŠ©æ‰‹ç±»ç”¨æ¥å¸®åŠ©åœ¨iOSä¸Šä½¿ç”¨[FontAwesome](https://github.com/FortAwesome/Font-Awesome)\n* [Font-Awesome](https://github.com/FortAwesome/Font-Awesome)\n\t> The iconic font and CSS toolkit\t\n* [JMHoledView](https://github.com/leverdeterre/JMHoledView)\n\t> é¦–æ¬¡å¯åŠ¨APPçš„æ–°æ‰‹æŒ‡å¼•\n\t\n### è‡ªåŠ¨å¸ƒå±€\n* [Masonry](https://github.com/cloudkite/Masonry)\n\t> æœ€ä¼˜é›…çš„è‡ªåŠ¨å¸ƒå±€è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒé“¾å¼ç¼–ç¨‹\n* [PureLayout](https://github.com/PureLayout/PureLayout)\n\t> åˆä¸€å¼ºå¤§çš„è‡ªåŠ¨å¸ƒå±€è§£å†³æ–¹æ¡ˆ\n\t\n### ç½‘ç»œè¯·æ±‚\n* [AFNetworking](https://github.com/AFNetworking/AFNetworking)\n\t> åœ°çƒäººéƒ½åœ¨ç”¨\n* [CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)\n\t> å°è£…æœ€å®Œå–„çš„Socketç±»åº“\n* [RxAlamofire](https://github.com/RxSwiftCommunity/RxAlamofire)\n\t> å°è£…Alamofire\n\t\n### åŸºç¡€å·¥å…·ç±»ä»¥åŠCategory\n* [sstoolkit](https://github.com/soffes/sstoolkit)\n\t> ä¸€ä¸ªä¸é”™çš„å·¥å…·åŒ…ï¼Œæä¾›å„ç§æ¯”å¦‚ç¼–ç ã€åŠ å¯†ã€å­—ç¬¦ä¸²å¤„ç†ç­‰ç­‰ä¸œè¥¿\n* [BFKit Swiftç‰ˆæœ¬](https://github.com/FabrizioBrancati/BFKit-Swift)\n\t> å›½å¤–çš„ä¸€ä¸ªå¤§ç¥å†™çš„å¾ˆå¥½ç”¨çš„åˆ†ç±»ï¼Œæ¯”è¾ƒé½å…¨\n* [YYKit](https://github.com/ibireme/YYKit)\n\t> **ibireme**ç”¨å¿ƒä¹‹ä½œ\n* [BlocksKit](https://zwaldowski.github.io/BlocksKit)\n\t> ä¸ºåŸºç¡€ç±»æä¾›Blockæ”¯æŒï¼Œå¾ˆå¥½ç”¨\n* [DateTools](https://github.com/MatthewYork/DateTools)\n\t> éå¸¸å¼ºå¤§çš„æ—¥æœŸå¤„ç†å·¥å…·\n* [FlatUIKit](https://github.com/Grouper/FlatUIKit)\n\t> æ‰©å±•FoundationåŸºæœ¬UIä¸»ä»¶ï¼Œæ‰å¹³åŒ–é£æ ¼\n* [iOS-Categories](https://github.com/shaojiankui/iOS-Categories)\n\t> iOS Objective-C Category, a collection of useful Objective-C Categories extending iOS Frameworks such as Foundation,UIKit,CoreData,QuartzCore,CoreLocation,MapKit Etc.\n* [PinYin4Objc](https://github.com/kimziv/PinYin4Objc)\n\t> æ‹¼éŸ³è§£æ\n* [ZipArchive](https://github.com/mattconnolly/ZipArchive)\n\t> è§£å‹ç¼©\n* [Chameleon](https://github.com/ViccAlexander/Chameleon)\n\t> æ‰å¹³é¢œè‰²æ¡†æ¶ï¼Œå¯ä»¥åˆ›å»ºéå¸¸æ¼‚äº®çš„é¢œè‰²\n* [CYLTabBarController](https://github.com/ChenYilong/CYLTabBarController)\n\t> ä½è€¦åˆé›†æˆTabBarController\n* [RKNotificationHub](https://github.com/cwRichardKim/RKNotificationHub)\n\t> åœ¨å³ä¸Šæ–¹æ˜¾ç¤ºé€šçŸ¥å°è§’æ ‡\n* [Material-Controls-For-iOS](https://github.com/fpt-software/Material-Controls-For-iOS)\n\t> Googleé£æ ¼çš„æ§ä»¶\n* [YYKit](https://github.com/wangruofeng/YYKit)\n\t> A collection of iOS components.\n\t\n### å¼¹æ¡†\n\n* [TYAlertController](https://github.com/12207480/TYAlertController)\n\t> å„ç§é£æ ¼çš„å¼¹æ¡†ï¼Œæ»¡è¶³ä½ çš„å„ç§éœ€æ±‚\n* [JKPopMenuView](https://github.com/UncleJoke/JKPopMenuView)\n\t> ç®€å•çš„å¼¹å‡ºèœå•\n* [MMPopupView](https://github.com/adad184/MMPopupView)\n\t> ç²¾ç®€çš„å¼¹æ¡†ï¼Œéå¸¸æ¼‚äº®ï¼Œå’Œå–œæ¬¢\n* [MJPopupViewController](https://github.com/martinjuhasz/MJPopupViewController)\n\t> A UIViewController Category to display a ViewController as a popup with different transition effects.\n* [QBPopupMenu](https://github.com/questbeat/QBPopupMenu.git)\n\t> è‡ªå®šä¹‰popup menuï¼Œå¤–è§‚å’ŒiOS7ä¸Šçš„`UIMenuController`ç±»ä¼¼\n* [CWStatusBarNotification](https://github.com/cezarywojcik/CWStatusBarNotification)\n\t> çŠ¶æ€æ é€šçŸ¥\n* [DOPDropDownMenu](https://github.com/12207480/DOPDropDownMenu-Enhanced)\n    > ä¸‹æ‹‰åˆ—è¡¨èœå•\n* [KLCPopup](https://github.com/jmascia/KLCPopup)\n\t> éå¸¸æ¼‚äº®çš„å¼¹å‡ºæ§ä»¶\n  \n### åŠ¨ç”»\n\n* [JHChainableAnimations](https://github.com/jhurray/JHChainableAnimations)\n\t> é“¾å¼åŠ¨ç”»ç¼–ç¨‹ï¼Œæœ‰ç‚¹Masonryçš„å‘³é“\n* [Canvas](http://canvaspod.io/)\n\t> éå¸¸å¼ºå¤§çš„åŠ¨ç”»æ¡†æ¶\n* [VCTransitionsLibrary](https://github.com/ColinEberhardt/VCTransitionsLibrary)\n\t> è½¬åœºåŠ¨ç”»åº“\n* [iCarousel](https://github.com/nicklockwood/iCarousel)\n\t> å„ç§3Då˜æ¢çš„åŠ¨ç”»ï¼Œä»¥å‰ç”¨è¿‡ï¼Œç‚«é…·å¾—æ²¡æœ‹å‹\n* [tapkulibrary](https://github.com/devinross/tapkulibrary)\n\t> Tapku remain home to the things like the calendar UIs, coverflow, and any legacy classes, ect.\n* [TBIconTransitionKit](https://github.com/AlexeyBelezeko/TBIconTransitionKit)\n\t> ç‚¹å‡»æŒ‰é’®è¿‡æ¸¡åŠ¨ç”» + --> x   - --> + \n* [Spring](https://github.com/MengTo/Spring)\n\t> A library to simplify iOS animations in `Swift`\n* [awesome-iOS-animation](https://github.com/sxyx2008/awesome-ios-animation)\n\t> iOSåŠ¨ç”»åº“æ•´ç†æ”¶é›†\n* [FeSpinner](https://github.com/NghiaTranUIT/FeSpinner)\n\t> Rocket Loader Collection for iOS app,æœ‰ä¸€äº›éå¸¸æœ‰è¶£çš„loadingåŠ¨ç”»\n* [SDECollectionViewAlbumTransition](https://github.com/seedante/SDECollectionViewAlbumTransition)\n\t> CollectionViewç›¸å†Œè‡ªå®šä¹‰è½¬åœº\n* [RZTransitions](https://github.com/Raizlabs/RZTransitions)  \n\t> A library of custom iOS View Controller Animations and Interactions.\n* [AnimatedTransitionGallery](https://github.com/shu223/AnimatedTransitionGallery)\n\t> å„ç§è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ”¶é›†ï¼Œéå¸¸å€¼å¾—å­¦ä¹ \n* [StarWars.iOS](https://github.com/Yalantis/StarWars.iOS)\n    > éå¸¸ç‚«é…·çš„`CAShapeLayer`åŠ¨ç”»ï¼Œéå¸¸ç‚«é…·ğŸ˜˜\n* [Animations](https://github.com/YouXianMing/Animations)\n    > æ¥è‡ªæå®¢å­¦é™¢çš„`YouXianMing`çš„ä¸€äº›åŠ¨ç”»æ”¶é›†\n* [ZFDragableModalTransition](https://github.com/zoonooz/ZFDragableModalTransition)\n\t> Custom animation transition for present modal view controller\n\t\n### Gifå¼•æ“\n\n* [FLAnimatedImage](https://github.com/Flipboard/FLAnimatedImage)\n\t> [Flipboard](https://github.com/Flipboard)å¼€æºçš„`Gif`å¼•æ“\n\n###  ç¼“å­˜\n\n* [RENCache](https://github.com/REN-LEI/RENCache)\n\t> ç®€å•çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆ\n* [RNCachingURLProtocol](https://github.com/rnapier/RNCachingURLProtocol)\n\t> webViewç¦»çº¿ç¼“å­˜åº“\n* [HanekeSwift](https://github.com/Haneke/HanekeSwift)\n    > Swiftè¯­è¨€ä¹¦å†™çš„è½»é‡çº§å›¾ç‰‡ç¼“å­˜æ¡†æ¶\n* [FastImageCache](https://github.com/path/FastImageCache)\n    > [Path](https://github.com/path)å®˜æ–¹å¼€æºçš„å›¾ç‰‡ç¼“å­˜æ¡†æ¶\n* [Kingfisher](https://github.com/onevcat/Kingfisher)\n\t> çŒ«ç¥ç”¨Swiftå®ç°å›¾ç‰‡ä¸‹è½½ç¼“å­˜æ¡†æ¶\n\t\n### æ–‡æœ¬ç›¸å…³\n\n* [TTTAttributedLabel](https://github.com/TTTAttributedLabel/TTTAttributedLabel)\n\t> éå¸¸å¼ºå¤§çš„Labelï¼Œæ”¯æŒå±æ€§ï¼Œæ•°æ®è¯Šæ–­å’Œé“¾æ¥\n* [SlackTextViewController](https://github.com/slackhq/SlackTextViewController.git)\n\t> `Slack`å¼€æºçš„drop-in UIViewController subclass with a growing text input view and other useful messaging features\n* [RTLabel](https://github.com/honcheng/RTLabel)\n\t> å¯ä»¥å±•ç¤ºHtmlçš„Label\n* [TYAttributedLabel](https://github.com/12207480/TYAttributedLabel)\n\t> å¼ºå¤§çš„å±æ€§æ–‡æœ¬æ§ä»¶(æ— éœ€äº†è§£`CoreText`)ï¼Œæ”¯æŒå›¾æ–‡æ··æ’æ˜¾ç¤ºï¼Œæ”¯æŒæ·»åŠ é“¾æ¥ï¼Œimageå’ŒUIViewæ§ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ’ç‰ˆæ˜¾ç¤º\n* [CSGrowingTextView](https://github.com/cloverstudio/CSGrowingTextView)\n\t> æ–‡æœ¬æ¡†ä¼šéšç€è¾“å…¥å­—æ•°æ”¹å˜é«˜åº¦\n* [LTMorphingLabel](https://github.com/lexrus/LTMorphingLabel)\n\t> æ•ˆæœéå¸¸ç‚«çš„æ–‡æœ¬æ¡†\n* [TextFieldEffects](https://github.com/raulriera/TextFieldEffects)\n\t> åŠ¨æ•ˆéå¸¸ä¸é”™çš„æ–‡æœ¬è¾“å…¥æ¡†\n* [DDRichText](https://github.com/daiweilai/DDRichText)\n\t> å›¾æ–‡æ··æ’\n* [BMLine](https://github.com/AirSars/BMLine)\n\t> ä¸ºä½ çš„Viewå¢åŠ çº¿æ¡\n* [UITextView-Placeholder](https://github.com/devxoul/UITextView-Placeholder)\n\t> A missing placeholder for UITextView.\n\t\t\n### åŠ è½½è¿›åº¦\n\n* [DACircularProgress](https://github.com/danielamitay/DACircularProgress)\n\t> å„ç§åœ†å½¢å’Œåœ†ç¯å‹è¿›åº¦æŒ‡ç¤º\n* [NJKWebViewProgress](https://github.com/ninjinkun/NJKWebViewProgress)\n\t> UIWebView progress interface\n* [MBProgressHUD](https://github.com/jdg/MBProgressHUD)\n\t> è¿™ä¸ªä¸ç”¨è®²ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šç”¨\n* [SVProgressHUD](https://github.com/SVProgressHUD/SVProgressHUD)\n\t> åˆä¸€ä¸ªè¿›åº¦æŒ‡ç¤º\n* [Toast](https://github.com/scalessec/Toast)\n\t> å’ŒMBProgressHUDå·®ä¸å¤š\n* [LCProgressHUD](https://github.com/LeoiOS/LCProgressHUD)\n\t> å¯¹MBProgressHUDçš„ç®€å•å°è£…ï¼Œéå¸¸å®ç”¨\n* [TSMessages](https://github.com/KrauseFx/TSMessages/)\n\t> æ¶ˆæ¯é€šçŸ¥æé†’æ¡†ï¼Œéå¸¸å¥½ç”¨\n* [PINRemoteImage](https://github.com/pinterest/PINRemoteImage)\n\t> `Pinterest`æŠ“å–è¿œç¨‹å›¾ç‰‡ç±»\n* [SDWebImage](https://github.com/rs/SDWebImage)\n\t> æœ€å¹¿æ³›ä½¿ç”¨çš„å›¾ç‰‡ç¼“å­˜æ¡†æ¶\n* [AlamofireImage](https://github.com/Alamofire/AlamofireImage)\n\t> Swiftç‰ˆæœ¬çš„`SDWebImage`\n\n### é”®ç›˜ç±»\n\n* [DAKeyboardControl](https://github.com/danielamitay/DAKeyboardControl)\n\t> ä¸€ä¸ªé”®ç›˜ç®¡ç†æ¡†æ¶\n* [IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager)\n\t> å…¨å±€é”®ç›˜ç®¡ç†\n* [TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)\n\t> ä½¿ç”¨æ—¶è®¾ç½®scrollViewçš„ç±»ä¸º`TPKeyboardAvoidingScrollView`å³å¯æ”¯æŒ`xib`\n* [RDRStickyKeyboardView](https://github.com/datwelk/RDRStickyKeyboardView)\n\t> ä½œè€…å·²ç»åœæ­¢ç»´æŠ¤ã€‚ã€‚ã€‚\n\t\n### æŠ½å±‰\n\n* [ViewDeck](https://github.com/ViewDeck/ViewDeck)\n\t> åŠŸèƒ½å¼ºå¤§çš„æŠ½å±‰æ•ˆæœ\n* [MMDrawerController](https://github.com/mutualmobile/MMDrawerController)\n\t> åˆä¸€ä¸ªæŠ½å±‰\n* [SWRevealViewController](https://github.com/John-Lluch/SWRevealViewController)\n\t> A UIViewController subclass for revealing a rear (left and/or right) view controller behind a front controller, inspired by the Facebook app, done right!\n* [MSDynamicsDrawerViewController](https://github.com/erichoracek/MSDynamicsDrawerViewController)\n\t> Container view controller that leverages UIKit Dynamics to provide a realistic drawer navigation paradigm.\n*  [PKRevealController](https://github.com/pkluz/PKRevealController)\n    > å®‰è£…ç®€ä¾¿ï¼Œé«˜åº¦å®šåˆ¶ä¸”å¯¹æ‰‹åŠ¿è¯†åˆ«è‰¯å¥½\n    \n### NavigationBar\n\n* [AMScrollingNavbar](https://github.com/andreamazz/AMScrollingNavbar)\n    > `Swift`è¯­è¨€ç¼–å†™ä¸Šä¸‹æ»‘åŠ¨æ—¶åŠ¨æ€éšè—æ ‡é¢˜æ \n* [LTNavigationbar](https://github.com/ltebean/LTNavigationbar)\n    > å¯¼èˆªæ é¢œè‰²åŠ¨æ€æ”¹å˜\n* [JZNavigationExtension](https://github.com/JazysYu/JZNavigationExtension)\n    > Navigationçš„æ‰©å±•ï¼Œæ¨è\n    \n### ScrollViewç›¸å…³\n\n* [SwipeView](https://github.com/nicklockwood/SwipeView)\n    > SwipeView is a class designed to simplify the implementation of horizontal, paged scrolling views on iOS. It is based on a UIScrollView, but adds convenient functionality such as a UITableView-style dataSource/delegate interface for loading views dynamically, and efficient view loading, unloading and recycling.\n* [SWTableViewCell](https://github.com/CEWendel/SWTableViewCell)\n    > è‡ªå®šä¹‰Cellä¾§æ»‘åŠ¨ä½œ\n* [MGSwipeTableCell](https://github.com/MortimerGoro/MGSwipeTableCell)\n    > è‡ªå®šä¹‰Cellä¾§æ»‘åŠ¨ä½œï¼Œæ•ˆæœå¤šæ ·\n* [CHTCollectionViewWaterfallLayout](https://github.com/chiahsien/CHTCollectionViewWaterfallLayout)\n    > ç€‘å¸ƒæµå¸ƒå±€\n* [TYSlidePageScrollView](https://github.com/12207480/TYSlidePageScrollView)\n    > An easy solution to page views or controllers with header and page tabbar,footer\n* [XLPagerTabStrip](https://github.com/wangruofeng/XLPagerTabStrip)\n    > Android PagerTabStrip for iOS. nice    \n    \n### MJç³»åˆ—\n\n* [MJExtension](https://github.com/CoderMJLee/MJExtension)\n    > model <--> dic <--> json æ¡†æ¶\n* [MJRefresh](https://github.com/CoderMJLee/MJRefresh)\n    > åˆ·æ–°æ§ä»¶\n    \n### æ•°æ®åº“\n\n* [realm-cocoa](https://github.com/realm/realm-cocoa)\n    > è·¨å¹³å°è½»é‡çº§æ•°æ®åº“è§£å†³æ–¹æ¡ˆ,åŠ±å¿—å–ä»£`Core Data` & `SQLite`\n* [fmdb](https://github.com/ccgus/fmdb)\n    > å¯¹`sqlite`å®ç°é¢å‘å¯¹è±¡çš„å°è£…\n\n### å›¾æ ‡åº“\n\n* [PNChart](https://github.com/kevinzhow/PNChart)\n    > æä¾›å„ç§å›¾æ ‡æ ·å¼ï¼Œæ€§èƒ½è¿˜éå¸¸ä¸é”™\n* [Charts](https://github.com/danielgindi/Charts)\n    > Beautiful charts for iOS/tvOS/OSX! The Apple side of the crossplatform MPAndroidChart.\n\n### å›¾ç‰‡å¤„ç†ä»¥åŠå±•ç¤ºç›¸å…³\n  \n* [GPUImage](https://github.com/BradLarson/GPUImage)\n    > å¼€æºåŸºäºGPUçš„å›¾ç‰‡æ¸²æŸ“å¼•æ“ï¼Œå¸¦æœ‰å¾ˆå¤šæ¬¾æ»¤é•œ\n* [FXBlurView](http://github.com/nicklockwood/FXBlurView)\n    > èƒŒæ™¯æ¨¡ç³Š\n* [IDMPhotoBrowser](https://github.com/ideaismobile/IDMPhotoBrowser)\n    > ç…§ç‰‡æµè§ˆå™¨\n* [AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)\n    > ç›¸å†Œé€‰æ‹©\n* [DNImagePicker](https://github.com/AwesomeDennis/DNImagePicker)\n    > ä»¿ç…§å¾®ä¿¡çš„ç…§ç‰‡é€‰å–å™¨\n* [JFImagePickerController](https://github.com/johnil/JFImagePickerController)\n    > åˆä¸€ä¸ªç…§ç‰‡é€‰å–å™¨\n* [Nuke](https://github.com/kean/Nuke)\n    > Image loading, processing, caching and preheating\n    \n### æ—¥å†é€‰æ‹©\n\n* [FSCalendar](https://github.com/WenchaoD/FSCalendar)\n    > iOS7+é£æ ¼çš„æ—¥å†æ§ä»¶ï¼Œéå¸¸æ¼‚äº®\n      \n### éŸ³é¢‘/è§†é¢‘\n\n* [KRVideoPlayer](https://github.com/36Kr-Mobile/KRVideoPlayer)\n    > 36æ°ªå¼€æºçš„è§†é¢‘æ’­æ”¾å™¨\n* [DOUAudioStreamer](https://github.com/douban/DOUAudioStreamer)\n    > è±†ç“£å¼€æºçš„éŸ³é¢‘æ’­æ”¾å™¨\n    \n### å†…è´­/æ¨å¹¿\n\n* [IAPHelper](https://github.com/saturngod/IAPHelper)\n    > in app purchases helper for iOS\n* [DAAppsViewController](https://github.com/danielamitay/DAAppsViewController)\n    > åº”ç”¨æ¨å¹¿ç•Œé¢ï¼Œå¡«å†™åˆä½œappçš„appleIdå³å¯\n* [TAPromotee](https://github.com/JanC/TAPromotee.git)\n    > äº¤å‰æ¨å¹¿åº”ç”¨æ˜¯ä½ å¯ä»¥å…è´¹å®ç°çš„æœ€ä½³å¸‚åœºæ¨å¹¿ç­–ç•¥ä¹‹ä¸€ã€‚\n    \n### å­˜å‚¨ç›¸å…³\n\n* [SSKeychain](https://github.com/soffes/sskeychain)\n    > é’¥åŒ™ä¸²å­˜å‚¨\n* [PINCache](https://github.com/wangruofeng/PINCache)\n    > [Pinterest](https://github.com/pinterest)å‡ºå“çš„éé˜»å¡å¼å¼‚æ­¥ç¼“å­˜å·¥å…·\n* [TMCache](https://github.com/tumblr/TMCache)\n    > [tumblr](https://github.com/tumblr)å‡ºå“çš„å¯¹è±¡å¿«é€Ÿå¼‚æ­¥ç¼“å­˜ï¼Œæ”¯æŒ`iOS`å’Œ`OS X`\n* [MagicalRecord](https://github.com/magicalpanda/MagicalRecord)\n    >  ç®€åŒ–`Core Data`æŠ“å–æ•°æ®çš„é€»è¾‘ï¼Œæ¨è\n* [KeychainAccess](https://github.com/kishikawakatsumi/KeychainAccess)\n    > Simple Swift wrapper for Keychain that works on iOS and OS X\n*  [UICKeyChainStore](https://github.com/kishikawakatsumi/UICKeyChainStore) \n\t> `UICKeyChainStore`çš„ç®€å•å°è£… \n\t\n### å®ç”¨æ§ä»¶\n\n* [HCSStarRatingView](https://github.com/hsousa/HCSStarRatingView)\n    > ç®€å•çš„è¯„åˆ†æ§ä»¶\n* [LNNotificationsUI](https://github.com/LeoNatan/LNNotificationsUI)\n    > æ¨¡ä»¿iOSæ ‡å‡†é€šçŸ¥ç•Œé¢ï¼Œå¯ä»¥ä»¥å‡ä¹±çœŸ\n* [SCLAlertView-Swift](https://github.com/vikmeup/SCLAlertView-Swift)\n    > éå¸¸æ¼‚äº®çš„åŠ¨ç”»`Alert View`ï¼Œä½¿ç”¨`Swift`ä¹¦å†™\n* [Wonderful](https://github.com/dsxNiubility/Wonderful)    \n\t> è·‘é©¬ç¯,å½©è‰²æ ‡ç­¾,æ¸å˜ç­‰ã€‚ã€‚ã€‚\n* [VVeboTableViewDemo](https://github.com/johnil/VVeboTableViewDemo)    \n\t> VVeboå‰¥ç¦»çš„TableViewç»˜åˆ¶\n* [FXForms](https://github.com/nicklockwood/FXForms)\n\t> å¿«é€Ÿåˆ›å»ºè¡¨å•,è®¾ç½®é¡µ,ç”¨æˆ·æ•°æ®ä»»åŠ¡,éå¸¸æ£’\n* [SVPullToRefresh](https://github.com/samvermette/SVPullToRefresh)\n    > ä¸€è¡Œä»£ç å®ç°UIScrollViewä¸‹æ‹‰åˆ·æ–°æˆ–è€…æ— é™æ»šåŠ¨  \n \t\n### è¾…åŠ©ç±»\n\n* [Surge](https://github.com/mattt/Surge)\n    > åˆ©ç”¨`Accelerate`é«˜æ€§èƒ½æ•°å­¦è®¡ç®—æ¡†æ¶\n* [KMCGeigerCounter](https://github.com/kconner/KMCGeigerCounter)\n    > æ˜¾ç¤ºå½“å‰åŠ¨ç”»çš„å¸§ç‡\n* [XNGMarkdownParser](https://github.com/xing/XNGMarkdownParser)\n    > `Markdown`è§£æå™¨ï¼Œå°†`Markdown`æ ¼å¼çš„å­—ç¬¦ä¸²è§£ææˆ`NSAttributedString`æ ¼å¼çš„å­—ç¬¦ä¸²\n* [TransformerKit](https://github.com/mattt/TransformerKit)\n\t> å°è£…äº†ä¸€äº›å¸¸ç”¨çš„`NSValueTransformer`ç±»\n* [RuntimeBrowser](https://github.com/nst/RuntimeBrowser)\n\t> Objective-C Runtime Browser, for Mac OS X and iOS\n* [iOS-Runtime-Headers](https://github.com/nst/iOS-Runtime-Headers) \n    > iOS Objective-C headers as derived from runtime introspection\n* [appledoc](https://github.com/tomaz/appledoc)\n\t> Objective-Cä»£ç ï¼Œè‹¹æœé£æ ¼æ–‡æ¡£ç”Ÿæˆå™¨\n* [Markingbird](https://github.com/kristopherjohnson/Markingbird)\n\t> Markdown processor written in Swift (translation of MarkdownSharp)\t\n\n### Swift\n\n* [30DaysofSwift](https://github.com/allenwong/30DaysofSwift)\n    > allenwongè‡ªå­¦Swiftçš„30ä¸ªå·¥ç¨‹ ğŸ‘\n* [SwiftGuide](https://github.com/ipader/SwiftGuide)\n    > è¿™ä»½æŒ‡å—æ±‡é›†äº†Swiftè¯­è¨€ä¸»æµå­¦ä¹ èµ„æºï¼Œå¹¶ä»¥å¼€å‘è€…çš„è§†è§’æ•´ç†ç¼–æ’\n* [swift-package-manager](https://github.com/apple/swift-package-manager)\n    > SwiftåŒ…ç®¡ç†å·¥å…·\n* [Carthage](https://github.com/Carthage/Carthage)\n    > Swiftä¾èµ–ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼OCçš„`CocoaPods`\n* [swift-style-guide](https://github.com/raywenderlich/swift-style-guide)\n\t> [raywenderlich.com](https://github.com/raywenderlich)å®˜æ–¹Swiftç¼–ç¨‹é£æ ¼è§„\n* [RxSwift](https://github.com/ReactiveX/RxSwift)\n\t> Reactive Programming in Swift\n\t\t\n### å…¶å®ƒ\n\n* [FreeCodeCamp](https://github.com/FreeCodeCamp/FreeCodeCamp)\n    > The [https://FreeCodeCamp.com](https://FreeCodeCamp.com) open source codebase and curriculum. Learn to code and help nonprofits.   \n* [libextobjc](https://github.com/jspahrsummers/libextobjc)\n    > æ‹“å±•äº†ä¸€äº›`Cocoa`ç±»åº“\n* [ParseSourceCodeStudy](https://github.com/ChenYilong/ParseSourceCodeStudy)\n    > Facebookå¼€æºçš„Parseæºç åˆ†æã€ç³»åˆ—ã€‘\n* [hugo](https://github.com/spf13/hugo)\n    > ä½¿ç”¨`Google` `Go`è¯­è¨€ä¹¦å†™çš„é™æ€åšå®¢ç½‘ç«™ç”Ÿæˆå™¨\n* [CocoaPods](https://github.com/CocoaPods/CocoaPods)\n    > CocoaåŒ…ä¾èµ–ç®¡ç†å·¥å…·\n* [MDCSwipeToChoose](https://github.com/wangruofeng/MDCSwipeToChoose)\n\t> å®ç°æŸAppï¼Œå·¦æ»‘ä¸å–œæ¬¢ï¼Œå³æ»‘å–œæ¬¢çš„å¡ç‰‡å †å åŠŸèƒ½\n* [Dash-Plugin-for-Xcode](https://github.com/omz/Dash-Plugin-for-Xcode)\n\t> `Xcode`çš„ä¸€ä¸ªæ’ä»¶ï¼Œæ•´åˆ`Dash`ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é˜…æ–‡æ¡£\n* [iOS å¼€å‘é¢è¯•é—®é¢˜](https://github.com/lzyy/iOS-Developer-Interview-Questions)\n\t> æ±‡æ€»ä¸€äº›å¸¸è§çš„iOSé¢è¯•é—®é¢˜\n* [XMPPFramework](https://github.com/robbiehanson/XMPPFramework)\n\t> `XMPP`å³æ—¶é€šä¿¡åè®®æ¡†æ¶\t\n* [WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)\n    > `Objective-C`ä¸`JavaScript`åœ¨`UIWebViews`/`WKWebView`ä¹‹é—´äº¤äº’è§£å†³æ–¹æ¡ˆ\n* [articles-1](https://github.com/objccn/articles)\n\t> Articles for objccn.io. objc.ioçš„å®Œæ•´ã€å‡†ç¡®ã€ä¼˜é›…çš„ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬\n* [articles](https://github.com/NSHipster/articles)\n\t> Weekly articles for NSHipster.com\n* [ebook](https://github.com/onestraw/ebook)\t\n\t> æ”¶é›†äº†ä¸€äº›codingç›¸å…³çš„ç”µå­ä¹¦\n* [dev-blog](https://github.com/nixzhu/dev-blog)\n    > nixzhuçš„ä¸€äº› iOS / Web å¼€å‘ç›¸å…³çš„ç¿»è¯‘æˆ–åŸåˆ›åšå®¢æ–‡ç« \n* [KVOController](https://github.com/facebook/KVOController)\n\t> Simple, modern, thread-safe key-value observing for iOS and OS X.\n* [LBXScan](https://github.com/MxABC/LBXScan)\n\t> äºŒç»´ç ã€æ‰«ç ã€æ‰«ä¸€æ‰«ã€ZXingå’Œiosç³»ç»Ÿè‡ªå¸¦æ‰«ç å°è£…ï¼Œæ‰«ç ç•Œé¢æ•ˆæœå°è£…\n\t\nå‚è€ƒé“¾æ¥ï¼š\n\n* [iOSå­¦ä¹ èµ„æºæ±‡æ€»](http://blog.treney.com/index.php/archives/iOSShare.html) -- é¹å¨ã®åšå®¢åšå®¢\n","tags":["Favorite","æ•ˆç‡"],"categories":["èµ„æ–™æ”¶é›†"]},{"title":"å¦‚ä½•åˆ©ç”¨LLDBæ¥Debug","url":"/2016/04/15/2016-04-15-ru-he-li-yong-lldblai-debug/","content":"\n### ä»‹ç»\n\né‰´äºç°åœ¨è°ƒè¯•çš„é¢‘ç¹æ€§å’Œé‡è¦æ€§ï¼Œæ­¤æ–‡è®°å½•äº†ä¸€äº›åŸºæœ¬çš„`LLDB`è°ƒè¯•å‘½ä»¤ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…ã€‚\n\n### å¸¸ç”¨å‘½ä»¤ pã€poã€callã€print\n\n```\np         -- ('expression --')  Evaluate an expression (ObjC++ or Swift) in\n             the current program context, using user defined variables and\n             variables currently in scope.\npo        -- ('expression -O  -- ')  Evaluate an expression (ObjC++ or Swift)\n             in the current program context, using user defined variables and\n             variables currently in scope.\nprint     -- ('expression --')  Evaluate an expression (ObjC++ or Swift) in\n             the current program context, using user defined variables and\n             variables currently in scope.\ncall      -- ('expression --')  Evaluate an expression (ObjC++ or Swift) in\n             the current program context, using user defined variables and\n             variables currently in scope.\n```\n\nä»å®˜æ–¹çš„æè¿°æ¥çœ‹ï¼Œ`p`ã€`print`ã€`call`æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯`po`å°±ä¸å¤ªä¸€æ ·äº†ï¼Œè¾“å…¥ä¸€æ ·ä½†æ˜¯è¾“å‡ºä¸ä¸€æ ·ã€‚`po`çš„è¾“å‡ºçš„æ˜¯å…·ä½“å¯¹è±¡çš„å†…å®¹ã€‚\n\nå¦‚æœæƒ³è¦æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼æ¥æ‰“å°ï¼Œå¦‚ä¸‹ï¼š\n\n```\n(lldb) p/s self.title\n(__NSCFString *) $0 = @\"ç›®çš„åœ°\"\n(lldb) p self.title\n(__NSCFString *) $1 = 0x00007fe0c0d4d230 @\"ç›®çš„åœ°\"\n(lldb) p/x self.title\n(__NSCFString *) $2 = 0x00007fe0c0d4d230 @\"ç›®çš„åœ°\"\n(lldb) p/t self.title\n(__NSCFString *) $3 = 0b0000000000000000011111111110000011000000110101001101001000110000 @\"ç›®çš„åœ°\"\n(lldb) p/a self.title\n(__NSCFString *) $4 = 0x00007fe0c0d4d230 -> 0x000000010d2fd2c8 (void *)0x000000010d2fd278: __NSCFString @\"ç›®çš„åœ°\"\n```\n\n### æ‰“å°è¾“å‡ºæ ¼å¼åŒ–\n\n| name  | description |\n|-------|:-------|\n| x\t    |Regard the bits of the value as an integer, and print the integer in hexadecimal. |\n|d\t    |Print as integer in signed decimal. |\n|u      |Print as integer in unsigned decimal.|\n|o      |Print as integer in octal.|\n|t      |Print as integer in binary. The letter â€˜tâ€™ stands for â€œtwoâ€.|\n|a      |Print as an address, both absolute in hexadecimal and as an offset from the nearest preceding symbol. You can use this format used to discover where (in what function) an unknown address is located:(gdb) p/a 0x54320  $3 = 0x54320 <_initialize_vx+396>\n|c      |Regard as an integer and print it as a character constant. This prints both the numerical value and its character representation. The character representation is replaced with the octal escape â€˜\\nnnâ€™ for characters outside the 7-bit ascii range.Without this format, gdb displays char, unsigned char, and signed char data as character constants. Single-byte members of vectors are displayed as integer data.|\n|f      |Regard the bits of the value as a floating point number and print using typical floating point syntax. |\n|s      |Regard as a string, if possible. With this format, pointers to single-byte data are displayed as null-terminated strings and arrays of single-byte data are displayed as fixed-length strings. Other values are displayed in their natural types.Without this format, gdb displays pointers to and arrays of char, unsigned char, and signed char as strings. Single-byte members of a vector are displayed as an integer array.|\n|z      |Like â€˜xâ€™ formatting, the value is treated as an integer and printed as hexadecimal, but leading zeros are printed to pad the value to the size of the integer type. |\n|r      |Print using the â€˜rawâ€™ formatting. By default, gdb will use a Python-based pretty-printer, if one is available (see Pretty Printing). This typically results in a higher-level display of the value's contents. The â€˜râ€™ format bypasses any Python pretty-printer which might exist.|\n\n--- \n\næ ¼å¼ï¼š `p/x $pc`\n\nå‚è€ƒé“¾æ¥ï¼š[æ‰“å°è¾“å‡ºæ ¼å¼åŒ–](https://sourceware.org/gdb/onlinedocs/gdb/Output-Formats.html)\n\n### lldbå£°æ˜å˜é‡\n\n```\n(lldb) e NSString *$str = @\"http://www.baidu.com\"\n(lldb) po $str\nhttp://www.baidu.com\n```\n\t\næˆ‘ä»¬ä½¿ç”¨`e`å¼€å¤´å£°æ˜äº†å˜é‡\n\n### è°ƒç”¨å˜é‡çš„API  \n\n```\n(lldb) po [self.title uppercaseString]\n```\n\n### å¼ºè½¬è¿”å›å€¼ç±»å‹\n\n```\n(lldb) po [self.title characterAtIndex:0]\nU+76ee u'ç›®'\n\n(lldb) po (unsigned int)[self.title characterAtIndex:0]\n30446\n\n(lldb) po (char)[self.title characterAtIndex:0]\n'\\xee'\n\n(lldb) po (NSString *)[self.title characterAtIndex:0]\n0x00000000000076ee\n\n(lldb) po (unichar)[self.title characterAtIndex:0]\nU+76ee u'ç›®'\n```\n\n### æ·»åŠ æ–­ç‚¹\n\n```\nb 120\nb [KLNewDestinationVC setupUI]\n```\n\n`b`å‘½ä»¤åé¢åŠ è¡Œå·ï¼Œæˆ–è€…æŒ‡å®šæŸä¸ªå¯¹è±¡è°ƒç”¨çš„æ–¹æ³•\n\n### è®¾ç½®æ–­ç‚¹è§¦å‘æ¡ä»¶\n\nå³é”®æ–­ç‚¹å¤„,åœ¨conditionå¤„ç¼–è¾‘ï¼Œå¦‚æœè®¾ç½®äº†æ¡ä»¶ï¼Œåªè¦å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæ‰ä¼šè¿›å…¥æ–­ç‚¹ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ¡ä»¶æ»¡è¶³æ—¶å‘å‡ºå£°éŸ³å’Œæ‰“å°æç¤ºè¯­ã€‚\n\n### å¸¸ç”¨æ‰“å°è§†å›¾å±‚æ¬¡ç»“æ„\n\n```\n(lldb) po [self.view recursiveDescription]\n```\n\t\n### ä¸´æ—¶åˆ·æ–°ç•Œé¢UI\n\n```\n(lldb) e ((UIButton *)sender).backgroundColor = [UIColor redColor]\n(UICachedDeviceRGBColor *) $41 = 0x00007fdd10715b00\n(lldb) e (void)[CATransaction flush]\n```\n","tags":["æ•ˆç‡","Debug"],"categories":["iOS"]},{"title":"ä½¿ç”¨facebookçš„chiselæ¥è°ƒè¯•","url":"/2016/04/15/2016-04-15-shi-yong-facebookde-chisellai-diao-shi/","content":"\n### ä»‹ç»\n\n[`chisel`](https://github.com/facebook/chisel)æ˜¯`facebook`å¼€æºçš„è°ƒè¯•æ¡†æ¶ï¼Œå°è£…äº†å¾ˆå¤šæ–¹ä¾¿çš„`LLDB`å‘½ä»¤ä¾¿äºè°ƒè¯•iOS Appï¼Œä»Šå¤©ä»‹ç»ä¸€ä¸‹ä½¿ç”¨å¿ƒå¾—ä»¥åŠä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å†™å¸®åŠ©ã€‚\n\n**æµ‹è¯•ç¯å¢ƒ**ï¼š\n\nXcode 7.3 and iOS 9.3 simulator.\nOS:OSX 10.11.4\n\npviews and presponder doesn't work and no output.\n\n[Chisel issue on Xcode 7.3 #149](https://github.com/facebook/chisel/issues/149)\n\nä½œè€…æ­£åœ¨åŠªåŠ›ä¿®å¤ä¸­ã€‚ã€‚ã€‚\n\nXcode7.2ç‰ˆæœ¬æ²¡æœ‰é—®é¢˜\n\n### å®‰è£…\n\n\tbrew update\n\tbrew install chisel\n\t\n### åˆ›å»º`~/.lldbinit` å‡å¦‚ä¸å­˜åœ¨\n\nç¼–è¾‘å†…å®¹: **command script import /usr/local/opt/chisel/libexec/fblldb.py**\n\n### æŸ¥çœ‹å‘½ä»¤\n\n\tï¼ˆlldbï¼‰help\n\t\n### æŸ¥çœ‹å…·ä½“æ€æ ·ä½¿ç”¨\n\n\t(lldb) help border\n\t\n### å¸¸ç”¨å‘½ä»¤è¯´æ˜\n\n|Command        |Description   \t                                |\n|---------------|----------------------------------------------|\n|pviews         |Print the recursive view description for the key window.\n|pvc            |Print the recursive view controller description for the key window.\n|visualize      |Open a `UIImage`, `CGImageRef`, `UIView`, `CALayer`, `NSData` (of an image), `UIColor`, `CIColor`, or `CGColorRef` in Preview.app on your Mac.\n|fv             |Find a view in the hierarchy whose class name matches the provided regex.                        \n|fvc            |Find a view controller in the hierarchy whose class name matches the provided regex.\n|show/hide      |Show or hide the given view or layer. You don't even have to continue the process to see the changes!\n|mask/unmask    |Overlay a view or layer with a transparent rectangle to visualize where it is.\n|border/unborder|Add a border to a view or layer to visualize where it is.                               \n|caflush        |Flush the render server (equivalent to a \"repaint\" if no animations are in-flight).            \n|bmessage       |Set a symbolic breakpoint on the method of a class or the method of an instance without worrying which class in the hierarchy actually implements the method.\n|wivar          |Set a watchpoint on an instance variable of an object.\n|presponder     |Print the responder chain starting from the given object.\n\n---\n\n> Tipsï¼šç›´æ¥ç‚¹æ§åˆ¶å°ä¸Šæ–¹ç¬¬ä¸‰ä¸ªæŒ‰é’®å‘¼å‡º`LLDB`ã€‚\n\n#### pviews(æš‚ä¸å¯ç”¨)\n\næ˜¾ç¤ºviewçš„å±‚çº§ã€‚\n\n#### border&unborder\n\n`border`:ç»™viewæˆ–è€…layeræ·»åŠ è¾¹æ¡†é¢œè‰²å’Œè¾¹æ¡†çš„å®½åº¦ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ï¼š\n\n\t(lldb) border 0x7ffc017b2970 -c green -w 10\n\næ ‡ç¤ºè®¾ç½®`0x7ffc017b2970`è§†å›¾æˆ–è€…å›¾å±‚ä¸€ä¸ªå®½åº¦ä¸º2çš„ç»¿è‰²è¾¹æ¡†ã€‚\n\n`unborder`:å»æ‰viewæˆ–è€…layerçš„è¾¹æ¡†é¢œè‰²å’Œè¾¹æ¡†å®½åº¦ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ï¼š\n\n\tunborder 0x7ffc017b2970\n\n#### pinternals\n\nè¿™ä¸ªå‘½ä»¤å°±æ˜¯æ‰“å°å‡ºæ¥çš„ä¸€ä¸ªæ§ä»¶ï¼ˆ`id`ï¼‰ç±»å‹çš„å†…éƒ¨ç»“æ„ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ï¼š\n\n\tpinternals 0x7ffc017b2970\n\n#### presponderï¼ˆæš‚ä¸å¯ç”¨ï¼‰\n\næ‰“å°å‡ºä¸€ä¸ªç»§æ‰¿äº`UIResponder`æ§ä»¶çš„æ¶ˆæ¯ä¼ é€’é“¾ã€‚\n\n#### visualize\n\nå¯ä»¥ä½¿ç”¨macä¸‹çš„é¢„è§ˆappæ‰“å¼€æˆ‘ä»¬çš„å›¾ç‰‡`UIImage`, `CGImageRef`æ ¼å¼çš„å›¾ç‰‡ï¼Œç”šè‡³viewå’Œlayerçš„å›¾ç‰‡ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ï¼š\n\n\tvisualize 0x79ec3140//æˆ–è€…å˜é‡åï¼Œæ­¤åœ°å€æ˜¯idç±»å‹çš„\n\t\t\n#### pclass\n\npclasså¯ä»¥æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡çš„ç»§æ‰¿å…³ç³»ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ï¼š\n\n\tpclass 0x7fcd15108800\n\n#### taplog\n\nè¿™ä¸ªå‘½ä»¤æ˜¯æ¨¡æ‹Ÿæ•²å‡»ä¸€ä¸‹å±å¹•ï¼Œå¹¶ä¸”æ‰“å°å‡ºä½ æ•²å‡»å±å¹•æ—¶å€™äº‹ä»¶æ¥æ”¶çš„å¯¹è±¡ã€‚\n\n#### hide&show\n\nhideå‘½ä»¤å¯ä»¥ç›´æ¥éšè—ä¸€ä¸ªå¯¹è±¡,ç§»é™¤å½“å‰é®æŒ¡çš„å¯¹è±¡ä¾¿äºä½ è§‚å¯Ÿåé¢çš„å¯¹è±¡ã€‚showå‘½ä»¤ä¼šè®©å®ƒå†æ¬¡æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n#### bmessage\n\nè¿™ä¸ªå‘½ä»¤å°±æ˜¯`LLDB`æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œè­¬å¦‚`-viewWillAppear:`è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨å½“å‰æ§åˆ¶å™¨ä¸­ä½ æ²¡æœ‰å®ç°å®ƒï¼Œä½†æ˜¯ä½ åˆæƒ³åœ¨è°ƒç”¨å®ƒçš„æ—¶æœºè§¦å‘ä¸­æ–­ã€‚\n\nè¿™ä¸ªæˆ‘å°±ä¸è§£é‡Šäº†ï¼Œéœ€è¦è¡¥å……ä¸€ç‚¹çš„æ˜¯`Objectiv-c`çš„æ–¹æ³•æ˜¯å¸¦`ï¼š`çš„ã€‚\n\n#### pvc\n\næ‰“å°å‡ºå½“å‰çš„æ§åˆ¶å™¨å±‚çº§ã€‚\n\n#### wivar\n\nè¿™ä¸ªå‘½ä»¤æ˜¯åŠ `watchPoint`ã€‚\n\nå‚è€ƒé“¾æ¥ï¼š\n\n* [Chiselå¸¸ç”¨å‘½ä»¤æ€»ç»“](http://www.jianshu.com/p/f6ddf8c6485f) -- ç®€ä¹¦\n* [ä¸è°ƒè¯•å™¨å…±èˆ - LLDB çš„åå°”å…¹](http://objccn.io/issue-19-2/) -- objccn.io\n* [Dancing in the Debugger â€” A Waltz with LLDB](https://www.objc.io/issues/19-debugging/lldb-debugging/) -- objc.io\n\t                               \n","tags":["æ•ˆç‡","Debug"],"categories":["iOS"]},{"title":"Associated Objects å…³è”å¯¹è±¡","url":"/2016/04/14/2016-04-14-associated-objects-guan-lian-dui-xiang/","content":"\n##  Associated Objects ä»‹ç»\n`<objc/runtime.h>`ä¸­çš„å‡½æ•°å·ç§°æ˜¯**iOS**ä¸­æœ€åä¸€æŠŠç¥å…µåˆ©åˆƒï¼Œå…·æœ‰å…¶ä»–æ–¹å¼åšä¸åˆ°çš„ï¼Œèƒ½ä¸ºåº”ç”¨å’Œæ¡†æ¶æä¾›å¼ºå¤§åŠŸèƒ½çš„èƒ½åŠ›ã€‚ä½†ä½¿ç”¨ä¸å½“ä¹Ÿå¯èƒ½åºŸæ‰ä»£ç çš„,ä¸€åˆ‡ä»£ç å’Œé€»è¾‘éƒ½å¯èƒ½è¢«å¼‚å¸¸ç³Ÿç³•çš„å‰¯ä½œç”¨å½±å“ã€‚\n\nå°±åƒå’Œé­”é¬¼åšäº¤æ˜“ä¸€æ ·å¸¸å¸¸è®©äººæ€€ç€å·¨å¤§çš„ææƒ§ã€‚\n\n## å†å²\n\nå¯¹è±¡å…³è”ï¼ˆæˆ–ç§°ä¸ºå…³è”å¼•ç”¨ï¼‰æœ¬æ¥æ˜¯`Objective-C 2.0`è¿è¡Œæ—¶çš„ä¸€ä¸ªç‰¹æ€§ï¼Œèµ·å§‹äº`OS X Snow Leopard`å’Œ`iOS4`ã€‚\n\næ ¸å¿ƒå‡½æ•°3ä¸ª -- å…è®¸å°†ä»»ä½•é”®å€¼åœ¨å…è®¸æ—¶å…³è”åˆ°å¯¹è±¡ä¸Š\n\n* objc_setAssociatedObject\n* objc_getAssociatedObject\n* objc_removeAssociatedObjects\n\nè¿™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™å…è®¸å¼€å‘è€…å¯¹**å·²ç»å­˜åœ¨çš„ç±»åœ¨æ‰©å±•ä¸­æ·»åŠ è‡ªå®šä¹‰çš„å±æ€§**\n\n## å®ç°çš„3ç§æ–¹å¼\n\n* `static char`\n* `selector`\n* `_cmd_`\n\n### ä½¿ç”¨ `static char` å®ç°\n\n**NSObject+AssociatedObject.h**\n\n```objc\n@interface NSObject (AssociatedObject)\n@property (nonatomic, strong) id associatedObject;\n@end\n```\n**NSObject+AssociatedObject.m**\n\n```objc\n@implementation NSObject (AssociatedObject)\n\nstatic char kAssociatedObjectKey;\n\n- (id)associatedObject\n{\n    return objc_getAssociatedObject(self,&kAssociatedObjectKey);\n}\n\n- (void)setAssociatedObject:(id)associatedObject\n{\n    objc_setAssociatedObject(self, &kAssociatedObjectKey, associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);\n}\n\n@end\n```\n\n### ä½¿ç”¨ `selector` å®ç°\n\n**NSObject+AssociatedObject.h**\n\n```objc\n@interface NSObject (AssociatedObject)\n@property (nonatomic, strong) id associatedObject;\n@end\n```\n\n**NSObject+AssociatedObject.m**\n\n```objc\n@implementation NSObject (AssociatedObject)\n\n- (id)associatedObject\n{\n    return objc_getAssociatedObject(self, @selector(associatedObject));\n}\n\n- (void)setAssociatedObject:(id)associatedObject\n{\n    objc_setAssociatedObject(self, @selector(associatedObject), associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);\n}\n\n@end\n```\n\n### ä½¿ç”¨ `_cmd_` å®ç°\n\n**NSObject+AssociatedObject.h**\n\n```objc\n@interface NSObject (AssociatedObject)\n@property (nonatomic, strong) id associatedObject;\n@end\n```\n\n**NSObject+AssociatedObject.m**\n\n```objc\n@implementation NSObject (AssociatedObject)\n\n- (id)associatedObject\n{\n    return objc_getAssociatedObject(self, _cmd_);\n}\n\n- (void)setAssociatedObject:(id)associatedObject\n{\n    objc_setAssociatedObject(self, @selector(associatedObject), associatedObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);\n}\n\n@end\n```\n\n## å…³è”å¯¹è±¡çš„è¡Œä¸º\n\nå±æ€§æ ¹æ®æšä¸¾ç±»å‹`objc_AssociationPolicy`æ¥å†³å®šè¢«å…³è”åœ¨å¯¹è±¡ä¸Šçš„è¡Œä¸ºï¼š\n\n\n|Behavior                          |ä¸ä¹‹ç­‰æ•ˆçš„@property             |\n|----------------------------------|-------------------------------|\n|OBJC_ASSOCIATION_ASSIGN           | @property (assign) æˆ–@property (unsafe_unretained)                |\n|OBJC_ASSOCIATION_RETAIN_NONATOMIC | @property (nonatomic, strong) |\n|OBJC_ASSOCIATION_COPY_NONATOMIC   | @property (nonatomic, copy)   |\n|OBJC_ASSOCIATION_RETAIN           | @property (atomic, strong)    |\n|OBJC_ASSOCIATION_COPY \t\t\t    | @property (atomic, copy)      |\n\n----\n\n> `OBJC_ASSOCIATION_ASSIGN`ç±»å‹å…³è”å¯¹è±¡çš„å¼±å¼•ç”¨ä¸ä»£è¡¨**weak**çš„å¼±å¼•ç”¨ï¼Œè¡Œä¸ºä¸Šæ›´åƒ`unsafe_unretained`å±æ€§ã€‚\n\n## å¯¹è±¡é”€æ¯æ—¶é—´\n\nè¢«å…³è”çš„å¯¹è±¡åœ¨å£°æ˜å‘¨æœŸå†…æ¯”å¯¹è±¡æœ¬èº«é‡Šæ”¾è¦æ™šå¾ˆå¤šï¼Œåœ¨å¯¹è±¡è°ƒç”¨`-dealloc`ä¸­çš„`object_dispose()`ä¸­é‡Šæ”¾ã€‚\n\n## åˆ é™¤å±æ€§\n\nä½ æˆ–è®¸æƒ³è¦ä½¿ç”¨`objc_removeAssociatedObjectsï¼ˆï¼‰`æ¥è¿›è¡Œåˆ é™¤æ“ä½œï¼Œä½†å®˜æ–¹æ–‡æ¡£ä¸å»ºè®®æ‰‹åŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\n\nè¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šæŠŠå…¶ä»–ç”¨æˆ·å¯¹å…¶æ·»åŠ çš„å±æ€§ä¹Ÿç§»é™¤äº†ï¼Œæ­£ç¡®çš„æ–¹å¼æ˜¯è°ƒç”¨`objc_setAssociatedObject`æ–¹æ³•ï¼Œä¼ å…¥`nil`å€¼æ¥æ¸…æ¥šä¸€ä¸ªå…³è”ã€‚\n\n## ä¼˜ç§€æ ·ä¾‹\n\n* æ·»åŠ ç§æœ‰å±æ€§ç”¨äºæ›´å¥½åœ°å»å®ç°ç»†èŠ‚ã€‚\n* æ·»åŠ publicå±æ€§æ¥å¢å¼ºcategoryçš„åŠŸèƒ½ã€‚\n* åˆ›å»ºä¸€ä¸ªç”¨äºKVOçš„å…³è”è§‚å¯Ÿè€…ã€‚\n\n## åº”ç”¨ä¸¾ä¾‹\n\n### UIImagePickerController å›¾ç‰‡é€‰æ‹©å›è°ƒ\n\nå…³è”ä¸€ä¸ªblockå®ç°å®Œæˆé€‰æ‹©å›¾ç‰‡åçš„å›è°ƒã€‚\n\n\n#### UIImagePickerController+RFBlocks.h\n\n```objc\n@interface UIImagePickerController (RFBlocks)<UIImagePickerControllerDelegate, UINavigationControllerDelegate>\n\ntypedef void(^RFImagePickerFinishBlock)(NSDictionary *info);\n\n@property (nonatomic, copy) RFImagePickerFinishBlock rf_finishBlock;\n\n+ (UIImagePickerController *)rf_imagePickerWithFinishBlock:(RFImagePickerFinishBlock)finishBlock;\n\n@end\n```\n\n#### UIImagePickerController+RFBlocks.m\n\n```objc\nstatic const char kFinishBlockKey;\n\n@implementation UIImagePickerController (RFBlocks)\n\n+ (UIImagePickerController *)rf_imagePickerWithFinishBlock:(RFImagePickerFinishBlock)finishBlock\n{\n    UIImagePickerController *picker = [[UIImagePickerController alloc] init];\n    picker.rf_finishBlock = finishBlock;\n    \n    return picker;\n}\n\n- (RFImagePickerFinishBlock)rf_finishBlock {\n    return objc_getAssociatedObject(self, &kFinishBlockKey);\n}\n\n- (void)setRf_finishBlock:(RFImagePickerFinishBlock)rf_finishBlock {\n    self.delegate = self;\n    \n    objc_setAssociatedObject(self, &kFinishBlockKey, rf_finishBlock, OBJC_ASSOCIATION_COPY_NONATOMIC);\n}\n\n#pragma mark - UIImagePickerControllerDelegate\n\n- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary<NSString *,id> *)info\n{\n    RFImagePickerFinishBlock block = self.rf_finishBlock;\n    \n    if (block)  block(info);\n    \n    [self dismissViewControllerAnimated:YES completion:nil];\n    \n    self.rf_finishBlock = nil;\n}\n\n@end\n```\n\nä½¿ç”¨ï¼š\n\n```objc\n__weak typeof(self)weakSelf = self;\n\nUIImagePickerController *picker =  [UIImagePickerController rf_imagePickerWithFinishBlock:^(NSDictionary *info) {\n        NSLog(@\"finish picke image\\n info:%@\",info);\n        \n        UIImage *img = info[@\"UIImagePickerControllerOriginalImage\"];\n        weakSelf.view.layer.contents = (id)img.CGImage;\n    }];\n[self presentViewController:picker animated:YES completion:nil];\n```\næˆ–è€…\n\n```objc\nUIImagePickerController *picker = [[UIImagePickerController alloc] init];\n    \n__weak typeof(self)weakSelf = self;\n\npicker.rf_finishBlock = ^(NSDictionary *info) {\n    NSLog(@\"finish picke image\\n info:%@\",info);\n    \n    UIImage *img = info[@\"UIImagePickerControllerOriginalImage\"];\n    weakSelf.view.layer.contentsGravity = kCAGravityResizeAspect;\n    weakSelf.view.layer.contents = (id)img.CGImage;\n};\n\n[self presentViewController:picker animated:YES completion:nil];\n```\n\n### UIButton æŒ‰é’®äº‹ä»¶å›è°ƒ\n\nå…³è”ä¸€ä¸ªæŒ‰é’®äº‹ä»¶blockï¼Œå½“è§¦å‘æŒ‰é’®`UIControlEventTouchUpInside`äº‹ä»¶æ—¶å›è°ƒã€‚\n\n##### UIButton+RFBlcoks.h\n\n```objc\n@interface UIButton (RFBlcoks)\n\ntypedef void(^RFButtonClickBlock)(UIButton *button);\n\n@property (nonatomic, copy) RFButtonClickBlock rf_buttonClickBlock;\n\n@end\n```\n\n##### UIButton+RFBlcoks.m\n\n```objc\nstatic char kButttonClickBlockKey;\n\n@implementation UIButton (RFBlcoks)\n\n- (RFButtonClickBlock)rf_buttonClickBlock\n{\n    return objc_getAssociatedObject(self, &kButttonClickBlockKey);\n}\n\n- (void)setRf_buttonClickBlock:(RFButtonClickBlock)rf_buttonClickBlock\n{\n    objc_setAssociatedObject(self, &kButttonClickBlockKey, rf_buttonClickBlock, OBJC_ASSOCIATION_COPY_NONATOMIC);\n    \n    [self addTarget:self action:@selector(buttonClicked) forControlEvents:UIControlEventTouchUpInside];\n}\n\n- (void)buttonClicked\n{\n    if (self.rf_buttonClickBlock) {\n        self.rf_buttonClickBlock(self);\n    }\n}\n\n@end\n```\n\nä½¿ç”¨ï¼š\n\n```\nself.button.rf_buttonClickBlock = ^(UIButton *button){\n        NSLog(@\"%@ clicked\",button);\n};\n```\n\nDemoåœ°å€ï¼š\n\n* [AssociatedObjectDemo](https://github.com/wangruofeng/AssociatedObjectDemo)\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [Associated Objects](http://nshipster.cn/associated-objects/) -- NSHipster\n* [Objective-C Associated Objects](http://kingscocoa.com/tutorials/associated-objects/) -- King's Cocoa\n* [Objective-C Associated Objects çš„å®ç°åŸç†](http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/)-- é›·çº¯å³°çš„æŠ€æœ¯åšå®¢\n* [Associated Objects by Example](http://www.sebastianrehnby.com/blog/2013/01/24/associated-objects-by-example/) -- Sebastian Rehnby\n","tags":["æŠ€å·§","æ•ˆç‡"],"categories":["iOS"]},{"title":"ç©è½¬iOSå‰ªåˆ‡æ¿","url":"/2016/04/14/2016-04-14-wan-zhuan-iosjian-qie-ban/","content":"\n\n### å‰è¨€\n\nç§»åŠ¨åº”ç”¨é£é¡çš„ä»Šå¤©ï¼Œå¤§å®¶è¶Šæ¥è¶Šè§‰å¾—ï¼Œä¸€ä¸ªAppçš„å¤„ç†äº‹æƒ…çš„æ•ˆç‡è‡³å…³é‡è¦ï¼ŒåŒ…æ‹¬ä¸€äº›ç»†èŠ‚å¤„ç†ï¼Œåƒ`æœ¬åœ°åŒ–`ï¼ˆ**localization**ï¼‰å’Œ`è¾…åŠ©åŠŸèƒ½`ï¼ˆ**accessibility**ï¼‰çš„æ”¯æŒæ˜¯é«˜å“è´¨çš„åº”ç”¨å’Œå…¶å®ƒåº”ç”¨åŒºåˆ†å¼€çš„ä¸¤ä¸ªç‰¹æ€§ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠä¸€ä¸ªå¢åŠ ç”¨æˆ·ä½“éªŒå’Œæ•ˆç‡çš„åŠŸèƒ½--`ç¼–è¾‘æ“ä½œ`\n\n### ç¼–è¾‘æ“ä½œ\n\n####  æ ‡å‡†ç¼–è¾‘åŠ¨ä½œ\n\n##### å¤„ç†å¤åˆ¶ï¼Œå‰ªåˆ‡ï¼Œåˆ é™¤å’Œç²˜è´´å‘½ä»¤\n\n* `å¤åˆ¶`ï¼ˆ**copy:**ï¼‰\n* `å‰ªåˆ‡`ï¼ˆ**cut:**ï¼‰\n* `åˆ é™¤`ï¼ˆ**delete:**ï¼‰\n* `ç²˜è´´`ï¼ˆ**paste:**ï¼‰\n\n##### å¤„ç†é€‰æ‹©å‘½ä»¤\n\n* `é€‰æ‹©`ï¼ˆ**select:**ï¼‰\n* `å…¨é€‰`ï¼ˆ**selectAll:**ï¼‰\n\n##### å¯Œæ–‡æœ¬ç¼–è¾‘å‘½ä»¤\n\n* `åŠ ç²—`ï¼ˆ**toggleBoldface:**ï¼‰\n* `æ–œä½“`ï¼ˆ**toggleItalics:**ï¼‰\n* `ä¸‹åˆ’çº¿`ï¼ˆ**toggleUnderline:**ï¼‰\n\n##### æ”¹å˜ä¹¦å†™æ–¹å‘å‘½ä»¤\n\n* `ä¹¦å†™æ–¹å‘å·¦åˆ°å³`ï¼ˆ**makeTextWritingDirectionLeftToLeft:**ï¼‰\n* `ä¹¦å†™æ–¹å‘å³åˆ°å·¦`ï¼ˆ**makeTextWritingDirectionRightToLeft:**ï¼‰\n\n##### æ”¹å˜æ–‡æœ¬å°ºå¯¸å‘½ä»¤\n\n* `å˜å¤§`ï¼ˆ**increaseSize:**ï¼‰\n* `å˜å°`ï¼ˆ**decreaseSize:**ï¼‰\n\n### å®ç°labelçš„å¤åˆ¶ç²˜è´´åŠŸèƒ½\n\n```objc\n// RFLabel.h\n@interface RFLabel : UILabel\n@end\n\n// RFLabel.m\n@implementation RFLabel\n\n- (BOOL)canBecomeFirstResponder {\n    return YES;\n}\n\n- (BOOL)canPerformAction:(SEL)action\n              withSender:(id)sender\n{\n    return (action == @selector(copy:) || action == @selector(paste:));\n}\n\n#pragma mark - UIResponderStandardEditActions\n\n- (void)copy:(id)sender {\n    [[UIPasteboard generalPasteboard] setString:self.text];\n}\n\n- (void)paste:(id)sender {\n    NSString *toBePastedString = [[UIPasteboard generalPasteboard] string];\n    self.text = toBePastedString;\n}\n\n@end\n```\n\nåœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨å®ƒï¼š\n\n```objc\n#import \"ViewController.h\"\n#import \"RFLabel.h\"\n\n@interface ViewController ()\n\n@property (weak, nonatomic) IBOutlet RFLabel *topLabel;\n@property (weak, nonatomic) IBOutlet RFLabel *bottomLabel;\n\n@end\n\n@implementation ViewController\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    // Do any additional setup after loading the view, typically from a nib.\n\n    self.topLabel.userInteractionEnabled = YES;\n    self.bottomLabel.userInteractionEnabled = YES;\n\n    UIGestureRecognizer *gestureRecognizer1 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)];\n    UIGestureRecognizer *gestureRecognizer2 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)];\n\n    [self.topLabel addGestureRecognizer:gestureRecognizer1];\n    [self.bottomLabel addGestureRecognizer:gestureRecognizer2];\n}\n\n- (void)handleLongPressGesture:(UIGestureRecognizer *)recognizer\n{\n    if (recognizer.state == UIGestureRecognizerStateRecognized) {\n        [recognizer.view becomeFirstResponder];\n\n        UIMenuController *menuController = [UIMenuController sharedMenuController];\n        [menuController setTargetRect:recognizer.view.frame inView:recognizer.view.superview];\n        [menuController setMenuVisible:YES animated:YES];\n    }\n}\n\n@end\n```\n\næ€»ç»“ä¸€ä¸‹ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒå¤åˆ¶ç²˜è´´ä¸€ä¸ªlabelçš„æ–‡å­—ï¼Œéœ€è¦å®Œæˆä¸‹é¢å‡ æ­¥ï¼š\n\n* å¿…é¡»ç»§æ‰¿ `UILabel`,åœ¨å­ç±»ä¸­å®ç°`canBecomeFirstResponder`å’Œ`canPerformAction:withSender:`æ–¹æ³•\n* å®ç°æ¯ä¸ªå¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼Œåœ¨æ–¹æ³•ä¸­å’Œ`UIPasteboard`è¿›è¡Œäº¤äº’\n* åˆå§‹åŒ–labelæ—¶ï¼Œå°†labelçš„`userInteractionEnabled`å±æ€§è®¾ç½®ä¸º`YES`\n* å‘labelæ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿ï¼ˆæˆ–è€…æ‰‹åŠ¨åœ¨å­ç±»ä¸­å®ç°`UIResponder`çš„æ–¹æ³•ï¼Œä¾‹å¦‚`touchesBegan:withEvent:`ï¼‰\n* å“åº”æ‰‹åŠ¿è¯†åˆ«äº‹ä»¶ï¼ŒæŒ‡æ˜`UIMenuController`çš„ä½ç½®ï¼Œè®¾ç½®ä¸ºå¯è§\n* æœ€åï¼Œä½¿labelæˆä¸ºç¬¬ä¸€å“åº”è€…\n\n\n### UIMenuController\n\n`UIMenuController`è´Ÿè´£å±•ç¤ºç¼–è¾‘åŠ¨ä½œçš„èœå•é¡¹ã€‚æ¯ä¸ªåº”ç”¨éƒ½æŒæœ‰è‡ªå·±çš„ä¸€ä¸ªå•ä¾‹å¯¹è±¡ sharedMenuControllerã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œèœå•æ§åˆ¶å™¨ä¼šå±•ç¤º`UIResponderStandardEditActions`è¿™ä¸ªéæ­£å¼åè®®ï¼ˆå³ä¸éœ€è¦å¯¹åº”å®ç°çš„åè®®ï¼‰ä¸­çš„æ–¹æ³•ï¼Œ\nå‡å¦‚`canPerformAction:withSender:`è¿”å›`YES`ã€‚\n\n### UIMenuItem\n\nå¯ä»¥é€šè¿‡`UIMenuController`çš„`menuItems`å±æ€§æ·»åŠ è‡ªå®šä¹‰çš„å‘½ä»¤ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯`UIMenuItem`å¯¹è±¡ï¼Œåªéœ€è¦æŒ‡å®šæ¯ä¸ªåŠ¨ä½œçš„`title`å’Œ`action`\n\n```objc\n- (instancetype)initWithTitle:(NSString *)title action:(SEL)action NS_DESIGNATED_INITIALIZER;\n```\n\n### UITableView å’Œ UICollectionView\n\n`UITableView`å’Œ`UICollectionView`å¯ä»¥åœ¨cellä¸Šè°ƒå‡ºç¼–è¾‘èœå•,å…¶å®ä»»ä½•è‡ªå®šä¹‰çš„`UIView`éƒ½èƒ½å®ç°ï¼Œ`UIViewController`çš„å­ç±»åªæ˜¯ä»¥ä¸åŒçš„æ–¹å¼å®ç°è€Œå·²ã€‚ä¸ºäº†è®©`UITableView`å’Œ`UICollectionView`ä¹Ÿèƒ½å®ç°ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€äº›é¢å¤–çš„æ–¹æ³•å¦åˆ™å±å¹•ä¸Šä¸ä¼šæ˜¾ç¤ºä»»ä½•ä¸œè¥¿ã€‚è¿™äº›æ–¹æ³•ç»™äºˆäº†ä½ æ›´å¤šçš„æ§åˆ¶åœ¨æ˜¾ç¤ºæŒ‡å®šçš„ä¸Šä¸‹æ–‡èœå•åŸºäºä½ å°†è¦æ˜¾ç¤ºåœ¨`UITableView`å’Œ`UICollectionView`çš„å†…å®¹ã€‚\n\n#### **UITableViewDelegate** æ–¹æ³•\n\n* â€“ tableView:shouldShowMenuForRowAtIndexPath:\n* â€“ tableView:canPerformAction:forRowAtIndexPath:withSender:\n* â€“ tableView:performAction:forRowAtIndexPath:withSender:\n\n#### **UICollectionViewDelegate** æ–¹æ³•\n\n* â€“ collectionView:shouldShowMenuForItemAtIndexPath:\n* â€“ collectionView:canPerformAction:forItemAtIndexPath:withSender:\n* â€“ collectionView:performAction:forItemAtIndexPath:withSender:\n\n### Bonus\n\nå®ç°`UIImageView`å›¾ç‰‡çš„å¤åˆ¶ç²˜è´´åŠŸèƒ½\n\nDemoåœ°å€ï¼š\n\n* [Menu_Controller_Demo](https://github.com/wangruofeng/Menu_Controller_Demo)\n\n### å‚è€ƒé“¾æ¥\n\n* [UIMenuController](http://nshipster.cn/uimenucontroller/) -- nshipster\n* [UIMenuController_Class](https://developer.apple.com/library/ios/documentation/iPhone/Reference/UIMenuController_Class/) -- UIMenuController Class Reference\n* [Show the UIMenuController and Display Custom Edit Menus](http://supereasyapps.com/blog/2014/4/17/show-the-uimenucontroller-and-display-custom-edit-menus-for-uiviewcontroller-uitableviewcontroller-and-uicollectionview-on-ios-7)\n* [UITableViewCell on iOS 5](https://www.captechconsulting.com/blogs/getting-started-with-uimenucontroller-in-ios-5)\n* [UITableViewController](https://github.com/jszumski/uimenucontroller-example) -- Demo\n","tags":["æŠ€å·§","æ•ˆç‡","å‰ªåˆ‡æ¿"],"categories":["iOS"]},{"title":"åˆ›å»ºè‡ªå®šä¹‰Viewåœ¨IBä¸­å®æ—¶æ¸²æŸ“","url":"/2016/04/10/2016-04-10-chuang-jian-zi-ding-yi-viewzai-ibzhong-shi-shi-xuan-ran/","content":"\næ›¾æƒ³è‡ªå®šä¹‰çš„Viewï¼Œå¯ä»¥åƒç³»ç»Ÿè‡ªå¸¦å±æ€§ä¸€æ ·ï¼Œå¹¶ä¸”å®æ—¶æ¸²æŸ“ï¼ŒåŠ¨æ€æ›´æ–°å†…å®¹ï¼Œç°åœ¨åœ¨Xcode6ç»ˆäºè®©ä½ å¯ä»¥è½»æ¾çš„åšåˆ°ã€‚\n\nä½ ä¸ç”¨ç¼–è¯‘å°±èƒ½å®æ—¶é¢„è§ˆï¼Œç°åœ¨é…ç½®è‡ªå®šä¹‰ç•Œé¢æ–¹ä¾¿å¤šäº†ï¼Œ`IBInspectable`å’Œ`IBDesignable`ä½¿å®ƒæˆä¸ºå¯èƒ½ã€‚\n\n### IBInspectable\n\n`IBInspectable`å±æ€§æä¾›è®¿é—®æ—§åŠŸèƒ½çš„æ–°æ–¹æ³•ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„è¿è¡Œæ—¶å±æ€§ã€‚ä»ç›®å‰çš„èº«ä»½æ£€æŸ¥å™¨ï¼ˆidentity inspectorï¼‰ä¸­è®¿é—®ï¼Œè¿™äº›å±æ€§åœ¨Interface Builderæ•´åˆåˆ°Xcodeã€‚å¯ä»¥é€šè¿‡å®ƒæ¥é…ç½®Nibï¼ŒXibï¼Œstoryboardå®ä¾‹ä¸­çš„ä»»ä½•é”®å€¼ç¼–ç ï¼ˆkey-value-codedï¼‰å±æ€§ï¼š\n\n![runtime Attributes setting](/images/ib_Inspectable/ib_01.jpg)\n\nä»¥å‰æƒ³å®ç°ï¼Œåªèƒ½ç‚¹+å·æ‰‹åŠ¨æ·»åŠ ä¾‹å¦‚æƒ³ç»™`UIView`æ·»åŠ ä¸€ä¸ªåœ†è§’åŠå¾„ï¼Œè®¾ç½®Key Path ä¸ºï¼šlayer.cornerRadius,typeä¸ºNumber ï¼ŒValueä¸º4ï¼Œå¦‚æœä½¿ç”¨`IBInspectable`åªéœ€è¦åœ¨`@property` å£°æ˜ååŠ ä¸ŠIBInspectableï¼ˆæˆ–è€…swift åŠ ä¸Š`@IBInspectable`ï¼‰ï¼Œå°±å¯ä»¥åœ¨IBçš„è§‚å¯Ÿé¢æ¿ä¸­ï¼ˆinspector pannelï¼‰é‡Œç›´æ¥ç¼–è¾‘ã€‚å…¶ä»–äº¤ç”±Xcodeè‡ªåŠ¨å®Œæˆï¼Œå±æ€§åå­—ä¼šè‡ªåŠ¨åˆ†ç»„ï¼Œåç§°ä»é©¼å³°ï¼ˆcamel-ï¼‰è½¬æ¢æˆ title-æ¨¡å¼ã€‚\n\n![inspector pannel](/images/ib_Inspectable/ib_02.jpg)\n\nç›®å‰å¯æ£€æŸ¥å±æ€§æ”¯æŒ\n\n![supported  types](/images/ib_Inspectable/ib_03.jpg)\n\nå¤‡æ³¨ :\n\n1. ç»æœ¬äººäº²æµ‹ï¼Œé™¤`NSNumber`,`NSRange`ä¸ä¼šäº§ç”Ÿè§‚å¯Ÿé¢æ¿å±æ€§ï¼Œ`NSRange`ä¸ä¼šåœ¨runtime Attributes ä¸­è‡ªåŠ¨æ·»åŠ ï¼Œå…¶ä»–éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚\n\n2. æ”¯æŒé¢œè‰²ç±»å‹`UIColor`ä½†æ˜¯ä¸æ”¯æŒ`CALayer`çš„`CGColor`ï¼Œè®¾ç½®é¢œè‰²æ—¶åªéœ€è®¾ç½®`UIColor`ï¼Œä¸è¦è¦è®¾ç½®`CGColor`ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†UIColorè½¬æ¢ï¼Œä¾‹å¦‚è®¾ç½®borderColorã€‚\n\n\n\n### IBDesignable\n\nå½“ä½ åº”ç”¨åˆ°`UIView`æˆ–è€…`UIView`çš„å­ç±»ä¸­çš„æ—¶å€™ï¼Œåªéœ€åŠ ä¸Š`IBDesignable`ï¼Œå°±å¯ä»¥è®©IBåœ¨ç”»å¸ƒä¸Šå®æ—¶æ¸²æŸ“è§†å›¾ã€‚å½“ä½ æ›´æ–°å±æ€§åï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ä¸éœ€è¦é‡æ–°è¿è¡Œç¨‹åºã€‚\n\n\næ ‡è®°ä¸€ä¸ªè‡ªå®šä¹‰è§†å›¾ä¸º`IBDesignable`ï¼Œåªéœ€è¦åœ¨ç±»åå‰é¢åŠ ä¸Š`IB_DESIGNABLE`ï¼ˆ`Swift`é‡ŒåŠ ä¸Š`@IBDesignable`ï¼‰ã€‚ä½ çš„åˆå§‹åŒ–ï¼Œå¸ƒç½®å’Œç»˜åˆ¶æ–¹æ³•éƒ½å°†ç”¨æ¥åœ¨ç”»å¸ƒä¸Šæ¸²æŸ“ä½ çš„è‡ªå®šä¹‰è§†å›¾:\n\n```objc\nIB_DESIGNABLE\n\n@interface CustomView :UIView {\n\n@property (nonatomic, strong) IBInspectable UIColor *borderColor;\t\t\n@property (nonatomic, assign) IBInspectable CGFloat borderWidth;\n\n...\n\n}\n\n@end\n```\n\nå®æ—¶æ•ˆæœï¼š\n\n![custom view](/images/ib_Inspectable/ib_04.jpg)\n\n\næœ‰äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªè®¾è®¡å¸ˆæˆ–è€…å¼€æ”¾äººå‘˜å¯ä»¥è½»æ¾è°ƒæ•´è‡ªå®šä¹‰çš„æ§ä»¶å‘ˆç°ã€‚ä»»ä½•æ”¹å˜ï¼Œéƒ½å°†ç«‹å³å‘ˆç°ï¼Œæœ‰çš„æƒ³`Swift`é‡Œé¢çš„playgroundåŠŸèƒ½ï¼Œå®ç°ï¼š**æ‰€è§å³æ‰€å¾—**ã€‚\n\n\nç”±äºåœ¨ Interface Builder ä¸­å‘ˆç°è‡ªå®šä¹‰è§†å›¾ä¸ä¼šæœ‰åº”ç”¨ç¨‹åºçš„å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œä½ å¯èƒ½éœ€è¦ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ä»¥ä¾¿æ˜¾ç¤ºï¼Œä¾‹å¦‚ä¸€ä¸ªé»˜è®¤ç”¨æˆ·å¤´åƒå›¾ç‰‡æˆ–ä»¿åˆ¶çš„å¤©æ°”æ•°æ®ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä¸ºè¿™ä¸ªç‰¹æ®Šçš„ä¸Šä¸‹æ–‡æ·»åŠ ä»£ç ï¼š\n\n\n1. `prepareForInterfaceBuilder()` :æ­¤æ–¹æ³•ä¸ä½ ä»£ç çš„å…¶ä½™éƒ¨åˆ†ä¸€èµ·ç¼–è¯‘ï¼Œä½†åªæœ‰å½“è§†å›¾æ­£åœ¨å‡†å¤‡åœ¨Interface Builderæ˜¾ç¤ºæ—¶æ‰§è¡Œ\n\n2. TARGET_INTERFACE_BUILDER:#if TARGET_INTERFACE_BUILDERé¢„å¤„å®,åœ¨ `Objective-C` æˆ– `Swift` ä¸‹éƒ½æ˜¯å·¥ä½œçš„ï¼Œå®ƒä¼šè§†æƒ…å†µç¼–è¯‘æ­£ç¡®ä»£ç \n\n```C\n#if !TARGET_INTERFACE_BUILDE\n\n// this code will run in the app it self\n\n#els\n\n// this code will execute only in IB\n#endif\n```\n\n\nå‚è€ƒèµ„æ–™:\n\n* [IBInspectable-IBDesignable](http://nshipster.cn/ibinspectable-ibdesignable/)\n* [Apple å®˜æ–¹ä»‹ç»](https://developer.apple.com/library/ios/recipes/xcode_help-IB_objects_media/Chapters/CreatingaLiveViewofaCustomObject.html)\n\nDemoåœ°å€:\n\n* [IBInspectable_IBDesignable_Demo](https://github.com/xyzyzyxyz/IBInspectable_IBDesignable_Demo_1.0/tree/master)\n","tags":["Favorite","æ•ˆç‡"],"categories":["OC"]},{"title":"Unix Shellå¸¸ç”¨å‘½ä»¤","url":"/2016/03/27/2016-03-27-unixshellchang-yong-ming-ling/","content":"\nè¾“å‡ºæ–‡ä»¶å†…å®¹åˆ°åŸºæœ¬è¾“å‡º\n\n\tcat filename\n\næ”¹å˜æ–‡ä»¶çš„æƒé™\n\n\tchmod æˆ–\n\tchange mode\n\nå½“å‰çš„æ—¶é—´å’Œæ—¥æœŸ\n\n\tdate\n\næ‹·è´\n\n\tcopy\n\næ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹\n\n\tls\n\næ˜¾ç¤ºdiræ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹\n\n\tls dir\n\næŸ¥çœ‹ç£ç›˜ç©ºé—´çŠ¶å†µ\n\n\tdu\n\næŸ¥çœ‹å½“å‰è¿›ç¨‹çŠ¶å†µ\n\n\tps\n\nä½ çš„ç”¨æˆ·åå’Œç»ˆç«¯ç±»å‹\n\n\twho\n\nåˆ›å»ºç›®å½•\n\n\tmkdir  dir\n\nåˆ é™¤ç›®å½•\n\n\trmdir  dir\n\nè¿›å…¥ç›®å½•\n\n\tcd     dir\n\nåˆ é™¤æ–‡ä»¶\n\n\trm     file\n\næ˜¾ç¤ºæ–‡ä»¶\n\n\tmore file\n\næ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬\n\n\techo\n\næ”¹æ–‡ä»¶åã€ç§»åŠ¨æ–‡ä»¶\n\n\tmv  source target\n\næ˜¾ç¤ºç›®å½•è·¯å¾„å‘½ä»¤\n\n\tpwd\n\næ¸…å±\n\n\tclear\n\né€€å‡ºè¾“å…¥å‘½ä»¤\n\n\tCtrl + c   \n\næ”¹å˜æ–‡ä»¶æˆ–ç›®å½•ä¹‹æœ€åä¿®æ”¹æ—¶é—´\n\n\ttouch  name\n\nåˆ é™¤ç›®å½•\n\n\t rmdir directory-name æˆ–\n\t rm -r directory-name\n\n> * rmdir dir1 åˆ é™¤ç›®å½• dir1ï¼Œä½† dir1 ä¸‹å¿…é¡»æ²¡æœ‰æ–‡ä»¶å­˜åœ¨ï¼Œå¦åˆ™æ— æ³•åˆ é™¤ã€‚\n> * rm -r dir1 åˆ é™¤ç›®å½• dir1ï¼ŒåŠå…¶ä¸‹æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ã€‚\n\nåˆ é™¤æ–‡ä»¶\n\n\trm filename (filename å¯ä¸ºæ–‡ä»¶åï¼Œæˆ–æ–‡ä»¶åç¼©å†™ç¬¦å·ã€‚)\n\n> * rm file1 åˆ é™¤æ–‡ä»¶åä¸º file1 ä¹‹æ–‡ä»¶ã€‚\n> * rm file? åˆ é™¤æ–‡ä»¶åä¸­æœ‰äº”ä¸ªå­—ç¬¦ï¼Œå‰å››ä¸ªå­—ç¬¦ä¸ºfile ä¹‹æ‰€æœ‰æ–‡ä»¶ã€‚\n> * rm f* åˆ é™¤æ–‡ä»¶åä¸­ï¼Œä»¥ f ä¸ºå­—é¦–ä¹‹æ‰€æœ‰æ–‡ä»¶ã€‚\n> * rm -rf file åˆ é™¤åä¸ºfileçš„æ–‡ä»¶å¤¹åŠå…¶é‡Œé¢çš„å†…å®¹\n","tags":["Favorite","Unix"],"categories":["Unix"]},{"title":"gitå¸¸ç”¨å‘½ä»¤","url":"/2016/03/27/2016-03-27-gitchang-yong-ming-ling/","content":"\n\n### åˆ›å»ºæ–°çš„ä»“åº“\n\n* æ–°å»ºæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ï¼Œæ‰§è¡Œ\n\n\t\tgit init\n\t\n### æ£€å‡ºä»“åº“\n* åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“å…‹éš†ç‰ˆæœ¬\n\n\t\tgit clone /path/to/repository\n\t\t\n* åˆ›å»ºè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»“åº“\n\t\t\n\t\tgit clone username@host:/path/to/repository\n\n###  Gitå·¥ä½œæµ\n\nä¸€ä¸ªæœ¬åœ°ä»“åº“ç”±gitç»´æŠ¤çš„3å®¢\"æ ‘\"ç»„æˆã€‚\n\n1. å·¥ä½œç›®å½•` working dic`ã€‚ -- å®ƒæŒæœ‰å®é™…æ–‡ä»¶\n2. æš‚å­˜åŒº`Index`ã€‚ -- å®ƒåƒä¸ªç¼“å†²åŒºåŸŸï¼Œä¸´æ—¶ä¿å­˜ä½ çš„æ”¹åŠ¨\n3. `HEAD`ã€‚  -- å®ƒæŒ‡å‘ä½ æœ€åä¸€æ¬¡æäº¤çš„ç»“æœ\n\n \nwork flowï¼š`working dic` --add-- ==> `Index` --commit-- ==>`HEAD`\n\n### æ·»åŠ å’Œæäº¤\n\n* æ·»åŠ åˆ°æš‚å­˜åŒº\n\t\n\t\tgit add <filename>\n\t\tgit add *\n\t\tgit add .\n\t\t\n* æäº¤åˆ°HEAD\n\t\t\n\t\tgit commit -m 'some comment'\n\t\tgit commit -m \"some comment\"\n\t\t\n* æ·»åŠ æäº¤äºŒåˆä¸€\t\n\t\n\t\tgit commit -a -m 'some comment'\n\n### æŸ¥çœ‹ä»“åº“ä¿®æ”¹çŠ¶æ€\n\n\tgit status\n\t\n### æ¨é€æ›´æ”¹\n\n* ç°åœ¨çš„æ”¹åŠ¨å·²ç»æäº¤åˆ°æœ¬åœ°ä»“åº“çš„`HEAD`ä¸­ï¼Œæäº¤åˆ°è¿œç¨‹ä»“åº“\n\t\n\t\tgit push\n\t\t\n> æ ¼å¼`git push (remote) (branch)`,\n> ç¬¬ä¸€æ¬¡pushå¿…é¡»è¿™æ ·å†™ `git push origin master:master`\n\n### æ¨é€åˆ°å…·ä½“æŸä¸€åˆ†æ”¯\n\n\tgit push origin someBranch\n\n### åˆ†æ”¯æ“ä½œ\n\n* æŸ¥çœ‹åˆ†æ”¯\n\t\n\t\tgit branch\n* æŸ¥çœ‹åˆ†æ”¯æœ€åæäº¤çŠ¶æ€\n\t\n\t\tgit branch -v\n> `--merged` ä¸ `--no-merged` è¿™ä¸¤ä¸ªæœ‰ç”¨çš„é€‰é¡¹å¯ä»¥è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ä¸­å·²ç»åˆå¹¶æˆ–å°šæœªåˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ã€‚ å¦‚æœè¦æŸ¥çœ‹å“ªäº›åˆ†æ”¯å·²ç»åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œå¯ä»¥è¿è¡Œ `git branch --merged`\n\n\t    aBranch\n\t    iss53\n      * master\n\n* æ–°å»ºåˆ†æ”¯\n\t\n\t\tgit branch aBranch\n\n* åˆ‡æ¢åˆ°`aBranch`åˆ†æ”¯\n\t\n\t\tgit checkout aBranch\n\t\t\n* æ–°å»ºåˆ‡æ¢åˆ†æ”¯2åˆä¸€\n\t\n\t\tgit checkout - b aBranch\n\t\t\n* åˆ é™¤åˆ†æ”¯\n\t\t\n\t\tgit branch -d aBranch\n\t\t\nå¦‚æœå°†è¦åˆ é™¤çš„åˆ†æ”¯è¿˜æœ‰æ²¡æœ‰åˆå¹¶çš„å†…å®¹ï¼Œåˆ é™¤å°†ä¼šå¤±è´¥ï¼Œä½¿ç”¨`-D`å¼ºåˆ¶åˆ é™¤\n\n\terror: The branch 'testBranch' is not fully merged.\n\tIf you are sure you want to delete it, run 'git branch -D testBranch'.\n\n* åˆ†æ”¯é‡å‘½å\n\t\t\n\t\tgit branch -m oldBranchName newBranchName\n\n\n### åˆ†æ”¯æ“ä½œå®ä¾‹\n`master`æ˜¯é»˜è®¤çš„åˆ†æ”¯ã€‚åœ¨å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå®Œæˆåå†å°†ä»–ä»¬åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚\n\n1. åˆ›å»ºä¸€ä¸ªå«â€œfeature_xâ€çš„åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡å»\n\t\n\t\tgit checkout -b feature_x\n\n2. åˆ‡æ¢å›ä¸»åˆ†æ”¯ï¼š\n\t\t\n\t\tgit checkout master\n\t\t\n3. åˆ é™¤æ–°å»ºåˆ†æ”¯\n\t\n\t\tgit branch -d feature_x\n\t\t\n4. å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“\n\t\n\t\tgit push origin <branch>\n\t\t\n\n### æ›´æ–°ä¸åˆå¹¶\n\n* æ›´æ–°ä½ çš„æœ¬åœ°ä»“åº“åˆ°æœ€æ–°æ”¹åŠ¨\n\t\n\t\tgit pull\n\nä¼šåœ¨ä½ çš„å·¥ä½œç›®å½• æŠ“å–`fetch`å¹¶åˆå¹¶`merge`è¿œç«¯çš„æ”¹åŠ¨\n\n* åˆå¹¶`aBranch`åˆ†æ”¯å›`master`åˆ†æ”¯\n\n\t\tgit checkout master\n\t\tgit merge aBranch\n\nè¿™ç§æ–¹å¼å«åšç›´æ¥åˆå¹¶ï¼ˆstraight mergeï¼‰\næ³¨æ„æ²¡å‚æ•°çš„æƒ…å†µä¸‹`merge`æ˜¯`fast-forward`çš„ï¼Œå³Gitå°†`master`åˆ†æ”¯çš„æŒ‡é’ˆç›´æ¥ç§»åˆ°`aBranch`çš„æœ€å‰æ–¹ã€‚\n\næ¢å¥è¯è¯´ï¼Œå¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»å¯ä»¥åˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯çš„è¯ï¼Œé‚£ä¹ˆGitåœ¨åˆå¹¶ä¸¤è€…æ—¶ï¼Œåªä¼šç®€å•ç§»åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥è¿™ç§åˆå¹¶æˆä¸ºå¿«è¿›å¼(`Fast-forward`)\n\n### å¦‚ä½•é¿å…æ¯æ¬¡è¾“å…¥å¯†ç \n\nå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ HTTPS URL æ¥æ¨é€ï¼ŒGit æœåŠ¡å™¨ä¼šè¯¢é—®ç”¨æˆ·åä¸å¯†ç ã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šåœ¨ç»ˆç«¯ä¸­æç¤ºæœåŠ¡å™¨æ˜¯å¦å…è®¸ä½ è¿›è¡Œæ¨é€ã€‚\n\nå¦‚æœä¸æƒ³åœ¨æ¯ä¸€æ¬¡æ¨é€æ—¶éƒ½è¾“å…¥ç”¨æˆ·åä¸å¯†ç ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª `credential cache`ã€‚ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å°†å…¶ä¿å­˜åœ¨å†…å­˜ä¸­å‡ åˆ†é’Ÿï¼Œå¯ä»¥ç®€å•åœ°è¿è¡Œ `git config --global credential.helper cache` æ¥è®¾ç½®å®ƒã€‚\n\n### å‹åˆåˆå¹¶`squashed commits`\n\nå°†ä¸€æ¡åˆ†æ”¯ä¸Šçš„è‹¥å¹²ä¸ªæäº¤æ¡ç›®å‹åˆæˆä¸€ä¸ªæäº¤æ¡ç›®ï¼Œæäº¤åˆ°å¦ä¸€æ¡åˆ†æ”¯çš„æœ«æ¢¢ã€‚\n\næŠŠ`aBranch`åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤å‹åˆæˆä¸»åˆ†æ”¯ä¸Šçš„ä¸€ä¸ªæäº¤ï¼Œå³å‹åˆæäº¤ï¼š\n\n\tgit checkout master\n\tgit merge --squash aBranch\n\næ­¤æ—¶ï¼Œ`aBranch`ä¸Šçš„æ‰€æœ‰æäº¤å·²ç»åˆå¹¶åˆ°å½“å‰å·¥ä½œåŒºå¹¶æš‚å­˜ï¼Œä½†è¿˜æ²¡æœ‰ä½œä¸ºä¸€ä¸ªæäº¤ï¼Œå¯ä»¥åƒå…¶ä»–æäº¤ä¸€æ ·ï¼ŒæŠŠè¿™ä¸ªæ”¹åŠ¨æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼š\n\n\tgit commit -m 'some comment'\n\t\n### æ‹£é€‰åˆå¹¶`cherry-picking`\n\næ‹£é€‰å¦ä¸€æ¡åˆ†æ”¯ä¸Šçš„æŸä¸ªæäº¤æ¡ç›®çš„æ”¹åŠ¨å¸¦åˆ°å½“å‰åˆ†æ”¯ä¸Šã€‚\n\næ¯ä¸€æ¬¡æäº¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æäº¤åç§°ï¼Œåˆ©ç”¨è¿™ä¸ªåç§°å°±å¯ä»¥è¿›è¡Œæ‹£é€‰æäº¤ã€‚\n\næ¯”å¦‚åœ¨devä¸Šçš„æŸä¸ªæäº¤å«ï¼š`321d76f`\n\næŠŠå®ƒåˆå¹¶åˆ°`master`ä¸­ï¼š\n\n\tgit checkout master\n\tgit cherry-pick 321d76f\n\t\nè¦æ‹£é€‰å¤šä¸ªæäº¤ï¼Œå¯ä»¥ç»™`git cherry-pick`å‘½ä»¤ä¼ é€’`-n`é€‰é¡¹ï¼Œæ¯”å¦‚ï¼š\n\n\tgit cherry-pick â€“n 321d76f\n\nè¿™æ ·åœ¨æ‹£é€‰äº†è¿™ä¸ªæ”¹åŠ¨ä¹‹åï¼Œè¿›è¡Œæš‚å­˜è€Œä¸ç«‹å³æäº¤ï¼Œæ¥ç€å¯ä»¥è¿›è¡Œä¸‹ä¸€ä¸ªæ‹£é€‰æ“ä½œï¼Œä¸€æ—¦æ‹£é€‰å®Œéœ€è¦çš„å„ä¸ªæäº¤ï¼Œå°±å¯ä»¥ä¸€å¹¶æäº¤ã€‚\n\nå¦‚æœå‘ç”Ÿå†²çªï¼Œè§£å†³å†²çªå®Œåæ‰§è¡Œ`git cherry-pick --continue`ç»§ç»­æ‹£é€‰åˆå¹¶ã€‚\n\t\t\n### è§£å†³å†²çªï¼ˆconflictsï¼‰\n\n1. é€šè¿‡`CONFLICT (content):`æ‰¾åˆ°å†²çªæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®\n2. æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œä¿®æ”¹å†²çªåä¿å­˜\n3. é€šè¿‡`git status`æŸ¥çœ‹å†²çªæ˜¯å¦è§£å†³\n4. é€šè¿‡`git diff <source_branch> <target_banch>`é¢„è§ˆå·®å¼‚ \n5. æäº¤æ›´æ”¹`git commit -a -m 'some comment'`\n\n### æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯çš„å®Œæ•´åˆ—è¡¨\n\n\tgit ls-remote\n\n### è·å–è¿œç¨‹åˆ†æ”¯æ›´å¤šä¿¡æ¯\n\t\n\tgit remote show\n\n### æ–°å»ºè¿œç¨‹åˆ†æ”¯\n\n\tgit push --set-upstream origin newBranch\n\t\n### æäº¤åˆ†æ”¯æ•°æ®åˆ°è¿œç¨‹æœåŠ¡å™¨\n\t\n\tgit push origin <local_branch_name>:<remote_branch_name>\n\n### åˆ é™¤è¿œç¨‹åˆ†æ”¯\n\n\tgit push origin :develop\n\tgit push origin --delete develop\n\t\n### æ ‡ç­¾\n\nåˆ›å»ºä¸€ä¸ª1.0.0çš„æ ‡ç­¾\n\t\n\tgit tag 1.0.0 1b2e1d63ff\n\t\n**1b2e1d63ff**æ˜¯ä½ æƒ³è¦æ ‡è®°çš„æäº¤IDçš„å‰10ä½å­—ç¬¦ï¼Œå¯ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è·å–æäº¤ID\n\n\tgit log\n\t\n### æ›¿æ¢æœ¬åœ°æ”¹åŠ¨\n\t\n\tgit checkout -- <filename>\n\t\næ­¤å‘½ä»¤ä¼šä½¿ç”¨`HEAD`ä¸­çš„æœ€æ–°å†…å®¹æ›¿æ¢æ‰ä½ çš„å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å·²æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ä»¥åŠæ–°æ–‡ä»¶éƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚\n\nå‡å¦‚ä½ æƒ³ä¸¢å¼ƒä½ åœ¨æœ¬åœ°çš„æ‰€æœ‰æ”¹åŠ¨ä¸æäº¤ï¼Œå¯ä»¥åˆ°æœåŠ¡å™¨ä¸Šè·å–æœ€æ–°çš„ç‰ˆæœ¬å†å²ï¼Œå¹¶å°†ä½ æœ¬åœ°ä¸»åˆ†æ”¯æŒ‡å‘å®ƒ\n\n\tgit fetch orgin\n\tgit reset --hard origin/master\n\t\n\nå‚è€ƒé“¾æ¥\n\n* [Git - ç®€æ˜æŒ‡å—](http://rogerdudler.github.io/git-guide/index.zh.html)\n* [Gitç¤¾åŒºå‚è€ƒæŒ‡å—](https://git-scm.com/book/en/v2)\n* [Github Help](https://help.github.com)\n* [å›¾è§£Git](http://marklodato.github.io/visual-git-guide/index-zh-cn.html)\n* [Think like a git](http://think-like-a-git.net)\n","tags":["Favorite","æ•ˆç‡","Git"],"categories":["Git"]},{"title":"ä½¿ç”¨Mantleé«˜æ•ˆæ„å»ºModel","url":"/2016/03/03/2016-03-03-shi-yong-mantlegao-xiao-gou-jian-model/","content":"\n### æ¦‚è¿°\n\nåœ¨iOSå¼€å‘ä¸­ï¼Œä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åè§£ææˆæœ¬åœ°çš„æ¨¡å‹æ˜¯ç»å¸¸çš„è¦åšäº‹ï¼Œè€Œä¸”é‡å¤æ¬¡æ•°ç‰¹åˆ«å¤šï¼Œæ¯æ¬¡å¢åŠ ä¸€ä¸ªç½‘ç»œè¯·æ±‚æˆ–è€…å¢åŠ ä¸€ä¸ªæ¨¡å‹éƒ½éœ€è¦å®Œæˆ`JSON`åˆ°`Model`å±‚çš„è½¬æ¢ï¼Œæ‰‹å†™é€šè¿‡å­—å…¸`valueForKey:`ç›´æ¥è§£æå·²ç»æ›´ä¸ä¸Šæ—¶ä»£çš„æ­¥ä¼ï¼Œå­¦ä¼šåˆ©ç”¨å·¥å…·æé«˜è‡ªå·±çš„å·¥ä½œæ•ˆç‡ï¼Œä»Šå¤©å°±åˆ†äº«ä¸€ä¸‹`Mantle`è¿™ä¸ªæ¡†æ¶è§£æçš„å¿ƒå¾—ã€‚\n\n`Mantle`è§£å†³çš„ç—›ç‚¹ï¼š\n\n* æœåŠ¡å™¨ç»å¸¸æ›´æ–°ï¼ˆæ·»åŠ æˆ–è€…åˆ é™¤ï¼‰å­—æ®µï¼Œå®¢æœç«¯éœ€è¦åœ¨`Model`å±‚åˆå§‹åŒ–çš„æ—¶å€™ä¿®æ”¹å–å€¼å­—æ®µï¼Œæ˜“å‡ºé”™ï¼Œè€Œä¸”ç¹çã€‚\n* å®ç°è‡ªå®šä¹‰çš„`Model`çš„åºåˆ—åŒ–ï¼Œä»¥ä¾¿å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ç°`NSCoding`åè®®ï¼Œåœ¨æ¨¡å‹å¤åˆ¶çš„æƒ…å†µä¸‹æ·»åŠ æˆ–è€…ä¿®æ”¹å­—æ®µéå¸¸éº»çƒ¦ã€‚\n* è‡ªå®šä¹‰çš„`Model`çš„`Copy`,ä½ å¿…é¡»æ‰‹åŠ¨å®ç°`NSCopying`åè®®,è€Œä¸”æ²¡æœ‰åŠæ³•ååºåˆ—åŒ–æˆ`JSON`ã€‚\n\n`Mantle`å¾ˆå¥½çš„è§£å†³çš„ä»¥ä¸Šç—›ç‚¹ï¼š\n\n* å®ç°äº†`NSCopying`åè®®ã€‚\n* å®ç°äº†`NSCoding`åè®®ï¼Œå¯ä»¥é€šè¿‡`NSKeyedArchiver`å°†æ•°æ®å½’æ¡£åˆ°æœ¬åœ°ã€‚\n* æä¾›äº†`isEqual:`å’Œ`hash`çš„é»˜è®¤å®ç°ã€‚\n* å¯ä»¥åœ¨`Model`å’Œ`JSON`ä¹‹é—´äº’ç›¸è½¬æ¢ã€‚\n\n\n\n\nä»¥ä¸€ä¸ª`CATProfile`æ¨¡å‹ç±»ä¸ºä¾‹ï¼Œæ¼”ç¤ºè¿™ä¸ªæ¡†æ¶æ€æ ·ä»¥ä¸€ç§éå¸¸ç®€å•çš„æ–¹å¼å°†ä¸€ä¸ª`NSDictionary`å¯¹è±¡æ˜ å°„æˆä¸€ä¸ª`Objective-C`,åä¹‹äº¦ç„¶ã€‚\n\nä¸‹é¢çš„`CATProfile`æ¨¡å‹\n\n```json\n{\n  \"id\": 1,\n  \"name\": \"Objective Cat\",\n  \"birthday\": \"2013-09-12 13:29:36 +0100\",\n  \"website\": \"http://objc.at\",\n  \"location\": { \"lat\": \"48.2083\", \"lon\": \"16.3731\" },\n  \"relationship_status\": \"single\",\n  \"awesome\": true\n}\n```\n\nä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`MTLModel`å­ç±»ä»£è¡¨ä»¥ä¸Šçš„`Json`å¯¹è±¡ã€‚\n\n```objc\n\n// CATProfile.h\ntypedef NS_ENUM(NSInteger, CATRelationshipStatus) {\n    CATRelationshipStatusSingle = 0,\n    CATRelationshipStatusInRelationship,\n    CATRelationshipStatusComplicated\n};\n\n@interface CATProfile : MTLModel<MTLJSONSerializing>\n\n@property(strong, nonatomic) NSNumber *profileId;\n@property(strong, nonatomic) NSString *name;\n@property(strong, nonatomic) NSDate *birthday;\n@property(strong, nonatomic) NSURL *website;\n@property(nonatomic) CLLocationCoordinate2D locationCoordinate;\n@property(nonatomic) CATRelationshipStatus relationshipStatus;\n@property(nonatomic, getter=isAwesome) BOOL awesome;\n\n@end\n\n```\n\n`CATProfile`ç±»ç»§æ‰¿è‡ª`MTLModel`å¹¶ä¸”å®ç°äº†`MTLJSONSerializing`ï¼Œåè®®è¦æ±‚å®ç°`+JSONKeyPathsByPropertyKey`æ–¹æ³•\n\n```objc\n\n// CATProfile.m\n@implementation\n\n+ (NSDictionary *)JSONKeyPathsByPropertyKey {\n    // properties defined in header < : > key in JSON Dictionary\n    return @{\n             @\"profileId\":          @\"id\",\n             @\"websiteURL\":         @\"website\",\n             @\"locationCoordinate\": @\"location\",\n             @\"relationshipStatus\": @\"relationship_status\",\n            };\n}\n\n@end\n\n```\n\n`+JSONKeyPathsByPropertyKey`æ–¹æ³•è¿”å›ä¸€ä¸ªåœ¨JSONæ•°æ®ä¸­éœ€è¦æ¨¡å‹çš„å±æ€§åŒ¹é…çš„å€¼çš„å­—å…¸ï¼Œè¿™èƒ½ç¡®ä¿`Mantle`çŸ¥é“é‚£ä¸ªJSONé”®é”®ä½¿ç”¨æ¥æ„æˆä¸€ä¸ªæŒ‡å®šçš„æ¨¡å‹æ¥å£ã€‚\n\nå¾ˆæ˜æ˜¾é™¤äº†è¿™ä¸ªåˆ—è¡¨ä¸­çš„`name`,`birthday`å’Œ`awesome`å±æ€§ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§åœ¨å­—å…¸ä¸­è¢«å¿½ç•¥ï¼Œ`Mantle`å°†è‡ªåŠ¨åœ¨JSONä¸­æŸ¥æ‰¾å¸¦æœ‰ç›¸åŒåç§°çš„æ¥å£ã€‚\n\n**NSValueTransformer**\n\n`Mantle`è¿˜èƒ½å¤Ÿå¤„ç†ä»»æ„ç±»å‹çš„è½¬æ¢ï¼Œä¾‹å¦‚`NSString`he`NSNumber`é»˜è®¤æ”¯æŒã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿéœ€è¦ä¸€äº›å¸®åŠ©å¯¹äºå¤„ç†éä»»æ„çš„ç±»å‹ä¾‹å¦‚`NSURL`å’Œ`æšä¸¾`è¿˜æœ‰è‡ªå®šä¹‰çš„ç»“æ„ä½“åƒ`CLLocationCoordinate2D`ã€‚\n\n`Mantle`ä¾èµ–**Foundation**æ¡†æ¶ä¸‹`NSValueTransformer`å¯¹è±¡æ¥å®ç°åœ¨æ¨¡å‹ä»£è¡¨çš„JSONå±‚å’ŒOCå¯¹è±¡çš„å®é™…æ¥å£ä¹‹é—´çš„å€¼çš„æ˜ å°„ã€‚\n\nåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰**transformer**ç»™æŸä¸ªå±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå«åš`+<propertyName>JSONTransformer`çš„ç±»æ–¹æ³•å¹¶ä¸”è¿”å›ä¸€ä¸ªæƒ³è¦çš„`NSValueTransformer`å¯¹è±¡ã€‚\n\n```objc\n// mapping birthday to NSDate and vice-versa\n+ (NSValueTransformer *)birthdayJSONTransformer {\n    return [MTLValueTransformer reversibleTransformerWithForwardBlock:^(NSString *dateString) {\n        return [self.dateFormatter dateFromString:dateString];\n    } reverseBlock:^(NSDate *date) {\n        return [self.dateFormatter stringFromDate:date];\n    }];\n}\n\n+ (NSDateFormatter *)dateFormatter {\n    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];\n    dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@\"en_US_POSIX\"];\n    dateFormatter.dateFormat = @\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\";\n\n    return dateFormatter;\n}\n```\n\n`Mantle`åœ¨`runtime`è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å†³å®šæ€æ ·å˜æ¢**birthday **å±æ€§ï¼Œæ­£å‘è½¬æ¢blockä»ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡åˆ°ä¸€ä¸ª`NSDate`å¯¹è±¡ï¼Œåå‘è½¬æ¢blockå°†`NSDate`å¯¹è±¡è½¬æ¢å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œéå¸¸æ£’ï¼\n\nä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å˜æ¢æ–¹æ³•ï¼Œå¯¹äºæ‰€æœ‰çš„æˆ‘ä»¬éœ€è¦æ³¨æ„çš„éä»»æ„å±æ€§ä»¥ä¾›å‚è€ƒã€‚\n\n### NSURL â†”ï¸ JSON string\n\n```objc\n+ (NSValueTransformer *)websiteURLJSONTransformer {\n    return [NSValueTransformer valueTransformerForName:MTLURLValueTransformerName];\n}\n```\n\n### CLLocationCoordinate2D â†”ï¸ JSON object\n\n```objc\n+ (NSValueTransformer *)locationCoordinateJSONTransformer {\n    return [MTLValueTransformer reversibleTransformerWithForwardBlock:^(NSDictionary *coordinateDict) {\n        CLLocationDegrees latitude = [coordinateDict[@\"lat\"] doubleValue];\n        CLLocationDegrees longitude = [coordinateDict[@\"lon\"] doubleValue];\n        return [NSValue valueWithMKCoordinate:CLLocationCoordinate2DMake(latitude, longitude)];\n    } reverseBlock:^(NSValue *coordinateValue) {\n        CLLocationCoordinate2D coordinate = [coordinateValue MKCoordinateValue];\n        return @{@\"lat\": @(coordinate.latitude), @\"lon\": @(coordinate.longitude)};\n    }];\n}\n```\n\n### enum â†”ï¸ JSON string\n\n```objc\n+ (NSValueTransformer *)relationshipStatusJSONTransformer {\n    return [NSValueTransformer mtl_valueMappingTransformerWithDictionary:@{\n        @\"single\": @(CATRelationshipStatusSingle),\n        @\"relationship\": @(CATRelationshipStatusInRelationship),\n        @\"complicated\": @(CATRelationshipStatusComplicated)\n    }];\n}\n```\n\n### BOOL â†”ï¸ JSON boolean\n\n```objc\n+ (NSValueTransformer *)awesomeJSONTransformer {\n    return [NSValueTransformer valueTransformerForName:MTLBooleanValueTransformerName];\n}\n```\n\n###  ä»JSONåˆ›å»ºæ¨¡å‹å¯¹è±¡\n\nä¸€æ—¦æ¨¡å‹é…ç½®å®Œæˆï¼Œå°±è¯¥è·å¾—JSONå¯¹è±¡ä»APIä¸­ï¼Œå¹¶ä¸”æŠŠå®ƒè½¬æ¢æˆæˆ‘ä»¬æ¨¡å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠJSONå‘ˆç°è½¬æ¢æˆä¸€ä¸ª`NSDictionary`,å®ƒèƒ½å¤Ÿç”¨æ¥é€šè¿‡`Mantle`æ¥åˆ›å»ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œå¾ˆå¹¸è¿çš„æ˜¯iOSæä¾›äº†ä¸€ä¸ªéå¸¸æ£’çš„æ–¹æ³•æ¥å¤„ç†å®ƒï¼Œå°±æ˜¯é€šè¿‡`NSJSONSerialization`ã€‚\n\né‚£æ ·ä»¥åï¼Œ`MTLJSONAdapter`ç±»å°±èƒ½åˆ©ç”¨`Mantle`åšç¹é‡çš„å·¥ä½œæ¥åˆ›å»ºæˆ‘ä»¬çš„æ¨¡å‹ã€‚\n\n```objc\n// create NSDictionary from JSON data\nNSData JSONData = ... // the JSON response from the API\nNSDictionary *JSONDict = [NSJSONSerialization JSONObjectWithData:JSONData options:0 error:NULL];\n\n// create model object from NSDictionary using MTLJSONSerialisation\nCATProfile *profile = [MTLJSONAdapter modelOfClass:CATProfile.class fromJSONDictionary:JSONDict error:NULL];\n```\n\n### ä»æ¨¡å‹å¯¹è±¡åˆ›å»ºJSON\n\n`MTLJSONAdapter`ä¹Ÿæœ‰èƒ½åŠ›åˆ›å»ºä¸€ä¸ªå­—å…¸ä»æˆ‘ä»¬çš„çš„æ¨¡å‹ç±»ä¸­ï¼Œä»¥ä¾¿èƒ½ç›´æ¥ç¼–ç å›ä¸€ä¸ªJSONå­—ç¬¦ä¸²ã€‚\n\n```objc\n// create NSDictionary from model class using MTLJSONSerialisation\nCATProfile *profile = ...\nNSDictionary *profileDict = [MTLJSONAdapter JSONDictionaryFromModel:profile];\n\n// convert NSDictionary to JSON data\nNSData *JSONData = [NSJSONSerialization dataWithJSONObject:profileDict options:0 error:NULL];\n```\n\n> å‡å¦‚å½“åˆ›å»ºä¸€ä¸ªJSONå‘ˆç°ä½ çš„æ¨¡å‹æ˜¯åœ¨ä½ çš„æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªå±æ€§ä¸åº”è¯¥åŒ…æ‹¬ï¼Œä½ åº”è¯¥è¿”å›`NSNull.null`,ä¾‹å¦‚ã€‚åœ¨`+JSONKeyPathsByPropertyKey`çš„@{\"name\" : \"NSNull.null\"}ã€‚`Mantle`å°†å®‰å…¨çš„å¿½ç•¥è¿™ä¸ªå±æ€§ã€‚\n\n### æ˜ å°„æ•°ç»„å’Œå­—å…¸\n\nå¤§å¤šæ•°æƒ…å†µï¼Œæ¨¡å‹å’Œå…¶ä»–æ¨¡å‹æœ‰å…³ç³»ï¼Œè¿™äº›å…³ç³»æ™®éé€šè¿‡JSONæ•°ç»„æˆ–è€…å¯¹è±¡æ¥å‘ˆç°ã€‚\n\n```json\n{\n  \"id\": 1,\n  \"name\": \"Objective Cat\",\n  ...,\n\n  \"owner\": {\n    \"id\": 99,\n    \"name\": \"Alexander Schuch\"\n  },\n  \"friends\": [\n    {\n      \"name\": \"Owly\",\n      \"type\": \"bird\"\n    },\n    {\n      \"name\": \"Hedgy\",\n      \"type\": \"mammal\"\n    }\n  ]\n}\n```\n\n`Mantle`æ”¯æŒæ˜ å°„è¿™äº›å…³ç³»åˆ°æ–°çš„æ¨¡å‹ï¼Œä¸ºäº†è®©`Mantle`çŸ¥é“æ€æ ·å˜æ¢å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æä¾›çš„åˆ†ç±»æ–¹æ³•ä¸­çš„ä¸€ä¸ªæ¥è¿”å›`NSValueTransformer`ã€‚\n\n\n```objc\n+ (NSValueTransformer *)mtl_JSONDictionaryTransformerWithModelClass:(Class)modelClass;\n+ (NSValueTransformer *)mtl_JSONArrayTransformerWithModelClass:(Class)modelClass;\n```\n\nå½“ç„¶`Mantle`éœ€è¦çŸ¥é“è¿™äº›å®˜å’Œä»–ä»¬çš„å°†è¦è½¬æ¢çš„`MTLModel`å­ç±»ï¼Œå°±åƒå’Œåˆ›å»ºä¸€ä¸ªæ–°çš„`MTLModel`å­ç±»å¹¶ä¸”å®ç°å°†è¦æ˜ å°„åˆ°è¿™äº›å¯¹è±¡çš„`MTLJSONSerializing`åè®®ä¸€æ ·ç®€å•ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€äº›æ–°çš„å±æ€§åˆ°æˆ‘ä»¬`CATProfile`ç±»ä¸­å¹¶ä¸”å®ç°ä¸¤ä¸ªæ–°çš„è½¬æ¢å™¨ã€‚\n\n```objc\n// CATProfile.h\n@property(strong, nonatomic) CATOwner *owner;   // CATOwner is a MTLModel subclass\n@property(strong, nonatomic) NSArray *friends;  // Array of CATFriend objects\n\n// CATProfile.m\n+ (NSValueTransformer *)ownerJSONTransformer {\n    return [NSValueTransformer mtl_JSONDictionaryTransformerWithModelClass:CATOwner.class];\n}\n\n+ (NSValueTransformer *)friendsJSONTransformer {\n    return [NSValueTransformer mtl_JSONArrayTransformerWithModelClass:CATFriend.class];\n}\n```\n\n### ä¸€äº›æœ‰ç”¨çš„è¡¥å……\n\næˆ‘ä»¬ç®€å•çš„èŠäº†ä¸€ä¸‹`NSValueTransformer`åœ¨å‰é¢,`NSValueTransformer`æœ‰ä¸€ä¸ªéå¸¸æ£’çš„ç‰¹å¾è®©é€šè¿‡åå­—å…¨å±€æ³¨å†Œä¸€ä¸ªå˜æ¢å™¨æˆä¸ºå¯èƒ½ã€‚å‡å¦‚ä½ æ­£åœ¨ä½¿ç”¨ç›¸åŒçš„å˜æ¢å™¨åœ¨ä½ æ•´ä¸ªappä¸­ï¼Œç¡®ä¿å­ç±»åŒ–`NSValueTransformer`ï¼Œæ³¨å†Œä½ çš„è‡ªå®šä¹‰å˜æ¢å™¨ä¸€æ¬¡å¹¶ä¸”åœ¨ä½ éšåçš„`MTLModels`ä¸­ä½¿ç”¨å®ƒã€‚\n\n```objc\n// In CATProfile.m\nNSString * const kCATCustomValueTransformerName = @\"CATCustomValueTransformer\";\n\n+ (void)initialize\n{\n  // Register NSValueTransformer\n  if (self == CATProfile.class) {\n    CATCustomValueTransformer *transformer = [CATCustomValueTransformer new];\n    [NSValueTransformer setValueTransformer:transformer forName:kCATCustomValueTransformerName];\n  }\n}\n\n// Then use the custom transformer to translate properties using Mantle\n+ (NSValueTransformer *)whateverPropertyJSONTransformer {\n    return [NSValueTransformer valueTransformerForName:kCATCustomValueTransformerName];\n}\n```\n\n### ç»“è®º\n\n`Mantle`æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è¡¥å……å¤„ç†`JSON`APIsï¼Œç„¶è€Œï¼Œä½ ä¹Ÿå¿…é¡»æ„è¯†åˆ°å‡å¦‚ä½ ä¸å¾—ä¸å¤„ç†éå¸¸å¤æ‚çš„æ•°æ®æˆ–è€…ä¸ç¨³å®šçš„APIså®ƒä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚\n\nå‚è€ƒèµ„æ–™\n\n* [Mantle-Cat](http://www.objc.at/mantle)\n* [Mantle Framework on Github](https://github.com/MantleFramework/Mantle)\n* [NSValueTransformer at NSHipster](http://nshipster.com/nsvaluetransformer/)\n* [Mantle as a Model Layer for iOS and OS X Apps](http://www.dominikgruber.com/articles/2013/08/mantle-as-a-model-layer-for-ios-and-os-x-apps)\n* [iOS JSON æ¨¡å‹è½¬æ¢åº“è¯„æµ‹](http://blog.ibireme.com/2015/10/23/ios_model_framework_benchmark/)\n","tags":["Favorite","æŠ€å·§","æ•ˆç‡"],"categories":["iOS"]},{"title":"4ç§æ–¹å¼å®ç°iOSæ¨¡ç³Šæ•ˆæœ","url":"/2016/01/31/2016-01-31-3chong-fang-shi-shi-xian-iosmo-hu-xiao-guo/","content":"\nä»‹ç»iOSä¸­ä»¥ä¸‹å››ç§æ–¹å¼å®ç°ï¼š\n\n* `CoreImage`ä¸­çš„æ¨¡ç³Šæ»¤é•œ\n* `UIImage + ImageEffects`çš„categoryæ¨¡ç³Šæ•ˆæœ\n* iOS8ä¸­`UIVisualEffectView`æ¨¡ç³Šæ•ˆæœ\n* iOS7ä»¥åé€šè¿‡`UIToolBar`å®ç°æ¨¡ç³Šæ•ˆæœ\n\n\n### `CoreImage`ä¸­çš„æ¨¡ç³Šæ»¤é•œå®ç°\n\n`CoreImage`ä¸»è¦é€šè¿‡`CIFilter`è¿™ä¸ªç±»æ¥å®ç°ã€‚\n\nè¿™ä¸ªç±»æ”¯æŒçš„æ»¤é•œå¤šè¾¾14ç±»ï¼Œæ¯ä¸ªç±»åˆç»†åˆ†å¤šæ¬¾æ»¤é•œï¼š\n\n1. CICategoryBlur\n\t* CIBoxBlur\n\t* CIDiscBlur\n\t* **CIGaussianBlur**\n\t* CIMaskedVariableBlur\n\t* CIMedianFilter\n\t* CIMotionBlur\n\t* CINoiseReduction\n\t* CIZoomBlur\n* CICategoryColorAdjustment\n\t* CIColorClamp\n\t* CIColorControls\n\t* CIColorMatrix\n\t* CIColorPolynomial\n\t* CIExposureAdjust\n\t* CIGammaAdjust\n\t* CIHueAdjust\n\t* CILinearToSRGBToneCurve\n\t* CISRGBToneCurveToLinear\n\t* CITemperatureAndTint\n\t* CIToneCurve\n\t* CIVibrance\n\t* CIWhitePointAdjust\n* CICategoryColorEffect\n* CICategoryCompositeOperation\n* CICategoryDistortionEffect\n* CICategoryGenerator\n* CICategoryGeometryAdjustment\n* CICategoryGradient\n* CICategoryHalftoneEffect\n* CICategoryReduction\n* CICategorySharpen\n* CICategoryStylize\n* CICategoryTileEffect\n* CICategoryTransition\n\næˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯é«˜æ–¯æ¨¡ç³Šï¼Œä¹Ÿå°±æ˜¯`CIGaussianBlur`ã€‚\n\n**Sample Codeï¼š**\n\n```objective-c\n\n    UIImage *avatar = [UIImage imageNamed:@\"avatar\"];\n    \n    /********** CoreImage ************/\n    \n    // CIImage\n    CIImage *ciImage = [[CIImage alloc] initWithImage:avatar];\n    \n    // CIFilter\n    CIFilter *blurFilter = [CIFilter filterWithName:@\"CIGaussianBlur\"];\n    \n    // è®¾ç½®æ¨¡ç³Šæ»¤é•œåŠå¾„\n    [blurFilter setValue:@(20) forKey:@\"inputRadius\"];\n    \n    // å°†å›¾ç‰‡è¾“å…¥åˆ°æ»¤é•œ\n    [blurFilter setValue:ciImage forKey:kCIInputImageKey];\n    \n    // å°†å¤„ç†å¥½çš„å›¾ç‰‡è¾“å‡º\n    CIImage *outCiImage = [blurFilter valueForKey:kCIOutputImageKey];\n    \n    // æŸ¥è¯¢å¯ä»¥è®¾ç½®çš„å‚æ•°å’Œä¸€äº›ä¿¡æ¯\n    NSLog(@\"%@\",[blurFilter attributes]);\n    \n    // CIContext\n    CIContext *contex = [CIContext contextWithOptions:nil];\n    \n    // è·å–CGImageå¥æŸ„\n    CGImageRef outCGImage = [contex createCGImage:outCiImage fromRect:[outCiImage extent]];\n    \n    // æœ€ç»ˆè·å–åˆ°å›¾ç‰‡\n    UIImage *blurImage = [UIImage imageWithCGImage:outCGImage];\n    \n    // é‡Šæ”¾CGImageå¥æŸ„\n    CGImageRelease(outCGImage);\n    \n```\n\næ­¤æ—¶`blurImage`å›¾ç‰‡å°±æ˜¯ç»è¿‡æ»¤é•œå¤„ç†åçš„å›¾ç‰‡ï¼Œåœ¨æ”¾åœ¨`ImageView`ä¸ŠåŠ è½½å³å¯çœ‹åˆ°æ•ˆæœã€‚\n\n![avatar](/images/img_blur.jpg)\n\n\n### `UIImage + ImageEffects`çš„categoryæ¨¡ç³Šæ•ˆæœ\n\nä½¿ç”¨Appleå¼€æºçš„ä¸€ä¸ªå›¾ç‰‡å¤„ç†åˆ†ç±»æ¥å®ç°ï¼Œè¿™ä¸ªä½¿ç”¨èµ·æ¥åªéœ€ä¸€è¡Œä»£ç ï¼Œç®€æ´æ˜äº†ã€‚\n\n```objective-c\n\n\tUIImage *blurImage = [sourceImage blurImage];\n\t\n```\n\nè¿™é‡Œå°è£…äº†ä¸€ä¸ªåŒºåŸŸæ¨¡ç³Šæ•ˆæœçš„æ–¹æ³•\n\n```objective-c\n\n\t- (UIImage *)blurImageAtFrame:(CGRect)frame;\n\t\n```\n\n### iOS8ä¸­`UIVisualEffectView`æ¨¡ç³Šæ•ˆæœ\n\nè¿™ä¸ªæ•ˆæœåªæ”¯æŒiOS8.0ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œé€šè¿‡`UIVisualEffectView`æ¥å®ç°ã€‚\n\n**Sample Codeï¼š**\n\n```objective-c\n\n\t// 1.åˆ›å»ºæ¨¡ç³Šview\n    UIVisualEffectView *effectView = [[UIVisualEffectView alloc] initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleLight]];\n    \n    // 2.è®¾ç½®å°ºå¯¸\n    effectView.frame = CGRectMake(0, 100, [UIScreen mainScreen].bounds.size.width, 200);\n    \n    // 3.æ·»åŠ åˆ°viewå½“ä¸­\n    [self.view addSubview:effectView];\n    \n```\n\n**ğŸ˜ŠBonus:**\nå®ç°iOSé«˜ç‰ˆæœ¬é€šçŸ¥ä¸­å¿ƒç‚«é…·çš„Labelæ¨¡ç³Šæ•ˆæœã€‚\n\n```objective-c\n\n\t// æ·»åŠ ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾\n    UILabel *label = [[UILabel alloc] initWithFrame:effectView.bounds];\n    label.text = @\"www.blog.wangruofeng007\";\n    label.textAlignment = NSTextAlignmentCenter;\n    label.font = [UIFont systemFontOfSize:30];\n    [effectView.contentView addSubview:label];\n    \n    /***************** æ·»åŠ æ¨¡ç³Šæ•ˆæœ *****************/\n    \n    // 1.åˆ›å»ºå­æ¨¡ç³Šview\n    UIVisualEffectView *subEffectView = [[UIVisualEffectView alloc] initWithEffect:[UIVibrancyEffect effectForBlurEffect:(UIBlurEffect *)effectView.effect]];\n    \n    // 2.è®¾å®šå°ºå¯¸\n    subEffectView.frame = effectView.bounds;\n    \n    // 3.å°†å­æ¨¡ç³Šviewæ·»åŠ åˆ°effectViewçš„contenViewæ‰èƒ½ç”Ÿæ•ˆ\n    [effectView.contentView addSubview:subEffectView];\n    \n    // 4.æ·»åŠ è¦æ˜¾ç¤ºçš„viewæ¥è¾¾åˆ°ç‰¹æ®Šçš„æ•ˆæœ\n    [subEffectView.contentView addSubview:label];\n    \n```\n\næ•ˆæœå›¾ï¼š\n\n<img src=\"https://github.com/wangruofeng/BlurEffectDemo/raw/master/sample.png\" style=\"witdh:50%; height:50%\">\n</img>\n\nDemoåœ°å€ï¼š\n\n* [BlurEffectDemo \n](https://github.com/wangruofeng/BlurEffectDemo) -- æœ¬æ–‡æ•ˆæœDemo\n* [UIVisualEffects_Objective-c](https://github.com/wangruofeng/UIVisualEffects_Objective-c) -- è¯¦ç»†ä»‹ç»`UIVisualEffects`çš„ä½¿ç”¨\n\n### iOS7ä»¥åé€šè¿‡`UIToolBar`å®ç°æ¨¡ç³Šæ•ˆæœ\n\nåœ¨iOS7ä»¥åï¼Œ`UINavigationBar`å’Œ`UIToolBar`è‡ªå¸¦æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨åˆ›å»º`UIToolBar`å¯¹è±¡ï¼Œç„¶åæ·»åŠ åˆ°viewä¸­å®ç°ï¼ŒUIToolBaråŒºåŸŸå°±å¯ä»¥å®ç°åŠ¨æ€æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœã€‚\n\nä¾‹å¦‚åœ¨ä¸€ä¸ªçŠ¶æ€æ åæ–¹æ·»åŠ ä¸€ä¸ªæ¨¡ç³Šview,å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­è¿™æ ·å®ç°ï¼Œå‡è®¾æ²¡æœ‰å¯¼èˆªæ \n\n```objective-c\nUIToolbar *statusBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 20)];\n[self.view addSubview:statusBar];\n```\n\nè¿™ä¸ªæ–¹æ³•éå¸¸ç®€å•å®ç”¨ğŸ˜Šï¼Œå¿«å»è¯•è¯•å§ã€‚\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [Core Image Programming Guide](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html)\n* [Core Image Filter Reference](https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html)\n* [UIImageBlur](https://github.com/wangruofeng/UIImageBlur)\n","tags":["æŠ€å·§"],"categories":["iOS"]},{"title":"Watch App å¼€å‘ä¹‹ Interface Elements è¯¦è§£","url":"/2016/01/29/2016-01-29-watch-app-kai-fa-zhi-interface-elements-xiang-jie/","content":"\n`iWatch`åŸç”Ÿæ€æ”¯æŒçš„æ§ä»¶ä¸»è¦æœ‰ä»¥ä¸‹ç±»å‹,ä¸‹é¢å¯¹æ¯ä¸ªç±»å‹ä¸€ä¸€è§£åˆ¨ã€‚\n\n* Labels\n* Images\n* Groups\n* Pickers\n* Tables\n* Buttons\n* Switches\n* Sliders\n* Maps\n* Movies\n* Date and Timer Labels\n* Menus\n\n\n### Labels -- WKInterfaceLabel\n\n`Labels`ä½¿ç”¨é™æ€çš„æ–‡æœ¬æ¥ä¼ è¾¾ç®€çŸ­çš„æ¶ˆæ¯ï¼Œæ˜¯ä½ Appä¸­æœ€å¸¸è§çš„ä¸€ä¸ªå…ƒç´ ä¹‹ä¸€ã€‚å®ƒèƒ½æ”¯æŒå¤šè¡Œæ˜¾ç¤ºä¹Ÿå¯é€šè¿‡ä»£ç åŠ¨æ€æ›´æ–°å†…å®¹ã€‚\n\n`iWatch`,è®¾è®¡ä¸€ä¸ªæ ‡ç­¾äº‹ï¼Œé¦–å…ˆåº”è¯¥æŠŠç²¾åŠ›é›†ä¸­åœ¨`æ˜“è¯»æ€§`,ä½¿ç”¨æ›´äº®çš„é¢œè‰²å’Œä½¿ç”¨åŠ¨æ€ç±»å‹ï¼ˆ` Dynamic Type`ï¼‰æ¥ä¿è¯æ–‡æœ¬å°ºå¯¸çš„æ­£ç¡®ï¼Œå†…ç½®å·²ç»æä¾›äº†æœ€ä½³çš„æ˜“è¯»æ€§å’Œè‡ªåŠ¨çš„åŠ¨æ€çš„ç±»å‹æ”¯æŒã€‚å‡å¦‚éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„å­—ä½“ï¼Œåº”è¯¥é¿å…ä½¿ç”¨è¿‡åº¦æ ¼å¼åŒ–çš„ã€‚\n\næ›´å¤šä¿¡æ¯æŸ¥çœ‹ï¼š[Typography](https://developer.apple.com/watch/human-interface-guidelines/typography/)\n<img src=\"/images/iwatch/img_iwatch_00.jpg\" style='width:50%;height:50%'></img>\n\n\n### Images -- WKInterfaceImage\n\n### <img src=\"/images/iwatch/img_iwatch_01.jpg\" style='width:50%;height:50%'></img>\n\nä¸€ä¸ª`Image`å…ƒç´ ç”¨æ¥æ˜¾ç¤ºå•å¼ å›¾ç‰‡æˆ–è€…ä¸€ç³»åˆ—åŠ¨ç”»å›¾ç‰‡ã€‚Imagesæ”¯æŒåœ¨`iOS`ä¸Šçš„çš„ä»»ä½•æ ¼å¼ï¼Œä½†æ˜¯è·Ÿåå‘äºPNGæ ¼å¼ã€‚åŠ¨ç”»ç³»åˆ—å›¾ç‰‡å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶å¯åœã€‚\n\n`38mm`å’Œ`42mm`å…±ç”¨ä¸€å¥—å›¾ç‰‡èµ„æºï¼Œåªè¦å†…å®¹èƒ½å¤Ÿè¡¨è¾¾æ¸…æ™°ã€‚\n\nApple Watchæ”¯æŒé«˜æ¸…å±æ˜¾ç¤ºï¼Œæ‰€æœ‰æ²¡æœ‰å¿…è¦åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„åˆ†è¾¨ç‡å›¾ç‰‡ï¼Œåœ¨å›¾ç‰‡ååº”è¯¥åŒ…æ‹¬`@2x`ã€‚\n\n**å½“å›¾ç‰‡æ­£åœ¨åŠ è½½æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å ä½å›¾ç‰‡æ¥å æ®å®ƒçš„ç©ºé—´**ã€‚\n\nä¼˜åŒ–å›¾ç‰‡æŸ¥çœ‹ï¼š[Image Optimizations](/images/iwatch/img_iwatch_02.jpg)\n\n### Groups -- WKInterfaceGroup\n\n`Group`è¿™ä¸ªæ¦‚å¿µæ˜¯ä¸“ä¸ºæœ‰é™ç©ºé—´çš„`iWatch`æ‰“é€ çš„ï¼Œå¯ä»¥å¸®ä½ å¯¹å…¶ä»–å…ƒç´ è¿›è¡Œå¸ƒå±€ã€‚å®ƒæœ‰`postion`,`size`,`marigns`ä»¥åŠå…¶ä»–å¸ƒå±€ç›¸å…³çš„æ¥å£ï¼Œä¸€ä¸ª`Group`å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯è§çš„å…ƒç´ ï¼Œå®ƒä¹Ÿæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œé¢œè‰²ï¼Œåœ†è§’åŠå¾„ç­‰å±æ€§ã€‚\n\n**æ”¯æŒæ°´å¹³`horizontally`å’Œå‚ç›´`vertically`å¸ƒå±€**ï¼Œå¯ä»¥è®©æ”¾åœ¨é‡Œé¢çš„é¡¹ç›®å®ç°ç›¸åº”çš„å¸ƒå±€ï¼Œå¯ä»¥ä½¿ç”¨`spacing`å±æ€§æ¥è®¾ç½®å†…éƒ¨é¡¹ç›®ä¹‹é—´çš„é—´è·ï¼Œä½¿ç”¨`margins`æ¥æ§åˆ¶`Group`å’Œå®ƒå‘¨è¾¹çš„å…ƒç´ çš„è·ç¦»ã€‚\n\n`Group`æ”¯æŒé•¶åµŒæ“ä½œï¼Œä½ å¯ä»¥é€šè¿‡é•¶åµŒæ¥æŒ‡å®šä½ æƒ³è¦çš„å¸ƒå±€æ ·å¼ã€‚\n\nä½ åº”è¯¥ä¼˜åŒ–ä½ çš„`Group`çš„èƒŒæ™¯å›¾ç‰‡æ¥è·å¾—æ›´å¥½çš„ä½“éªŒï¼Œå› ä¸ºå¤ªå¤§å¯èƒ½ä½¿ä½ çš„Appå˜å¾—å¡é¡¿ã€‚ä¼˜åŒ–è¯·å‚è€ƒï¼š[Image Optimizations](https://developer.apple.com/watch/human-interface-guidelines/icons-and-images/#image-optimizations)\n\nå¤–è§‚å¤§æ¦‚è¿™æ ·:\n<img src=\"/images/iwatch/img_iwatch_02.jpg\" style='width:50%;height:50%'></img>\n\n### Pickers -- WKInterfacePicker\n\n`Pickers`èƒ½å¤Ÿæ˜¾ç¤ºä¸€ä¸ªå¯ä»¥ä½¿ç”¨æ•°å­—è¡¨å† å¯¼èˆªçš„åˆ—è¡¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ç²¾ç¡®å’Œè¿·äººçš„æ–¹å¼é€‰æ‹©ã€‚`Pickers`å¯ä»¥é€šè¿‡ä¸‹é¢ä¸‰ç§æ–¹å¼çš„ä¸€ç§æ¥å±•ç¤ºå®ƒä»¬çš„é¡¹ç›®ï¼š\n<img src=\"/images/iwatch/img_iwatch_03.jpg\" style='width:50%;height:50%'></img>\n\n* `List style`,å¯ä»¥æ˜¾ç¤ºæ–‡æœ¬æˆ–è€…å›¾ç‰‡åœ¨ä¸€ä¸ªæ»šåŠ¨åˆ—è¡¨é‡Œé¢\n* `Stack style`,æ ˆé£æ ¼ä»¥ä¸€ä¸ªå¡ç‰‡é£æ ¼çš„ç•Œé¢æ˜¾ç¤ºå›¾ç‰‡ï¼Œå½“ç”¨æˆ·æ»šåŠ¨ï¼Œè¢«é€‰æ‹©çš„å›¾ç‰‡åŠ¨ç”»è¿›å…¥æœ€ä¸Šæ–¹ï¼Œè¿™ç§é£æ ¼é€‚åˆæµè§ˆç…§ç‰‡ã€‚\n* `Sequence style`,åºåˆ—æ˜¾ç¤ºï¼Œå¯ä»¥æ˜¾ç¤ºä¸€ç³»åˆ—çš„å›¾ç‰‡ã€‚å½“ç”¨æˆ·è½¬åŠ¨è¡¨å† æ—¶ï¼Œ`Picker`æ˜¾ç¤ºå…ˆå‰æˆ–ä¸‹ä¸€å¼ å›¾ç‰‡åœ¨è¿™ä¸ªåºåˆ—ä¸­æ²¡æœ‰åŠ¨ç”»ï¼Œè¿™ç§é£æ ¼é€‚åˆäºæ„å»ºè‡ªå®šä¹‰çš„ç•Œé¢ä½¿ç”¨ä½ è‡ªå·±çš„å›¾ç‰‡ã€‚\n\n\n`Pickers`è¿˜èƒ½è¢«é…ç½®æˆæ˜¾ç¤ºä¸€ä¸ª`è½®å»“`ï¼Œ`æ ‡é¢˜`ï¼Œ`æ»šåŠ¨æŒ‡ç¤ºå™¨`ã€‚è¿™äº›å…ƒç´ å¯ä»¥è®©ä½ åˆ†è¾¨å‡ºå±å¹•ä¸Šçš„`Pickers`å¹¶ä¸”å¯ä»¥å¸®åŠ©ç”¨æˆ·å¯¼èˆªå®ƒçš„å†…å®¹ã€‚\n\n**ä½¿ç”¨æ ‡é¢˜æ¥æŒ‡æ˜ä½ é€‰æ‹©é¡¹ç›®çš„æ„ä¹‰æˆ–è€…pickeræœ¬èº«çš„ä½œç”¨**\n\nä½ å¯ä»¥ç»™é¡¹ç›®æŒ‡å®šä¸€ä¸ªç‹¬ç‰¹çš„æ ‡é¢˜å½“é‚£äº›é¡¹ç›®çš„æ„æ€è¡¨è¾¾ä¸æ¸…æ™°çš„æ—¶å€™ï¼Œå¯é€‰ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®æ‰€æœ‰çš„é¡¹ç›®ç›¸åŒçš„æ ‡é¢˜æ¥æ ‡æ˜`Picker`å®ƒæœ¬èº«çš„ä½œç”¨ã€‚\n<img src=\"/images/iwatch/img_iwatch_04.jpg\" style='width:50%;height:50%'></img>\n\n\n\n**æ˜¾ç¤ºä¸€ä¸ªæ»šåŠ¨æŒ‡ç¤ºå™¨å½“æ‰€æœ‰çš„å†…å®¹ä¸æ˜¯å…¨éƒ¨å¯è§æ—¶**\n<img src=\"/images/iwatch/img_iwatch_05.jpg\" style='width:50%;height:50%'></img>\n\n\n### Tabels -- WKInterfaceTable\n\n`Tabels`åœ¨ä¸€åˆ—ä¸­å±•ç¤ºå¤šè¡Œçš„å†…å®¹ã€‚ä¸€ä¸ªè¡¨çš„ä¸€è¡Œæ˜¯åŠ¨æ€é…ç½®çš„ï¼Œå®ƒçš„å†…å®¹å¯ä»¥åœ¨éšæ—¶æ”¹å˜ã€‚`Tabels`å¤©ç”Ÿå¯æ»šåŠ¨ï¼Œæ”¯æŒå„ç§äº¤äº’ï¼Œèƒ½å¤Ÿè®¾ç½®èƒŒæ™¯é¢œè‰²æˆ–è€…å›¾ç‰‡ã€‚\n<img src=\"/images/iwatch/img_iwatch_06.jpg\" style='width:50%;height:50%'></img>\n\nä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\n\n* **ç»Ÿä¸€ä½¿ç”¨è¡Œçš„é£æ ¼ç±»å‹**ï¼Œå³ä½¿ä¸€ä¸ªè¡¨å¯ä»¥åŒ…å«å¤šè¡Œï¼Œå®ƒåº”è¯¥å‘ˆç°ä¸€ä¸ªå…¨å±€ç»Ÿä¸€çš„å¤–è§‚ï¼Œæ¯ä¸€è¡Œä½¿ç”¨ä½ çš„ä¸»è¦å†…å®¹å¼€å§‹ï¼Œç„¶åéšä½ çš„éœ€è¦æ·»åŠ æ›´å¤šæ”¯æŒçš„å…¶ä»–ç±»å‹çš„å†…å®¹ï¼Œä¾‹å¦‚`headers`æˆ–è€…`footers`,æ€»æ˜¯ç”¨åŸæ¥è®¾è®¡çš„ç›®çš„æ¥ä½¿ç”¨è¡Œç±»å‹ã€‚ä¾‹å¦‚ï¼Œä½ ä¸åº”è¯¥ç”¨ä¸€è¡Œæ¥æ˜¾ç¤º`headers`æˆ–`footers`çš„å†…å®¹ã€‚\n\n* **é™åˆ¶è¡Œæ•°æœ€å¤§20**ï¼Œæ˜¾ç¤ºæœ€é‡è¦çš„è¡Œåœ¨é¡¶éƒ¨ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæµè§ˆå°½å¯èƒ½çš„å¤šã€‚è¡Œæ•°è¶Šå°‘è¶Šå®¹æ˜“å¿«é€Ÿæµè§ˆã€‚\n\n* **ä¸è¦åœ¨`groups`é‡Œé¢é•¶åµŒ`tables`**,`Tabels`ä¼šåŠ¨æ€æ”¹å˜å®ƒçš„å°ºå¯¸åŸºäºå®ƒæ‰€åŒ…å«çš„è¡Œçš„æ•°ç›®ã€‚å®ƒä¼šå¿½ç•¥`groups`å¯¹é«˜åº¦çš„é™åˆ¶ã€‚\n* **ä¸è¦åœ¨tableè¡Œå†…åŒ…å«`âˆ§`æˆ–è€…`âˆ¨`ç¬¦å·**ï¼Œè¡Œåå°å®ç°å¯ä»¥è‡ªç„¶ç‚¹å‡»ï¼Œä½ ä¸éœ€è¦åŒ…å«ä¸€ä¸ª`âˆ§`æˆ–è€…`âˆ¨`ç¬¦å·æˆ–è€…æ–‡å­—æ¥è¡¨æ˜è¡Œæ˜¯å¯ç‚¹å‡»çš„ã€‚\n\n### Buttons -- WKInterfaceButton\n\nä¸€ä¸ª`button`å¯ä»¥æ‰§è¡Œä¸€ä¸ªappæŒ‡å®šçš„åŠ¨ä½œï¼Œ`button`å¯ä»¥è‡ªå®šèƒŒæ™¯å’Œåœ†è§’åŠå¾„ã€‚å®ƒè¿˜å¯ä»¥å……å½“å®¹å™¨ä½¿ç”¨ï¼ŒåŒ…å«ä¸€ä¸ªæ ‡ç­¾`labe;`ï¼Œå›¾ç‰‡`image`ï¼Œæˆ–è€…ä¸€ä¸ªç»„`group`å¯¹è±¡ã€‚\n<img src=\"/images/iwatch/img_iwatch_07.jpg\" style='width:50%;height:50%'></img>\n\nä½¿ç”¨äº‹é¡¹ï¼š\n\n* **åˆ›å»ºæ¨ªè·¨å±å¹•çš„Buttons** ï¼Œå…¨å®½çš„buttonsçœ‹èµ·æ¥æ›´å®¹æ˜“ç‚¹å‡»ï¼Œå‡å¦‚æœ‰ä¸¤ä¸ªbuttonsï¼Œå¿…é¡»æœ‰ç›¸åŒçš„æ°´å¹³é—´è·ï¼Œä¸¤è€…ä½¿ç”¨ç›¸åŒçš„é«˜åº¦ä½¿ç”¨ç›¸åŒçš„å›¾æˆ–è€…ç®€çŸ­çš„æ–‡æœ¬æ ‡ç­¾ã€‚\n\n* **ä½¿ç”¨ç›¸åŒçš„é«˜åº¦å¯¹äº`vertical stacks`é£æ ¼å¸ƒå±€ä¸€è¡Œå’Œä¸¤è¡Œæ–‡æœ¬æŒ‰é’®**ï¼ŒåŸåˆ™æ˜¯ï¼Œå°½å¯èƒ½çš„ï¼Œä½¿ç”¨ä¸€è‡´åˆ°é«˜åº¦è®©ä»–ä»¬åœ¨è§†è§‰ä¸Šç»Ÿä¸€ã€‚\n\n* **ä½¿ç”¨æ ‡å‡†çš„åœ†è§’åŠå¾„**ï¼Œæ ‡å‡†çš„åœ†è§’åŠå¾„çš„æ˜¯`6ç‚¹`ï¼Œä½¿ç”¨æ ‡å‡†çš„åœ†è§’åŠå¾„å¯ä»¥æå‡æ•´ä¸ªappçš„è§†è§‰çš„ä¸€è‡´æ€§å¹¶ä¸”å¯ä»¥å¢å¼ºbuttonçš„å†…å®¹ã€‚\n\n* **è®©butotnsè¶³å¤Ÿå¤§ä»¥ä¾¿å®¹æ˜“ç‚¹å‡»**ï¼Œåˆ›å»ºè®©ç”¨æˆ·å¾ˆå®¹æ˜“ç‚¹å‡»çš„buttonï¼Œbuttonsåº”è¯¥éµå¾ªä¸‹é¢æœ€å°çš„å€¼ã€‚\n\n\n\n|                         |38mm (minimum)  |42mm (minimum)   |\n|-------------------------|----------------|-----------------|\n|Circular buttons         |75 pixels       | 80 pixels            |\n|Round rectangular buttons|50 pixels high  | 52 pixels high          |\n\n\n### Switches -- WKInterfaceSwitch\n\nå¼€å…³æ§ä»¶æ›´`iOS`ç±»ä¼¼ï¼Œè®©ç”¨æˆ·åœ¨é‡ä¸ªäº’æ–¥çš„é€‰æ‹©æˆ–è€…çŠ¶æ€ä¸­é€‰æ‹©ï¼Œä¾‹å¦‚å¼€æˆ–è€…å…³ï¼Œä¸€ä¸ªé è¿‘`switch`çš„æ ‡ç­¾åº”è¯¥æŒ‡å®šå“åº”çš„æ•ˆæœå½“ï¼Œå¼€å…³åˆ‡æ¢æ—¶ã€‚\n\næ•ˆæœåƒè¿™æ ·ï¼š\n<img src=\"/images/iwatch/img_iwatch_08.jpg\" style='width:50%;height:50%'></img>\n\n### Sliders -- WKInterfaceSlider\n\nä¸€ä¸ªæ»‘åŠ¨æ¡è®©ç”¨æˆ·æ¥è°ƒæ•´åˆ°æŸä¸€ä¸ªå€¼ã€‚ä¸€ä¸ª`slider`ç”¨æ¥æ˜¾ç¤ºå®ƒè®¾ç½®çš„ä¸€ç³»åˆ—çš„å€¼æˆ–è€…æ˜¯ä¸€ä¸ªæŒç»­çš„`bar`, å®ƒå¯ä»¥åœ¨ä¸€ä¸ªæœ‰é™çš„èŒƒå›´å†…æ ¹æ®é¢„å®šçš„æ•°é‡è‡ªå¢æˆ–è€…è‡ªå‡ã€‚\n\n<img src=\"/images/iwatch/img_iwatch_09.jpg\" style='width:50%;height:50%'> </img>\n\n\nNoteï¼šä½ å¯ä»¥åƒä½¿ç”¨`slider`é‚£æ ·ä½¿ç”¨è‡ªå®šå›¾ç‰‡,ç³»ç»Ÿé»˜è®¤æ˜¾ç¤º`+`å’Œ`-`ç¬¦å·ã€‚\n\n### Maps -- WKInterfaceMap\n\n`Maps`æ˜¯åœ°ç†ä½ç½®çš„é™æ€å¿«ç…§ã€‚ä½ å¯ä»¥æ”¾ä¸€å¼ åœ°å›¾åœ¨ä½ çš„ç•Œé¢é‡Œé¢åœ¨é¢„è®¡çš„æ—¶é—´ï¼Œä½†æ˜¯ä½ `WatchKit extension`å¿…é¡»é…ç½®æ˜¾ç¤ºçš„åŒºåŸŸåœ¨è¿è¡Œæ—¶ã€‚æ˜¾ç¤ºåŒºåŸŸæ˜¯ä¸å¯äº¤äº’çš„ï¼Œä½†æ˜¯ç‚¹å‡»ä¸€ä¸ªåœ°å›¾å°†ä¼šæ‰“å¼€ä½ `Apple Watch`ä¸Šçš„`Maps`appã€‚\n\nä½ å¯ä»¥åœ¨åœ°å›¾ä¸Šç”¨ä¸€ä¸ªé«˜äº®çš„ç‚¹å¯¹ä½ æ„Ÿå…´è¶£æˆ–è€…å…¶ä»–ç›¸å…³ä¿¡æ¯è¿›è¡Œæ ‡æ³¨ã€‚åœ°å›¾èƒ½æ˜¾ç¤ºæ ‡å‡†çš„`çº¢`ï¼Œ`é»„`ï¼Œ`ç»¿`å¤§å¤´é’ˆï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„å›¾ç‰‡ï¼Œç³»ç»Ÿå…è®¸ä½ æœ€å¤šæ·»åŠ `5ä¸ª`åœ¨ä¸€å¼ åœ°å›¾ä¸Šã€‚\n\nä½¿ç”¨æ³¨æ„å®ç°ï¼š\n\n* **è®©ä½ åœ°å›¾çš„å…ƒç´ æ ¹æ®å±å¹•è‡ªåŠ¨é€‚åº”**ã€‚ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ•´ä¸ªåœ°å›¾å…ƒç´ åœ¨Apple Watchä¸Šè€Œä¸ç”¨æ»šåŠ¨å±å¹•ã€‚\n* **é…ç½®æ˜¾ç¤ºçš„åœ°å›¾åŒºåŸŸåˆ°åŒ…å«å…´è¶£ç‚¹çš„æœ€å°èŒƒå›´**ï¼Œåœ°å›¾å…ƒç´ å†…å®¹æœ¬èº«ä¸èƒ½æ»šåŠ¨ï¼Œæ‰€æœ‰æ‰€æœ‰å†…å®¹å¿…é¡»é™„ç€åœ¨ä¸€ä¸ªæŒ‡å®šçš„åœ°å›¾åŒºåŸŸ\n\n### Movies -- WKInterfaceMovie\n\nä¸€ä¸ª`movie`å¯¹è±¡ä¼šæ˜¾ç¤ºä¸€å¼ æµ·æŠ¥å›¾ç‰‡ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œæ¨¡æ€å‘ˆç°ä¸€ä»½è§†é¢‘æˆ–è€…éŸ³é¢‘å¯¹è±¡ï¼Œä½¿ç”¨è¿™ä¸ªå…ƒç´ æ¥æ”¾ç½®ç®€çŸ­çš„åª’ä½“å‰ªåˆ‡å’Œä½ å†…å®¹å†…è”ã€‚åª’æ–‡ä»¶çš„é‡æ”¾ç”±ç³»ç»Ÿæ¥ç®¡ç†ã€‚\n\nä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\n\n* **ä½¿ç”¨ä¸€ç§æµ·æŠ¥å›¾ç‰‡æ¥å‘ˆç°å‰ªåˆ‡çš„å†…å®¹**ï¼Œæµ·æŠ¥å›¾ç‰‡èƒ½è®©ç”¨æˆ·æå‰åšå†³å®šæ˜¯å¦è§‚çœ‹ä¸è¿™ä¸ªå‰ªåˆ‡å…³è”çš„åª’ä½“ï¼Œä¸è¦ä½¿ç”¨æ²¡æœ‰æ„ä¹‰çš„å‰ªåˆ‡å›¾ç‰‡ã€‚\n* **ä¸è¦åˆ›å»ºæµ·æŠ¥å›¾ç‰‡åƒç³»ç»Ÿæ§ä»¶**ï¼Œ`Movies`ä¼šè®©è§†é¢‘å’ŒéŸ³é¢‘å†…å®¹çœ‹èµ·æ¥åƒä½ èŠ‚ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸è¦é€šè¿‡è®©ä»–ä»¬çœ‹èµ·æ¥åƒå…¶ä»–ä¸œè¥¿çš„æ–¹å¼æŠŠä»–ä»¬éšè—èµ·æ¥ã€‚ä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ª`Button`ï¼ˆè€Œä¸æ˜¯ä¸€ä¸ª`movie`ï¼‰æ¥å‘ˆç°åª’ä½“å›æ”¾ç•Œé¢å‡å¦‚ä½ å–œæ¬¢çš„è¯ã€‚\n* **ä¿è¯è§†é¢‘æˆ–è€…éŸ³é¢‘å‰ªè¾‘å¾—è¶³å¤ŸçŸ­**ï¼Œå‰ªè¾‘ä¸åº”è¯¥è¶…è¿‡30ç§’ï¼Œé¦–é€‰æ›´çŸ­çš„ã€‚é•¿çš„å‰ªè¾‘ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´å¹¶ä¸”è¦æ±‚ç”¨æˆ·ä¿æŒä»–ä»¬çš„æ‰‹è…•æŠ¬èµ·æ›´é•¿æ—¶é—´ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´ç–²åŠ³ã€‚\n* **é€‚å½“çš„è®¾ç½®å‰ªè¾‘è§†é¢‘çš„å°ºå¯¸**ï¼Œæ— è®ºæ—¶å€™éƒ½åº”è¯¥ä½¿ç”¨æ¨èçš„å°ºå¯¸æ¥å‰ªåˆ‡ï¼Œç¼©æ”¾è§†é¢‘å‰ªè¾‘å°†å½±å“æ€§èƒ½å¯¼è‡´ä¸ç†æƒ³çš„å¤–è§‚ã€‚æ›´å¤šä¿¡æ¯å…³äºæ¨èçš„å°ºå¯¸å’Œç¼–ç çš„å€¼ï¼Œå‚è€ƒ[Audio & Video](https://developer.apple.com/watch/human-interface-guidelines/watch-technologies/#audio-and-video)\n\n<div style=\"text-align:center\">\n<video src='https://developer.apple.com/watch/human-interface-guidelines/ui-elements/images/iwatch/ui-elements-movies.mp4' style='width:50%;height:50%;'>\n</video>\n</div>\n\n### Date & Timer Labels -- WKInterfaceDate,WKInterfaceTimer\n\nDate å’Œ Timer æ ‡ç­¾ç”¨æ¥æ˜¾ç¤ºçœŸå®çš„æ—¶é—´åœ¨`Apple Watch`ä¸Šã€‚\n\n<img src=\"/images/iwatch/img_iwatch_10.jpg\" style='width:50%;height:50%'></img>\n\nä¸€ä¸ª`date label`æ˜¾ç¤ºäº†ç°åœ¨çš„æ—¥æœŸï¼Œç°åœ¨çš„æ—¶é—´æˆ–è€…ä¸¤è€…çš„ç»„åˆã€‚å®ƒå¯ä»¥ä½¿ç”¨å„ç§æ ·å¼ï¼Œæ—¥å†å’Œæ—¶åŒºæ¥é…ç½®ï¼Œåœ¨ä½ é…ç½®å¥½åï¼Œæ—¥æœŸæ ‡ç­¾ç›´æ¥è·Ÿæ–°å®ƒçš„å€¼è€Œä¸éœ€è¦é€šè¿‡ä½ appçš„è¿›ä¸€æ­¥è¾“å…¥ã€‚\n\n<img src=\"/images/iwatch/img_iwatch_11.jpg\" style='width:50%;height:50%'></img>\n\nä¸€ä¸ª`timer label`ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªç²¾å‡†çš„å€’è®¡æ—¶å’Œå’Œè®¡æ•°å®šæ—¶å™¨ã€‚å®ƒèƒ½å¤Ÿé…ç½®å®ƒæ˜¾ç¤ºçš„è®¡æ•°çš„å€¼ä»¥å„ç§å½¢å¼ï¼Œåœ¨ä½ é…ç½®å®Œæˆåï¼Œä¸€ä¸ª`timer label`èƒ½å¤Ÿè®¡æ•°æˆ–è€…å€’è®¡æ—¶ä¸ç”¨ä»ä½ çš„appçš„è¿›ä¸€æ­¥è¾“å…¥ã€‚\n\n### Menus -- WKMenuItemIcon\n\nå¼ºåŠ›è§¦æ‘¸`Apple Watch`å°†è°ƒå‡ºå½“å‰å±å¹•çš„`menu`ï¼ˆå‡å¦‚æœ‰ç‚¹è¯ï¼‰ã€‚ä¸€ä¸ªèœå•èƒ½å¤Ÿæ˜¾ç¤ºå¤šè¾¾4ä¸ªæœ‰å…³çš„åŠ¨ä½œå¯¹äºå½“å‰å±å¹•ï¼Œè€Œä¸ç”¨ä»ä½ çš„ç•Œé¢ç¦»å¼€ã€‚\n\n<img src=\"/images/iwatch/img_iwatch_12.jpg\" style='width:50%;height:50%'></img>\n\nä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\n\n* **åŒ…å«ä¸€ä¸ªMenuå½“ç°åœ¨å±å¹•æœ‰ç›¸å…³çš„æ“ä½œçš„æ—¶å€™**ï¼Œèœå•æ˜¯å¯é€‰çš„ã€‚å‡å¦‚æ²¡æœ‰èœå•å‘ˆç°ï¼Œç³»ç»Ÿå°†æ’­æ”¾ä¸€æ®µåŠ¨ç”»æ¥å“åº”ç”¨æˆ·çš„å¼ºåŠ›è§¦æ‘¸æ“ä½œã€‚\n* **ä½¿ç”¨ä¸€ä¸ªlabelå’Œä¸€ä¸ªiconæ¥ä¼ è¾¾æ¯ä¸ªèœå•åŠ¨ä½œçš„æ„å›¾**ï¼Œlabelå’Œiconéƒ½éœ€è¦ï¼Œlabelé™åˆ¶2è¡Œï¼Œæ‰€ä»¥æ–‡æœ¬åº”è¯¥å°½é‡çš„çŸ­ã€‚\n* **ä½¿ç”¨èœå•æ¥å“åº”å®ƒä»¬é¢„æœŸçš„ç›®çš„**ï¼Œ`Menus`æ˜¯ä¸€ç§èƒ½å¤Ÿä¿®æ”¹å½“å‰ç•Œé¢æ§åˆ¶å™¨å†…å®¹çš„æ–¹å¼ï¼Œä¸è¦ä½¿ç”¨å®ƒä»¬æ¥ä½œä¸ºä¸»è¦çš„å¯¼èˆªå½¢å¼åœ¨ä½ çš„appä¸­ã€‚\n* **é¿å…å¤åˆ¶ä½ çš„å…¶ä»–appä¸­èœå•çš„è§†è§‰é£æ ¼**ï¼Œå‡å¦‚ä½ å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç›¸ä¼¼çš„å¸ƒå±€ï¼ŒåŠ ä¸Šé¢œè‰²ç»™ä½ çš„ç•Œé¢æˆ–è€…æ’åˆ—çš„é¡¹ç›®ï¼Œç”¨ä¸€ç§ä¸åŒäºå…¶ä»–èœå•çš„æ–¹å¼ã€‚\n\n<img src=\"/images/iwatch/img_iwatch_13.jpg\" style='width:50%;height:50%'></img>\n\n<img src=\"/images/iwatch/img_iwatch_14.jpg\" style='width:50%;height:50%'></img>\n\n<img src=\"/images/iwatch/img_iwatch_15.jpg\" style='width:50%;height:50%'></img>\n\næ›´å¤šmenu icons è®¾è®¡çš„ä¿¡æ¯ï¼Œå‚è€ƒ[ Menu Icons](https://developer.apple.com/watch/human-interface-guidelines/icons-and-images/#menu-icons)ã€‚\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [human-interface-guidelines](https://developer.apple.com/watch/human-interface-guidelines/)\n* [human-interface-guidelines Visual Design](https://developer.apple.com/watch/human-interface-guidelines/visual-design/)\n* [Apple WatchæŒ‡å—](https://github.com/ipader/SwiftGuide/tree/master/Apple%20Watch)\n* [Best-apple-watch-apps](http://www.wareable.com/apple-watch/best-apple-watch-apps-832)\n","tags":["æŠ€å·§","iWatch"],"categories":["Watch OS2"]},{"title":"MVVMèµ„æ–™æ•´ç†","url":"/2016/01/20/2016-01-20-mvvmzi-liao-zheng-li/","content":"\n\n> MVVMï¼Œä½œä¸ºä¸€ç§æ–°çš„æ¶æ„è®¾è®¡ï¼Œæœ‰åˆ«äºMVCï¼ŒMVPï¼Œå®ƒæœ‰å¾ˆå¤šè‡ªå·±çš„ç‰¹æ€§å’Œä¼˜åŠ¿ï¼Œä¾‹å¦‚æ˜“äºè°ƒè¯•ï¼Œä¸šåŠ¡é€»è¾‘é›†ä¸­æ–¹ä¾¿ç®¡ç†ï¼Œç»Ÿä¸€å„ç§é€šä¿¡æœºåˆ¶ï¼Œå°†ä¸šåŠ¡å’Œæ§åˆ¶å™¨è§£è€¦ã€‚è¿™æ¡†æ¶ç°åœ¨å¾ˆå¤šå…¬å¸éƒ½åœ¨å°è¯•ä½¿ç”¨ï¼Œåƒç¾å›¢ç­‰ï¼Œä»¥åå¯èƒ½æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œé‰´äºå®ƒå­¦ä¹ æˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ­¤æ–‡æ„åœ¨è®°å½•å’Œæ”¶é›†ç›¸å…³çš„èµ„æ–™ï¼Œä»¥ä¾¿ä»¥åæŸ¥é˜…ã€‚\n\n**Githubåœ°å€**ï¼š[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)\n\næ¯”è¾ƒä¸é”™çš„å­¦ä¹ èµ„æ–™ï¼š\n\n* [ReactiveCocoa è®¨è®ºä¼š](http://blog.devtang.com/blog/2016/01/03/reactive-cocoa-discussion/) -- å”å·§\n* [MVVM without ReactiveCocoa](http://limboy.me/ios/2015/09/27/ios-mvvm-without-reactivecocoa.html) -- limboy\n* [ReactiveCocoa](http://tech.meituan.com/tag/ReactiveCocoa) -- ç¾å›¢\n* [ReactiveCocoa v2.5 æºç è§£æä¹‹æ¶æ„æ€»è§ˆ](http://blog.leichunfeng.com/blog/2015/12/25/reactivecocoa-v2-dot-5-yuan-ma-jie-xi-zhi-jia-gou-zong-lan/) -- é›·çº¯å³° \n* [Functorã€Applicative å’Œ Monad](http://blog.leichunfeng.com/blog/2015/11/08/functor-applicative-and-monad/) -- é›·çº¯å³° \n* [Principles of Reactive Programming](https://www.coursera.org/course/reactive) -- è¿™é‡Œæœ‰ä¸€äº›è§†é¢‘è¯¾ç¨‹ï¼Œå¾ˆä¸é”™\n* [ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 1/2](http://www.raywenderlich.com/62699/reactivecocoa-tutorial-pt1)\n* [ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 2/2](http://www.raywenderlich.com/62796/reactivecocoa-tutorial-pt2)\n* [MVVM Tutorial with ReactiveCocoa: Part 1/2](http://www.raywenderlich.com/74106/mvvm-tutorial-with-reactivecocoa-part-1)\n* [MVVM Tutorial with ReactiveCocoa: Part 2/2](http://www.raywenderlich.com/74131/mvvm-tutorial-with-reactivecocoa-part-2)\n* [Functional Reactive Programming on iOS](http://pan.baidu.com/share/link?uk=3726868924&shareid=2347251856&third=0&adapt=pc&fr=ftw) -- è¿™æœ¬ä¹¦ä»‹ç»å‡½æ•°å¼ç¼–ç¨‹é…æœ‰ä¾‹å­ï¼Œå¯ä»¥å¿«é€Ÿç†è§£è¿™ç§æ€æƒ³ï¼Œå…¥é—¨çº§æ¨è\n* [Reactiveâ€‹Cocoa](http://nshipster.cn/reactivecocoa/) -- NSHipster\n* [ReactiveCocoa å…¥å‘ ing](http://www.jianshu.com/p/1fc8c809e2c0) -- ç®€ä¹¦\n* [ReactiveCocoaå­¦ä¹ èµ„æºæ”¶é›†](http://www.jianshu.com/p/335f236b8a5b) -- ç®€ä¹¦\n* [ReactiveCocoaå­¦ä¹ èµ„æ–™æ±‡æ€»](http://www.jianshu.com/p/b56402adfc93) -- ç®€ä¹¦\n","tags":["Favorite","æ•ˆç‡"],"categories":["èµ„æ–™æ”¶é›†"]},{"title":"TableViewæ€§èƒ½ä¼˜åŒ–","url":"/2016/01/18/2016-01-18-tableviewxing-neng-you-hua/","content":"\n\n> æ­¤æ–‡æ•´ç†ä¸€ä¸‹TableViewä¼˜åŒ–ç›¸å…³çš„æ–¹æ¡ˆå’Œæ€è·¯ã€‚\n \n#### TableViewä¸ºä»€ä¹ˆä¼šå¡ï¼Ÿ\n\nä¸»è¦ç”±ä»¥ä¸‹åŸå› ï¼š\n\n* `cellForRowAtIndexPath:`æ–¹æ³•ä¸­å¤„ç†äº†è¿‡å¤šä¸šåŠ¡\n* tableviewCellçš„subviewå±‚çº§å¤ªå¤æ‚ï¼Œåšäº†å¤§é‡é€æ˜å¤„ç†\n* cellçš„heightåŠ¨æ€å˜åŒ–æ—¶è®¡ç®—æ–¹å¼ä¸å¯¹\n\n#### ä¼˜åŒ–æ ¸å¿ƒæ€æƒ³ï¼š`UITableViewCell`é‡ç”¨æœºåˆ¶\n \nç®€å•çš„ç†è§£å°±æ˜¯ï¼šUITableViewåªä¼šåˆ›å»ºä¸€å±å¹•ï¼ˆæˆ–ä¸€å±å¹•å¤šä¸€ç‚¹ï¼‰çš„UITableViewCellï¼Œå…¶ä»–éƒ½æ˜¯ä»ä¸­å–å‡ºæ¥é‡ç”¨çš„ã€‚æ¯å½“Cellæ»‘å‡ºå±å¹•æ—¶ï¼Œå°±ä¼šæ”¾å…¥åˆ°ä¸€ä¸ªé›†åˆï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­ï¼ˆè¿™é‡Œå°±ç›¸å½“äºä¸€ä¸ªé‡ç”¨æ± ï¼‰ï¼Œå½“è¦æ˜¾ç¤ºæŸä¸€ä½ç½®çš„Cellæ—¶ï¼Œä¼šå…ˆå»é›†åˆï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­å–ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥æ‹¿æ¥æ˜¾ç¤ºï¼›å¦‚æœæ²¡æœ‰ï¼Œæ‰ä¼šåˆ›å»ºã€‚è¿™æ ·åšçš„å¥½å¤„å¯æƒ³è€ŒçŸ¥ï¼Œæå¤§çš„å‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚\n\n\n\n#### Tipsï¼š\n\n1. æå‰è®¡ç®—å¹¶ç¼“å­˜å¥½é«˜åº¦ï¼ˆå¸ƒå±€ï¼‰ï¼Œå› ä¸º`heightForRowAtIndexPath:`æ˜¯è°ƒç”¨æœ€é¢‘ç¹çš„æ–¹æ³•ï¼›\n2. å¼‚æ­¥ç»˜åˆ¶,é‡åˆ°å¤æ‚ç•Œé¢,å‚è€ƒ`Facebook`çš„`AsyncDisplayKit`å’Œ[YYAsyncLayer](https://github.com/ibireme/YYAsyncLayer)å¼‚æ­¥ç»˜åˆ¶æ¡†æ¶ï¼›\n3. ç¼“å­˜å›¾ç‰‡ï¼ˆ`SDWebImage`ï¼‰ï¼Œæå‰å¤„ç†å¥½`UIImageView`å›¾ç‰‡çš„å°ºå¯¸æŒ‰éœ€åŠ è½½è€Œä¸æ˜¯åŠ è½½åŸå›¾ï¼›\n4. è®¡ç®—ç­‰è€—æ—¶æ“ä½œå¼‚æ­¥å¤„ç†ï¼Œå¤„ç†å®Œå†å›ä¸»çº¿ç¨‹æ›´æ–°UIï¼›\n5. å›¾æ–‡æ··æ’ä¸å®šé«˜åº¦é‡‡ç”¨`CoreText`æ’ç‰ˆï¼Œç¼“å­˜Cellé«˜åº¦å‚è€ƒ[YYKit](https://github.com/ibireme/YYKit)ï¼›\n6. å®ç°Cellçš„`drawRect:`æ–¹æ³•ç›´æ¥ç»˜åˆ¶ï¼Œå‡å°‘`UIView`ï¼Œ`UIImageView`ï¼Œ`UILabel`ç­‰å®¹å™¨çš„ä½¿ç”¨ã€‚\n\n#### Bonusï¼š\n\n1. æ­£ç¡®ä½¿ç”¨reuseIdentifieræ¥é‡ç”¨Cellï¼›\n2. å°½é‡å°‘ç”¨æˆ–ä¸ç”¨é€æ˜å›¾å±‚æˆ–Viewï¼›\n3. å¦‚æœCellå†…ç°å®çš„å†…å®¹æ¥è‡ªwebï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜è¯·æ±‚ç»“æœï¼›\n4. å‡å°‘subviewsçš„æ•°é‡åœ¨`heightForRowAtIndexPath:`ä¸­å°½é‡ä¸ä½¿ç”¨`cellForRowAtIndexPath:`ï¼Œå¦‚æœä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œåªç”¨ä¸€æ¬¡ç„¶åç¼“å­˜ç»“æœï¼›\n5. å°½é‡å°‘ç”¨addViewç»™CellåŠ¨æ€æ·»åŠ Viewï¼Œå¯ä»¥åˆå§‹åŒ–æ—¶å°±æ·»åŠ ï¼Œç„¶åé€šè¿‡hideæ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºï¼›\n6. å›ºå®šé«˜åº¦ä¸è¦å®ç°`heightForRowAtIndexPath:`æ–¹æ³•ã€‚\n\nå¯ä»¥é€šè¿‡å®ç°ä»¥ä¸‹æ–¹æ³•ï¼Œå¯ä»¥å‡å°‘é«˜åº¦è®¡ç®—æ¬¡æ•°\n\n```objc\n@property (nonatomic) CGFloat rowHeight;             // will return the default value if unset\n@property (nonatomic) CGFloat sectionHeaderHeight;   // will return the default value if unset\n@property (nonatomic) CGFloat sectionFooterHeight;   // will return the default value if unset\n@property (nonatomic) CGFloat estimatedRowHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate\n@property (nonatomic) CGFloat estimatedSectionHeaderHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate\n@property (nonatomic) CGFloat estimatedSectionFooterHeight NS_AVAILABLE_IOS(7_0); // default is 0, which means there is no estimate\n```\n\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [code-uitableviewcell-optimizations-part-1](http://ealui.com/index.php/blog/view/code-uitableviewcell-optimizations)\n* [code-uitableviewcell-optimization-part-2](http://ealui.com/blog/view/code-uitableviewcell-optimization-part-2)\n* [Perfect smooth scrolling in UITableViews](https://medium.com/ios-os-x-development/perfect-smooth-scrolling-in-uitableviews-fd609d5275a5#.b176bxlm3)\n*  [ä¼˜åŒ–UITableViewCellé«˜åº¦è®¡ç®—çš„é‚£äº›äº‹](http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/)\n*  [è¯¦ç»†æ•´ç†ï¼šUITableViewä¼˜åŒ–æŠ€å·§](http://www.cocoachina.com/ios/20150602/11968.html)\n*  [UITableviewæ€§èƒ½ä¼˜åŒ–æ€»ç»“](http://www.cnblogs.com/wengzilin/p/4288027.html)\n*  [AsyncDisplayKit æ•™ç¨‹ï¼šè¾¾åˆ° 60 FPS çš„æ»šåŠ¨å¸§ç‡](https://github.com/nixzhu/dev-blog/blob/master/2014-11-22-asyncdisplaykit-tutorial-achieving-60-fps-scrolling.md)\n*  [AsyncDisplayKit](https://github.com/facebook/AsyncDisplayKit) \n*  [YYAsyncLayer](https://github.com/ibireme/YYAsyncLayer)\n","tags":["Favorite","æ•ˆç‡"],"categories":["iOS"]},{"title":"iOS Animation Swift ç‰ˆ","url":"/2016/01/16/2016-01-16-ios-animation-swift-ban/","content":"\n![coreAnimation](http://ww2.sinaimg.cn/large/64124373gw1f01qjo2k00j21g00ejjvd.jpg)\n\n\n### ç®€ä»‹\næ­¤æ–‡ä¸»è¦è®°å½•æˆ‘å­¦ä¹ iOSçš„åŠ¨ç”»ç›¸å…³å†…å®¹ç”¨`Swift`è¯­è¨€ï¼Œè®°å½•ä¸‹æ¥ä»¥ä¾›å‚è€ƒï¼Œä¸å®šæ—¶æ›´æ–°ã€‚\n\n### ç›®å½•ç»“æ„\n\n* Section I: View åŠ¨ç”»\n    * View animation\n    * å¼¹ç°§åŠ¨ç”» - Springs\n    * è½¬åœºåŠ¨ç”» - Transitions\n    * å…³é”®å¸§åŠ¨ç”» - Keyframe\n* Section II: Auto Layout åŠ¨ç”»\n* Section III: Layer åŠ¨ç”»\n* Section IV: 3D åŠ¨ç”»\n* Section V: æœªæ¥ç±»å‹çš„åŠ¨ç”»\n* Section VI: View Controller åŠ¨ç”»\n* Section VIIï¼šç¬¬ä¸‰æ–¹åŠ¨ç”»åº“\n* Section VIII: Apple Watch åŠ¨ç”»\n\n#### Section I: View åŠ¨ç”»\n\n##### 1.View animation\n\nç®€ä»‹ï¼šview çš„åŠ¨ç”»ä¸»è¦æ˜¯é€šè¿‡UIViewçš„ç±»æ–¹æ³•åˆ›å»ºï¼ŒåŠ¨ç”»å†…å®¹ä¸€èˆ¬\næ”¾åœ¨blocké‡Œé¢ï¼Œå¯ä»¥é•¶åµŒä½¿ç”¨ï¼Œæ„æˆé“¾å¼åŠ¨ç”»ï¼Œä¸»è¦æœ‰3ä¸ªæ–¹æ³•,ä¸‰ä¸ªè®¿æ³•åªéœ€ä¼šå‚æ•°æœ€å¤šçš„é‚£ä¸ªå°±è¡Œï¼Œå‡½æ•°å`animateWithDuration(_:delay:options:animations:completion:)`ï¼Œå…¶ä»–çš„ä½¿ç”¨èµ·æ¥éƒ½ç±»ä¼¼ã€‚\n\n```swift\nclass func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -> Void)\nclass func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -> Void, completion completion: ((Bool) -> Void)?)\nclass func animateWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, options options: UIViewAnimationOptions, animations animations: () -> Void, completion completion: ((Bool) -> Void)?)\n```\n\nä½¿ç”¨ï¼š\n\n```swift\nUIView.animateWithDuration(0.5, delay: 0, options: [], animations: {\n    //do something\n  }, completion: {_ in\n    //do something\n})\n```\n\n> è¯´æ˜ï¼š`options`ï¼ŒåŠ¨ç”»é€‰é¡¹ï¼Œè¿™ä¸ªè¿è¡Œä½ è®¾ç½®ä¸€ä¸ªåŠ¨ç”»é€‰é¡¹é›†åˆï¼Œä¼ `[]`è¡¨ç¤ºä¸éœ€è¦é€‰é¡¹ï¼Œå•ä¸ªæ—¶å¯ä»¥çœç•¥æ”¾æ‹¬å·ä¾‹å¦‚`.Repeat`,å¤šä¸ªç”¨é€—å·è¿æ¥`[.Repeat, .CurveEaseInOut]`\n\n> `completion`é—­åŒ…éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä¸éœ€è¦ä½¿ç”¨å‚æ•°å¯ä»¥ç”¨`_`è¡¨ç¤ºï¼Œä¸éœ€è¦å®ç°å¯ä»¥ç›´æ¥ä¼ `nil`\n\næˆ–è€…åƒä¸‹é¢è¿™æ ·å†™\n\n```swift\nUIView.animateWithDuration(0.5, delay: 0, options: [], animations: { () -> Void in\n  //do something\n  }) { (_) -> Void in\n  //do something\n}\n```\n\n##### 2.å¼¹ç°§åŠ¨ç”» - Springs\n\nç®€ä»‹ï¼šå¼¹ç°§åŠ¨ç”»æ˜¯iOS 7.0æ–°å¢çš„APIï¼Œå‡½æ•°å`animateWithDuration(_:delay:usingSpringWithDamping:initialSpringVelocity:opti ons:animations:completion:)`ï¼Œ\n\n\n```swift\nclass func animateWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, usingSpringWithDamping dampingRatio: CGFloat, initialSpringVelocity velocity: CGFloat, options options: UIViewAnimationOptions, animations animations: () -> Void, completion completion: ((Bool) -> Void)?)\n```\n\nä½¿ç”¨ï¼š\n\n```swift\nUIView.animateWithDuration(0.5, delay: 0.5, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.0, options: [], animations: {\n// do something\n}, completion: nil)\n```\n\n> è¯´æ˜ï¼š`usingSpringWithDamping`:è®¾ç½®å¼¹ç°§çš„é˜»å°¼ï¼ŒèŒƒå›´ï¼ˆ0.0-1.0ï¼‰ï¼Œè¶Šæ¥è¿‘0.0å¼¹ç°§è¶Šæœ‰å¼¹æ€§ï¼Œè¶Šæ¥è¿‘1.0ï¼Œæ•ˆæœè¶Šåƒµç¡¬ï¼Œä½ å¯ä»¥æŠŠå½“æˆå¼¹ç°§çš„åˆšåº¦æ¥ç†è§£ï¼Œ\n> `initialSpringVelocity`:è®¾ç½®å¼¹ç°§åˆå§‹åŒ–çš„é€Ÿåº¦ï¼Œè®¾ç½®1.0è¡¨ç¤ºç”¨1ç§’åœ¨åŠ¨ç”»è·¨åº¦ä¸Šå®Œæˆæ•´ä¸ªåŠ¨ç”»è·ç¦»ï¼Œå€¼è¶Šå¤§æˆ–è€…è¶Šå°ä¼šå¯¼è‡´åŠ¨ç”»æœ‰ç›¸åº”çš„å¤§çš„æˆ–è€…è¾ƒå°çš„é€Ÿåº¦ï¼Œå¯ä»¥å½“æˆå¼¹ç°§çš„åˆå§‹åŠ¨é‡æ¥ç†è§£ã€‚\n\n##### 3.è½¬åœºåŠ¨ç”» - Transitions\n\nç®€ä»‹ï¼šå‰ä¸¤ç§åˆ›å»ºçš„åŠ¨ç”»æ˜¯åŸºäºå¯åŠ¨ç”»çš„æ¥å£ä¾‹å¦‚ï¼Œpositionï¼Œalphaï¼Œframeç­‰ç­‰ï¼ŒTransitionsæ˜¯ä¸“é—¨å¤„ç†æ·»åŠ æˆ–è€…ç§»é™¤ä¸€ä¸ªviewçš„åŠ¨ç”»,ç³»ç»Ÿæœ‰2ä¸ªæ ‡å‡†å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯å¯¹å•ä¸ªviewçš„å¤„ç†ï¼Œä¸€ä¸ªæ˜¯å¤„ç†2ä¸ªviewæ›¿æ¢ã€‚\n\n```swift\nclass func transitionWithView(_ view: UIView, duration duration: NSTimeInterval, options options: UIViewAnimationOptions, animations animations: (() -> Void)?, completion completion: ((Bool) -> Void)?)\nclass func transitionFromView(_ fromView: UIView, toView toView: UIView, duration duration: NSTimeInterval, options options: UIViewAnimationOptions, completion completion: ((Bool) -> Void)?)\n```\n\nä½¿ç”¨ï¼š\n\n```swift\n//add the new view via transition\nUIView.transitionWithView(animationContainerView!, duration: 0.33,\noptions: [.CurveEaseOut, .TransitionFlipFromBottom], animations: {\nself.animationContainerView!.addSubview(newView) }, completion: nil)\n\n//remove the view via transition\nUIView.transitionWithView(animationContainerView!, duration: 0.33,\noptions: [.CurveEaseOut, .TransitionFlipFromBottom], animations: {\nself.newView.removeFromSuperview() }, completion: nil)\n\n//hide the view via transition\nUIView.transitionWithView(self.newView, duration: 0.33, options: [.CurveEaseOut, .TransitionFlipFromBottom], animations: {\nself.newView.hidden = true }, completion: nil)\n\n//replace via transition\nUIView.transitionFromView(self.oldView!, toView: self.newView!, duration: 0.33, options: [.TransitionFlipFromTop],\ncompletion: nil)\n```\n\n##### 4.å…³é”®å¸§åŠ¨ç”» - Keyframe\n\nç®€ä»‹ï¼šå…³é”®å¸§é¡¾åæ€ä¹‰å°±æ˜¯è®¾å®šå…³é”®çš„ä¸€äº›å¸§ç„¶åç³»ç»Ÿä¼šæ ¹æ®ä¸€å¥—ç®—æ³•è®¡ç®—ä¸­é—´çš„å…¶ä»–å¸§ï¼Œè¿™æ ·æ”¹å˜çš„å¯åŠ¨ç”»å±æ€§æ—¶çœ‹çœ‹èµ·æ¥æ›´åŠ æµç•…è‡ªç„¶ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå‡½æ•°,ä¸€ä¸ªåˆ›å»ºå…³é”®å¸§åŠ¨ç”»ï¼Œä¸€ä¸ªè®¾ç½®å…·ä½“æ¯å¸§å†…å®¹\n\n```swift\nclass func animateKeyframesWithDuration(_ duration: NSTimeInterval, delay delay: NSTimeInterval, options options: UIViewKeyframeAnimationOptions, animations animations: () -> Void, completion completion: ((Bool) -> Void)?)\n+ (void)addKeyframeWithRelativeStartTime:(double)frameStartTime relativeDuration:(double)frameDuration animations:(void (^)(void))animations\n```\n\nä¾‹å¦‚ï¼š\n\n```swift\nfunc planeDepart() {\n\n  UIView.animateKeyframesWithDuration(1.5, delay: 0.0, options: [], animations: {\n    //add keyframes\n\n    UIView.addKeyframeWithRelativeStartTime(0.0, relativeDuration: 0.25, animations: {\n      self.planeImage.center.x += 100.0\n      self.planeImage.center.y -= 10.0\n      })\n\n      UIView.addKeyframeWithRelativeStartTime(0.1, relativeDuration: 0.4) {\n        self.planeImage.transform = CGAffineTransformMakeRotation(CGFloat(-M_PI_4/2))\n      }\n\n      UIView.addKeyframeWithRelativeStartTime(0.25, relativeDuration: 0.25) {\n        self.planeImage.center.x += 100.0\n        self.planeImage.center.y -= 60.0\n        self.planeImage.alpha = 0.0\n      }\n\n      UIView.addKeyframeWithRelativeStartTime(0.51, relativeDuration: 0.01) {\n        self.planeImage.transform = CGAffineTransformIdentity\n        self.planeImage.center = CGPoint(x: 0.0, y: originalCenter.y)\n      }\n\n      UIView.addKeyframeWithRelativeStartTime(0.55, relativeDuration: 0.45) {\n        self.planeImage.alpha = 1.0\n        self.planeImage.center = originalCenter\n      }\n\n      }, completion: nil)\n}\n```\n\n> è¯´æ˜ï¼šè¿™æ˜¯è®¾è®¡ä¸€ä¸ªé£æœºæ²¿ä¸€æ¡è·¯å¾„èµ·é£ç„¶åå†å½’ä½çš„ä¸€æ®µåŠ¨ç”»ï¼Œ`addKeyframeWithRelativeStartTime(_:relativeDuration:animations:)`,ç¬¬ä¸€ä¸ªå‚æ•°ç›¸å¯¹å¼€å§‹æ—¶é—´ï¼Œæ˜¯ç›¸å¯¹äºåŠ¨ç”»æŒç»­æ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚0.1å°±æ˜¯10%ï¼Œ0.25å°±æ˜¯25%ï¼Œå¦‚æœæ•´ä¸ªåŠ¨ç”»æŒç»­2ç§’ï¼Œ0.1å°±æ˜¯åœ¨2*0.1=0.2ç§’çš„æ—¶å€™å¼€å§‹ï¼Œåé¢çš„ä¸€ä¸ªå‚æ•°æ˜¯ç›¸å¯¹æŒç»­æ—¶é—´ï¼ŒèŒƒå›´æ›´ç¬¬ä¸€å‚æ•°ç±»ä¼¼ä¹Ÿ(0.0-1.0),åªä»ç›¸å¯¹å¼€å§‹æ—¶é—´èµ·ï¼Œå¾€åæ¨ç§»çš„ç›¸å¯¹æ—¶é—´ã€‚\n\n#### Section II: Auto Layout åŠ¨ç”»\n\n```swift\n\n// change Constraint\n\n// init layout\nview.layoutIfNeeded()\n\nUIView.animateWithDuration(0.8, delay: 0.0,\n      usingSpringWithDamping: 0.4, initialSpringVelocity: 0.0,\n      options: [], animations: {\n      \n        // do something change constraint\n        \n        // layout\n        self.view.layoutIfNeeded()\n      }, completion: nil)\n      \n```\n\nåŸç†å°±æ˜¯ï¼Œä¿®æ”¹çº¦æŸ,è®©æ·»åŠ ä¸€ä¸ªåŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»`block`é‡Œé¢æ‰§è¡Œå¸ƒå±€æ›´æ–°ï¼Œ`block`é‡Œé¢ä¹Ÿå¯ä»¥æ·»åŠ ä¿®æ”¹çº¦æŸä»£ç ï¼Œä¿®æ”¹çº¦æŸçš„æœ¬è´¨æ˜¯ä¿®æ”¹ç›¸å…³`View`çš„`frame`å’Œ`bounds`ï¼Œç”±äºä¿®æ”¹`View`çš„è¿™ä¸ªå±æ€§æ˜¯æ”¯æŒåŠ¨ç”»çš„ï¼Œæ‰€ä»¥ä¿®æ”¹çº¦æŸå…¶å®æ˜¯é—´æ¥ä¿®æ”¹`View`çš„è¿™äº›å±æ€§ï¼Œæ‰€æœ‰ä¹Ÿæ˜¯æ”¯æŒåŠ¨ç”»çš„ï¼Œè¿™ä¸ªåŠ¨ç”»çš„å¼ºå¤§çš„ä¹‹å¤„åœ¨äºï¼Œå¯ä»¥å®ç°ä¸€ç³»åˆ—`View`ç›¸äº’åä½œçš„åŠ¨ç”»ã€‚\n\n\n\n#### Section VIII: Apple Watch åŠ¨ç”»\n\næ¦‚è¿°ï¼šåœ¨Apple Watch ä¸­æœ‰ä¸¤ç§æŠ€æœ¯æ¥åˆ›å»ºåŠ¨ç”»ï¼Œä¸€ä¸ªæ˜¯ä¸€æ¬¡æ€§åˆ›å»ºä¸€ç³»åˆ—é™æ€å¯åŠ¨ç”»çš„å›¾ç‰‡åºåˆ—æˆ–è€…å¾ªç¯åŠ¨ç”»ï¼Œå¦ä¸€ç§æ˜¯å¯¹æ ‡ç­¾å’Œå…¶ä»–é¡¹ç›®é€šè¿‡æ”¹å˜å°ºå¯¸ï¼Œå¯¹é½ï¼Œé¢œè‰²ï¼Œé€æ˜åº¦è¿›è¡Œå¸ƒå±€å’Œå¤–è§‚åŠ¨ç”»ã€‚\n\n**Animated Image Sequences**\n\n`Animated Image Sequences`æ˜¯ç”±ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ç‹¬ç«‹å›¾ç‰‡ç»„æˆçš„åºåˆ—æ¥éšæ—¶é—´æŒ‰åºåˆ—æ˜¾ç¤ºã€‚æ¯å¼ å›¾ç‰‡ç»„æˆäº†åŠ¨ç”»çš„ä¸€ä¸ªå•ç‹¬çš„å¸§ï¼Œæ•´ä¸ªåŠ¨ç”»è¿è¡Œåœ¨ä¸€ä¸ªå¾ªç¯ä¸­é™¤äº†ä½ åœ¨è¿è¡Œçš„æ—¶å€™ä¿®æ”¹äº†æ’­æ”¾çš„è¡Œä¸ºã€‚ä¸»è¦æŠŠå®ƒå®‰è£…åœ¨ä½ ç•Œé¢ä¸­çš„`image`ï¼Œ`group`,`button`ç­‰å…ƒç´ ä¸­ã€‚é€šè¿‡`WKImageAnimatable`åè®®æ¥å®ç°åŠ¨ç”»ï¼Œä¹Ÿå°±æ˜¯è¯´å‡¡æ˜¯éµå¾ªè¿™ä¸ªåè®®çš„å¯¹è±¡éƒ½æ”¯æŒåŠ¨ç”»ï¼Œ`WatchKit`ä¸­éµå¾ªè¿™ä¸ªåè®®çš„å¯¹è±¡æœ‰ï¼š`WKInterfaceGroup`ï¼Œ`WKInterfaceImage`\n\nä½ å¯ä»¥æ§åˆ¶`image`å’Œ`group`å…ƒç´ `Animated Image Sequences`çš„æ’­æ”¾çš„é€Ÿåº¦ï¼Œæ–¹å‘ï¼Œå¸§ç‡,å¦åˆ™ç•Œé¢å…ƒç´ å°†ä¼šæ— é™å¾ªç¯æ˜¾ç¤ºä¸€ä¸ªå®Œæ•´çš„åŠ¨ç”»ã€‚\n\n> Notes:\n  1. `Animated Image Sequences`å¯ä»¥æ­£å‘æ’­æ”¾åŠ¨ç”»ä¹Ÿå¯ä»¥åå‘æ‰§è¡ŒåŠ¨ç”»åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä½ ä¸åº”è¯¥æä¾›ä¸€å¥—ä¸€æ ·çš„å›¾ç‰‡ä»¥åå‘çš„æ–¹å¼ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯æ¥é™ä½Appçš„å°ºå¯¸ã€‚\n  2. å¦‚æœä½ æ˜¯ä»`storyboard`åˆ›å»ºåºåˆ—å›¾ç‰‡å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡`func startAnimating()`æ–¹æ³•å¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œé€šè¿‡`func stopAnimating()`æ¥åœæ­¢åŠ¨ç”»çš„æ‰§è¡Œã€‚\n\nå®ä¾‹ï¼š\n\nå®ç°`WKInterfaceGroup`åŠ è½½è¿›åº¦åŠ¨ç”»\n\n1.åœ¨`Watch`é‡Œé¢çš„`Interface.storyboard`é‡Œé¢æ‹–æ‹½ä¸€ä¸ª`WKInterfaceGroup`å‘½åä¸º`backgroundGroup`\n2.åˆ›å»ºä¸€ä¸ª`WKInterfaceButton`æŒ‰é’®æ¥è§¦å‘è¿™ä¸ªåŠ¨ç”»äº‹ä»¶,åœ¨æ§åˆ¶å™¨é‡Œé¢å®ç°ä¸‹é¢çš„ä»£ç \n\n```swift\n@IBAction func checkInButtonTapped() {\n    // 1\n    let duration = 0.35\n    let delay = dispatch_time(DISPATCH_TIME_NOW, Int64((duration + 0.15) * Double(NSEC_PER_SEC)))\n    // 2\n    backgroundGroup.setBackgroundImageNamed(\"Progress\")\n    // 3\n    backgroundGroup.startAnimatingWithImagesInRange(NSRange(location: 0, length: 10), duration: duration, repeatCount: 1)\n    // 4\n    dispatch_after(delay, dispatch_get_main_queue()) { () -> Void in\n      // 5\n      dosomething\n    }\n  }\n```\n> å‚æ•°è¯´æ˜ï¼š`imageRange`,å°†è¦æ‰§è¡ŒåŠ¨ç”»çš„å›¾ç‰‡èŒƒå›´ï¼Œ`0`è¡¨ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œ`1`è¡¨ç¤ºç¬¬äºŒå¼ å›¾ç‰‡ï¼Œä»¥æ­¤ç±»æ¨ï¼›`duration`,å•ä½ç§’ï¼Œè¡¨ç¤ºåŠ¨ç”»æ‰§è¡Œå•ä¸ªå¾ªç¯çš„æ—¶é—´ï¼Œ`æ­£å€¼`è¡¨ç¤ºä»ç¬¬ä¸€å¸§åˆ°æœ€åä¸€å¸§æ‰§è¡Œï¼Œ`è´Ÿå€¼`è¡¨ç¤ºä»¥ç›¸åçš„é¡ºåºæ‰§è¡ŒåŠ¨ç”»ï¼Œä»¥ç¬¬ä¸€å¸§ç»“æŸï¼›`repeatCount`,åŠ¨ç”»çš„é‡å¤æ¬¡æ•°ï¼Œè®¾ç½®`0`è¡¨ç¤ºæ— é™å¾ªç¯ã€‚\n\n3.å°†ç´ ææ–‡ä»¶æ‹–å…¥`Watch`çš„`Asset.xcassets`çš„æ–‡ä»¶é‡Œé¢ï¼Œä»¥`Progress`å¼€å§‹å‘½ååé¢æ¥ä¸€ä¸²è¿ç»­çš„æ•°å­—ï¼Œæ•ˆæœåº”è¯¥åƒä¸‹é¢è¿™æ ·ã€‚\n\n![iWatchProgress](http://ww2.sinaimg.cn/mw690/64124373gw1f0g7yyn3ipj20co0c60tw.jpg)\n\n4.ç„¶ååœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œå°±OKäº†ã€‚\n\n**Layout and Appearance Animations**\n\nä½ å¯ä»¥åŠ¨ç”»æ”¹å˜æ‰€æœ‰ç•Œé¢å…ƒç´ çš„å¸ƒå±€å’Œå¤–è§‚ã€‚åŠ¨ç”»æ”¹å˜å¸ƒå±€è®©ä½ ä¿®æ”¹å…ƒç´ çš„å°ºå¯¸æˆ–è€…åŠ¨æ€çš„æ”¹å˜å¸ƒå±€çš„æ–¹å‘ã€‚ä½ å¯ä»¥ç§»åŠ¨åœ¨å±å¹•ä¸Šçš„å…ƒç´ æˆ–è€…è®©å®ƒä»¬çš„å†…å®¹é‡æ–°å¯¹é½ã€‚ä½ ä¹Ÿå¯ä»¥åŠ¨ç”»æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼ŒåŒ…æ‹¬æ”¹å˜ä»–ä»¬çš„`backgroud color`æˆ–è€…`opactiy`ã€‚è¿™äº›ç±»å‹çš„åŠ¨ç”»è®©ä½ åˆ›å»ºåŠ¨æ€çš„ç•Œé¢ç”¨æ¥å“åº”ç”¨æˆ·çš„äº¤äº’å¹¶ä¸”æä¾›ä¸€ä¸ªæ›´å¥½çš„åé¦ˆã€‚\n\næ‰€æœ‰çš„`layout- and appearance-based animations`åœ¨åŠ¨ç”»å¼€å§‹å’Œç»“æŸéƒ½ä»¥`easing`çš„æ›²çº¿æ–¹å¼è‡ªåŠ¨æ„å»º ã€‚ä½ ä¸èƒ½å…³é—­æˆ–è€…è‡ªå®šä¹‰ç¼“åŠ¨æ›²çº¿ã€‚ç›¸å½“äº`UIView`çš„åŠ¨ç”»é€‰é¡¹é‡Œé¢çš„`easeInOut`ã€‚\n\nå¯åŠ¨ç”»å±æ€§ï¼š\n\n* Opacity\n* Height\n* Width\n* Group Insets\n* Alignment\n* Background Color\n* Tint Color\n\næ ¸å¿ƒä»£ç ï¼š\n\n```swift\n\nclass func animateWithDuration(_ duration: NSTimeInterval, animations animations: () -> Void)\n\n```\n\nè¯´æ˜:è¿™ä¸ªæ–¹æ³•åœ¨`WKInterfaceController`ä¸­ï¼Œç›®å‰å‘ç°åªæœ‰è¿™ä¸€ä¸ªåŠ¨ç”»APIï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªé—­åŒ…é‡Œé¢æ‰§è¡Œç›¸åº”çš„åŠ¨ç”»æ“ä½œï¼Œå®ç°è·Ÿ`UIView`çš„blockåŠ¨ç”»ç±»ä¼¼ã€‚\n\n![iWatchAnimation](http://ww3.sinaimg.cn/mw690/64124373gw1f0g87cuk9cj20zi034dh2.jpg)\n\nå®ä¾‹ï¼š\n\n> åœ¨ç•Œé¢å·²ç»å‡ºç°çš„æ—¶å€™å¯¹`planeImage`è¿›è¡Œç€è‰²åŠ¨ç”»,æ”¹å˜`separator`çš„é¢œè‰²\n\n```swift\n\nvar planeImage: WKInterfaceImage!\nvar separator: WKInterfaceSeparator!\n\noverride func didAppear() {\n    super.didAppear()\n    // 1\n      animateWithDuration(0.35, animations: { () -> Void in\n        // 2\n        let color = UIColor(red: 90/255, green: 200/255, blue: 250/255, alpha: 1)\n        planeImage.setTintColor(color)\n        separator.setColor(color)\n      })\n    }\n}\n\n```\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [Apple Human-interface-guidelines](https://developer.apple.com/watch/human-interface-guidelines/) -- Apple\n* [Apple WatchKit Programming Guide](https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/WatchKitProgrammingGuide/index.html#//apple_ref/doc/uid/TP40014969-CH8-SW1) -- Apple\n* [Apple Watch](https://github.com/ipader/SwiftGuide/blob/master/Apple%20Watch/README.md) -- SwiftGuide\n* [Swift Guide](https://github.com/ipader/SwiftGuide) -- SwiftGuide\n\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["åŠ¨ç”»","iWatch OS2"],"categories":["iOS"]},{"title":"NSURLSession æ•™ç¨‹","url":"/2016/01/15/2016-01-15-nsurlsession/","content":"\næœ¬æ–‡ç¿»è¯‘è‡ª http://www.raywenderlich.com/51127/nsurlsession-tutorial\n\nåŸä½œè€…ï¼š Charlie Fulton\n\nè¯‘è€…ï¼š[@oneruofeng](https://twitter.com/oneruofeng)\n\n\næ³¨æ„ï¼šè¿™æ˜¯ä¸€ç¯‡æ¥è‡ªæˆ‘ä»¬ä½œä¸ºå³å°†å‘å¸ƒ[ iOS 7 Feast](http://www.raywenderlich.com/?p=49762)çš„ä¸€éƒ¨åˆ†[iOS 7 by Tutorials](http://www.raywenderlich.com/?page_id=48020)çš„ç®€çŸ­ç‰ˆæœ¬çš„ç« èŠ‚ã€‚æˆ‘ä»¬å¸Œæœ›ä½ ä»¬å–œæ¬¢ã€‚\n\næ¯ä¸€ä¸ªæ–°çš„iOSç‰ˆæœ¬å‘å¸ƒéƒ½ä¼šåŒ…å«ä¸€äº›æå¥½çš„æ–°çš„ç½‘ç»œAPIsï¼ŒiOS7ä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨iOS7ä¸­ï¼ŒAppleå¼•å…¥äº†`NSURLSession`,è¿™æ˜¯ä¸ºäº†å–ä»£`NSURLConnection`ä½œä¸ºåå¥½çš„ç½‘ç»œè¯·æ±‚çš„ä¸€ç³»åˆ—ç±»ã€‚\n\nåœ¨è¿™ä¸ª`NSURLSession`çš„æ•™ç¨‹ä¸­ï¼Œä½ å°†äº†è§£åˆ°è¿™ä¸ªæ–°ç±»ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä½ è¦ä½¿ç”¨å®ƒä»¥åŠä½ æ€æ ·ä½¿ç”¨å®ƒï¼Œå®ƒå’Œä»¥å‰çš„ç±»åº“æ¯”è¾ƒè€Œè¨€æ€æ ·ï¼Œæœ€åæœ€é‡è¦çš„æ˜¯ï¼šè·å¾—ä¸€ä¸ªæ•´åˆåˆ°ä¸€ä¸ªçœŸæ­£çš„Appçš„å®è·µã€‚\n\nè¯·æ³¨æ„ï¼šè¿™ä¸ªè¯¾ç¨‹æ˜¯å‡è®¾ä½ ç†Ÿæ‚‰åŸºæœ¬çš„ç½‘ç»œæ¦‚å¿µã€‚å‡å¦‚ç½‘ç»œå¯¹ä½ æ¥è¯´å®Œå…¨æ˜¯æ–°çš„ï¼Œä½ ä»ç„¶å¯ä»¥è·Ÿæˆ‘ä¸€èµ·ä¸€æ­¥ä¸€æ­¥çš„å­¦ä¹ ï¼Œä½†æ˜¯å¯èƒ½æœ‰äº›ä½ ä¸ç†Ÿæ‚‰çš„æ¦‚å¿µéœ€è¦éœ€è¦è‡ªå·±æŸ¥è¯¢åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ã€‚\n\n#### ä¸ºä»€ä¹ˆä½¿ç”¨`NSURLSession`\n\nä¸ºä»€ä¹ˆä½ è¦ä½¿ç”¨`NSURLSession`? é¥¿ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸¦ç»™ä½ ä¸€äº›å¥½å¤„å’Œä¼˜åŠ¿ç›¸æ¯”ä»¥å‰çš„ï¼š\n\n* **åå°ä¸Šä¼ å’Œä¸‹è½½** ï¼š å½“ä½ åˆ›å»º`NSURLSession`çš„æ—¶å€™ä½ åªéœ€é…ç½®ä¸€ä¸ªé€‰é¡¹å³å¯ï¼Œä½ ä¾¿å¯ä»¥è¿›è¡Œæ‰€æœ‰çš„åå°ç½‘ç»œä»»åŠ¡ã€‚è¿™å°†æœ‰å¯¹ä½ çš„ç”µæ± å¯¿å‘½æœ‰åˆ©ï¼Œå®ƒæ”¯æŒ`UIKit`å¤šä»»åŠ¡å¹¶ä¸”å½“åˆ‡æ¢çº¿ç¨‹çš„æ—¶å€™ä½¿ç”¨ç›¸åŒçš„ä»£ç†æ¨¡å‹ã€‚\n* **ä½¿ä½ çš„ç½‘ç»œæ“ä½œå¯ä»¥æš‚åœå’Œæ¢å¤** ï¼šä½ ç¨åå°†ä¼šçœ‹åˆ°ï¼Œä»»ä½•ä½¿ç”¨`NSURLSession`APIçš„ç½‘ç»œä»»åŠ¡éƒ½å¯ä»¥è¢«æš‚åœï¼Œåœæ­¢ï¼Œé‡æ–°å¼€å§‹ã€‚è€Œæ²¡æœ‰ä½¿ç”¨`NSOperation`å­ç±»çš„å¿…è¦ã€‚\n* **å¯é…ç½®çš„å®¹å™¨**ï¼šå¯¹äºæ”¾è¿›é‡Œé¢çš„è¯·æ±‚è€Œè¨€æ¯ä¸€ä¸ª`NSURLSession`éƒ½æ˜¯å¯é…ç½®çš„ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä½ éœ€è¦è®¾ç½®ä¸€ä¸ªHTTP headeré€‰é¡¹ï¼Œä½ åªéœ€è¦è®¾ç½®ä¸€æ¬¡ç„¶åæ¯ä¸ªåœ¨sessionä¸­çš„è¯·æ±‚å°±éƒ½ä¼šæœ‰ç›¸åŒçš„é…ç½®äº†ã€‚\n* **å¯å­ç±»åŒ–å’Œç§å¯†å­˜å‚¨**ï¼š `NSURLSession`æ˜¯å¯å­ç±»åŒ–çš„å¹¶ä¸”ä½ å¯ä»¥é…ç½®ä¸€ä¸ªsessionç”¨æ¥ä½œä¸ºç§å¯†å­˜å‚¨åœ¨æŸä¸ªä¼šè¯ä¸­ã€‚è¿™å…è®¸ä½ æ‹¥æœ‰ç§å¯†å­˜å‚¨å¯¹è±¡åœ¨å…¨å±€çŠ¶æ€ä¸‹ã€‚\n* **ä¼˜åŒ–çš„æˆæƒå¤„ç†æœºåˆ¶**ï¼šæˆæƒè¢«å®ŒæˆåŸºäºæŸä¸ªç‰¹å®šçš„è¿æ¥ã€‚å½“ä½¿ç”¨`NSURLConnection`çš„æ—¶å€™å‡å¦‚å‘ç”Ÿäº†ä¸€å¤„æˆæƒæ”¹å˜ï¼Œè¿™ä¸ªæ”¹å˜å°†è¿”å›ä¸€ä¸ªéšæ„çš„è¯·æ±‚ï¼Œä½ ä¸èƒ½ç¡®å®šä½ å…·ä½“å¾—åˆ°çš„é‚£ä¸ªã€‚ä½¿ç”¨`NSURLSession`çš„è¯ï¼Œä»£ç†å›æ¥å¤„ç†æˆæƒã€‚\n* **ä¸°å¯Œçš„ä»£ç†æ¨¡å‹**ï¼š`NSURLConnection`æœ‰äº›åŸºäºblockçš„åŒæ­¥æ–¹æ³•ï¼Œç„¶è€Œä»£ç†å°±ä¸èƒ½ä½¿ç”¨å®ƒä»¬äº†ã€‚å½“ä¸€ä¸ªè¯·æ±‚å»ºç«‹äº†æ— è®ºå®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå“ªæ€•éœ€è¦æˆæƒã€‚ä½¿ç”¨`NSURLSession`å°±å°±å¯ä»¥æ··åˆæ¥å…¥ï¼Œä½¿ç”¨åŸºäºblockçš„å¼‚æ­¥æ–¹æ³•åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®ä»£ç†æ¥å¤„ç†æˆæƒã€‚\n* **é€šè¿‡æ–‡ä»¶ç³»ç»Ÿä¸Šä¼ å’Œä¸‹è½½**ï¼šè‹¹æœé¼“åŠ±æŠŠï¼ˆæ–‡ä»¶å†…å®¹ï¼‰æ•°æ®è·Ÿ(URLå’Œä¸€äº›è®¾ç½®)å…ƒæ•°æ®åˆ†å¼€ã€‚\n\n#### `NSURLSession` vs `NSURLConnection`\n\n\"å“‡å“¦ï¼Œ`NSURLSession`å¬èµ·æ¥å¾ˆå¤æ‚å‘€ï¼\",ä½ å¯èƒ½è¿™ä¹ˆæƒ³ã€‚\"æˆ‘å¯èƒ½è¿˜æ˜¯ç»§ç»­ä½¿ç”¨æˆ‘çš„è€æœ‹å‹`NSURLConnection`ã€‚\"\n\nåˆ«æ‹…å¿ƒ--ä½¿ç”¨`NSURLSession`ä½¿ç”¨èµ·æ¥å…¶å®å’Œå®ƒçš„å‰è¾ˆ`NSURLConnection`ä¸€æ ·ç®€å•å¯¹äºç®€å•çš„ä»»åŠ¡æ¥è¯´ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘æ¥çœ‹ä¸€ä¸ªåœ¨è·å–ä¼¦æ•¦æœ€æ–°çš„å¤©æ°”çš„ä¸€ä¸ªç®€å•ç½‘ç»œè¯·æ±‚ï¼Œé€šè¿‡å®ƒæ¥è·å–JSONæ•°æ®çš„ä¾‹å­ã€‚\n\nå‡è®¾ä½ ç”¨è¿™ä¸ª`NSString`æ¥æ„é€ è¿™ä¸ª`NSURL`:\n\n```objc\nNSString *londonWeatherUrl = @\"http://api.openweathermap.org/data/2.5/weather?q=London,uk\";\n```\n\nè¿™é‡Œæ˜¯ç¬¬ä¸€æ­¥ä½ ä½¿ç”¨`NSURLConnection`æ¥è°ƒç”¨ï¼š\n\n```objc\nNSURLRequest *request = [NSURLRequest requestWithURL:\n[NSURL URLWithString:londonWeatherUrl]];\n\n[NSURLConnection sendAsynchronousRequest:request\n   queue:[NSOperationQueue mainQueue]\n   completionHandler:^(NSURLResponse *response,\n                       NSData *data,\n                       NSError *connectionError) {\n      // handle response\n}];\n```\n\nç°åœ¨è®©æˆ‘ä»¬æ¥ä½¿ç”¨`NSURLSession`ã€‚æ³¨æ„è¿™æ˜¯ä½¿ç”¨`NSURLSession`çš„æœ€ç®€å•çš„æ–¹å¼æ¥å¿«é€Ÿæ„é€ ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨åé¢çš„è¯¾ç¨‹ä½ å°†çœ‹åˆ°æ€æ ·é…ç½®sessionå’Œè®¾ç½®å…¶ä»–ç‰¹å¾æ¯”å¦‚åƒä»£ç†ã€‚\n\n```objc\nNSURLSession *session = [NSURLSession sharedSession];\n[[session dataTaskWithURL:[NSURL URLWithString:londonWeatherUrl]\n          completionHandler:^(NSData *data,\n                              NSURLResponse *response,\n                              NSError *error) {\n            // handle response\n\n  }] resume];\n```\n\næ³¨æ„ä½ å¹¶ä¸éœ€è¦æŒ‡å®šå®ƒè¿è¡Œåœ¨é‚£ä¸ªé˜Ÿåˆ—ä¸­ã€‚é™¤äº†ä½ ç‰¹åˆ«æŒ‡å®šï¼Œè¿™ä¸ªè°ƒç”¨å°†ä¼šåœ¨åå°çº¿ç¨‹ã€‚ä½ å¯èƒ½å¾ˆéš¾æ³¨æ„åˆ°è¿™ä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒï¼Œå®ƒå°±æ˜¯æ•…æ„è¿™æ ·çš„ã€‚Appleæåˆ°æ‰“ç®—ä½¿ç”¨`dataTaskWithURL`æ¥å–ä»£åœ¨`NSURLConnection`ä¸­çš„`sendAsynchronousRequest`ã€‚\n\næ‰€æœ‰ä»æ ¹æœ¬ä¸Šæ¥è®²--å¯¹äºç®€å•çš„ä»»åŠ¡ä½¿ç”¨`NSURLSession`å°±å’Œä½¿ç”¨`NSURLConnection`ä¸€æ ·ç®€å•ï¼Œå¹¶ä¸”å®ƒè¿˜æœ‰ä¸€äº›åˆ—é¢å¤–çš„å®šåˆ¶åŠŸèƒ½å½“ä½ éœ€è¦å®ƒçš„æ—¶å€™ã€‚\n\n#### `NSURLSession` vs `AFNetworking`\n\nä¸æåˆ°`AFNetworking`æ¡†æ¶å°±è°ˆä¸ä¸Šè°ˆè®ºç½‘ç»œç¼–ç¨‹ã€‚è¿™ä¸ªäº‹åœ¨`iOS/OS X`ä¸Šæœ€æµè¡Œçš„æ¡†æ¶ï¼Œæœ‰æ°å‡ºçš„`Mattt Thompson`åˆ›å»ºã€‚\n\n> æ³¨æ„ï¼šæƒ³äº†è§£æ›´å¤šå…³äº`AFNetworking`,è¯·æ£€å‡ºåœ¨<https://github.com/AFNetworking/AFNetworking>çš„githubé¡µé¢ã€‚æˆ‘ä»¬ä¹Ÿæœ‰ä¸€ä¸ªå…³äºå®ƒçš„è¯¾ç¨‹ï¼š<http://www.raywenderlich.com/30445/afnetworking-crash-course>\n\nä¸‹é¢æ˜¯çš„ä½¿ç”¨`AFNetworking` 1.xç‰ˆæœ¬å¤„ç†ç›¸åŒçš„æ•°æ®ä»»åŠ¡çš„ä»£ç ï¼š\n\n```objc\nNSURLRequest *request = [NSURLRequest requestWithURL:\n                         [NSURL URLWithString:londonWeatherUrl]];\n\nAFJSONRequestOperation *operation =\n[AFJSONRequestOperation JSONRequestOperationWithRequest:request\n    success:^(NSURLRequest  *request,\n              NSHTTPURLResponse  *response,\n              id JSON) {\n    // handle response\n} failure:nil];\n[operation start];\n```\n\nä½¿ç”¨`AFNetworking`çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¤„ç†å“åº”çš„æ•°æ®çš„æ•°æ®æ ¹æ®ç±»å‹è¢«å½’ç±»ã€‚ä½¿ç”¨`AFJSONRequestOperation`(æˆ–è€…è¯¸å¦‚`XML`å’Œplistç›¸ä¼¼çš„ç±»),æˆåŠŸblockå·²ç»è¢«è§£ææ ¹æ®å“åº”å¹¶ä¸”ä¸ºä½ è¿”å›ä½ æƒ³è¦çš„æ•°æ®ã€‚ä½¿ç”¨`NSURLSession`ä½ å°†æ”¶åˆ°ä¸€ä¸ª`NSData`å¯¹è±¡åœ¨`completion handler`,æ‰€æœ‰ä½ åªéœ€è¦æŠŠ`NSData`è½¬æ¢æˆ`JOSN`æˆ–è€…å…¶ä»–å½¢å¼ã€‚\n\n> æ³¨æ„ï¼šä½ èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„æŠŠæ•°æ®ä»`NSData`è½¬æ¢æˆ`JSON`ä½¿ç”¨åœ¨iOS 5å¼•å…¥çš„`NSJSONSerialization`è¿™ä¸ªç±»ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹23ç« çš„iOS 5 æ•™ç¨‹ï¼Œâ€œWorking with JSONâ€ã€‚\n\nä½ æˆ–è®¸æƒ³çŸ¥é“ä½ æ˜¯åº”è¯¥ä½¿ç”¨`AFNetworking`è¿˜æ˜¯ä»…ä»…æ˜¯ç»§ç»­ä½¿ç”¨`NSURLSession`ã€‚\n\nå°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘è®¤ä¸ºå¯¹äºç®€å•çš„éœ€æ±‚æœ€å¥½è¿˜æ˜¯ç»§ç»­ä½¿ç”¨`NSURLSession`--è¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“åœ¨ä½ çš„å·¥ç¨‹ä¸­ã€‚å¦å¤–ï¼Œä½¿ç”¨æ–°çš„ä»£ç†ï¼Œé…ç½®ï¼Œå’ŒåŸºäºå¾ˆå¤šæ·»åŠ åˆ°`AFNetworking`ä¸­çš„çš„â€œé—å¤±ç‰¹å¾â€ç°åœ¨éƒ½è¢«åŒ…æ‹¬äº†çš„APIçš„ä»»åŠ¡ã€‚\n\nç„¶è€Œï¼Œå‡å¦‚ä½ æƒ³ä½¿ç”¨ä¸€äº›åœ¨`AFNetworking`ä¸­2.0ç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œè¯¸å¦‚åºåˆ—åŒ–å’Œå°†æ¥å¯¹\n`UIKit`çš„æ•´åˆï¼ˆæ·»åŠ åˆ°`UIIImageView`åˆ†ç±»ä¸­ï¼‰ï¼Œç„¶åè¿™æ ·å¾ˆéš¾äº‰è¾©ä¸ä½¿ç”¨å®ƒï¼\n\n> æ³¨æ„ï¼šåœ¨`AFNetworking`2.0åˆ†æ”¯ä¸­ï¼Œå®ƒä»¬å·²ç»è½¬æ¢åˆ°ä½¿ç”¨`NSURLSession`ã€‚æ›´å¤šä¿¡æ¯çœ‹è¿™ç¯‡å¸–å­ï¼š<https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide>\n\n#### ä»‹ç» Byte Club\n\nåœ¨è¿™ç¯‡`NSURLSession`æ•™ç¨‹ä¸­ï¼Œä½ å°†æ¢ç´¢è¿™ä¸ªæ–°çš„APIé€šè¿‡æ„å»ºä¸€ç¯‡æ—¥è®°å¥½å›¾ç‰‡åˆ†äº«appåŸºäº` Dropbox Core API`,å› ä¸ºæ˜¯é¡¶çº§æœºå¯†ç»„ç»‡å› æ­¤å§‘ä¸”å‘½åå®ƒ`Byte Club`ã€‚\n\nè€ƒè™‘åˆ°è¿™ä¸ªè¯¾ç¨‹æ˜¯ä½ æ¥å—åˆ°`Byte Club`çš„å®˜æ–¹é‚€è¯·ï¼ä»€ä¹ˆæ˜¯ä½ å¯èƒ½ä¼šé—®åˆ°çš„å…³äº`Byte Club`çš„ç¬¬ä¸€æ¡è§„åˆ™ï¼Ÿæ²¡äººè°ˆè®º`Byte Club`--é™¤äº†é‚£äº›è¶³å¤Ÿç‚«é…·çš„äººå°†ä¼šé˜…è¯»è¿™ä¸ªæ•™ç¨‹ã€‚å¹¶ä¸”é‚£äº›Androidç”¨æˆ·å®Œå…¨ä¸çŸ¥é“ï¼›ä»–ä»¬è¢«ä»–ä»¬ä¿©çš„ç”Ÿæ´»åŠ«æŒäº†ã€‚ ï¼š]\n\nå¼€å§‹æ„å»ºappè¿æˆ˜ä¸‹ä¸€ä¸ªç« èŠ‚ï¼Œå°†å……å½“è¢«`Byte Club`ç»„ç»‡é‚€è¯·ã€‚\n\nä¸»è¦åˆ°è¿™ä¸ªæ•™ç¨‹æ˜¯å‡è®¾ä½ å¯¹åŸºæœ¬çš„ç½‘ç»œæœ‰åŸºæœ¬çš„äº†è§£åœ¨å…ˆå‰çš„ç‰ˆæœ¬iOSã€‚å®ƒéå¸¸æœ‰ç”¨å‡å¦‚ä½ å·²ç»ä½¿ç”¨è¿‡è¯¸å¦‚`NSURLConnection`æˆ–è€…`NSURLSession`åœ¨è¿‡å»ã€‚å‡å¦‚åœ¨iOSæ–¹é¢ä½ æ˜¯ç½‘ç»œæ–¹é¢çš„æ–°æ‰‹ï¼Œåœ¨ç»§ç»­è¿™ä¸ªè¯¾ç¨‹ä¹‹å‰ä½ åº”è¯¥æŸ¥è¯¢æˆ‘ä»¬çš„iOSå­¦å¾’ç³»åˆ—ä½œä¸ºæœ€åˆçš„å¼€å‘è€…ã€‚\n\n#### ç°åœ¨å¼€å§‹å§\n\n`Byte Club`æ˜¯iOS å¼€å‘è€…ä¸“æœ‰çš„ç»„ç»‡ï¼Œä¸€èµ·æ¥åŠ å…¥æŒ‘æˆ˜ä½ çš„ç¼–ç¨‹å§ã€‚ç”±äºæ¯ä¸ªæˆå‘˜éƒ½æ˜¯è¿œç¨‹å·¥ä½œï¼Œåœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­æœ‰ä¸€ä¸ªæ˜¯è·¨è¶Šä¸–ç•Œï¼Œæˆå‘˜é€šè¿‡åˆ†äº«ä»–ä»¬â€œæˆ˜åœºâ€çš„å…¨æ™¯ç…§ç‰‡ä¹Ÿèƒ½æ‰¾åˆ°å®ƒçš„ä¹è¶£ã€‚\n\nä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯Rayçš„åŠå…¬åœºæ‰€çš„å…¨æ™¯ç…§ç‰‡ï¼š\n![Ray's office setup](http://ww4.sinaimg.cn/mw690/64124373gw1ezzf1ygxi8j20go03njs2.jpg)\n\n> æ³¨æ„ï¼šä½ å¯èƒ½æƒ³åˆ›å»ºä½ è‡ªå·±åŠå…¬å®¤çš„å…¨æ™¯ç…§ç‰‡--å®ƒå¾ˆæœ‰è¶£ï¼Œåœ¨è¿™ä¸ªè¯¾ç¨‹çš„åç»­ä¸­æˆ‘ä»¬å°†ä¼šå¤„ç†ã€‚\n\n> åœ¨ iOS 7ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“å¼€ç›¸æœºé€‰æ‹©ä¸€ä¸ªå«`Pano`ï¼ˆå…¨æ™¯ï¼‰çš„æ ‡ç­¾ç…§ä¸€å¼ å…¨æ™¯ç…§ç‰‡ã€‚\n\n> åŠ å…¥ä½ å–œæ¬¢é‚£å¼ ï¼ŒæŠŠå®ƒè®¾ç½®æˆä½ é”å±ç•Œé¢çš„å¢™çº¸é€šè¿‡æ‰“å¼€`è®¾ç½®`è®©åé€‰æ‹©`å¢™çº¸`  \\é€‰æ‹©å¢™çº¸ \\æˆ‘çš„å…¨æ™¯ç…§ç‰‡ã€‚\n\nå½“ç„¶-`Byte Club `æœ‰å®ƒè‡ªå·±çš„appï¼Œæˆ‘ä»¬æ¥è§è¯å¥‡è¿¹ã€‚ä½ å¯ä»¥å’Œå…¶ä»–æˆå‘˜ä½¿ç”¨appæ¥å®Œæˆç¼–ç¨‹æŒ‘æˆ˜æˆ–è€…åˆ†äº«å…¨æ™¯ç…§ç‰‡ã€‚åœ¨å¹•åï¼Œè¿™æ˜¯é€šè¿‡ç½‘ç»œå®ç°-æ˜ç¡®çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡`Dropbox API`æ¥åˆ†äº«æ–‡ä»¶ã€‚\n\n#### å¼€å§‹çš„å·¥ç¨‹æ¦‚è¿°\n\né¦–å…ˆï¼Œä¸‹è½½[æ•™ç¨‹å¼€å§‹çš„å·¥ç¨‹](http://cdn1.raywenderlich.com/downloads/ByteClub_Starter.zip)ã€‚\n\nå¼€å§‹çš„å·¥ç¨‹åŒ…å«äº†ä¸ºä½ é¢„å…ˆå‡†å¤‡å¥½çš„UIï¼Œæ‰€ä»¥ä½ åªéœ€æŠŠç²¾åŠ›é›†ä¸­åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­appçš„ç½‘ç»œéƒ¨åˆ†ã€‚å¼€å§‹çš„å·¥ç¨‹ä¹ŸåŒ…å«ä¸€äº›å¤„ç†`Dropbox`æˆæƒçš„ä»£ç ,åœ¨åé¢ä½ å°†å­¦åˆ°æ›´å¤šã€‚\n\nåœ¨Xcodeä¸­æ‰“å¼€å·¥ç¨‹è®©ååœ¨ä½ è®¾å¤‡æˆ–è€…æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œä½ åº”è¯¥çœ‹åˆ°åƒä¸‹é¢è¿™æ ·ï¼š\n\n![networking2](http://ww1.sinaimg.cn/mw690/64124373gw1ezzf1vk3t1j205b09edg2.jpg)\n\nç„¶è€Œä½ è¿˜å¹¶ä¸èƒ½ç™»å½•å®ƒ-ä½ ä¸å¾—ä¸å…ˆé…ç½®appï¼Œä½ å°†åšä¸€ç‚¹ã€‚\n\nä¸‹ä¸€æ­¥æ‰“å¼€` Main.storyboard `çºµè§ˆä¸€ä¸‹æ•´ä¸ªappçš„è®¾è®¡ï¼š\n\n![networking2](http://ww2.sinaimg.cn/mw690/64124373gw1ezzf1x56zfj20go0a9q3e.jpg)\n\nè¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ä½¿ç”¨2ä¸ªæ ‡ç­¾çš„çš„TabBarController appï¼šä¸€ä¸ªæ˜¯ä¸ºäº†æŒ‘æˆ˜ç¼–ç¨‹ï¼Œå¦\nä¸€ä¸ªæ˜¯ä¸ºäº†æ”¾å…¨æ™¯ç…§ç‰‡ã€‚è¿™é‡Œä¹Ÿæœ‰é¢„å…ˆè®©ç”¨æˆ·ç™»å½•åˆ°appä¸­çš„ä¸€æ­¥ã€‚ä½ å°†è¦é…ç½®ç™»å½•åœ¨ä½ åˆ›å»ºå®Œ`Dropbox`å¹³å°ä¸‹çš„Appåã€‚\n\næ„Ÿåˆ°å¾ˆè½»æ¾æµè§ˆä¸€ä¸‹Appå‰©ä½™çš„éƒ¨åˆ†å¹¶ä¸”æ‰¾åˆ°åˆ°ç›®å‰ä¸ºæ­¢ç›¸ä¼¼çš„åœ°æ–¹ã€‚ä½ å°†ä¼šæ³¨æ„åˆ°é™¤äº†æˆæƒç»„ä»¶ï¼Œè¿™é‡Œæ²¡æœ‰æ£€ç´¢æŒ‘æˆ˜ç¼–ç¨‹æˆ–è€…å…¨æ™¯ç…§ç‰‡çš„ç½‘ç»œä»£ç -é‚£å°±æ˜¯ä½ çš„å·¥ä½œï¼\n\n#### åˆ›å»ºä¸€ä¸ªæ–°çš„`Dropbox`å¹³å°App\n\nä¸ºäº†å¼€å§‹ä½ çš„æ–°çš„`Dropbox` App,æ‰“å¼€ Dropbox App ä½äº<https://www.dropbox.com/developers/apps>çš„æ§åˆ¶å°\n\nç”¨ä½ çš„`Dropbox`è´¦å·ç™»å½•ï¼Œå‡å¦‚æ²¡æœ‰ï¼Œæ²¡é—®é¢˜ï¼šé©¬ä¸Šåˆ›å»ºä¸€ä¸ªå…è´¹çš„Dropboxè´¦å·ã€‚å‡å¦‚è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨Dropboxçš„APIï¼Œä½ éœ€è¦é€šçŸ¥Dropboxçš„æ¡æ¬¾å’Œæ¡ä»¶ã€‚\n\nç»è¿‡è¿™ä¸ªæ³•å®šçš„ææ–™ä»¥åå°±æ˜¯ä¸Šè·¯äº†ï¼Œé€‰æ‹©åˆ›å»ºAppé€‰é¡¹ã€‚å°†å‘ˆç°ç»™ä½ ä¸€ç³»åˆ—é—®é¢˜-æä¾›ä¸‹é¢çš„ç­”æ¡ˆ\n\n* What type of app do you want to create?\n    * Choose: **Dropbox API app**\n* What type of data does your app need to store on Dropbox?\n    * Choose: **Files and Datastore**\n* Can your app be limited to its own, private folder?\n    * Choose: **No â€“ My App needs access to files already on Dropbox**\n* What type of files does your app need access to?\n    * Choose: **All File Types**\n\næœ€ç»ˆï¼Œä¸ºä½ çš„Appå‡†å¤‡ä¸€ä¸ªåå­—ï¼Œé€‰æ‹©ä»€ä¹ˆå¹¶æ²¡æœ‰å…³ç³»åªæœ‰å®ƒæ˜¯å”¯ä¸€çš„ã€‚å‡å¦‚ä½ é€‰æ‹©äº†ä¸€ä¸ªåˆ«äººå·²ç»åœ¨ä½¿ç”¨çš„åå­—`Dropbox `å°†ä¼šå‘Šè¯‰ä½ ã€‚ä½ çš„å±å¹•åº”è¯¥çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š\n\n![networking3](http://ww2.sinaimg.cn/mw690/64124373gw1ezzf38fs1nj20go0epdhp.jpg)    \n\nç‚¹å‡»`Create App`ï¼Œä½ å°†å¼€å§‹ä¸Šè·¯äº†ï¼\n\nä¸‹ä¸€ä¸ªå±å¹•ä½ å°†çœ‹åˆ°æ˜¾ç¤ºåˆ°å±å¹•ä¸­çš„åŒ…å« **App key** å’Œ **App secret** :\n\n![networking5](http://ww3.sinaimg.cn/mw690/64124373gw1ezzfuk4ucmj208z08rglt.jpg)\n\nå…ˆä¸è¦å…³é—­è¿™ä¸ªå±å¹•ï¼Œä½ å°†éœ€è¦éœ€è¦ä¸‹ä¸€æ­¥çš„`App Key`å’Œ`App Secret`ã€‚\n\næ‰“å¼€`Dropbox.m`æ–‡ä»¶æ‰¾åˆ°ä¸‹é¢è¿™äº›è¡Œï¼š\n\n```objc\n#warning INSERT YOUR OWN API KEY and SECRET HERE\nstatic NSString *apiKey = @\"YOUR_KEY\";\nstatic NSString *appSecret = @\"YOUR_SECRET\";\n```\n\nå¡«å†™ä½ çš„app key å’Œ secretï¼Œè®©ååˆ é™¤ #warning lineï¼Œç°åœ¨ä½ å¯ä»¥å…³é—­`Dropbox` Web App é¡µé¢ã€‚\n\nä¸‹é¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åœ¨ä½ Dropboxä¸»æ–‡ä»¶ä¸‹çš„æ ¹ç›®å½•ç»™å®ƒå‘½ä¸€ä¸ªä½ æƒ³è¦çš„åå­—ã€‚å‡å¦‚ä½ æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ä¸ªå’Œå…¶ä»–çš„Dropboxç”¨æˆ·åˆ†äº«ï¼Œå‘é€ä»–ä»¬åœ¨æ„å»º Byte Club Appçš„æ—¶å€™ï¼Œä»–ä»¬å°†èƒ½å¤Ÿåˆ›å»ºç¬”è®°å¹¶ä¸”èƒ½å¤Ÿä¸Šä¼ æ‰€æœ‰äººéƒ½èƒ½çœ‹å¾—è§çš„ç…§ç‰‡ã€‚\n\nåœ¨Dropbox.mä¸­æ‰¾æ‰“ä¸‹é¢è¿™äº›è¡Œï¼š\n\n```objc\n#warning THIS FOLDER MUST BE CREATED AT THE TOP LEVEL OF YOUR DROPBOX FOLDER, you can then share this folder with others\nNSString * const appFolder = @\"byteclub\";\n```\n\næ”¹å˜å­—ç¬¦ä¸²çš„å€¼ï¼Œè®¾ç½®æˆä½ åˆ›å»ºçš„Dropboxæ–‡ä»¶å¤¹çš„åå­—ï¼Œè®©ååˆ é™¤ #warning pragma.\n\nä¸ºäº†æŠŠè¿™ä¸ªappåˆ†å‘ç»™å…¶ä»–ç”¨æˆ·ï¼Œç»™ä»–ä»¬æ¥å…¥`access tokens`,ä½ å°†éœ€è¦ä¸ºä½ çš„Dropbox å¹³å° Appæ‰“å¼€`Enable additional users`è®¾ç½®ã€‚\n\nå»åœ¨<https://www.dropbox.com/developers/apps>Dropbox appçš„æ§åˆ¶å°ã€‚ç‚¹å‡»ä½ app åç§°ã€‚ç„¶åç‚¹å‡»`Enable Additional Users`æŒ‰é’®ã€‚å°†å‡ºç°ä¸€ä¸ªçŠ¶æ€å¯¹è¯æ¡†è¡¨æ˜ä½ å·²ç»å¢åŠ äº†ä½ çš„ç”¨æˆ·é™åˆ¶ã€‚ç‚¹å‡»Okayå…³é—­å¯¹è¯æ¡†ã€‚ä½ çš„App é¡µé¢å°†åƒä¸‹é¢è¿™æ ·æ˜¾ç¤ºï¼š\n\n![networking5](http://ww3.sinaimg.cn/mw690/64124373gw1ezzg9htvs2j20go056jrj.jpg)\n\n> æ³¨æ„ï¼šä½ å¯èƒ½æ³¨æ„åˆ°å½“ä½ æ­£åœ¨å¼€å‘ä½ çš„appçš„æ—¶å€™ï¼Œä½ å¯ä»¥æ¥å…¥å¤šè¾¾100ä¸ªç”¨æˆ·ã€‚å½“ä½ å‡†å¤‡å‘å¸ƒappé”€å”®çš„æ—¶å€™ï¼Œä½ å¿…é¡»ç”³è¯·ç”Ÿäº§çŠ¶æ€ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»`Apply for production`æŒ‰é’®æ¥å‘é€ç»™`Dropbox`ä¸€äº›é¢å¤–çš„ä¿¡æ¯ã€‚\n\n> Dropbox å°†éšåå®¡æ ¸ä½ çš„App æ¥ç¡®ä¿å®ƒéµå®ˆæŒ‡å—ï¼Œå‡å¦‚æ‰€æœ‰çš„ä¸€åˆ‡è¿›è¡Œå¾—é¡ºåˆ©çš„è¯ï¼Œä½ å°†æ‰“å¼€ä½ çš„appçš„ APIæ¥å…¥æ— çº¿çš„ç”¨æˆ·ã€‚\n\n#### Dropbox æˆæƒ: æ¦‚è§ˆ\n\nå‡å¦‚ä½ æ›¾ç»ä½¿ç”¨è¿‡ç¬¬ä¸‰æ–¹`twitter`å®¢æœç«¯appï¼Œåƒ`TweetBot`,ä½ å°†ä¼šç†Ÿæ‚‰`OAuth`æˆæƒå¤„ç†æ­¥éª¤ä»ä¸€ä¸ªç”¨æˆ·çš„è§’åº¦ã€‚`OAuth`æˆæƒæ¥å…¥è¿‡ç¨‹å¯¹ä½ appæ¥è¯´æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\n\næ„å»ºè¿è¡Œä½ çš„appï¼ŒæŒ‰ç…§æ­¥éª¤ç™»å½•ã€‚ä½ å°†çœ‹åˆ°ä¸€ä¸ªæœ‰2ä¸ªæ ‡ç­¾çš„ç©ºç™½å±å¹•ï¼Œä¸€ä¸ªæ˜¯Notesï¼Œä¸€ä¸ªæ˜¯PanoPhotosï¼Œå¦‚ä¸‹å›¾æ˜¾ç¤ºï¼š\n\n![networking7](http://ww3.sinaimg.cn/mw690/64124373gw1ezzglpqm1aj209f0fa0t7.jpg)\n\n`OAuth`æˆæƒå‘ç”Ÿåœ¨3å’Œé«˜çº§çš„æ­¥éª¤ï¼š\n\n1. è·å–ç”¨æ¥å¤„ç†å‰©ä¸‹çš„æˆæƒä¸€ä¸ªOAuthè¯·æ±‚ tokenã€‚è¿™æ˜¯è¯·æ±‚tokenã€‚\n2. ä¸€ä¸ªweb é¡µé¢è¢«å‘ˆç°åˆ°ç”¨æˆ·é¢å‰é€šè¿‡ä»–ä»¬çš„webæµè§ˆå™¨ã€‚æ²¡æœ‰è¿™ä¸€æ­¥çš„ç”¨æˆ·æˆæƒï¼Œå¯¹ä½ çš„åº”ç”¨æƒ³è·å–ä¸€ä¸ªç¬¬ä¸‰æ­¥ä¸­çš„æ¥å…¥tokenå‡ ä¹ä¸å¯èƒ½ã€‚\n3. åœ¨ç¬¬äºŒæ­¥å®Œæˆåï¼Œåº”ç”¨è°ƒç”¨webæœåŠ¡æ¥äº¤æ¢ä¸´æ—¶è¯·æ±‚tokenï¼ˆä»ç¬¬ä¸€æ­¥ä¸­çš„ï¼‰ä¸ºäº†ä¸€ä¸ªå°†å­˜å‚¨åœ¨appé‡Œé¢çš„æŒä¹…æ¥å…¥tokenã€‚\n\n> æ³¨æ„ï¼šä¸ºäº†ä¿è¯è¿™ä¸ªæ•™ç¨‹çš„ç®€æ´ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—è¿›è¡Œæ›´è¯¦ç»†çš„è®²è§£å…³äºè¿™é‡ŒDropboxæˆæƒå·¥ä½œã€‚ç„¶è€Œï¼Œå‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šç‚¹å‡»æ•´ä¸ªæ•™ç¨‹çš„å®Œå…¨ç‰ˆæœ¬ï¼Œå®ƒæ˜¯[iOS 7 by Tutorials.](http://www.raywenderlich.com/?page_id=48020)çš„ä¸€éƒ¨åˆ†ã€‚\n\n#### NSURLSession çš„ä¸€ç³»åˆ—ç±»\n\nAppleå·²ç»æŠŠ`NSURLSession`æè¿°æˆä¸€ä¸ªæ–°ç±»å’Œä¸€ç³»åˆ—æ—§ç±»çš„ç»„åˆã€‚è¿™äº›æ–°çš„å·¥å…·æ˜¯ä¸ºäº†å¤„ç† ä¸Šä¼ ï¼Œä¸‹è½½ï¼Œå¤„ç†æˆæƒå·²ç»å¤„ç†åœ¨HTTPåè®®é‡Œé¢çš„ä»»ä½•äº‹æƒ…ã€‚\n\n![networking12](http://ww3.sinaimg.cn/mw690/64124373gw1ezzgzutn43j20go0dwgn3.jpg)\n\nä¸€ä¸ª`NSURLSession`ç”¨ä¸€ä¸ªå¸¦å¯é€‰ä»£ç†çš„`NSURLSessionConfiguration`æ„é€ ã€‚åœ¨ä½ åˆ›å»ºä¼šè¯ä»¥åï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ»¡è¶³ä½ çš„ç½‘ç»œéœ€è¦é€šè¿‡åˆ›å»º`NSURLSessionTask`çš„ä»»åŠ¡ã€‚\n\n#### NSURLSessionConfiguration\n\nè¿™é‡Œæœ‰ä¸‰ç§æ–¹å¼åˆ›å»º`NSURLSessionConfiguration`:\n\n* **defaultSessionConfiguration** - åˆ›å»ºä¸€ä¸ªä½¿ç”¨å…¨å±€ç¼“å­˜ï¼Œcookieçš„é…ç½®å¯¹è±¡å’Œå‡­è¯å­˜å‚¨çš„å¯¹è±¡ã€‚è¿™ä¸ªé…ç½®ä¼šä½¿ä½ çš„ä¼šè¯æœ€åƒ`NSURLConnection`ã€‚\n* **ephemeralSessionConfiguration** - è¿™ä¸ªé…ç½®æ˜¯ç”¨æ¥ä½œä¸ºâ€˜ç§æœ‰çš„â€™ä¼šè¯å¹¶ä¸”ä¸ä¼šæŒä¹…åŒ–å­˜å‚¨ç¼“å­˜ï¼Œcookieï¼Œæˆ–è€…ä¿¡ç”¨å­˜å‚¨å¯¹è±¡ã€‚\n* **backgroundSessionConfiguration** - å½“ä½ æƒ³è¦ä»è¿œç¨‹æ¨é€æˆ–è€…å½“appè¢«æš‚æ—¶æŒ‚èµ·æ—¶è¿›è¡Œç½‘ç»œä¸šåŠ¡ä½¿ç”¨è¿™ä¸ªè¿™ä¸ªé…ç½®ã€‚å‚è€ƒ17ç« å’Œ18ç« åœ¨[ iOS 7 by Tutorials](http://www.raywenderlich.com/?page_id=48020),`Beginning and Intermediate Multitasking`,æœ‰æ›´è¯¦ç»†çš„è®²è§£ã€‚\n\nä¸€æ—¦ä½ åˆ›å»ºä¸€ä¸ª`NSURLSessionConfiguration`å¯¹è±¡ï¼Œä½ å°±å¯ä»¥åœ¨å®ƒä¸Šé¢è®¾ç½®å„ç§æ¥å£åƒè¿™æ ·ï¼š\n\n```objc\nNSURLSessionConfiguration *sessionConfig =\n[NSURLSessionConfiguration defaultSessionConfiguration];\n\n// 1\nsessionConfig.allowsCellularAccess = NO;\n\n// 2\n[sessionConfig setHTTPAdditionalHeaders:\n          @{@\"Accept\": @\"application/json\"}];\n\n// 3\nsessionConfig.timeoutIntervalForRequest = 30.0;\nsessionConfig.timeoutIntervalForResource = 60.0;\nsessionConfig.HTTPMaximumConnectionsPerHost = 1;\n```\n\n1. ä½ é™åˆ¶äº†ç½‘ç»œæ“ä½œåªæœ‰wifiæ‰èƒ½è¿›è¡Œã€‚\n2. è¿™å°†è®¾ç½®æ‰€æœ‰çš„è¯·æ±‚åªæ¥å— JSONç±»å‹çš„å“åº”ã€‚\n3. è¿™äº›æ¥å£å°†é…ç½®èµ„æºæˆ–è€…è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä½ ä¹Ÿå¯ä»¥é™åˆ¶ä½ çš„appå¯¹ä½ çš„ä¸»æœºåªèƒ½æœ‰ä¸€ä¸ªç½‘ç»œè¿æ¥ã€‚\n\nè¿™äº›ä»…ä»…æ˜¯ä½ èƒ½é…ç½®çš„ä¸€äº›ä¸œè¥¿ï¼Œç¡®ä¿æ£€æŸ¥æ‰€æœ‰åˆ—è¡¨çš„æ–‡æ¡£ã€‚\n\n#### NSURLSession\n\n`NSURLSession`è¢«è®¾è®¡æˆæ›¿ä»£`NSURLConnection`çš„APIã€‚Sessionsåšäº†ä»–ä»¬çš„å·¥ä½œé€šè¿‡ä»–ä»¬çš„éƒ¨ä¸‹ï¼Œä¹Ÿå°±æ˜¯éå¸¸å‡ºåçš„`NSURLSessionTask`å¯¹è±¡ã€‚ä½¿ç”¨`NSURLSession`ä½ èƒ½å¤Ÿåˆ›å»ºä»»åŠ¡ä½¿ç”¨åŸºäºblockçš„ä¾¿åˆ©æ–¹æ³•ï¼Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œæˆ–è€…åŒæ—¶ä¸¤è€…ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä½ æƒ³è¦ä¸‹è½½ä¸€å¼ \nå›¾ç‰‡ï¼ˆ *challenge hint *ï¼‰,ä½ å°±éœ€è¦åˆ›å»ºä¸€ä¸ª`NSURLSessionDownloadTask`ã€‚\n\nç¬¬ä¸€æ­¥ï¼Œä½ éœ€è¦åˆ›å»º(ä¼šè¯)sessionã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š\n\n```objc\n// 1\nNSString *imageUrl =\n@\"http://www.raywenderlich.com/images/store/iOS7_PDFonly_280@2x_authorTBA.png\";\n\n// 2\nNSURLSessionConfiguration *sessionConfig =\n  [NSURLSessionConfiguration defaultSessionConfiguration];\n\n// 3\nNSURLSession *session =\n  [NSURLSession sessionWithConfiguration:sessionConfig\n                                delegate:self\n                           delegateQueue:nil];\n```\n\nOk,è¿™ä¸ªä»…ä»…æ˜¯ä½ ç›®å‰æ‰€çœ‹åˆ°çš„ä¸€ç‚¹ç‚¹ä¸åŒã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥é‡æ¸©ã€‚\n\n1. ç”¨è¿™ä¸ªä»£ç ç‰‡æ®µæˆ‘ä»¬å°†ä¸€æ ·è¿›è¡Œä¸‹è½½åœ¨ä¸¤ä¸ªä»»åŠ¡ä¸­ã€‚\n2. ä½ æ€»æ˜¯ä»¥åˆ›å»º`NSURLConfiguration`å¼€å§‹ã€‚\n3. è¿™é‡Œåˆ›å»ºä¸€ä¸ªä¼šè¯ä½¿ç”¨ç°åœ¨çš„ç±»ä½œä¸ºä»£ç†ã€‚\n\nåœ¨ä½ åˆ›å»ºä¼šè¯åï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå¸¦ä¸€ä¸ª`completion handler`çš„ä»»åŠ¡ä¸‹è½½è¿™å¼ å›¾ç‰‡ï¼Œæƒ³ä¸‹é¢è¿™æ ·:\n\n```objc\n// 1\nNSURLSessionDownloadTask *getImageTask =\n[session downloadTaskWithURL:[NSURL URLWithString:imageUrl]\n\n    completionHandler:^(NSURL *location,\n                        NSURLResponse *response,\n                        NSError *error) {\n        // 2\n        UIImage  *downloadedImage =\n          [UIImage imageWithData:\n              [NSData dataWithContentsOfURL:location]];\n      //3\n      dispatch_async(dispatch_get_main_queue(), ^{\n        // do stuff with image\n         _imageWithBlock.image = downloadedImage;\n      });\n}];\n\n// 4\n[getImageTask resume];\n```\n\nAh ha!ç°åœ¨è¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹åƒç½‘ç»œä»£ç ï¼\n\n1. ä»»åŠ¡æ€»æ˜¯è¢«sessionsåˆ›å»ºã€‚ä»»åŠ¡ä¸€æ—¦è¢«åŸºäºblockçš„æ–¹æ³•åˆ›å»ºã€‚è®°ä½ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨`NSURLSessionDownloadDelegate`æ¥è·Ÿè¸ªä¸‹è½½è¿›åº¦ã€‚æ‰€ä»¥ä½ å°†è·å¾—æœ€å¥½çš„ä¸¤ä¸ªå•è¯ï¼ï¼ˆ *hint for challenge *ï¼‰\n\n    -URLSession:downloadTask\n    :didWriteData:totalBytesWritten\n    :totalBytesExpectedToWrite:\n\n2. è¿™é‡Œä½ ä½¿ç”¨åœ¨ `completion handler`æä¾›çš„æœ¬åœ°å˜é‡æ¥è·å–ä¸€ä¸ªæŒ‡å‘å›¾ç‰‡çš„æŒ‡é’ˆã€‚\n3. æœ€ç»ˆä½ èƒ½å¤Ÿï¼Œä¾‹å¦‚ï¼Œæ›´æ–° `UIIImageView`çš„å›¾ç‰‡æ¥æ˜¾ç¤ºæ–°çš„æ–‡ä»¶ã€‚(hint hint â˜º)\n4. ä½ æ€»å¾—è‡ªå·±å¯åŠ¨ä»»åŠ¡ï¼\n5. è®°ä½æˆ‘åœ¨å‰é¢æ‰€è¯´çš„ï¼Œä¸€ä¸ªä¼šè¯ä¹Ÿå¯ä»¥åˆ›å»ºå°†è¦å‘é€æ¶ˆæ¯ç»™ä»£ç†æ–¹æ³•æ¥é€šçŸ¥ä½ å®Œæˆç­‰çš„ä»»åŠ¡ã€‚\n\nåº”è¯¥é•¿æˆè¿™æ ·ï¼Œä½¿ç”¨ç›¸åŒçš„ä¼šè¯ä»ä¸Šé¢ï¼š\n\n```objc\n// 1\nNSURLSessionDownloadTask *getImageTask =\n  [session downloadTaskWithURL:[NSURL URLWithString:imageUrl]];\n\n[getImageTask resume];\n```\n\n1. è¿™å½“ç„¶æ˜¯ç¡®å®šä½¿ç”¨æ›´å°‘çš„ä»£ç â˜º ç„¶è€Œï¼Œå‡å¦‚ä½ åªè¿™æ ·åšï¼Œä½ å°†ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚\nä½ éœ€è¦è®©ä½ çš„ä»£ç†å®ç°ä¸€äº›`NSURLSessionDownloadDelegate`åè®®çš„æ–¹æ³•ã€‚\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦è·å¾—é€šçŸ¥å½“ä¸‹è½½å®Œæˆæ—¶ï¼š\n\n```objc\n-(void)URLSession:(NSURLSession *)session\n     downloadTask:(NSURLSessionDownloadTask *)downloadTask\ndidFinishDownloadingToURL:(NSURL *)location\n{\n  // use code above from completion handler\n}\n```\n\nå†æœ‰ä½ éœ€è¦æä¾›å°†è¦ä¸‹è½½çš„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œç„¶åä½ å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥å¤„ç†å›¾ç‰‡ã€‚\n\næœ€åï¼Œå‡å¦‚ä½ éœ€è¦è·Ÿè¸ªä¸‹è½½è¿›åº¦ï¼Œå¯¹äºä»»åŠ¡åˆ›å»ºæ–¹æ³•ï¼Œä½ éœ€è¦åƒä¸‹é¢è¿™æ ·ç”¨ï¼š\n\n```objc\n-(void)URLSession:(NSURLSession *)session\n     downloadTask:(NSURLSessionDownloadTask *)downloadTask\n     didWriteData:(int64_t)bytesWritten\ntotalBytesWritten:(int64_t)totalBytesWritten\ntotalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite\n{\n  NSLog(@\"%f / %f\", (double)totalBytesWritten,\n    (double)totalBytesExpectedToWrite);\n}\n```\n\næ­£å¦‚ä½ æ‰€è§ï¼Œ`NSURLSessionTask`æ˜¯ä¸€åŒ¹é€šè¿‡ç½‘ç»œæ¥å¹²æ´»çš„çœŸå®çš„é©®é©¬ã€‚\n\n#### NSURLSessionTask\n\nç›®å‰ä¸ºæ­¢ä½ å·²ç»çŸ¥é“`NSURLSessionDataTask`å’Œ`NSURLSessionDownloadTask`æ€æ ·ä½¿ç”¨äº†ã€‚è¿™ä¸¤ä¸ªçš„ä»»åŠ¡æ˜¯æ¥è‡ªä»–ä»¬å…±åŒçš„åŸºç±»`NSURLSessionTask`ï¼Œä½ å¯ä»¥åœ¨è¿™ç±»çœ‹åˆ°ï¼š\n\n![networking13](http://ww1.sinaimg.cn/mw690/64124373gw1ezzij54674j20go0d53zc.jpg)\n\n`NSURLSessionTask`åœ¨ä½ çš„ä¼šè¯ä¸­æ˜¯ä»»åŠ¡çš„åŸºç±»ï¼›ä»–ä»¬åªèƒ½é€šè¿‡ä¸€ä¸ªä¼šè¯åˆ›å»ºå¹¶ä¸”å®ƒä»¬æ˜¯ä¸‹é¢å­ç±»ä¸­çš„ä¸€ä¸ªã€‚\n\n#### NSURLSessionDataTask\n\nè¿™ä¸ªä»»åŠ¡å‘èµ·HTTP GETè¯·æ±‚æ¥ä»æœæœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚æ•°æ®è¢«è¿”å›ä»¥NSDataçš„å½¢å¼è¿”å›ã€‚ä½ åº”è¯¥åœ¨éšåå°†å…¶æŠŠè¿™ä¸ªæ•°æ®è½¬æ¢æˆæ­£ç¡®çš„æ•°æ®ç±»å‹æ¯”å¦‚`XML`,`JSON`,UIImageï¼Œplistç­‰ç­‰ã€‚\n\n```objc\nNSURLSessionDataTask *jsonData = [session dataTaskWithURL:yourNSURL\n      completionHandler:^(NSData  *data,\n                          NSURLResponse  *response,\n                          NSError  *error) {\n        // handle NSData\n}];\n```\n\n#### NSURLSessionUploadTask\n\nä½¿ç”¨è¿™ä¸ªç±»å½“ä½ éœ€è¦ä¸Šä¼ ä¸€äº›ä¸œè¥¿åˆ°webæœåŠ¡å™¨æ—¶ï¼Œä½¿ç”¨HTTP `POST` æˆ–è€… `PUT` å‘½ä»¤ã€‚ä»»åŠ¡å¸¦æ¥ä¹Ÿå…è®¸ä½ ç›‘è§†ç½‘ç»œçŠ¶å†µå½“å®ƒæ­£åœ¨ä¼ è¾“çš„æ—¶å€™ã€‚\n\nä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼š\n\n```objc\nNSData *imageData = UIImageJPEGRepresentation(image, 0.6);\n\nNSURLSessionUploadTask *uploadTask =\n  [upLoadSession uploadTaskWithRequest:request\n                              fromData:imageData];\n```\n\nåœ¨è¿™ç±»ä»»åŠ¡è¢«åˆ›å»ºä»ä¸€ä¸ªä¼šè¯ä¸­å¹¶ä¸”å›¾ç‰‡ä»¥NSDataçš„å½¢å¼ä¸Šä¼ ã€‚è¿™é‡Œä¹Ÿå¯ä»¥é€šä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æµçš„æ–¹æ³•æ¥è¿›è¡Œä¸Šä¼ ã€‚\n\n#### NSURLSessionDownloadTask\n\n`NSURLSessionDownloadTask`è®©é€šè¿‡è¿œç¨‹æœåŠ¡ä¸‹è½½æ–‡ä»¶å˜å¾—è¶…çº§ç®€å•ï¼Œå¹¶ä¸”å¯ä»¥æš‚åœå’Œæ¢å¤ä¸‹è½½åªè¦ä½ æƒ³ã€‚è¿™ä¸ªå­ç±»æœ‰åˆ«äºå…¶ä»–ä¸¤ä¸ªã€‚\n\n* è¿™ä¸ªç±»å‹çš„ä»»åŠ¡ç›´æ¥å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚\n* åœ¨ä¸‹è½½ä¼šè¯ä¸­å°†è°ƒç”¨` URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesExpectedToWrite: `æ¥æ›´æ–°çŠ¶æ€ä¿¡æ¯ã€‚\n* å½“ä»»åŠ¡å®Œæˆæ—¶ï¼Œ`URLSession:downloadTask:didFinishDownloadingToURL: `è¢«è°ƒç”¨ã€‚è¿™å°±æ˜¯ä½ è¯¥ä¿å­˜æ–‡ä»¶ä»ä¸´æ—¶ä½ç½®åˆ°ä¸€ä¸ªæ°¸ä¹…ä½ç½®çš„æ—¶å€™ã€‚\n* å½“ä¸‹è½½å¤±è´¥æˆ–è€…å–æ¶ˆæ—¶ï¼Œä½ å¯ä»¥è®©æ•°æ®é‡æ–°å¼€å§‹ä¸‹è½½ã€‚\n\nè¿™ä¸ªç‰¹æ€§å°†æå…¶æœ‰ç”¨å½“ä½ åœ¨ä¸‹è½½ä¸€ä¸ª`Byte Club`å®šä½ å…¨æ™¯ç…§ç‰‡ç»™ä½ çš„è®¾å¤‡çš„ç›¸æœºèƒ¶å·ã€‚ä½ çœ‹åˆ°çš„ä¸€ä¸ªä¸‹è½½ä»»åŠ¡ä¾‹å­åœ¨ä¸Šé¢ä¸‹è½½å›¾ç‰‡ç‰‡æ®µä¸­ã€‚\n\n##### ä¸Šè¿°å…¨éƒ¨\n\næ‰€æœ‰çš„ä¸Šè¿°ä»»åŠ¡è¢«åˆ›å»ºåœ¨ä¸€ä¸ªæš‚åœçš„çŠ¶æ€ï¼›åœ¨åˆ›å»ºä¸€ä¸ªä»»åŠ¡æ—¶ä½ éœ€è¦è°ƒç”¨å®ƒçš„ç»§ç»­æ–¹æ³•åƒä¸‹é¢æ¼”ç¤ºçš„é‚£æ ·ï¼š\n\n```objc\n[uploadTask resume];\n```\n\nå½“ä½ ä¸€æ¬¡ä¸åªç®¡ç†ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œ`taskIdentifier`æ¥å£å…è®¸ä½ å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªåœ¨ä¼šè¯ä¸­çš„ä»»åŠ¡\n\nè¿™å°±æ˜¯ï¼æ—¢ç„¶ä½ å·²ç»çŸ¥é“äº†`NSURLSession`ç³»åˆ—çš„ä¸»è¦ç±»ï¼Œè®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹ã€‚\n\n#### Sharing notes with NSURLSession\n\nOKï¼Œè¿™ä¸æ˜¯æ­»äº¡è¯—ç¤¾ï¼Œè¿™æ˜¯`Byte Club`!æ˜¯æ—¶å€™å¼€å§‹çœ‹çœ‹ä¸€ä¸‹è¿™ä¸ªçš„ç½‘ç»œä»£ç åœ¨èµ·ä½œç”¨äº†ã€‚\n\nä½ éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥ç»™`Byte Club`çš„å…¶ä»–æˆå‘˜å‘é€æ¶ˆæ¯ã€‚æ—¢ç„¶ä½ å·²ç»è®¾ç½®äº†æ¥å…¥tokenï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å®ä¾‹åŒ–`NSURLSesssion`å¯¹è±¡ï¼Œè®©åè°ƒç”¨ä½ çš„ç¬¬ä¸€ä¸ªDropbox APIã€‚\n\n##### Creating an NSURLSession\n\næ·»åŠ ä¸‹é¢çš„æ¥å£åˆ° **NotesViewController.m** æ–‡ä»¶ï¼Œå°±åœ¨ NSArray  *notes è¡Œçš„åé¢ï¼š\n\n```objc\n@property (nonatomic, strong) NSURLSession *session;\n```\n\nä½ å°†åˆ›é€ æ‰€æœ‰ä½ çš„ä¸‹å±ä»ä¸Šé¢çš„sessionä¸­ã€‚\n\næ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°`NotesViewController.m`å°±åœ¨`initWithStyle`æ–¹æ³•çš„ä¸Šé¢ï¼š\n\n\n```objc\n- (id)initWithCoder:(NSCoder *)aDecoder\n{\n    self = [super initWithCoder:aDecoder];\n    if (self) {\n        // 1\n        NSURLSessionConfiguration  *config = [NSURLSessionConfiguration ephemeralSessionConfiguration];\n\n        // 2\n        [config setHTTPAdditionalHeaders:@{@\"Authorization\": [Dropbox apiAuthorizationHeader]}];\n\n        // 3\n         _session = [NSURLSession sessionWithConfiguration:config];\n    }\n    return self;\n}\n```\n\nä¸‹é¢æ˜¯ä¸Šé¢ä»£ç æ³¨é‡Šçš„æ³¨é‡Šçš„è§£é‡Šï¼š\n\n1. ä½ çš„appè°ƒç”¨ `initWithCoder`å½“ä½ å®ä¾‹åŒ–ä¸€ä¸ªæ§åˆ¶å™¨ä»ä¸€ä¸ªæ•…äº‹ç‰ˆä¸­;å› æ­¤è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„æ—¶åˆ»åˆå§‹åŒ–å’Œåˆ›å»º`NSURLSession`ã€‚ä½ å¹¶ä¸æƒ³ç§¯æç¼“å­˜æˆ–è€…æŒä¹…åŒ–è¿™é‡Œï¼Œæ‰€æœ‰ä½ ä½¿ç”¨`ephemeralSessionConfiguration`ä¾¿åˆ©æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ²¡æœ‰æŒä¹…åŒ–ç¼“å­˜ï¼Œcookiesï¼Œæˆ–è€…è®¤è¯å­˜å‚¨çš„ä¼šè¯ã€‚è¿™æ˜¯ä¸€ä¸ª\"ç§æœ‰æµè§ˆ\"é…ç½®ã€‚\n2. ä¸‹ä¸€æ­¥ï¼Œä½ æ·»åŠ æˆæƒHTTPå¤´é“é…ç½®å¯¹è±¡ä¸­ã€‚apiAuthorizationHeaderæ˜¯ä¸€ä¸ªæˆ‘å†™çš„è¾…åŠ©æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥æˆæƒåˆ¶å®šçš„æ ¼å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²åŒ…å«access tokenï¼Œtoken secretå’Œä½ çš„ Dropbox App API ç§˜é’¥ã€‚è®°ä½è¿™æ˜¯å¿…è¦çš„å› ä¸ºæ¯ä¸ªå¯¹ Dropbox API çš„è°ƒç”¨éƒ½éœ€è¦è¢«æˆæƒã€‚\n3. æœ€åï¼Œä½ ä½¿ç”¨ä¸Šé¢çš„é…ç½®åˆ›å»ºäº†`NSURLSession`ã€‚\n\nä¼šè¯ç°åœ¨å‡†å¤‡å¥½åˆ›å»ºåœ¨ä½ appä¸­ä½ æ‰€éœ€è¦çš„ä»»ä½•ç½‘ç»œä»»åŠ¡ã€‚\n\n##### GET Notes through the Dropbox API\n\nä¸ºäº†æ¨¡æ‹Ÿä¸€æ¡ç¬”è®°è¢«å¦ä¸€ä¸ªç”¨æˆ·æ·»åŠ ï¼Œæ·»åŠ ä»»ä½•ä½ åœ¨è®¾ç½®åœ¨ä½ çš„Dropboxæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä¸­é€‰æ‹©çš„æ–‡æœ¬æ–‡ä»¶ã€‚ä¾‹å¦‚ä½äºDropboxæ–‡ä»¶å¤¹ä¸‹ **byteclub** ä¸‹é¢æ˜¾ç¤ºçš„ **test.txt**ï¼š\n\n![networking14](http://ww3.sinaimg.cn/mw690/64124373gw1ezzkkwyf6ej20go03tglw.jpg)\n\nç­‰å¾…ç›´åˆ°`Dropbox`ç¡®è®¤å®ƒå·²ç»åŒæ­¥å®Œä½ çš„æ–‡ä»¶ï¼Œè®©åç»§ç»­ä¸‹é¢ä»£ç ã€‚\n\næ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°ç©ºçš„`notesOnDropBox`æ–¹æ³•ä¸­åœ¨`NotesViewController.m`:\n\n```objc\n[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;\n// 1\nNSURL *url = [Dropbox appRootURL];\n\n// 2\nNSURLSessionDataTask *dataTask =\n[self.session dataTaskWithURL:url\n            completionHandler:^(NSData  *data,\n                                NSURLResponse  *response,\n                                NSError  *error) {\n    if (!error) {            \n        // TODO 1: More coming here!\n    }                \n}];\n\n// 3  \n[dataTask resume];\n```\n\nè¿™ä¸ªæ–¹æ³•çš„ç›®æ ‡æ˜¯æ£€ç´¢åœ¨appçš„Dropboxæ–‡ä»¶ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ã€‚è®©æˆ‘ä»¬æ¥é‡æ¸©ä¸€ä¸‹è¿™æ˜¯æ€æ ·å·¥ä½œçš„ä¸€æ­¥æ­¥ã€‚\n\n1. åœ¨Dropboxä¸­ï¼Œä½ èƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹é€šè¿‡è¿›è¡Œä¸€ä¸ªå·²ç»æˆæƒçš„`GET`è¯·æ±‚åˆ°æŸä¸ªç‰¹åˆ«çš„URL - åƒhttps://api.dropbox.com/1/metadata/dropbox/byteclub. æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªä¾¿åˆ©çš„æ–¹æ³•åœ¨Dropboxç±»ä¸­æ¥ä¸ºä½ äº§ç”Ÿè¿™ä¸ªURLã€‚\n2. `NSURLSession`ç”¨ä¾¿åˆ©æ„é€ æ–¹æ³•æ¥ç®€å•çš„åˆ›å»ºå„ç§ç±»å‹çš„ä»»åŠ¡ã€‚è¿™æ˜¯ä½ åˆ›å»ºçš„ä¸€ä¸ªæ•°æ®ä»»åŠ¡ä¸ºäº†æ‰§è¡Œä¸€ä¸ªGETè¯·æ±‚åˆ°é‚£ä¸ªURLã€‚å½“è¯·æ±‚å®Œæˆæ—¶ï¼Œä½ çš„`completionHandler` blockè¢«è°ƒç”¨ã€‚ä¸€ä¼šå„¿ä½ å°†æ·»åŠ ä¸€ä¸‹ä»£ç åˆ°è¿™é‡Œã€‚\n3. è®°ä½ä¸€ä¸ªä»»åŠ¡é»˜è®¤æ˜¯ä¸€ä¸ª`æš‚åœ`çš„çŠ¶æ€,å› æ­¤ä½ éœ€è¦è°ƒç”¨æ¢å¤æ–¹æ³•æ¥å¯åŠ¨è¿è¡Œã€‚\n\né‚£å°±æ˜¯æ‰€æœ‰ä½ éœ€è¦åšçš„æ¥å¼€å§‹ä¸€ä¸ª`GET`è¯·æ±‚-ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ä»£ç åˆ°è§£æçš„ç»“æœä¸­ã€‚æ·»åŠ ä¸‹é¢çš„è¿™äº›è¡Œåˆ°\"TUDO 1\"æ³¨é‡Šçš„åé¢:\n\n```objc\n// 1\nNSHTTPURLResponse *httpResp = (NSHTTPURLResponse *) response;\nif (httpResp.statusCode == 200) {\n\n    NSError  *jsonError;\n\n    // 2\n    NSDictionary  *notesJSON =\n      [NSJSONSerialization JSONObjectWithData:data                                                                        \n        options:NSJSONReadingAllowFragments                                                                             \n        error:&jsonError];\n\n    NSMutableArray  *notesFound = [[NSMutableArray alloc] init];\n\n    if (!jsonError) {                    \n        // TODO 2: More coming here!\n    }\n}\n```\n\nä¸‹é¢æ˜¯ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†:\n\n1. ä½ çŸ¥é“ä½ å·²ç»å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œæ‰€ä»¥å“åº”å°†æ˜¯ä¸€ä¸ªHTTPPå“åº”ã€‚å› æ­¤è¿™é‡Œä½ å¯ä»¥æŠ›å‡º`NSURLResponse`åˆ°ä¸€ä¸ª`NSHTTPURLRequest`å“åº”ä»¥ä¾¿ä½ èƒ½å¤Ÿæ¥å…¥åˆ°æ¥å£çš„çŠ¶æ€ç ã€‚\nå‡å¦‚ä½ æ”¶åˆ°äº†ä¸€ä¸ªHTTPçŠ¶æ€ç 200ï¼Œç„¶åä¸€åˆ‡æ­£å¸¸ã€‚\n\n\tHTTP é”™è¯¯ç ä¸¾ä¾‹ï¼š\n\n\t* 400 - è¾“å…¥å‚æ•°é”™è¯¯ã€‚é”™è¯¯æ¶ˆæ¯å°†è¡¨æ˜é‚£ä¸ªå’Œä¸ºä»€ä¹ˆé”™è¯¯ã€‚\n\t* 401 - tokené”™è¯¯æˆ–è€…å¤±æ•ˆã€‚è¿™ä¸ªå¯èƒ½å‘ç”Ÿå‡å¦‚ç”¨æˆ·æˆ–è€…`Dropbox`è¢«æ’¤é”€æˆ–è€…æ¥å…¥tokenè¿‡æœŸã€‚ä½ å¯ä»¥é€šè¿‡é‡æ–°æˆæƒä¿®å¤è¿™ä¸ªç”¨æˆ·ã€‚\n\t* 403 - é”™è¯¯çš„æˆæƒè¯·æ±‚ï¼ˆé”™è¯¯çš„ç”¨æˆ·é”®ï¼Œåçš„éšæœºæ•°ï¼Œæ—¶é—´æˆ³è¿‡æœŸ...ï¼‰ã€‚ä¸ä¿¡çš„æ˜¯ï¼Œé‡æ–°æˆæƒç”¨æˆ·åœ¨è¿™é‡Œå¹¶æ²¡æœ‰ç”¨ã€‚\n\t* 404 - æŒ‡å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ²¡æ‰¾åˆ°ã€‚\n\t* 405 - æœªçŸ¥çš„è¯·æ±‚æ–¹æ³•ï¼ˆé€šå¸¸åº”è¯¥æ˜¯ GET æˆ–è€… POSTï¼‰ã€‚\n\t* 429 - ä½ çš„appå‘é€å¤ªå¤šè¯·æ±‚è¶…å‡ºäº†é™åˆ¶çš„é€Ÿç‡ï¼Œ429èƒ½å¤Ÿè§¦å‘åœ¨æ¯ä¸ªappæˆ–è€…æ¯ä¸ªç”¨æˆ·æ ¹éƒ¨ã€‚\n\t* 503 - å‡å¦‚å“åº”åŒ…æ‹¬é‡å‘åçš„å¤´ï¼Œè¿™å°±æ„å‘³åšä½ çš„`OAuth` 1.0 app æ­£åœ¨è¢«é™é€Ÿã€‚å¦åˆ™ï¼Œè¿™ä¸ªè¡¨æ˜äº†ä¸€ä¸ªçŸ­æš‚çš„æœåŠ¡å™¨é”™è¯¯ï¼Œå¹¶ä¸”ä½ çš„appåº”è¯¥é‡æ–°å‘é€è¿™è¿™ä¸ªè¯·æ±‚ã€‚\n\t* 507 - ç”¨æˆ·è¶…å‡º Dropbox å‚¨å­˜é…é¢ã€‚\n\t* 5xx - æœåŠ¡å™¨é”™è¯¯ã€‚\n\n2. Dropbox APIè¿”å›JSONç±»å‹çš„æ•°æ®ã€‚æ‰€æœ‰ä½ æ”¶åˆ°ä¸€ä¸ª200çš„å“åº”ï¼Œç„¶ååº”è¯¥æŠŠæ•°æ®è½¬å‘æˆJSONä½¿ç”¨iOSçš„æ„å»ºJSONåºåˆ—åŒ–çš„æ–¹æ³•ã€‚äº†è§£æ›´å¤šå…³äºJSONå’ŒNSJSONSerializationï¼ŒæŸ¥çœ‹ç¬¬23ç« åœ¨ `iOS 5 by Tutorials`,\"Working with JSON.\"\n\nJSON æ•°æ®è¿”å›ä»Dropboxå°†çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š\n\n```\n{\n    \"hash\": \"6a29b68d106bda4473ffdaf2e94c4b61\",\n    \"revision\": 73052,\n    \"rev\": \"11d5c00e1cf6c\",\n    \"thumb_exists\": false,\n    \"bytes\": 0,\n    \"modified\": \"Sat, 10 Aug 2013 21:56:50 +0000\",\n    \"path\": \"/byteclub\",\n    \"is_dir\": true,\n    \"icon\": \"folder\",\n    \"root\": \"dropbox\",\n    \"contents\": [{\n        \"revision\": 73054,\n        \"rev\": \"11d5e00e1cf6c\",\n        \"thumb_exists\": false,\n        \"bytes\": 16,\n        \"modified\": \"Sat, 10 Aug 2013 23:21:03 +0000\",\n        \"client_mtime\": \"Sat, 10 Aug 2013 23:21:02 +0000\",\n        \"path\": \"/byteclub/test.txt\",\n        \"is_dir\": false,\n        \"icon\": \"page_white_text\",\n        \"root\": \"dropbox\",\n        \"mime_type\": \"text/plain\",\n        \"size\": \"16 bytes\"\n    }],\n    \"size\": \"0 bytes\"\n}\n```\n\næ‰€æœ‰æœ€åä¸€æ®µæ·»åŠ çš„ä»£ç æ˜¯æ‹‰å–çš„éƒ¨åˆ†ä½ æ„Ÿå…´è¶£çš„ä»JSONä¸­ã€‚ç‰¹åˆ«çš„ï¼Œä½ æƒ³å¾ªç¯éå†â€œcontentsâ€æ•°ç»„æ¥æŠŠâ€œis_dirâ€è®¾ç½®æˆ`false`ã€‚\n\nè¿™æ ·åšï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°â€œTODO 2â€æ³¨é‡Šåé¢ï¼š\n\n```objc\n// 1\nNSArray *contentsOfRootDirectory = notesJSON[@\"contents\"];\n\nfor (NSDictionary *data in contentsOfRootDirectory) {\n    if (![data[@\"is_dir\"] boolValue]) {\n        DBFile  *note = [[DBFile alloc] initWithJSONData:data];\n        [notesFound addObject:note];\n    }\n}\n\n[notesFound sortUsingComparator:\n  ^NSComparisonResult(id obj1, id obj2) {\n    return [obj1 compare:obj2];                    \n}];\n\nself.notes = notesFound;\n\n// 6\ndispatch_async(dispatch_get_main_queue(), ^{\n    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;\n    [self.tableView reloadData];\n});\n```\n\nè¿™é‡Œæœ‰ä¸¤éƒ¨åˆ†ï¼š\n\n1. ä½ æ‹‰å–æ•°ç»„å¯¹è±¡ä»â€œcontentsâ€é”®ä¸­ï¼Œè®©åå¾ªç¯ä¾¿åˆ©æ•°ç»„ã€‚æ¯ä¸ªæ•°ç»„å…¥å£æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥ä½ åˆ›å»ºä¸€ä¸ªç›¸åº”çš„`DBFile`æ–‡ä»¶æ¨¡å‹ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶ã€‚\n\n    `DBFile`æ˜¯ä¸€ä¸ªæˆ‘ä¸ºä½ åˆ›å»ºçš„è¾…åŠ©ç±»ï¼Œä¸ºäº†æ‹‰å–ä¿¡æ¯ä»ä¸€ä¸ªJSONå­—å…¸åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ - è½»è½»ä¸€ç¥å°±èƒ½çœ‹åˆ°å®ƒæ˜¯æ€æ ·å·¥ä½œçš„ã€‚\n\n    å½“ä½ å®Œæˆæ—¶ï¼Œä½ æ·»åŠ æ‰€æœ‰çš„ç¬”è®°åˆ°`self.notes`æ¥å£ä¸­ã€‚è¡¨è§†å›¾è¢«è®¾ç½®æ¥æ˜¾ç¤ºæ•°ç»„ä¸­çš„ä»»ä½•è®°å½•ã€‚\n\næ—¢ç„¶ä½ çš„è¡¨è§†å›¾æ•°æ®æºå·²ç»æ›´æ–°äº†ï¼Œä½ éœ€è¦é‡è½½è¡¨çš„æ•°æ®ã€‚æ— è®ºä½•æ—¶ä½ æ­£åœ¨å¤„ç†å¼‚æ­¥ç½‘ç»œè¯·æ±‚æ—¶ï¼Œä½ å¿…é¡»ä¿è¯æ›´æ–°UIKitåœ¨ä¸»çº¿ç¨‹ã€‚\n\næœºæ•çš„è¯»è€…å°†ä¼šæ³¨æ„åˆ°åœ¨ä¸Šè¿°ä»£ç ä¸­æ²¡æœ‰é”™è¯¯å¤„ç†ï¼›å‡å¦‚ä½ æ„Ÿè§‰ä½ åƒä¸€ä¸ªå“­ä¸§å¥³ï¼ˆå¤§å¤šæ•°Byte Club éƒ½æ˜¯ï¼ï¼‰æ·»åŠ ä¸€äº›ä»£ç åœ¨è¿™é‡Œï¼ˆåœ¨éšåçš„ä»£ç å—ä¸­ä½ å°†æ·»åŠ ï¼‰ï¼Œä»£ç åœ¨é”™è¯¯å’Œè­¦å‘Šç”¨æˆ·çš„æ—¶å€™å°†é‡è¯•ã€‚\n\næ„å»ºè¿è¡Œä½ çš„appï¼›ä½ åº”è¯¥çœ‹ä½ æ·»åŠ åˆ°ä½ çš„`Dropbox`æ–‡ä»¶å¤¹çš„æ–‡ä»¶æ˜¯å¦æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ï¼Œå°±åƒä¸‹é¢ä¾‹å­ä¸€æ ·æ˜¾ç¤ºï¼š\n\n![networking16](http://ww2.sinaimg.cn/mw690/64124373gw1ezzmc48hezj20aa0gojs1.jpg)\n\näº‹æƒ…æœ¬æ¥æ˜¯å°äº‹ï¼Œå½“æ—¶è¿™è¯æ˜äº†ä½ æ­£ç¡®çš„è°ƒç”¨äº†Dropbox APIã€‚\n\nä¸‹ä¸€æ­¥æ˜¯å‘å¸ƒæ¯”è¾ƒç„¶åå‘å…¶ä»–ä¿±ä¹éƒ¨æˆå‘˜å‘èµ·æŒ‘æˆ˜ï¼Œå†ä¸€æ¬¡ä½¿ç”¨Dropbox API å°±å½“ä½ æ˜¯ä¼ é€æœºæ„ã€‚\n\n##### POST Notes through the Dropbox API\n\nè½»ç‚¹å³ä¸Šè§’çš„ + å·ï¼Œä½ å°†çœ‹åˆ°ç¬”è®°add/editå±å¹•å‡ºç°ï¼Œå°±åƒä¸‹é¢æ¼”ç¤ºçš„ä¸€æ ·ï¼š\n\n![networking17](http://ww4.sinaimg.cn/mw690/64124373gw1ezzmc5whzij20a90gojru.jpg)\n\nå¼€å§‹çš„appå·²ç»å®‰è£…äº†DBFile æ¨¡å‹å¯¹è±¡åˆ°NoteDetailsViewControlleråœ¨`prepareForSegue:sender:`æ–¹æ³•ä¸­ï¼š\n\nåŠ å…¥ä½ ç¥ä¸€çœ¼è¿™ä¸ªæ–¹æ³•ï¼Œä½ å°†çœ‹åˆ°`NoteViewController`è¢«è®¾ç½®æˆ`NoteDetailsViewController`çš„ä»£ç†ã€‚è¿™ç§æ–¹æ³•ï¼Œ`NoteDetailsViewController`èƒ½å¤Ÿé€šçŸ¥`NoteViewController`å½“ç”¨æˆ·å®Œæˆç¼–è¾‘ä¸€ç¯‡ç¬”è®°æˆ–è€…å–æ¶ˆç¼–è¾‘ä¸€ç¯‡ç¬”è®°æ—¶ã€‚\n\næ‰“å¼€`NotesViewController.m `,æ·»åŠ ä¸‹é¢è¿™è¡Œåˆ°`prepareForSegue:sender:`ä¸­ï¼Œå°±åœ¨`showNote.delegate = self`è¡Œçš„åé¢ï¼›\n\n```objc\nshowNote.session = _session;\n```\n\n`NoteDetailsViewController`å·²ç»æœ‰ä¸€ä¸ª`NSURLSession`çš„æ¥å£åå­—å«åš`session`,å› æ­¤ä½ èƒ½å¤Ÿè®¾ç½®å®ƒåœ¨`prepareForSegue:sender: `è½½å…¥ä¹‹å‰ã€‚\n\nç°åœ¨detail view controllerå°†è·å¾—ç›¸åŒçš„`NSURLSession`,æ‰€æœ‰detail view controllerèƒ½å¤Ÿä½¿ç”¨å®ƒæ¥è¿›è¡ŒDropBox çš„APIè°ƒç”¨ã€‚\n\n`Cancel`å’Œ`Done`æŒ‰é’®å·²ç»å‘ˆç°åœ¨ä½ çš„appä¸­ï¼›ä½ åªéœ€è¦æ·»åŠ ä¸€äº›åœ¨ä»–ä»¬èƒŒåä¿å­˜æˆ–è€…å–æ¶ˆåœ¨å°šæœªå®Œå·¥çš„ç¬”è®°é€»è¾‘ã€‚\n\nåœ¨`NoteDetailsViewController.m`,æ‰¾åˆ°ä¸‹é¢è¿™ä¸€è¡Œåœ¨`(IBAction)done:(id)sender:`æ–¹æ³•ä¸­ï¼š\n\n```objc\n// - UPLOAD FILE TO DROPBOX - //\n    [self.delegate noteDetailsViewControllerDoneWithDetails:self];\n```\n\n...ç”¨ä¸‹é¢çš„æ›¿æ¢å®ƒï¼š\n\n```objc\n// 1\nNSURL  *url = [Dropbox uploadURLForPath: _note.path];\n\n// 2\nNSMutableURLRequest *request =\n  [[NSMutableURLRequest alloc] initWithURL:url];\n[request setHTTPMethod:@\"PUT\"];\n\n// 3\nNSData *noteContents = [_note.contents dataUsingEncoding:NSUTF8StringEncoding];\n\n// 4\nNSURLSessionUploadTask *uploadTask = [_session      \n  uploadTaskWithRequest:request                                                                  \n  fromData:noteContents                                                        \n  completionHandler:^(NSData *data,                                                                             \n  NSURLResponse *response,                                                                               \n  NSError *error)\n{   \n   NSHTTPURLResponse *httpResp = (NSHTTPURLResponse*) response;\n\n   if (!error && httpResp.statusCode == 200) {\n\n       [self.delegate noteDetailsViewControllerDoneWithDetails:self];\n   } else {\n       // alert for error saving / updating note\n   }\n}];\n\n// 5\n[uploadTask resume];\n```\n\nè¿™ä¸ªå®ç°äº†ä½ éœ€è¦ä¿å­˜å’Œåˆ†äº«ä½ çš„ç¬”è®°çš„æ‰€æœ‰äº‹æƒ…ã€‚å‡å¦‚ä»”ç»†è§‚å¯Ÿæ¯ä¸€å—çš„æ³¨é‡Šï¼Œä½ å°†å‘ç°åšäº†ä¸‹é¢çš„äº‹ï¼š\n\n1. ä¸ºäº†ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åˆ°Dropboxï¼Œä½ éœ€è¦å†æ¬¡ä½¿ç”¨æŸä¸ªAPI URLã€‚å°±åƒå…ˆå‰ä½ éœ€è¦ä¸€ä¸ªURLæ¥åˆ—å‡ºåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œæˆ‘å·²ç»æ„é€ äº†ä¸€ä¸ªè¾…åŠ©æ–¹æ³•æ¥ä¸ºä½ äº§ç”ŸURLã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨ã€‚\n2. ä¸‹ä¸€æ­¥æ˜¯ä½ çš„è€æœ‹å‹`NSMutableURLRequest`,æ–°çš„APIsèƒ½å¤ŸåŒæ—¶ä½¿ç”¨æ™®é€šçš„URLæ˜¯å’Œ`NSURLRequest`å¯¹è±¡ï¼Œä½†æ˜¯è¿™é‡Œä½ éœ€è¦å¯å˜çš„å½¢å¼æ¥ä½¿Dropbox APIè®©å®ƒçš„è¯·æ±‚å˜æˆPUTè¯·æ±‚ã€‚è®¾ç½®HTTPæ–¹æ³•ä½œä¸ºPUTå‘ä¿¡å·ç»™Dropboxæ¥è®©å®ƒä¸ºä½ åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚\n3. ä¸‹ä¸€æ­¥æ˜¯å°†æ–‡æœ¬ä»ä½ çš„`UITextView`ç¼–ç æˆNSDataå¯¹è±¡ã€‚\n4. æ—¢ç„¶ä½ å·²ç»åˆ›å»ºå¥½äº†è¯·æ±‚å’ŒNSDataæ•°æ®ï¼Œä½ ä¸‹ä¸€æ­¥å°±æ˜¯åˆ›å»ºä¸€ä¸ª`NSURLSessionUploadTask`ç„¶åè®¾ç½®`completion handler` block.ä¸€æ—¦æˆåŠŸï¼Œä½ å°±è°ƒç”¨ä»£ç†æ–¹æ³•` noteDetailsViewControllerDoneWithDetails:`æ¥å…³é—­å‘ˆç°çš„å†…å®¹ã€‚åœ¨ç”Ÿäº§çº§åˆ«çš„åº”ç”¨ä¸­ä½ å¯ä»¥å›ä¼ ä¸€ä¸ªæ–°çš„BDFileç»™ä»£ç†ç„¶ååŒæ­¥ä½ éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ã€‚ä¸ºäº†è¿™ä¸ªåº”ç”¨ï¼Œä½ åªéœ€è¦åˆ·æ–°`NotesViewController `ç”¨ä¸€ä¸ªç½‘ç»œè°ƒç”¨ã€‚\n5. å†æ¬¡æåˆ°ï¼Œæ‰€æœ‰çš„ä»»åŠ¡ä»¥æš‚åœçš„çŠ¶æ€è¢«åˆ›å»ºï¼Œæ‰€ä»¥ä½ å¿…é¡»è°ƒç”¨æ¢å¤æ¥å¯åŠ¨ä»–ä»¬ã€‚\n\næ„å»ºç„¶åè¿è¡Œä½ çš„Appï¼Œç‚¹å‡»ç¬”è®°æ ‡ç­¾ä¸Šçš„+å·ã€‚åœ¨`challenge name`å­—æ®µä¸Šè¾“å…¥ä½ çš„åå­—ï¼Œè¾“å…¥ä¸€äº›æ–‡æœ¬åœ¨`note`å­—æ®µæƒ³Rayå‘å¸ƒä¸€ä»½æŒ‘æˆ˜ä¹¦ï¼Œå’Œä¸‹é¢çš„ä¾‹å­ç›¸ä¼¼ï¼š\n\n![networking17](http://ww3.sinaimg.cn/mw690/64124373gw1f008ujjji0j20aa0godgy.jpg)\n\nå½“ä½ æ¸…ç‚¹`Done`æ—¶ï¼Œ`NoteViewController`å°†è¿”å›å¹¶ä¸”ç»™ä½ åˆ—å‡ºæ–°çš„ç¬”è®°åƒä¸‹é¢æ˜¾ç¤ºçš„é‚£æ ·ï¼š\n\n![networking18](http://ww3.sinaimg.cn/mw690/64124373gw1f008ukjg7bj20aa0go3z4.jpg)\n)\n\nä½ å·²ç»æ­£å¼çš„ç»™Rayä¸‹å‘æŒ‘æˆ˜ä¹¦ï¼›ç„¶è€Œï¼Œä»–æœ‰æœ‹å‹åœ¨éå¸¸é«˜çš„ä½ç½®æ‰€æœ‰ä½ æœ€å¥½å°½åŠ›å®Œæˆè¿™åœºæ¯”èµ›ã€‚\n\nä½†æ˜¯è¿™é‡Œæœ‰ä¸€æ¡éå¸¸é‡è¦çš„æ¶ˆæ¯é—æ¼äº†ã€‚ä½ èƒ½å‘Šè¯‰æˆ‘æ˜¯ä»€ä¹ˆä¹ˆï¼Ÿ\n\nè½»ç‚¹ç¬”è®°åŒ…å«çš„æŒ‘æˆ˜ï¼›`NoteDetailsViewController`è‡ªå·±å‘ˆç°ï¼Œå½“æ—¶ç¬”è®°çš„å†…å®¹ç¡®å®ç©ºç™½çš„ã€‚\n\nRayå¹¶ä¸ä¼šæ‰¾åˆ°ä½ çš„å‘çš„éå¸¸æœ‰å¨èƒçš„æŒ‘æˆ˜å‡å¦‚ä»–æ²¡æœ‰è¯»çš„è¯ï¼\n\nç°åœ¨ï¼Œappåªæ˜¯è°ƒç”¨`Dropbox`å…ƒæ•°æ®APIæ¥æ£€ç´¢æ–‡ä»¶åˆ—è¡¨ã€‚ä½ ä¹Ÿéœ€è¦æ·»åŠ ä¸€äº›ä»£ç æ¥æŠ“å–ç¬”è®°çš„å†…å®¹ã€‚\n\næ‰“å¼€`NoteDetailsViewController.m`,ç”¨ä¸‹é¢çš„å®ç°æ›¿æ¢ç©ºç™½çš„`retreiveNoteText`çš„å®ç°ï¼š\n\n```objc\n-(void)retreiveNoteText\n{\n    // 1\n    NSString  *fileApi =\n      @\"https://api-content.dropbox.com/1/files/dropbox\";\n    NSString  *escapedPath = [ _note.path\n      stringByAddingPercentEscapesUsingEncoding:\n      NSUTF8StringEncoding];\n\n    NSString  *urlStr = [NSString stringWithFormat: @\"%@/%@\",\n      fileApi,escapedPath];\n\n    NSURL  *url = [NSURL URLWithString: urlStr];\n\n    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;\n\n    // 2\n    [[ _session dataTaskWithURL:url completionHandler:^(NSData  *data, NSURLResponse  *response, NSError  *error) {\n\n        if (!error) {\n            NSHTTPURLResponse  *httpResp = (NSHTTPURLResponse*) response;\n            if (httpResp.statusCode == 200) {\n                // 3\n                NSString  *text =\n                 [[NSString alloc]initWithData:data\n                   encoding:NSUTF8StringEncoding];\n                dispatch_async(dispatch_get_main_queue(), ^{\n                    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;\n                    self.textView.text = text;\n                });\n\n            } else {\n                // HANDLE BAD RESPONSE //\n            }\n        } else {\n            // ALWAYS HANDLE ERRORS :-] //\n        }\n        // 4\n    }] resume];\n}\n```\n\nä¸Šé¢åœ¨ç¬”è®°ä¸­çš„ä»£ç ï¼ˆæ²¡æœ‰é”™è¯¯æ£€æŸ¥ï¼‰ä¸‹é¢æ¥è§£é‡Šï¼š\n\n1. è®¾ç½®è¯·æ±‚çš„è·¯å¾„å’Œä½ æœŸæœ›æ£€ç´¢çš„æ–‡ä»¶çš„URLåœ°å€ï¼›/æ–‡ä»¶çš„ç«¯ç‚¹åœ¨Dropbox APIä¸­å°†ä¼šè¿”å›ç»™ä½ ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ã€‚\n2. ç”¨æŒ‡å‘æ„Ÿå…´è¶£çš„æ–‡ä»¶çš„URLåˆ›å»ºæ•°æ®ä»»åŠ¡ã€‚è¿™ä¸ªè°ƒç”¨åº”è¯¥å¼€å§‹ï¼Œåªè¦ä½ çºµè§ˆæ•´ä¸ªappä½ ä¼šç›¸å½“ç†Ÿæ‚‰ã€‚\n3. å‡å¦‚ä½ å“åº”çš„ä»£ç è¡¨æ˜æ‰€æœ‰çš„éƒ½æ˜¯å¥½çš„ï¼Œåœ¨ä¸»çº¿ç¨‹ç”¨ä½ åœ¨å…ˆå‰çš„æ­¥éª¤ä¸­æ£€ç´¢åˆ°çš„æ–‡ä»¶å†…å®¹è®¾ç½®textViewã€‚è®°ä½ï¼ŒUIæ›´æ–°å¿…é¡»åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ã€‚\n4. ä¸€æ—¦è¿™ä¸ªä»»åŠ¡è¢«åˆå§‹åŒ–ï¼Œè°ƒç”¨æ¢å¤ã€‚è¿™é‡Œæœ‰å†™ä¸ä¸€æ ·çš„æ–¹æ³•å’Œä»¥å‰çš„ç›¸æ¯”ï¼Œå½“æ¢å¤è¢«ç›´æ¥è°ƒç”¨æ—¶åœ¨ä»»åŠ¡è¿˜æ²¡æœ‰æŒ‡æ´¾æ—¶ã€‚\n\næ„å»ºè¿è¡Œä½ çš„Appï¼Œåœ¨åˆ—è¡¨ä¸­å¯¹ä½ çš„æŒ‘æˆ˜è½»ç‚¹ï¼Œå†…å®¹å°†ç›´æ¥æ­£ç¡®çš„æ˜¾ç¤ºåœ¨viewä¸­ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š\n\n![networking19](http://ww3.sinaimg.cn/mw690/64124373gw1f008ulhco4j20a90got9d.jpg)\n\nä½ å¯ä»¥æ‰®æ¼”Rayç„¶åé€šè¿‡å‘ç¬”è®°ä¸­è¾“å…¥æ–‡æœ¬å“åº”è¿™ä¸ªæŒ‘æˆ˜ï¼›æ–‡ä»¶å°†å¾ˆå¿«æ›´æ–°å½“ä½ è½»ç‚¹`Done`ã€‚\n\n#### ä½¿ç”¨`NSURLSessionTask`ä»£ç†å‘é€ç…§ç‰‡\n\nä½ å·²ç»çœ‹åˆ°æ€æ ·ä½¿ç”¨`NSURLSession`å¼‚æ­¥ä¾¿åˆ©æ„é€ æ–¹æ³•ã€‚ä½†æ˜¯å‡å¦‚ä½ æƒ³æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨æ–‡ä»¶ä¼ è¾“ä¸Šï¼Œä¾‹å¦‚ä¸Šä¼ ä¸€ä¸ªå¤§æ–‡ä»¶å¹¶ä¸”æ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡æ€ä¹ˆæ ·ï¼Ÿ\n\nå¯¹äºè¿™ç§å¼‚æ­¥çš„ï¼Œè€—æ—¶ä»»åŠ¡ç±»å‹ä½ éœ€è¦å®ç°`NSURLSessionTaskDelegate`åè®®æ–¹ã€‚é€šè¿‡å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œä½ èƒ½å¤Ÿæ£€ç´¢å›è°ƒå½“ä¸€ä¸ªä»»åŠ¡æ¥æ”¶åˆ°æ•°æ®å’Œå®Œæˆæ¥æ”¶æ•°æ®æ—¶ã€‚\n\nä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°`PanoPhotos`æ ‡ç­¾æ˜¯ç©ºçš„å½“ä½ å¯åŠ¨Appçš„æ—¶å€™ã€‚ç„¶è€Œï¼Œ`Byte Club`ç»„ç»‡çš„åˆ›åŠæˆå‘˜å·²ç»æ…·æ…¨çš„æä¾›äº†ä¸€äº›ä»–ä»¬è‡ªå·±çš„å…¨æ™¯ç…§ç‰‡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¡«å……ä½ çš„appã€‚\n\nä¸‹è½½è¿™äº› æˆ‘ä»¬ä¸ºä½ æ”¾åœ¨ä¸€èµ·çš„[å…¨æ™¯ç…§ç‰‡](http://cdn4.raywenderlich.com/downloads/ByteClub_photos.zip)ã€‚è§£å‹æ–‡ä»¶ï¼Œæ‹·è´åˆ°ä½ çš„appåœ¨Dropboxç›®å½•ä¸‹çš„ç…§ç‰‡ç›®å½•ã€‚ä½ æ–‡ä»¶å¤¹çš„å†…å®¹åº”è¯¥å’Œä¸‹é¢ä¸€æ ·ï¼š\n\n![networking20](http://ww3.sinaimg.cn/mw690/64124373gw1f00a5m7rhhj20go06ddhi.jpg)\n\nDropboxå’Œæ ¸å¿ƒAPIå¯ä»¥æä¾›ç…§ç‰‡çš„ç¼©ç•¥å›¾ï¼›ä½¿ç”¨ä¸€ä¸ª UITableView cellè¿™å¬èµ·æ¥æƒ³ä¸€ä»¶éå¸¸å®Œç¾çš„äº‹ã€‚\n\næ‰“å¼€` PhotosViewController.m`ç„¶ååœ¨`â€œGO GET THUMBNAILS`æ³¨é‡Šåé¢æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°`tableView:cellForRowAtIndexPath: `\n\n```objc\n[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;\nNSURLSessionDataTask *dataTask = [_session dataTaskWithURL:url\n  completionHandler:^(NSData  *data, NSURLResponse  *response,\n  NSError  *error) {\n    if (!error) {\n      UIImage  *image = [[UIImage alloc] initWithData:data];\n      photo.thumbNail = image;\n      dispatch_async(dispatch_get_main_queue(), ^{\n        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;\n        cell.thumbnailImage.image = photo.thumbNail;\n      });\n    } else {\n      // HANDLE ERROR //\n    }\n}];\n[dataTask resume];\n```\n\nä¸Šé¢çš„ä»£ç æ˜¾ç¤ºäº†ç…§ç‰‡çš„ç¼©ç•¥å›¾å›¾åœ¨è¡¨è§†å›¾çš„cellä¸­ã€‚ã€‚ã€‚æˆ–è€…è‡³å°‘å®ƒä¼šæ˜¯ï¼Œå‡å¦‚`_photoThumbnails`ç°åœ¨ä¸æ˜¯ç©ºçš„è¯ã€‚\n\næ‰¾åˆ°`refreshPhotos`ç”¨ä¸‹é¢çš„å®ç°æ›¿æ¢ï¼š\n\n```objc\n- (void)refreshPhotos\n{\n    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];\n    NSString  *photoDir = [NSString stringWithFormat:@\"https://api.dropbox.com/1/search/dropbox/%@/photos?query=.jpg\",appFolder];\n    NSURL  *url = [NSURL URLWithString:photoDir];\n\n    [[ _session dataTaskWithURL:url completionHandler:^(NSData\n       *data, NSURLResponse  *response, NSError  *error) {\n        if (!error) {\n            NSHTTPURLResponse  *httpResp =\n             (NSHTTPURLResponse*) response;\n            if (httpResp.statusCode == 200) {\n\n                NSError  *jsonError;\n                NSArray  *filesJSON = [NSJSONSerialization  \n                  JSONObjectWithData:data                                                                     \n                  options:NSJSONReadingAllowFragments                                                                           \n                  error:&jsonError];\n                NSMutableArray  *dbFiles =\n                  [[NSMutableArray alloc] init];\n\n                if (!jsonError) {\n                    for (NSDictionary  *fileMetadata in\n                      filesJSON) {\n                        DBFile  *file = [[DBFile alloc]\n                          initWithJSONData:fileMetadata];\n                        [dbFiles addObject:file];\n                    }\n\n                    [dbFiles sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {\n                        return [obj1 compare:obj2];\n                    }];\n\n                     _photoThumbnails = dbFiles;\n\n                    dispatch_async(dispatch_get_main_queue(), ^{\n                        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];\n                        [self.tableView reloadData];\n                    });\n                }\n            } else {\n                // HANDLE BAD RESPONSE //\n            }\n        } else {\n            // ALWAYS HANDLE ERRORS :-] //\n        }\n    }] resume];\n}\n```\n\nè¿™ä¸ªå’Œä½ æ—©æœŸè½½å…¥æŒ‘æˆ˜ç¬”è®°æ—¶å†™çš„ä»£ç å¾ˆåƒã€‚è¿™æ¬¡ï¼ŒAPIè°ƒç”¨æ¥æŸ¥æ‰¾åœ¨`photos`ç›®å½•çš„å†…å®¹ï¼Œå¹¶ä¸”åªä¼šä»¥.jpgæ‹“å±•çš„æ–‡ä»¶ã€‚\n\næ—¢ç„¶`_photoThumbnails`æ•°ç»„å·²ç»å¡«å……å¥½äº†ï¼Œç¼©ç•¥å›¾å°†å‡ºç°åœ¨è¡¨è§†å›¾ä¸­å¹¶ä¸”å¼‚æ­¥æ›´æ–°ã€‚\n\næ„å»ºè¿è¡Œä½ çš„appï¼Œç„¶ååˆ‡æ¢åˆ°`PanoPhotos`æ ‡ç­¾ï¼›ç¼©ç•¥å›¾å°†è½½å…¥å¹¶ä¸”åƒä¸‹é¢è¿™æ ·å‡ºç°ï¼š\n\nï¼[networking21](http://ww2.sinaimg.cn/mw690/64124373gw1f00ahhaw20j20a90go0uz.jpg)\n\nç…§ç‰‡çœ‹èµ·æ¥éå¸¸çš„æ£’--åªæ˜¯è¯·å½“å¿ƒMatthijså®¶æ’•è£‚ä»£ç çš„çŒ«ğŸ±ï¼\n\n#### ä¸Šä¼ ä¸€å¼ å…¨æ™¯ç…§ç‰‡\n\nä½ çš„appèƒ½å¤Ÿä¸‹è½½ç›¸ç‰‡ï¼Œå¦‚æœå®ƒä¹Ÿèƒ½ä¸Šä¼ ç…§ç‰‡å¹¶ä¸”æ˜¾ç¤ºä¸Šä¼ è¿›åº¦çš„è¯å°±éå¸¸æ£’äº†ã€‚\n\nä¸ºäº†è·Ÿè¸ªä¸Šä¼ çš„è¿›åº¦ï¼Œ`PhotosViewController`å¿…é¡»æˆä¸º`NSURLSessionDelegate`å’Œ`NSURLSessionTaskDelegate`åè®®çš„ä»£ç†ï¼Œä»¥ä¾¿ä½ èƒ½æ”¶åˆ°è¿›åº¦å›è°ƒã€‚\n\nä¿®æ”¹åœ¨`PhotosViewController.m`ä¸­`PhotosViewController`çš„æ¥å£å£°æ˜ï¼Œæ·»åŠ `NSURLSessionTaskDelegate`,åƒä¸‹é¢è¿™æ ·ï¼š\n\n```objc\n @ interface PhotosViewController ()UITableViewDelegate, UITableViewDataSource, UIImagePickerControllerDelegate, UINavigationControllerDelegate, NSURLSessionTaskDelegate>\n```\n\nä¸‹ä¸€æ­¥ï¼Œæ·»åŠ ä¸‹é¢çš„ç§æœ‰æ¥å£ï¼š\n\n```objc\n@property (nonatomic, strong)\n  NSURLSessionUploadTask *uploadTask;\n```\n\nä¸Šé¢çš„æŒ‡é’ˆå¼•ç”¨äº†ä»»åŠ¡å¯¹è±¡ï¼›é€šè¿‡å“ªç§æ–¹å¼ï¼Œä½ å°±å¯ä»¥æ¥å…¥åˆ°å¯¹è±¡çš„æˆå‘˜ä¸­æ¥è·Ÿè¸ªä¸Šä¼ ä»»åŠ¡çš„è¿›åº¦äº†ã€‚\n\nå½“ç”¨æˆ·é€‰æ‹©ä¸€å¼ å›¾ç‰‡ä¸Šä¼ æ—¶ï¼Œ`didFinishPickingMediaWithInfo`è°ƒç”¨`uploadImage:`æ–¹æ³•æ¥æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚\nç°åœ¨ï¼Œé‚£ä¸ªæ–¹æ³•ç©ºäº†-è¿™æ˜¯ä½ çš„å·¥ä½œè®©å®ƒä¸°æ»¡èµ·æ¥ã€‚\n\næ›¿æ¢`uploadImage: `ç”¨ä¸‹é¢çš„ä»£ç ï¼š\n\n```objc\n- (void)uploadImage:(UIImage*)image\n{\n    NSData  *imageData = UIImageJPEGRepresentation(image, 0.6);\n\n    // 1\n    NSURLSessionConfiguration  *config = [NSURLSessionConfiguration defaultSessionConfiguration];\n    config.HTTPMaximumConnectionsPerHost = 1;\n    [config setHTTPAdditionalHeaders:@{@\"Authorization\": [Dropbox apiAuthorizationHeader]}];\n\n    // 2\n    NSURLSession  *upLoadSession = [NSURLSession sessionWithConfiguration:config delegate:self delegateQueue:nil];\n\n    // for now just create a random file name, dropbox will handle it if we overwrite a file and create a new name..\n    NSURL  *url = [Dropbox createPhotoUploadURL];\n\n    NSMutableURLRequest  *request = [[NSMutableURLRequest alloc] initWithURL:url];\n    [request setHTTPMethod:@\"PUT\"];\n\n    // 3\n    self.uploadTask = [upLoadSession uploadTaskWithRequest:request fromData:imageData];\n\n    // 4\n    self.uploadView.hidden = NO;\n    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];\n\n    // 5\n    [ _uploadTask resume];\n}\n```\n\nä¸‹é¢æ˜¯ä¸Šé¢çš„ä»£ç åšçš„äº‹ï¼š\n\n1. èµ·å…ˆï¼Œä½ ä½¿ç”¨è®¾ç½®åœ¨`initWithCoder`çš„ä¼šè¯å’Œç›¸å…³çš„ä¾¿åˆ©æ–¹æ³•æ¥åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ ä½¿ç”¨ä¸€ä¸ª`NSURLSessionConfiguration `,å®ƒåªå…è®¸ä¸€ä¸ªè¿æ¥è¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼Œå› ä¸ºä½ ä¸Šä¼ è¿›åº¦å¤„ç†ä¸€æ¬¡å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚\n2. ä¸Šä¼ å’Œä¸‹è½½ä»»åŠ¡æŠ¥å‘Šä¿¡æ¯é€šè¿‡å®ƒä»¬çš„ä»£ç†è¿”å›ï¼›ä½ å°†ç®€çŸ­çš„å®ç°ã€‚\n3. è¿™é‡Œä½ è®¾ç½®äº†`uploadTask`æ¥å£ä½¿ç”¨ä»`UIImagePicker`è·å¾—çš„JPEGå›¾ç‰‡ã€‚\n4. ä¸‹ä¸€æ­¥ï¼Œä½ æ˜¾ç¤º`UIProgressView`è®©å®ƒéšè—åœ¨`PhotosViewController`å†…éƒ¨ã€‚\n5. å¼€å§‹ä»»åŠ¡--é¢ï¼ŒæŠ±æ­‰ï¼Œæ˜¯æ¢å¤ä»»åŠ¡ã€‚\n\næ—¢ç„¶ä»£ç†å·²ç»è®¾ç½®äº†ï¼Œä½ å°±å¯ä»¥å®ç°`NSURLSessionTaskDelegate`æ–¹æ³•æ¥æ›´æ–°è¿›åº¦è§†å›¾ã€‚\n\næ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°` PhotosViewController.m`æ–‡ä»¶æœ«å°¾ï¼š\n\n```objc\n#pragma mark - NSURLSessionTaskDelegate methods\n\n- (void)URLSession:(NSURLSession *)session\n  task:(NSURLSessionTask *)task\n  didSendBodyData:(int64_t)bytesSent\n  totalBytesSent:(int64_t)totalBytesSent\n  totalBytesExpectedToSend:(int64_t)totalBytesExpectedToSend\n{\n    dispatch_async(dispatch_get_main_queue(), ^{\n        [ _progress setProgress:\n          (double)totalBytesSent /\n          (double)totalBytesExpectedToSend animated:YES];\n    });\n}\n```\n\nä¸Šé¢çš„ä»£ç†æ–¹æ³•å°†å®šæœŸæŠ¥å‘Šä¿¡æ¯ç»™è°ƒç”¨è€…å…³äºä¸Šä¼ ä»»åŠ¡çš„ä¿¡æ¯ã€‚å®ƒåŒæ—¶ä¼šæ›´æ–°`UIProgressView`ï¼ˆ _progressï¼‰çš„è¿›åº¦ä»¥ä¾¿æ˜¾ç¤º totalBytesSent/totalBytesExpectedToSend,è¿™æ¯”æ˜¾ç¤ºä¸€ä¸ªå®Œæˆçš„ç™¾åˆ†æ¯”è·Ÿæœ‰æ„ä¹‰ï¼ˆä¹Ÿæ›´æå®¢ï¼‰ã€‚\n\nå‰©ä¸‹å”¯ä¸€çš„äº‹å°±æ˜¯å½“ä¸Šä¼ ä»»åŠ¡ç»“æŸæ—¶æŒ‡ç¤ºä¸€ä¸‹ã€‚æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°` PhotosViewController.m`æ–‡ä»¶æœ«å°¾ï¼š\n\n```objc\n- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error\n{\n    // 1\n    dispatch_async(dispatch_get_main_queue(), ^{\n        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];\n         _uploadView.hidden = YES;\n        [ _progress setProgress:0.5];\n    });\n\n    if (!error) {\n        // 2\n        dispatch_async(dispatch_get_main_queue(), ^{\n            [self refreshPhotos];\n        });\n    } else {\n        // Alert for error\n    }\n}\n```\n\nè¿™é‡Œæ²¡æœ‰å¾ˆå¤šä»£ç ï¼Œä½†æ˜¯å®ƒæ‰§è¡Œäº†ä¸¤é¡¹éå¸¸é‡è¦çš„ä»»åŠ¡ï¼š\n\n1. æ‰“å¼€ç½‘ç»œæŒ‡ç¤ºå™¨ï¼Œç„¶åéšè—`_uploadView`ä½œä¸ºä¸Šä¼ å®Œæˆçš„ä¸€ç‚¹ç‚¹æ¸…ç†å·¥ä½œã€‚\n2. åˆ·æ–°`PhotosViewController`ä»¥ä¾¿åŒ…å«ä½ åˆšåˆšä¸Šä¼ çš„ç…§ç‰‡ï¼Œç”±äºdemo appæ˜¯ä¸èƒ½è¿›è¡Œä»»ä½•æœ¬åœ°å‚¨å­˜çš„ä¸Šä¼ \nã€‚åœ¨ä¸€ä¸ªçœŸæ­£çš„appä¸­ï¼Œä½ åº”è¯¥æŠŠå›¾ç‰‡åœ¨æœ¬åœ°è¿›è¡Œå‚¨å­˜å’Œç¼“å­˜ã€‚\n\næ„å»ºè¿è¡Œä½ çš„appï¼Œå¯¼èˆªåˆ°`PanoPhotos`æ ‡ç­¾ï¼Œç‚¹å‡»ç…§ç›¸å›¾æ ‡é€‰æ‹©ä¸€å¼ ç…§ç‰‡ã€‚\n\n![networking22](http://ww4.sinaimg.cn/mw690/64124373gw1f00bn13wq4j20di09ojs2.jpg)\n\n> æ³¨æ„ï¼šå‡å¦‚ä½ è¯´ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•appï¼Œå¾ˆæ˜¾ç„¶ä½ ä¸èƒ½ç”¨ä½ çš„Macæ‹ç…§ï¼Œæ‰€æœ‰ä»…ä»…æ˜¯æ‹·è´ä¸€å¼ å…¨æ™¯ç…§ç‰‡\nç»™æ¨¡æ‹Ÿå™¨ç„¶åä¸Šä¼ ã€‚è¿™æ ·åšï¼Œå¯ä»¥ç¡®ä¿æ²¡æœ‰å…¶ä»–çš„Xcodeå·¥ç¨‹ç°åœ¨è¿æ¥åˆ°è¿™ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œåœ¨Xcodeä¸­é€‰æ‹© **Xcode   Open Developer Tool   iOS Simulator**ã€‚\n\n> ä»Finderä¸­æ‹–æ‹½ä¸€å¼ å…¨æ™¯ç…§ç‰‡å¸¦æ¨¡æ‹Ÿå™¨ä¸­ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­å›¾ç‰‡å°†ä¼šåœ¨Safariä¸­æ‰“å¼€ã€‚é•¿æŒ‰å›¾ç‰‡ç„¶åä¿å­˜å›¾ç‰‡åˆ°å›¾åº“ä¸­ã€‚\n\nåœ¨é€‰æ‹©ä¸€å¼ å›¾ç‰‡åä¸Šä¼ ï¼ŒuploadViewæ˜¾ç¤ºåœ¨å±å¹•çš„ä¸­å¤®ï¼Œå¹¶ä¸”å¸¦æœ‰ä¸Šä¼ è¿›åº¦ï¼Œä¹¡ä¸‹é¢è¿™ä¸€æ ·æ˜¾ç¤ºï¼š\n\nï¼[networking23](http://ww1.sinaimg.cn/mw690/64124373gw1f00bn4hmqwj209e0gomzu.jpg)\n\nä½ å¯èƒ½æ³¨æ„åˆ°ä¸€å¼ å›¾ç‰‡ä¸Šä¼ éœ€è¦èŠ±ä¸€äº›æ—¶é—´ç”±äºä¸Šä¼ ä»»åŠ¡è®¾ç½®äº†`better quality`ç¼©æ”¾å› å­ã€‚å¯¹äºé‚£äº›Aç±»æ€§æ ¼çš„äººï¼Œä½ åº”è¯¥æä¾›ä¸€ä¸ªå–æ¶ˆå‡½æ•°å‡å¦‚ä¸Šä¼ èŠ±è´¹å¤ªé•¿çš„æ—¶é—´ã€‚\n\nå–æ¶ˆæŒ‰é’®åœ¨`uploadView`å·²ç»è¢«å°è£…èµ·æ¥åœ¨æ•…äº‹æ¿ä¸­ï¼Œæ‰€æœ‰ä½ åªéœ€å®ç°æ¸…æ¥šé€»è¾‘æ¥æ€æ­»ä¸‹è½½æ“ä½œå°±è¡Œã€‚\n\nç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢` PhotosViewController.m`çš„`cancelUpload: `ï¼š\n\n```objc\n- (IBAction)cancelUpload:(id)sender {    \n    if ( _uploadTask.state == NSURLSessionTaskStateRunning) {\n        [ _uploadTask cancel];\n    }\n}\n```\n\nåœ¨è¿™ç±»ä½ ä¼šçœ‹åˆ°ï¼Œå–æ¶ˆä¸€ä¸ªä»»åŠ¡ç›¸å½“ç®€å•å°±æ˜¯è°ƒç”¨ä¸€ä¸ªå–æ¶ˆæ–¹æ³•ã€‚\n\nç°åœ¨æ„å»ºè¿è¡Œä½ çš„appï¼Œé€‰æ‹©ä¸€å¼ ç…§ç‰‡ä¸Šä¼ ç„¶åç‚¹å‡»`Cancel`ã€‚å›¾ç‰‡ä¸Šä¼ å°†ä¼šåœæ­¢å¹¶ä¸”`uploadView`å°†ä¼šè¢«éšè—ã€‚\n\nå°±è¿™æ ·--`Byte Club`å®Œæˆäº†ï¼\n\n#### ä½•å»ä½•ä»ï¼Ÿ\n\nè¿™é‡Œæ˜¯[å®Œæˆçš„å·¥ç¨‹](http://cdn5.raywenderlich.com/downloads/ByteClub_Completed.zip)åœ¨è¿™ä¸ª`NSURLSession`æ•™ç¨‹ä¸­ã€‚\n\nå‡å¦‚ä½ åšåˆ°è¿™ä¸€æ­¥ï¼Œæ­å–œä½ å¯ä»¥äº«å—åˆ°`Byte Club`çš„æ—¶å…‰ï¼ä¸è¦å‘Šè¯‰ä»»ä½•`Android`çš„å°ä¼™ä¼´ä»¬ï¼ :]\nä½ ç°åœ¨èƒ½å¤Ÿå¤„ç†åœ¨ä½ appéœ€è¦çš„ä»»ä½•ç½‘ç»œä»»åŠ¡äº†ã€‚\n\nå‡å¦‚ä½ å–œæ¬¢è¿™ä¸ªè¯¾ç¨‹ï¼Œä½ å¯èƒ½æƒ³è¦æŸ¥é˜…æˆ‘ä»¬çš„æ–°ä¹¦[ iOS 7 by Tutorials](http://www.raywenderlich.com/?page_id=48020),è¿™æ˜¯è¿™æœ¬ä¹¦çš„ä¸€ä¸ªç®€ç•¥ç‰ˆæœ¬ï¼Œè¿™æœ¬ä¹¦å‡ ä¹æ¶µç›–äº†åœ¨iOS 7ä¸­æœ€æ–°å’Œæœ€å¤šçš„APIsï¼Œè¿™äº›ä½ åº”è¯¥æ¸…æ¥šçš„çŸ¥é“ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ã€‚\n\næˆ‘å‡ ä¹å¿˜è®°äº†ã€‚ã€‚ã€‚\n\n    /slap <you the reader> have been slapped around a bit with a large trout.\n\nï¼ˆä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆ heheï¼ğŸ˜„ï¼‰\n\nå‡å¦‚ä½ æœ‰ä»»ä½•é—®é¢˜æˆ–è€…è¯„è®ºå…³äºè¿™ä¸ªæ•™ç¨‹æˆ–è€…`NSURLSession`,è¯·åŠ å…¥åˆ°ä¸‹é¢çš„è®ºå›è®¨è®ºï¼\n\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [ä» NSURLConnection åˆ° NSURLSession](http://objccn.io/issue-5-4/)\n* [NSURLSession Tutorial](http://www.raywenderlich.com/51127/nsurlsession-tutorial)\n\n\nè¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç¿»è¯‘","ç½‘ç»œ"],"categories":["iOS"]},{"title":"iOSçº¿ç¨‹å®‰å…¨-é”","url":"/2016/01/14/2016-01-14-iosxian-cheng-an-quan-suo/","content":"\n## Objectiveï¼C\n\n### **ä½¿ç”¨ @synchronized ç±»å®ç°é”**\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n// çº¿ç¨‹A\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    @synchronized(person) {\n        [person personA];\n        [NSThread sleepForTimeInterval:3];\n        // çº¿ç¨‹ä¼‘çœ 3ç§’\n    }\n});\n// çº¿ç¨‹B\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    @synchronized(person) {\n        [person personB];\n    }\n});\n\n```\n\n### **ä½¿ç”¨ NSRecursiveLock ç±»å®ç°é”**\n> é€’å½’é”ï¼Œé€’å½’æˆ–å¾ªç¯æ–¹æ³•æ—¶ä½¿ç”¨æ­¤æ–¹æ³•å®ç°é”ï¼Œå¯é¿å…æ­»é”ç­‰é—®é¢˜\n\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n\n// åˆ›å»ºé”å¯¹è±¡\nNSRecursiveLock *theLock = [[NSRecursiveLock alloc] init];\n\n// åˆ›å»ºé€’å½’æ–¹æ³•\nstatic void (^testCode)(int);\ntestCode = ^(int value) {\n    [theLock tryLock];\n    if (value > 0)  {\n        [person personA];\n        [NSThread sleepForTimeInterval:1];\n        testCode(value - 1);\n    }\n    [theLock unlock];\n};\n\n//çº¿ç¨‹A\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    testCode(5);\n});\n\n//çº¿ç¨‹B\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    [theLock lock];\n    [person personB];\n    [theLock unlock];\n});\n\n```\n\n### **ä½¿ç”¨ NSConditionLockï¼ˆæ¡ä»¶é”ï¼‰ç±»å®ç°é”**\n> ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥æŒ‡å®šï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶çš„æ—¶å€™æ‰å¯ä»¥è§£é”\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n// åˆ›å»ºæ¡ä»¶é”\nNSConditionLock *conditionLock = [[NSConditionLock alloc] init];\n// çº¿ç¨‹A\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    [conditionLock lock];\n    [person personA];\n    [NSThread sleepForTimeInterval:5];\n    [conditionLock unlockWithCondition:10];\n });\n// çº¿ç¨‹B\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    [conditionLock lockWhenCondition:10];\n    [person personB];\n    [conditionLock unlock];\n });\n\n```\n\n### **NSDistributedLockï¼ˆåˆ†å¸ƒå¼é”ï¼‰**\n> åœ¨iOSä¸­ä¸éœ€è¦ç”¨åˆ°ï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æœ¬æ–‡ä¸ä½œä»‹ç»ï¼Œè¿™é‡Œå†™å‡ºæ¥åªæ˜¯æƒ³è®©å¤§å®¶çŸ¥é“æœ‰è¿™ä¸ªé”å­˜åœ¨ã€‚\nå¦‚æœæƒ³è¦å­¦ä¹ NSDistributedLockçš„è¯ï¼Œä½ å¯ä»¥åˆ›å»ºMAC OSçš„é¡¹ç›®è‡ªå·±æ¼”ç»ƒï¼Œæ–¹æ³•è¯·è‡ªè¡ŒGoogleï¼Œè°¢è°¢\n\n## Cè¯­è¨€\n\n### **ä½¿ç”¨ pthread_mutex_t å®ç°é”**\n> æ³¨æ„ï¼šå¿…é¡»åœ¨å¤´æ–‡ä»¶å¯¼å…¥ï¼š#import <pthread.h>\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n// åˆ›å»ºé”å¯¹è±¡\n__block pthread_mutex_t mutex;\npthread_mutex_init(&mutex, NULL);\n// çº¿ç¨‹A\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    pthread_mutex_lock(&mutex);\n    [person personA];\n    [NSThread sleepForTimeInterval:5];\n    pthread_mutex_unlock(&mutex);\n});\n// çº¿ç¨‹B\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    pthread_mutex_lock(&mutex);\n    [person personB];\n    pthread_mutex_unlock(&mutex);\n});\n\n```\n### **ä½¿ç”¨ GCD å®ç°â€œé”â€(ä¿¡å·é‡ï¼‰**\n> GCDæä¾›ä¸€ç§ä¿¡å·çš„æœºåˆ¶ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åˆ›å»ºâ€œé”â€\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n\n// åˆ›å»ºå¹¶è®¾ç½®ä¿¡é‡\ndispatch_semaphore_t semaphore = dispatch_semaphore_create(1);\n\n// çº¿ç¨‹A\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n    [person personA];\n    [NSThread sleepForTimeInterval:5];\n    dispatch_semaphore_signal(semaphore);\n});\n\n// çº¿ç¨‹B\ndispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n    [person personB];\n    dispatch_semaphore_signal(semaphore);\n});\n\n```\n\næˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ä»£ç ã€‚`dispatch_semaphore_wait`æ–¹æ³•æ˜¯æŠŠä¿¡å·é‡åŠ 1ï¼Œ`dispatch_semaphore_signal`\næ˜¯æŠŠä¿¡å·é‡å‡1ã€‚\n\næˆ‘ä»¬æŠŠä¿¡å·é‡å½“ä½œæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“è®¡æ•°å™¨æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°æ—¶ï¼Œæ‰€æœ‰é€šè¿‡å®ƒçš„çº¿ç¨‹éƒ½åº”è¯¥æŠŠè¿™ä¸ªæ•´æ•°å‡1ã€‚\n\nå¦‚æœè®¡æ•°å™¨å¤§äº0ï¼Œé‚£ä¹ˆåˆ™å…è®¸è®¿é—®ï¼Œå¹¶æŠŠè®¡æ•°å™¨å‡1ã€‚å¦‚æœä¸º0ï¼Œåˆ™è®¿é—®è¢«ç¦æ­¢ï¼Œæ‰€æœ‰é€šè¿‡å®ƒçš„çº¿ç¨‹éƒ½å¤„äº\nç­‰å¾…çš„çŠ¶æ€ã€‚\n\n### **ä½¿ç”¨POSIXï¼ˆæ¡ä»¶é”ï¼‰åˆ›å»ºé”ï¼‰**\n\n```objc\n// å®ä¾‹ç±»person\nPerson *person = [[Person alloc] init];\n\n// åˆ›å»ºäº’æ–¥é”\n __block pthread_mutex_t mutex;\n pthread_mutex_init(&mutex, NULL);\n\n // åˆ›å»ºæ¡ä»¶é”\n __block pthread_cond_t cond;\n pthread_cond_init(&cond, NULL);\n\n // çº¿ç¨‹A\n dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n     pthread_mutex_lock(&mutex);\n     pthread_cond_wait(&cond, &mutex);\n     [person personA];\n     pthread_mutex_unlock(&mutex);\n });\n\n // çº¿ç¨‹B\n dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n     pthread_mutex_lock(&mutex);\n     [person personB];\n     [NSThread sleepForTimeInterval:5];\n     pthread_cond_signal(&cond);\n     pthread_mutex_unlock(&mutex);\n });\n\n```\n\næ•ˆæœï¼šç¨‹åºä¼šé¦–å…ˆè°ƒç”¨çº¿ç¨‹Bï¼Œåœ¨5ç§’åå†è°ƒç”¨çº¿ç¨‹Aã€‚å› ä¸ºåœ¨çº¿ç¨‹Aä¸­åˆ›å»ºäº†ç­‰å¾…æ¡ä»¶é”ï¼Œçº¿ç¨‹Bæœ‰æ¿€æ´»é”ï¼Œåªæœ‰å½“çº¿ç¨‹Bæ‰§è¡Œå®Œåä¼šæ¿€æ´»çº¿ç¨‹Aã€‚\n\n`pthread_cond_wait`æ–¹æ³•ä¸ºç­‰å¾…æ¡ä»¶é”ã€‚\n\n`pthread_cond_signal`æ–¹æ³•ä¸ºæ¿€æ´»ä¸€ä¸ªç›¸åŒæ¡ä»¶çš„æ¡ä»¶é”ã€‚\n\n> æ³¨æ„:è‡ªæ—‹é”`OSSpinLock`å·²ç»ä¸å†çº¿ç¨‹å®‰å…¨\n\n## å‚è€ƒèµ„æ–™\n\n* <http://www.liuhaihua.cn/archives/25316.html>\n* [ä¸å†å®‰å…¨çš„ OSSpinLock](http://blog.ibireme.com/2016/01/16/spinlock_is_unsafe_in_ios/)\n","tags":["å¤šçº¿ç¨‹"],"categories":["iOS"]},{"title":"SQLite_æ•™ç¨‹(ä¸ƒ)","url":"/2016/01/14/2016-01-14-sqlite-jiao-cheng-qi/","content":"\n#### SQLite Order By\n\nSQLite çš„ **ORDER BY** å­å¥æ˜¯ç”¨æ¥åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚\n\n---\n\n**è¯­æ³•**\n\nORDER BY å­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column-list\n\tFROM table_name\n\t[WHERE condition]\n\t[ORDER BY column1, column2, .. columnN] [ASC | DESC];\n\næ‚¨å¯ä»¥åœ¨ ORDER BY å­å¥ä¸­ä½¿ç”¨å¤šä¸ªåˆ—ã€‚ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ’åºåˆ—åœ¨åˆ—æ¸…å•ä¸­ã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ SALARY å‡åºæ’åºï¼š\n\n\tsqlite> SELECT * FROM COMPANY ORDER BY SALARY ASC;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\t\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t7           James       24          Houston     10000.0\n\t2           Allen       25          Texas       15000.0\n\t1           Paul        32          California  20000.0\n\t3           Teddy       23          Norway      20000.0\n\t6           Kim         22          South-Hall  45000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ NAME å’Œ SALARY å‡åºæ’åºï¼š\n\n\tsqlite> SELECT * FROM COMPANY ORDER BY NAME, SALARY ASC;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t5           David       27          Texas       85000.0\n\t7           James       24          Houston     10000.0\n\t6           Kim         22          South-Hall  45000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t1           Paul        32          California  20000.0\n\t3           Teddy       23          Norway      20000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šå°†ç»“æœæŒ‰ NAME é™åºæ’åºï¼š\n\n\tsqlite> SELECT * FROM COMPANY ORDER BY NAME DESC;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t3           Teddy       23          Norway      20000.0\n\t1           Paul        32          California  20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\t5           David       27          Texas       85000.0\n\t2           Allen       25          Texas       15000.0\n\n\n#### SQLite Group By\n\nSQLite çš„ **GROUP BY** å­å¥ç”¨äºä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚\nåœ¨ SELECT è¯­å¥ä¸­ï¼ŒGROUP BY å­å¥æ”¾åœ¨ WHERE å­å¥ä¹‹åï¼Œæ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚\n\n---\n\n**è¯­æ³•**\n\n\nä¸‹é¢ç»™å‡ºäº† GROUP BY å­å¥çš„åŸºæœ¬è¯­æ³•ã€‚GROUP BY å­å¥å¿…é¡»æ”¾åœ¨ WHERE å­å¥ä¸­çš„æ¡ä»¶ä¹‹åï¼Œå¿…é¡»æ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚\n\n\tSELECT column-list\n\tFROM table_name\n\tWHERE [ conditions ]\n\tGROUP BY column1, column2....columnN\n\tORDER BY column1, column2....columnN\n\næ‚¨å¯ä»¥åœ¨ GROUP BY å­å¥ä¸­ä½¿ç”¨å¤šä¸ªåˆ—ã€‚ç¡®ä¿æ‚¨ä½¿ç”¨çš„åˆ†ç»„åˆ—åœ¨åˆ—æ¸…å•ä¸­ã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nå¦‚æœæ‚¨æƒ³äº†è§£æ¯ä¸ªå®¢æˆ·çš„å·¥èµ„æ€»é¢ï¼Œåˆ™å¯ä½¿ç”¨ GROUP BY æŸ¥è¯¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite> SELECT NAME, SUM(SALARY) FROM COMPANY GROUP BY NAME;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tNAME        SUM(SALARY)\n\t----------  -----------\n\tAllen       15000\n\tDavid       85000\n\tJames       20000\n\tKim         45000\n\tMark        65000\n\tPaul        40000\n\tTeddy       20000\n\nè®©æˆ‘ä»¬æŠŠ ORDER BY å­å¥ä¸ GROUP BY å­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>  SELECT NAME, SUM(SALARY)\n\t         FROM COMPANY GROUP BY NAME ORDER BY NAME DESC;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tNAME        SUM(SALARY)\n\t----------  -----------\n\tTeddy       20000\n\tPaul        40000\n\tMark        65000\n\tKim         45000\n\tJames       20000\n\tDavid       85000\n\tAllen       15000\n\n#### SQLite Having å­å¥\nHAVING å­å¥å…è®¸æŒ‡å®šæ¡ä»¶æ¥è¿‡æ»¤å°†å‡ºç°åœ¨æœ€ç»ˆç»“æœä¸­çš„åˆ†ç»„ç»“æœã€‚\n\nWHERE å­å¥åœ¨æ‰€é€‰åˆ—ä¸Šè®¾ç½®æ¡ä»¶ï¼Œè€Œ HAVING å­å¥åˆ™åœ¨ç”± GROUP BY å­å¥åˆ›å»ºçš„åˆ†ç»„ä¸Šè®¾ç½®æ¡ä»¶ã€‚\n\n---\n\n**è¯­æ³•**\n\nä¸‹é¢æ˜¯ HAVING å­å¥åœ¨ SELECT æŸ¥è¯¢ä¸­çš„ä½ç½®ï¼š\n\n\tSELECT\n\tFROM\n\tWHERE\n\tGROUP BY\n\tHAVING\n\tORDER BY\n\nåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­ï¼ŒHAVING å­å¥å¿…é¡»æ”¾åœ¨ GROUP BY å­å¥ä¹‹åï¼Œå¿…é¡»æ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰ã€‚ä¸‹é¢æ˜¯åŒ…å« HAVING å­å¥çš„ SELECT è¯­å¥çš„è¯­æ³•ï¼š\n\n\tSELECT column1, column2\n\tFROM table1, table2\n\tWHERE [ conditions ]\n\tGROUP BY column1, column2\n\tHAVING [ conditions ]\n\tORDER BY column1, column2\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\t8           Paul        24          Houston     20000.0\n\t9           James       44          Norway      5000.0\n\t10          James       45          Texas       5000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒå°†æ˜¾ç¤ºåç§°è®¡æ•°å°äº 2 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite > SELECT * FROM COMPANY GROUP BY name HAVING count(name) < 2;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000\n\t5           David       27          Texas       85000\n\t6           Kim         22          South-Hall  45000\n\t4           Mark        25          Rich-Mond   65000\n\t3           Teddy       23          Norway      20000\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒå°†æ˜¾ç¤ºåç§°è®¡æ•°å¤§äº 2 çš„æ‰€æœ‰è®°å½•,æ³¨æ„å…¶å®è¿™é‡Œåªè¿”å›æœ€åä¸€æ¡è®°å½•ï¼š\n\n\tsqlite > SELECT * FROM COMPANY GROUP BY name HAVING count(name) > 2;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t10          James       45          Texas       5000\n\n\n#### SQLite Distinct å…³é”®å­—\nSQLite çš„ **DISTINCT** å…³é”®å­—ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚\næœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚\n\n---\n**è¯­æ³•**\n\nç”¨äºæ¶ˆé™¤é‡å¤è®°å½•çš„ DISTINCT å…³é”®å­—çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT DISTINCT column1, column2,.....columnN\n\tFROM table_name\n\tWHERE [condition]\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\t8           Paul        24          Houston     20000.0\n\t9           James       44          Norway      5000.0\n\t10          James       45          Texas       5000.0\n\né¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ SELECT æŸ¥è¯¢ï¼Œå®ƒå°†è¿”å›é‡å¤çš„å·¥èµ„è®°å½•ï¼š\n\n\tsqlite> SELECT name FROM COMPANY;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tNAME\n\t----------\n\tPaul\n\tAllen\n\tTeddy\n\tMark\n\tDavid\n\tKim\n\tJames\n\tPaul\n\tJames\n\tJames\n\nç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨ä¸Šè¿°çš„ SELECT æŸ¥è¯¢ä¸­ä½¿ç”¨ DISTINCT å…³é”®å­—ï¼š\n\n\tsqlite> SELECT DISTINCT name FROM COMPANY;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼Œæ²¡æœ‰ä»»ä½•é‡å¤çš„æ¡ç›®ï¼š\n\n\tNAME\n\t----------\n\tPaul\n\tAllen\n\tTeddy\n\tMark\n\tDavid\n\tKim\n\tJames\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(å…­)","url":"/2016/01/14/2016-01-14-sqlite-jiao-cheng-liu/","content":"\n#### SQLite Delete è¯­å¥\nSQLite çš„ **DELETE** æŸ¥è¯¢ç”¨äºåˆ é™¤è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ DELETE æŸ¥è¯¢æ¥åˆ é™¤é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è®°å½•éƒ½ä¼šè¢«åˆ é™¤ã€‚\n\n---\n\n**è¯­æ³•**\n\nå¸¦æœ‰ WHERE å­å¥çš„ DELETE æŸ¥è¯¢çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tDELETE FROM table_name\n\tWHERE [condition];\n\næ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\nå¦‚æœæ‚¨æƒ³è¦ä» COMPANY è¡¨ä¸­åˆ é™¤æ‰€æœ‰è®°å½•ï¼Œåˆ™ä¸éœ€è¦ä½¿ç”¨ WHERE å­å¥ï¼ŒDELETE æŸ¥è¯¢å¦‚ä¸‹ï¼š\n\n\tsqlite> DELETE FROM COMPANY;\n\nç°åœ¨ï¼ŒCOMPANY è¡¨ä¸­æ²¡æœ‰ä»»ä½•çš„è®°å½•ï¼Œå› ä¸ºæ‰€æœ‰çš„è®°å½•å·²ç»é€šè¿‡ DELETE è¯­å¥åˆ é™¤ã€‚\n\n\n#### SQLite Like å­å¥\nSQLite çš„ **LIKE** è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼š\n\n* ç™¾åˆ†å· ï¼ˆ%ï¼‰\n* ä¸‹åˆ’çº¿ ï¼ˆ_ï¼‰\n\n\nç™¾åˆ†å·ï¼ˆ%ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚\n\n---\n\n**è¯­æ³•**\n\n% å’Œ _ çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT FROM table_name\n\tWHERE column LIKE 'XXXX%'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column LIKE '%XXXX%'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column LIKE 'XXXX_'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column LIKE '_XXXX'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column LIKE '_XXXX_'\n\næ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚åœ¨è¿™é‡Œï¼ŒXXXX å¯ä»¥æ˜¯ä»»ä½•æ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ã€‚\n\n**å®ä¾‹**\n\nä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ '%' å’Œ '_' è¿ç®—ç¬¦çš„ LIKE å­å¥ä¸åŒçš„åœ°æ–¹ï¼š\n\n| è¯­å¥ \t\t\t\t\t\t|æè¿° \t\t\t|\n|--------------------------|--------------|\n|WHERE SALARY LIKE '200%'\t|æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼\n|WHERE SALARY LIKE '%200%'\t|æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼\n|WHERE SALARY LIKE '\\_00\\%' |æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼\n| WHERE SALARY LIKE '2\\_%_%'|æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼\n|WHERE SALARY LIKE '%2'    |æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼\n|WHERE SALARY LIKE '_2%3'  |æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼\n|WHERE SALARY LIKE '2___3' |æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼\n\nè®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ AGE ä»¥ 2 å¼€å¤´çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE  LIKE '2%';\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\t\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ ADDRESS æ–‡æœ¬é‡ŒåŒ…å«ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE ADDRESS  LIKE '%-%';\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t6           Kim         22          South-Hall  45000.0\n\n#### SQLite Glob å­å¥\nSQLite çš„ **GLOB** è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒGLOB è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ LIKE è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼ŒGLOB æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚\n\n* æ˜Ÿå· ï¼ˆ*ï¼‰\n* é—®å· ï¼ˆ?ï¼‰\n\næ˜Ÿå·ï¼ˆ*ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚é—®å·ï¼ˆ?ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚\n\n---\n\n**è¯­æ³•**\n\n\\* å’Œ ? çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT FROM table_name\n\tWHERE column GLOB 'XXXX*'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column GLOB '*XXXX*'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column GLOB 'XXXX?'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column GLOB '?XXXX'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column GLOB '?XXXX?'\n\n\tor\n\n\tSELECT FROM table_name\n\tWHERE column GLOB '????'\n\næ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚åœ¨è¿™é‡Œï¼ŒXXXX å¯ä»¥æ˜¯ä»»ä½•æ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ã€‚\n\n---\n\n**å®ä¾‹**\n\nä¸‹é¢ä¸€äº›å®ä¾‹æ¼”ç¤ºäº† å¸¦æœ‰ '*' å’Œ '?' è¿ç®—ç¬¦çš„ GLOB å­å¥ä¸åŒçš„åœ°æ–¹ï¼š\n\n| è¯­å¥                                  |æè¿°\t      |\n|--------------------------------------|-------------|\n|WHERE SALARY GLOB '200\\*'\t            |æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼|\n|WHERE SALARY GLOB '\\*200\\*'\t        |æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼|\n|WHERE SALARY GLOB '?00\\*'\t            |æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼|\n|WHERE SALARY GLOB '2??'\t            |æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼|\n|WHERE SALARY GLOB '\\*2'\t            |æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼ |\n|WHERE SALARY GLOB '?2*3'\t            |æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|\n|WHERE SALARY GLOB '2???3'\t            |æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼|\n\nè®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ AGE ä»¥ 2 å¼€å¤´çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE  GLOB '2*';\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæ˜¾ç¤º COMPANY è¡¨ä¸­ ADDRESS æ–‡æœ¬é‡ŒåŒ…å«ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE ADDRESS  GLOB '*-*';\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t6           Kim         22          South-Hall  45000.0\n\n#### SQLite Limit å­å¥\nSQLite çš„ **LIMIT** å­å¥ç”¨äºé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡ã€‚\n\n---\n\n**è¯­æ³•**\n\nå¸¦æœ‰ LIMIT å­å¥çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tLIMIT [no of rows]\n\nä¸‹é¢æ˜¯ `LIMIT` å­å¥ä¸ `OFFSET` å­å¥ä¸€èµ·ä½¿ç”¨æ—¶çš„è¯­æ³•ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tLIMIT [no of rows] OFFSET [row num]\n\nSQLite å¼•æ“å°†è¿”å›ä»ä¸‹ä¸€è¡Œå¼€å§‹ç›´åˆ°ç»™å®šçš„ `OFFSET` ä¸ºæ­¢çš„æ‰€æœ‰è¡Œï¼Œå¦‚ä¸‹é¢çš„æœ€åä¸€ä¸ªå®ä¾‹æ‰€ç¤ºã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒé™åˆ¶äº†æ‚¨æƒ³è¦ä»è¡¨ä¸­æå–çš„è¡Œæ•°ï¼š\n\n\tsqlite> SELECT * FROM COMPANY LIMIT 6;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\nä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä»ä¸€ä¸ªç‰¹å®šçš„åç§»å¼€å§‹æå–è®°å½•(`OFFSETä¸‹æ ‡ä»0å¼€å§‹`)ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä»ç¬¬ä¸‰ä½å¼€å§‹æå– 3 ä¸ªè®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY LIMIT 3 OFFSET 2;\n\nè¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(äº”)","url":"/2016/01/14/2016-01-14-sqlite-jiao-cheng-wu/","content":"\n#### SQLè¡¨è¾¾å¼\nè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€è¿ç®—ç¬¦å’Œè®¡ç®—å€¼çš„SQLå‡½æ•°çš„ç»„åˆã€‚\n\nSQL è¡¨è¾¾å¼ä¸å…¬å¼ç±»ä¼¼ï¼Œéƒ½å†™åœ¨æŸ¥è¯¢è¯­è¨€ä¸­ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ•°æ®é›†æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚\n\n---\n\n**è¯­æ³•**\n\nå‡è®¾ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tWHERE [CONTION | EXPRESSION];\n\næœ‰ä¸åŒç±»å‹çš„ SQLite è¡¨è¾¾å¼ï¼Œå…·ä½“è®²è§£å¦‚ä¸‹ï¼š\n\n#### SQLite - å¸ƒå°”è¡¨è¾¾å¼\nSQLite çš„å¸ƒå°”è¡¨è¾¾å¼åœ¨åŒ¹é…å•ä¸ªå€¼çš„åŸºç¡€ä¸Šè·å–æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tWHERE SINGLE VALUE MATCHTING EXPRESSION;\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite å¸ƒå°”è¡¨è¾¾å¼çš„ç”¨æ³•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE SALARY = 10000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           James        24          Houston   10000.0\n\n#### SQLite - æ•°å€¼è¡¨è¾¾å¼\nè¿™äº›è¡¨è¾¾å¼ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢ä¸­çš„ä»»ä½•æ•°å­¦è¿ç®—ã€‚è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT numerical_expression as  OPERATION_NAME\n\t[FROM table_name WHERE CONDITION] ;\n\nåœ¨è¿™é‡Œï¼Œnumerical_expression ç”¨äºæ•°å­¦è¡¨è¾¾å¼æˆ–ä»»ä½•å…¬å¼ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite æ•°å€¼è¡¨è¾¾å¼çš„ç”¨æ³•ï¼š\n\n\tsqlite> SELECT (15 + 6) AS ADDITION\n\tADDITION = 21\n\næœ‰å‡ ä¸ªå†…ç½®çš„å‡½æ•°ï¼Œæ¯”å¦‚ avg()ã€sum()ã€count()ï¼Œç­‰ç­‰ï¼Œæ‰§è¡Œè¢«ç§°ä¸ºå¯¹ä¸€ä¸ªè¡¨æˆ–ä¸€ä¸ªç‰¹å®šçš„è¡¨åˆ—çš„æ±‡æ€»æ•°æ®è®¡ç®—ã€‚\n\n\tsqlite> SELECT COUNT(*) AS \"RECORDS\" FROM COMPANY;\n\tRECORDS = 7\n\n---\n\n#### SQLite - æ—¥æœŸè¡¨è¾¾å¼\næ—¥æœŸè¡¨è¾¾å¼è¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œè¿™äº›è¡¨è¾¾å¼å°†è¢«ç”¨äºå„ç§æ•°æ®æ“ä½œã€‚\n\n\tsqlite>  SELECT CURRENT_TIMESTAMP;\n\tCURRENT_TIMESTAMP = 2016-01-13 16:29:56\n\n#### SQLite Where å­å¥\nSQLiteçš„ WHERE å­å¥ç”¨äºæŒ‡å®šä»ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®çš„æ¡ä»¶ã€‚\n\nå¦‚æœæ»¡è¶³ç»™å®šçš„æ¡ä»¶ï¼Œå³ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œåˆ™ä»è¡¨ä¸­è¿”å›ç‰¹å®šçš„å€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ WHERE å­å¥æ¥è¿‡æ»¤è®°å½•ï¼Œåªè·å–éœ€è¦çš„è®°å½•ã€‚\n\nWHERE å­å¥ä¸ä»…å¯ç”¨åœ¨ SELECT è¯­å¥ä¸­ï¼Œå®ƒä¹Ÿå¯ç”¨åœ¨ UPDATEã€DELETE è¯­å¥ä¸­ï¼Œç­‰ç­‰ï¼Œè¿™äº›æˆ‘ä»¬å°†åœ¨éšåçš„ç« èŠ‚ä¸­å­¦ä¹ åˆ°ã€‚\n\n---\n\n**è¯­æ³•**\n\nSQLite çš„å¸¦æœ‰ WHERE å­å¥çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tWHERE [condition]\n\n**å®ä¾‹**\n\næ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ¯”è¾ƒæˆ–é€»è¾‘è¿ç®—ç¬¦æŒ‡å®šæ¡ä»¶ï¼Œæ¯”å¦‚ >ã€<ã€=ã€LIKEã€NOTï¼Œç­‰ç­‰ã€‚å‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite é€»è¾‘è¿ç®—ç¬¦çš„ç”¨æ³•ã€‚ä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 AND SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\nsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 OR SALARY >= 65000;\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE ä¸ä¸º NULL çš„æ‰€æœ‰è®°å½•ï¼Œç»“æœæ˜¾ç¤ºæ‰€æœ‰çš„è®°å½•ï¼Œæ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªè®°å½•çš„ AGE ç­‰äº NULLï¼š\n\n\tsqlite>  SELECT * FROM COMPANY WHERE AGE IS NOT NULL;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ 'Ki' å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œ'Ki' ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE NAME LIKE 'Ki%';\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t6           Kim         22          South-Hall  45000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ 'Ki' å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œ'Ki' ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE NAME GLOB 'Ki*';\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t6           Kim         22          South-Hall  45000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 );\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\n\n#### SQLite AND/OR è¿ç®—ç¬¦\nSQLite çš„ AND å’Œ OR è¿ç®—ç¬¦ç”¨äºç¼–è¯‘å¤šä¸ªæ¡ä»¶æ¥ç¼©å°åœ¨ SQLite è¯­å¥ä¸­æ‰€é€‰çš„æ•°æ®ã€‚è¿™ä¸¤ä¸ªè¿ç®—ç¬¦è¢«ç§°ä¸ºè¿æ¥è¿ç®—ç¬¦ã€‚\n\nè¿™äº›è¿ç®—ç¬¦ä¸ºåŒä¸€ä¸ª SQLite è¯­å¥ä¸­ä¸åŒçš„è¿ç®—ç¬¦ä¹‹é—´çš„å¤šä¸ªæ¯”è¾ƒæä¾›äº†å¯èƒ½ã€‚\n\n---\n\n#### AND è¿ç®—ç¬¦\nAND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨ã€‚ä½¿ç”¨ AND è¿ç®—ç¬¦æ—¶ï¼Œåªæœ‰å½“æ‰€æœ‰æ¡ä»¶éƒ½ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œæ•´ä¸ªæ¡ä»¶ä¸ºçœŸï¼ˆtrueï¼‰ã€‚ä¾‹å¦‚ï¼Œåªæœ‰å½“ condition1 å’Œ condition2 éƒ½ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œ[condition1] AND [condition2] ä¸ºçœŸï¼ˆtrueï¼‰ã€‚\n\n**è¯­æ³•**\n\nå¸¦æœ‰ WHERE å­å¥çš„ AND è¿ç®—ç¬¦çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tWHERE [condition1] AND [condition2]...AND [conditionN];\n\næ‚¨å¯ä»¥ä½¿ç”¨ AND è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚SQLite è¯­å¥éœ€è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯ï¼Œæ— è®ºæ˜¯äº‹åŠ¡æˆ–æŸ¥è¯¢ï¼Œæ‰€æœ‰ç”± AND åˆ†éš”çš„æ¡ä»¶éƒ½å¿…é¡»ä¸ºçœŸï¼ˆTRUEï¼‰ã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 AND SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\n#### OR è¿ç®—ç¬¦\nOR è¿ç®—ç¬¦ä¹Ÿç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶ã€‚ä½¿ç”¨ OR è¿ç®—ç¬¦æ—¶ï¼Œåªè¦å½“æ¡ä»¶ä¸­ä»»ä½•ä¸€ä¸ªä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œæ•´ä¸ªæ¡ä»¶ä¸ºçœŸï¼ˆtrueï¼‰ã€‚ä¾‹å¦‚ï¼Œåªè¦å½“ condition1 æˆ– condition2 æœ‰ä¸€ä¸ªä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œ[condition1] OR [condition2] ä¸ºçœŸï¼ˆtrueï¼‰\n\n**è¯­æ³•**\n\nå¸¦æœ‰ WHERE å­å¥çš„ OR è¿ç®—ç¬¦çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN\n\tFROM table_name\n\tWHERE [condition1] OR [condition2]...OR [conditionN]\n\næ‚¨å¯ä»¥ä½¿ç”¨ OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚SQLite è¯­å¥éœ€è¦æ‰§è¡Œçš„åŠ¨ä½œæ˜¯ï¼Œæ— è®ºæ˜¯äº‹åŠ¡æˆ–æŸ¥è¯¢ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªç”± OR åˆ†éš”çš„æ¡ä»¶ä¸ºçœŸï¼ˆTRUEï¼‰å³å¯ã€‚\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 OR SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\n\n#### SQLite Update è¯­å¥\nSQLite çš„ **UPDATE **æŸ¥è¯¢ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢æ¥æ›´æ–°é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è¡Œéƒ½ä¼šè¢«æ›´æ–°ã€‚\n\n---\n\n**è¯­æ³•**\n\nå¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tUPDATE table_name\n\tSET column1 = value1, column2 = value2...., columnN = valueN\n\tWHERE [condition];\n\næ‚¨å¯ä»¥ä½¿ç”¨ AND æˆ– OR è¿ç®—ç¬¦æ¥ç»“åˆ N ä¸ªæ•°é‡çš„æ¡ä»¶ã€‚\n\n---\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä¼šæ›´æ–° ID ä¸º 6 çš„å®¢æˆ·åœ°å€ï¼š\n\n\tsqlite> UPDATE COMPANY SET ADDRESS = 'Texas' WHERE ID = 6;\n\nç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          Texas       45000.0\n\t7           James       24          Houston     10000.0\n\nå¦‚æœæ‚¨æƒ³ä¿®æ”¹ COMPANY è¡¨ä¸­ ADDRESS å’Œ SALARY åˆ—çš„æ‰€æœ‰å€¼ï¼Œåˆ™ä¸éœ€è¦ä½¿ç”¨ WHERE å­å¥ï¼ŒUPDATE æŸ¥è¯¢å¦‚ä¸‹ï¼š\n\n\tsqlite> UPDATE COMPANY SET ADDRESS = 'Texas', SALARY = 20000.00;\n\nç°åœ¨ï¼ŒCOMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          Texas       20000.0\n\t2           Allen       25          Texas       20000.0\n\t3           Teddy       23          Texas       20000.0\n\t4           Mark        25          Texas       20000.0\n\t5           David       27          Texas       20000.0\n\t6           Kim         22          Texas       20000.0\n\t7           James       24          Texas       20000.0\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(å››)","url":"/2016/01/13/2016-01-13-sqlite-jiao-cheng-si/","content":"\n### SQLite è¿ç®—ç¬¦\n\n**SQLite è¿ç®—ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ**\n\nè¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¿ç•™å­—æˆ–å­—ç¬¦ï¼Œä¸»è¦ç”¨äº SQLite è¯­å¥çš„ WHERE å­å¥ä¸­æ‰§è¡Œæ“ä½œï¼Œå¦‚æ¯”è¾ƒå’Œç®—æœ¯è¿ç®—ã€‚\n\nè¿ç®—ç¬¦ç”¨äºæŒ‡å®š SQLite è¯­å¥ä¸­çš„æ¡ä»¶ï¼Œå¹¶åœ¨è¯­å¥ä¸­è¿æ¥å¤šä¸ªæ¡ä»¶ã€‚\n\n* ç®—æœ¯è¿ç®—ç¬¦\n* æ¯”è¾ƒè¿ç®—ç¬¦\n* é€»è¾‘è¿ç®—ç¬¦\n* ä½è¿ç®—ç¬¦\n\n---\n\n#### SQLite ç®—æœ¯è¿ç®—ç¬¦\n\nå‡è®¾å˜é‡ a=10ï¼Œå˜é‡ b=20ï¼Œåˆ™ï¼š\n\n|è¿ç®—ç¬¦  |æè¿°      \t\t\t     |å®ä¾‹      |\n|-------|-----------------------|---------|\n|+      |åŠ æ³• - æŠŠè¿ç®—ç¬¦ä¸¤è¾¹çš„å€¼ç›¸åŠ |a + b å°†å¾—åˆ° 30\n|-      |å‡æ³• - å·¦æ“ä½œæ•°å‡å»å³æ“ä½œæ•°|a - b å°†å¾—åˆ° -10\n|*      |ä¹˜æ³• - æŠŠè¿ç®—ç¬¦ä¸¤è¾¹çš„å€¼ç›¸ä¹˜|a * b å°†å¾—åˆ° 200\n|/      |é™¤æ³• - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•°|b / a å°†å¾—åˆ° 2\n|%      |å–æ¨¡ - å·¦æ“ä½œæ•°é™¤ä»¥å³æ“ä½œæ•°åå¾—åˆ°çš„ä½™æ•°|b % a will give 0\n\n**å®ä¾‹**\n\nä¸‹é¢æ˜¯ SQLite ç®—æœ¯è¿ç®—ç¬¦çš„ç®€å•å®ä¾‹ï¼š\n\n\tsqlite> .mode line\n\tsqlite> select 10 + 20;\n\t10 + 20 = 30\n\n\n\tsqlite> select 10 - 20;\n\t10 - 20 = -10\n\n\n\tsqlite> select 10 * 20;\n\t10 * 20 = 200\n\n\n\tsqlite> select 10 / 5;\n\t10 / 5 = 2\n\n\n\tsqlite> select 12 %  5;\n\t12 %  5 = 2\n\n#### SQLite æ¯”è¾ƒè¿ç®—ç¬¦\n\nå‡è®¾å˜é‡ a=10ï¼Œå˜é‡ b=20ï¼Œåˆ™ï¼š\n\n|è¿ç®—ç¬¦  |æè¿°      \t\t\t                      |å®ä¾‹     |\n|-------|----------------------------------------|---------|\n|==     |æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a == b) ä¸ä¸ºçœŸã€‚\n|=      |æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a = b) ä¸ä¸ºçœŸã€‚\n|!=     |æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a != b) ä¸ºçœŸã€‚\n|<>\t\t|æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a <> b) ä¸ºçœŸã€‚\n|>\t\t|æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a > b) ä¸ä¸ºçœŸã€‚\n|<\t\t|æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a < b) ä¸ºçœŸã€‚\n|>=\t    |æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a >= b) ä¸ä¸ºçœŸã€‚\n|<=     |æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a <= b) ä¸ºçœŸã€‚\n|!<     |æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a !< b) ä¸ºå‡\n|!>     |æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚|(a !> b) ä¸ºçœŸ\n\n**å®ä¾‹**\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å„ç§ SQLite æ¯”è¾ƒè¿ç®—ç¬¦çš„ç”¨æ³•ã€‚\n\n> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ WHERE å­å¥ï¼Œè¿™å°†ä¼šåœ¨åè¾¹å•ç‹¬çš„ä¸€ä¸ªç« èŠ‚ä¸­è®²è§£ï¼Œä½†ç°åœ¨æ‚¨éœ€è¦æ˜ç™½ï¼ŒWHERE å­å¥æ˜¯ç”¨æ¥è®¾ç½® SELECT è¯­å¥çš„æ¡ä»¶è¯­å¥ã€‚\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY å¤§äº 50,000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE SALARY > 50000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite>  SELECT * FROM COMPANY WHERE SALARY = 20000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t3           Teddy       23          Norway      20000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ä¸ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite>  SELECT * FROM COMPANY WHERE SALARY != 20000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY ä¸ç­‰äº 20,000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE SALARY <> 20000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† SALARY å¤§äºç­‰äº 65,000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\n#### SQLite é€»è¾‘è¿ç®—ç¬¦\nä¸‹é¢æ˜¯ SQLite ä¸­æ‰€æœ‰çš„é€»è¾‘è¿ç®—ç¬¦åˆ—è¡¨ã€‚\n\n|è¿ç®—ç¬¦    |æè¿°      \t\t\t     \t\t   |\n|---------|----------------------------------|\n|AND      |AND è¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨ã€‚\n|BETWEEN  |BETWEEN è¿ç®—ç¬¦ç”¨äºåœ¨ç»™å®šæœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´å†…çš„ä¸€ç³»åˆ—å€¼ä¸­æœç´¢å€¼ã€‚\n|EXISTS   |EXISTS è¿ç®—ç¬¦ç”¨äºåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æŒ‡å®šè¡¨ä¸­æœç´¢è¡Œçš„å­˜åœ¨ã€‚\n|IN\t\t  |IN è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚\n|NOT IN   |IN è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ï¼Œç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸åœ¨ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚\n|LIKE     |LIKE è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚\n|GLOB     |GLOB è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚GLOB ä¸ LIKE ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚\n|NOT      |NOT è¿ç®—ç¬¦æ˜¯æ‰€ç”¨çš„é€»è¾‘è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ã€‚æ¯”å¦‚ NOT EXISTSã€NOT BETWEENã€NOT INï¼Œç­‰ç­‰ã€‚å®ƒæ˜¯å¦å®šè¿ç®—ç¬¦ã€‚\n|OR       |OR è¿ç®—ç¬¦ç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶ã€‚\n|IS NULL  |NULL è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ NULL å€¼è¿›è¡Œæ¯”è¾ƒã€‚\n|IS       |IS è¿ç®—ç¬¦ä¸ = ç›¸ä¼¼ã€‚\n|IS NOT   |IS NOT è¿ç®—ç¬¦ä¸ != ç›¸ä¼¼ã€‚\n|\\|\\|     |è¿æ¥ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚\n|UNIQUE   |UNIQUE è¿ç®—ç¬¦æœç´¢æŒ‡å®šè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼ˆæ— é‡å¤ï¼‰ã€‚\n\n**å®ä¾‹**\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite é€»è¾‘è¿ç®—ç¬¦çš„ç”¨æ³•ã€‚\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 ä¸”å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 AND SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE å¤§äºç­‰äº 25 æˆ–å·¥èµ„å¤§äºç­‰äº 65000.00 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE >= 25 OR SALARY >= 65000;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE ä¸ä¸º NULL çš„æ‰€æœ‰è®°å½•ï¼Œç»“æœæ˜¾ç¤ºæ‰€æœ‰çš„è®°å½•ï¼Œæ„å‘³ç€æ²¡æœ‰ä¸€ä¸ªè®°å½•çš„ AGE ç­‰äº NULLï¼š\n\n\tsqlite>  SELECT * FROM COMPANY WHERE AGE IS NOT NULL;\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ 'Ki' å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œ'Ki' ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE NAME LIKE 'Ki%';\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t6           Kim         22          South-Hall  45000.0\n\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† NAME ä»¥ 'Ki' å¼€å§‹çš„æ‰€æœ‰è®°å½•ï¼Œ'Ki' ä¹‹åçš„å­—ç¬¦ä¸åšé™åˆ¶ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE NAME GLOB 'Ki*';\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t6           Kim         22          South-Hall  45000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 );\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t2           Allen       25          Texas       15000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥åˆ—å‡ºäº† AGE çš„å€¼æ—¢ä¸æ˜¯ 25 ä¹Ÿä¸æ˜¯ 27 çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY WHERE AGE NOT IN ( 25, 27 );\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t3           Teddy       23          Norway      20000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢çš„ SELECT è¯­å¥ä½¿ç”¨ SQL å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æŸ¥æ‰¾ SALARY > 65000 çš„å¸¦æœ‰ AGE å­—æ®µçš„æ‰€æœ‰è®°å½•ï¼Œåè¾¹çš„ WHERE å­å¥ä¸ EXISTS è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œåˆ—å‡ºäº†å¤–æŸ¥è¯¢ä¸­çš„ AGE å­˜åœ¨äºå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT AGE FROM COMPANY\n\t        WHERE EXISTS (SELECT AGE FROM COMPANY WHERE SALARY > 65000);\n\tAGE\n\t----------\n\t32\n\t25\n\t23\n\t25\n\t27\n\t22\n\t24\n\nä¸‹é¢çš„ SELECT è¯­å¥ä½¿ç”¨ SQL å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢æŸ¥æ‰¾ SALARY > 65000 çš„å¸¦æœ‰ AGE å­—æ®µçš„æ‰€æœ‰è®°å½•ï¼Œåè¾¹çš„ WHERE å­å¥ä¸ > è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œåˆ—å‡ºäº†å¤–æŸ¥è¯¢ä¸­çš„ AGE å¤§äºå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­çš„å¹´é¾„çš„æ‰€æœ‰è®°å½•ï¼š\n\n\tsqlite> SELECT * FROM COMPANY\n\t        WHERE AGE > (SELECT AGE FROM COMPANY WHERE SALARY > 65000);\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\n#### SQLite ä½è¿ç®—ç¬¦\n\nä½è¿ç®—ç¬¦ä½œç”¨äºä½ï¼Œå¹¶é€ä½æ‰§è¡Œæ“ä½œã€‚çœŸå€¼è¡¨ & å’Œ | å¦‚ä¸‹ï¼š\n\n|p  |q  |p&q|p\\|q|\n|---|---|---|---|\n|0\t|0\t|0\t|0\n|0\t|1\t|0\t|1\n|1\t|1\t|1\t|1\n|1\t|0\t|0\t|1\n\nå‡è®¾å¦‚æœ A = 60ï¼Œä¸” B = 13ï¼Œç°åœ¨ä»¥äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒä»¬å¦‚ä¸‹æ‰€ç¤ºï¼š\n\nA = 0011 1100\n\nB = 0000 1101\n\n-----------------\n\nA&B = 0000 1100\n\nA|B = 0011 1101\n\n~A  = 1100 0011\n\nä¸‹è¡¨ä¸­åˆ—å‡ºäº† SQLite è¯­è¨€æ”¯æŒçš„ä½è¿ç®—ç¬¦ã€‚å‡è®¾å˜é‡ A=60ï¼Œå˜é‡ B=13ï¼Œåˆ™ï¼š\n\n|è¿ç®—ç¬¦  |æè¿°   \t\t\t\t\t\t\t |å®ä¾‹     |\n|-------|-------------------------------|--------|\n|&      |\tå¦‚æœåŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ AND è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚\t|(A & B) å°†å¾—åˆ° 12ï¼Œå³ä¸º 0000 1100\n|\\|\t    |å¦‚æœå­˜åœ¨äºä»»ä¸€æ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ OR è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚\t|(A | B) å°†å¾—åˆ° 61ï¼Œå³ä¸º 0011 1101\n|~\t    |äºŒè¿›åˆ¶è¡¥ç è¿ç®—ç¬¦æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œå…·æœ‰\"ç¿»è½¬\"ä½æ•ˆåº”ã€‚\t|(~A ) å°†å¾—åˆ° -61ï¼Œå³ä¸º 1100 0011ï¼Œ2 çš„è¡¥ç å½¢å¼ï¼Œå¸¦ç¬¦å·çš„äºŒè¿›åˆ¶æ•°ã€‚\n|<<   \t|äºŒè¿›åˆ¶å·¦ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼å‘å·¦ç§»åŠ¨å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚\t|A << 2 å°†å¾—åˆ° 240ï¼Œå³ä¸º 1111 0000\n|>>\t    |äºŒè¿›åˆ¶å³ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼å‘å³ç§»åŠ¨å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚\t|A >> 2 å°†å¾—åˆ° 15ï¼Œå³ä¸º 0000 1111\n\n**å®ä¾‹**\n\nä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº† SQLite ä½è¿ç®—ç¬¦çš„ç”¨æ³•ï¼š\n\n\tsqlite> .mode line\n\tsqlite> select 60 | 13;\n\t60 | 13 = 61\n\n\tsqlite> select 60 & 13;\n\t60 & 13 = 12\n\n\tsqlite> select  60 ^ 13;\n\t10 * 20 = 200\n\n\n\tsqlite>  select  (~60);\n\t(~60) = -61\n\n\tsqlite>  select  (60 << 2);\n\t(60 << 2) = 240\n\n\tsqlite>  select  (60 >> 2);\n\t(60 >> 2) = 15\n\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(ä¸‰)","url":"/2016/01/13/2016-01-13-sqlite-jiao-cheng-san/","content":"\n#### SQLite Insert è¯­å¥\n\nSQLite çš„ INSERT INTO è¯­å¥ç”¨äºå‘æ•°æ®åº“çš„æŸä¸ªè¡¨ä¸­æ·»åŠ æ–°çš„æ•°æ®è¡Œã€‚\n\n---\n\n**è¯­æ³•**\n\nINSERT INTO è¯­å¥æœ‰ä¸¤ç§åŸºæœ¬è¯­æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tINSERT INTO TABLE_NAME (column1, column2, column3,...columnN)]  \n\tVALUES (value1, value2, value3,...valueN);\n\nåœ¨è¿™é‡Œï¼Œcolumn1, column2,...columnN æ˜¯è¦æ’å…¥æ•°æ®çš„è¡¨ä¸­çš„åˆ—çš„åç§°ã€‚\nå¦‚æœè¦ä¸ºè¡¨ä¸­çš„æ‰€æœ‰åˆ—æ·»åŠ å€¼ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸éœ€è¦åœ¨ SQLite æŸ¥è¯¢ä¸­æŒ‡å®šåˆ—åç§°ã€‚ä½†è¦ç¡®ä¿å€¼çš„é¡ºåºä¸åˆ—åœ¨è¡¨ä¸­çš„é¡ºåºä¸€è‡´ã€‚SQLite çš„ INSERT INTO è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tINSERT INTO TABLE_NAME VALUES (value1,value2,value3,...valueN);\n\n---\n\n**å®ä¾‹**\n\nå‡è®¾æ‚¨å·²ç»åœ¨ testDB.db ä¸­åˆ›å»ºäº† COMPANYè¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite> CREATE TABLE COMPANY(\n\t   ID INT PRIMARY KEY     NOT NULL,\n\t   NAME           TEXT    NOT NULL,\n\t   AGE            INT     NOT NULL,\n\t   ADDRESS        CHAR(50),\n\t   SALARY         REAL\n\t);\n\nç°åœ¨ï¼Œä¸‹é¢çš„è¯­å¥å°†åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºå…­ä¸ªè®°å½•ï¼š\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (1, 'Paul', 32, 'California', 20000.00 );\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (2, 'Allen', 25, 'Texas', 15000.00 );\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (3, 'Teddy', 23, 'Norway', 20000.00 );\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (4, 'Mark', 25, 'Rich-Mond ', 65000.00 );\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (5, 'David', 27, 'Texas', 85000.00 );\n\n\tINSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)\n\tVALUES (6, 'Kim', 22, 'South-Hall', 45000.00 );\n\næ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬äºŒç§è¯­æ³•åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºä¸€ä¸ªè®°å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tINSERT INTO COMPANY VALUES (7, 'James', 24, 'Houston', 10000.00 );\n\nä¸Šé¢çš„æ‰€æœ‰è¯­å¥å°†åœ¨ COMPANY è¡¨ä¸­åˆ›å»ºä¸‹åˆ—è®°å½•ã€‚ä¸‹ä¸€ç« ä¼šæ•™æ‚¨å¦‚ä½•ä»ä¸€ä¸ªè¡¨ä¸­æ˜¾ç¤ºæ‰€æœ‰è¿™äº›è®°å½•ã€‚\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\n#### ä½¿ç”¨ä¸€ä¸ªè¡¨æ¥å¡«å……å¦ä¸€ä¸ªè¡¨\n\næ‚¨å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªæœ‰ä¸€ç»„å­—æ®µçš„è¡¨ä¸Šä½¿ç”¨ select è¯­å¥ï¼Œå¡«å……æ•°æ®åˆ°å¦ä¸€ä¸ªè¡¨ä¸­ã€‚ä¸‹é¢æ˜¯è¯­æ³•ï¼š\n\n\tINSERT INTO first_table_name [(column1, column2, ... columnN)]\n\t   SELECT column1, column2, ...columnN\n\t   FROM second_table_name\n\t   [WHERE condition];\n\n#### SQLite Select è¯­å¥\n\nSQLite çš„ SELECT è¯­å¥ç”¨äºä» SQLite æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥ç»“æœè¡¨çš„å½¢å¼è¿”å›æ•°æ®ã€‚è¿™äº›ç»“æœè¡¨ä¹Ÿè¢«ç§°ä¸ºç»“æœé›†ã€‚\n\n---\n\n**è¯­æ³•**\n\nSQLite çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tSELECT column1, column2, columnN FROM table_name;\n\nåœ¨è¿™é‡Œï¼Œcolumn1, column2...æ˜¯è¡¨çš„å­—æ®µï¼Œä»–ä»¬çš„å€¼å³æ˜¯æ‚¨è¦è·å–çš„ã€‚å¦‚æœæ‚¨æƒ³è·å–æ‰€æœ‰å¯ç”¨çš„å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š\n\n\tSELECT * FROM table_name;\n\n---\n\n**å®ä¾‹**\n\nå‡è®¾ COMPANY è¡¨æœ‰ä»¥ä¸‹è®°å½•ï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨ SELECT è¯­å¥è·å–å¹¶æ˜¾ç¤ºæ‰€æœ‰è¿™äº›è®°å½•ã€‚åœ¨è¿™é‡Œï¼Œå‰ä¸‰ä¸ªå‘½ä»¤è¢«ç”¨æ¥è®¾ç½®æ­£ç¡®æ ¼å¼åŒ–çš„è¾“å‡ºã€‚\n\n\tsqlite>.header on\n\tsqlite>.mode column\n\tsqlite> SELECT * FROM COMPANY;\n\næœ€åï¼Œå°†å¾—åˆ°ä»¥ä¸‹çš„ç»“æœï¼š\n\n\tID          NAME        AGE         ADDRESS     SALARY\n\t----------  ----------  ----------  ----------  ----------\n\t1           Paul        32          California  20000.0\n\t2           Allen       25          Texas       15000.0\n\t3           Teddy       23          Norway      20000.0\n\t4           Mark        25          Rich-Mond   65000.0\n\t5           David       27          Texas       85000.0\n\t6           Kim         22          South-Hall  45000.0\n\t7           James       24          Houston     10000.0\n\nå¦‚æœåªæƒ³è·å– COMPANY è¡¨ä¸­æŒ‡å®šçš„å­—æ®µï¼Œåˆ™ä½¿ç”¨ä¸‹é¢çš„æŸ¥è¯¢ï¼š\n\n\tsqlite> SELECT ID, NAME, SALARY FROM COMPANY;\n\nä¸Šé¢çš„æŸ¥è¯¢ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME        SALARY\n\t----------  ----------  ----------\n\t1           Paul        20000.0\n\t2           Allen       15000.0\n\t3           Teddy       20000.0\n\t4           Mark        65000.0\n\t5           David       85000.0\n\t6           Kim         45000.0\n\t7           James       10000.0\n\n---\n\n**è®¾ç½®è¾“å‡ºåˆ—çš„å®½åº¦**\n\næœ‰æ—¶ï¼Œç”±äºè¦æ˜¾ç¤ºçš„åˆ—çš„é»˜è®¤å®½åº¦å¯¼è‡´ .mode columnï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å‡ºè¢«æˆªæ–­ã€‚æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ .width num, num.... å‘½ä»¤è®¾ç½®æ˜¾ç¤ºåˆ—çš„å®½åº¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>.width 10, 20, 10\n\tsqlite>SELECT * FROM COMPANY;\n\nä¸Šé¢çš„ .width å‘½ä»¤è®¾ç½®ç¬¬ä¸€åˆ—çš„å®½åº¦ä¸º 10ï¼Œç¬¬äºŒåˆ—çš„å®½åº¦ä¸º 20ï¼Œç¬¬ä¸‰åˆ—çš„å®½åº¦ä¸º 10ã€‚å› æ­¤ä¸Šè¿° SELECT è¯­å¥å°†å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š\n\n\tID          NAME                  AGE         ADDRESS     SALARY\n\t----------  --------------------  ----------  ----------  ----------\n\t1           Paul                  32          California  20000.0\n\t2           Allen                 25          Texas       15000.0\n\t3           Teddy                 23          Norway      20000.0\n\t4           Mark                  25          Rich-Mond   65000.0\n\t5           David                 27          Texas       85000.0\n\t6           Kim                   22          South-Hall  45000.0\n\t7           James                 24          Houston     10000.0\n\n**Schema ä¿¡æ¯**\nå› ä¸ºæ‰€æœ‰çš„ç‚¹å‘½ä»¤åªåœ¨ SQLite æç¤ºç¬¦ä¸­å¯ç”¨ï¼Œæ‰€ä»¥å½“æ‚¨è¿›è¡Œå¸¦æœ‰ SQLite çš„ç¼–ç¨‹æ—¶ï¼Œæ‚¨è¦ä½¿ç”¨ä¸‹é¢çš„å¸¦æœ‰ sqlite_master è¡¨çš„ SELECT è¯­å¥æ¥åˆ—å‡ºæ‰€æœ‰åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨ï¼š\n\n\tsqlite> SELECT tbl_name FROM sqlite_master WHERE type = 'table';\n\nå‡è®¾åœ¨ testDB.db ä¸­å·²ç»å­˜åœ¨å”¯ä¸€çš„ COMPANY è¡¨ï¼Œåˆ™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\ttbl_name\n\t----------\n\tCOMPANY\n\næ‚¨å¯ä»¥åˆ—å‡ºå…³äº COMPANY è¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite> SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'COMPANY';\n\nå‡è®¾åœ¨ testDB.db ä¸­å·²ç»å­˜åœ¨å”¯ä¸€çš„ COMPANY è¡¨ï¼Œåˆ™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š\n\n\tCREATE TABLE COMPANY(\n\t   ID INT PRIMARY KEY     NOT NULL,\n\t   NAME           TEXT    NOT NULL,\n\t   AGE            INT     NOT NULL,\n\t   ADDRESS        CHAR(50),\n\t   SALARY         REAL\n\t)\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(äºŒ)","url":"/2016/01/13/2016-01-13-sqlite-jiao-cheng-er/","content":"\n#### SQLite æ•°æ®ç±»å‹\n\nSQLite æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªç”¨æ¥æŒ‡å®šä»»ä½•å¯¹è±¡çš„æ•°æ®ç±»å‹çš„å±æ€§ã€‚SQLite ä¸­çš„æ¯ä¸€åˆ—ï¼Œæ¯ä¸ªå˜é‡å’Œè¡¨è¾¾å¼éƒ½æœ‰ç›¸å…³çš„æ•°æ®ç±»å‹ã€‚\n\næ‚¨å¯ä»¥åœ¨åˆ›å»ºè¡¨çš„åŒæ—¶ä½¿ç”¨è¿™äº›æ•°æ®ç±»å‹ã€‚SQLite ä½¿ç”¨ä¸€ä¸ªæ›´æ™®éçš„åŠ¨æ€ç±»å‹ç³»ç»Ÿã€‚åœ¨ SQLite ä¸­ï¼Œå€¼çš„æ•°æ®ç±»å‹ä¸å€¼æœ¬èº«æ˜¯ç›¸å…³çš„ï¼Œè€Œä¸æ˜¯ä¸å®ƒçš„å®¹å™¨ç›¸å…³ã€‚\n\n#### SQLite å­˜å‚¨ç±»\n\næ¯ä¸ªå­˜å‚¨åœ¨ SQLite æ•°æ®åº“ä¸­çš„å€¼éƒ½å…·æœ‰ä»¥ä¸‹å­˜å‚¨ç±»ä¹‹ä¸€ï¼š\n\n|å­˜å‚¨ç±»  |æè¿°      \t\t\t     |\n|-------|-----------------------|\n|NULL   |å€¼æ˜¯ä¸€ä¸ª NULL å€¼ã€‚\t\t |\n|INTEGER|\tå€¼æ˜¯ä¸€ä¸ªå¸¦ç¬¦å·çš„æ•´æ•°ï¼Œæ ¹æ®å€¼çš„å¤§å°å­˜å‚¨åœ¨ 1ã€2ã€3ã€4ã€6 æˆ– 8 å­—èŠ‚ä¸­ã€‚|\n|REAL\t|å€¼æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼Œå­˜å‚¨ä¸º 8 å­—èŠ‚çš„ IEEE æµ®ç‚¹æ•°å­—ã€‚|\n|TEXT\t|å€¼æ˜¯ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ•°æ®åº“ç¼–ç ï¼ˆUTF-8ã€UTF-16BE æˆ– |UTF-16LEï¼‰å­˜å‚¨ã€‚|\n|BLOB\t|å€¼æ˜¯ä¸€ä¸ª blob æ•°æ®ï¼Œå®Œå…¨æ ¹æ®å®ƒçš„è¾“å…¥å­˜å‚¨ã€‚|\n\nSQLite çš„å­˜å‚¨ç±»ç¨å¾®æ¯”æ•°æ®ç±»å‹æ›´æ™®éã€‚INTEGER å­˜å‚¨ç±»ï¼Œä¾‹å¦‚ï¼ŒåŒ…å« 6 ç§ä¸åŒçš„ä¸åŒé•¿åº¦çš„æ•´æ•°æ•°æ®ç±»å‹ã€‚\n\n---\n\n#### SQLite Affinity ç±»å‹\nSQLite æ”¯æŒåˆ—ä¸Šçš„ç±»å‹ affinity æ¦‚å¿µã€‚ä»»ä½•åˆ—ä»ç„¶å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä½†åˆ—çš„é¦–é€‰å­˜å‚¨ç±»æ˜¯å®ƒçš„ **affinity**ã€‚åœ¨ SQLite3 æ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªè¡¨çš„åˆ—åˆ†é…ä¸ºä»¥ä¸‹ç±»å‹çš„ affinity ä¹‹ä¸€ï¼š\n\n|Affinity |æè¿°      \t\t\t     |\n|---------|-------------------------|\n|TEXT\t  |è¯¥åˆ—ä½¿ç”¨å­˜å‚¨ç±» NULLã€TEXT æˆ– BLOB å­˜å‚¨æ‰€æœ‰æ•°æ®ã€‚\n|NUMERIC  |è¯¥åˆ—å¯ä»¥åŒ…å«ä½¿ç”¨æ‰€æœ‰äº”ä¸ªå­˜å‚¨ç±»çš„å€¼ã€‚\n|INTEGER  |ä¸å¸¦æœ‰ NUMERIC affinity çš„åˆ—ç›¸åŒï¼Œåœ¨ CAST è¡¨è¾¾å¼ä¸­å¸¦æœ‰å¼‚å¸¸ã€‚\n|REAL\t  |ä¸å¸¦æœ‰ NUMERIC affinity çš„åˆ—ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šå¼ºåˆ¶æŠŠæ•´æ•°å€¼è½¬æ¢ä¸ºæµ®ç‚¹è¡¨ç¤ºã€‚\n|NONE\t  |å¸¦æœ‰ affinity NONE çš„åˆ—ï¼Œä¸ä¼šä¼˜å…ˆä½¿ç”¨å“ªä¸ªå­˜å‚¨ç±»ï¼Œä¹Ÿä¸ä¼šå°è¯•æŠŠæ•°æ®ä»ä¸€ä¸ªå­˜å‚¨ç±»å¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­˜å‚¨ç±»ã€‚\n\n#### SQLite Affinity åŠç±»å‹åç§°\n\nä¸‹è¡¨åˆ—å‡ºäº†å½“åˆ›å»º SQLite3 è¡¨æ—¶å¯ä½¿ç”¨çš„å„ç§æ•°æ®ç±»å‹åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºäº†ç›¸åº”çš„åº”ç”¨ Affinityï¼š\n\n|æ•°æ®ç±»å‹  |Affinity      \t\t\t     |\n|---------|-----------------------------|\n|INT <br> INTEGERTINYINT <br> SMALLINT <br> MEDIUMINT <br> BIGINT <br> UNSIGNED BIG INT <br> INT2 <br> INT8  <br> | INTEGER  |            \n|CHARACTER(20) <br> VARCHAR(255) <br> VARYING CHARACTER(255) <br> NCHAR(55) <br> NATIVE CHARACTER(70) <br> NVARCHAR(100) <br> TEXT <br> CLOB                   \t\t\t\t\t\t\t  | TEXT    |\n|BLOB <br> no datatype specified                 | NONE    |\n|REAL <br> DOUBLE <br> DOUBLE PRECISION <br> FLOAT | REAL  |\n|NUMERIC <br> DECIMAL(10,5) <br> BOOLEAN <br> DATE <br> DATETIME | NUMERIC |\n\n---\n\n#### Boolean æ•°æ®ç±»å‹\nSQLite æ²¡æœ‰å•ç‹¬çš„ Boolean å­˜å‚¨ç±»ã€‚ç›¸åï¼Œå¸ƒå°”å€¼è¢«å­˜å‚¨ä¸ºæ•´æ•° 0ï¼ˆfalseï¼‰å’Œ 1ï¼ˆtrueï¼‰ã€‚\n\n---\n\n#### Date ä¸ Time æ•°æ®ç±»å‹\n\nSQLite æ²¡æœ‰ä¸€ä¸ªå•ç‹¬çš„ç”¨äºå­˜å‚¨æ—¥æœŸå’Œ/æˆ–æ—¶é—´çš„å­˜å‚¨ç±»ï¼Œä½† SQLite èƒ½å¤ŸæŠŠæ—¥æœŸå’Œæ—¶é—´å­˜å‚¨ä¸º TEXTã€REAL æˆ– INTEGER å€¼ã€‚\n\n|å­˜å‚¨ç±»\t  |æ—¥æœŸæ ¼å¼      \t\t\t     |\n|---------|-----------------------------|\n|TEXT\t  |æ ¼å¼ä¸º \"YYYY-MM-DD HH:MM:SS.SSS\" çš„æ—¥æœŸã€‚\n|REAL\t  |ä»å…¬å…ƒå‰ 4714 å¹´ 11 æœˆ 24 æ—¥æ ¼æ—å°¼æ²»æ—¶é—´çš„æ­£åˆå¼€å§‹ç®—èµ·çš„å¤©æ•°ã€‚\n|INTEGER  |\tä» 1970-01-01 00:00:00 UTC ç®—èµ·çš„ç§’æ•°ã€‚\n\næ‚¨å¯ä»¥ä»¥ä»»ä½•ä¸Šè¿°æ ¼å¼æ¥å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´å‡½æ•°æ¥è‡ªç”±è½¬æ¢ä¸åŒæ ¼å¼ã€‚\n\n#### SQLite åˆ›å»ºæ•°æ®åº“\n\nSQLite çš„ sqlite3 å‘½ä»¤è¢«ç”¨æ¥åˆ›å»ºæ–°çš„ SQLite æ•°æ®åº“ã€‚æ‚¨ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„æƒé™å³å¯åˆ›å»ºä¸€ä¸ªæ•°æ®ã€‚\n\n---\n\n**è¯­æ³•**\n\nsqlite3 å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\t$sqlite3 DatabaseName.db\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œæ•°æ®åº“åç§°åœ¨ RDBMS å†…åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚\n\n**å®ä¾‹**\n\nå¦‚æœæ‚¨æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ <testDB.db>ï¼ŒSQLITE3 è¯­å¥å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\t$sqlite3 testDB.db\n\tSQLite version 3.8.10.2 2015-05-20 18:17:19\n\tEnter \".help\" for usage hints.\n\tsqlite>\n\nä¸Šé¢çš„å‘½ä»¤å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ testDB.dbã€‚è¯¥æ–‡ä»¶å°†è¢« SQLite å¼•æ“ç”¨ä½œæ•°æ®åº“ã€‚å¦‚æœæ‚¨å·²ç»æ³¨æ„åˆ° sqlite3 å‘½ä»¤åœ¨æˆåŠŸåˆ›å»ºæ•°æ®åº“æ–‡ä»¶ä¹‹åï¼Œå°†æä¾›ä¸€ä¸ª sqlite> æç¤ºç¬¦ã€‚\nä¸€æ—¦æ•°æ®åº“è¢«åˆ›å»ºï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨ SQLite çš„ .databases å‘½ä»¤æ¥æ£€æŸ¥å®ƒæ˜¯å¦åœ¨æ•°æ®åº“åˆ—è¡¨ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>.databases\n\tseq  name             file                                                      \n\t---- ---------------- --------------------------------------------\n\t0    main             /Users/wangruofeng/Documents/SQLitePractice/testDB.db\n\næ‚¨å¯ä»¥ä½¿ç”¨ SQLite .quit å‘½ä»¤é€€å‡º sqlite æç¤ºç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>.quit\n\t$\n\n#### .dump å‘½ä»¤\n\næ‚¨å¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ SQLite .dump ç‚¹å‘½ä»¤æ¥å¯¼å‡ºå®Œæ•´çš„æ•°æ®åº“åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\t$sqlite3 testDB.db .dump > testDB.sql\n\nä¸Šé¢çš„å‘½ä»¤å°†è½¬æ¢æ•´ä¸ª testDB.db æ•°æ®åº“çš„å†…å®¹åˆ° SQLite çš„è¯­å¥ä¸­ï¼Œå¹¶å°†å…¶è½¬å‚¨åˆ° ASCII æ–‡æœ¬æ–‡ä»¶ testDB.sql ä¸­ã€‚æ‚¨å¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼ä»ç”Ÿæˆçš„ testDB.sql æ¢å¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\t$sqlite3 testDB.db < testDB.sql\n\næ­¤æ—¶çš„æ•°æ®åº“æ˜¯ç©ºçš„ï¼Œä¸€æ—¦æ•°æ®åº“ä¸­æœ‰è¡¨å’Œæ•°æ®ï¼Œæ‚¨å¯ä»¥å°è¯•ä¸Šè¿°ä¸¤ä¸ªç¨‹åºã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­å­¦ä¹ ä¸‹ä¸€ç« ã€‚\n\n#### SQLite é™„åŠ æ•°æ®åº“\n\nå‡è®¾è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“åœ¨åŒä¸€æ—¶é—´æœ‰å¤šä¸ªæ•°æ®åº“å¯ç”¨ï¼Œæ‚¨æƒ³ä½¿ç”¨å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚SQLite çš„ ATTACH DTABASE è¯­å¥æ˜¯ç”¨æ¥é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åï¼Œæ‰€æœ‰çš„ SQLite è¯­å¥å°†åœ¨é™„åŠ çš„æ•°æ®åº“ä¸‹æ‰§è¡Œã€‚ç›¸å½“äºç»™æ•°æ®åº“å–ä¸€ä¸ªåˆ«å\n\n---\n\n**è¯­æ³•**\n\nSQLite çš„ ATTACH DATABASE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tATTACH DATABASE 'DatabaseName' As 'Alias-Name';\n\nå¦‚æœæ•°æ®åº“å°šæœªè¢«åˆ›å»ºï¼Œä¸Šé¢çš„å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“å·²å­˜åœ¨ï¼Œåˆ™æŠŠæ•°æ®åº“æ–‡ä»¶åç§°ä¸é€»è¾‘æ•°æ®åº“ 'Alias-Name' ç»‘å®šåœ¨ä¸€èµ·ã€‚\n\n---\n\n**å®ä¾‹**\nå¦‚æœæƒ³é™„åŠ ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“ testDB.dbï¼Œåˆ™ ATTACH DATABASE è¯­å¥å°†å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite> ATTACH DATABASE 'testDB.db' as 'TEST';\n\nä½¿ç”¨ SQLite .database å‘½ä»¤æ¥æ˜¾ç¤ºé™„åŠ çš„æ•°æ®åº“ã€‚\n\n\tsqlite> .database\n\tseq  name             file\n\t---  ---------------  ----------------------\n\t0    main             /home/sqlite/testDB.db\n\t2    test             /home/sqlite/testDB.db\n\næ•°æ®åº“åç§° main å’Œ temp è¢«ä¿ç•™ç”¨äºä¸»æ•°æ®åº“å’Œå­˜å‚¨ä¸´æ—¶è¡¨åŠå…¶ä»–ä¸´æ—¶æ•°æ®å¯¹è±¡çš„æ•°æ®åº“ã€‚è¿™ä¸¤ä¸ªæ•°æ®åº“åç§°å¯ç”¨äºæ¯ä¸ªæ•°æ®åº“è¿æ¥ï¼Œä¸”ä¸åº”è¯¥è¢«ç”¨äºé™„åŠ ï¼Œå¦åˆ™å°†å¾—åˆ°ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>  ATTACH DATABASE 'testDB.db' as 'TEMP';\n\tError: database TEMP is already in use\n\tsqlite>  ATTACH DATABASE 'testDB.db' as 'main';\n\tError: database main is already in use\n\n---\n\n#### SQLite åˆ†ç¦»æ•°æ®åº“\n\nSQLiteçš„ **DETACH DTABASE** è¯­å¥æ˜¯ç”¨æ¥æŠŠå‘½åæ•°æ®åº“ä»ä¸€ä¸ªæ•°æ®åº“è¿æ¥åˆ†ç¦»å’Œæ¸¸ç¦»å‡ºæ¥ï¼Œè¿æ¥æ˜¯ä¹‹å‰ä½¿ç”¨ ATTACH è¯­å¥é™„åŠ çš„ã€‚å¦‚æœåŒä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶å·²ç»è¢«é™„åŠ ä¸Šå¤šä¸ªåˆ«åï¼ŒDETACH å‘½ä»¤å°†åªæ–­å¼€ç»™å®šåç§°çš„è¿æ¥ï¼Œè€Œå…¶ä½™çš„ä»ç„¶æœ‰æ•ˆã€‚æ‚¨æ— æ³•åˆ†ç¦» main æˆ– temp æ•°æ®åº“ã€‚\n\n> å¦‚æœæ•°æ®åº“æ˜¯åœ¨å†…å­˜ä¸­æˆ–è€…æ˜¯ä¸´æ—¶æ•°æ®åº“ï¼Œåˆ™è¯¥æ•°æ®åº“å°†è¢«æ‘§æ¯ï¼Œä¸”å†…å®¹å°†ä¼šä¸¢å¤±ã€‚\n\n**è¯­æ³•**\n\nSQLite çš„ DETACH DATABASE 'Alias-Name' è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tDETACH DATABASE 'Alias-Name';\n\nåœ¨è¿™é‡Œï¼Œ'Alias-Name' ä¸æ‚¨ä¹‹å‰ä½¿ç”¨ ATTACH è¯­å¥é™„åŠ æ•°æ®åº“æ—¶æ‰€ç”¨åˆ°çš„åˆ«åç›¸åŒã€‚\n\n**å®ä¾‹**\n\nå‡è®¾åœ¨å‰é¢çš„ç« èŠ‚ä¸­æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“ï¼Œå¹¶ç»™å®ƒé™„åŠ äº† 'test' å’Œ 'currentDB'ï¼Œä½¿ç”¨ .database/.databases å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\n\n\tsqlite> .databases\n\tseq  name             file\n\t---  ---------------  ----------------------\n\t0    main             /home/sqlite/testDB.db\n\t2    test             /home/sqlite/testDB.db\n\t3    currentDB        /home/sqlite/testDB.db\n\nç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•æŠŠ 'currentDB' ä» testDB.db ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite> DETACH DATABASE 'currentDB';\n\nç°åœ¨ï¼Œå¦‚æœæ£€æŸ¥å½“å‰é™„åŠ çš„æ•°æ®åº“ï¼Œæ‚¨ä¼šå‘ç°ï¼ŒtestDB.db ä»ä¸ 'test' å’Œ 'main' ä¿æŒè¿æ¥ã€‚\n\n\tsqlite> .databases\n\tseq  name             file\n\t---  ---------------  ----------------------\n\t0    main             /home/sqlite/testDB.db\n\t2    test             /home/sqlite/testDB.db\n\n---\n\n#### SQLite åˆ›å»ºè¡¨\n\nSQLite çš„ CREATE TABLE è¯­å¥ç”¨äºåœ¨ä»»ä½•ç»™å®šçš„æ•°æ®åº“åˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚åˆ›å»ºåŸºæœ¬è¡¨ï¼Œæ¶‰åŠåˆ°å‘½åè¡¨ã€å®šä¹‰åˆ—åŠæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹ã€‚\n\n---\n\n**è¯­æ³•**\n\nCREATE TABLE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n\tCREATE TABLE database_name.table_name(\n\t   column1 datatype  PRIMARY KEY(one or more columns),\n\t   column2 datatype,\n\t   column3 datatype,\n\t   .....\n\t   columnN datatype,\n\t);\n\nCREATE TABLE æ˜¯å‘Šè¯‰æ•°æ®åº“ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªæ–°è¡¨çš„å…³é”®å­—ã€‚CREATE TABLE è¯­å¥åè·Ÿç€è¡¨çš„å”¯ä¸€çš„åç§°æˆ–æ ‡è¯†ã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šå¸¦æœ‰ table_name çš„ *database_name*ã€‚\n\n**å®ä¾‹**\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª COMPANY è¡¨ï¼ŒID ä½œä¸ºä¸»é”®ï¼ŒNOT NULL çš„çº¦æŸè¡¨ç¤ºåœ¨è¡¨ä¸­åˆ›å»ºçºªå½•æ—¶è¿™äº›å­—æ®µä¸èƒ½ä¸º NULLï¼š\n\n\tsqlite> CREATE TABLE COMPANY(\n\t   ID INT PRIMARY KEY     NOT NULL,\n\t   NAME           TEXT    NOT NULL,\n\t   AGE            INT     NOT NULL,\n\t   ADDRESS        CHAR(50),\n\t   SALARY         REAL\n\t);\n\nè®©æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œæˆ‘ä»¬å°†åœ¨éšåç« èŠ‚çš„ç»ƒä¹ ä¸­ä½¿ç”¨ï¼š\n\n\tsqlite> CREATE TABLE DEPARTMENT(\n\t   ID INT PRIMARY KEY      NOT NULL,\n\t   DEPT           CHAR(50) NOT NULL,\n\t   EMP_ID         INT      NOT NULL\n\t);\n\næ‚¨å¯ä»¥ä½¿ç”¨ SQLIte å‘½ä»¤ä¸­çš„ .tables/.table å‘½ä»¤æ¥éªŒè¯è¡¨æ˜¯å¦å·²æˆåŠŸåˆ›å»ºï¼Œè¯¥å‘½ä»¤ç”¨äºåˆ—å‡ºé™„åŠ æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ã€‚\n\n\tsqlite> .tables\n\tCOMPANY          DEPARTMENT       TEST.COMPANY     TEST.DEPARTMENT\n\nåœ¨è¿™é‡Œï¼Œå¯ä»¥çœ‹åˆ° COMPANY è¡¨å‡ºç°ä¸¤æ¬¡ï¼Œä¸€ä¸ªæ˜¯ä¸»æ•°æ®åº“çš„ COMPANY è¡¨ï¼Œä¸€ä¸ªæ˜¯ä¸º testDB.db åˆ›å»ºçš„ 'test' åˆ«åçš„ test.COMPANY è¡¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ SQLite .schema å‘½ä»¤å¾—åˆ°è¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tsqlite>.schema COMPANY\n\tCREATE TABLE COMPANY(\n\t   ID INT PRIMARY KEY     NOT NULL,\n\t   NAME           TEXT    NOT NULL,\n\t   AGE            INT     NOT NULL,\n\t   ADDRESS        CHAR(50),\n\t   SALARY         REAL\n\t);\n\n#### SQLite åˆ é™¤è¡¨\n\nSQLite çš„ DROP TABLE è¯­å¥ç”¨æ¥åˆ é™¤è¡¨å®šä¹‰åŠå…¶æ‰€æœ‰ç›¸å…³æ•°æ®ã€ç´¢å¼•ã€è§¦å‘å™¨ã€çº¦æŸå’Œè¯¥è¡¨çš„æƒé™è§„èŒƒã€‚\n\n> ä½¿ç”¨æ­¤å‘½ä»¤æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºä¸€æ—¦ä¸€ä¸ªè¡¨è¢«åˆ é™¤ï¼Œè¡¨ä¸­æ‰€æœ‰ä¿¡æ¯ä¹Ÿå°†æ°¸è¿œä¸¢å¤±ã€‚\n\n---\n\n**è¯­æ³•**\n\nDROP TABLE è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ã€‚æ‚¨å¯ä»¥é€‰æ‹©æŒ‡å®šå¸¦æœ‰è¡¨åçš„æ•°æ®åº“åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\tDROP TABLE database_name.table_name;\n\n**å®ä¾‹**\n\nè®©æˆ‘ä»¬å…ˆç¡®è®¤ COMPANY è¡¨å·²ç»å­˜åœ¨ï¼Œç„¶åæˆ‘ä»¬å°†å…¶ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚\n\n\tsqlite> .tables\n\tCOMPANY       test.COMPANY\n\nè¿™æ„å‘³ç€ COMPANY è¡¨å·²å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æŠŠå®ƒä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œå¦‚ä¸‹ï¼š\n\n\tsqlite> DROP TABLE COMPANY;\n\tsqlite>\n\nç°åœ¨ï¼Œå¦‚æœå°è¯• .TABLES å‘½ä»¤ï¼Œé‚£ä¹ˆå°†æ— æ³•æ‰¾åˆ° COMPANY è¡¨äº†ï¼š\n\n\tsqlite> .tables\n\tsqlite>\n\næ˜¾ç¤ºç»“æœä¸ºç©ºï¼Œæ„å‘³ç€å·²ç»æˆåŠŸä»æ•°æ®åº“åˆ é™¤è¡¨ã€‚\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"SQLite_æ•™ç¨‹(ä¸€)","url":"/2016/01/13/2016-01-13-sqlite-jiao-cheng-[?]/","content":"\n#### ç®€ä»‹ï¼š\nSQLite æ˜¯ä¸€ä¸ªè½¯ä»¶åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æºä»£ç ä¸å—ç‰ˆæƒé™åˆ¶ã€‚\næœ¬æ•™ç¨‹å°†å‘Šè¯‰æ‚¨å¦‚ä½•ä½¿ç”¨ SQLite ç¼–ç¨‹ï¼Œå¹¶è®©ä½ è¿…é€Ÿä¸Šæ‰‹ã€‚\n\n#### ä»€ä¹ˆæ˜¯ SQLiteï¼Ÿ\nSQLiteæ˜¯ä¸€ä¸ªè¿›ç¨‹å†…çš„åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚å®ƒæ˜¯ä¸€ä¸ªé›¶é…ç½®çš„æ•°æ®åº“ï¼Œè¿™æ„å‘³ç€ä¸å…¶ä»–æ•°æ®åº“ä¸€æ ·ï¼Œæ‚¨ä¸éœ€è¦åœ¨ç³»ç»Ÿä¸­é…ç½®ã€‚\nå°±åƒå…¶ä»–æ•°æ®åº“ï¼ŒSQLite å¼•æ“ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¯ä»¥æŒ‰åº”ç”¨ç¨‹åºéœ€æ±‚è¿›è¡Œé™æ€æˆ–åŠ¨æ€è¿æ¥ã€‚SQLite ç›´æ¥è®¿é—®å…¶å­˜å‚¨æ–‡ä»¶\n\n#### ä¸ºä»€ä¹ˆè¦ç”¨ SQLiteï¼Ÿ\n* ä¸éœ€è¦ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨è¿›ç¨‹æˆ–æ“ä½œçš„ç³»ç»Ÿï¼ˆæ— æœåŠ¡å™¨çš„ï¼‰ã€‚\n* SQLite ä¸éœ€è¦é…ç½®ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦å®‰è£…æˆ–ç®¡ç†ã€‚\n* ä¸€ä¸ªå®Œæ•´çš„ SQLite æ•°æ®åº“æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„è·¨å¹³å°çš„ç£ç›˜æ–‡ä»¶ã€‚\n* SQLite æ˜¯éå¸¸å°çš„ï¼Œæ˜¯è½»é‡çº§çš„ï¼Œå®Œå…¨é…ç½®æ—¶å°äº 400KiBï¼Œçœç•¥å¯é€‰åŠŸèƒ½é…ç½®æ—¶å°äº250KiBã€‚\n* SQLite æ˜¯è‡ªç»™è‡ªè¶³çš„ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦ä»»ä½•å¤–éƒ¨çš„ä¾èµ–ã€‚\n* SQLite äº‹åŠ¡æ˜¯å®Œå…¨å…¼å®¹ ACID çš„ï¼Œå…è®¸ä»å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚\n* SQLite æ”¯æŒ SQL92ï¼ˆSQL2ï¼‰æ ‡å‡†çš„å¤§å¤šæ•°æŸ¥è¯¢è¯­è¨€çš„åŠŸèƒ½ã€‚\n* SQLite ä½¿ç”¨ ANSI-C ç¼–å†™çš„ï¼Œå¹¶æä¾›äº†ç®€å•å’Œæ˜“äºä½¿ç”¨çš„ APIã€‚\n* SQLite å¯åœ¨ UNIXï¼ˆLinux, Mac OS-X, Android, iOSï¼‰å’Œ Windowsï¼ˆWin32, WinCE, WinRTï¼‰ä¸­è¿è¡Œã€‚\n\n#### SQLite å‘½ä»¤\nä¸å…³ç³»æ•°æ®åº“è¿›è¡Œäº¤äº’çš„æ ‡å‡† SQLite å‘½ä»¤ç±»ä¼¼äº SQLã€‚å‘½ä»¤åŒ…æ‹¬ CREATEã€SELECTã€INSERTã€UPDATEã€DELETE å’Œ DROPã€‚è¿™äº›å‘½ä»¤åŸºäºå®ƒä»¬çš„æ“ä½œæ€§è´¨å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š\n\n#### DDL - æ•°æ®å®šä¹‰è¯­è¨€\n| å‘½ä»¤   | æè¿° |\n|-------|-----|\n|CREATE\t|åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨ï¼Œä¸€ä¸ªè¡¨çš„è§†å›¾ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚|\n|ALTER\t|ä¿®æ”¹æ•°æ®åº“ä¸­çš„æŸä¸ªå·²æœ‰çš„æ•°æ®åº“å¯¹è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨ã€‚     |\n|DROP\t|åˆ é™¤æ•´ä¸ªè¡¨ï¼Œæˆ–è€…è¡¨çš„è§†å›¾ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚   |\n\n#### DML - æ•°æ®æ“ä½œè¯­è¨€\n| å‘½ä»¤   | æè¿° |\n|-------| -----|\n|INSERT |åˆ›å»ºä¸€æ¡è®°å½•ã€‚|\n|UPDATE\t|ä¿®æ”¹è®°å½•ã€‚      |\n|DELETE\t|åˆ é™¤è®°å½•ã€‚      |\n\n#### DQL - æ•°æ®æŸ¥è¯¢è¯­è¨€\n| å‘½ä»¤   | æè¿° |\n|-------| -----|\n|SELECT |\tä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æ£€ç´¢æŸäº›è®°å½•ã€‚|\n\n#### åœ¨ Mac OS X ä¸Šå®‰è£… SQLite\næœ€æ–°ç‰ˆæœ¬çš„ Mac OS X ä¼šé¢„å®‰è£… SQLiteï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰å¯ç”¨çš„å®‰è£…ï¼Œåªéœ€æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œï¼š\nè¯·è®¿é—® [SQLite ä¸‹è½½é¡µé¢](http://www.sqlite.org/download.html)ï¼Œä»æºä»£ç åŒºä¸‹è½½ sqlite-autoconf-*.tar.gzã€‚\næ­¥éª¤å¦‚ä¸‹ï¼š\n\n\t$tar xvfz sqlite-autoconf-3071502.tar.gz\n\t$cd sqlite-autoconf-3071502\n\t$./configure --prefix=/usr/local\n\t$make\n\t$make install\n\n\nä¸Šè¿°æ­¥éª¤å°†åœ¨ Mac OS X æœºå™¨ä¸Šå®‰è£… SQLiteï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š\n\n\t$sqlite3\n\tSQLite version 3.7.15.2 2013-01-09 11:53:05\n\tEnter \".help\" for instructions\n\tEnter SQL statements terminated with a \";\"\n\tsqlite>\n\næœ€åï¼Œåœ¨ SQLite å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œä½¿ç”¨ SQLite å‘½ä»¤åšç»ƒä¹ ã€‚\n\n#### SQLiteè¯­æ³•\n\n**å¤§å°å†™æ•æ„Ÿæ€§**\n\næœ‰ä¸ªé‡è¦çš„ç‚¹å€¼å¾—æ³¨æ„ï¼ŒSQLite æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å‘½ä»¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ¯”å¦‚ GLOB å’Œ glob åœ¨ SQLite çš„è¯­å¥ä¸­æœ‰ä¸åŒçš„å«ä¹‰ã€‚\n\n**æ³¨é‡Š**\n\nSQLite æ³¨é‡Šæ˜¯é™„åŠ çš„æ³¨é‡Šï¼Œå¯ä»¥åœ¨ SQLite ä»£ç ä¸­æ·»åŠ æ³¨é‡Šä»¥å¢åŠ å…¶å¯è¯»æ€§ï¼Œä»–ä»¬å¯ä»¥å‡ºç°åœ¨ä»»ä½•ç©ºç™½å¤„ï¼ŒåŒ…æ‹¬åœ¨è¡¨è¾¾å¼å†…å’Œå…¶ä»– SQL è¯­å¥çš„ä¸­é—´ï¼Œä½†å®ƒä»¬ä¸èƒ½åµŒå¥—ã€‚\nSQL æ³¨é‡Šä»¥ä¸¤ä¸ªè¿ç»­çš„ \"-\" å­—ç¬¦ï¼ˆASCII 0x2dï¼‰å¼€å§‹ï¼Œå¹¶æ‰©å±•è‡³ä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆASCII 0x0aï¼‰æˆ–ç›´åˆ°è¾“å…¥ç»“æŸï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚\næ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ C é£æ ¼çš„æ³¨é‡Šï¼Œä»¥ \"/\\*\" å¼€å§‹ï¼Œå¹¶æ‰©å±•è‡³ä¸‹ä¸€ä¸ª \"*/\" å­—ç¬¦å¯¹æˆ–ç›´åˆ°è¾“å…¥ç»“æŸï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚SQLiteçš„æ³¨é‡Šå¯ä»¥è·¨è¶Šå¤šè¡Œã€‚\n\n#### SQLite è¯­å¥\næ‰€æœ‰çš„ SQLite è¯­å¥å¯ä»¥ä»¥ä»»ä½•å…³é”®å­—å¼€å§‹ï¼Œå¦‚ SELECTã€INSERTã€UPDATEã€DELETEã€ALTERã€DROP ç­‰ï¼Œæ‰€æœ‰çš„è¯­å¥ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“æŸã€‚\n\nSQLite ANALYZE è¯­å¥ï¼š\n\n\tANALYZE;\n\tor\n\tANALYZE database_name;\n\tor\n\tANALYZE database_name.table_name;\n\nSQLite AND/OR å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  CONDITION-1 {AND|OR} CONDITION-2;\n\nSQLite ALTER TABLE è¯­å¥ï¼š\n\n\tALTER TABLE table_name ADD COLUMN column_def...;\n\tSQLite ALTER TABLE è¯­å¥ï¼ˆRenameï¼‰ï¼š\n\tALTER TABLE table_name RENAME TO new_table_name;\n\nSQLite ATTACH DATABASE è¯­å¥ï¼š\n\n\tATTACH DATABASE 'DatabaseName' As 'Alias-Name';\n\tSQLite BEGIN TRANSACTION è¯­å¥ï¼š\n\tBEGIN;\n\tor\n\tBEGIN EXCLUSIVE TRANSACTION;\n\nSQLite BETWEEN å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name BETWEEN val-1 AND val-2;\n\nSQLite COMMIT è¯­å¥ï¼š\n\n\tCOMMIT;\n\nSQLite CREATE INDEX è¯­å¥ï¼š\n\n\tCREATE INDEX index_name\n\tON table_name ( column_name COLLATE NOCASE );\n\nSQLite CREATE UNIQUE INDEX è¯­å¥ï¼š\n\n\tCREATE UNIQUE INDEX index_name\n\tON table_name ( column1, column2,...columnN);\n\nSQLite CREATE TABLE è¯­å¥ï¼š\n\n\tCREATE TABLE table_name(\n\t   column1 datatype,\n\t   column2 datatype,\n\t   column3 datatype,\n\t   .....\n\t   columnN datatype,\n\t   PRIMARY KEY( one or more columns )\n\t);\n\nSQLite CREATE TRIGGER è¯­å¥ï¼š\n\n\tCREATE TRIGGER database_name.trigger_name\n\tBEFORE INSERT ON table_name FOR EACH ROW\n\tBEGIN\n\t   stmt1;\n\t   stmt2;\n\t   ....\n\tEND;\n\nSQLite CREATE VIEW è¯­å¥ï¼š\n\n\tCREATE VIEW database_name.view_name  AS\n\tSELECT statement....;\n\nSQLite CREATE VIRTUAL TABLE è¯­å¥ï¼š\n\n\tCREATE VIRTUAL TABLE database_name.table_name USING weblog( access.log );\n\tor\n\tCREATE VIRTUAL TABLE database_name.table_name USING fts3( );\n\nSQLite COMMIT TRANSACTION è¯­å¥ï¼š\n\n\tCOMMIT;\n\tSQLite COUNT å­å¥ï¼š\n\tSELECT COUNT(column_name)\n\tFROM   table_name\n\tWHERE  CONDITION;\n\nSQLite DELETE è¯­å¥ï¼š\n\n\tDELETE FROM table_name\n\tWHERE  {CONDITION};\n\nSQLite DETACH DATABASE è¯­å¥ï¼š\n\n\tDETACH DATABASE 'Alias-Name';\n\nSQLite DISTINCT å­å¥ï¼š\n\n\tSELECT DISTINCT column1, column2....columnN\n\tFROM   table_name;\n\nSQLite DROP INDEX è¯­å¥ï¼š\n\n\tDROP INDEX database_name.index_name;\n\nSQLite DROP TABLE è¯­å¥ï¼š\n\n\tDROP TABLE database_name.table_name;\n\nSQLite DROP VIEW è¯­å¥ï¼š\n\n\tDROP INDEX database_name.view_name;\n\nSQLite DROP TRIGGER è¯­å¥ï¼š\n\n\tDROP INDEX database_name.trigger_name;\n\nSQLite EXISTS å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name EXISTS (SELECT * FROM   table_name );\n\nSQLite EXPLAIN è¯­å¥ï¼š\n\n\tEXPLAIN INSERT statement...;\n\tor\n\tEXPLAIN QUERY PLAN SELECT statement...;\n\nSQLite GLOB å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name GLOB { PATTERN };\n\nSQLite GROUP BY å­å¥ï¼š\n\n\tSELECT SUM(column_name)\n\tFROM   table_name\n\tWHERE  CONDITION\n\tGROUP BY column_name;\n\nSQLite HAVING å­å¥ï¼š\n\n\tSELECT SUM(column_name)\n\tFROM   table_name\n\tWHERE  CONDITION\n\tGROUP BY column_name\n\tHAVING (arithematic function condition);\n\nSQLite INSERT INTO è¯­å¥ï¼š\n\n\tINSERT INTO table_name( column1, column2....columnN)\n\tVALUES ( value1, value2....valueN);\n\nSQLite IN å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name IN (val-1, val-2,...val-N);\n\nSQLite Like å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name LIKE { PATTERN };\n\nSQLite NOT IN å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  column_name NOT IN (val-1, val-2,...val-N);\n\nSQLite ORDER BY å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  CONDITION\n\tORDER BY column_name {ASC|DESC};\n\nSQLite PRAGMA è¯­å¥ï¼š\n\n\tPRAGMA pragma_name;\n\n\tFor example:\n\n\tPRAGMA page_size;\n\tPRAGMA cache_size = 1024;\n\tPRAGMA table_info(table_name);\n\nSQLite RELEASE SAVEPOINT è¯­å¥ï¼š\n\n\tRELEASE savepoint_name;\n\nSQLite REINDEX è¯­å¥ï¼š\n\n\tREINDEX collation_name;\n\tREINDEX database_name.index_name;\n\tREINDEX database_name.table_name;\n\nSQLite ROLLBACK è¯­å¥ï¼š\n\n\tROLLBACK;\n\tor\n\tROLLBACK TO SAVEPOINT savepoint_name;\n\nSQLite SAVEPOINT è¯­å¥ï¼š\n\n\tSAVEPOINT savepoint_name;\n\tSQLite SELECT è¯­å¥ï¼š\n\tSELECT column1, column2....columnN\n\tFROM   table_name;\n\nSQLite UPDATE è¯­å¥ï¼š\n\n\tUPDATE table_name\n\tSET column1 = value1, column2 = value2....columnN=valueN\n\t[ WHERE  CONDITION ];\n\nSQLite VACUUM è¯­å¥ï¼š\n\n\tVACUUM;\n\nSQLite WHERE å­å¥ï¼š\n\n\tSELECT column1, column2....columnN\n\tFROM   table_name\n\tWHERE  CONDITION;\n\nèµ„æ–™æ•´ç†äºï¼š[RUNOOB.COM-SQLiteæ•™ç¨‹](http://www.runoob.com/sqlite/sqlite-tutorial.html)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["Database"]},{"title":"CocoaPodsä½¿ç”¨æŒ‡å—","url":"/2016/01/13/2016-01-13-cocoapodsshi-yong-zhi-nan/","content":"\n\n\n## ç®€ä»‹\n\nCocoaPodsæ˜¯iOSæœ€å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“ç®¡ç†å·¥å…·ï¼Œç»å¤§éƒ¨åˆ†æœ‰åçš„å¼€æºç±»åº“\næ”¯æŒCocoaPodsã€‚\n\nCocoaPodsæ˜¯ç”¨Rubyå®ç°çš„ï¼Œè¦ä½¿ç”¨å®ƒé¦–å…ˆéœ€è¦æœ‰Rubyçš„ç¯å¢ƒã€‚\n\n## å®‰è£…\n\nå¹¸äºOS Xç³»ç»Ÿé»˜è®¤å·²ç»å¯ä»¥è¿è¡ŒRubyäº†ï¼Œæˆ‘ä»¬åªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```shell\nsudo gem install cocoapods\n```\n\nç”±äºæŸäº›åŸå› ï¼Œæ‰§è¡Œæ—¶ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯æç¤ºï¼š\n\n```shell\nERROR :Could not find a valid gem `cocoapods` (>= 0), here is why:\n        Unable to download data from https://rubygems.org/ - Errno::EPIPI:\n        Broken pipe - SSL_connect\n(https://rubygems.org/lastest_specs.4.8.gz)\n```\n\nå®‰è£…æˆåŠŸåï¼Œæ¥ç€æ‰§è¡Œå‘½ä»¤ï¼š\n\n```shell\npod setup\n```\n\nå¦‚æœRubyç¯å¢ƒä¸å¤Ÿæ–°ï¼Œå¯èƒ½éœ€è¦æ›´æ–°ä»¥ä¸‹ï¼š\n\n```shell\nsudo gem update --system\n```\n\nè‡³æ­¤å®‰è£…å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æœç´¢ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“ï¼š\n\n```shell\npod search AFNetworking\n```\n\n## ä½¿ç”¨\n\nä½¿ç”¨CocoaPodsç¬¬ä¸€æ­¥ï¼Œæ˜¯åœ¨å½“å‰é¡¹ç›®ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªPodfileæ–‡ä»¶ï¼š\n\n```shell\ntouch Podfile\n```\n\nç„¶ååˆ©ç”¨vimæ‰“å¼€Podfileæ–‡ä»¶ç¼–è¾‘ï¼ŒåŠ å…¥ä½ æƒ³è¦çš„ç±»åº“ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n\n```ruby\nplatform :ios\npod  'Reachability', '3.1.0'\n\nplatform :ios, '6.0'\npod 'JSONKit', '1.4'\npod 'AFNetworking', '~> 2.3.1'\n```\n\nå¦‚æœæ˜¯æ‹·è´åˆ«äººçš„é¡¹ç›®ï¼Œæˆ–æ˜¯ä¸€ä¸ªå¾ˆä¹…æ²¡æ‰“å¼€è¿‡çš„é¡¹ç›®ï¼Œå¯èƒ½éœ€è¦å…ˆæ‰§è¡Œä¸€ä¸‹ï¼š\n\n```shell\npod update\n```\n\næœ€åä¸€æ­¥ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```shell\npod install\n```\n\nå½“ç»ˆç«¯å‡ºç°ç±»ä¼¼ä¸‹é¢çš„æç¤ºåï¼Œå°±ä»£è¡¨æˆåŠŸäº†ï¼š\n\n```shell\n[!] From now no use `Sample0814.xcworkspace`.\n```\n\nè¿™ä¸ªæ—¶å€™ä¼šçœ‹åˆ°é¡¹ç›®æ–‡ä»¶å¤¹å¤šäº†ä¸€ä¸ªxxx.xcworkspace,ä»¥åè¦é€šè¿‡è¿™ä¸ªæ–‡ä»¶\næ‰“å¼€é¡¹ç›®ï¼Œè€é¡¹ç›®xxx.xcodeprojä¸å†ä½¿ç”¨ã€‚\n\n> 1. ä¸Šé¢çš„æ¯ä¸€æ­¥éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œä½†å¤§éƒ¨åˆ†é—®é¢˜éƒ½æ˜¯å› ä¸ºå±€åŸŸç½‘çš„åŸå› ï¼Œç”¨ä¸€ä¸ªç½‘é€Ÿç¨³\nå®šçš„å¢ƒå¤–VPNå¯ç ´\n> 2. å¦‚æœä¸Šé¢å› ä¸ºæƒé™é—®é¢˜å®‰è£…å¤±è´¥ï¼Œå¿…é¡»æ¯æ¬¡éƒ½è¦åˆ é™¤\n>\n```sh\nrm -rf /User/loginname/Library/Caches/CocoaPods/\n```\nå› ä¸ºè¿™ä¸ªç¼“å†²ä¸­ä¼šå­˜ä¸‹ä½ çš„githubçš„ä¸œè¥¿ï¼Œé€ æˆæ¯æ¬¡è°ƒç”¨ä¸Šæ¬¡æƒé™é—®é¢˜çš„ç¼“å­˜ã€‚\n> 3. å…³äºPodfileæ–‡ä»¶ç¼–è¾‘æ—¶ï¼Œç¬¬ä¸‰æ–¹ç‰ˆæœ¬å·çš„å„ç§å†™æ³•:\n\n\n```ruby\npod 'AFNetworking'      \t\t # ä¸æ˜¾å¼æŒ‡å®šä¾èµ–åº“ç‰ˆæœ¬ï¼Œè¡¨ç¤ºæ¯æ¬¡éƒ½è·å–æœ€æ–°ç‰ˆæœ¬\npod 'AFNetworking', '2.0'        # åªä½¿ç”¨2.0ç‰ˆæœ¬\npod 'AFNetworking', '>2.0'       # ä½¿ç”¨é«˜äº2.0çš„ç‰ˆæœ¬\npod 'AFNetworking', '>=2.0'      # ä½¿ç”¨å¤§äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬\npod 'AFNetworking', '<2.0'       # ä½¿ç”¨å°äº2.0çš„ç‰ˆæœ¬\npod 'AFNetworking', '<=2.0'      # ä½¿ç”¨å°äºæˆ–ç­‰äº2.0çš„ç‰ˆæœ¬\npod 'AFNetworking', '~>0.1.2'    # ä½¿ç”¨å¤§äºç­‰äº0.1.2ä½†å°äº0.2çš„ç‰ˆæœ¬ï¼Œç›¸å½“äº>=0.1.2å¹¶ä¸”<0.2.0\npod 'AFNetworking', '~>0.1'      # ä½¿ç”¨å¤§äºç­‰äº0.1ä½†å°äº1.0çš„ç‰ˆæœ¬\npod 'AFNetworking', '~>0'        # é«˜äº0çš„ç‰ˆæœ¬ï¼Œå†™è¿™ä¸ªé™åˆ¶å’Œä»€ä¹ˆéƒ½ä¸å†™æ˜¯ä¸€ä¸ªæ•ˆæœï¼Œéƒ½è¡¨ç¤ºä½¿ç”¨æœ€æ–°ç‰ˆæœ¬\n```\n\n## å‚è€ƒèµ„æ–™\n\n* [è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](http://semver.org)\n","tags":["CocoaPods","Skill"],"categories":["iOS"]},{"title":"GET&amp;POST","url":"/2016/01/13/2016-01-13-get-and-post/","content":"\n> GETå’ŒPOSTæ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„HTTPæ–¹æ³• .\n\n### GET\n* GETçš„è¯­ä¹‰æ˜¯è·å–æŒ‡å®šçš„URLèµ„æº, å°†æ•°æ®æŒ‰ç…§ variable = value çš„å½¢å¼, æ·»åŠ åˆ°actionæ‰€æŒ‡å‘çš„URLåé¢, å¹¶ä¸”ä¸¤è€…ä½¿ç”¨ ' ? 'è¿æ¥, å„å˜é‡ä¹‹é—´ä½¿ç”¨ ' & 'è¿æ¥ .\n* å¯¹ç”¨æˆ·æ¥è¯´ä¸å®‰å…¨, å› ä¸ºåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­, æ•°æ®è¢«æ”¾åœ¨è¯·æ±‚çš„URLä¸­.\n* ä¼ è¾“çš„æ•°æ®é‡å°, è¿™ä¸»è¦æ˜¯å› ä¸ºå—URLé•¿åº¦é™åˆ¶.\n\n### URLé•¿åº¦é™åˆ¶\n\n åœ¨httpåè®®ä¸­ï¼Œå…¶å®å¹¶æ²¡æœ‰å¯¹urlé•¿åº¦ä½œå‡ºé™åˆ¶ï¼Œå¾€å¾€urlçš„æœ€å¤§é•¿åº¦å’Œç”¨æˆ·æµè§ˆå™¨å’ŒWebæœåŠ¡å™¨æœ‰å…³ï¼Œä¸ä¸€æ ·çš„æµè§ˆå™¨ï¼Œèƒ½æ¥å—çš„æœ€å¤§é•¿åº¦å¾€å¾€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå½“ç„¶ï¼Œä¸ä¸€æ ·çš„WebæœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§é•¿åº¦çš„URLçš„èƒ½åŠ›ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚\n\n    IEæµè§ˆå™¨å¯¹URLçš„æœ€å¤§é™åˆ¶ä¸º2083ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼Œæäº¤æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”ã€‚\n    \n    Firefoxæµè§ˆå™¨URLçš„é•¿åº¦é™åˆ¶ä¸º65,536ä¸ªå­—ç¬¦ ;\n    \n    Apache(Server)èƒ½å¤Ÿæ¥å—çš„æœ€å¤§URLé•¿åº¦ä¸º8192ä¸ªå­—ç¬¦ ;\n    \n    å¦‚æœæµè§ˆå™¨çš„ç¼–ç ä¸ºUTF8çš„è¯ï¼Œä¸€ä¸ªæ±‰å­—æœ€ç»ˆç¼–ç åçš„å­—ç¬¦é•¿åº¦ä¸º9ä¸ªå­—ç¬¦ã€‚\n\nGETè¯·æ±‚ç¤ºä¾‹\n\n![GetRequest](http://static.oschina.net/uploads/space/2014/0602/164040_3SOT_1774273.png)\n\n### POST\n* POSTè¯­ä¹‰æ˜¯å‘æŒ‡å®šURLçš„èµ„æºæ·»åŠ æ•°æ®.\n* å°†æ•°æ®æ”¾åœ¨æ•°æ®ä½“ä¸­, æŒ‰ç…§å˜é‡å’Œå€¼ç›¸å¯¹åº”çš„æ–¹å¼, ä¼ é€’åˆ°actionæ‰€æŒ‡å‘çš„URL.\n* æ‰€æœ‰æ•°æ®å¯¹ç”¨æˆ·æ¥è¯´ä¸å¯è§.\n* å¯ä»¥ä¼ è¾“å¤§é‡æ•°æ®, ä¸Šä¼ æ–‡ä»¶åªèƒ½ä½¿ç”¨POST.\n\nPOSTè¯·æ±‚ç¤ºä¾‹\n\n![PostRequest](http://static.oschina.net/uploads/space/2014/0602/164119_VRKY_1774273.png)\n\n### åœ¨æµè§ˆå™¨ä¸­åˆ¤æ–­GET&POSTè¯·æ±‚\n\nå› ä¸ºPOSTè¯·æ±‚ä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ä½“, å› æ­¤åˆ·æ–°é¡µé¢æ—¶ä¼šå‡ºç°æç¤ºçª—å£. è€ŒGETè¯·æ±‚ä¸ä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ä½“, å› æ­¤æ²¡æœ‰æç¤º .\n\nä»è¯·æ±‚æœ¬è´¨æ¥çœ‹, GETè¯·æ±‚è¦æ¯”POSTæ›´å®‰å…¨, æ•ˆç‡ä¹Ÿä¼šæ›´é«˜ .(å¯¹æœåŠ¡å™¨è€Œè¨€)\n\n### iOSç½‘ç»œå‘é€ç½‘ç»œè¯·æ±‚çš„æ­¥éª¤\n1. å®ä¾‹åŒ–URL( ç½‘ç»œèµ„æº ) ;\n\n2. æ ¹æ®URLå»ºç«‹URLRequest ( ç½‘ç»œè¯·æ±‚ ) ;\n\n    é»˜è®¤ä¸ºGETè¯·æ±‚; å¯¹äºPOSTè¯·æ±‚,  éœ€è¦åˆ›å»ºè¯·æ±‚çš„æ•°æ®ä½“ .\n\n3. åˆ©ç”¨ URLConnection å‘é€ç½‘ç»œè¯·æ±‚(å‘é€è¯·æ±‚å¹¶è·å¾—ç»“æœ) ;\n\nNSURLConnectionæä¾›äº†ä¸¤ä¸ªé™æ€æ–¹æ³•å¯ä»¥ç›´æ¥ä»¥åŒæ­¥æˆ–å¼‚æ­¥çš„æ–¹å¼å‘æœåŠ¡å™¨å‘é€ç½‘ç»œè¯·æ±‚.   \t\n\n    åŒæ­¥è¯·æ±‚:\n    sendSynchronousRequest : returningResponse : error :\n    \n    å¼‚æ­¥è¯·æ±‚:\n    sendAsynchronousRequest : queue : completionHandler :\n\nåœ¨ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­, æ¥æ”¶æ•°æ®çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯é€šè¿‡ NSURLConnectionDataDelegateæ¥å®ç°çš„, å¸¸ç”¨ä»£ç†æ–¹æ³•åŒ…æ‹¬:\n\n```objc\n// æœåŠ¡å™¨å¼€å§‹è¿”å›æ•°æ®\n- (void)connection:didReceiveResponse:\n// æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œæœ¬æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡\n- (void)connection:didReceiveData:\n// æ•°æ®æ¥æ”¶å®Œæ¯•ï¼Œåšæ•°æ®çš„æœ€åå¤„ç†\n- (void)connectionDidFinishLoading:\n// ç½‘ç»œè¿æ¥é”™è¯¯\n- (void)connection:didFailWithError:\n```\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç½‘ç»œ"],"categories":["iOS"]},{"title":"HTTP POST and multipart forms","url":"/2016/01/13/2016-01-13-http-post-and-multipart-forms/","content":"\n#### `HTTP POST`ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\n\n* http Body ä¸­çš„NSData ç¼–ç æ–¹å¼è¦ç”¨`NSASCIIStringEncoding`è€Œä¸æ˜¯`NSUTF8StringEncoding`\n* é€šè¿‡\n\n\t`NSString *postLength = [NSString stringWithFormat:@\"%d\",[postData length]];`\t\t\nè®¡ç®—æ•°æ®çš„é•¿åº¦\n\n#### POSTå‚æ•°è®¾ç½®\n\n```objc\n\t\t//è®¾ç½®header Content-Length\n\t\t[request setValue:postLength forHTTPHeaderField:@\"Content-Length\"];\n\t\t//è®¾ç½®header contentType\n\t\t[request setValue:@\"application/x-www-form-urlencoded\" forHTTPHeaderField:@\"Current-Type\"];\n\t\t//è®¾ç½®body\n\t\t[request setHTTPBody:postData];\n```\n\n> å¤‡æ³¨:æ™®é€š`post`çš„`header`çš„`Current-Type`ä¸º`application/x-www-form-urlencoded`\n\n#### Multipart Forms POSTå‚æ•°è®¾ç½®\n\n```objc\n\t\t//è®¾ç½®header contentType\n\t\tNSString *contentType = [NSString stringWithFormat:@\"multipart/form-data; boundary=%@\", boundary];\n\t\t[request addValue:contentType forHTTPHeaderField:@\"Content-Type\"];\n\n\t\t//è®¾ç½®body contentType\n\t\t[body appendData:[@\"Content-Type: application/octet-stream\\r\\n\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n```\n\n> å¤‡æ³¨:`Multipart Forms`çš„`header`çš„`Current-Type`ä¸º`multipart/form-data`\n\nrequest body like this\n\n\t\t--YOUR_BOUNDARY_STRING\n\t\tContent-Disposition: form-data; name=\"photo\"; filename=\"calm.jpg\"\n\t\tContent-Type: image/jpeg\n\n\t\tYOUR_IMAGE_DATA_GOES_HERE\n\t\t--YOUR_BOUNDARY_STRING\n\t\tContent-Disposition: form-data; name=\"message\"\n\n\t\tMy first message\n\t\t--YOUR_BOUNDARY_STRING\n\t\tContent-Disposition: form-data; name=\"user\"\n\n\t\t1\n\t\t--YOUR_BOUNDARY_STRING\n\nIâ€™m sending over three variables: an image named photo, a string named message, and an integer named user. Itâ€™s important to note the linebreaks and the dashes before the boundary string. These must be included in order to build a good request. Now lets write some objective-c:\n\n\n```objc\n\n\tNSString *boundary = @\"YOUR_BOUNDARY_STRING\";\n\tNSString *contentType = [NSString stringWithFormat:@\"multipart/form-data; boundary=%@\", boundary];\n\t[request addValue:contentType forHTTPHeaderField:@\"Content-Type\"];\n\n\tNSMutableData *body = [NSMutableData data];\n\n\t[body appendData:[[NSString stringWithFormat:@\"\\r\\n--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n\t[body appendData:[[NSString stringWithFormat:@\"Content-Disposition: form-data; name=\\\"photo\\\"; filename=\\\"%@.jpg\\\"\\r\\n\", self.message.photoKey] dataUsingEncoding:NSUTF8StringEncoding]];\n\t[body appendData:[@\"Content-Type: application/octet-stream\\r\\n\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n\t[body appendData:[NSData dataWithData:imageData]];\n\n\t[body appendData:[[NSString stringWithFormat:@\"\\r\\n--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n\t[body appendData:[[NSString stringWithFormat:@\"Content-Disposition: form-data; name=\\\"message\\\"\\r\\n\\r\\n%@\", self.message.message] dataUsingEncoding:NSUTF8StringEncoding]];\n\n\t[body appendData:[[NSString stringWithFormat:@\"\\r\\n--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n\t[body appendData:[[NSString stringWithFormat:@\"Content-Disposition: form-data; name=\\\"user\\\"\\r\\n\\r\\n%d\", 1] dataUsingEncoding:NSUTF8StringEncoding]];\n\n\t[body appendData:[[NSString stringWithFormat:@\"\\r\\n--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n\n\t[request setHTTPBody:body];\n\n```\n\n\nNow all we need to do is make a connection to the server and send the request:\n\n\t[request setHTTPBody:body];\n\n```objc\n\tNSURLResponse *response;\n\tNSError *error;\n\n\t[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];\n```\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* [Sending Multipart Forms with Objective-C](http://nthn.me/posts/2012/objc-multipart-forms.html)\n* [POST multipart/form-data with Objective-C](http://stackoverflow.com/questions/24250475/post-multipart-form-data-with-objective-c)\n* [Sending an HTTP POST request on iOS](http://stackoverflow.com/questions/15749486/sending-an-http-post-request-on-ios)\n* [The Multipart Content-Type--w3è§„èŒƒ](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç½‘ç»œ"],"categories":["iOS"]},{"title":"å·¥å‚æ¨¡å¼è¯¦è§£","url":"/2016/01/13/2016-01-13-gong-han-mo-shi-xiang-jie/","content":"\n## 3ç§å·¥å‚æ¨¡å¼\næ¦‚è¿°ï¼šå·¥å‚æ¨¡å¼æ˜¯ä¸ªç³»åˆ—ï¼Œåˆ†ä¸ºç®€å•å·¥å‚æ¨¡å¼ï¼Œ å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè¿™ä¸‰ç§æ¨¡å¼ä¹Ÿéå¸¸å¸¸ç”¨ã€‚è¿™äº›æ¨¡å¼æœ€æœ€ç»å…¸çš„å°±ä¾‹å­å°±æ˜¯è®¾è®¡è®¡ç®—å™¨ã€‚\n* Factory Method (å·¥å‚æ–¹æ³•æ¨¡å¼)\n* Abstract Factory (æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰\n* Simple Factoryï¼ˆç®€å•å·¥å‚æ¨¡å¼ï¼‰\n\n`å‚è€ƒGoFã€ŠDesign Patternsã€‹ä¸€ä¹¦`\n\nGOFæ˜¯è¿™æ ·æè¿°å·¥å‚æ¨¡å¼çš„ï¼š\n > â€œDefine an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.â€\n\n> åœ¨åŸºç±»ä¸­å®šä¹‰åˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªæ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•è®©ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ä¸­è¿›è¡Œã€‚\n\n### ç®€å•å·¥å‚æ¨¡å¼\n  ä¸¥æ ¼çš„è¯´ï¼Œç®€å•å·¥å‚æ¨¡å¼å¹¶ä¸æ˜¯23ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒåªç®—å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç‰¹æ®Šå®ç°ã€‚ç®€å•å·¥å‚æ¨¡å¼åœ¨å®é™…ä¸­çš„åº”ç”¨ç›¸å¯¹äºå…¶ä»–2ä¸ªå·¥å‚æ¨¡å¼ç”¨çš„è¿˜æ˜¯ç›¸å¯¹å°‘å¾—å¤šï¼Œå› ä¸ºå®ƒåªé€‚åº”å¾ˆå¤šç®€å•çš„æƒ…å†µï¼Œæœ€æœ€é‡è¦çš„æ˜¯å®ƒè¿èƒŒäº†æˆ‘ä»¬åœ¨æ¦‚è¿°ä¸­è¯´çš„å¼€æ”¾-å°é—­åŸåˆ™ã€‚å› ä¸ºæ¯æ¬¡ä½ è¦æ–°æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½éœ€è¦åœ¨ç”Ÿswitch-case è¯­å¥ï¼ˆæˆ–è€…if-else è¯­å¥ï¼‰ä¸­å»ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ åˆ†æ”¯æ¡ä»¶\n\n  ç®€å•å·¥å‚æ¨¡å¼è§’è‰²åˆ†é…ï¼š\n\n1. Creatorï¼ˆäº§å“åˆ›å»ºè€…ï¼‰\nç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰å®ä¾‹çš„å†…éƒ¨é€»è¾‘ã€‚å·¥å‚ç±»å¯ä»¥è¢«å¤–ç•Œç›´æ¥è°ƒç”¨ï¼Œåˆ›å»ºæ‰€éœ€çš„äº§å“å¯¹è±¡ã€‚\n\n2.  Product ï¼ˆ äº§å“æŠ½è±¡ç±»ï¼‰\nç®€å•å·¥å‚æ¨¡å¼æ‰€åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œå®ƒè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹æ‰€å…±æœ‰çš„å…¬å…±æ¥å£ã€‚\n\n3. Concrete Product ï¼ˆå…·ä½“äº§å“ï¼‰\næ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å……å½“è¿™ä¸ªè§’è‰²çš„æŸä¸ªå…·ä½“ç±»çš„å®ä¾‹ã€‚\n\nç®€å•çš„å·¥å‚æ¨¡å¼UMLå›¾\n![ç®€å•å·¥å‚æ¨¡å¼](http://ww1.sinaimg.cn/mw690/64124373gw1ezgte12komj20h109smxx.jpg)\n\nè€ƒè™‘ä¸‹é¢ä¸€ä¸ªäº‹ä¾‹ï¼š åŠ å…¥ä½ æ˜¯ä¸€ä¸ªå•†äººï¼Œä½ åšçš„çš„æ˜¯æ‰‹æœºç”Ÿæ„ã€‚ç°åœ¨ä½ ç”Ÿäº§android æ‰‹æœºå’Œiphoneç­‰ï¼Œè€ƒè™‘åˆ°ä»¥åä½ å¯èƒ½è¿˜ä¼šç”Ÿäº§å…¶ä»–æ‰‹æœºä¾‹å¦‚ubuntuæ‰‹æœºã€‚å‡å®šä½ é€‰æ‹©äº†ç®€å•å·¥å‚æ¨¡å¼æ¥å®ç°ã€‚é‚£ä¹ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰€æœ‰äº§å“çš„æŠ½è±¡åŸºç±»ï¼ˆProductï¼‰ å³æ˜¯Phoneç±»ï¼š\n\n```java\nclass Phone   \n{  \npublic:  \n    virtual ~Phone(){};//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ²  \n    virtual void call(string number) = 0;  \n};\n```\n\nç„¶åæˆ‘ä»¬éœ€è¦å…·ä½“çš„äº§å“ç±» Concrete Productï¼š AndroidPhone å’ŒiOSPhone\n\n```java\nclass AndroidPhone : public Phone   \n{  \npublic:  \n    void call(string number){ cout<<\"AndroidPhone is calling...\"<<endl;}  \n};  \n\nclass IosPhone : public Phone  \n{  \npublic:  \n    void call(string number) { cout<<\"IosPhone is calling...\"<<endl;}  \n};\n```\n\næœ€åæˆ‘ä»¬éœ€è¦Creator\n\n```java\nclass PhoneFactory  \n{  \npublic:  \n    Phone* createPhone(string phoneName)  \n    {  \n        if(phoneName == \"AndroidPhone\")  \n        {  \n            return new AndroidPhone();  \n        }else if(phoneName == \"IosPhone\")  \n        {  \n            return new IosPhone();  \n        }  \n\n        return NULL;  \n    }  \n};\n```\n\nå®¢æˆ·ç«¯è¿™æ ·å®ç°ï¼š\n\n```java\nvoid main()  \n{  \n    PhoneFactor factory;  \n    Phone* myAndroid = factory.createPhone(\"AndroidPhone\");  \n    Phone* myIPhone = factory.createPhone(\"iOSPhone\");  \n    if(myAndroid)  \n    {  \n        myAndroid->call(\"123\");  \n        delete myAndroid;  \n        myAndroid = NULL;  \n    }  \n\n    if(myIPhone)  \n    {  \n        myIPhone->call(\"123\");  \n        delete  myIPhone;  \n        myIPhone = NULL;  \n    }  \n}\n```\n\nè¿™å°±æ˜¯ç®€å•å·¥å‚æ–¹æ³•ï¼ŒæŠŠæ‰€æœ‰çš„åˆ›å»ºäº¤ç»™creator,creator é€šè¿‡switch-case(æˆ–è€…if-else)è¯­å¥æ¥é€‰æ‹©å…·ä½“åˆ›å»ºçš„å¯¹è±¡ã€‚ç®€å•æ˜äº†ã€‚ä½†æ˜¯å°±å¦‚ä¸Šé¢æ‰€è¯´ï¼Œå®ƒæœ€è‡´å‘½çš„é—®é¢˜çš„è¿èƒŒäº†å¼€æ”¾-å°é—­åŸåˆ™ã€‚æ¯æ¬¡ä½ è¦æ–°æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½è¦ä¿®æ”¹factoré‡Œé¢çš„createPhoneä»£ç ã€‚ ä½†æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n### å·¥å‚æ–¹æ³•æ¨¡å¼\nä¸ªäººè§‰å¾—å·¥å‚æ–¹æ³•æ¨¡å¼åœ¨å·¥å‚æ¨¡å¼å®¶æ—ä¸­æ˜¯ç”¨çš„æœ€å¤šæ¨¡å¼ã€‚ä¸Šé¢è¯´è¿‡äº†ï¼Œå¦‚æœç®€å•å·¥å‚æ¨¡å¼ï¼Œè¦æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è¦å¢åŠ WinPhone çš„ç”Ÿäº§ï¼Œé‚£ä¹ˆæˆ‘è¦ä¿®æ”¹PhoneFactoryä¸­çš„createPhone ä¸­çš„åˆ†æ”¯åˆ¤æ–­æ¡ä»¶ã€‚è¿™è¿èƒŒäº†å¼€æ”¾-å°é—­åŸåˆ™ï¼Œé‚£ä¸ºä»€ä¹ˆä¸èƒ½å°†åˆ›å»ºæ–¹æ³•æ”¾åˆ°å­ç±»ä¸­å‘¢ï¼Ÿ\nå·¥å‚æ–¹æ³•çš„å®šä¹‰å°±æ˜¯ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ï¼Œå·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚\n\n  å·¥å‚æ–¹æ³•æ¨¡å¼è§’è‰²ï¼š\n1. æŠ½è±¡å·¥å‚(Creator)è§’è‰²ï¼šæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œä¸åº”ç”¨ç¨‹åºæ— å…³ã€‚ä»»ä½•åœ¨æ¨¡å¼ä¸­åˆ›å»ºçš„å¯¹è±¡çš„å·¥å‚ç±»å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ã€‚\n2. å…·ä½“å·¥å‚(Concrete Creator)è§’è‰²ï¼šè¿™æ˜¯å®ç°æŠ½è±¡å·¥å‚æ¥å£çš„å…·ä½“å·¥å‚ç±»ï¼ŒåŒ…å«ä¸åº”ç”¨ç¨‹åºå¯†åˆ‡ç›¸å…³çš„é€»è¾‘ï¼Œå¹¶ä¸”å—åˆ°åº”ç”¨ç¨‹åºè°ƒç”¨ä»¥åˆ›å»ºäº§å“å¯¹è±¡ã€‚\n3. æŠ½è±¡äº§å“(Product)è§’è‰²ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼æ‰€åˆ›å»ºçš„å¯¹è±¡çš„è¶…ç±»å‹ï¼Œä¹Ÿå°±æ˜¯äº§å“å¯¹è±¡çš„å…±åŒçˆ¶ç±»æˆ–å…±åŒæ‹¥æœ‰çš„æ¥å£ã€‚\n4. å…·ä½“äº§å“(Concrete Product)è§’è‰²ï¼šè¿™ä¸ªè§’è‰²å®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ã€‚æŸå…·ä½“äº§å“æœ‰ä¸“é—¨çš„å…·ä½“å·¥å‚åˆ›å»ºï¼Œå®ƒä»¬ä¹‹é—´å¾€å¾€ä¸€ä¸€å¯¹åº”\n\nå·¥å‚æ–¹æ³•æ¨¡å¼UMLå›¾ï¼š\n![å·¥å‚æ–¹æ³•æ¨¡å¼](http://ww1.sinaimg.cn/mw690/64124373gw1ezgtqlod9zj20hy0aijrz.jpg)\n\nçœ‹å®šä¹‰çœ‹çš„æ™•ä¹ä¹çš„ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä»£ç ï¼šäº§å“æ¥å£ï¼Œä»¥åŠå…¶ç›¸åº”çš„å­ç±»ã€‚\n\n```java\nclass Phone   \n{  \npublic:  \n    virtual ~Phone(){};//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ²  \n    virtual void call(string number) = 0;  \n};  \n\nclass AndroidPhone : public Phone   \n{  \npublic:  \n    void call(string number){ cout<<\"AndroidPhone is calling...\"<<endl;}  \n};  \n\nclass iOSPhone : public Phone  \n{  \npublic:  \n    void call(string number) { cout<<\"iOSPhone is calling...\"<<endl;}  \n};\n```\n\nä¸Šé¢è¿™ä¸ªå’Œç®€å•å·¥å‚æ–¹æ³•è¿˜æ˜¯ä¸€æ ·çš„ã€‚æ¥ä¸‹æ¥ä¸ä¸€æ ·çš„æ¥äº†...\n\n```java\nclass PhoneFactory  \n{  \npublic:  \n    virtual ~PhoneFactory(){};  \n    virtual Phone* createPhone() = 0;  \n};  \n\nclass AndroidPhoneFactory : public PhoneFactory  \n{  \npublic:  \n    virtual Phone* createPhone()  \n    {  \n        return new AndroidPhone();  \n    }  \n};  \n\nclass IosPhoneFactory : public PhoneFactory  \n{  \npublic:  \n    virtual Phone* createPhone()  \n    {  \n        return new IosPhone();  \n    }  \n};\n```\n\nå·¥å‚æ–¹æ³•å°†PhoneFactoryæŠ½è±¡æˆäº†åŸºç±»ï¼ŒPhoneFactoryçš„createPhoneä¸åœ¨åƒä»¥å‰é‚£æ ·å°†æ‰€æœ‰çš„åˆ¤æ–­å¡åˆ°é‡Œé¢ã€‚è€Œæ˜¯æ”¹ç”±å…¶å­ç±»æ¥å®ç°åˆ›å»ºåŠŸèƒ½ï¼Œè¿™æ„Ÿè§‰å°±æ˜¯æƒåŠ›ä¸‹æ”¾ã€‚\nå®¢æˆ·ç«¯ï¼š\n\n```java\nvoid main()  \n{  \n    PhoneFactory*  androidCreator = new AndroidPhoneFactory();  \n    PhoneFactory*  iosCreator = new IosPhoneFactory();  \n    Phone*  myAndroid = androidCreator->createPhone();  \n    Phone* myIPhone = iosCreator->createPhone();  \n    if(myAndroid)  \n    {  \n        myAndroid->call(\"123\");  \n        delete myAndroid;  \n        myAndroid = NULL;  \n    }  \n\n    if(myIPhone)  \n    {  \n        myIPhone->call(\"123\");  \n        delete  myIPhone;  \n        myIPhone = NULL;  \n    }  \n\n    delete androidCreator;  \n    delete iosCreator;  \n}\n```\n\nåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒå·¥å‚ç±»ä¸åœ¨è´Ÿè´£äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“çš„åˆ›å»ºå·¥ä½œäº¤ç»™å­ç±»å»å®Œæˆã€‚ä¹Ÿå°±æ˜¯åæ‰€è¿™ä¸ªæ ¸å¿ƒå·¥å‚ä»…ä»…åªæ˜¯æä¾›åˆ›å»ºçš„æ¥å£ï¼Œå…·ä½“å®ç°æ–¹æ³•äº¤ç»™ç»§æ‰¿å®ƒçš„å­ç±»å»å®Œæˆã€‚å½“æˆ‘ä»¬çš„ç³»ç»Ÿéœ€è¦å¢åŠ å…¶ä»–æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦ç»§æ‰¿PhoneFactoryè¿™ä¸ªç±»ï¼Œå¹¶ä¸”å®ç°createPhoneæ¥å£ã€‚ ä¸éœ€è¦å¯¹åŸå·¥å‚PhoneFactoryè¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œè¿™æ ·å¾ˆå¥½åœ°ç¬¦åˆäº†â€œå¼€æ”¾-å°é—­â€œåŸåˆ™ã€‚\n\nè™½ç„¶å·¥å‚æ–¹æ³•æ¨¡å¼æ»¡è¶³äº†\"å¼€æ”¾-å°é—­â€åŸåˆ™ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å¼ä¹Ÿä»ç„¶æœ‰ç¼ºç‚¹ï¼šæ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œæ˜¯çš„ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ã€‚\n\n### æŠ½è±¡å·¥å‚æ¨¡å¼\nåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå…¶å®æˆ‘ä»¬æœ‰ä¸€ä¸ªæ½œåœ¨æ„è¯†çš„æ„è¯†ã€‚é‚£å°±æ˜¯æˆ‘ä»¬ç”Ÿäº§çš„éƒ½æ˜¯åŒä¸€ç±»äº§å“ï¼Œä¾‹å¦‚æˆ‘ä»¬ç”Ÿäº§çš„éƒ½æ˜¯æ‰‹æœºï¼é‚£ä¹ˆç°åœ¨å‡å¦‚ç°åœ¨æˆ‘ä»¬åˆè¦ç”Ÿäº§å¹³æ¿äº†äº†å‘¢ï¼Ÿé‚£ä¹ˆå°±è¦ç”¨åˆ°æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚æˆ‘æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿç”¨çš„æ¯”è¾ƒå¤šåœ¨å·¥å‚æ¨¡å¼å®¶æ—ä¸­ï¼Œä»…æ¬¡äºå·¥å‚æ–¹æ³•æ¨¡å¼ã€‚åœ¨äº†è§£æŠ½è±¡å·¥å‚æ¨¡å¼ä¹‹å‰ï¼Œè¿˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„ç†æ¸…ä¸‹äº§å“ç­‰çº§ç»“æ„å’Œäº§å“ç°‡çš„æ¦‚å¿µã€‚ä¸‹é¢çš„å›¾è¿˜æ˜¯è€å›¾ã€‚ä½†æ˜¯æˆ‘è®²è®²æˆ‘çš„ç†è§£ï¼š\n\n![æŠ½è±¡å·¥å‚æ¨¡å¼](http://ww2.sinaimg.cn/mw690/64124373gw1ezgtxoyognj20d8087wes.jpg)\näº§å“ç­‰çº§ç»“æ„ï¼šäº§å“çš„ç­‰çº§ç»“æ„ä¹Ÿå°±æ˜¯äº§å“çš„ç»§æ‰¿ç»“æ„ã€‚æˆ‘ç†è§£å°±æ˜¯åŒä¸€ç±»äº§å“ï¼Œæ¯”å¦‚æ‰‹æœºæ˜¯ä¸€ä¸ªç³»åˆ—ï¼Œæœ‰androidæ‰‹æœºï¼Œiosæ‰‹æœºï¼Œwinæ‰‹æœºï¼Œé‚£ä¹ˆè¿™ä¸ªæŠ½è±¡ç±»æ‰‹æœºå’Œä»–çš„å­ç±»å°±æ„æˆäº†ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ã€‚é‚£å…¶ä»–çš„å¹³æ¿æ˜¾ç„¶ä¸æ˜¯å’Œæ‰‹æœºä¸€ä¸ªç³»åˆ—çš„ï¼Œä¸€ä¸ªå¹³æ¿ï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯ä¸åŒçš„äº§å“ç­‰çº§ç»“æ„ã€‚\n\näº§å“æ—: åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œäº§å“æ—æ˜¯æŒ‡ç”±åŒä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„ï¼Œä½äºä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­çš„ä¸€ç»„äº§å“ã€‚æ¯”å¦‚åˆ†ä¸ºandroidäº§å“ï¼Œå’Œiosäº§å“ã€‚å…¶ä¸­ä¸€ä¸ªiosäº§å“åŒ…å«iosæ‰‹æœºå’Œioså¹³æ¿ã€‚æ˜¾ç„¶iosæ‰‹æœºå’Œioså¹³æ¿ä¸æ˜¯åŒä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„çš„ï¼Œå› ä¸ºä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œä¸€ä¸ªæ˜¯å¹³æ¿ã€‚ä½†ä»–ä»¬æ˜¯åŒä¸€ä¸ªäº§å“ç°‡---éƒ½æ˜¯iosäº§å“ã€‚\nå¸Œæœ›å¤§å®¶é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¤§å®¶æ˜ç™½äº†è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚\n\n æŠ½è±¡å·¥å‚æ¨¡å¼çš„UMLå›¾ï¼š\n ![æŠ½è±¡å·¥å‚æ¨¡å¼](http://ww4.sinaimg.cn/mw690/64124373gw1ezgtzs7hwaj20db09p0ta.jpg)\n\næ¥ç€ä¸Šé¢çš„è¯é¢˜ï¼Œç°åœ¨å‡å¦‚æˆ‘è¦å¢åŠ å¯¹å¹³æ¿çš„æ”¯æŒï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šå…ˆæ·»åŠ ä¸¤ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºï¼Œä¸€ä¸ªæ˜¯å¹³æ¿ï¼š\n\n```java\n//äº§å“ç­‰çº§ç»“æ„--æ‰‹æœº  \nclass Phone   \n{  \npublic:  \n    virtual ~Phone(){};//åœ¨åˆ é™¤çš„æ—¶å€™é˜²æ­¢å†…å­˜æ³„éœ²  \n    virtual void call(string number) = 0;  \n};  \n\nclass AndroidPhone : public Phone   \n{  \npublic:  \n    void call(string number){ cout<<\"AndroidPhone is calling...\"<<endl; }  \n};  \n\nclass IosPhone : public Phone  \n{  \npublic:  \n    void call(string number) { cout<<\"IosPhone is calling...\"<<endl; }  \n};  \n\n//äº§å“ç­‰çº§ç»“æ„--å¹³æ¿  \nclass Pad  \n{  \npublic:  \n    virtual ~Pad(){};  \n    virtual void playMovie() = 0;  \n};  \n\nclass AndroidPad : public Pad  \n{  \npublic:  \n    virtual void playMovie(){ cout<<\"AndriodPad is playing movie...\"<<endl; }  \n};  \n\nclass IosPad : public Pad  \n{  \npublic:  \n    virtual void playMovie(){ cout<<\"IosPad is playing movie...\"<<endl; }  \n};  \n```\nç„¶åå…·ä½“çš„å·¥å‚æˆ‘ä»¬æ•´ä¸ªå·¥å‚æ˜¯ç”Ÿäº§ç§»åŠ¨è®¾å¤‡çš„æ‰€ä»¥æˆ‘ä»¬å–åä¸ºMobileFactory,ç„¶åå·¥å‚å¯ä»¥ç”Ÿäº§å¹³æ¿å’Œæ‰‹æœºï¼Œæ•…æœ‰äº†createPhone å’ŒcreatePadä¸¤ä¸ªæ¥å£ã€‚\n\n```java\nclass MobileFactory  \n{  \npublic:  \n    virtual ~MobileFactory(){};  \n    virtual Phone* createPhone() = 0;  \n    virtual Pad* createPad() = 0;  \n};\n```\næ¥ç€æ˜¯ android äº§å“ç°‡ çš„å·¥å‚ç±»ï¼Œè´Ÿè´£ç”Ÿäº§android çš„æ‰‹æœºå’Œå¹³æ¿ï¼š\n\n```java\nclass AndroidFactory : public MobileFactory  \n{  \npublic:  \n    Phone* createPhone()  \n    {  \n        return new AndroidPhone();  \n    }  \n    Pad* createPad()  \n    {  \n        return new AndroidPad();  \n    }  \n};\n```\n\næ¥ç€æ˜¯iosçš„äº§å“ç°‡çš„å·¥å‚ç±»ï¼Œè´Ÿè´£ç”Ÿäº§iosçš„æ‰‹æœºå’Œå¹³æ¿ï¼š\n\n```java\nclass IosFactory : public MobileFactory  \n{  \npublic:  \n    Phone* createPhone()  \n    {  \n        return new IosPhone();  \n    }  \n\n    Pad* createPad()  \n    {  \n        return new IosPad();  \n    }  \n};\n```\n\næœ€åå®¢æˆ·ç«¯è¿™æ ·å®ç°ï¼š\n\n```java\nvoid main()  \n{  \n    MobileFactory*  androidCreator = new AndroidFactory();  \n    MobileFactory*  iosCreator = new IosFactory();  \n    Phone*  myAndroidPhone = androidCreator->createPhone();  \n    Pad* myAndroidPad = androidCreator->createPad();  \n    Phone* myIosPhone = iosCreator->createPhone();  \n    Pad* myIosPad = iosCreator->createPad();  \n\n    myAndroidPhone->call(\"123\");  \n    myAndroidPad->playMovie();  \n\n    myIosPhone->call(\"123\");  \n    myIosPad->playMovie();  \n    //è¿™é‡Œæ²¡æœ‰åšé‡Šæ”¾å’Œåˆ¤æ–­ï¼Œè¯·è‡ªå·±åˆ¤æ–­å’Œé‡Šæ”¾  \n}\n```\n\næ€»ç»“ï¼š\næŠ½è±¡å·¥å‚æ¨¡å¼é€‚ç”¨äºé‚£äº›æœ‰å¤šç§äº§å“çš„äº§å“ç°‡ï¼Œå¹¶ä¸”æ¯æ¬¡ä½¿ç”¨å…¶ä¸­çš„æŸä¸€äº§å“ç°‡çš„äº§å“ã€‚\nç¼ºç‚¹ ï¼š æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ·»åŠ æ–°åŠŸèƒ½ä¹Ÿéå¸¸éº»çƒ¦ï¼Œæ¯”å·¥å‚æ–¹æ³•æ¨¡å¼éƒ½è¿˜è¦å¤æ‚çš„å¤šã€‚\nä¼˜ç‚¹ï¼š å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½å¤Ÿä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡\n\n## ä¸»è¦ç”¨é€”\nå·¥å‚æ–¹æ³•è¦è§£å†³çš„é—®é¢˜æ˜¯å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œå®ƒæä¾›äº†ä¸€ç§æ‰©å±•çš„ç­–ç•¥ï¼Œå¾ˆå¥½åœ°ç¬¦åˆäº†å¼€æ”¾å°é—­åŸåˆ™ã€‚å·¥å‚æ–¹æ³•ä¹Ÿå«åšè™šæ„é€ å™¨ï¼ˆVirtual Constructorï¼‰ã€‚\n\n![å·¥å‚æ–¹æ³•çš„ç±»ç»“æ„å›¾](http://cdn.cocimg.com/cms/uploads/allimg/130516/4196_130516112054_1.png)\n\n## ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å·¥å‚æ–¹æ³•\nå½“æ˜¯å¦‚ä¸‹æƒ…å†µæ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•ï¼šä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»æ—¶ï¼Œä¸€ä¸ªç±»å¸Œæœ›æœ‰å®ƒçš„å­ç±»å†³å®šæ‰€åˆ›å»ºçš„å¯¹è±¡æ—¶ã€‚\n\næ›´å¤šå…³äºå·¥å‚æ–¹æ³•çš„ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡æœ€åç»™å‡ºçš„å‚è€ƒå†…å®¹ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹åœ¨iOSä¸­å·¥å‚æ–¹æ³•çš„ä¸€ç§å®ç°æ–¹æ³•ã€‚\n\n## iOSä¸­å·¥å‚æ–¹æ³•çš„å®ç°å®ä¾‹\nå¦‚ä¸‹æœ‰ä¸€ä¸ªç±»å›¾ï¼Œè¯¥å›¾æè¿°äº†ä¸‹é¢å³å°†å®ç°çš„å·¥å‚æ–¹æ³•ï¼ˆåˆ©ç”¨å·¥å‚æ–¹æ³•ï¼Œåˆ›å»ºå‡ºä¸åŒçš„å½¢çŠ¶ï¼‰ã€‚å…¶ä¸­BVShapeFactoryä¸ºå·¥å‚æ–¹æ³•çš„åŸºç±»ï¼ŒBVShapeä¸ºå½¢çŠ¶çš„åŸºç±»ï¼ŒBVClienté€šè¿‡BVShapeFactoryï¼Œåˆ©ç”¨ BVShapeFactoryçš„å­ç±»ï¼ˆBVCircleShapeFactoryå’ŒBVSquareShapeFactoryï¼‰åˆ†åˆ«åˆ›å»ºå‡ºBVCircleShapeå’ŒBVSquareShapeã€‚\n![å·¥å‚æ–¹æ³•](http://cdn.cocimg.com/cms/uploads/allimg/130516/4196_130516112123_1.png)\n\n\ngithubä¸‹è½½åœ°å€:<https://github.com/BeyondVincent/ios_patterns/tree/master/FactoryMethodPattern>\n\n## å‚è€ƒèµ„æ–™\n\n* [iOSè®¾è®¡æ¨¡å¼â€”â€”å·¥å‚æ–¹æ³•ï¼ˆç®€å•å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰](http://doc.okbase.net/luozhonglan/archive/103843.html)\n* [iOSè®¾è®¡æ¨¡å¼(03):å·¥å‚æ–¹æ³•](http://www.cocoachina.com/ios/20130516/6219.html)\n* [Objective-Cç±»æ—å’Œå·¥å‚æ¨¡å¼](http://www.cocoachina.com/ios/20141124/10296.html)\n* [Objective C Design Patterns - Factory](http://crosbymichael.com/objective-c-design-patterns-factory.html)\n* [Class Factory Methods](https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/ClassFactoryMethods/ClassFactoryMethods.html)--Apple\n* [iOS Design Patterns](http://www.raywenderlich.com/46988/ios-design-patterns)--raywenderlich\n* [Abstract Factory Design Pattern Objective C](http://www.knowstack.com/abstract-factory-design-pattern-objective-c/)\n* [The factory design pattern explained by example](https://www.binpress.com/tutorial/the-factory-design-pattern-explained-by-example/142)-php\n* [Design Patterns Series, Day 3: Factory and Singleton Patterns](https://www.safaribooksonline.com/blog/2014/12/10/design-patterns-series-day-3-factory-singleton-patterns/)--safaribooksonline\n* [Automagic Factories in Objective-C](http://www.bobmccune.com/2011/04/08/automagic-factories-in-objective-c/)--bobmccune\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["è®¾è®¡æ¨¡å¼"],"categories":["iOS"]},{"title":"å¤šçº¿ç¨‹ä¹‹NSThread","url":"/2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsthread/","content":"\n## æœ¬æ–‡ç›®å½•\n\n* å‰è¨€\n* 1.è·å–å½“å‰çº¿ç¨‹\n* 2.è·å–ä¸»çº¿ç¨‹\n* 3.NSThreadçš„åˆ›å»º\n* 4.æš‚åœå½“å‰çº¿ç¨‹\n* 5.çº¿ç¨‹çš„å…¶ä»–æ“ä½œ\n* 6.ä¼˜ç¼ºç‚¹\n\n## å‰è¨€\n\næ¯ä¸ªiOSåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸ªä¸“é—¨ç”¨æ¥æ›´æ–°æ˜¾ç¤ºUIç•Œé¢ã€å¤„ç†ç”¨æˆ·è§¦æ‘¸äº‹ä»¶çš„ä¸»çº¿ç¨‹ï¼Œå› æ­¤ä¸èƒ½å°†å…¶ä»–å¤ªè€—æ—¶çš„æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸ç„¶ä¼šé€ æˆä¸»çº¿ç¨‹å µå¡(å‡ºç°å¡æœºç°è±¡)ï¼Œå¸¦æ¥æåçš„ç”¨æˆ·ä½“éªŒã€‚ä¸€èˆ¬çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†é‚£äº›è€—æ—¶çš„æ“ä½œæ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹æ˜¯é˜²æ­¢ä¸»çº¿ç¨‹å µå¡ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡çš„æœ€ä½³æ–¹æ³•ã€‚\n\niOSä¸­æœ‰3ç§å¸¸è§çš„å¤šçº¿ç¨‹ç¼–ç¨‹æ–¹æ³•\n1. `NSThread`\nè¿™ç§æ–¹æ³•éœ€è¦ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€åŒæ­¥ã€åŠ é”é—®é¢˜ï¼Œä¼šå¯¼è‡´ä¸€å®šçš„æ€§èƒ½å¼€é”€\n\n2. `NSOperation`å’Œ`NSOperationQueue`\næ˜¯åŸºäºOCå®ç°çš„ã€‚NSOperationä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…äº†éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œç„¶åå¯ä»¥å°†è¿™ä¸ªæ“ä½œæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­å»å¼‚æ­¥æ‰§è¡Œã€‚ä¸å¿…å…³å¿ƒçº¿ç¨‹ç®¡ç†ã€åŒæ­¥ç­‰é—®é¢˜ã€‚\n\n3. `Grand Centeral Dispatch`\nç®€ç§°GCDï¼ŒiOS4æ‰å¼€å§‹æ”¯æŒï¼Œæ˜¯çº¯Cè¯­è¨€çš„APIã€‚è‡ªiPad2å¼€å§‹ï¼Œè‹¹æœè®¾å¤‡å¼€å§‹æœ‰äº†åŒæ ¸CPUï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨è¿™2ä¸ªæ ¸ï¼ŒGCDæä¾›äº†ä¸€äº›æ–°ç‰¹æ€§æ¥æ”¯æŒå¤šæ ¸å¹¶è¡Œç¼–ç¨‹\n\nè¿™ç¯‡æ–‡ç« ç®€å•ä»‹ç»`NSThreadè¿™`ä¸ªç±»ï¼Œä¸€ä¸ª`NSThread`å®ä¾‹å°±ä»£è¡¨ç€ä¸€æ¡çº¿ç¨‹\n\n### 1.è·å–å½“å‰çº¿ç¨‹\n\n```objc\n    NSThread *current = [NSThread currentThread];\n```\n\n### 2.è·å–ä¸»çº¿ç¨‹\n```objc\n    NSThread *main = [NSThread mainThread];\n    NSLog(@\"ä¸»çº¿ç¨‹:%@\", main);    \n```\n\næ‰“å°ç»“æœæ˜¯ï¼š\n\n    2013-04-18 21:36:38.599 thread[7499:c07] ä¸»çº¿ç¨‹:<NSThread: 0x71434e0>{name = (null), num = 1}\n\nnumç›¸å½“äºçº¿ç¨‹çš„idï¼Œä¸»çº¿ç¨‹çš„numæ˜¯ä¸º1çš„\n\n### 3.NSThreadçš„åˆ›å»º\n#### a.åŠ¨æ€æ–¹æ³•\n    - (id)initWithTarget:(id)target selector:(SEL)selector object:(id)argument;\n\nåœ¨ç¬¬2è¡Œåˆ›å»ºäº†ä¸€æ¡æ–°çº¿ç¨‹ï¼Œç„¶ååœ¨ç¬¬4è¡Œè°ƒç”¨`start`æ–¹æ³•å¯åŠ¨çº¿ç¨‹ï¼Œçº¿ç¨‹å¯åŠ¨åä¼šè°ƒç”¨selfçš„`run:`æ–¹æ³•ï¼Œå¹¶ä¸”å°†@\"mj\"ä½œä¸ºæ–¹æ³•å‚æ•°\n\n```objc\n// åˆå§‹åŒ–çº¿ç¨‹\nNSThread *thread = [[[NSThread alloc] initWithTarget:self selector:@selector(run:) object:@\"mj\"] autorelease];\n// å¼€å¯çº¿ç¨‹\n[thread start];\n```\n\nå‡å¦‚run:æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š\n\n```objc\n- (void)run:(NSString *)string {\n     NSThread *current = [NSThread currentThread];\n     NSLog(@\"æ‰§è¡Œäº†run:æ–¹æ³•-å‚æ•°ï¼š%@ï¼Œå½“å‰çº¿ç¨‹ï¼š%@\", string, current);\n}\n```\n\næ‰“å°ç»“æœä¸ºï¼š\n\n    2013-04-18 21:40:33.102 thread[7542:3e13] æ‰§è¡Œäº†run:æ–¹æ³•-å‚æ•°ï¼šmjï¼Œå½“å‰çº¿ç¨‹ï¼š<NSThread: 0x889e8d0>{name = (null), num = 3}\n\nå¯ä»¥å‘ç°ï¼Œè¿™æ¡çº¿ç¨‹çš„numå€¼ä¸º3ï¼Œè¯´æ˜ä¸æ˜¯ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹çš„numä¸º1\n\n#### b.é™æ€æ–¹æ³•\n```objc\n    + (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(id)argument;\n```\n\n```objc\n[NSThread detachNewThreadSelector:@selector(run:) toTarget:self withObject:@\"mj\"];\n```\n\n#### c.éšå¼åˆ›å»ºçº¿ç¨‹\n```objc\n[self performSelectorInBackground:@selector(run:) withObject:@\"mj\"];\n```\nä¼šéšå¼åœ°åˆ›å»ºä¸€æ¡æ–°çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨è¿™æ¡çº¿ç¨‹ä¸Šè°ƒç”¨selfçš„run:æ–¹æ³•ï¼Œä»¥@\"mj\"ä¸ºæ–¹æ³•å‚æ•°\n\n### 4.æš‚åœå½“å‰çº¿ç¨‹\n\n```objc\n    [NSThread sleepForTimeInterval:2];\n```\n\n```objc\nNSDate *date = [NSDate dateWithTimeInterval:2 sinceDate:[NSDate date]];  \n[NSThread sleepUntilDate:date];\n```\n\nä¸Šé¢ä¸¤ç§åšæ³•éƒ½æ˜¯æš‚åœå½“å‰çº¿ç¨‹2ç§’\n\n### 5.çº¿ç¨‹çš„å…¶ä»–æ“ä½œ\n#### a.åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ\n\n```objc\n [self performSelector:@selector(run) onThread:thread withObject:nil waitUntilDone:YES];\n```\n\n* ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯åœ¨threadè¿™æ¡çº¿ç¨‹ä¸Šè°ƒç”¨selfçš„runæ–¹æ³•\n* æœ€åçš„YESä»£è¡¨ï¼šä¸Šé¢çš„ä»£ç ä¼šé˜»å¡ï¼Œç­‰runæ–¹æ³•åœ¨threadçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¸Šé¢çš„ä»£ç æ‰ä¼šé€šè¿‡\n\n#### b.åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ\n\n```objc\n[self performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:YES];  \n```\n\nåœ¨ä¸»çº¿ç¨‹è°ƒç”¨selfçš„runæ–¹æ³•\n\n#### c.åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ\n\n```objc\n[self performSelector:@selector(run) withObject:nil];\n```\nåœ¨å½“å‰çº¿ç¨‹è°ƒç”¨selfçš„runæ–¹æ³•\n\n### 6.ä¼˜ç¼ºç‚¹\n1. ä¼˜ç‚¹ï¼š`NSThread`æ¯”å…¶ä»–å¤šçº¿ç¨‹æ–¹æ¡ˆè¾ƒè½»é‡çº§ï¼Œæ›´ç›´è§‚åœ°æ§åˆ¶çº¿ç¨‹å¯¹è±¡\n2. ç¼ºç‚¹ï¼šéœ€è¦è‡ªå·±ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œçº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å¯¹æ•°æ®çš„åŠ é”ä¼šæœ‰ä¸€å®šçš„ç³»ç»Ÿå¼€é”€\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç½‘ç»œ","å¤šçº¿ç¨‹"],"categories":["iOS"]},{"title":"NSOperation and NSOperationQueue Tutorial in Swift","url":"/2016/01/13/2016-01-13-nsoperation-and-nsoperationqueue-tutorial-in-swift/","content":"\n* è¯‘è‡ª Written by [ Richard Turton](http://www.raywenderlich.com/u/jrturton) â€” on October 7, 2014\n* åŸæ–‡é“¾æ¥ï¼š<http://www.raywenderlich.com/76341/use-nsoperation-nsoperationqueue-swift>\n* è¯‘è€…[@oneruofeng](https://twitter.com/oneruofeng)\n\n**Post info**: Updated for Xcode 7.1 and Swift 2.1 -- 1 January 2016\n\n**Update note**: This tutorial was updated to iOS 8, Xcode 6.1 and Swift by Richard Turton.\n> [Original post](http://www.raywenderlich.com/76341/use-nsoperation-nsoperationqueue-swift) by Tutorial Team member [Soheil Azarpour](http://www.raywenderlich.com/u/Canopus).\n\næ¯ä¸ªäººéƒ½æœ‰ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æˆ–è€…è¿›å…¥ä¸€äº›æ–‡æœ¬åœ¨iOSæˆ–è€…Mac Appä¸Šçš„ä»¤äººæ²®ä¸§çš„ç»å†ï¼Œå°±æ˜¯çªç„¶-WHAMï¼Œç”¨æˆ·äº¤äº’åœæ­¢äº†å“åº”ã€‚\n\nåœ¨Macä¸Šï¼Œä½ çš„ç”¨æˆ·å¼€å§‹ç›¯ç€ä¸€ä¸ªæ²™æ¼æˆ–è€…ä¸€ä¸ªä¸ƒå½©çš„è½®å­å¼€å§‹æ—‹è½¬ç›´åˆ°å®ƒä»¬å†æ¬¡æ¢å¤UIäº¤äº’ä¸ºæ­¢ã€‚åœ¨ä¸€ä¸ªiOS appä¸­ï¼Œç”¨æˆ·æœŸæœ›Appç«‹å³å“åº”å®ƒä»¬çš„è§¦æ‘¸äº‹ä»¶ï¼Œæ— å“åº”çš„appç»™äººçš„æ„Ÿè§‰æ˜¯ç¬¨é‡å’Œç¼“æ…¢ï¼Œè¿™æ ·é€šå¸¸ä¼šå¯¼è‡´æ”¶åˆ°å·®è¯„ã€‚\n\nä¿æŒä½ çš„appçš„å¯äº¤äº’çš„çŠ¶æ€è¯´èµ·æ¥å®¹æ˜“åšèµ·æ¥éš¾ï¼Œä¸€æ—¦ä½ çš„appéœ€è¦æ‰§è¡Œä¸ä»…ä»…æ˜¯å°‘é‡çš„ä»»åŠ¡ï¼Œäº‹æƒ…å¾ˆå¿«å°±å˜å¾—å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¤šå°‘äº‹ä»¶åœ¨ä¸»äº‹ä»¶å¾ªç¯æ‰§è¡Œç¹é‡çš„å·¥ä½œå¹¶ä¸”åŒæ—¶æä¾›ä¸€ä¸ªå¯ä»¥å“åº”çš„UIã€‚\n\nä½çº§çš„å¼€å‘è€…æ˜¯æ€æ ·åšçš„å‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå·¥ä½œä»ä¸»çº¿ç¨‹ä¸­ç§»é™¤é€šè¿‡å¹¶å‘ã€‚å¹¶å‘æ„å‘³ç€ä½ åº”ç”¨æ‰€æœ‰çš„æ“ä½œåŒæ—¶æ‰§è¡Œåœ¨å¤šä¸ªæµï¼ˆæˆ–è€…çº¿ç¨‹ï¼‰ä¸­--è¿™æ ·çš„è¯ç”¨æˆ·ç•Œé¢å°±èƒ½ä¿æŒå“åº”çš„è¦æ‰§è¡Œçš„å·¥ä½œã€‚\n\nä¸€ç§å®ç°å¹¶å‘æ“ä½œåœ¨iOSæ˜¯é€šè¿‡`NSOperation`å’Œ`NSOperationQueue`è¿™ä¸¤ä¸ªç±»ã€‚åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¼šæ€æ ·ä½¿ç”¨å®ƒä»¬ï¼ä½ å°†ä»ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨å¹¶å‘çš„Appå¼€å§‹ï¼Œæ‰€ä»¥å®ƒå°†å‡ºç°çš„éå¸¸è¿Ÿé’å’Œæ— å“åº”ã€‚ç„¶åä½ å°†é‡åšä½ çš„åº”ç”¨ç»™å®ƒä»¬æ·»åŠ å¹¶å‘æ“ä½œå¹¶ä¸”--å¸Œæœ›--å‘ˆç°ä¸€ä¸ªæ›´åŠ å“åº”è‰¯å¥½çš„å¯äº¤äº’ç•Œé¢ç»™ç”¨æˆ·ï¼\n\n### æˆ‘ä»¬å¼€å§‹å§\n\nè¿™ä»½æ ·å“å·¥ç¨‹çš„æ€»çš„ç›®æ ‡çš„å°±æ˜¯å±•ç¤ºä¸€ä¸ªæ»¤é•œå¤„ç†è¿‡çš„å›¾ç‰‡çš„è¡¨è§†å›¾ã€‚å›¾ç‰‡å°†ä»ç½‘ç»œä¸Šä¸‹è½½ï¼Œç»è¿‡ä¸€ä¸ªæ»¤é•œå¤„ç†åï¼Œç„¶ååœ¨è¡¨è§†å›¾ä¸­æ˜¾ç¤ºã€‚\n\nä¸‹é¢æ˜¯è¿™ä¸ªappæ¨¡å‹çš„ç¤ºæ„å›¾\n\n![appæ¨¡å‹çš„ç¤ºæ„å›¾](http://ww2.sinaimg.cn/mw690/64124373gw1ezk3rh3ebyj20i20nmq4k.jpg)\n\n<!--\n<img src = \"http://ww2.sinaimg.cn/mw690/64124373gw1ezk3rh3ebyj20i20nmq4k.jpg\" with= 300 height = 600>-->\n\n\n### ç¬¬ä¸€ä¸ªç‰ˆæœ¬å°è¯•\nä¸‹è½½ä½ å°†åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½¿ç”¨çš„[ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„é¡¹ç›®](http://cdn5.raywenderlich.com/wp-content/uploads/2014/10/ClassicPhotos-Starter63.zip)\n\n> æ³¨æ„ï¼šæ‰€ä»¥çš„å›¾ç‰‡æ¥è‡ª[ stock.xchng.](http://sxc.hu/)ã€‚ä¸€ä¸‹å›¾ç‰‡åœ¨æ•°æ®æºæ•…æ„é”™è¯¯å‘½åï¼Œä»¥ä¾¿è¿™é‡Œæœ‰äº›ä¾‹å­æ˜¯å›¾ç‰‡ä¸‹è½½å¤±è´¥å¥½å¤„ç†å¤±è´¥çš„æƒ…å†µã€‚\n\næ„å»ºå¹¶ä¸”è¿è¡Œè¿™ä¸ªå·¥ç¨‹ï¼Œæœ€ç»ˆä½ å°†çœ‹åˆ°è¿™ä¸ªappè¿è¡Œèµ·æ¥æ˜¾ç¤ºä¸€åˆ—ç…§ç‰‡ã€‚å°è¯•æ»šåŠ¨è¿™ä¸ªåˆ—è¡¨ï¼Œå¾ˆç—›è‹¦ï¼Œä¸æ˜¯å—ï¼Ÿ\n![list of photoes](http://ww3.sinaimg.cn/mw690/64124373gw1ezk45qmdigj205x08wdga.jpg)\n\n*ä¼ ç»Ÿçš„ç›¸å†Œï¼Œè¿è¡Œç¼“æ…¢*\n\næ‰€æœ‰çš„æ“ä½œéƒ½å‘ç”Ÿåœ¨`ListViewController.swift`é‡Œï¼Œå¹¶ä¸”æœ€ä¸»è¦çš„æ˜¯å‘ç”Ÿåœ¨` tableView(_:cellForRowAtIndexPath:)`æ–¹æ³•é‡Œã€‚çœ‹ä¸€ä¸‹é‚£ä¸ªæ–¹æ³•å’Œæ³¨é‡Šè¿™é‡Œæœ‰ä¸¤ä»¶ç›¸å½“é›†ä¸­çš„äº‹æƒ…éœ€è¦æ€è€ƒï¼š\n\n1. `ä»ç½‘ç»œè½½å…¥å›¾ç‰‡æ•°æ®`ã€‚å³ä½¿ç½‘ç»œçŠ¶å†µè‰¯å¥½ï¼Œappå°†ä»ç„¶å¿…é¡»ç­‰å¾…ç›´åˆ°ä¸‹è½½å®Œæˆäº†æ‰èƒ½ç»§ç»­ã€‚\n2. ä½¿ç”¨*Core Image*ç»™å›¾ç‰‡åŠ æ»¤é•œã€‚è¿™ä¸ªæ–¹æ³•ç»™å›¾ç‰‡åº”ç”¨ä¸€ä¸ªæ·±è¤è‰²çš„æ»¤é•œï¼Œå‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šå…³äº`Core Image`æ»¤é•œçš„çŸ¥è¯†ï¼Œè¯·ç‚¹å‡»[Beginning Core Image in Swift](http://www.raywenderlich.com/76285/beginning-core-image-swift)\n\nè¿˜æœ‰ï¼Œä½ å°†è½½å…¥ä¸€ç³»åˆ—å›¾ç‰‡è¯·æ±‚ä»ç½‘ç»œå½“å®ƒç¬¬ä¸€æ¬¡è¢«è¯·æ±‚æ—¶:\n\n```swift\n  lazy var photos = NSDictionary(contentsOfURL:dataSourceURL)\n```\n\næ‰€æœ‰çš„å·¥ä½œå‘ç”Ÿåœ¨åº”ç”¨çš„ä¸»çº¿ç¨‹ã€‚ç”±äºä¸»çº¿ç¨‹ä¹Ÿè´Ÿè´£ç”¨æˆ·äº¤äº’ï¼Œè®©å®ƒä¸€ç›´å¿™äºä»ç½‘ç»œä¸‹è½½ä¸œè¥¿å’Œç»™å›¾ç‰‡åŠ æ»¤é•œæ¶ˆç£¨æ‰äº†å“åº”ä¸­çš„appã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨Xcodeçš„ä»ªè¡¨æµ‹é‡è§†å›¾è·å¾—è¿™æ ·ä¸€ä¸ªå¿«é€Ÿçš„æ¦‚è¿°ã€‚ä½ å¯ä»¥é€šè¿‡æ˜¾ç¤º`è°ƒè¯•å¯¼èˆª`(Commnad+6)æ¥å…¥è¿™ä¸ªä»ªè¡¨è§†å›¾,è®©åé€‰æ‹©`CPU`å½“appæ­£åœ¨è¿è¡Œçš„æ—¶å€™ã€‚\n\n![gauges](http://ww4.sinaimg.cn/mw690/64124373gw1ezk4seggwgj20jg0a0ta0.jpg)\n\n*Xcodeçš„ä»ªè¡¨è§†å›¾è¡¨æ˜ï¼Œä¸»çº¿ç¨‹çš„ä»»åŠ¡éå¸¸é‡*\n\nä½ ä¼šçœ‹åˆ°é‚£äº›æ‰€æœ‰çš„é•¿é’‰åœ¨`Thread 1`ï¼Œé‚£å°±æ˜¯appçš„ä¸»çº¿ç¨‹ã€‚æ›´å¤šè¯¦ç»†çš„ä¿¡æ¯ä½ å¯ä»¥è¿è¡Œappçš„`Instruments`,ä½†æ˜¯é‚£ä¸ªåœ¨[ whole other tutorial :\\].](http://www.raywenderlich.com/?p=23037)ä¸­\n\næ˜¯æ—¶å€™è€ƒè™‘æ€æ ·æ”¹å–„ä¸€ä¸‹ä½ çš„ç”¨æˆ·ä½“éªŒäº†ï¼\n\n### ä»»åŠ¡ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹\nåœ¨ä½ ä¸“ç ”è¿™ç¯‡æ•™ç¨‹ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸‹æŠ€æœ¯ä¸Šçš„æ…¨å¿µéœ€è¦ç†ä¸€ä¸‹ï¼Œæˆ‘å°†å®šä¹‰ä¸€äº›ä¸“ç”¨æœ¯è¯­ï¼š\n\n* **ä»»åŠ¡** ï¼šä¸€ä¸ªç®€å•å•ä¸ªçš„éœ€è¦å®Œæˆçš„å·¥ä½œ\n* **çº¿ç¨‹** ï¼šæ“ä½œç³»ç»Ÿæä¾›çš„æœºåˆ¶å…è®¸å¤šä¸ªç”¨æˆ·æ“ä½œåŒæ—¶è¿›è¡Œåœ¨ä¸€ä¸ªåº”ç”¨ä¸­\n* **è¿›ç¨‹** ï¼šä¸€ä¸ªå¯æ‰§è¡Œçš„ä»£ç å—ï¼Œå®ƒå¯ä»¥ç”±å¤šä¸ªçº¿ç¨‹æ„æˆ\n\n> æ³¨æ„ï¼šåœ¨iOSå’ŒOS Xä¸­ï¼Œçº¿ç¨‹çš„åŠŸèƒ½ç”±POSIXçº¿ç¨‹APIï¼ˆæˆ–è€… pthreadsï¼‰å®ç°ï¼Œå¹¶ä¸”å®ƒä½¿æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚è€Œè¿™ä¸ªåˆæ˜¯ç›¸å½“åº•å±‚çš„ä¸œè¥¿ï¼Œä½ å°†å‘ç°å®ƒå¾ˆå®¹æ˜“çŠ¯é”™è¯¯ï¼›æˆ–è®¸å…³äºçº¿ç¨‹æœ€ç³Ÿç³•çš„äº‹æƒ…æ˜¯é‚£äº›å¾ˆéš¾è¢«å‘ç°çš„é”™è¯¯ï¼\n\n> `Foundation`æ¡†æ¶åŒ…å«äº†ä¸€ä¸ªå«åš`NSThread`çš„ç±»ï¼Œè¿™è®©æˆ‘ä»¬å¤„ç†äº‹æƒ…æ›´å®¹æ˜“ï¼Œä½†æ˜¯ç”¨`NSThread`ç®¡ç†å¤šä¸ªçº¿ç¨‹ä»æ˜¯ä¸€ä»¶ä»¤äººå¤´ç–¼çš„äº‹æƒ…ã€‚`NSOperation`å’Œ`NSOperationQueue`æ˜¯ä¸ºäº†æœ€å¤§åŒ–ç®€åŒ–å¤„ç†å¤šçº¿ç¨‹çš„æ›´é«˜çº§çš„ç±»ã€‚\n\nåœ¨è¿™ä¸ªå›¾è§£ä¸­ï¼Œä½ ä¼šçœ‹åˆ°è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼š\n\n![the relationship between a process, threads, and tasks](http://ww3.sinaimg.cn/mw690/64124373gw1ezk5dwtbhuj20go03n0t2.jpg)\n\n*è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œä»»åŠ¡*\n\næ­£å¦‚ä½ æ‰€è§ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…æ¶µå¤šä¸ªæ‰§è¡Œçš„çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚\n\nåœ¨è¿™ä¸ªå›¾é›†ä¸­, `thread 2`æ‰§è¡Œæ–‡ä»¶çš„è¯»çš„å·¥ä½œï¼ŒåŒæ—¶`thread 1`æ‰§è¡ŒUIç›¸å…³çš„ä»£ç ã€‚è¿™å’Œä½ åº”è¯¥æ€æ ·åœ¨iOSä¸­æ„å»ºä½ çš„ä»£ç ï¼ˆä¸»çº¿ç¨‹æ‰§è¡Œä»»ä½•å’ŒUIç›¸å…³çš„å·¥ä½œï¼Œç¬¬äºŒçº¿ç¨‹åº”å½“æ‰§è¡Œæ…¢çš„æˆ–è€…é•¿æ—¶é—´è¿è¡Œçš„è€—æ—¶æ“ä½œä¾‹å¦‚è¯»å–æ–‡ä»¶ï¼Œæ¥å…¥ç½‘ç»œç­‰ç­‰ï¼‰æœ‰ç‚¹ç›¸ä¼¼ã€‚\n\n### NSOperation vs. Grand Central Dispatch (GCD)\n\nä½ åº”è¯¥å¬è¯´è¿‡[Grand Central Dispatch (GCD).](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)ã€‚ç®€å•çš„æ¥è¯´ï¼Œ`GCD`ç”±è¯­è¨€çš„ç‰¹å¾ï¼Œè¿è¡Œæ—¶åº“å’Œç³»ç»Ÿå¢å¼ºç»„æˆæ¥æä¾›ä¸€ä¸ªåœ¨`iOS`å’Œ`OS X`å¤šæ ¸ç¡¬ä»¶ä¸­æ”¯æŒå¹¶å‘ç³»ç»Ÿå¹¶ä¸”ç»¼åˆçš„æ”¹è‰¯ã€‚å‡å¦‚ä½ æƒ³äº†è§£æ›´å¤šå…³äºGCDç›¸å…³çš„çŸ¥è¯†ï¼Œæœ‰å¯ä»¥é˜…è¯»æˆ‘ä»¬çš„[Multithreading and Grand Central Dispatch on iOS for Beginners Tutorial](http://www.raywenderlich.com/?p=4295)ã€‚\n\n`NSOperation`å’Œ`NSOperationQueue`æ„å»ºåœ¨GCDä¹‹ä¸Šã€‚æ™®éæ¥è¯´ï¼Œè‹¹æœæ¨èä½¿ç”¨æœ€é«˜çº§åˆ«æŠ½è±¡ï¼Œå½“éœ€è¦æ˜¾ç¤ºä»–ä»¬ä¸€äº›éœ€è¦çš„æµ‹é‡å·¥ä½œæ—¶å›åˆ°æœ€åº•å±‚ã€‚\n\nä¸‹é¢æ˜¯å…³äºè¿™ä¸¤è€…çš„ä¸€äº›ç®€å•æ¯”è¾ƒï¼Œå°†å¸®åŠ©ä½ å†³å®šä½•æ—¶ä½•åœ°é€‰æ‹©ä½¿ç”¨`GCD`æˆ–è€…`NSOperation`ï¼š\n\n* **GCD** æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ–¹å¼æ¥æè¿°å°†è¦è¢«å¹¶å‘æ‰§è¡Œçš„å·¥ä½œå•å…ƒã€‚ä½ ä¸å¿…å®šåˆ¶è¿™ä¸ªå·¥ä½œå•å…ƒçš„æ—¶åˆ»è¡¨ï¼›ç³»ç»Ÿä¸ºä½ å®šåˆ¶æ—¶åˆ»è¡¨ã€‚åœ¨blocksä¸­å¢åŠ ä¾èµ–æ˜¯ä¸€ä»¶å¤´ç–¼çš„äº‹æƒ…ã€‚å–æ¶ˆæˆ–è€…æš‚åœä¸€ä¸ªblockæ¥è¿›è¡Œé¢å¤–çš„å·¥ä½œä¸ºä½œä¸ºå¼€å‘è€…çš„ä½ ï¼ :]\n\n* **NSOperation** å’ŒGCDç›¸æ¯”å¢åŠ äº†ä¸€äº›é¢å¤–å¼€æ”¯ï¼Œä½†æ˜¯ä½ èƒ½å¤Ÿåœ¨å„ç§æ“ä½œä¹‹é—´å¢åŠ ä¾èµ–å¹¶ä¸”æ¢å¤ï¼Œå–æ¶ˆï¼Œæš‚åœä»–ä»¬ã€‚\n\nè¿™ä¸ªæ•™ç¨‹å°†ä½¿ç”¨`NSOperation`,å› ä¸ºä½ å°†å¤„ç†ä¸€ä¸ªåˆ—è¡¨ä¸ºäº†å¥½çš„è¡¨ç°å¹¶ä¸”ç”±äºå®ƒå¤§é‡çš„æ¶ˆè€—çš„èµ„æºä½ éœ€è¦èƒ½å¤Ÿå–æ¶ˆä¸€ä¸ªæ“ä½œé’ˆå¯¹æŸä¸ªå›¾ç‰‡ï¼Œå‡å¦‚ç”¨æˆ·å·²ç»å°†é‚£å¼ å›¾ç‰‡æ»šå‡ºå±å¹•ã€‚å³ä½¿è¿™äº›æ“ä½œåœ¨åå°çº¿ç¨‹ï¼Œå‡å¦‚è¿™é‡Œæœ‰ä¸€æ‰“äº‹æƒ…åœ¨é˜Ÿåˆ—é‡Œç­‰ç€å®ƒä»¬å»å¤„ç†ï¼Œè¿™å°†è¡¨ç°å¾—è·Ÿç³Ÿç³•ã€‚\n\n### é‡æ„ App Model\n\næ˜¯æ—¶å€™é‡æ„å¼€å§‹çš„éå¤šçº¿ç¨‹çš„æ¨¡å‹äº†ï¼å‡å¦‚ä½ ä»”ç»†è§‚å¯Ÿå…ˆå‰çš„æ¨¡å‹ï¼Œä½ ä¼šå‘ç°è¿™é‡Œæœ‰ä¸‰ä¸ªå¯ä»¥è¢«æ”¹è¿›çš„çº¿ç¨‹å—å›°åŒºåŸŸã€‚é€šè¿‡åˆ‡å‰²è¿™ä¸‰ä¸ªåŒºåŸŸè®©åæŠŠä»–ä»¬æ”¾åœ¨å•ç‹¬çš„çº¿ç¨‹é‡Œï¼Œä¸»çº¿ç¨‹çš„å‹åŠ›å°†å¾—åˆ°ç¼“è§£å¹¶ä¸”èƒ½å¤Ÿä¿æŒå’Œç”¨æˆ·äº¤äº’ã€‚\n\n![NSOperation_model_improved](http://ww3.sinaimg.cn/mw690/64124373gw1ezk6m9a5xzj20i20nm416.jpg)\n\n*æ”¹è¿›åçš„ model*\n\nä¸ºäº†æ‘†è„±ä½ åº”ç”¨çš„ç“¶é¢ˆï¼Œä½ éœ€è¦ä¸€ä¸ªæŒ‡å®šä¸€ä¸ªçº¿ç¨‹æ¥å“åº”ä½ çš„ç”¨æˆ·æ—¶é—´ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸“æ³¨äºä¸‹è½½èµ„æºå’Œå›¾ç‰‡ï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå›¾ç‰‡æ»¤é•œæ“ä½œã€‚åœ¨æ–°çš„æ¨¡å‹ä¸­ï¼Œappä»ä¸»çº¿ç¨‹å¯åŠ¨è®©åè½½å…¥ä¸€ä¸ªç©ºçš„è¡¨è§†å›¾ã€‚åŒæ—¶ï¼Œappå¯åŠ¨ç¬¬äºŒä¸ªçº¿ç¨‹å¼€å§‹ä¸‹è½½æ•°æ®èµ„æºã€‚\n\nä¸€æ—¦æ•°æ®èµ„æºä¸‹è½½å®Œæˆï¼Œä½ å°†é€šçŸ¥è¡¨è§†å›¾é‡æ–°è½½å…¥ã€‚è¿™äº›äº‹æƒ…å¿…é¡»åœ¨ä¸»çº¿ç¨‹å®Œæˆï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ç”¨æˆ·ç•Œé¢ç›¸å…³çš„æ“ä½œã€‚ä»è¿™ä¸€ç‚¹æ¥è¯´ï¼Œè¡¨è§†å›¾çŸ¥é“æœ‰å¤šå°‘è¡Œï¼Œå¹¶ä¸”å®ƒçŸ¥é“ä»–å°†æ˜¾ç¤ºå›¾ç‰‡çš„URLåœ°å€ï¼Œä½†æ˜¯å¥¹ä¸çŸ¥é“å®ƒæ˜¯å¦çœŸçš„æœ‰å›¾ç‰‡ï¼å‡å¦‚ä½ ç«‹å³å¼€å§‹ä¸‹è½½æ‰€æœ‰çš„å›¾ç‰‡åœ¨è¿™ä¸ªç‚¹ä¸Šï¼Œè¿™å¯èƒ½å¯¼è‡´æ•ˆç‡æå…¶ä½ä¸‹ï¼Œå› ä¸ºä½ ä¸éœ€è¦ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œï¼\n\nä¸ºäº†è®©è¿™ä¸ªå˜å¾—æ›´å¥½æˆ‘ä»¬èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ\n\nä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹å°±æ˜¯å¯äº¤äº’çš„è¡Œåœ¨å±å¹•èŒƒå›´å†…å¯è§æ—¶æ‰å¼€å§‹ä¸‹è½½å›¾ç‰‡ã€‚æ‰€ä»¥ä½ çš„ä»£ç å¼€å§‹å°†è¯¢é—®è¡¨è§†å›¾æœ‰å¤šå°‘è¡Œå¯è§ã€‚å› æ­¤ï¼Œä»£ç åº”è¯¥ç›´åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªæœªåŠ æ»¤é•œçš„å›¾ç‰‡ç­‰å¾…å¤„ç†æ—¶æ‰å¼€å§‹å¤„ç†å›¾ç‰‡åŠ æ»¤é•œæ“ä½œã€‚\n\nä¸ºäº†ä½¿appæ›´åŠ å¿«é€Ÿå“åº”ï¼Œä»£ç å°†è¦è®©å›¾ç‰‡ä¸€æ—¦ä¸‹è½½å®Œæ¯•ç«‹å³æ˜¾ç¤ºã€‚è®©åæ‰å¼€å§‹è¿›è¡Œå›¾ç‰‡åŠ æ»¤é•œæ“ä½œï¼Œè®©åæ›´æ–°UIç•Œé¢æ¥æ˜¾ç¤ºå·²ç»ç»è¿‡æ»¤é•œå¤„ç†åçš„å›¾ç‰‡ã€‚ä¸‹é¢çš„å›¾æ ‡æ˜¾ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹çš„æ§åˆ¶æµï¼š\n\n![Control Flow](http://ww3.sinaimg.cn/mw690/64124373gw1ezk75nd4bdj20i206yq3q.jpg)\n\n*Cotroll Flow*\n\nä¸ºäº†è·å¾—è¿™äº›å¯¹è±¡ï¼Œä½ éœ€è¦è·Ÿè¸ªè¿™å¼ å›¾ç‰‡ç°åœ¨æ˜¯å¦æ­£åœ¨è¢«ä¸‹è½½ï¼Œä¸€æ—¦å®Œæˆä¸‹è½½ï¼Œå‡å¦‚å›¾ç‰‡çš„æ»¤é•œè¢«åº”ç”¨ä¸Šã€‚ä½ éœ€è¦è·Ÿè·Ÿè¸ªæ¯ä¸ªæ“ä½œçš„çŠ¶æ€ï¼Œå®ƒæ˜¯å¦æ­£åœ¨ä¸‹è½½ä¸­æˆ–è€…æ‰§è¡Œæ»¤é•œæ“ä½œï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿå–æ¶ˆï¼Œæš‚åœæˆ–è€…æ¢å¤æ¯ä¸ªæ“ä½œå½“ç”¨æˆ·æ»šåŠ¨çš„æ—¶å€™ã€‚\n\nOkeyï¼ ç°åœ¨ä½ å‡†å¤‡å¥½å¼€å§‹ç ä»£ç äº†ï¼ :]\n\næ‰“å¼€ä½ ä¸‹è½½çš„å·¥ç¨‹ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„**Swift File**åˆ°ä½ çš„å·¥ç¨‹ä¸­å‘½åä¸º** PhotoOperations.swift**ã€‚æ·»åŠ ä¸‹é¢ä»£ç ï¼š\n\n\n```swift\nclass PendingOperations {\n  lazy var downloadsInProgress = [NSIndexPath:NSOperation]()\n  lazy var downloadQueue:NSOperationQueue = {\n    var queue = NSOperationQueue()\n    queue.name = \"Download queue\"\n    queue.maxConcurrentOperationCount = 1\n    return queue\n    }()\n\n  lazy var filtrationsInProgress = [NSIndexPath:NSOperation]()\n  lazy var filtrationQueue:NSOperationQueue = {\n    var queue = NSOperationQueue()\n    queue.name = \"Image Filtration queue\"\n    queue.maxConcurrentOperationCount = 1\n    return queue\n    }()\n}\n```\n\nè¿™å›ç±»åŒ…å«äº†2ä¸ªå­—å…¸ä¸ºäº†è·Ÿè¸ªæ¿€æ´»å’Œæ­£åœ¨è¿›è¡Œä¸­çš„ä¸‹è½½å’Œæ»¤é•œæ“ä½œå¯¹è¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œå¹¶ä¸”ä¸¤ä¸ªæ“ä½œé˜Ÿåˆ—éƒ½æœ‰å„è‡ªçš„æ“ä½œç±»å‹ã€‚\n\næ‰€æœ‰çš„å€¼è¢«æ‡’åŠ è½½çš„æ–¹å¼åˆ›å»ºï¼Œæ„å‘³ç€ä»–ä»¬ä¸ä¼šè¢«åˆå§‹åŒ–çŸ¥é“ä»–ä»¬ç¬¬ä¸€æ¬¡è¢«æ¥å…¥ã€‚è¿™æ ·æ”¹å–„äº†ä½ appçš„è¡¨ç°æ€§èƒ½ã€‚\n\nåˆ›å»ºä¸€ä¸ª`NSOperationQueue`æ˜¯éå¸¸ç®€å•çš„ï¼Œæ­£å¦‚ä½ æ‰€è§ï¼Œç»™ä½ çš„é˜Ÿåˆ—å‘½åæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºåå­—ä¼šåœ¨ä»ªå™¨æˆ–è€…è°ƒé€Ÿå™¨ä¸­æ˜¾ç¤ºã€‚`maxConcurrentOperationCount`åœ¨è¿™é‡Œç”±äºè¿™ä¸ªæ•™ç¨‹çš„ç¼˜æ•…è¢«è®¾ç½®æˆ1ï¼Œæ˜¯ä¸ºäº†è®©ä½ çœ‹åˆ°æ“ä½œä¸€ä¸ªæ¥ä¸€ä¸ªå®Œæˆã€‚ä½ å¯ä»¥ç¦»å¼€è¿™ä¸€éƒ¨åˆ†å…è®¸é˜Ÿåˆ—å†³å®šä»–ä¸€æ¬¡å¤„ç†å¤šå°‘ä¸ªæ“ä½œ--è¿™æ ·ä¼šè¿›ä¸€æ­¥æ”¹å–„æ€§èƒ½ã€‚\n\né˜Ÿåˆ—æ˜¯æ€æ ·å†³å®šä¸€æ¬¡è¿è¡Œå¤šå°‘ä¸ªæ“ä½œçš„å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼ :] è¿™å–å†³äºç¡¬ä»¶ã€‚é»˜è®¤ï¼Œ`NSOperationQueue`å°†è¦å¤„ç†ä¸€å†™è®¡ç®—åœ¨å±å¹•èƒŒåï¼Œå†³å®šä»€ä¹ˆæ˜¯æœ€å¥½çš„éœ€è¦çœ‹ä»£ç æ˜¯è¿è¡Œåœ¨æŸä¸ªå…·ä½“çš„å¹³å°ï¼Œå’Œå°†è½½å…¥çš„æœ€å¤§æ•°é‡çš„çº¿ç¨‹æ•°ã€‚\n\nè€ƒè™‘åˆ°ä¸‹é¢çš„ä¾‹å­ï¼Œå‡è®¾ç³»ç»Ÿæ­¤æ—¶æ˜¯ç©ºé—²çš„ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šèµ„æºå¯ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªé˜Ÿåˆ—èƒ½å¤Ÿè½½å…¥å¯èƒ½8æ¡å¹¶å‘çš„çº¿ç¨‹ã€‚ä¸‹ä¸€ä¸ªæ—¶åˆ»ä½ è¿è¡Œç¨‹åºï¼Œç³»ç»Ÿå¯èƒ½å¿™äºå…¶ä»–ä¸ç›¸å…³çš„æ­£åœ¨æŠ¢å¤ºèµ„æºçš„æ“ä½œï¼Œè¿™æ—¶é˜Ÿåˆ—å°±ä»…ä»…è½½å…¥2ä¸ªå¹¶å‘çš„çº¿ç¨‹ã€‚å› ä¸ºä½ å·²ç»è®¾ç½®äº†ä¸€ä¸ªæœ€å¤§å¹¶å‘æ“ä½œæ•°ï¼Œåœ¨è¿™ä¸ªappä¸­ä¸€æ¬¡åªä¼šè¿›è¡Œä¸€ä¸ªæ“ä½œã€‚\n\n> æ³¨æ„ï¼šä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä½ å¿…é¡»è·Ÿè¸ªæ‰€æœ‰çš„æ¿€æ´»çš„å’Œæ­£åœ¨è¿›è¡Œä¸­æ“ä½œã€‚é˜Ÿåˆ—æœ‰ä¸€ä¸ª`operations`çš„æ–¹æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªæ“ä½œçš„æ•°ç»„ï¼Œæ‰€æœ‰ä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿåœ¨è¿™ä¸ªå·¥ç¨‹ä¸­è¿™æ ·åšæ•ˆæœä¸æ˜¯å¾ˆå¥½ã€‚ä½ éœ€è¦è·Ÿè¸ªæ›´è¡¨è§†å›¾è¡Œæ•°å…³è”çš„æ“ä½œï¼Œå®ƒå¯èƒ½ä¼šé‡å¤æ‰§è¡Œæ•°ç»„æ¯æ¬¡ä½ éœ€è¦ä¸€ä¸ªçš„æ—¶å€™ã€‚æŠŠå®ƒä»¬å‚¨å­˜åœ¨ä¸€ä¸ªå­—å…¸ä¸­ç”¨index pathæ¥ä½œä¸ºä»–çš„keyæ–¹ä¾¿å¿«é€Ÿå’Œé«˜æ•ˆçš„æŸ¥æ‰¾ã€‚\n\næ˜¯æ—¶å€™è€ƒè™‘ä¸‹è½½å’Œè¿‡æ»¤æ“ä½œäº†ã€‚æ·»åŠ ä¸‹åˆ—ä»£ç åˆ°` PhotoOperations.swift:`æ–‡ä»¶çš„æœ«å°¾ï¼š\n\n```swift\nclass ImageDownloader: NSOperation {\n  //1\n  let photoRecord: PhotoRecord\n\n  //2\n  init(photoRecord: PhotoRecord) {\n    self.photoRecord = photoRecord\n  }\n\n  //3\n  override func main() {\n    //4\n    if self.cancelled {\n      return\n    }\n    //5\n    let imageData = NSData(contentsOfURL:self.photoRecord.url)\n\n    //6\n    if self.cancelled {\n      return\n    }\n\n    //7\n    if imageData?.length > 0 {\n      self.photoRecord.image = UIImage(data:imageData!)\n      self.photoRecord.state = .Downloaded\n    }\n    else\n    {\n      self.photoRecord.state = .Failed\n      self.photoRecord.image = UIImage(named: \"Failed\")\n    }\n  }\n}\n```\n\n`NSOperation`æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ºå®ƒçš„å­ç±»è€Œè®¾è®¡ã€‚æ¯ä¸ªå­ç±»ä»£è¡¨äº†ä¸€ä¸ªç‰¹åˆ«çš„`ä»»åŠ¡`æ­£å¦‚å‘ˆç°åœ¨åˆ—è¡¨æ—©æœŸé‚£æ ·ã€‚\n\nä¸‹é¢æ˜¯ä¸Šé¢ä»£ç æ¯è¡Œæ³¨é‡Šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆçš„è¯´æ˜ï¼š\n\n1. æ·»åŠ ä¸€ä¸ªå¸¸é‡å¼•ç”¨åˆ°å’Œæ“ä½œç›¸å…³çš„`PhotoRecord`å¯¹è±¡\n2. åˆ›å»ºä¸€ä¸ªè®¾è®¡åˆå§‹åŒ–æ–¹æ³•å…è®¸`photo record`å‚æ•°å¯ä»¥è¢«ä¼ è¿›æ¥\n3. `main`æ˜¯ä½ åœ¨`NSOperation`å­ç±»ä¸­éœ€è¦é‡å†™çš„æ–¹æ³•ï¼Œç”¨æ¥æ‰§è¡Œç›¸å…³å·¥ä½œ\n4. åœ¨å¯åŠ¨å¼€å§‹å‰æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆï¼Œæ“ä½œåº”è¯¥å®šæœŸæ£€æŸ¥æ˜¯å¦å·²ç»è¢«å–æ¶ˆåœ¨å°è¯•é•¿æ—¶é—´æˆ–å¯†é›†çš„å·¥ä½œä¹‹å‰\n5. ä¸‹è½½å›¾ç‰‡æ•°æ®\n6. å†æ¬¡æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆ\n7. å‡å¦‚è¿™é‡Œæœ‰æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ç„¶åæŠŠå®ƒæ·»åŠ åˆ°è®°å½•ä¸­ï¼ŒåŒæ—¶æ”¹å˜å®ƒçš„çŠ¶æ€ï¼Œå‡å¦‚è¿™é‡Œæ²¡æœ‰æ•°æ®ï¼ŒæŠŠè¿™æ¡è®°å½•æ ‡è®°æˆå¤±è´¥ç„¶åè®¾ç½®é€‚å½“çš„å›¾ç‰‡\n\nä¸‹ä¸€æ­¥ï¼Œä½ å°†åˆ›å»ºå¦ä¸€ä¸ªæ“ä½œæ¥å¤„ç†å›¾ç‰‡åŠ æ»¤é•œçš„æ“ä½œï¼æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ°`PhotoOperations.swift`æ–‡ä»¶æœ«å°¾ï¼š\n\n```swift\nclass ImageFiltration: NSOperation {\n  let photoRecord: PhotoRecord\n\n  init(photoRecord: PhotoRecord) {\n    self.photoRecord = photoRecord\n  }\n\n  override func main () {\n    if self.cancelled {\n      return\n    }\n\n    if self.photoRecord.state != .Downloaded {\n      return\n    }\n\n    if let filteredImage = self.applySepiaFilter(self.photoRecord.image!) {\n      self.photoRecord.image = filteredImage\n      self.photoRecord.state = .Filtered\n    }\n  }\n}\n```\n\né™¤äº†ä½ å¯¹å›¾ç‰‡åº”ç”¨æ»¤é•œï¼ˆä½¿ç”¨ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³•ï¼Œå› æ­¤ç¼–è¯‘1é”™è¯¯ï¼‰è€Œä¸æ˜¯ä¸‹è½½å®ƒä¹‹å¤–ï¼Œè¿™ä¸ªçœ‹èµ·æ¥å’Œä¸‹è½½æ“ä½œéå¸¸ç›¸åƒã€‚\n\næ·»åŠ é—å¤±çš„å›¾ç‰‡æ»¤é•œå¤„ç†æ–¹æ³•åˆ°`ImageFiltration`ç±»ä¸­:\n\n\n```swift\n(image:UIImage) -> UIImage? {\n  let inputImage = CIImage(data:UIImagePNGRepresentation(image))\n\n  if self.cancelled {\n    return nil\n  }\n  let context = CIContext(options:nil)\n  let filter = CIFilter(name:\"CISepiaTone\")\n  filter.setValue(inputImage, forKey: kCIInputImageKey)\n  filter.setValue(0.8, forKey: \"inputIntensity\")\n  let outputImage = filter.outputImage\n\n  if self.cancelled {\n    return nil\n  }\n\n  let outImage = context.createCGImage(outputImage, fromRect: outputImage.extent())\n  let returnImage = UIImage(CGImage: outImage)\n  return returnImage\n}\n```\n\nå›¾ç‰‡æ·»åŠ æ»¤é•œæ“ä½œä½¿ç”¨å…ˆå‰`ListViewController`ä¸­ç›¸åŒçš„å®ç°ã€‚å·²ç»æŠŠå®ƒç§»åŠ¨åˆ°è¿™é‡Œæ¥äº†ä»¥è‡³äºå®ƒå®ƒèƒ½åœ¨åå°çš„ä¸€ä¸ªå•ç‹¬çš„æ“ä½œä¸­å®Œæˆã€‚å†æ¬¡å¼ºè°ƒï¼Œä½ åº”è¯¥éå¸¸é¢‘ç¹çš„æ£€æŸ¥å–æ¶ˆæ“ä½œï¼›æœ€ä½³å®è·µæ˜¯åœ¨è¿›è¡Œä»»ä½•è€—æ—¶æ“ä½œè°ƒç”¨ä¹‹å‰å’Œä¹‹åã€‚ä¸€æ—¦åŠ æ»¤é•œæ“ä½œå®Œæˆï¼Œä½ åº”è¯¥ç«‹å³è®¾ç½®photo record å®ä¾‹çš„å€¼ã€‚\n\nå¾ˆæ£’ï¼ç°åœ¨ä½ å·²ç»æœ‰äº†æ‰€æœ‰çš„å·¥å…·å’ŒåŸºç¡€ä¸ºäº†å¤„ç†åå°ä»»åŠ¡è¿›ç¨‹çš„æ“ä½œã€‚æ˜¯æ—¶å€™å›åˆ°æ§åˆ¶å™¨ä¿®æ”¹å®ƒä»¥ä¾¿èƒ½åˆ©ç”¨æ‰€æœ‰è¿™äº›æ–°çš„ç¦åˆ©ã€‚\n\nåˆ‡æ¢åˆ°`ListViewController.swift`æ–‡ä»¶ï¼Œç„¶ååˆ é™¤`lazy var photos`æ¥å£å£°æ˜ã€‚æ·»åŠ ä¸‹é¢å£°æ˜ï¼š\n\n```swift\nvar photos = [PhotoRecord]()\nlet pendingOperations = PendingOperations()\n```\n\nè¿™äº›å°†æŒæœ‰ä¸€ä¸ªæ•°ç»„çš„ä½ åœ¨å¼€å§‹åˆ›å»ºçš„`PhotoDetails`å¯¹è±¡ï¼Œ`PendingOperations`å¯¹è±¡æ¥ç®¡ç†æ“ä½œã€‚\n\næ·»åŠ ä¸€ä¸ªä¸‹è½½`photos property`åˆ—è¡¨æ–°çš„æ–¹æ³•åˆ°ç±»ä¸­ï¼š\n\n```swift\nfunc fetchPhotoDetails() {\n  let request = NSURLRequest(URL:dataSourceURL!)\n  UIApplication.sharedApplication().networkActivityIndicatorVisible = true\n\n  NSURLConnection.sendAsynchronousRequest(request, queue: NSOperationQueue.mainQueue()) {response,data,error in\n    if data != nil {\n      let datasourceDictionary = NSPropertyListSerialization.propertyListWithData(data, options: Int(NSPropertyListMutabilityOptions.Immutable.rawValue), format: nil, error: nil) as! NSDictionary\n\n      for(key : AnyObject,value : AnyObject) in datasourceDictionary {\n        let name = key as? String\n        let url = NSURL(string:value as? String ?? \"\")\n        if name != nil && url != nil {\n          let photoRecord = PhotoRecord(name:name!, url:url!)\n          self.photos.append(photoRecord)\n        }\n      }\n\n      self.tableView.reloadData()\n    }\n\n    if error != nil {\n      let alert = UIAlertView(title:\"Oops!\",message:error.localizedDescription, delegate:nil, cancelButtonTitle:\"OK\")\n      alert.show()\n    }\n    UIApplication.sharedApplication().networkActivityIndicatorVisible = false\n  }\n}\n```\n\nè¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªå¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚ï¼Œå½“å®Œæˆçš„æ—¶å€™ï¼Œå°†æ‰§è¡Œ`completion block`åœ¨ä¸»çº¿ç¨‹ã€‚å½“ä¸‹è½½å®Œæˆproperty listçš„æ•°æ®è¢«èƒå–æˆä¸€ä¸ª`NSDictionary`,ç„¶åå†æ¬¡å¤„ç†ä¸€ä¸ªæ•°ç»„çš„`PhotoRecord`çš„å¯¹è±¡ã€‚ä½ ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™é‡Œçš„`NSOperation`,ä½ åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­æ¥å…¥å®ƒä½¿ç”¨`NSOperationQueue.mainQueue()`ã€‚\n\nåœ¨`viewDidLoad`è°ƒç”¨æ–°æ–¹æ³•\n> fetchPhotoDetails()\n\nä¸‹ä¸€æ­¥æ‰¾åˆ°` tableView(_:cellForRowAtIndexPath:)`ç„¶åæ›¿æ¢å®ƒç”¨ä¸‹é¢çš„å®ç°ï¼š\n\n```swift\noverride func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {\n  let cell = tableView.dequeueReusableCellWithIdentifier(\"CellIdentifier\", forIndexPath: indexPath) as! UITableViewCell\n\n  //1\n  if cell.accessoryView == nil {\n    let indicator = UIActivityIndicatorView(activityIndicatorStyle: .Gray)\n    cell.accessoryView = indicator\n  }\n  let indicator = cell.accessoryView as! UIActivityIndicatorView\n\n  //2\n  let photoDetails = photos[indexPath.row]\n\n  //3\n  cell.textLabel?.text = photoDetails.name\n  cell.imageView?.image = photoDetails.image\n\n  //4\n  switch (photoDetails.state){\n  case .Filtered:\n    indicator.stopAnimating()\n  case .Failed:\n    indicator.stopAnimating()\n    cell.textLabel?.text = \"Failed to load\"\n  case .New, .Downloaded:\n    indicator.startAnimating()\n    self.startOperationsForPhotoRecord(photoDetails,indexPath:indexPath)\n  }\n\n  return cell\n}\n```\n\nèŠ±ç‚¹æ—¶é—´æ¥é€šè¯»æ³¨é‡ŠåŒºåŸŸä¸‹é¢çš„è§£é‡Šï¼š\n\n1. ä¸ºäº†ç»™ç”¨æˆ·æä¾›åé¦ˆï¼Œåˆ›å»º`UIActivityIndicatorView`è®©åæŠŠå®ƒè®¾æˆcellçš„accessory viewã€‚\n2. æ•°æ®æºåŒ…å«`PhotoRecord`å®ä¾‹ã€‚æŠ“å–æ­£ç¡®çš„æ•°æ®åŸºäºå½“å‰è¡Œçš„`indexPath`ã€‚\n3. cellçš„æ–‡æœ¬æ ‡ç­¾æ€»æ˜¯ä¸€æ ·çš„ï¼Œå›¾ç‰‡è¢«æ­£ç¡®çš„è®¾ç½®åœ¨`PhotoRecord`ä¸­å½“å®ƒè¢«å¤„ç†çš„æ—¶å€™ï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿè®¾ç½®ä»–ä»¬ä¸¤è€…ï¼Œè€Œä¸ç®¡è®°å½•çš„çŠ¶æ€ã€‚\n4. æ£€æŸ¥è®°å½•ï¼Œæ­£ç¡®çš„è®¾ç½®activity indicatorå’Œæ–‡æœ¬ï¼Œç„¶åå¼€å§‹æ“ä½œï¼ˆæš‚æ—¶è¿˜æ²¡å®ç°ï¼‰\n\nä½ å¯ä»¥ç§»é™¤`applySepiaFilter`çš„å®ç°ï¼Œå› ä¸ºé‚£ä¸ªå°†ä¸å†è¢«è°ƒç”¨äº†ï¼Œæ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°ç±»ä¸­æ¥å¼€å§‹æ“ä½œï¼š\n\n```swift\nfunc startOperationsForPhotoRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath){\n  switch (photoDetails.state) {\n  case .New:\n    startDownloadForRecord(photoDetails, indexPath: indexPath)\n  case .Downloaded:\n    startFiltrationForRecord(photoDetails, indexPath: indexPath)\n  default:\n    NSLog(\"do nothing\")\n  }\n}\n```\n\nè¿™é‡Œï¼Œä½ å°†ä¼ é€’ä¸€ä¸ª`PhotoRecord`ç±»å‹çš„å®ä¾‹å¸¦æœ‰å®ƒçš„`index path`ã€‚\nä¾æ®`photo record`çš„çŠ¶æ€ï¼Œä½ é€‰å¼€å§‹è¿›è¡Œä¸‹è½½è¿˜æ˜¯åŠ æ»¤é•œçš„æ­¥éª¤ã€‚\n\n> æ³¨æ„ï¼šä¸‹è½½å›¾ç‰‡å’Œç»™å›¾ç‰‡åŠ æ»¤é•œçš„æ–¹æ³•åˆ†å¼€å®ç°ï¼Œå› ä¸ºè¿™é‡Œæœ‰å¯èƒ½å‡ºç°å½“ä¸€ä¸ªå›¾ç‰‡æ­£åœ¨è¢«ä¸‹è½½ï¼Œç”¨æˆ·å¯èƒ½æŠŠå®ƒæ»šå¼€äº†ï¼Œè¿™æ ·ä½ å°±ä¸å¿…å¯¹å®ƒåº”ç”¨æ»¤é•œæ“ä½œã€‚å½“ä¸‹ä¸€æ¬¡ç”¨æˆ·åˆæ¥åˆ°ç›¸åŒçš„å“ªè¡Œæ—¶ï¼Œä½ ä¸å¿…é‡æ–°ä¸‹è½½å›¾ç‰‡ï¼›ä½ åªéœ€å¯¹å®ƒåº”ç”¨\nå›¾ç‰‡æ»¤é•œå³å¯ï¼ Efficiency rocks! :]\n\nç°åœ¨ä½ éœ€è¦å®ç°ä½ åœ¨ä¸Šé¢è°ƒç”¨çš„æ–¹æ³•ã€‚è®°ä½ä½ åˆ›å»ºçš„è‡ªå®šä¹‰çš„ç±»ï¼Œ`PendingOperations`,ä¿æŒè·Ÿè¸ªæ“ä½œï¼›ç°åœ¨å®é™…ä¸Šä½ å¯ä»¥ä½¿ç”¨å®ƒäº†ï¼æ·»åŠ ä¸‹é¢çš„æ–¹æ³•åˆ°ç±»ä¸­ï¼š\n\n```swift\nfunc startDownloadForRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath){\n  //1\n  if let downloadOperation = pendingOperations.downloadsInProgress[indexPath] {\n    return\n  }\n\n  //2\n  let downloader = ImageDownloader(photoRecord: photoDetails)\n  //3\n  downloader.completionBlock = {\n    if downloader.cancelled {\n      return\n    }\n    dispatch_async(dispatch_get_main_queue(), {\n      self.pendingOperations.downloadsInProgress.removeValueForKey(indexPath)\n      self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .Fade)\n    })\n  }\n  //4\n  pendingOperations.downloadsInProgress[indexPath] = downloader\n  //5\n  pendingOperations.downloadQueue.addOperation(downloader)\n}\n\nfunc startFiltrationForRecord(photoDetails: PhotoRecord, indexPath: NSIndexPath){\n  if let filterOperation = pendingOperations.filtrationsInProgress[indexPath]{\n    return\n  }\n\n  let filterer = ImageFiltration(photoRecord: photoDetails)\n  filterer.completionBlock = {\n    if filterer.cancelled {\n      return\n    }\n    dispatch_async(dispatch_get_main_queue(), {\n      self.pendingOperations.filtrationsInProgress.removeValueForKey(indexPath)\n      self.tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .Fade)\n      })\n  }\n  pendingOperations.filtrationsInProgress[indexPath] = filterer\n  pendingOperations.filtrationQueue.addOperation(filterer)\n}\n```\n\nOkey!ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆ—è¡¨æ¥å¸®åŠ©ä½ ç«‹å³ä¸Šé¢çš„ä»£ç åˆ°åº•åšäº†ä»€ä¹ˆï¼š\n\n1. é¦–å…ˆï¼Œæ£€æŸ¥ç‰¹å®šçš„`indexPath`æ¥çœ‹è¿™é‡Œæ˜¯å¦å·²ç»æœ‰ä¸€ä¸ªæ“ä½œåœ¨`downloadsInProgress`ä¸­ã€‚å‡å¦‚æœ‰ï¼Œå¿½ç•¥å®ƒã€‚\n2. å‡å¦‚æ²¡æœ‰ï¼Œé€šè¿‡`designated initializer`åˆ›å»ºä¸€ä¸ª`ImageDownloader`å®ä¾‹\n3. æ·»åŠ ä¸€ä¸ªå½“æ“ä½œå®Œæˆæ—¶æ‰§è¡Œçš„å®Œæˆblockã€‚è¿™æ˜¯æœ€å¥½çš„åœ°æ–¹è®©ä½ å…¶ä½™çš„åº”ç”¨çŸ¥é“ä¸€ä¸ªæ“ä½œå·²ç»å®Œæˆã€‚æ³¨æ„å®Œæˆblockå¿…é¡»è¢«æ‰§è¡Œå³ä½¿è¿™ä¸ªæ“ä½œè¢«å–æ¶ˆï¼Œè¿™ç›¸å½“çš„é‡è¦ï¼Œæ‰€ä»¥ä½ éœ€è¦ä½¿ç”¨GCDæ¥è§¦å‘é‡æ–°è½½å…¥è¡¨è§†å›¾åœ¨ä¸»çº¿ç¨‹ã€‚\n4. æ·»åŠ æ“ä½œåˆ°`downloadsInProgress`ä¸­æ¥ä¿æŒè·Ÿè¸ªä¸€äº›äº‹æƒ…ã€‚\n5. æ·»åŠ æ“ä½œåˆ°ä¸‹è½½é˜Ÿåˆ—ä¸­ã€‚è¿™æ˜¯ä½ å®é™…è·å–è¿™äº›æ“ä½œå¼€å§‹è¿è¡Œçš„æ–¹æ³•--é˜Ÿåˆ—éœ€è¦æ³¨æ„çš„æ˜¯ä¸€æ—¦ä½ æ·»åŠ äº†æ“ä½œå®ƒå°±ä¼šæ‰§è¡Œã€‚\n\nè¿‡æ»¤å›¾ç‰‡çš„æ–¹æ³•éµå¾ªä¸‹é¢ç›¸åŒçš„ç±»å‹ï¼Œé™¤äº†å®ƒä½¿ç”¨`ImageFiltration`å’Œ`filtrationsInProgress`æ¥è·Ÿè¸ªæ“ä½œã€‚ä½œä¸ºç»éªŒï¼Œä½ åº”è¯¥å°è¯•ä¸è¦é‡å¤è¿™ä¸ªåŒºåŸŸçš„ä»£ç  :]\n\nä½ åšåˆ°äº†ï¼ä½ çš„å·¥ç¨‹å®Œæˆäº†ã€‚æ„å»ºè®©åè¿è¡Œçœ‹æœ‰ä»€ä¹ˆæ”¹è¿›åœ¨æ“ä½œä¸Šï¼å½“ä½ æ»šåŠ¨è¡¨è§†å›¾çš„æ—¶å€™ï¼Œappå¹¶æ²¡æœ‰åœæ­¢ï¼Œè¿˜æ˜¯åƒå®ƒä»¬å˜å¾—å¯è§ä¸€æ ·ç»§ç»­ä¸‹è½½å›¾ç‰‡å’Œç»™å›¾ç‰‡åŠ æ»¤é•œæ“ä½œã€‚\n\n![classicphotos-stalled-screenshot](http://ww2.sinaimg.cn/mw690/64124373gw1ezkc6fh23sj205x08wdga.jpg)\n\n*åŸæ¥çš„å›¾ç‰‡ï¼Œç°åœ¨å¯ä»¥æ»šåŠ¨äº†*\n\næ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿä½ èƒ½çœ‹åˆ°éšåšä½ çš„è¿›æ­¥è®©ä½ çš„åº”ç”¨æ›´æ˜“äºå“åº”èƒ½åšå‡ºçš„åŠªåŠ› --å¯¹ç”¨æˆ·æ¥è¯´æ›´æœ‰è¶£ï¼\n\n### ç»†å¾®çš„è°ƒæ•´\n\nä½ å·²ç»éšç€è¿™ä¸ªæ•™ç¨‹èµ°è¿‡æ¼«é•¿çš„è·¯ï¼ä½ çš„å°é¡¹ç›®ç°åœ¨ååº”çµæ•è¡¨æ˜äº†åœ¨åŸæ¥çš„ç‰ˆæœ¬åŸºç¡€ä¸Šæœ‰å¾ˆå¤šæ”¹è¿›ã€‚ç„¶è€Œï¼Œè¿™é‡Œä»»ç„¶æœ‰ä¸€äº›é—ç•™çš„ç»†èŠ‚æˆ‘ä»¬éœ€è¦è€ƒè™‘ã€‚ä½ æ˜¯æƒ³æˆä¸ºä¸€åä¼Ÿå¤§çš„ç¨‹åºå‘˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ï¼\n\nä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†å½“ä½ æ»šåŠ¨è¡¨è§†å›¾æ—¶ï¼Œé‚£äº›ç¦»å±çš„cellä»ç„¶åœ¨å¤„ç†ä¸‹è½½å’Œç»™å›¾ç‰‡åŠ æ»¤é•œçš„æ“ä½œã€‚å‡å¦‚ä½ å¿«é€Ÿæ»šåŠ¨ï¼Œappå°†å¿™äºä¸‹è½½å’Œç»™å›¾ç‰‡å¤„ç†æ»¤é•œçš„æ“ä½œï¼Œåœ¨åˆ—è¡¨ä¸­ä»æœ€å‰é¢ç”šè‡³åˆ°ä¸å¯è§çš„åœ°æ–¹ã€‚ç†æƒ³çš„æƒ…å†µä¸‹appåº”è¯¥å¯¹ç¦»å¼€å±å¹•çš„cellså°±æ˜¯ç°åœ¨ä¸å¯è§çš„å–æ¶ˆæ»¤é•œæ“ä½œã€‚\n\néš¾é“ä½ æ²¡æœ‰æŠŠå–æ¶ˆçš„è§„å®šæ”¾è¿›ä½ çš„ä»£ç é‡Œï¼Ÿ æ˜¯çš„ï¼Œä½ åšäº†--ç°åœ¨ä½ åº”è¯¥å……åˆ†åˆ©ç”¨å®ƒä»¬ï¼:]\n\nå›åˆ°Xcodeï¼Œè®©åæ‰“å¼€`ListViewController.swift`æ–‡ä»¶ã€‚å»åˆ°`tableView(_:cellForRowAtIndexPath:)`æ–¹æ³•çš„å®ç°ï¼Œå°è£…`startOperationsForPhotoRecord`è°ƒç”¨åœ¨ä¸€ä¸ªifæ¡ä»¶å‘ä¸‹é¢çš„ï¼š\n\n```swift\nif (!tableView.dragging && !tableView.decelerating) {\n  self.startOperationsForPhotoRecord(photoDetails, indexPath: indexPath)\n}\n```\nä½ éœ€è¦å‘Šè¯‰è¡¨è§†å›¾å¼€å§‹æ“ä½œä»…ä»…å½“è¡¨è§†å›¾æ²¡æœ‰æ»šåŠ¨çš„æ—¶å€™ã€‚è¿™å®é™…ä¸Šæ˜¯`UIScrollView`çš„æ¥å£ï¼Œç”±äº`UITableView`æ˜¯`UIScrollView`çš„å­ç±»ï¼Œä½ è‡ªåŠ¨ç»§æ‰¿äº†è¿™äº›æ¥å£ã€‚\n\nä¸‹ä¸€æ­¥ï¼Œæ·»åŠ åˆ°ä¸‹é¢`UIScrollView`ä»£ç†æ–¹æ³•çš„å®ç°åˆ°ç±»ä¸­ï¼š\n\n```swift\noverride func scrollViewWillBeginDragging(scrollView: UIScrollView) {\n  //1\n  suspendAllOperations()\n}\n\noverride func scrollViewDidEndDragging(scrollView: UIScrollView, willDecelerate decelerate: Bool) {\n  // 2\n  if !decelerate {\n    loadImagesForOnscreenCells()\n    resumeAllOperations()\n  }\n}\n\noverride func scrollViewDidEndDecelerating(scrollView: UIScrollView) {\n  // 3\n  loadImagesForOnscreenCells()\n  resumeAllOperations()\n}\n```\n\nå¿«é€Ÿèµ°æŸ¥ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºåœ¨ä¸‹é¢ï¼š\n\n1. å½“ç”¨æˆ·å¼€å§‹æ»šåŠ¨ï¼Œä½ æƒ³æš‚åœæ‰€æœ‰çš„æ“ä½œè®©åçœ‹çœ‹ç”¨æˆ·æƒ³çœ‹åˆ°ä»€ä¹ˆã€‚ä½ å°†è¦å®ç°`suspendAllOperations`åœ¨ä¸€ä¼šå„¿å·¥å¤«ã€‚\n2. å‡å¦‚`decelerate`çš„å€¼æ˜¯`false`,é‚£å°±æ„å‘³ç€åœæ­¢æ‹–æ‹½è¡¨è§†å›¾ï¼Œå› æ­¤ä½ æƒ³æ¢å¤æš‚åœçš„ï¼Œå› ä¸ºcellç¦»å¼€å±å¹•å–æ¶ˆçš„æ“ä½œï¼Œå¯åŠ¨åœ¨å±å¹•å†…cellsçš„æ“ä½œã€‚ä½ å°†è¦ä¸€èµ·å®ç°`loadImagesForOnscreenCells`å’Œ`resumeAllOperations`ã€‚\n3. ä»£ç†æ–¹æ³•å‘Šè¯‰ä½ è¡¨è§†å›¾å·²ç»åœæ­¢æ»šåŠ¨ï¼Œæ‰€ä»¥ä½ å°†åšå’Œ#2æ¡ç›¸åŒçš„å¤„ç†ã€‚\n\nç°åœ¨ï¼Œæ·»åŠ ä¸‹é¢è¿™äº›é—å¤±çš„æ–¹æ³•çš„å®ç°åˆ°`ListViewController.swift`:\n\n```swift\nfunc suspendAllOperations () {\n  pendingOperations.downloadQueue.suspended = true\n  pendingOperations.filtrationQueue.suspended = true\n}\n\nfunc resumeAllOperations () {\n  pendingOperations.downloadQueue.suspended = false\n  pendingOperations.filtrationQueue.suspended = false\n}\n\nfunc loadImagesForOnscreenCells () {\n  //1\n  if let pathsArray = tableView.indexPathsForVisibleRows() {\n    //2\n    var allPendingOperations = Set(pendingOperations.downloadsInProgress.keys.array)\n    allPendingOperations.unionInPlace(pendingOperations.filtrationsInProgress.keys.array)\n\n    //3\n    var toBeCancelled = allPendingOperations\n    let visiblePaths = Set(pathsArray as! [NSIndexPath])\n    toBeCancelled.subtractInPlace(visiblePaths)\n\n    //4\n    var toBeStarted = visiblePaths\n    toBeStarted.subtractInPlace(allPendingOperations)\n\n    // 5\n    for indexPath in toBeCancelled {\n      if let pendingDownload = pendingOperations.downloadsInProgress[indexPath] {\n        pendingDownload.cancel()\n      }\n      pendingOperations.downloadsInProgress.removeValueForKey(indexPath)\n      if let pendingFiltration = pendingOperations.filtrationsInProgress[indexPath] {\n        pendingFiltration.cancel()\n      }\n      pendingOperations.filtrationsInProgress.removeValueForKey(indexPath)\n    }\n\n    // 6\n    for indexPath in toBeStarted {\n      let indexPath = indexPath as NSIndexPath\n      let recordToProcess = self.photos[indexPath.row]\n      startOperationsForPhotoRecord(recordToProcess, indexPath: indexPath)\n    }\n  }\n}\n```\n\n`suspendAllOperations`å’Œ`resumeAllOperations`æœ‰ä¸€ä¸ªç®€å•çš„å®ç°ã€‚`NSOperationQueues`èƒ½å¤Ÿè¢«æš‚åœï¼Œé€šè¿‡è®¾ç½®`suspended`æ¥å£ä¸º`true`ã€‚è¿™å°†æš‚åœé˜Ÿåˆ—é‡Œé¢çš„æ‰€æœ‰æ“ä½œ--ä½ ä¸èƒ½å•ç‹¬æš‚åœä¸€ä¸ªæ“ä½œã€‚\n\n`loadImagesForOnscreenCells`æœ‰ä¸€ç‚¹å°å¤æ‚ã€‚è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ\n\n1. ä»¥ä¸€ä¸ªåŒ…å«äº†ç°åœ¨è¡¨è§†å›¾å¯è§çš„`index paths`çš„æ•°ç»„å¼€å§‹å¼€å§‹\n2. æ„é€ ä¸€ä¸ªæ‰€æœ‰è¿›è¡Œä¸­çš„æ“ä½œçš„é›†åˆé€šè¿‡ç»“åˆæ‰€æœ‰åœ¨ä¸‹è½½çš„è¿›åº¦+æ‰€æœ‰åœ¨å¤„ç†æ»¤é•œçš„è¿›åº¦ã€‚\n3. æ„é€ ä¸€ä¸ª`index paths`é›†åˆç”¨æ¥å–æ¶ˆæ“ä½œã€‚å¼€å§‹æ‰€æœ‰çš„æ“ä½œï¼Œç„¶åç§»é™¤å¯è§è¡Œçš„`index paths`ï¼Œè¿™æ ·è®²ç•™ä¸‹ä¸€ä¸ªç¦»å¼€å±å¹•çš„è¡Œæ­£åœ¨æ‰§è¡Œçš„æ“ä½œé›†åˆ\n4. æ„é€ ä¸€ä¸ª`index paths`é›†åˆï¼Œéœ€è¦æ“ä½œå¯åŠ¨ï¼Œç”¨æ‰€æœ‰å¯è§è¡Œçš„`index paths`å¯åŠ¨ï¼Œè®©åç§»é™¤å®ƒä»¬ä¸­åœ¨è¿›è¡Œçš„æ“ä½œã€‚\n5. éå†é‚£äº›è¢«å–æ¶ˆçš„æ“ä½œï¼Œå–æ¶ˆå®ƒä»¬ï¼Œç„¶åç§»é™¤å®ƒä»¬çš„å¼•ç”¨ä»`PendingOperations`ã€‚\n6. éå†é‚£äº›å°†è¦å¼€å§‹çš„æ“ä½œï¼Œç„¶åå¯¹ä»–ä»¬æ¯ä¸ªè°ƒç”¨`startOperationsForPhotoRecord`ã€‚\n\n\næ„å»ºè¿è¡Œç„¶åä½ å‘ç°ä¸€ä¸ªæ›´æµç•…ï¼Œèµ„æºç®¡ç†å¾·æ›´å¥½çš„åº”ç”¨ï¼ç»™ä½ è‡ªå·±ä¸€è½®æŒå£°ï¼\n\n![improved app](http://ww2.sinaimg.cn/mw690/64124373gw1ezkdl5q55nj20jg09qq4h.jpg)\n\n*åŸæ¥çš„ç›¸å†Œï¼Œè½½å…¥ä¸œè¥¿ä¸€æ¬¡ä¸€ä¸ª*\n\næ³¨æ„åˆ°å½“ä½ å®Œæˆæ»šåŠ¨è¡¨è§†å›¾ï¼Œåœ¨å¯è§åŒºåŸŸè¡Œçš„cellçš„å›¾ç‰‡ç«‹å³å¼€å§‹å¤„ç†ã€‚\n\n### ä½•å»ä½•ä»ï¼Ÿ\nè¿™é‡Œæ˜¯[completed version of the project](http://cdn2.raywenderlich.com/wp-content/uploads/2014/10/ClassicPhotos-Final63.zip)ã€‚\n\n> æ³¨æ„ï¼šæ­¤æ•™ç¨‹å†™äº`Update 17 April 2015: Updated for Xcode 6.3 and Swift 1.2`,ç°åœ¨Swiftæœ€æ–°ç‰ˆæœ¬2.1ä½¿ç”¨Xcode7+ä»¥ä¸Šç¼–è¾‘ä¼šæŠ¥é”™ï¼Œè¿™é‡Œæ‰“åŒ…ä¸€ä¸ªæ–°è¯­æ³•ä¿®æ”¹ç‰ˆ[completed fixed version of the project](https://github.com/wangruofeng/ClassicPhotos-Starter-fixed/archive/master.zip)ã€‚\n>\n>\n\nå‡å¦‚ä½ å®Œæˆè¿™ä¸ªå·¥ç¨‹åº”è¯¥èŠ±æ—¶é—´æ¥çœŸæ­£ç†è§£å®ƒï¼Œæ­å–œä½ ï¼ä½ å¯ä»¥è®¤ä¸ºä½ è‡ªå·±æ˜¯ä¸€ä½æ›´æœ‰ä»·å€¼iOSå¼€å‘è€…äº†æ¯”èµ·åœ¨æ•™ç¨‹åˆšå¼€å§‹çš„æ—¶å€™ï¼å¤§å¤šæ•°å¼€å‘çš„å…¬å¸æ˜¯éå¸¸å¹¸è¿çš„æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªäººæ­£åœ¨çŸ¥é“è¿™ä¸ªä¸œè¥¿ã€‚\n\nå½“æ—¶è¯·å½“å¿ƒ -- åƒå¤šå±‚åµŒå¥—çš„blocks,ä¸å¿…è¦çš„ä½¿ç”¨å¤šçº¿ç¨‹å¯èƒ½è®©ä¸€ä¸ªå·¥ç¨‹å˜å¾—éš¾ä»¥ç†è§£å¯¹ç»´æŠ¤ä½ ä»£ç çš„äººæ¥è¯´ã€‚çº¿ç¨‹å¯èƒ½å¼•å…¥ä¸€äº›éš¾ä»¥æ‰æ‘¸çš„bugsï¼Œå°†æ°¸è¿œä¸å‡ºç°çŸ¥é“ä½ ç½‘ç»œéå¸¸æ…¢ï¼Œæˆ–è€…ä»£ç è¿è¡Œåœ¨ä¸€ä¸ªæ›´å¿«ï¼ˆæˆ–æ›´æ…¢ï¼‰çš„è®¾å¤‡ä¸Šï¼Œæˆ–ä¸€ä¸ªä¸åŒæ•°é‡çš„æ ¸çš„èŠ¯ç‰‡ä¸Šæ—¶ã€‚å°å¿ƒæµ‹è¯•ï¼Œå°½é‡ä½¿ç”¨`Instruments`ï¼ˆæˆ–è€…ä½ è‡ªå·±çš„è§‚å¯Ÿï¼‰æ¥ç¡®å®šå¼•å…¥å¤šçº¿ç¨‹çœŸçš„æœ‰å¾ˆå¤§æ”¹è¿›ã€‚\n\nä¸€ä¸ªæœ‰ç”¨çš„ç‰¹å¾ä½¿ç”¨æ“ä½œæ—¶åœ¨è¿™é‡Œæ²¡æ¶‰åŠåˆ°å°±æ˜¯ä¾èµ–ï¼ˆ`dependency`ï¼‰ã€‚ä½ å¯ä»¥ç»™ä¸€ä¸ªæ“ä½œæ·»åŠ ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„æ“ä½œçš„ä¾èµ–ã€‚è¿™ä¸ªæ“ä½œä¸ä¼šå¼€å§‹ç›´åˆ°å®ƒæ‰€æœ‰ä¾èµ–çš„æ“ä½œå®Œæˆæ—¶ã€‚ä¾‹å¦‚ï¼š\n\n```swift\n// MyDownloadOperation is a subclass of NSOperation\nlet downloadOperation = MyDownloadOperation()\n// MyFilterOperation  is a subclass of NSOperation\nlet filterOperation = MyFilterOperation()\n\nfilterOperation.addDependency(downloadOperation)\n```\n\nç§»é™¤ä¾èµ–ï¼š\n\n```swift\nfilterOperation.removeDependency(downloadOperation)\n```\n\nè¿™ä¸ªå·¥ç¨‹æ˜¯å¦èƒ½ä½¿ç”¨ä¾èµ–ç®€åŒ–å‘¢ï¼ŸæŠŠä½ å­¦åˆ°çš„æ–°æŠ€èƒ½ç”¨èµ·æ¥è¯•ä¸€è¯• ï¼š]\næœ‰ä»¶éå¸¸é‡è¦çš„äº‹éœ€è¦æ³¨æ„çš„å°±æ˜¯ä¸€ä¸ªä¾èµ–æ“ä½œå°†ä»ç„¶å¯åŠ¨å‡å¦‚å®ƒä¾èµ–çš„æ“ä½œè¢«å–æ¶ˆï¼Œè¿˜æœ‰å®ƒå°†è‡ªç„¶å®Œæˆã€‚ä½ éœ€è¦ç‰¢è®°åœ¨å¿ƒã€‚\n\nå‡å¦‚ä½ æœ‰ä»»ä½•è¯„è®ºæˆ–è€…é—®é¢˜å…³äºè¿™ä¸ªæ•™ç¨‹æˆ–è€…`NSOperations`,è¯·åŠ [Pull request](https://github.com/wangruofeng/Github_Blog/pulls)ã€‚\n\n\n\n\n\nè¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç¿»è¯‘","ç½‘ç»œ","Swift"],"categories":["iOS"]},{"title":"å¤šçº¿ç¨‹ä¹‹NSOperation","url":"/2016/01/13/2016-01-13-duo-xian-cheng-zhi-nsoperation/","content":"\næœ¬æ–‡ç›®å½•\n\n* å‰è¨€\n* NSInvocationOperation\n* NSBlokcOperation\n* NSOperationçš„å…¶ä»–ç”¨æ³•\n* è‡ªå®šä¹‰NSOperation\n* å‚è€ƒèµ„æ–™\n\n## å‰è¨€\n1.è™½ç„¶`NSThread`ä¹Ÿå¯ä»¥å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½†æ˜¯éœ€è¦æˆ‘ä»¬å»ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿˜è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥ã€åŠ é”é—®é¢˜ï¼Œé€ æˆä¸€äº›æ€§èƒ½ä¸Šçš„å¼€é”€ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é…åˆä½¿ç”¨`NSOperation`å’Œ`NSOperationQueue`å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå®ç°æ­¥éª¤å¤§è‡´æ˜¯è¿™æ ·çš„\n\n* å…ˆå°†éœ€è¦æ‰§è¡Œçš„æ“ä½œå°è£…åˆ°ä¸€ä¸ªNSOperationå¯¹è±¡ä¸­\n* ç„¶åå°†NSOperationå¯¹è±¡æ·»åŠ åˆ°NSOperationQueueä¸­\n* ç³»ç»Ÿä¼šè‡ªåŠ¨å°†`NSOperation`ä¸­å°è£…çš„æ“ä½œæ”¾åˆ°ä¸€æ¡æ–°çº¿ç¨‹ä¸­æ‰§è¡Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸ç”¨è€ƒè™‘çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€åŒæ­¥ã€åŠ é”ç­‰é—®é¢˜ä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚å¾®åšçš„ç²‰ä¸åˆ—è¡¨ï¼š\n\n![å¾®åšçš„ç²‰ä¸åˆ—è¡¨](http://images.cnitblog.com/blog/497279/201304/19122046-b40c752b60a5413290b569f5377ef7f3.png)\n\næ¯ä¸€è¡Œçš„å¤´åƒè‚¯å®šè¦ä»æ–°æµªæœåŠ¡å™¨ä¸‹è½½å›¾ç‰‡åæ‰èƒ½æ˜¾ç¤ºçš„ï¼Œè€Œä¸”æ˜¯éœ€è¦å¼‚æ­¥ä¸‹è½½ã€‚è¿™æ—¶å€™ä½ å°±å¯ä»¥æŠŠæ¯ä¸€è¡Œçš„å›¾ç‰‡ä¸‹è½½æ“ä½œå°è£…åˆ°ä¸€ä¸ª`NSOperation`å¯¹è±¡ä¸­ï¼Œä¸Šé¢æœ‰6è¡Œï¼Œæ‰€ä»¥è¦åˆ›å»º6ä¸ª`NSOperation`å¯¹è±¡ï¼Œç„¶åæ·»åŠ åˆ°`NSOperationQueue`ä¸­ï¼Œåˆ†åˆ«ä¸‹è½½ä¸åŒçš„å›¾ç‰‡ï¼Œä¸‹è½½å®Œæ¯•åï¼Œå›åˆ°å¯¹åº”çš„è¡Œå°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n2 .é»˜è®¤æƒ…å†µä¸‹ï¼Œ`NSOperation`å¹¶ä¸å…·å¤‡å°è£…æ“ä½œçš„èƒ½åŠ›ï¼Œå¿…é¡»ä½¿ç”¨å®ƒçš„å­ç±»ï¼Œä½¿ç”¨NSOperationå­ç±»çš„æ–¹å¼æœ‰3ç§ï¼š\n\n* NSInvocationOperation\n* NSBlockOperation\n* è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperationï¼Œå®ç°å†…éƒ¨ç›¸åº”çš„æ–¹æ³•\n\nè¿™è®²å…ˆä»‹ç»å¦‚ä½•ç”¨`NSOperation`å°è£…ä¸€ä¸ªæ“ä½œï¼Œåé¢å†ç»“åˆ`NSOperationQueue`æ¥ä½¿ç”¨ã€‚\n\n## NSInvocationOperation\n\n```objc\nNSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run:) object:@\"mj\"];\n[operation start];\n```\n\n*  ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ª`NSInvocationOperation`å¯¹è±¡ï¼Œå®ƒæ˜¯åŸºäºä¸€ä¸ªå¯¹è±¡å’Œselectoræ¥åˆ›å»ºæ“ä½œ\n* ç¬¬2è¡Œè°ƒç”¨äº†startæ–¹æ³•ï¼Œç´§æ¥ç€ä¼šé©¬ä¸Šæ‰§è¡Œå°è£…å¥½çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨selfçš„run:æ–¹æ³•ï¼Œå¹¶ä¸”å°†@\"mj\"ä½œä¸ºæ–¹æ³•å‚æ•°\n* è¿™é‡Œè¦æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè°ƒç”¨äº†startæ–¹æ³•åå¹¶ä¸ä¼šå¼€ä¸€æ¡æ–°çº¿ç¨‹å»æ‰§è¡Œæ“ä½œï¼Œè€Œæ˜¯åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œæ“ä½œã€‚åªæœ‰å°†operationæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­ï¼Œæ‰ä¼šå¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚\n\n## NSBlockOperation\n\n### a.åŒæ­¥æ‰§è¡Œä¸€ä¸ªæ“ä½œ\n\n```objc\nNSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^(){\n         NSLog(@\"æ‰§è¡Œäº†ä¸€ä¸ªæ–°çš„æ“ä½œ\");\n }];\n  // å¼€å§‹æ‰§è¡Œä»»åŠ¡\n[operation start];\n```\n\n*  ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ªNSBlockOperationå¯¹è±¡ï¼Œå®ƒæ˜¯ç”¨ä¸€ä¸ªBlockæ¥å°è£…éœ€è¦æ‰§è¡Œçš„æ“ä½œ\n* ç¬¬2è¡Œè°ƒç”¨äº†startæ–¹æ³•ï¼Œç´§æ¥ç€ä¼šé©¬ä¸Šæ‰§è¡ŒBlockä¸­çš„å†…å®¹\n* è¿™é‡Œè¿˜æ˜¯åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œæ“ä½œï¼Œå¹¶æ²¡æœ‰å¼‚æ­¥æ‰§è¡Œ\n\n### b.å¹¶å‘æ‰§è¡Œå¤šä¸ªæ“ä½œ\n\n```objc\nNSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^(){\nã€€ã€€NSLog(@\"æ‰§è¡Œç¬¬1æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š%@\", [NSThread currentThread]);\n}];\n\n[operation addExecutionBlock:^() {\nã€€ã€€NSLog(@\"åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@\", [NSThread currentThread]);\n}];\n\n[operation addExecutionBlock:^() {\nã€€ã€€NSLog(@\"åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@\", [NSThread currentThread]);\n}];\n\n[operation addExecutionBlock:^() {\nã€€ã€€NSLog(@\"åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š%@\", [NSThread currentThread]);\n}];\n\n// å¼€å§‹æ‰§è¡Œä»»åŠ¡\n[operation start];\n```\n\n* ç¬¬1è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ªNSBlockOperationå¯¹è±¡\n* åˆ†åˆ«åœ¨ç¬¬5ã€9ã€13è¡Œé€šè¿‡addExecutionBlock:æ–¹æ³•æ·»åŠ äº†æ–°çš„æ“ä½œï¼ŒåŒ…æ‹¬ç¬¬1è¡Œçš„æ“ä½œï¼Œä¸€å…±å°è£…äº†4ä¸ªæ“ä½œ\n* åœ¨ç¬¬18è¡Œè°ƒç”¨startæ–¹æ³•åï¼Œå°±ä¼šå¹¶å‘åœ°æ‰§è¡Œè¿™4ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œ\n\n\t\t1 2013-02-02 21:38:46.102 thread[4602:c07] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š<NSThread: 0x7121d50>{name = (null), num = 1}\n\t\t2 2013-02-02 21:38:46.102 thread[4602:3f03] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š<NSThread: 0x742e1d0>{name = (null), num = 5}\n\t\t3 2013-02-02 21:38:46.102 thread[4602:1b03] æ‰§è¡Œç¬¬1æ¬¡æ“ä½œï¼Œçº¿ç¨‹ï¼š<NSThread: 0x742de50>{name = (null), num = 3}\n\t\t4 2013-02-02 21:38:46.102 thread[4602:1303] åˆæ‰§è¡Œäº†1ä¸ªæ–°çš„æ“ä½œï¼Œçº¿ç¨‹ï¼š<NSThread: 0x7157bf0>{name = (null), num = 4}\n\nå¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ“ä½œæ‰€åœ¨çº¿ç¨‹çš„numå€¼éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜æ˜¯ä¸åŒçº¿ç¨‹\n\n## NSOperationçš„å…¶ä»–ç”¨æ³•\n### a.å–æ¶ˆæ“ä½œ\noperationå¼€å§‹æ‰§è¡Œä¹‹å, é»˜è®¤ä¼šä¸€ç›´æ‰§è¡Œæ“ä½œç›´åˆ°å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨cancelæ–¹æ³•ä¸­é€”å–æ¶ˆæ“ä½œ\n\n\t[operation cancel];\n\n### b.åœ¨æ“ä½œå®Œæˆååšä¸€äº›äº‹æƒ…\nå¦‚æœæƒ³åœ¨ä¸€ä¸ªNSOperationæ‰§è¡Œå®Œæ¯•ååšä¸€äº›äº‹æƒ…ï¼Œå°±è°ƒç”¨NSOperationçš„setCompletionBlockæ–¹æ³•æ¥è®¾ç½®æƒ³åšçš„äº‹æƒ…\n\n\toperation.completionBlock = ^() {\n\t    NSLog(@\"æ‰§è¡Œå®Œæ¯•\");\n\t};\nå½“operationå°è£…çš„æ“ä½œæ‰§è¡Œå®Œæ¯•åï¼Œå°±ä¼šå›è°ƒBlocké‡Œé¢çš„å†…å®¹\n\n## è‡ªå®šä¹‰NSOperation\n\nå¦‚æœ`NSInvocationOperation`å’Œ`NSBlockOperation`ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ–°å»ºå­ç±»ç»§æ‰¿NSOperationï¼Œå¹¶æ·»åŠ ä»»ä½•éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚å¦‚æœåªæ˜¯ç®€å•åœ°è‡ªå®šä¹‰NSOperationï¼Œåªéœ€è¦é‡è½½`-(void)main`è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æ·»åŠ éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚\n\nä¸‹é¢å†™ä¸ªå­ç±»DownloadOperationæ¥ä¸‹è½½å›¾ç‰‡\n### a.ç»§æ‰¿NSOperationï¼Œé‡å†™mainæ–¹æ³•\n\n*DownloadOperation.h*\n\n```objc\n#import <Foundation/Foundation.h>\n@protocol DownloadOperationDelegate;\n\n@interface DownloadOperation : NSOperation\n// å›¾ç‰‡çš„urlè·¯å¾„\n@property (nonatomic, copy) NSString *imageUrl;\n// ä»£ç†\n@property (nonatomic, assign) id<DownloadOperationDelegate> delegate;\n\n- (id)initWithUrl:(NSString *)url delegate:(id<DownloadOperationDelegate>)delegate;\n@end\n\n// å›¾ç‰‡ä¸‹è½½çš„åè®®\n@protocol DownloadOperationDelegate <NSObject>\n- (void)downloadFinishWithImage:(UIImage *)image;\n@end\n```\n\n*DownloadOperation.m*\n\n```objc\n#import \"DownloadOperation.h\"\n\n@implementation DownloadOperation\n@synthesize delegate = _delegate;\n@synthesize imageUrl = _imageUrl;\n\n// åˆå§‹åŒ–\n- (id)initWithUrl:(NSString *)url delegate:(id<DownloadOperationDelegate>)delegate {\n    if (self = [super init]) {\n        self.imageUrl = url;\n        self.delegate = delegate;\n    }\n    return self;\n}\n// é‡Šæ”¾å†…å­˜\n- (void)dealloc {\n    [super dealloc];\n    [_imageUrl release];\n}\n\n// æ‰§è¡Œä¸»ä»»åŠ¡\n- (void)main {\n    // æ–°å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå¦‚æœæ˜¯å¼‚æ­¥æ‰§è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®åˆ°ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± \n    @autoreleasepool {\n        // ....\n    }\n}\n@end\n```\n\n* åœ¨ç¬¬22è¡Œé‡è½½äº†mainæ–¹æ³•ï¼Œç­‰ä¼šå°±æŠŠä¸‹è½½å›¾ç‰‡çš„ä»£ç å†™åˆ°è¿™ä¸ªæ–¹æ³•ä¸­\n* å¦‚æœè¿™ä¸ªDownloadOperationæ˜¯åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´mainæ–¹æ³•åœ¨å¼‚æ­¥çº¿ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œæ‰€ä»¥åœ¨ç¬¬24è¡Œåˆ›å»ºäº†ä¸€ä¸ªå±äºå½“å‰çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± \n\n### b.æ­£ç¡®å“åº”å–æ¶ˆäº‹ä»¶\n* é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªNSOperationå¼€å§‹æ‰§è¡Œä¹‹åï¼Œä¼šä¸€ç›´æ‰§è¡Œä»»åŠ¡åˆ°ç»“æŸï¼Œå°±æ¯”å¦‚ä¸Šé¢çš„DownloadOperationï¼Œé»˜è®¤ä¼šæ‰§è¡Œå®Œmainæ–¹æ³•ä¸­çš„æ‰€æœ‰ä»£ç \n* NSOperationæä¾›äº†ä¸€ä¸ªcancelæ–¹æ³•ï¼Œå¯ä»¥å–æ¶ˆå½“å‰çš„æ“ä½œã€‚\n* å¦‚æœæ˜¯è‡ªå®šä¹‰NSOperationçš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†è¿™ä¸ªå–æ¶ˆäº‹ä»¶ã€‚æ¯”å¦‚ï¼Œä¸€æ—¦è°ƒç”¨äº†cancelæ–¹æ³•ï¼Œåº”è¯¥é©¬ä¸Šç»ˆæ­¢mainæ–¹æ³•çš„æ‰§è¡Œï¼Œå¹¶åŠæ—¶å›æ”¶ä¸€äº›èµ„æºã€‚\n* å¤„ç†å–æ¶ˆäº‹ä»¶çš„å…·ä½“åšæ³•æ˜¯ï¼šåœ¨`main`æ–¹æ³•ä¸­å®šæœŸåœ°è°ƒç”¨`isCancelled`æ–¹æ³•æ£€æµ‹æ“ä½œæ˜¯å¦å·²ç»è¢«å–æ¶ˆï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å¦è°ƒç”¨äº†`cancel`æ–¹æ³•ï¼Œå¦‚æœè¿”å›YESï¼Œè¡¨ç¤ºå·²å–æ¶ˆï¼Œåˆ™ç«‹å³è®©mainæ–¹æ³•è¿”å›ã€‚\n* ä»¥ä¸‹åœ°æ–¹å¯èƒ½éœ€è¦è°ƒç”¨`isCancelled`æ–¹æ³•:\n\t1. åœ¨æ‰§è¡Œä»»ä½•å®é™…çš„å·¥ä½œä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯åœ¨mainæ–¹æ³•çš„å¼€å¤´ã€‚å› ä¸ºå–æ¶ˆå¯èƒ½å‘ç”Ÿåœ¨ä»»ä½•æ—¶å€™ï¼Œç”šè‡³åœ¨operationæ‰§è¡Œä¹‹å‰ã€‚\n\t2. æ‰§è¡Œäº†ä¸€æ®µè€—æ—¶çš„æ“ä½œä¹‹åä¹Ÿéœ€è¦æ£€æµ‹æ“ä½œæ˜¯å¦å·²ç»è¢«å–æ¶ˆ\n\n```objc\n- (void)main {\n    // æ–°å»ºä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå¦‚æœæ˜¯å¼‚æ­¥æ‰§è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°†æ— æ³•è®¿é—®åˆ°ä¸»çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± \n    @autoreleasepool {\n        if (self.isCancelled) return;\n\n        // è·å–å›¾ç‰‡æ•°æ®\n        NSURL *url = [NSURL URLWithString:self.imageUrl];\n        NSData *imageData = [NSData dataWithContentsOfURL:url];\n\n        if (self.isCancelled) {\n            url = nil;\n            imageData = nil;\n            return;\n        }\n\n        // åˆå§‹åŒ–å›¾ç‰‡\n        UIImage *image = [UIImage imageWithData:imageData];\n\n        if (self.isCancelled) {\n            image = nil;\n            return;\n        }\n\n        if ([self.delegate respondsToSelector:@selector(downloadFinishWithImage:)]) {\n            // æŠŠå›¾ç‰‡æ•°æ®ä¼ å›åˆ°ä¸»çº¿ç¨‹\n            [(NSObject *)self.delegate performSelectorOnMainThread:@selector(downloadFinishWithImage:) withObject:image waitUntilDone:NO];\n        }\n    }\n}\n```\n\n* åœ¨ç¬¬4è¡Œmainæ–¹æ³•çš„å¼€å¤´å°±å…ˆåˆ¤æ–­operationæœ‰æ²¡æœ‰è¢«å–æ¶ˆã€‚å¦‚æœè¢«å–æ¶ˆäº†ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦å¾€ä¸‹æ‰§è¡Œäº†\n* ç»è¿‡ç¬¬8è¡Œä¸‹è½½å›¾ç‰‡åï¼Œåœ¨ç¬¬10è¡Œä¹Ÿéœ€è¦åˆ¤æ–­æ“ä½œæœ‰æ²¡æœ‰è¢«å–æ¶ˆ\n* æ€»ä¹‹ï¼Œæ‰§è¡Œäº†ä¸€æ®µæ¯”è¾ƒè€—æ—¶çš„æ“ä½œä¹‹åï¼Œéƒ½éœ€è¦åˆ¤æ–­æ“ä½œæœ‰æ²¡æœ‰è¢«å–æ¶ˆ\n* å›¾ç‰‡ä¸‹è½½å®Œæ¯•åï¼Œåœ¨ç¬¬26è¡Œå°†å›¾ç‰‡æ•°æ®ä¼ é€’ç»™äº†ä»£ç†(delegate)å¯¹è±¡\n\n## å‚è€ƒèµ„æ–™\n\n* NSHipster çš„[NSOperation](http://nshipster.com/nsoperation/)\n* é›·çº¯é”‹çš„åšå®¢çš„[ã€ŠiOS å¹¶å‘ç¼–ç¨‹ä¹‹ Operation Queuesã€‹](http://www.leichunfeng.com/blog/2015/07/29/ios-concurrency-programming-operation-queues/)\n* objcçš„å¹¶å‘ç¼–ç¨‹æŒ‡å—[ã€ŠConcurrent Programmingã€‹](http://www.objc.io/issue-2/)\n* [StackOverflow: NSOperation vs. Grand Central Dispatch](http://stackoverflow.com/questions/10373331/nsoperation-vs-grand-central-dispatch)\n* [Blog: When to use NSOperation vs. GCD](http://eschatologist.net/blog/?p=232)\n\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç½‘ç»œ","å¤šçº¿ç¨‹"],"categories":["iOS"]},{"title":"iOSä¸­çš„è§¦æ‘¸äº‹ä»¶å’Œæ‰‹åŠ¿å¤„ç†","url":"/2016/01/13/2016-01-13-ioszhong-de-hong-mo-shi-jian-he-shou-shi-chu-li/","content":"\n### iOSè§¦æ‘¸äº‹ä»¶åˆ†ç±»\n* è§¦æ‘¸äº‹ä»¶\n* åŠ é€Ÿäº‹ä»¶\n* è¿œç¨‹äº‹ä»¶\n\n### è°èƒ½å¤„ç†è§¦æ‘¸äº‹ä»¶?\n**å“åº”è€…å¯¹è±¡**\n\nåœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶,åªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æ¥æ”¶å¹¶å¤„ç†äº‹ä»¶.æˆ‘ä»¬ç§°ä¹‹ä¸º**å“åº”è€…å¯¹è±¡**.\n\n`UIApplication`,`UIViewController`,`UIView`éƒ½ç»§æ‰¿è‡ª`UIResponder`,å› æ­¤å®ƒä»¬éƒ½æ˜¯å“åº”è€…å¯¹è±¡,éƒ½èƒ½å¤Ÿæ¥æ”¶å¹¶å¤„ç†äº‹ä»¶.\n\n### UIResponder\nUIResponderå†…éƒ¨æä¾›äº†æ–¹æ³•æ¥å¤„ç†äº‹ä»¶\n\n1. è§¦æ‘¸äº‹ä»¶\n\n\tä¸€æ¬¡å®Œæˆçš„è§¦æ‘¸è¿‡ç¨‹,ä¼šç»å†3ä¸ªçŠ¶æ€;\n\tUIViewçš„è§¦æ‘¸äº‹ä»¶å¤„ç†\n\n\t1.ä¸€æ ¹æˆ–å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸view,ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•:\n\t\t- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;  //è§¦æ‘¸å¼€å§‹\n\t2.ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰\n\t\t- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;  //è§¦æ‘¸ç§»åŠ¨\n\t3.ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•\n\t\t- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;  //è§¦æ‘¸ç»“æŸ\n\t4.è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶ï¼ˆä¾‹å¦‚ç”µè¯å‘¼å…¥\tï¼‰ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewä¸‹é¢çš„æ–¹æ³•\n\t\t- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; //è§¦æ‘¸å–æ¶ˆ(å¯èƒ½ä¼šç»å†)\n\n\t4ä¸ªè§¦æ‘¸äº‹ä»¶çš„å¤„ç†æ–¹æ³•ä¸­ï¼Œéƒ½æœ‰ NSSet *touches å’Œ UIEvent *event ä¸¤ä¸ªå‚æ•°:\n\t* ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ4ä¸ªè§¦æ‘¸æ–¹æ³•éƒ½æ˜¯åŒä¸€ä¸ªeventå‚æ•°\n\t* å¦‚æœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡ touchesBegan:withEvent: æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€ä¸¤ä¸ªUITouchå¯¹è±¡ï¼›\n\t* å¦‚æœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€ååˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨ä¸¤æ¬¡ touchesBegan:withEvent:æ–¹æ³•ï¼Œ å¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ï¼›\n\t* æ ¹æ®touchesä¸­UITouchä¸ªæ•°å¯ä»¥åˆ¤æ–­å‡ºä½¿å•ç‚¹è§¦æ‘¸è¿˜æ˜¯å¤šç‚¹è§¦æ‘¸\n\n\tæç¤ºï¼štouchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ã€‚\n\n\n2. åŠ é€Ÿè®¡äº‹ä»¶\n\t\n\t- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event;\t\n\t- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event;\t\n\t- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event;\n\n3. è¿œç¨‹æ§åˆ¶äº‹ä»¶\n\n\t\t- (void)remoteControlReceivedWithEvent:(UIEvent *)event;\n\n### UITouch\nå½“ç”¨æˆ·ç”¨ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸æ‰‹æŒ‡ç›¸å…³è”çš„UITouchå¯¹è±¡ï¼›ä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡\nUITouchçš„ä½œç”¨:\n\n* ä¿å­˜è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µï¼›\n* å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡çš„è§¦æ‘¸ä½ç½®ï¼›\n* å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„UITouchå¯¹è±¡ã€‚\n\næç¤ºï¼šiPhoneå¼€å‘ä¸­ï¼Œè¦é¿å…ä½¿ç”¨åŒå‡»äº‹ä»¶ã€‚\n\nUITouchçš„å±æ€§:\nè§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£:\n\n```objc\n@property(nonatomic,readonly,retain) UIWindow *window;\n```\n\nè§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾\n\n```objc\n@property(nonatomic,readonly,retain) UIView *view;\n```\n\nçŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šåœ°ç‚¹å‡»\n\n```objc\n@property(nonatomic,readonly) NSUInteger tapCount;\n```\n\nè®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’\n\n```objc\n@property(nonatomic,readonly) NSTimeInterval timestamp;\n```\n\nå½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€\n\n```objc\n@property(nonatomic,readonly) UITouchPhase phase;\n/*\nUITouchPhaseæ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼ŒåŒ…å«ï¼š\nUITouchPhaseBeganï¼ˆè§¦æ‘¸å¼€å§‹ï¼‰\nUITouchPhaseMovedï¼ˆæ¥è§¦ç‚¹ç§»åŠ¨ï¼‰\nUITouchPhaseStationaryï¼ˆæ¥è§¦ç‚¹æ— ç§»åŠ¨ï¼‰\nUITouchPhaseEndedï¼ˆè§¦æ‘¸ç»“æŸï¼‰\nUITouchPhaseCancelledï¼ˆè§¦æ‘¸å–æ¶ˆï¼‰*/\n```\n\nUITouchçš„æ–¹æ³•ï¼š\n\n```objc\n- (CGPoint)locationInView:(UIView *)view;\n```\n\n1.è¿”å›å€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®ï¼›\n\n2.è¿™é‡Œè¿”å›çš„ä½ç½®æ˜¯é’ˆå¯¹viewåæ ‡ç³»çš„,ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼ˆ0ï¼Œ0ï¼‰ï¼‰ï¼›\n\n3.è°ƒç”¨æ—¶ä¼ å…¥çš„viewå‚æ•°ä¸ºnil çš„è¯ï¼Œè¿”å›çš„æ˜¯è§¦æ‘¸ç‚¹åœ¨UIWindowçš„ä½ç½®ã€‚\n\n```objc\n- (CGPoint)previousLocationInView:(UIView *)view;\n```\n\nè¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®ï¼›\n\n### UIEvent\n> æ¯äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªUIEventå¯¹è±¡ï¼›\n>\n> UIEvent:ç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»å‹ã€‚\n\nå¸¸è§å±æ€§ï¼š\n1.äº‹ä»¶ç±»å‹\n\n```objc\n@property(nonatomic,readonly) UIEventType  type;\n@property(nonatomic,readonly) UIEventSubtype  subtype;\n\ntypedef\nNS_ENUM(NSInteger, UIEventType) {\n    UIEventTypeTouches,\n    UIEventTypeMotion,\n    UIEventTypeRemoteControl,\n};\ntypedef\nNS_ENUM(NSInteger, UIEventSubtype) {\n    // available in iPhone OS 3.0\n    UIEventSubtypeNone                              = 0,    \n    // for UIEventTypeMotion, available in iPhone OS 3.0\n    UIEventSubtypeMotionShake                       = 1,\n    // for UIEventTypeRemoteControl, available in iOS 4.0\n    UIEventSubtypeRemoteControlPlay                 = 100,\n    UIEventSubtypeRemoteControlPause                = 101,\n    UIEventSubtypeRemoteControlStop                 = 102,\n    UIEventSubtypeRemoteControlTogglePlayPause      = 103,\n    UIEventSubtypeRemoteControlNextTrack            = 104,  \n    UIEventSubtypeRemoteControlPreviousTrack        = 105,\n    UIEventSubtypeRemoteControlBeginSeekingBackward = 106,   \n    UIEventSubtypeRemoteControlEndSeekingBackward   = 107,  \n    UIEventSubtypeRemoteControlBeginSeekingForward  = 108,  \n    UIEventSubtypeRemoteControlEndSeekingForward    = 109,\n};\n```\n\n2.äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´\n\n```objc\n@property(nonatomic,readonly) NSTimeInterval  timestamp;\n```\n\n UIEventè¿˜æä¾›äº†ç›¸åº”çš„æ–¹æ³•å¯ä»¥è·å¾—åœ¨æŸä¸ªviewä¸Šé¢çš„è§¦æ‘¸å¯¹è±¡ï¼ˆUITouchï¼‰ã€‚\n\n è§¦æ‘¸äº‹ä»¶çš„äº§ç”Ÿï¼š\n\n 1. å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼›\n\n 2. UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ï¼›\n\n 3. ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ§ä»¶æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼›\n\n 4. æ‰¾åˆ°åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æ§ä»¶çš„touchesæ–¹æ³•æ¥åšå…·ä½“çš„äº‹ä»¶å¤„ç†ã€‚\n\nè§¦æ‘¸äº‹ä»¶çš„ä¼ é€’ï¼š\n\n> è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»çˆ¶æ§ä»¶ä¼ é€’åˆ°å­æ§ä»¶ï¼›\n>\n> å¦‚æœçˆ¶æ§ä»¶ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æ§ä»¶å°±ä¸å¯èƒ½æ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ã€‚\n\n![è§¦æ‘¸äº‹ä»¶](http://ww4.sinaimg.cn/mw690/64124373gw1eznrp087anj205t07rdfx.jpg)\n![è§¦æ‘¸äº‹ä»¶2](http://ww2.sinaimg.cn/mw690/64124373gw1eznrrf36ymj2097077dhc.jpg)\n\nUIViewä¸æ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ:\nä¸æ¥å—ç”¨æˆ·äº¤äº’ ï¼š\n\n1. userInteractionEnable = NO;\n\n2. éšè— ï¼šhidden = YES;\n\n3. é€æ˜ï¼šalpha = 0.0 ~ 0.01\n\næç¤ºï¼šUIImageViewçš„userInteractionEnableé»˜è®¤å°±æ˜¯NOï¼Œå› æ­¤UIImageViewä»¥åŠå®ƒçš„å­æ§ä»¶é»˜è®¤æ˜¯ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ã€‚\n\nè§¦æ‘¸äº‹ä»¶å¤„ç†çš„è¯¦ç»†è¿‡ç¨‹ï¼š\n\n1. ç”¨æˆ·ç‚¹å‡»å±å¹•åäº§ç”Ÿçš„ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œç»è¿‡ä¸€äº›åˆ—çš„ä¼ é€’è¿‡ç¨‹åï¼Œä¼šæ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æ§ä»¶æ¥å¤„ç†è¿™ä¸ªäº‹ä»¶\n\n2. æ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æ§ä»¶åï¼Œå°±ä¼šè°ƒç”¨æ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç†\n\n\ttouchesBeganâ€¦\n\n    touchesMovedâ€¦\n\n    touchedEndedâ€¦\n\nè¿™äº›touchesæ–¹æ³•çš„é»˜è®¤åšæ³•æ˜¯å°†äº‹ä»¶é¡ºç€å“åº”è€…é“¾æ¡å‘ä¸Šä¼ é€’ï¼Œå°†äº‹ä»¶äº¤ç»™ä¸Šä¸€ä¸ªå“åº”è€…è¿›è¡Œå¤„ç†\n\nå“åº”è€…é“¾çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ï¼š\n\n 1. å¦‚æœviewçš„æ§åˆ¶å™¨å­˜åœ¨ï¼Œå°±ä¼ é€’ç»™æ§åˆ¶å™¨ï¼›å¦‚æœæ§åˆ¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶ä¼ é€’ç»™å®ƒçš„çˆ¶è§†å›¾ï¼›\n\n 2. åœ¨è§†å›¾å±‚æ¬¡ç»“æ„æœ€é¡¶çº§çš„è§†å›¾ï¼Œå¦‚æœä¹Ÿä¸èƒ½å¤„ç†æ”¶åˆ°çš„äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™windowå¯¹è±¡è¿›è¡Œå¤„ç†ã€‚\n\n 3. å¦‚æœwindowå¯¹è±¡ä¹Ÿä¸å¤„ç†ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™UIApplicationå¯¹è±¡ï¼›\n\n 4. å¦‚æœUIApplicationä¹Ÿä¸èƒ½å¤„ç†è¯¥äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒ\n\n### ç›‘å¬è§¦æ‘¸äº‹ä»¶çš„åšæ³•\n\nå¦‚æœæƒ³ç›‘å¬ä¸€ä¸ªviewä¸Šé¢çš„è§¦æ‘¸äº‹ä»¶ï¼Œä¹‹å‰çš„åšæ³•æ˜¯ï¼š\n\n1. è‡ªå®šä¹‰ä¸€ä¸ªviewï¼›\n\n2. å®ç°viewçš„touchesæ–¹æ³•ï¼Œåœ¨æ–¹æ³•å†…éƒ¨å®ç°å…·ä½“å¤„ç†ä»£ç ã€‚\n\n\té€šè¿‡touchesæ–¹æ³•ç›‘å¬viewè§¦æ‘¸äº‹ä»¶ï¼Œæœ‰å¾ˆæ˜æ˜¾çš„å‡ ä¸ªç¼ºç‚¹ï¼š\n\n\t* å¿…é¡»å¾—è‡ªå®šä¹‰viewï¼›\n\n    * ç”±äºæ˜¯åœ¨viewå†…éƒ¨çš„touchesæ–¹æ³•ä¸­ç›‘å¬è§¦æ‘¸äº‹ä»¶ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— æ³•è®©å…¶ä»–å¤–ç•Œå¯¹è±¡ç›‘å¬viewçš„è§¦æ‘¸äº‹ä»¶ï¼›\n\n    * ä¸å®¹æ˜“åŒºåˆ†ç”¨æˆ·çš„å…·ä½“æ‰‹åŠ¿è¡Œä¸ºã€‚\n\niOS 3.2ä¹‹åï¼Œè‹¹æœæ¨å‡ºäº†æ‰‹åŠ¿è¯†åˆ«åŠŸèƒ½ï¼ˆGesture Recognizerï¼‰,åœ¨è§¦æ‘¸äº‹ä»¶å¤„ç†æ–¹é¢ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘è€…çš„å¼€å‘éš¾åº¦ã€‚\n\n### UIGestureRescognizer\n\nä¸ºäº†å®Œæˆæ‰‹åŠ¿è¯†åˆ«ï¼Œå¿…é¡»å€ŸåŠ©äºæ‰‹åŠ¿è¯†åˆ«å™¨ï¼šUIGestureRecognizer ã€‚\n\nåˆ©ç”¨UIGestureRecognizer,èƒ½è½»æ¾è¯†åˆ«ç”¨æˆ·åœ¨æŸä¸ªviewä¸Šé¢åšçš„ä¸€äº›å¸¸è§æ‰‹åŠ¿ã€‚\n\nUIGestureRecognizeræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰çš„æ‰‹åŠ¿åŸºæœ¬è¡Œä¸ºï¼Œä½¿ç”¨å®ƒçš„å­ç±»æ‰èƒ½å¤„ç†å…·ä½“çš„æ‰‹åŠ¿\n\n* UITapGestureRecognizer(æ•²å‡»)\n* UIPinchGestureRecognizer(æåˆï¼Œç”¨äºç¼©æ”¾)\n* UIPanGestureRecognizer(æ‹–æ‹½)\n* UISwipeGestureRecognizer(è½»æ‰«)\n* UIRotationGestureRecognizer(æ—‹è½¬)\n* UILongPressGestureRecognizer(é•¿æŒ‰)\n\næ¯ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨çš„ç”¨æ³•éƒ½å·®ä¸å¤šï¼Œæ¯”å¦‚UITapGestureRecognizerçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹:\n\n1. åˆ›å»ºæ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡ï¼›\n\n    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] init];\n\n2. è®¾ç½®æ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡çš„å…·ä½“å±æ€§ï¼›\n\n\t\t// è¿ç»­æ•²å‡»2æ¬¡\n\t\ttap.numberOfTapsRequired = 2;\n\t\t// éœ€è¦2æ ¹æ‰‹æŒ‡ä¸€èµ·æ•²å‡»\n\t\ttap.numberOfTouchesRequired = 2;\n\n3. æ·»åŠ æ‰‹åŠ¿è¯†åˆ«å™¨åˆ°å¯¹åº”çš„viewä¸Š\n\n\t[self.iconView addGestureRecognizer:tap];\n\n4. ç›‘å¬æ‰‹åŠ¿çš„è§¦å‘\n\n\t[tap addTarget:self action:@selector(tapIconView:)];\n\næ‰‹åŠ¿è¯†åˆ«çš„çŠ¶æ€\n\n```objc\ntypedef NS_ENUM(NSInteger, UIGestureRecognizerState) {\n    // æ²¡æœ‰è§¦æ‘¸äº‹ä»¶å‘ç”Ÿï¼Œæ‰€æœ‰æ‰‹åŠ¿è¯†åˆ«çš„é»˜è®¤çŠ¶æ€\n    UIGestureRecognizerStatePossible,\n    // ä¸€ä¸ªæ‰‹åŠ¿å·²ç»å¼€å§‹ä½†å°šæœªæ”¹å˜æˆ–è€…å®Œæˆæ—¶\n    UIGestureRecognizerStateBegan,\n    // æ‰‹åŠ¿çŠ¶æ€æ”¹å˜\n    UIGestureRecognizerStateChanged,\n    // æ‰‹åŠ¿å®Œæˆ\n    UIGestureRecognizerStateEnded,\n    // æ‰‹åŠ¿å–æ¶ˆï¼Œæ¢å¤è‡³PossibleçŠ¶æ€\n    UIGestureRecognizerStateCancelled,\n    // æ‰‹åŠ¿å¤±è´¥ï¼Œæ¢å¤è‡³PossibleçŠ¶æ€\n    UIGestureRecognizerStateFailed,\n    // è¯†åˆ«åˆ°æ‰‹åŠ¿è¯†åˆ«\n    UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded\n};\n```\n\nå‚è€ƒèµ„æ–™ï¼š[å‚²é£å‡Œå¯’çš„åšå®¢](http://my.oschina.net/aofe/blog/268749)\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["äº‹ä»¶å¤„ç†"],"categories":["iOS"]},{"title":"iOSé‡Œç¨‹ç¢‘äº‹ä»¶","url":"/2016/01/13/2016-01-13-iosli-cheng-bei-shi-jian/","content":"\n> è®°å½•iOSå„ç§é‡è¦é‡Œç¨‹ç¢‘äº‹ä»¶\n\n\n### ç§æœ‰æˆå‘˜å˜é‡çš„å®ç°\n1.0æ—¶ä»£ï¼Œåœ¨.hæ–‡ä»¶é‡‡ç”¨`@private`å…³é”®è¯\n\n```objc\n@interface ViewController : UIViewController {\n    @private\n    NSInteger _value;\n}\n```\n\n2.0æ—¶ä»£ é€šè¿‡åœ¨.mæ–‡ä»¶é€šè¿‡`åŒ¿åCategory`\n\n```objc\n@interface ViewController ()\n\n@property (nonatomic) NSInteger value;\n\n@end\n```\n\n3.0æ—¶ä»£ 2013 å¹´çš„ WWDC å…è®¸åœ¨ .m çš„ `@implementation `ä¸­\n\n```objc\n@implementation ViewController {\n    NSInteger _value;\n}\n```\n\n\n### ARCæ¨å‡º\n2011\n\n### è‡ªåŠ¨ç”Ÿæˆgetterå’Œsetteræ–¹æ³•çš„`@synthesize`\n2012\n\n### AutoLayoutå¼•å…¥\niOS 6.0\n\n### Swift\n\n* [WWDC](http://baike.baidu.com/view/404495.htm) 1.0 ç‰ˆæœ¬å‘å¸ƒ -- 2014.06.02 \n* Swift 2.0å‘å¸ƒ   -- 2015.08.07\n* Open Source -- 2015.12.04  \n\n### Size Classes\niOS 8.0\n\n### Blocks\n[Mac OS X 10.6 \"Snow Leopard\"](https://en.wikipedia.org/wiki/Mac_OS_X_Snow_Leopard) and [iOS 4.0](https://en.wikipedia.org/wiki/IOS)\n\n### Objective-C 2.0\nAt the [2006 Worldwide Developers Conference](https://en.wikipedia.org/wiki/Apple_Worldwide_Developers_Conference) release of [Objective-C 2.0](https://en.wikipedia.org/wiki/Objective-C#Objective-C_2.0)\n\n### Watch OS\n2015.05.21\n\n### iOS API Differences\n\n#### iOS 2.1 to iOS 2.2 API Differences\n\nAdded frameworks:\n\n* AVFoundation\n\n#### iOS 2.2 to iOS 3.0 API Differences\n\nAdded frameworks:\n\n* CoreData\n* ExternalAccessory\n* GameKit\n* MapKit\n* MessageUI\n* MobileCoreServices\n* StoreKit\n\n#### iOS 3.2 to iOS 4.0 API Differences\n\nAdded frameworks:\n\n* Accelerate\n* AssetsLibrary\n* CoreMedia\n* CoreMotion\n* CoreTelephony\n* CoreVideo\n* EventKit\n* EventKitUI\n* iAd\n* ImageIO\n* QuickLook\n\n#### iOS 4.3 to iOS 5.0 API Differences\nAdded frameworks\n\n* Accounts\n* CoreBluetooth\n* CoreImage\n* GLKit\n* GSS\n* NewsstandKit\n* Twitter\n\n#### 5.1 to iOS 6.0 API Differences\nAdded frameworks\n\n* AdSupport\n* MediaToolbox\n* PassKit\n* Social\n\n#### 6.1 to iOS 7.0 API Differences\nAdded frameworks\n\n* GameController\n* JavaScriptCore\n* MediaAccessibility\n* MultipeerConnectivity\n* SafariServices\n* SpriteKit\n\n#### iOS 7.1 to iOS 8.0 API Differences\nAdded frameworks\n\n* Accelerate\n* Accounts\n* AddressBook\n* AddressBookUI\n* AudioToolbox\n* AudioUnit\n* AVFoundation\n* AVKit (Added)\n* CFNetwork\n* CloudKit (Added)\n* CoreAudio\n* CoreAudioKit (Added)\n* CoreAuthentication (Added)\n* CoreBluetooth\n* CoreData\n* CoreFoundation\n* CoreImage\n* CoreLocation\n* CoreMedia\n* CoreMotion\n* CoreText\n* CoreVideo\n* EventKit\n* EventKitUI\n* ExternalAccessory\n* Foundation\n* GameController\n* GameKit\n* GLKit\n* GSS\n* HealthKit (Added)\n* HomeKit (Added)\n* iAd\n* ImageIO\n* IOKit\n* JavaScriptCore\n* LocalAuthentication (Added)\n* MapKit\n* MediaAccessibility\n* MediaPlayer\n* MessageUI\n* Metal (Added)\n* MobileCoreServices\n* MultipeerConnectivity\n* NetworkExtension (Added)\n* NewsstandKit\n* NotificationCenter (Added)\n* OpenGLES\n* PassKit\n* Photos (Added)\n* PhotosUI (Added)\n* PushKit (Added)\n* QuartzCore\n* QuickLook\n* SceneKit (Added)\n* Security\n* Social\n* SpriteKit\n* StoreKit\n* UIKit\n* VideoToolbox\n* WebKit (Added)\n\n#### iOS 8.3 to iOS 9.0 API Differences\nAdded frameworks\n\n\nObjective-C\n\n* /usr/include\n* Accelerate\n* Accounts\n* AddressBook\n* AddressBookUI\n* AssetsLibrary\n* AudioToolbox\n* AudioUnit\n* AVFoundation\n* AVKit\n* CFNetwork\n* CloudKit\n* Contacts (Added)\n* ContactsUI (Added)\n* CoreAudio\n* CoreAudioKit\n* CoreBluetooth\n* CoreData\n* CoreFoundation\n* CoreGraphics\n* CoreImage\n* CoreLocation\n* CoreMedia\n* CoreMIDI\n* CoreMotion\n* CoreSpotlight (Added)\n* CoreTelephony\n* CoreText\n* CoreVideo\n* EventKit\n* EventKitUI\n* ExternalAccessory\n* Foundation\n* GameController\n* GameKit\n* GameplayKit (Added)\n* GLKit\n* GSS\n* HealthKit\n* HomeKit\n* iAd\n* ImageIO\n* JavaScriptCore\n* LocalAuthentication\n* MapKit\n* MediaPlayer\n* MediaToolbox\n* MessageUI\n* Metal\n* MetalKit (Added)\n* MetalPerformanceShaders (Added)\n* MobileCoreServices\n* ModelIO (Added)\n* MultipeerConnectivity\n* NetworkExtension\n* NewsstandKit\n* OpenAL\n* PassKit\n* Photos\n* PushKit\n* QuartzCore\n* QuickLook\n* ReplayKit (Added)\n* SafariServices\n* SceneKit\n* Security\n* SpriteKit\n* StoreKit\n* SystemConfiguration\n* UIKit\n* VideoToolbox\n* WatchConnectivity (Added)\n* WatchKit\n* WebKit\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["Favorite"],"categories":["iOS"]},{"title":"ä¼˜é›…å¤„ç†UIImageå›¾ç‰‡æ—‹è½¬","url":"/2016/01/13/2016-01-13-you-ya-chu-li-uiimagetu-pian-xuan-zhuan/","content":"\n\n## UIImagæ„é€ æ–¹å¼\nUIImagæ„é€ æ–¹å¼å¤§è‡´æœ‰4ç§æ–¹å¼\n* ä»æœ¬åœ°bundleä¸­åŠ è½½ `imageNamed:`ï¼Œä¼ å…¥ä¸€ä¸ªbundleçš„æ–‡ä»¶åå³å¯\n* ä»æœ¬åœ°ä¸€ä¸ªæ–‡ä»¶è·¯å¾„è¯»å– `imageWithContentsOfFile:`ï¼Œéœ€è¦ä¼ ä¸€ä¸ªæ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„path\n* é€šè¿‡äºŒè¿›åˆ¶æ•°æ®`NSData`æ¥åˆ›å»º`imageWithData:`\n* é€šè¿‡ä¸€ä¸ª`CoreGraphics`çš„`CGImageRef`æ¥åˆ›å»ºï¼Œ`initWithCGImage:`\n* é€šè¿‡ä¸€ä¸ª`CoreImage`çš„`CIImage`æ¥åˆ›å»º`initWithCIImage`\n\né€šè¿‡æŸ¥é˜…Appleå®˜ç½‘æ–‡æ¡£æˆ‘ä»¬å‘ç°æœ‰2ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼Œä»Šå¤©å°±æ¥ä¸€æ¢ç©¶ç«Ÿ\n\n```objc\n+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0);\n+ (UIImage *)imageWithCIImage:(CIImage *)ciImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(6_0);\n\n- (instancetype)initWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0);\n- (instancetype)initWithCIImage:(CIImage *)ciImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(6_0);\n```\n\n2ä¸ªç±»æ–¹æ³•2ä¸ªå®ä¾‹æ–¹æ³•éƒ½æ˜¯ç±»ä¼¼ï¼Œè¿™é‡Œä»¥`CGImageRef`ä¸ºä¾‹\n\n```objc\n+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation NS_AVAILABLE_IOS(4_0);\n```\n\n1. æ–°å»ºçš„Xcodeå·¥ç¨‹é€‰æ‹©single Application\n2. åœ¨storyboardä¸­æ‹–ä¸€ä¸ª`UIImageView`è®¾ç½®å®ƒæ°´å¹³å‚ç›´å±…ä¸­å¯¹é½ï¼Œå®½å¸¦é«˜åº¦éšä¾¿è®¾ä¸€ä¸ªå€¼ä¸è¦å¤ªå¤§å°±è¡Œï¼Œè®¾ç½®`UIImageView`çš„`contentMode`ä¸º`Aspect Fit`æ–¹ä¾¿æŸ¥çœ‹ä»¥å…å˜å½¢\n3. åœ¨`UIImageView`ä¸‹å‘æ”¾ä¸€ä¸ª`UIButton`æ§ä»¶æ–¹ä¾¿åé¢å¥½å¯¹å›¾ç‰‡è¿›è¡Œæ—‹è½¬æ“ä½œ\n4. åœ¨viewControllerä¸­å»ºç«‹ä¸€ä¸ª`UIImageView`å¼•ç”¨,æ‹‰å‡ºä¸€ä¸ªrotateæŒ‰é’®çš„`IBAction`\n\n    ç°åœ¨å¤§æ¦‚ç•Œé¢å¤§æ¦‚è¿™æ ·\n    ![UIImageOrientationæ•ˆæœå›¾](http://ww3.sinaimg.cn/mw690/64124373gw1ezhnagzyhpj20x7105doj.jpg)\n\n5. ä¸‹é¢æˆ‘ä»¬å®ç°\n`- (IBAction)rotateImage:(id)sender {}`è¿™ä¸ªæ–¹æ³•\n\n    > åœ¨è¿™é‡Œæˆ‘ä»¬æƒ³é€šè¿‡ç‚¹å‡»æŒ‰é’®å®ç°å›¾ç‰‡æ—‹è½¬\n    ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æˆ‘ä»¬ä½¿ç”¨Categoryçš„æ–¹å¼å®ç°\n    æ–°å»ºä¸€ä¸ªUIImageçš„åˆ†ç±»å–åå«Rotate\n\n    > è¿™é‡Œéœ€è¦ä¼ ä¸€å¼ è¦å¤„ç†çš„å›¾ç‰‡å’Œä¸€ä¸ªå¾…å¤„ç†æˆçš„å›¾ç‰‡æ–¹å‘\n    >\n    ```objc\n    + (UIImage *)rotateImage:(UIImage *)oldImage\n             orientation:(UIImageOrientation)orientation;\n    ```\n\n```objc\n    + (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation{\n\n    UIImage *newImage = [UIImage imageWithCGImage:oldImage.CGImage scale:1 orientation:orientation];\n\n    NSString *orientationStr = nil;\n    switch (orientation) {\n        case UIImageOrientationUp: {\n            orientationStr = @\"UIImageOrientationUp\";\n            break;\n        }\n        case UIImageOrientationDown: {\n            orientationStr = @\"UIImageOrientationDown\";\n            break;\n        }\n        case UIImageOrientationLeft: {\n            orientationStr = @\"UIImageOrientationLeft\";\n            break;\n        }\n        case UIImageOrientationRight: {\n            orientationStr = @\"UIImageOrientationRight\";\n            break;\n        }\n        case UIImageOrientationUpMirrored: {\n            orientationStr = @\"UIImageOrientationUpMirrored\";\n            break;\n        }\n        case UIImageOrientationDownMirrored: {\n            orientationStr = @\"UIImageOrientationDownMirrored\";\n            break;\n        }\n        case UIImageOrientationLeftMirrored: {\n            orientationStr = @\"UIImageOrientationLeftMirrored\";\n            break;\n        }\n        case UIImageOrientationRightMirrored: {\n            orientationStr = @\"UIImageOrientationRightMirrored\";\n            break;\n        }\n\n    }\n\n    NSLog(@\"current orientation: %@\",orientationStr);\n\n    return newImage;\n}\n```\n\nåœ¨buttonç‚¹å‡»äº‹ä»¶è§¦å‘æ—¶çš„è¿™æ ·ä½¿ç”¨\n\n```objc\n- (IBAction)rotateImage:(id)sender {\n\n    UIImage *oldImage = self.imgView.image;\n\n    UIImage *rotatedImage = [UIImage rotateImage:oldImage orientation:UIImageOrientationLeft];\n\n    self.imgView.image = rotatedImage;\n}\n```\n\nç‚¹å‡»æŒ‰é’®æµ‹è¯•å‘ç°ç¬¬ä¸€æ¬¡æ²¡é—®é¢˜ï¼Œä½†æ˜¯é‡é€¢ç‚¹å‡»æ— æ•ˆ\nåŸæ¥`+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation`æ–¹æ³•æ‰§è¡ŒåŸç†æ˜¯æ‰§è¡Œå‰é€šè¿‡\n`@property(nonatomic,readonly) UIImageOrientation imageOrientation;`æ¥å£å…ˆåˆ¤æ–­å½“å‰å›¾ç‰‡çš„æ–¹å‘æ˜¯å¦ä¸ºå°†è¦æ—‹è½¬çš„æ–¹å‘ï¼Œ\nå¦‚æœæ˜¯å°±ç›´æ¥è¿”å›ä¸åšå¤„ç†ï¼Œå¦‚æœä¸æ˜¯å†ä½œæ—‹è½¬å¤„ç†ï¼Œ\nä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰å®é™…ä¸Šæ—‹è½¬imageçš„æ•°æ®ï¼Œåªæ˜¯ç”¨ä¸€ä¸ªæšä¸¾æ ‡è®°æ—‹è½¬çš„çŠ¶æ€\n\nå¦‚æœæˆ‘ä»¬æƒ³æ¯æ¬¡æ—‹è½¬éœ€è¦ç›´æ¥æ”¹å˜åŸå§‹imageçš„æ•°æ®è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nåœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡`CGBitmapContext`,ä½¿ç”¨`CGContextRotateCTM`æ¥è®¾ç½®æ—‹è½¬ï¼Œ\nå†æŠŠUIImageé€šè¿‡`drawInRect\n`é‡æ–°ç»˜åˆ¶å‡ºæ¥ï¼Œé€šè¿‡`UIGraphicsGetImageFromCurrentImageContext`è·å¾—å¤„ç†åçš„å›¾ç‰‡\nä¸‹é¢æ˜¯å…·ä½“å®ç°\n\n```objc\n- (UIImage *)fixedRotation{\n    if (self.imageOrientation == UIImageOrientationUp) return self;\n    CGAffineTransform transform = CGAffineTransformIdentity;\n\n    switch (self.imageOrientation) {\n        case UIImageOrientationDown:\n        case UIImageOrientationDownMirrored:\n            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height);\n            transform = CGAffineTransformRotate(transform, M_PI);\n            break;\n\n        case UIImageOrientationLeft:\n        case UIImageOrientationLeftMirrored:\n            transform = CGAffineTransformTranslate(transform, self.size.width, 0);\n            transform = CGAffineTransformRotate(transform, M_PI_2);\n            break;\n\n        case UIImageOrientationRight:\n        case UIImageOrientationRightMirrored:\n            transform = CGAffineTransformTranslate(transform, 0, self.size.height);\n            transform = CGAffineTransformRotate(transform, -M_PI_2);\n            break;\n        case UIImageOrientationUp:\n        case UIImageOrientationUpMirrored:\n            break;\n    }\n\n    switch (self.imageOrientation) {\n        case UIImageOrientationUpMirrored:\n        case UIImageOrientationDownMirrored:\n            transform = CGAffineTransformTranslate(transform, self.size.width, 0);\n            transform = CGAffineTransformScale(transform, -1, 1);\n            break;\n\n        case UIImageOrientationLeftMirrored:\n        case UIImageOrientationRightMirrored:\n            transform = CGAffineTransformTranslate(transform, self.size.height, 0);\n            transform = CGAffineTransformScale(transform, -1, 1);\n            break;\n        case UIImageOrientationUp:\n        case UIImageOrientationDown:\n        case UIImageOrientationLeft:\n        case UIImageOrientationRight:\n            break;\n    }\n\n    // Now we draw the underlying CGImage into a new context, applying the transform\n    // calculated above.\n    CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,\n                                             CGImageGetBitsPerComponent(self.CGImage), 0,\n                                             CGImageGetColorSpace(self.CGImage),\n                                             CGImageGetBitmapInfo(self.CGImage));\n    CGContextConcatCTM(ctx, transform);\n    switch (self.imageOrientation) {\n        case UIImageOrientationLeft:\n        case UIImageOrientationLeftMirrored:\n        case UIImageOrientationRight:\n        case UIImageOrientationRightMirrored:\n            // Grr...\n            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);\n            break;\n\n        default:\n            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);\n            break;\n    }\n\n    // And now we just create a new UIImage from the drawing context\n    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);\n    UIImage *img = [UIImage imageWithCGImage:cgimg];\n    CGContextRelease(ctx);\n    CGImageRelease(cgimg);\n    return img;\n\n}\n```\n\nç°åœ¨å†ä¼˜åŒ–ä¸€ä¸‹åŸæ¥`+ (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation` æ–¹æ³•,ä¿®æ”¹æˆè¿™æ ·\n\n```objc\n+ (UIImage *)rotateImage:(UIImage *)oldImage orientation:(UIImageOrientation)orientation{\n\n    UIImage *newImage = [UIImage imageWithCGImage:oldImage.CGImage scale:1 orientation:orientation];\n\n    //fix original Image with gived orientation.\n    UIImage *fixedRotationImage = [newImage fixedRotation];\n\n    NSString *orientationStr = nil;\n    switch (orientation) {\n        case UIImageOrientationUp: {\n            orientationStr = @\"UIImageOrientationUp\";\n            break;\n        }\n        case UIImageOrientationDown: {\n            orientationStr = @\"UIImageOrientationDown\";\n            break;\n        }\n        case UIImageOrientationLeft: {\n            orientationStr = @\"UIImageOrientationLeft\";\n            break;\n        }\n        case UIImageOrientationRight: {\n            orientationStr = @\"UIImageOrientationRight\";\n            break;\n        }\n        case UIImageOrientationUpMirrored: {\n            orientationStr = @\"UIImageOrientationUpMirrored\";\n            break;\n        }\n        case UIImageOrientationDownMirrored: {\n            orientationStr = @\"UIImageOrientationDownMirrored\";\n            break;\n        }\n        case UIImageOrientationLeftMirrored: {\n            orientationStr = @\"UIImageOrientationLeftMirrored\";\n            break;\n        }\n        case UIImageOrientationRightMirrored: {\n            orientationStr = @\"UIImageOrientationRightMirrored\";\n            break;\n        }\n\n    }\n\n    NSLog(@\"current orientation: %@\",orientationStr);\n\n    return fixedRotationImage;\n}\n```\n\n ç°åœ¨å†æµ‹è¯•ä¸€ä¸‹ï¼Œwellï¼ŒItâ€˜s OKã€‚\n\n have fun!!!\n\n## å‚è€ƒèµ„æ–™\n\n*  [UIImageOrientation / EXIF orientation sample images](http://www.galloway.me.uk/2012/01/uiimageorientation-exif-orientation-sample-images/)\n*  [Apple-UIImage Class Reference](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/#//apple_ref/c/tdef/UIImageOrientation)\n*  [ios-uiimageview-how-to-handle-uiimage-image-orientation](http://stackoverflow.com/questions/8915630/ios-uiimageview-how-to-handle-uiimage-image-orientation)\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["æŠ€å·§"],"categories":["iOS"]},{"title":"ç”¨CAShapeLayeråŠ¨ç”»ç»˜åˆ¶CGPath","url":"/2016/01/13/2016-01-13-dong-hua-hui-zhi-cashapelayerde-lu-jing-cgpath/","content":"\n* [åŸæ–‡é“¾æ¥](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer/)\n\n\n#### è¿™æ˜¯ä»€ä¹ˆï¼Ÿ\n> æ­¤æ–‡å°†è®²è§£é€šè¿‡å½¢çŠ¶å›¾å±‚`CAShaperLayer`çš„`strokeStart`å’Œ`strokeEnd`æ¥å®ç°åŠ¨ç”»ç»˜åˆ¶è·¯å¾„`CGPath`,æ­¤æ–‡æ˜¯[By Ole Begemann](http://oleb.net)åˆ›å»ºäºDecember 18, 2010,å½“æ—¶æ˜¯å‘å¸ƒiOS SDK 4.2æ—¶`CAShapeLayer`æ–°å¢åŠ çš„ä¸¤ä¸ªå±æ€§[strokeStart](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008314-CH1-SW16)å’Œ[strokeEnd](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008314-CH1-SW15),è¿™ä¸¤ä¸ªå€¼æ˜¯ä¸¤ä¸ªæµ®ç‚¹æ•°å–å€¼èŒƒå›´0.0~1.0,ç”¨æ¥è¡¨æ˜å½¢çŠ¶å›¾å±‚æ‰€æŒ‡å‘çš„è·¯å¾„åœ¨ç»˜åˆ¶å¼€å§‹å’Œç»“æŸè·¯å¾„ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚\n\n`strokeStart`é»˜è®¤å€¼æ˜¯0.0ï¼Œ`strokeEnd`é»˜è®¤å€¼æ˜¯1.0ï¼Œæ˜¾ç„¶è¿™ä¼šå¯¼è‡´å½¢çŠ¶å›¾å±‚çš„è·¯å¾„å°†ä¸€æ•´ä¸ªè¢«ç»˜åˆ¶ã€‚å‡å¦‚ï¼Œä½ æƒ³è¯´ï¼Œå¦‚æœè®¾ç½®äº†layer.strokeEnd = 0.5f,åªè®©å¥¹ç»˜åˆ¶å‰åŠéƒ¨åˆ†ï¼Œé‚£è¯¥å¤šå¥½ã€‚\n\nçœŸæ­£æœ‰è¶£çš„äº‹æƒ…æ˜¯è¿™äº›æ¥å£éƒ½æ˜¯å¯åŠ¨ç”»çš„ã€‚é€šè¿‡åŠ¨ç”»ç»˜åˆ¶`strokeEnd`ä»0.0åˆ°1.0åœ¨å‡ ç§’å†…ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå®¹æ˜“è‡ªå·±ç»˜åˆ¶è·¯å¾„åƒä¸‹é¢è¿™æ ·å†™ï¼š\n\n```objc\nCABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@\"strokeEnd\"];\npathAnimation.duration = 10.0;\npathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];\npathAnimation.toValue = [NSNumber numberWithFloat:1.0f];\n[self.pathLayer addAnimation:pathAnimation forKey:@\"strokeEndAnimation\"];\n```\n\næœ€åï¼Œå†æ·»åŠ ç¬¬äºŒä¸ªå›¾å±‚åŒ…å«ä¸€ä¸ªé“…ç¬”å›¾ç‰‡ï¼Œä½¿ç”¨å…³é”®å¸§åŠ¨ç”»` CAKeyframeAnimation`æ¥è®©å®ƒéšç€è¿™ä¸ªè·¯å¾„ä»¥ç›¸åŒçš„é€Ÿåº¦ç»˜åˆ¶ï¼Œå°±å¯ä»¥è¾¾åˆ°å®Œç¾çš„é”™è§‰æ•ˆæœï¼š\n\n```objc\nCAKeyframeAnimation *penAnimation = [CAKeyframeAnimation animationWithKeyPath:@\"position\"];\npenAnimation.duration = 10.0;\npenAnimation.path = self.pathLayer.path;\npenAnimation.calculationMode = kCAAnimationPaced;\n[self.penLayer addAnimation:penAnimation forKey:@\"penAnimation\"];\n```\n\n[ç»˜åˆ¶æ™®é€šè·¯å¾„æ•ˆæœè§†é¢‘](http://oleb.net/media/AnimatedPathsHausVomNikolaus.mp4)\n\n[ä¸‹è½½åœ°å€](http://oleb.net/media/AnimatedPathsHausVomNikolaus.mp4)\n\nè¿™ä¸ªå¯¹æ–‡æœ¬ä¸€æ ·æœ‰æ•ˆï¼›æˆ‘ä»¬åªéœ€è¦æŠŠå­—ç¬¦è½¬åŒ–æˆ`CGPath`ã€‚`Core Text`æä¾›äº†é‚£æ ·çš„åŠŸèƒ½çš„å‡½æ•°ï¼Œ[CTFontCreatePathForGlyph( )](http://developer.apple.com/library/ios/documentation/Carbon/Reference/CTFontRef/Reference/reference.html#//apple_ref/c/func/CTFontCreatePathForGlyph)ã€‚ä¸ºäº†ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¸¦å±æ€§çš„å­—ç¬¦ä¸²ç”¨æˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„æ–‡æœ¬ï¼Œå…ˆæŠŠå®ƒä»¬åˆ†å‰²æˆè¡Œåœ¨åˆ†å‰²æˆä¸€ä¸ªä¸ªå­—ç¬¦ã€‚åœ¨æŠŠæ‰€æœ‰çš„å­—ç¬¦è½¬æ¢æˆè·¯å¾„åï¼Œæˆ‘ä»¬ä»¥å­è·¯å¾„æ–¹å¼æŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªå•ä¸ªçš„`CGPath`è·¯å¾„ä¸­ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥æŸ¥çœ‹[Ohmu](http://www.codeproject.com/script/Membership/View.aspx?mid=2887692)å†™çš„[Low-level text rendering](http://www.codeproject.com/KB/iPhone/Glyph.aspx)è¿™ç¯‡æ–‡ç« ã€‚ç»“æœçœ‹ä»¥æ¥éå¸¸çš„ç‚«é…·ï¼š\n\n[ç»˜åˆ¶æ–‡å­—è·¯å¾„æ•ˆæœè§†é¢‘](http://oleb.net/media/AnimatedPathsHelloWorld.mp4)\n\n[ä¸‹è½½åœ°å€](http://oleb.net/media/AnimatedPathsHelloWorld.mp4)\n\nä»Githubä¸Šè·å¾—[iPadç‰ˆçš„æ ·å“å·¥ç¨‹](http://github.com/ole/Animated-Paths)\n\n#### ä½ å°†å­¦åˆ°çš„çŸ¥è¯†ç‚¹\n* ä½¿ç”¨`CAShapeLayer`çš„`strokeStart`å’Œ`strokeEnd`æ¥å®ç°è·¯å¾„åŠ¨ç”»,æ¯”è¾ƒé«˜çº§å¤æ‚çš„æ•ˆæœåƒgoogleçš„ä¸‹æ‹‰åˆ·æ–°è½¬åœˆå°±å¯ä»¥ä»è¿™é‡Œå¼•ç”³å»å®ç°ã€‚\n* `CABasicAnimation`å’Œ`CABasicAnimation`ä½¿ç”¨\n* æ·±å…¥ç†è§£`CAShapeLayer`å’Œ`CALayer`\n* é€šè¿‡æ–‡æœ¬åˆ›å»ºè·¯å¾„ï¼Œæ ¸å¿ƒå‡½æ•°`CTFontCreatePathForGlyph()`\n\n\n#### è¡¥å……è¯´æ˜\n\n```objc\n    CAShapeLayer *pathLayer = [CAShapeLayer layer];\n    pathLayer.frame = self.animationLayer.bounds;\n    pathLayer.bounds = pathRect;\n    pathLayer.geometryFlipped = YES;\n    pathLayer.path = path.CGPath;\n    pathLayer.strokeColor = [[UIColor blackColor] CGColor];\n    pathLayer.fillColor = nil;\n    pathLayer.lineWidth = 10.0f;\n    pathLayer.lineJoin = kCALineJoinBevel;\n\n    [self.animationLayer addSublayer:pathLayer];\n```\n\næœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼ŒCALayeråœ¨iOSç³»ç»Ÿä¸­ç›¸å¯¹åæ ‡ç³»æ˜¯ä»¥å±å¹•å·¦ä¸Š`top-left`ä¸ºåæ ‡åŸç‚¹çš„ï¼Œåœ¨Mac OS Xä¸Šä»¥åä¸‹`bottom-left`ä¸ºåæ ‡åŸç‚¹,ä½†æ˜¯å¯ä»¥é€šè¿‡`CALayer`çš„æ¥å£`geometryFlipped`å‚ç›´ç¿»è½¬åæ ‡ç³»ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯`NO`ï¼Œè®¾ç½®æˆ`YES`å°±å¯ä»¥æŠŠåæ ‡ç³»è½¬æ¢æˆå·¦ä¸‹`bottom-left`äº†ï¼Œè¿™é‡Œä½œè€…ä½¿ç”¨çš„å·¦ä¸‹`bottom-left`çš„åæ ‡ç³»ã€‚\n\n\n```objc\n@property(getter=isGeometryFlipped) BOOL geometryFlipped;\n```\nå…³äºè¿™ä¸ªå±æ€§ä½¿ç”¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„\n\n1. ç¿»è½¬ä¼šåŒæ—¶ä½œç”¨äºå®ƒçš„å­å›¾å±‚\n2. å³ä½¿è¿™ä¸ªå±æ€§è®¾ç½®æˆ`YES`,å›¾ç‰‡çš„`orientation`ä»ç„¶æ˜¯ä¸å˜çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´å½“è®¾ç½®`flipped=YES`å’Œ`flipped=NO`æ—¶ä¸€ä¸ª`CGImageRef`å‚¨å­˜åœ¨`contents`æ¥å£ä¸­çš„å†…å®¹å°†ä¼šæ˜¾ç¤ºä¸€è‡´ï¼Œèµ‹å€¼å¹¶ä¸ä¼šçœŸæ­£å˜æ¢åº•å±‚çš„å›¾å±‚ï¼‰\n\n#### pathLayeråŠ¨ç”»å®ç°åŸç†\n1. å…ˆåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ç”¨çš„å›¾å±‚`animationLayer`ç±»å‹`CALayer`ï¼Œç”¨æ¥å……å½“åŠ¨ç”»çš„ç”»å¸ƒã€‚\n2. åˆ›å»ºçœŸæ­£çš„è·¯å¾„å›¾å±‚`pathLayer`ç±»å‹ä¸º`CAShapeLayer`,è®©å®ƒçš„åæ ‡ç³»å‚ç›´ç¿»è½¬ï¼Œå¹¶ä¸”è®©å›¾å±‚å®½é«˜åŒæ—¶å‘å†…æ”¶ç¼©100ä¸ªç‚¹,é€šè¿‡`CGRectInset(CGRect rect, CGFloat dx, CGFloat dy)`å®ç°\n3. æŠŠ`pathLayer`æ·»åŠ åˆ°`animationLayer`çš„å­å›¾å±‚ä¸­å»\n4. åˆ›å»ºä¸€ä¸ªé“…ç¬”å›¾å±‚`penLayer`ç±»å‹ä¸º`CALayer`,æŠŠå®ƒæ·»åŠ åˆ°`pathLayer`å»\n5. å¯¹`pathLayer`æ·»åŠ `CABasicAnimation`åŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸º`strokeEnd`\n6. å¯¹`penLayer`æ·»åŠ `CAKeyframeAnimation`åŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸º`position`\n\n#### textLayeråŠ¨ç”»å®ç°åŸç†\n1. å…ˆåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ç”¨çš„å›¾å±‚`animationLayer`ç±»å‹`CALayer`ï¼Œç”¨æ¥å……å½“åŠ¨ç”»çš„ç”»å¸ƒ\n2. Create path from text,See:<http://www.codeproject.com/KB/iPhone/Glyph.aspx>ï¼Œæœ€ç»ˆä¿å­˜åˆ°ä¸€ä¸ªç±»å‹ä¸º`CGMutablePathRef`çš„letterä¸­\n3. é€šè¿‡letteræ¥åˆ›å»ºæ–‡å­—`UIBezierPath`ç±»å‹çš„`path`\n4. é€šè¿‡pathå†åˆ›å»º`CAShapeLayer`pathLayer,å¹¶ä¸”æŠŠpathLayeræ·»åŠ åˆ°`animationLayer`ä¸­å»\n5. åˆ›å»ºä¸€ä¸ªé“…ç¬”å›¾å±‚`penLayer`ç±»å‹ä¸º`CALayer`,æŠŠå®ƒæ·»åŠ åˆ°`pathLayer`å»\n5. å¯¹`pathLayer`æ·»åŠ `CABasicAnimation`åŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸º`strokeEnd`\n6. å¯¹`penLayer`æ·»åŠ `CAKeyframeAnimation`åŠ¨ç”»ï¼ŒåŠ¨ç”»å±æ€§ä¸º`position`\n\n\n\n#### ä¿®å¤ä¸€å¤„bug\né‡å¤ç‚¹å‡»`UISegmentedControl`å¯¼è‡´é“…ç¬”æ¶ˆå¤±ï¼Œè¿™æ˜¯è®¾ç½®äº†` penAnimation.delegate = self;`åœ¨ä»£ç†æ–¹æ³•é‡Œé¢æ²¡æœ‰åˆ¤æ–­ç»“æŸç›´æ¥å°†è®¾ç½®`self.penLayer.hidden = YES`ï¼Œå¯¼è‡´è¿ç»­åˆ‡æ¢æ—¶é“…ç¬”ä¸è§äº†ï¼Œè¦ä¿®å¤è¿™ä¸ªbugåªéœ€åŠ ä¸€ä¸ªåˆ¤æ–­`    if (flag)   self.penLayer.hidden = YES;\n`å³å¯,è¿™æ ·çš„æ„æ€æ˜¯åªæœ‰å½“åŠ¨ç”»å®Œæˆæ—¶æ‰è®¾ç½®`self.penLayer.hidden`çš„å€¼ï¼Œå¥½äº†ç°åœ¨å·²ç»éå¸¸å®Œç¾äº†ï¼Œå¿«å»åŠ¨æ‰‹è‡ªå·±è¯•è¯•å§ï¼ğŸº\n\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["åŠ¨ç”»","CAShapeLayer"],"categories":["Animation"]},{"title":"Blogç½‘ç«™å¤‡å¿˜å½•","url":"/2016/01/13/2016-01-13-blogwang-zhan-bei-wang-lu/","content":"\n> ç”¨äºæ”¶è—ä¸é”™çš„ä¸ªäººæˆ–è€…å…¬å¸Blogåœ°å€\n\n\n## å¹½å¹½ä¼ é€é—¨\n* [æˆ‘å¸¸å¸¸æµè§ˆçš„åšå®¢å’Œç½‘ç«™\n](http://www.jianshu.com/p/e5353a1a752c) --[å¶å­¤åŸ__](http://www.jianshu.com/users/b82d2721ba07)\n* [11ä¸ªè¶…æ£’çš„iOSå¼€å‘å­¦ä¹ ç½‘ç«™](http://www.cocoachina.com/ios/20150626/11348.html)\n* [iOSå¼€å‘å¦‚ä½•æé«˜](http://blog.devtang.com/blog/2014/07/27/ios-levelup-tips/)\n* [ä¸­æ–‡ iOS/Mac å¼€å‘åšå®¢åˆ—è¡¨](https://github.com/tangqiaoboy/iOSBlogCN-)--å”å·§ç²¾å¿ƒæ•´ç†äº†å›½å†…40å¤šä½iOSå¼€å‘åšä¸»çš„åšå®¢åœ°å€åˆ—è¡¨\n\n\n\n## ç®€ä¹¦\n* [å¶å­¤åŸ___](http://www.jianshu.com/users/b82d2721ba07/latest_articles)\n* [MarkNote](http://www.jianshu.com/users/39eeabac725a/latest_articles)\n* [lp_é©¬å»ºæˆ](http://www.jianshu.com/users/384f80cdc57b/latest_articles)\n* [seedante\n](http://www.jianshu.com/users/7ba5d9065301/latest_articles)\n* [å¤§ç°ç°iOS](http://www.jianshu.com/users/960f3b94323a/latest_articles)\n* [StrongX](http://www.jianshu.com/users/56475732c6e9/latest_articles)\n\n\n\n## å›½å†…ä¸ªäºº\n* [çŒ«ç¥onevcat](http://onevcat.com/?from=inf&wvr=5&loc=infblog) -- åœ°çƒäººéƒ½çŸ¥é“\n* [å”å·§](http://blog.devtang.com/)--çŒ¿é¢˜åº“ä½œè€…\n* [è™¾ç¥](http://blog.txx.im/?from=inf&wvr=5&loc=infblog)--è¯è¯´ä½ ä»¬æ™“å¾—è™¾ç¥å¹´çºªå¤šå¤§ä¹ˆï¼Ÿåæ­£æˆ‘æ˜¯è§‰å¾—ç™½æ´»äº†ã€‚90åå¤ªå‰å®³äº†ã€‚\n* [sunnyxx](http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/) -- [FDFullscreenPopGesture](https://github.com/forkingdog/FDFullscreenPopGesture)ä½œè€…ï¼Œå€¼å¾—å…³æ³¨\n* [nixzhu](https://github.com/nixzhu/dev-blog)--æœ‰å‡ ç¯‡ç¿»è¯‘çš„æ–‡ç« è´¨é‡ä¸é”™\n* [ç ´èˆ¹ä¹‹å®¶](http://beyondvincent.com)--è¿™è®©æˆ‘æƒ³èµ·ï¼Œå–ä¸Šä¸€æ¯æœ—å§†é…’ğŸº\n* [Limboy](http://limboy.me) -- è˜‘è‡è¡—ä¸€ä½èµ„æ·±iOSç¨‹åºå‘˜\n* [MacTalk-æ± å»ºå¼ºçš„éšæƒ³å½•](http://macshuo.com/?page_id=93)--Macå¼€å‘å¤§ç‰›\n* [é›¨æ¾MOMO](http://www.xuanyusong.com)--ä¸“æ³¨ç§»åŠ¨äº’è”ç½‘ï¼Œä¸“æ³¨Unity3Dæ¸¸æˆå¼€å‘,å›½å†…æœ€æ—©å¼€å‘Unity3dçš„å¤§ç¥ä¹‹ä¸€\n* [ç‰ä»¤å¤©ä¸‹çš„åšå®¢](http://yulingtianxia.com) -- å…³äºruntimeçš„èµ„æ–™æ•´ç†å¾—éå¸¸ä¸é”™\n* [Chun Tips](http://chun.tips) -- å¯¹Runtime,RunLoop,AutoLayoutè®²è§£å¾—éå¸¸è¯¦ç»† â¤ï¸\n* [é¹å¨ã®åšå®¢](http://blog.treney.com) -- éå¸¸ç‚«é…·çš„åšå®¢ï¼Œå€¼å¾—å­¦ä¹ \n* [mgenware](https://www.mgenware.com/blog/) -- å¾€å…¨æ ˆæ–¹å‘å‘å±•ing\n\n## å›½å¤–ä¸ªäºº\n* [mikeash](https://www.mikeash.com)--ç™½å¤©é£è¡Œå‘˜ï¼Œæ™šä¸Šç¨‹åºå‘˜ ï¼š] just this guy, you know?\n* [shinobicontrols](https://www.shinobicontrols.com/blog)--iOS æœ€æ–° API ä»¥åŠæ–°åŠŸèƒ½ç”¨æ³•\n* [iosdevelopertips](http://iosdevelopertips.com/user-interface/custom-visual-calendar-control-for-ios.html)--æ•™ç¨‹é…åˆDemoè®©ä½ å­¦ä¹ æˆé•¿ç«‹ç«¿è§å½±\n* [iosdevweekly](http://iosdevweekly.com)--å¾ˆæ£’çš„ä¸ªäººæŠ€æœ¯åšå®¢ç½‘ï¼Œå·²å‘è¡¨230ç¯‡æ–‡ç« \n* [ios-goodies](http://ios-goodies.com)--iOS,UI,UX,Objective-c,Swift,Xcode\n* [mattt-thompson](http://nshipster.cn/authors/mattt-thompson/) -- ä¸ç”¨è§£é‡Š\n* [subjc](http://subjc.com) --Subjective-C is a study of innovative iOS interfaces.\n* [thinkandbuild](http://www.thinkandbuild.it)--ã€ŠIntroduction To 3D Drawing in CoreAnimtionã€‹ä½œè€…\n* [robb.is](http://robb.is/)--ã€ŠHow to build a nice Hamburger transition in swiftã€‹ä½œè€…\n* [commandshift](http://commandshift.co.uk)--ä¸å¤šè¯´ï¼Œè´¨é‡æé«˜\n* [indieambitions](http://indieambitions.com/)--raywenderlichå¸¸é©»ä½œè€…ä¹‹ä¸€çš„blogï¼Œéå¸¸èµã€‚\n* [nvie](http://nvie.com)--å›½å¤–ä¸€ä¸ªå¤§ç¥çš„blogï¼Œè®²å¾—æ¯”è¾ƒæ‚ï¼Œgitï¼Œiosï¼Œpythonéƒ½æœ‰æ¶‰çŒï¼Œä½†æ˜¯æ¯ç¯‡éƒ½å¾ˆç²¾å½©ã€‚\n* [stuartkhall](http://stuartkhall.com)--å¾ˆå¤šå…³äºappä¸Šçº¿è¿è¥ä¹‹ç±»çš„blogï¼Œå€¼å¾—ä¸€çœ‹ã€‚\n* [ittybittyapps](http://blog.ittybittyapps.com)--ç¥å™¨Revealçš„ä½œè€…çš„blogã€‚\n* [adoptioncurve](http://adoptioncurve.net/)--æ›´æ–°æå¿«ï¼Œå½“æ—¶iOS8è¿˜æ²¡å‡ºå‡ ä¸ªå‘¨ï¼Œä½œè€…å°±å†™äº†ç¯‡sizeclassè§£æã€‚éå¸¸æ£’\n* [ciechanowski](http://ciechanowski.me)--å„ç§æ•°å­¦ä¸Šå‡ ä½•å˜åŒ–\n* [bignerdranch](https://www.bignerdranch.com/blog/)\n* [cocoawithlove](http://www.cocoawithlove.com)--2008-2011çš„è€æ–‡ç« ï¼Œç°åœ¨æ²¡æ€ä¹ˆè·Ÿæ–°äº†\n* [codinghorror](http://blog.codinghorror.com/) --[Jeff Atwood ](https://twitter.com/codinghorror)ä¸»ç«™\n* [g8production](http://www.g8production.com/)\n* [lucida](http://lucida.me/about/) -- æˆ‘æ¯”è¾ƒä½©æœä¸€åç¨‹åºå‘˜ï¼Œæƒ³å­¦ç®—æ³•æ‰¾ä»–æ¨èå’¯ğŸ˜\n\n## å›¢ä½“blog\n* [ibireme](http://blog.ibireme.com)--æœ€è¿‘å¾ˆğŸ”¥çš„YYKitçš„ä½œè€…\n* [GlowæŠ€æœ¯å›¢é˜Ÿ](http://tech.glowing.com/cn/)\n* [ç¾å›¢ç‚¹è¯„æŠ€æœ¯å›¢é˜Ÿ](http://tech.meituan.com)\n\n\n## ä¼˜è´¨iOSå­¦ä¹ èµ„æº\n* [github](https://github.com)--è¿™ä¸ªä¸ç”¨æˆ‘è¯´å§\n* [stackoverflow](http://stackoverflow.com)--æœ€ä¸“ä¸šçš„é—®ç­”ç¤¾åŒº\n* [raywenderlich]( http://www.raywenderlich.com)--iOSç•Œçš„ç™¾ç§‘å…¨ä¹¦\n* [nshipster](http://nshipster.com)--é‡Œé¢æ–‡ç« è´¨é‡éå¸¸çš„é«˜ï¼Œæœ€å–œæ¬¢çš„å‡ ä¸ªç½‘ç«™ä¹‹ä¸€[AFNetworkting](https://github.com/AFNetworking/AFNetworking)çš„ä½œè€…[Mattt Thompson](http://nshipster.com/authors/mattt-thompson/)--ç»å¸¸å‡ºæ²¡\n* [nshipsterä¸­å›½](http://nshipster.cn)\n* [objc.io](http://www.objc.io)--è¿™ä¸ªä¹Ÿä¸ç”¨å¤šè¯´äº†ï¼ŒRaywenderlichæ˜¯ç™¾ç§‘å…¨ä¹¦çš„è¯ï¼Œè¿™ä¸ªå°±æ˜¯æ·±å…¥æ·±å…¥å†æ·±å…¥\n* [objcä¸­å›½](http://objcio.cn)\n* [realm.io](https://realm.io)--ä¸€ä¸ªè·¨å¹³å°çš„ç§»åŠ¨æ•°æ®åº“å¼•æ“\n* [tutsplus](http://tutsplus.com/)--ä¹Ÿæ˜¯åŒ…ç½—ä¸‡è±¡çš„ä¸€ä¸ªç½‘ç«™ï¼Œæœ‰web ios uiï¼Œä¸æ¯”Raywenderliché€Šè‰²ã€‚\n* [maniacdev](https://maniacdev.com)--ç±»ä¼¼Raywenderlichï¼Œæ–‡ç« è´¨é‡é«˜ï¼Œè€Œä¸”æ¶µç›–é¢å¹¿\n* [Appcoda](https://www.appcoda.com) -- æŠ€æœ¯ç±»å­¦ä¹ ç½‘ç«™ï¼Œé‡Œé¢çš„æŠ€æœ¯æ›´æ–°æŒºåŠæ—¶çš„\n\n## ä¸­æ–‡ç½‘ç«™\n* [cocoachina](http://www.cocoachina.com)\n* [code4app](http://www.code4app.com)\n* [æ³°ç„¶ç½‘](http://www.tairan.com) --æ¸¸æˆæ•™ç¨‹ä¸é”™çš„ç½‘ç«™\n* [ä¼¯ä¹åœ¨çº¿](http://blog.jobbole.com)\n\n## Swiftï¼š\n\n* [ä»‹ç´¹ | ã€ŠThe Swift Programming Languageã€‹ä¸­æ–‡ç‰ˆ](http://wiki.jikexueyuan.com/project/swift/)\n* [Swiftå¿…å¤‡Tips](http://swifter.tips) -- çŒ«ç¥çš„æ°ä½œ\n* [Let's Swift ](http://letsswift.com/swift-site-index/) -- Swiftç«™ç‚¹å¯¼èˆª\n* [Swiftify | Objective-C to Swift Converter ](https://objectivec2swift.com/#/converter/code) -- è¾…åŠ©å°†æ—§çš„* Objective-Cä»£ç è½¬æˆSwiftã€‚\n* [Swift.org](https://swift.org) -- Apple Swift å®˜ç½‘\n* [Swift - Blog](https://developer.apple.com/swift/blog/) -- Apple Swift å®˜æ–¹åšå®¢\n* [CocoaChinaå°ç»„ç¿»è¯‘çš„Swiftç‰ˆæœ¬](https://github.com/CocoaChina-editors/Welcome-to-Swift)\n* [tutorialspoint](http://www.tutorialspoint.com/swift/swift_environment.htm) -- æœ‰ä¸€äº›Swiftæ•™ç¨‹\n\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","categories":["Efficiency"]},{"title":"__autoreleasingçš„ç†è§£","url":"/2016/01/13/2016-01-13-autoreleasingde-li-jie/","content":"\n###  __autoreleasing ä¿®é¥°ç¬¦\n\nå°†å¯¹è±¡èµ‹å€¼ç»™é™„æœ‰__autoreleasing ä¿®é¥°ç¬¦çš„å˜é‡ç­‰åŒäºARC æ— æ•ˆæ—¶è°ƒç”¨å¯¹è±¡çš„autoreleaseæ–¹æ³•ã€‚æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æºä»£ç æ¥çœ‹ä¸€ä¸‹\n\n```objc\n@autoreleasepool {\nid __autoreleasing obj  = [[NSObject alloc] init];\n}\n```\nè¯¥æºä»£ç ä¸»è¦å°†NSObject ç±»å¯¹è±¡æ³¨å†Œåˆ°autoreleasepool ä¸­ï¼Œå¯ä½œå¦‚ä¸‹å˜æ¢ï¼š\n\n```objc\n/* ç¼–è¯‘å™¨çš„æ¨¡æ‹Ÿä»£ç  */\nid pool = objc_autoreleasePoolPush();\nid obj = objc_msgSend(NSObject, @selector(alloc));\nobjc_msgSend(obj, @selector(init));\nobjc_autorelease(obj);\nobjc_autoreleasePoolPop(pool);\n```\n\nè¿™ä¸è‹¹æœçš„autorelease å®ç°ä¸­çš„è¯´æ˜ï¼ˆå‚è€ƒ1.2.7 èŠ‚ï¼‰å®Œå…¨ç›¸åŒã€‚è™½ç„¶ARC æœ‰æ•ˆå’Œæ— æ•ˆæ—¶ï¼Œå…¶åœ¨æºä»£ç ä¸Šçš„è¡¨ç°æœ‰æ‰€ä¸åŒï¼Œä½†autorelease çš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚\n\nåœ¨alloc/new/copy/mutableCopy æ–¹æ³•ç¾¤ä¹‹å¤–çš„æ–¹æ³•ä¸­ä½¿ç”¨æ³¨å†Œåˆ°autoreleasepool ä¸­çš„å¯¹è±¡ä¼šå¦‚ä½•å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹NSMutableArray ç±»çš„array ç±»æ–¹æ³•ã€‚\n\n```objc\n@autoreleasepool {\nid __autoreleasing obj = [NSMutableArray array];\n}\n```\n\nè¿™ä¸å‰é¢çš„æºä»£ç æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ\n\n```objc\n/* ç¼–è¯‘å™¨çš„æ¨¡æ‹Ÿä»£ç  */\nid pool = objc_autoreleasePoolPush();\nid obj = objc_msgSend(NSMutableArray, @selector(array));\nobjc_retainAutoreleasedReturnValue(obj);\nobjc_autorelease(obj);\nobjc_autoreleasePoolPop(pool);\n```\nè™½ç„¶æŒæœ‰å¯¹è±¡çš„æ–¹æ³•ä»alloc æ–¹æ³•å˜ä¸ºobjc_retainAutoreleasedReturnValue å‡½æ•°ï¼Œ ä½†æ³¨å†Œautoreleasepool çš„æ–¹æ³•æ²¡æœ‰æ”¹å˜ï¼Œä»æ˜¯objc_autorelease å‡½æ•°ã€‚\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["å†…å­˜ç®¡ç†"],"categories":["iOS"]},{"title":"__attribute__","url":"/2016/01/13/2016-01-13-attribute/","content":"\n* è¯‘è‡ª Written by [Mattt Thompson](http://nshipster.com/authors/mattt-thompson/) â€” January 14th, 2013\n* åŸæ–‡é“¾æ¥ï¼š<http://nshipster.com/__attribute__/>\n* è¯‘è€…[@oneruofeng](https://twitter.com/oneruofeng)\n\né‡å¤å‘å¸ƒè¿™ä¸ªä¸»é¢˜å·²ç»è¯´æ˜äº†åŒç¼–è¯‘å™¨ä¿å­˜å¥åº·å…³ç³»çš„é‡è¦æ€§,åƒä»»ä½•è‰ç¨¿ä¸€æ ·ï¼Œä½œä¸ºä¸€ä¸ªå®è·µè€…çš„æ•ˆç‡å–å†³äºä»–ä»¬æ€æ ·å¯¹å¾…ä»–ä»¬çš„å·¥å…·ï¼Œä½ ç…§é¡¾å¥½å®ƒä»¬ï¼Œå®ƒä»¬åè¿‡æ¥ä¹Ÿä¼šå¯¹ä½ æœ‰å¥½å¤„ã€‚\n\n `__attribute__`æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨çš„æŒ‡ä»¤åœ¨å£°æ˜çš„æ—¶å€™æŒ‡æ˜äº†ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°å…è®¸æ›´å¤šçš„æ£€æŸ¥é”™è¯¯å’Œé«˜çº§çš„ä¼˜åŒ–ã€‚\n\n è¯­æ³•å…³é”®å­—æ˜¯`__attribute__`ç´§è·Ÿ2å¥—åœ†æ‹¬å·ï¼ˆåŒåœ†æ‹¬å·è®©å‡ºç°çš„å®æ›´å®¹æ˜“è¾¨è®¤ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰å¤šä¸ªå±æ€§çš„æ—¶å€™ï¼‰ã€‚åœ¨æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å±æ€§åˆ—è¡¨ï¼Œ`__attribute__`æŒ‡ä»¤è¢«æ”¾åœ¨å‡½æ•°ï¼Œå˜é‡å’Œç±»å‹å£°æ˜åé¢ã€‚\n\n```objc\n // Return the square of a number\nint square(int n) __attribute__((const));\n\n// Declare the availability of a particular API\nvoid f(void)\n  __attribute__((availability(macosx,introduced=10.4,deprecated=10.6)));\n\n// Send printf-like message to stderr and exit\nextern void die(const char *format, ...)\n  __attribute__((noreturn, format(printf, 1, 2)));\n```\n\nå‡å¦‚è¿™ä¸ªè®©ä½ æƒ³èµ·ISO Cè¯­è¨€çš„ `#pragma`,ä½ å°±ä¸ä¼šæ„Ÿåˆ°å­¤å•äº†ã€‚\n\nå®é™…ä¸Šï¼Œå½“`__attribute__`è¢«ç¬¬ä¸€æ¬¡å¼•å…¥åˆ°`GCC`ç¼–è¯‘å™¨æ—¶ï¼Œå®ƒé¢ä¸´ä¸€äº›é˜»åŠ›ï¼Œæœ‰äººå»ºè®®ä½¿ç”¨ä¸“ç”¨çš„`#pragma`å› ä¸ºç›¸åŒçš„ç›®çš„ã€‚\n\nè¿™é‡Œï¼Œç„¶è€Œï¼Œæœ‰2ä¸ªéå¸¸å¥½çš„ç†ç”±ä¸ºä»€ä¹ˆ`__attribute__`è¢«æ·»åŠ è¿›æ¥\n> * ä»ä¸€ä¸ªå®ä¸­äº§ç”Ÿ`#pragma`å‘½ä»¤å‡ ä¹æ˜¯ä¸èƒ½çš„ï¼ˆåœ¨C99 _Pragma é¢„ç®—ç¬¦ä»¥å‰ï¼‰ã€‚\n> * è¿™é‡Œæ²¡äººçŸ¥é“ç›¸åŒçš„`#pragma`åœ¨å¦ä¸€ä¸ªç¼–è¯‘å™¨ä¸­å¯èƒ½çš„æ„æ€ã€‚\n\n å¼•ç”¨[GCC Documentation for Function Attributes](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)\n\n > * è¿™é‡Œæœ‰2ä¸ªåŸå› è¢«åº”ç”¨åˆ°å‡ ä¹æ‰€æœ‰çš„åº”ç”¨æ¨èä½¿ç”¨`#pragma`,è¿™çŠ¯äº†ä¸€ä¸ªä½çº§é”™è¯¯å°±æ˜¯æŠŠ`#pragma`ä½¿ç”¨åˆ°ä»»ä½•åœ°æ–¹ã€‚\n\n ç¡®å®ï¼Œå‡å¦‚ä½ åœ¨è‹¹æœçš„æ¡†æ¶ä¸­å’Œç‰›é€¼å·¥ç¨‹å¸ˆçš„å¼€æºé¡¹ç›®ä¸­çš„å¤´æ–‡ä»¶çœ‹ä¸€ä¸‹ç°ä»£çš„`Objective-c`--`__attribute__`è¢«å¤§é‡ä½¿ç”¨ã€‚ï¼ˆç›¸åï¼Œ`#pragma`çš„ä¸»è¦å£°æ˜åå£°æ¥ç€è¿™äº›å¤©æ˜¯è£…é¥°:`#pragma mark`ï¼‰\n\n æ‰€ä»¥ä¸ºäº†ä»¥åä¸è´¹åŠ›ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹æœ€é‡è¦çš„å±æ€§ï¼š\n\n------\n\n### GCC\n\n**format**\n> `format`å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°åƒ`printf`,`scanf`,`strftime`æˆ–è€…`strfmo`é£æ ¼çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åº”è¯¥æ˜¯å¯ä»¥è¿›è¡Œç±»å‹æ£€æŸ¥çš„ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚\n\n```objc\nextern int\nmy_printf (void *my_object, const char *my_format, ...)\n  __attribute__((format(printf, 2, 3)));\n```\n\nObjective-Cç¨‹åºå‘˜ä¹Ÿå¯ä½¿ç”¨`__NSString__`æ¥æ ¼å¼åŒ–æ¥åšåˆ°ç›¸åŒçš„æ ¼å¼åŒ–è§„åˆ™ï¼Œåƒåœ¨`NNString`ä¸­é€šè¿‡ ``+stringWithFormat:`` å’Œ `NSLog()`æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸€æ ·ã€‚\n\n**nonnull**\n> è¿™ä¸ª`nonnull`å±æ€§æŒ‡å®šäº†æŸäº›å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯éç©ºçš„æŒ‡é’ˆã€‚\n\n```objc\nextern void *\nmy_memcpy (void *dest, const void *src, size_t len)\n  __attribute__((nonnull (1, 2)));\n```\n\nä½¿ç”¨`nonnull`ç¼–ç æœŸæœ›è¿™ä¸ªå€¼éµå®ˆä¸€ä¸ªæ˜ç¡®çš„çº¦å®šä¸­ï¼Œè¿™æ ·èƒ½å¸®åŠ©æ•è·æ½œä¼åœ¨ä»»ä½•ä»£ç è°ƒç”¨çš„NULLæŒ‡é’ˆbugsï¼Œè¯·è®°ä½ï¼š\n`ç¼–è¯‘æ—¶çš„é”™è¯¯ >>  è¿è¡Œæ—¶çš„é”™è¯¯ã€‚`\n\n**noreturn**\n> ä¸€äº›æ ‡å‡†åº“å‡½æ•°ï¼Œä¾‹å¦‚`abort`å’Œ`exit`,æ˜¯ä¸èƒ½è¿”å›çš„ã€‚GCCè‡ªåŠ¨çŸ¥é“è¿™äº›ä¸œè¥¿ï¼Œè¿™ä¸ªnoreturnå±æ€§ç”¨äºæŒ‡å®šä»»ä½•å…¶ä»–å‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›çš„æƒ…å†µã€‚\n\nä¾‹å¦‚ï¼ŒAFNetworking ä½¿ç”¨`noreturn`å±æ€§åœ¨å®ƒçš„[ç½‘ç»œè¯·æ±‚çº¿ç¨‹è¿›å…¥ç‚¹çš„æ–¹æ³•](https://github.com/AFNetworking/AFNetworking/blob/1.1.0/AFNetworking/AFURLConnectionOperation.m#L157)é‡Œé¢,è¿™ä¸ªæ–¹æ³•ç”¨åœ¨å½“å¤§é‡äº§ç”Ÿä¸“ç”¨çš„ç½‘ç»œçš„çº¿ç¨‹é‡Œç”¨æ¥ä¿è¯åˆ†ç¦»çš„çº¿ç¨‹æŒç»­æ‰§è¡Œåœ¨åº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ã€‚\n\n**pure/const**\n> `pure`å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°é™¤äº†è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å®ƒçš„è¿”å›å€¼ä»…ä»…ä¾èµ–å‚æ•°å’Œ/æˆ–è€…å…¨å±€å˜é‡ã€‚è¿™æ ·çš„å‡½æ•°å¯ä»¥ç”¨å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤å¹¶ä¸”å¾ªç¯ä¼˜åŒ–å°±åƒä¸€ä¸ªç®—æ•°æ“ä½œç¬¦é‚£æ ·ã€‚\n\n> `pure`å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°ä¸ä¼šæ£€æŸ¥ä»»ä½•å€¼é™¤äº†å®ƒä»¬çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼æ²¡æœ‰å‰¯ä½œç”¨ã€‚æ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªæŒ‡é’ˆå‚æ•°å¹¶ä¸”éœ€å‘€æ£€æŸ¥æ•°æ®çš„æŒ‡å‘ä¸èƒ½å£°æ˜æˆ`const`ã€‚åŒæ ·çš„ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸€ä¸ªé`nonst`å‡½æ•°é€šå¸¸ä¸èƒ½ä¸º`const`,ä¸€ä¸ª`const`å‡½æ•°è¿”å›`void`å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚\n\n```objc\nint square(int n) __attribute__((const));\n```\n\n`pure`å’Œ`const`æ˜¯ä¸¤ä¸ªæ‰§è¡Œåœ¨ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹æƒ¯ä¾‹ä¸­çš„å‚æ•°ä¸ºäº†å…è®¸æœ‰æ•ˆæ€§èƒ½ä¼˜åŒ–ã€‚`const`å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸¥æ ¼å½¢å¼çš„`pure`å› ä¸ºå®ƒä¸ä¾èµ–å…¨å±€å˜é‡æˆ–è€…æŒ‡é’ˆã€‚\n\nä¾‹å¦‚ï¼Œå› ä¸ºä¸€ä¸ªå‡½æ•°å£°æ˜ä¸º`const`çš„ç»“æœå¹¶ä¸ä¾èµ–ä»»ä½•ä¸œè¥¿é™¤äº†ä¼ è¿›æ¥çš„å‚æ•°ã€‚å‡½æ•°çš„ç»“æœèƒ½å¤Ÿç¼“å­˜é‚£ä¸ªç»“æœå¹¶ä¸”å½“å‡½æ•°è¢«è°ƒç”¨æ—¶è¿”å›ï¼Œè¿™æ ·çš„å‡½æ•°å«åšç›¸åŒçš„ç»„åˆå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ•°å­—çš„å¹³æ–¹æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»…ä»…éœ€è¦åªè®¡ç®—å®ƒä¸€æ¬¡)ã€‚\n\n**unused**\n> è¿™ä¸ªå±æ€§ï¼Œé™„ç€åœ¨ä¸€ä¸ªå‡½æ•°åé¢ï¼Œæ„å‘³ç€é‚£ä¸ªå‡½æ•°å¾ˆå¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼ŒGCCä¸ä¼šå¯¹è¿™ä¸ªå‡½æ•°äº§ç”Ÿè­¦å‘Šã€‚\n\nç”¨`__unused`å…³é”®è¯å¯ä»¥è·å¾—ç›¸åŒçš„æ•ˆæœï¼Œå£°æ˜è¿™ä¸ªåœ¨æ–¹æ³•å®ç°ä¸­ä¸ä¼šè¢«ä½¿ç”¨çš„å‚æ•°ä¸­ã€‚çŸ¥é“é‚£ä»¥åä¸€äº›ä¸Šä¸‹æ–‡å°±å¯ä»¥å…è®¸ç¼–è¯‘å™¨æ¥åšç›¸åº”çš„ä¼˜åŒ–ã€‚ä½ å¾ˆå¯èƒ½å–œæ¬¢åœ¨delegateæ–¹æ³•å®ç°æå‹‰ä½¿ç”¨`__unused`,å› ä¸ºåè®®é¢‘ç¹çš„æé«˜æ›´å¤šçš„ä¸Šä¸‹æ–‡æ¯”é€šå¸¸å¿…è¦çš„æƒ…å†µï¼Œä¸ºäº†æ»¡è¶³å¤§é‡çš„æ½œåœ¨ä½¿ç”¨æ¡ˆä¾‹ã€‚\n\n### LLVM\n\nåƒGCCçš„å¾ˆå¤šç‰¹å¾ä¸€æ ·ï¼ŒClangä¹Ÿæ”¯æŒ`__attribute__`,æ·»åŠ åˆ°å®ƒè‡ªå·±çš„å°èŒƒå›´çš„æ‰©å±•ã€‚ä¸ºäº†æ£€æŸ¥æŸä¸ªå±æ€§çš„å¯ç”¨æ€§ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨`__has_attribute`å±æ€§ã€‚\n\n**availability**\n> Clangå¼•è¿›äº†availabilityå±æ€§ï¼Œè¿™ä¸ªå¯ä»¥è¢«å–ä»£åœ¨å£°æ˜æè¿°çš„ç”Ÿå‘½å‘¨æœŸä¸­å£°æ˜ç›¸å¯¹äºæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚æ€è€ƒå¯¹ä¸€ä¸ªç®€å•å‡½æ•°fï¼šçš„å‡½æ•°å£°æ˜\n\n```objc\nvoid f(void) __attribute__((availability(macosx,introduced=10.4,deprecated=10.6,obsoleted=10.7)));\n```\n\n> `availability`å±æ€§å£°æ˜fåœ¨OS Xè€è™ç³»ç»Ÿä¸­è¢«å¼•å…¥ï¼Œåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­è¢«å¼ƒç”¨ï¼Œåœ¨OS X å±±ç‹®ç³»ç»Ÿä¸­è¢«åºŸå¼ƒã€‚\n\n> è¿™ä¸ªä¿¡æ¯è¢«Clangç”¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™ä½¿ç”¨fï¼šå‡½æ•°å¼å®‰å…¨çš„ï¼Œä¾‹å¦‚ï¼Œå‡å¦‚Clangåœ¨OS X ç¾æ´²è±¹ç³»ç»Ÿä¸Šç¼–è¯‘ï¼Œè°ƒç”¨f()å‡½æ•°å°†æˆåŠŸã€‚å‡å¦‚Clangåœ¨OS Xé›ªè±¹ç³»ç»Ÿä¸­ç¼–è¯‘ï¼Œå‡½æ•°è°ƒç”¨å°†æˆåŠŸä½†æ˜¯Clangä¼šå‘å‡ºä¸€ä¸ªè­¦å‘ŠæŒ‡æ˜è¿™ä¸ªå‡½æ•°è¢«å¼ƒç”¨äº†ã€‚æœ€åï¼Œå‡å¦‚Clangè¢«å¼•è¿›ç¼–è¯‘OS Xå±±ç‹®ç³»ç»Ÿçš„ä»£ç ï¼Œå‡½æ•°è°ƒç”¨å°†å¤±è´¥ï¼Œå› ä¸ºf()å‡½æ•°å·²ç»ä¸å†å¯ç”¨äº†ã€‚\n\n> `availability`å±æ€§æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨ä»¥å¹³å°åå¼€å§‹ç„¶åå¼•å…¥ä¸€äº›å®šè¯­åˆ—ä¸¾å‡ºç”Ÿå‘½å‘¨æœŸå†…çš„é‡è¦é‡Œç¨‹ç¢‘äº‹ä»¶é™„åŠ é¢å¤–çš„ä¿¡æ¯ï¼ˆä»¥ä»»ä½•é¡ºåºï¼‰ã€‚\n\n* introducedï¼šå£°æ˜è¢«å¼•å…¥çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬\n* deprecatedï¼šå£°æ˜è¢«å¼ƒç”¨çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·åº”è¯¥æŠŠè¿™ä¸ªAPIç§»èµ°\n* obsoletedï¼š å£°æ˜è¢«åºŸå¼ƒçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒå°†è¢«å®Œå…¨ç§»é™¤å¹¶ä¸”ä¸èƒ½å†ä½¿ç”¨\n* unavailableï¼šå£°æ˜åœ¨è¿™ä¸ªå¹³å°ä¸Šå°†æ°¸è¿œä¸å¯ç”¨\n* messageï¼šé¢å¤–çš„æ¶ˆæ¯å°†è¢«Clangæä¾›å½“å¿½ç•¥ä¸€ä¸ªè­¦å‘Šæˆ–è€…ä¸€ä¸ªé”™è¯¯åœ¨ä½¿ç”¨ä¸€ä¸ªè¢«å¼ƒç”¨æˆ–è€…è¢«åºŸå¼ƒçš„å£°æ˜ã€‚å¯¹å¼•å¯¼ç”¨æˆ·æ›¿æ¢APIså¾ˆæœ‰ç”¨ã€‚\n\n> åœ¨å£°æ˜æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ªavailabilityå±æ€§ï¼Œæ¯ä¸ªå¯¹åº”ä¸åŒçš„å¹³å°ï¼Œä»…å½“availabilityå±æ€§å¯¹åº”ç›¸åº”çš„ç›®æ ‡å¹³å°è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä»»ä½•å…¶ä»–æ‰å°†è¢«å¿½ç•¥ã€‚å‡å¦‚æ²¡æœ‰availability å±æ€§æŒ‡å®šå¯ç”¨æ€§å¯¹ç°åœ¨çš„ç›®æ ‡å¹³å°ï¼Œavailability å±æ€§å°†è¢«å¿½ç•¥ã€‚\n\n### æ”¯æŒçš„å¹³å°\n\n* iosï¼šè‹¹æœçš„iOSæ“ä½œç³»ç»Ÿã€‚æœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡`-mios-version-min=*version*`æˆ–è€…`-miphoneos-version-min=*version*`å‘½ä»¤è¡Œå‚æ•°ã€‚\n* macosxï¼šè‹¹æœçš„OS X æ“ä½œç³»ç»Ÿï¼Œæœ€å°çš„éƒ¨ç½²ç›®æ ‡è¢«æŒ‡å®šé€šè¿‡`-mmacosx-version-min=*version*`å‘½ä»¤è¡Œå‚æ•°\n\n**overloadable**\n\n> Clangæä¾›å¯¹C++å‡½æ•°åœ¨Cä¸­é‡è½½çš„æ”¯æŒã€‚åœ¨Cä¸­å‡½æ•°é‡è½½è¢«å¼•è¿›ä½¿ç”¨`overloadable`å±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯èƒ½æä¾›ä¸€ä¸ªé‡è½½ç‰ˆæœ¬çš„`tgsin`å‡½æ•°æ¥ç²¾ç¡®æ‰§è¡Œç›¸å…³çš„æ ‡å‡†å‡½æ•°è®¡ç®—`float`,`double`,`long double`çš„æ­£å¼¦å€¼ï¼š\n\n```objc\n#include <math.h>\nfloat __attribute__((overloadable)) tgsin(float x) { return sinf(x); }\ndouble __attribute__((overloadable)) tgsin(double x) { return sin(x); }\nlong double __attribute__((overloadable)) tgsin(long double x) { return sinl(x); }\n```\nè¯·æ³¨æ„`overloadable`åªå¯¹å‡½æ•°èµ·ä½œç”¨ã€‚ä½ å¯ä»¥é‡è½½æ–¹æ³•å£°æ˜åœ¨æŸç§èŒƒå›´å†…é€šè¿‡ä½¿ç”¨é€šç”¨çš„è¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼Œæƒ³`id`æˆ–è€…`void *`.\n\n----\n\nä¸Šä¸‹æ–‡æ˜¯å›½ç‹å½“å®ƒé‡åˆ°ç¼–è¯‘å™¨ä¼˜åŒ–æ—¶ã€‚é€šè¿‡æä¾›é™åˆ¶åœ¨æ€æ ·è§£æä½ çš„ä»£ç ï¼Œå¢åŠ ä½ å‚æ•°å°½å¯èƒ½é«˜æ•ˆä»£ç çš„å¯èƒ½æ€§ã€‚é‡åˆ°ç¼–è¯‘å™¨æŠŠä½ æ‰“æ–­ï¼Œè¿™å°†æ˜¯ä¸€é¡¹å¥–åŠ±ã€‚\n\nè¿˜æœ‰`__attribute__`å¹¶ä¸ä»…ä»…å¯¹ç¼–è¯‘å™¨æœ‰ç”¨ï¼šä¸‹ä¸€ä¸ªäººçœ‹ä»£ç ä¹Ÿå°†æ„Ÿè°¢è¿™äº›é¢å¤–çš„ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥å¤šèµ°å‡ è‹±å°ºè¿œå°†å¯¹ä½ çš„åˆä½œä¸­å’Œæ¥æ›¿è€…æˆ–è€…ä»ç°åœ¨ç®—2å¹´ä»¥åçš„ä½ (é‚£ä¸ªæ—¶å€™ä½ å·²ç»å¿˜è®°äº†æ‰€ä»¥çš„äº‹æƒ…å…³äºè¿™ä»½ä»£ç )è‡ªå·±æœ‰ç”¨\n\nä½ ä»˜å‡ºäº†å¤šå°‘çˆ±,æœ€ç»ˆä½ ä¼šå¾—åˆ°å¤šå°‘çˆ±ã€‚\n\nè¯‘è€…æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["ç¿»è¯‘","ç¼–è¯‘å™¨"],"categories":["iOS"]},{"title":"RunLoopè¯¦è§£","url":"/2016/01/12/2016-01-13-runloopxiang-jie/","content":"\n## NSRunLoopæ˜¯ä»€ä¹ˆï¼Ÿ\nåœ¨Cocoaä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹(`NSThread`)å¯¹è±¡ä¸­å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªrun loopï¼ˆ`NSRunLoop`ï¼‰å¯¹è±¡ç”¨æ¥å¾ªç¯å¤„ç†è¾“å…¥äº‹ä»¶.\n\n*NSRunloopå¹¶ä¸çœŸçš„æ˜¯ä¸€ä¸ªloopï¼Œçš„appleçš„æ–‡æ¡£ä¸­ ä¹Ÿæåˆ°äº†éœ€è¦è‡ªå·±å†™whileæˆ–è€…forè¯­å¥æ¥å®ç°,ç±»ä¼¼ä¸‹é¢ï¼š*\n\n```objc\nwhile(running){\n    [NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];\n}\n```\n## ä½•ä¸ºRun loop äº‹ä»¶æº\nä»å­—é¢ç¿»è¯‘æ¥çœ‹ï¼Œrun loopå°±æ˜¯ä¸€ä¸ªè¿è¡Œå¾ªç¯ï¼Œçš„ç¡®å®ƒå°±æ˜¯ä¸€ä¸ªå¤„ç†è¾“å…¥æ—¶é—´çš„è¿è¡Œå¾ªç¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å¤„ç†ï¼Œéš¾é“æ²¡æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™è®©çº¿ç¨‹ç©ºè½¬æµªè´¹èµ„æºï¼Ÿå¾ˆæ˜æ˜¾åœ¨æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™å”¤é†’çº¿ç¨‹ï¼Œæ²¡æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™è®©å…¶sleepæ›´å¥½ã€‚\n\nä¸‹é¢æˆ‘è¿˜æ˜¯æ‹¿è¿™å¼ ç™¾çœ‹ä¸åŒçš„å›¾æ¥è¯´äº‹ï¼š\n![runloop](http://ww2.sinaimg.cn/mw690/64124373gw1ezgx936dhzj20dg071aav.jpg)\n\nå¤„ç†çš„äº‹ä»¶åŒ…æ‹¬ä¸¤ç±»\n* æ¥è‡ªTimer sourcesçš„åŒæ­¥äº‹ä»¶\n* æ¥è‡ªInput sourcesçš„å¼‚æ­¥äº‹ä»¶\n\n1.Time Source. Timer sources deliver synchronous events, occurring at a scheduled time or repeating interval.\nè‹¹æœæ–‡æ¡£ä¸­æœ‰å¥è¯éœ€è¦æ³¨æ„ï¼Œ\n> Timer sources deliver events to their handler routines but do not cause the run loop to exit.*\n\nåˆ›å»ºNSTimeræ·»åŠ åˆ°run loopä¸­çš„æ—¶å€™ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`NSTimer`é»˜è®¤æ˜¯å¤„äº`NSDefaultRunloopMode`ï¼Œè¿™ä¹Ÿå°±å¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆå¦‚æœä½ åœ¨ä½ çš„æ§åˆ¶å™¨ä¸­æ·»åŠ äº†ä¸€ä¸ªtimerå®šæ—¶åˆ·æ–°ä½ çš„ç•Œé¢ï¼Œè€Œä½ åœ¨æ‹–åŠ¨è§†å›¾çš„æ—¶å€™timerä¸å›fireï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ä½ çš„runloop æ˜¯`NSEventTrackingRunloopMode`,åœ¨è¿™ä¸ªmodeä¸‹timerä¸å›fire\n\n2.input source input source ä¸»è¦æ˜¯ä¸€äº›å¼‚æ­¥çš„äº‹ä»¶ï¼Œæ¯”å¦‚æ¥è‡ªå…¶å®ƒçº¿ç¨‹æˆ–è€…å…¶å®ƒappçš„æ¶ˆæ¯ã€‚\n\ninput source ä¼ é€’å¼‚æ­¥äº‹ä»¶åˆ°å…¶å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸”ä½¿runUntilDate(ä¸çº¿ç¨‹ç›¸å…³è”çš„runloopå¯¹è±¡è°ƒç”¨)è¿”å›\n\nä¸ºäº†èƒ½å¤Ÿå¤„ç†input sourcrï¼Œrun loops äº§ç”Ÿnotifications.é€šè¿‡æ³¨å†Œæˆrun-loop observerså¯ä»¥æ¥å—åˆ°è¿™äº›é€šçŸ¥ï¼ˆé€šè¿‡Core Foundation æ¥æ³¨å†Œobserversï¼‰.\n\n\n## RunLoopModeæœ‰å“ªäº›ï¼Ÿ\nrun loopåœ¨å¤„ç†è¾“å…¥äº‹ä»¶æ—¶ä¼šäº§ç”Ÿé€šçŸ¥ï¼Œå¯ä»¥é€šè¿‡Core Foundationå‘çº¿ç¨‹ä¸­æ·»åŠ run loop observersæ¥ç›‘å¬ç‰¹å®šäº‹ä»¶,ä»¥åœ¨ç›‘å¬çš„äº‹ä»¶å‘ç”Ÿæ—¶åšé™„åŠ çš„å¤„ç†å·¥ä½œã€‚\n\næ¯ä¸ªrun loopå¯è¿è¡Œåœ¨ä¸åŒçš„æ¨¡å¼ä¸‹,ä¸€ä¸ªrun loop modeæ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­åŒ…å«å…¶ç›‘å¬çš„è‹¥å¹²è¾“å…¥äº‹ä»¶æºï¼Œå®šæ—¶å™¨ï¼Œä»¥åŠåœ¨äº‹ä»¶å‘ç”Ÿæ—¶éœ€è¦é€šçŸ¥çš„run loop observersã€‚è¿è¡Œåœ¨ä¸€ç§modeä¸‹çš„run loopåªä¼šå¤„ç†å…¶run loop modeä¸­åŒ…å«çš„è¾“å…¥æºäº‹ä»¶ï¼Œå®šæ—¶å™¨äº‹ä»¶ï¼Œä»¥åŠé€šçŸ¥run loop modeä¸­åŒ…å«çš„observersã€‚\n\nCocoaä¸­çš„é¢„å®šä¹‰æ¨¡å¼æœ‰:\n1. Defaultæ¨¡å¼\n\n    å®šä¹‰[NSDefaultRunLoopMode](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/index.html#//apple_ref/c/data/NSDefaultRunLoopMode) (Cocoa) [kCFRunLoopDefaultMode](https://developer.apple.com/library/ios/documentation/CoreFoundation/Reference/CFRunLoopRef/index.html#//apple_ref/c/data/kCFRunLoopDefaultMode) (Core Foundation)\n\n    æè¿°ï¼šé»˜è®¤æ¨¡å¼ä¸­å‡ ä¹åŒ…å«äº†æ‰€æœ‰è¾“å…¥æº(NSConnectioné™¤å¤–),ä¸€èˆ¬æƒ…å†µä¸‹åº”ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„run loop modeã€‚\n\n2. Connectionæ¨¡å¼\n\n    å®šä¹‰ï¼š`NSConnectionReplyMode`(Cocoa)\n\n    æè¿°ï¼šå¤„ç†`NSConnection`å¯¹è±¡ç›¸å…³äº‹ä»¶ï¼Œç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼Œè¿™ä¸ªmodeè¡¨æ˜`NSConnection`å¯¹è±¡ç­‰å¾…reply,ç”¨æˆ·åŸºæœ¬ä¸ä¼šä½¿ç”¨ã€‚\n\n3. Modalæ¨¡å¼\n\n    å®šä¹‰ï¼š`NSModalPanelRunLoopMode`(Cocoa)\n\n    æè¿°ï¼šå¤„ç†modal panelsäº‹ä»¶,éœ€è¦ç­‰å¾…å¤„ç†çš„input sourceä¸ºmodal panelæ—¶è®¾ç½®ï¼Œæ¯”å¦‚NSSavePanelå’ŒNSOpenPanelã€‚\n\n4. Event trackingæ¨¡å¼\n    å®šä¹‰ï¼š[UITrackingRunLoopMode](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/index.html#//apple_ref/doc/uid/TP40006728-CH3-SW38)(iOS) `NSEventTrackingRunLoopMode`(cocoa)\n\n    æè¿°ï¼šä½¿ç”¨è¯¥æ¨¡å¼æ¥å¤„ç†ç”¨æˆ·ç•Œé¢ç›¸å…³çš„äº‹ä»¶,ä¾‹å¦‚åœ¨æ‹–åŠ¨loopæˆ–å…¶ä»–user interface tracking loopsæ—¶å¤„äºæ­¤ç§æ¨¡å¼ä¸‹ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ä¼šé™åˆ¶è¾“å…¥äº‹ä»¶çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå½“æ‰‹æŒ‡æŒ‰ä½UITableViewæ‹–åŠ¨æ—¶å°±ä¼šå¤„äºæ­¤æ¨¡å¼ã€‚\n\n5. Commonæ¨¡å¼\n\n    å®šä¹‰ï¼š[NSRunLoopCommonModes](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/index.html#//apple_ref/c/data/NSRunLoopCommonModes) (Cocoa) [kCFRunLoopCommonModes](https://developer.apple.com/library/ios/documentation/CoreFoundation/Reference/CFRunLoopRef/index.html#//apple_ref/c/data/kCFRunLoopCommonModes) (Core Foundation)\n\n    æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªä¼ªæ¨¡å¼ï¼Œå…¶ä¸ºä¸€ç»„run loop modeçš„é›†åˆï¼Œå°†è¾“å…¥æºåŠ å…¥æ­¤æ¨¡å¼æ„å‘³ç€åœ¨Common Modesä¸­åŒ…å«çš„æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥å¤„ç†ã€‚åœ¨Cocoaåº”ç”¨ç¨‹åºä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹Common ModesåŒ…å«default modes,modal modes,event Tracking modes,\n    å¯ä½¿ç”¨[CFRunLoopAddCommonMode](https://developer.apple.com/library/ios/documentation/CoreFoundation/Reference/CFRunLoopRef/index.html#//apple_ref/c/func/CFRunLoopAddCommonMode)æ–¹æ³•å‘Common Modesä¸­æ·»åŠ è‡ªå®šä¹‰modesã€‚\n\n    **æ³¨æ„è¿™ä¸ªå¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹å®šçš„modeï¼Œè€Œæ˜¯ä¸€ä¸ªmodeçš„é›†åˆï¼Œè€Œrunloopå¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªç‰¹å®šçš„modeä¸‹**ã€‚\n\nè·å–å½“å‰çº¿ç¨‹çš„runloop mode\n\n```objc\nNSString* runLoopMode = [[NSRunLoop currentRunLoop] currentMode];\n```\n\n## NSTimerã€NSURLConnectionä¸UITrackingRunLoopMode\nNSTimerä¸NSURLConnectioné»˜è®¤è¿è¡Œåœ¨default modeä¸‹ï¼Œè¿™æ ·å½“ç”¨æˆ·åœ¨æ‹–åŠ¨UITableViewå¤„äºUITrackingRunLoopModeæ¨¡å¼æ—¶ï¼ŒNSTimerä¸èƒ½fire,NSURLConnectionçš„æ•°æ®ä¹Ÿæ— æ³•å¤„ç†ã€‚\nNSTimerçš„ä¾‹å­:\nåœ¨ä¸€ä¸ªUITableViewControllerä¸­å¯åŠ¨ä¸€ä¸ª0.2sçš„å¾ªç¯å®šæ—¶å™¨ï¼Œåœ¨å®šæ—¶å™¨åˆ°æœŸæ—¶æ›´æ–°ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¹¶æ˜¾ç¤ºåœ¨labelä¸Šã€‚\n\n```objc\n- (void)viewDidLoad {\n\n    label =[[UILabel alloc]initWithFrame:CGRectMake(10, 100, 100, 50)];\n    [self.view addSubview:label];\n    count = 0;\n\n    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 0.2\n                                                      target: self\n                                                    selector: @selector(incrementCounter:)\n                                                    userInfo: nil\n                                                     repeats: YES];\n}\n\n- (void)incrementCounter:(NSTimer *)theTimer\n{\n    count++; label.text = [NSString stringWithFormat:@\"%zd\",count];\n}\n\n```\n\nåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯çœ‹åˆ°æ¯éš”0.2sï¼Œlabelä¸Šæ˜¾ç¤ºçš„æ•°å­—+1,ä½†å½“ä½ æ‹–åŠ¨æˆ–æŒ‰ä½tableViewæ—¶ï¼Œlabelä¸Šçš„æ•°å­—ä¸å†æ›´æ–°ï¼Œå½“ä½ æ‰‹æŒ‡ç¦»å¼€æ—¶ï¼Œlabelä¸Šçš„æ•°å­—ç»§ç»­æ›´æ–°ã€‚å½“ä½ æ‹–åŠ¨`UItableView`æ—¶ï¼Œå½“å‰çº¿ç¨‹run loopå¤„äº`UIEventTrackingRunLoopMode`æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¸å¤„ç†å®šæ—¶å™¨äº‹ä»¶ï¼Œå³å®šæ—¶å™¨æ— æ³•fire,labelä¸Šçš„æ•°å­—ä¹Ÿå°±æ— æ³•æ›´æ–°ã€‚\nè§£å†³æ–¹æ³•ï¼Œä¸€ç§æ–¹æ³•æ˜¯åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­å¤„ç†å®šæ—¶å™¨äº‹ä»¶ï¼Œå¯æŠŠTimeråŠ å…¥åˆ°`NSOperation`ä¸­åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒåº¦;è¿˜æœ‰ä¸€ç§æ–¹æ³•æ—¶ä¿®æ”¹Timerè¿è¡Œçš„run loopæ¨¡å¼ï¼Œå°†å…¶åŠ å…¥åˆ°`UITrackingRunLoopMode`æ¨¡å¼æˆ–`NSRunLoopCommonModes`æ¨¡å¼ä¸­ã€‚\nå³\n\n```objc\n[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode];\n```\n\næˆ–\n\n```objc\n[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];\n```\n\nå¦å¤–ä¸€ç§æ˜¯æ”¾åˆ°`NSThread`ä¸­\n\n```objc\n- (void)viewDidLoad{\n    [super viewDidLoad];\n    NSLog(@\"ä¸»çº¿ç¨‹ %@\", [NSThread currentThread]);\n    //åˆ›å»ºå¹¶æ‰§è¡Œæ–°çš„çº¿ç¨‹\n    NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(newThread) object:nil];\n    [thread start];\n}\n\n- (void)newThread{\n    @autoreleasepool{\n        //åœ¨å½“å‰Run Loopä¸­æ·»åŠ timerï¼Œæ¨¡å¼æ˜¯é»˜è®¤çš„NSDefaultRunLoopMode\n        [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(timer_callback) userInfo:nil repeats:YES];\n        //å¼€å§‹æ‰§è¡Œæ–°çº¿ç¨‹çš„Run Loopï¼Œå¦‚æœä¸å¯åŠ¨run loopï¼Œtimerçš„äº‹ä»¶æ˜¯ä¸ä¼šå“åº”çš„\n        [[NSRunLoop currentRunLoop] run];\n    }\n}\n\n- (void)timer_callback{\n    NSLog(@\"Timer %@\", [NSThread currentThread]);\n}\n```\n\n`NSURLConnection`ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè§[SDWebImage](https://github.com/rs/SDWebImage)ä¸­çš„æè¿°,ä»¥åŠ[SDWebImageDownloader.m](https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDWebImageDownloader.m)ä»£ç ä¸­çš„å®ç°ã€‚ä¿®æ”¹NSURLConnectionçš„è¿è¡Œæ¨¡å¼å¯ä½¿ç”¨[scheduleInRunLoop:forMode:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/scheduleInRunLoop:forMode:)æ–¹æ³•ã€‚\n\n```objc\nNSURL *url = [NSURL URLWithString:@\"https://www.baidu.com\"];\nNSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:15];\n\nself.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];\n[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];\n[connection start];\n```\n\n## å‚è€ƒèµ„æ–™ï¼š\n\n* [Threading Programming Guide â€“ Run Loops](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)\n* [NSRunLoop Class Reference](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/index.html)\n* [NSURLConnection Class Reference](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/)\n* [NSTimer Class Reference](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/index.html)\n* [CFRunLoop wiki](http://iphonedevwiki.net/index.php/CFRunLoop)\n* [SDWebImage](https://github.com/rs/SDWebImage)\n* [TestButtonDown](http://hayne.net/MacDev/TestButtonDown/)\n* [å…³äºNSRunloopçš„å­¦ä¹ å’Œç†è§£](http://billwang1990.github.io/blog/2013/12/30/nsrunloop-issue/)\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["RunLoop"],"categories":["iOS"]},{"title":"iOS7 tintColorè¯¦è§£","url":"/2016/01/12/2016-01-13-ios7-tintcolorxiang-jie/","content":"\n## ä¸ºä»€ä¹ˆéœ€è¦å‡ºç°tintColor ï¼Ÿ\n\n> è§£å†³ä»¥å‰ä¸æ–¹ä¾¿ç»Ÿä¸€è®¾ç½®è§†å›¾é¢œè‰²é£æ ¼çš„é€šç‚¹ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰ç³»ç»Ÿæ§ä»¶å¤–è§‚\n è·Ÿ`UIAppearance`åè®®è®¾è®¡æœ‰ç‚¹ç±»ä¼¼ï¼Œ`UIAppearance`æ˜¯ä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€ è®¾ç½®ä¸€ç±»æ§ä»¶çš„å¤–è§‚ï¼Œè€Œ`tintColor`æ˜¯ä¸ºæ–¹ä¾¿è®¾ç½®æŸä¸ªæ§ä»¶çš„å¤–è§‚ï¼Œæˆ–è€… è¯´æŸä¸ªå®¹å™¨å†…æ‰€æœ‰æ§ä»¶çš„é£æ ¼ã€‚\n\n > åƒåœ¨`UIViewController` ä¸­ï¼Œé€šè¿‡è¿™æ®µä»£ç å¯ä»¥å®ç°å®¹å™¨å†…ï¼Œæ‰€æœ‰çš„å­viewé£æ ¼ç»Ÿä¸€åŒ–,è¿™æ ·åœ¨è¿™ä¸ªæ§åˆ¶å™¨ä¸­çš„æ‰€æœ‰å­viewéƒ½ä¼šä»¥`tintColor`æ˜¾ç¤º\n > ```objc\n self.view.tintAdjustmentMode = UIViewTintAdjustmentModeNormal\n ```\n\n\n`UIView`çš„`tintAdjustmentMode`éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ª`UIViewTintAdjustmentMode`æšä¸¾\n\n* UIViewTintAdjustmentModeAutomaticï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼è‡ªåŠ¨ï¼‰\n* UIViewTintAdjustmentModeNormalï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼æ­£å¸¸ï¼‰\n* UIViewTintAdjustmentModeDimmedï¼ˆç€è‰²è°ƒæ•´æ¨¡å¼å˜æš—ï¼Œæ‰“å¼€æ§é£æ ¼ä¼šå˜æˆç°ç™½æ¨¡å¼ï¼‰\n\n\n\n## å…ˆçœ‹çœ‹å®˜æ–¹APIè¯´æ˜\n\n<img src=\"http://ww3.sinaimg.cn/mw690/64124373gw1eyvl7cyzvxj20du0kpn43.jpg\" width=\"375\" height=\"558\">\n\n> iOS7ä»¥åæ‰€æœ‰çš„UIViewä»¥åŠå®ƒçš„å­ç±»éƒ½æ–°å¢äº†ä¸€ä¸ªå«tintColorçš„æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è§†å›¾è¿›è¡Œé¢œè‰²è°ƒæ•´\n\n\n## æ³¨æ„äº‹é¡¹\n> `UIImageView`éœ€è¦è®¾ç½®`renderingMode`ä¸º`UIImageRenderingModeAlwaysTemplate`æ‰èƒ½ç”Ÿæ•ˆã€‚\n`renderingMode`æ˜¯ä¸€ä¸ªç±»å‹ä¸º`UIImageRenderingMode`çš„æšä¸¾\n\n* UIImageRenderingModeAutomatic ï¼ˆé»˜è®¤æ¸²æŸ“æ¨¡å¼ï¼Œè‡ªåŠ¨æ¨¡å¼ï¼‰\n* UIImageRenderingModeAlwaysOriginalï¼ˆæ€»æ˜¯ç»˜åˆ¶åŸæ¥çš„å›¾ç‰‡ï¼Œä¸æŠŠå®ƒå½“æˆä¸´æ—¶å›¾ç‰‡æ¥å¤„ç†ï¼‰\n* UIImageRenderingModeAlwaysTemplate ï¼ˆæ€»æ˜¯ç»˜åˆ¶ä¸´æ—¶å›¾ç‰‡ï¼Œä¼šå¿½ç•¥å®ƒåŸæœ¬çš„é¢œè‰²ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®`tintColor`ç”Ÿäº§å›¾ç‰‡ï¼‰\n\n## UIImageViewçš„ä½¿ç”¨\n\n```objc\nUIImage *image = [UIImage imageNamed:@\"xxx.png\"];\nimage = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];\n```\n\n## tintColoræ›´æ–°\nåœ¨å­ç±»ä¸­é‡å†™`- (void)tintColorDidChange` æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ¯æ¬¡æ›´æ–°`tintColor`çš„æ—¶å€™è°ƒç”¨ç›¸å…³é…ç½®\n\n```objc\n - (void)tintColorDidChange\n {\n    _tintColorLabel.textColor = self.tintColor;\n    _tintColorBlock.backgroundColor = self.tintColor;\n }\n```\n\n## å‚è€ƒé“¾æ¥ \n\n* [Demo - iOS7 tintColor day by day](https://www.shinobicontrols.com/blog/ios7-day-by-day-day-6-tint-color)\n","tags":["Skill","iOS"],"categories":["iOS"]},{"title":"MacOSX10.11ä¸Šç”¨Octopresså’ŒGitHubæ­å»ºä¸ªäººåšå®¢","url":"/2015/12/12/2016-01-13-macosx10-dot-11shang-yong-octopresshe-githubda-jian-ge-ren-bo-ke/","content":"\nåºè¨€ç»è¿‡ä¸€æ™šä¸Šçš„æŠ˜è…¾ï¼Œç»ˆäºä»`Hexo`æˆåŠŸè½¬å…¥`Octopress`,é‚£ä¹ˆæœ¬æ–‡å°±æ¥ç»†è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ `Octopress`+`GitHub Pages`æ­å»ºä¸ªäººåšå®¢\n\n### ä¸ºä»€ä¹ˆé€‰æ‹© Octopress & Github Pages?\n\n* å…è´¹ä¸”ç‹¬ç«‹ã€‚æŠŠ Octopress åšå®¢ç³»ç»Ÿæ­å»ºåˆ° Github Pages è™½æ˜¯å…è´¹ï¼Œä½†ä¸å¤±ç‹¬ç«‹æ€§ï¼Œå³ä¾¿ Github å…¨ç«™å…³é—­ï¼Œä½ ä¹Ÿå°†æœ‰ä¸€ä»½æœ¬åœ°å…¨ç«™å¤‡ä»½ï¼Œéšæ—¶å¯ä»¥é‡æ–°æ¢å¤ã€‚ä¸å¿…å—æ‰˜ç®¡å•†ä¹‹æ°”ï¼Œè€Œä¸”è¿˜å…è´¹ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œç”šè‡³å¯ä»¥è‡ªè¡Œæ’å…¥å¹¿å‘ŠæŒ£é’±ã€‚\n* ç‰ˆæœ¬æ§åˆ¶ã€‚å†™æ–‡ç« ï¼Œå»ºç½‘ç«™ï¼Œåšè½¯ä»¶éƒ½éœ€è¦ä¿®æ”¹ï¼Œä½†æœ‰æ—¶å€™æ”¹å®Œäº†åˆä¼šåæ‚”ï¼Œå¦‚æœæœ‰æ—¶å…‰æœºå°±å¥½äº†ï¼ŒGit å°±æ˜¯ä½ çš„æ—¶å…‰æœºã€‚å½“ç„¶å¦‚æœä½ ä¸æƒ³äº†è§£è¿™äº›çœ‹ä¸Šå»å¾ˆå”¬äººçš„ IT åè¯ï¼Œåªæ˜¯æƒ³å†™åšå®¢çš„è¯ï¼Œè¯·åœ¨éœ€è¦çš„æ—¶å€™å†ç ”ç©¶è¿™æ¡çš„å†…å®¹ã€‚\n* ç›¸å¯¹å…¶ä»–æ‰˜ç®¡åˆ° Github ä¸Šçš„åšå®¢ç¨‹åºï¼ŒOctopress æ›´åŠ æˆç†Ÿæ˜“ä¸Šæ‰‹ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œ[Jekyll](http://jekyllcn.com) å¯ä»¥è¯´æ˜¯æ¯›å¯æˆ¿ï¼Œ[Hexo](https://hexo.io) å’Œ [Octopress](http://octopress.org) ç®—æ˜¯ç®€è£…ä¿®ï¼Œä½†ç›¸æ¯” Hexoï¼ŒOctopress æœ‰æ›´å¤šè£…ä¿®èŒƒä¾‹å’Œæ›´å¤šç†Ÿç»ƒçš„è£…ä¿®å·¥äººï¼Œæ›´å®¹æ˜“è·å–å¸®åŠ©ã€‚å½“ç„¶å¦‚æœä½ åªæƒ³ä½ç²¾è£…ä¿®çš„æˆ¿å­ï¼Œé‚£ä¸å¾—ä¸èŠ±ç‚¹é’±ä¸Š [WordPress](https://www.google.com.hk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&cad=rja&uact=8&ved=0ahUKEwiOv6rSnqbKAhVGKJQKHefnDGAQFghGMAc&url=https%3A%2F%2Fzh.wikipedia.org%2Fzh-cn%2FWordPress&usg=AFQjCNGIb2sxhqKIuZ22-NHO6nclaYYOSQ&sig2=GoW6MP3lSb9RasgVQGFxnw) äº†\n* ä½¿ç”¨ Markdownã€‚[Markdown](https://zh.wikipedia.org/wiki/Markdown) æ˜¯ç°åœ¨æœ€ä¸ºæµè¡Œçš„è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œä¹Ÿæ˜¯å·²æ•…çš„å¤©æ‰ Aaron Swartz ç•™ç»™ä¸–äººæœ€å¥½çš„ç¤¼ç‰©ï¼Œçªƒä»¥ä¸ºæ¯ä¸ªåœ¨äº’è”ç½‘ä¸Šå‘å¸ƒæ–‡ç« çš„äººéƒ½è¯¥æŒæ¡ã€‚\n* æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼ŒOctopress æ˜¯ä¸ª`A blogging framework for hackers`(ã€Œä¸ºé»‘å®¢è®¾è®¡çš„åšå®¢æ¡†æ¶ã€)ï¼Œè¿™å¾ˆé…·ï¼Œä½ ä¸è§‰å¾—å—ï¼Ÿ\n\nå¦‚æœä½ ä¹‹å‰æ²¡æœ‰å†™è¿‡åšå®¢ï¼Œæ‰“ç®—å¼€å§‹æ­å»ºè‡ªå·±ç¬¬ä¸€ä¸ªåšå®¢çš„è¯ï¼Œå…¶å®ä¹Ÿä¸å¦¨è¯•è¯• Octopressï¼Œå…è´¹è¿˜èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œä½•ä¹è€Œä¸ä¸ºï¼Ÿ\n\n\næœ¬æ–‡æ˜¯åœ¨`OS X EI Capitan`ç³»ç»Ÿä¸Šæ­å»ºä¸€ä¸ªåŸºäº`Octopress`çš„ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œè®°å½•æ­å»ºè¿‡ç¨‹çš„å„ç§å‘ï¼Œå¸Œæœ›å¯¹æœ‰æƒ³æ­å»ºä¸ªäººåšå®¢çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©ã€‚\n\næœ¬æ–‡æ˜¯å»ºç«‹åœ¨ä½ æœ‰ShellæŒ‡ä»¤åŸºç¡€å’ŒGitæ“ä½œåŸºç¡€ä¹‹ä¸Šï¼Œå¦‚æœä¸äº†è§£çš„è¯ï¼Œéœ€è¦æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\n\nå…ˆè§£é‡Šå‡ ä¸ªä¸“ä¸šæœ¯è¯­ï¼š\n\n* [Ruby](https://www.ruby-lang.org/zh_cn/)\n\t* Ruby æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚Octopress æ˜¯ç”¨ Rubyè¯­è¨€ å®ç°çš„ã€‚æˆ‘ä»¬ä¸éœ€è¦å¯¹å®ƒæœ‰å¤ªå¤šäº†è§£ï¼Œåªéœ€è¦æ­£ç¡®å®‰è£… Ruby çš„ç¯å¢ƒï¼ˆRubyç‰ˆæœ¬å¿…é¡»ä¸ä½äº1.9.3-p0ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰åŠæŒ‰æ­¥éª¤æ‰§è¡ŒæŒ‡ä»¤å³å¯ã€‚\n* [RubyGems](https://rubygems.org/)\n\t* RubyGemsï¼ˆç®€ç§° gemsï¼‰æ˜¯ä¸€ä¸ªç”¨äºå¯¹ Rubyç»„ä»¶è¿›è¡Œæ‰“åŒ…çš„ Ruby æ‰“åŒ…ç³»ç»Ÿã€‚å®ƒå¯ä»¥ç”¨æ¥æŸ¥æ‰¾ã€å®‰è£…ã€å‡çº§å’Œå¸è½½è½¯ä»¶åŒ…ã€‚æˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡å®ƒå®‰è£…OctopressåŒ…çš„\n* [RVM](https://rvm.io/)\n\t* RVM  æ˜¯Ruby Version Managerçš„ç®€ç§°ï¼Œæ˜¯ä¸€æ¬¾ Ruby è¯­è¨€å®‰è£…ã€ç®¡ç†çš„å·¥å…·ã€‚æˆ‘ä»¬å¯¹ Ruby çš„æ“ä½œæ˜¯é€šè¿‡å®ƒçš„æŒ‡ä»¤å®Œæˆçš„ã€‚\n* [Jekyll](http://jekyll.bootcss.com/)\n\t* Jekyll ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚\tJekyll æœ‰ä¸€å¥—æ¨¡æ¿ç›®å½•ï¼Œå¯ä»¥å°† Markdownæ–‡ä»¶ï¼ˆæˆ–è€…Textileï¼‰è½¬æ¢ä¸ºé™æ€ç½‘é¡µï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å¯å‘å¸ƒçš„é™æ€ç½‘ç«™ã€‚\n\t* åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†äº§ç”Ÿçš„é™æ€ç½‘ç«™å¸ƒç½®åˆ° GitHub Pages ä¸Šï¼Œç”Ÿæˆä¸ªäººåšå®¢ç«™ç‚¹ã€‚\n\t* æƒ³äº†è§£æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹[ä¸­æ–‡æ–‡æ¡£](http://jekyll.bootcss.com/docs/home/)ã€‚\n* [Octopress](http://niumeng.me/blog/2015/08/26/create-your-website-1-init/www.github.com/imathis/octopress)\n\t* Octopress æ˜¯åŸºäº Jekyll çš„åšå®¢æ¡†æ¶ã€‚ä»–ä»¬çš„å…³ç³»å°±åƒ jQuery ä¸ js çš„å…³ç³»ä¸€æ ·ã€‚\n\t* å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç°æˆçš„ç¾è§‚çš„ä¸»é¢˜æ¨¡æ¿ï¼Œå¹¶ä¸”é…ç½®ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œå¤§å¤§é™ä½äº†æˆ‘ä»¬å»ºç«™çš„é—¨æ§›ã€‚\n* [Git](http://rogerdudler.github.io/git-guide/index.zh.html)\n\t* åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œè·Ÿå®ƒæœ‰ç‚¹ç±»ä¼¼çš„æ˜¯SVNï¼Œåªæ˜¯ä¸¤è€…ä½¿ç”¨åœºæ™¯ä¸ä¸€æ ·ã€‚\n* [GitHub](https://www.github.com/)\n\t* GitHub æ˜¯å…¨çƒæœ€çƒ­çš„å¼€æºç¤¾åŒºï¼Œç¨‹åºç•Œçš„ Facebookã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›ä»£ç æ‰˜ç®¡æœåŠ¡ï¼Œä»¥åŠæˆ‘ä»¬æ­å»ºåšå®¢æ‰€éœ€è¦çš„ Pages æœåŠ¡ã€‚\n* [GitHub Pages](https://pages.github.com/)\n\t* GitHub Pages æ˜¯ GitHub æä¾›çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒç”¨äºæ˜¾ç¤ºæ‰˜ç®¡åœ¨ GitHub ä¸Šçš„é™æ€ç½‘é¡µã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ Github Pages æ­å»ºåšå®¢ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠé¡¹ç›®çš„æ–‡æ¡£å’Œä¸»é¡µæ”¾åœ¨ä¸Šé¢ã€‚\n\né€šè¿‡ä»¥ä¸Šå†…å®¹ï¼Œæˆ‘ä»¬å¤§æ¦‚èƒ½å¤Ÿæ˜ç™½ Octopress å»ºç«™çš„åŸç†ï¼š\næˆ‘ä»¬ä½¿ç”¨åŸºäº Jekyll çš„ Octopress ç«™ç‚¹ç”Ÿæˆå·¥å…·ï¼Œç”Ÿæˆæœ¬åœ°çš„é™æ€ç½‘ç«™ã€‚ç„¶åå°†é™æ€ç½‘ç«™æ‰˜ç®¡åˆ° GitHub ä¸ºæˆ‘ä»¬æä¾›çš„ GitHub Pages æœåŠ¡ä¸Šã€‚è®¿é—® **username**.github.io å³å¯æ˜¾ç¤ºä½ çš„ä¸ªäººåšå®¢ç«™äº†\n\n---\næ˜ç™½äº†ä¸Šé¢è¿™äº›å†…å®¹ï¼Œä¸‹é¢è¿›è¡Œå…·ä½“çš„æ­å»ºå·¥ä½œï¼š\n### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Ruby\nMacè‡ªå¸¦Rubyç¯å¢ƒæ‰“å¼€ç»ˆç«¯ï¼Œå®‰è£… RVM ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```bash\n$ curl -L https://get.rvm.io | bash -s stable --ruby\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦æŸ¥çœ‹è‡ªå·±çš„ Ruby ç¯å¢ƒ\n\n```bash\n$ ruby -v\n```\n\nå¦‚æœä½ çš„ Ruby ç‰ˆæœ¬ä¸ä½äº 1.9.3-p0 å¯ä»¥å¿½ç•¥ Ruby çš„å®‰è£…ï¼ˆæˆ–å‡çº§ï¼‰ï¼Œç›´æ¥è·³åˆ°å®‰è£… RubyGems ã€‚ å¦åˆ™ï¼Œæˆ‘ä»¬æ‰§è¡Œä¹‹åçš„æ“ä½œï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\n$ rvm install 1.9.3\n$ rvm use 1.9.3\n```\n\nç„¶åå®‰è£… RubyGemsï¼Œ ç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\n$ rvm rubygems latest\n```\n\nåˆ°è¿™é‡Œç¬¬ä¸€æ­¥å®Œæˆã€‚æˆ‘ä»¬å¯ä»¥å†æ‰§è¡Œä¸€æ¬¡ç¬¬ä¸€æ¡æŒ‡ä»¤ `ruby -v` æ¥æŸ¥çœ‹å½“å‰ Ruby çš„ç‰ˆæœ¬äº†ã€‚\n\n### ç¬¬äºŒæ­¥ï¼šå®‰è£…Octopress\nå› ä¸ºMacç³»ç»Ÿè‡ªåŠ¨gitç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘gitçš„å®‰è£…ã€‚ç›´æ¥å°† Octopressçš„é¡¹ç›®cloneåˆ°æœ¬åœ°ï¼Œåœ¨ç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\n$ git clone git://github.com/imathis/octopress.git octopress\n```\n\nå®Œæˆåè¿›å…¥ octopress çš„ç›®å½•\n\n```\n$ cd octopress\n```\n\næ¥ä¸‹æ¥ï¼Œå®‰è£…ä¾èµ–ï¼š\n\n```\n$ gem install bundler\n# è¿™æ—¶ä½ å¯èƒ½ä¼šé‡åˆ°æ²¡æœ‰æƒé™çš„é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åŠ ä¸Šsudoé‡æ–°æ‰§è¡Œï¼Œå¹¶è¾“å…¥å¯†ç ã€‚\n$ sudo gem install bundler\n# æ¥ä¸‹æ¥æ‰§è¡Œï¼š\n$ bundle install\n```\n\nè¿™æ—¶ä½ å¯èƒ½è¿˜ä¼šé‡åˆ°é—®é¢˜å¦‚ä¸‹ï¼š\n\n```\nFetching gem metadata from https://rubygems.org/...........\nResolving dependencies...\n\nGem::RemoteFetcher::FetchError: SocketError: getaddrinfo: Name or service not known (https://rubygems.org/gems/rake-10.4.2.gem)\nAn error occurred while installing rake (10.4.2), and Bundler cannot continue.\n```\n\nè¿™æ˜¯å› ä¸ºè¢«å¢™äº†ï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼š ä¸€ä¸ªæ˜¯ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç¿»å¢™å·¥å…·ï¼› å¦ä¸€ä¸ªï¼Œæ·˜å®åšäº†ä¸€ä¸ªgemçš„é•œåƒã€‚æˆ‘ä»¬éœ€è¦åœ¨Octopressçš„æ–‡ä»¶ç›®å½•ä¸‹æ‰¾åˆ°Gemfileæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„`source 'https://rubygems.org/'`æ”¹ä¸º`source 'https://ruby.taobao.org/'`\n\nå†é‡æ–°è¿è¡Œ`bundle install`å°±å¯ä»¥äº†ã€‚ è¿™æ®µå†…å®¹å¯ä»¥å‚è€ƒ [bundle install æç¤ºå¦‚ä¸‹ï¼Œæ˜¯éœ€è¦ç¿»å¢™è§£å†³ä¹ˆ](http://www.imooc.com/qadetail/59105)ã€‚\n\nä¸‹é¢å°±å¯ä»¥å®‰è£… Octopress çš„é»˜è®¤ä¸»é¢˜äº†ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\nrake install\n```\n\nè¿™æ ·ä¸€ä¸ªæœ€åŸºæœ¬çš„ä¸ªäººåšå®¢ç«™å°±äº§ç”Ÿäº†ã€‚\n\n![Octoress init](http://ww3.sinaimg.cn/mw690/64124373gw1ezxvho05u3j20lx0ab764.jpg)\n\n#### å®‰è£…`octostrap3`ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰\n\n```\n$ cd octopress\n$ git clone https://github.com/kAworu/octostrap3.git .themes/octostrap3\n$ rake \"install[octostrap3]\"\n$ rake generate\n```\n\nä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯\n\n```\nA theme is already installed, proceeding will overwrite existing files. Are you sure? [y/n]\n```\n\nè¾“å…¥`y`ç»§ç»­ï¼Œç„¶åå¼€å§‹å®‰è£…ã€‚ã€‚ã€‚\n\n```\n## Copying octostrap3 theme into ./source and ./sass\nmkdir -p source\ncp -r .themes/octostrap3/source/. source\nmkdir -p sass\ncp -r .themes/octostrap3/sass/. sass\nmkdir -p source/_posts\nmkdir -p public\n```\n\næ˜¾ç¤ºä¸Šé¢çš„å†…å®¹å®Œæˆåæ²¡æœ‰é”™è¯¯ï¼Œå°±å®‰è£…ä¸»é¢˜å®Œæˆ\n\n---\n\nå¯ä»¥çœ‹å‡ºï¼Œç°åœ¨æ˜¾ç¤ºå¾—éƒ½æ˜¯é¢„è®¾å€¼ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹Octopressç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚\n\næ–‡ä»¶ç›®å½•`_config.yml`\n\næè¿°ï¼šä¿å­˜é…ç½®æ•°æ®ã€‚å¾ˆå¤šé…ç½®é€‰é¡¹éƒ½ä¼šç›´æ¥ä»å‘½ä»¤è¡Œä¸­è¿›è¡Œè®¾ç½®ï¼Œä½†æ˜¯å¦‚æœä½ æŠŠé‚£äº›é…ç½®å†™åœ¨è¿™å„¿ï¼Œä½ å°±ä¸ç”¨éè¦å»è®°ä½é‚£äº›å‘½ä»¤äº†ã€‚\n\n_config.yml æ–‡ä»¶å…±åˆ†ä¸º3ä¸ªéƒ¨åˆ†å†…å®¹\n\n* Main Configs\n* Jekyll & Plugins\n* 3rd Party Settings\n\nç›®å‰ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ç¬¬ä¸€éƒ¨åˆ†Main Configsã€‚\n\n\t# ----------------------- #\n\t#      Main Configs       #\n\t# ----------------------- #\n\n\t#ç½‘ç«™åœ°å€\n\turl: http://wangruofeng.github.io\n\n\t#ç½‘ç«™æ ‡é¢˜\n\ttitle: ç‹è‹¥é£çš„æŠ€æœ¯åšå®¢\n\n\t#ç½‘ç«™å‰¯æ ‡é¢˜\n\tsubtitle: å¤©å¤©å‘ä¸Š.\n\n\t#ç½‘å€ä½œè€…ï¼Œé€šå¸¸æ˜¾ç¤ºåœ¨é¡µå°¾å’Œæ¯ç¯‡æ–‡ç« çš„å°¾éƒ¨\n\tauthor: Ace\n\n\t#æœç´¢å¼•æ“\n\t#simple_search: http://google.com/search\n\n\t#ç½‘ç«™çš„æè¿°ï¼Œå‡ºç°åœ¨HTMLé¡µé¢ä¸­çš„ meta ä¸­çš„ description\n\t#description:\n\n\n\n\nå¯¹åº”å¡«å…¥ä½ çš„ä¸ªäººä¿¡æ¯ï¼Œå…¶ä¸­urlä¸ºå¿…å¡«çš„ï¼Œä¸€èˆ¬å¡«GitHubä»“åº“å¯¹åº”çš„è¿æ¥ï¼Œå…¶å†…å®¹å¤§è‡´å°±æ˜¯ **username**.github.io ï¼Œè¿™ä¸ªåœ°å€æˆ‘ä»¬ä¼šåœ¨åé¢æ­¥éª¤ä¸­è·å¾—ã€‚\n\n### ç¬¬ä¸‰æ­¥ï¼šé›†æˆ GitHub Pages\n\n1.æ³¨å†Œ Github è´¦å·\n\nè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ—©æ™šéœ€è¦ï¼Œå» <http://github.com> æ³¨å†Œå§ã€‚\n\n2.åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªä»£ç å‚è€ƒï¼Œé¡¹ç›®åç§°å‘½åè§„åˆ™ä¸º **username**.github.ioï¼Œusernameå¿…é¡»ä¸ç”¨æˆ·åç§°ä¸€è‡´ã€‚\n\n3. åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰\nå¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåå¯ç”¨ï¼Œå¯ä»¥åœ¨è¿™æ—¶å°±é…ç½®å¥½ï¼Œæ¯•ç«Ÿè§£æèµ·æ¥éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œä¸å¦‚åœ¨æˆ‘ä»¬æ­å»ºåšå®¢çš„æ—¶å€™è®©å®ƒå¼€å§‹ï¼Œè¿™æ ·æˆ‘ä»¬æ­å»ºå®Œæˆåï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç›´æ¥ç”¨è‡ªæœ‰åŸŸåè®¿é—®äº†ã€‚\n\næˆ‘çš„æ˜¯åœ¨[ä¸‡ç½‘](http://wanwang.aliyun.com/domain/?utm_medium=text&utm_source=baidu&utm_campaign=st1&utm_content=se_2485)ç”³è¯·çš„ï¼ŒåŸä»·ä¸€å¹´100å¤šç‚¹ç°åœ¨æœ‰æ´»åŠ¨ä¾¿å®œçš„å‡ å—çš„éƒ½æœ‰ï¼Œæƒ³è¦ä¸ªæ€§åŸŸåçš„å¯ä»¥å»æ³¨å†Œä¸€ä¸ªã€‚\n\n* å¦‚æœä½ ç”¨çš„æ˜¯é¡¶çº§åŸŸåï¼Œæ¯”å¦‚ wangruofeng007.com, è¯·åˆ›å»ºä¸¤ä¸ª A è®°å½• (A Record) åˆ†åˆ«æŒ‡å‘ `192.30.252.153` å’Œ `192.30.252.154`.\n\n* å¦‚æœä½ ä½¿ç”¨äºŒçº§åŸŸåï¼Œæ¯”å¦‚ blog.wangruofeng007.com, è¯·å°†è¯¥åŸŸåçš„ CNAME æŒ‡å‘ [your_username].github.io, æŠŠå…¶ä¸­çš„ [your_username]æ¢æˆä½ è‡ªå·±åœ¨ Github ä¸Šçš„ç”¨æˆ·åã€‚\n\n* å¦‚æœä½ æš‚æ—¶æ²¡æœ‰åŸŸåï¼Œè¿™ä¸€æ­¥å¯ä»¥æš‚æ—¶ä¸ç”¨ç®¡\n\nPs. åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æœ€å¥½ä¸è¦`æ·»åŠ å¿½ç•¥æ–‡ä»¶`å’Œ`README`æ–‡ä»¶ã€‚å› ä¸ºæˆ‘ä»¬è¦æŠŠæœ¬åœ°çš„ git ä»“åº“åŒæ­¥åˆ° GitHub è¿œç¨‹ä»“åº“ä¸­ã€‚å¦‚æœå†è¿œç¨‹ä»“åº“ä¸­æ·»åŠ äº†å…¶ä»–æ–‡ä»¶ï¼Œéœ€è¦æˆ‘ä»¬æ‰§è¡Œ pull æ“ä½œã€‚é™¤éä½ èƒ½éå¸¸ç†Ÿç»ƒçš„ä½¿ç”¨ git ï¼Œå¦åˆ™ä¸å»ºè®®ä½ åˆ¶é€ ä¸å¿…è¦çš„éº»çƒ¦ã€‚\næ¥ä¸‹æ¥å°†æœ¬åœ°ä»£ç ä»“åº“åŒæ­¥åˆ° GitHub ä¸Šï¼Œæ‰§è¡Œç»ˆç«¯æŒ‡ä»¤ï¼š\n\n```\n$ rake setup_github_pages\n```\n\nå®ƒä¼šè¦æ±‚ä½ ç»‘å®šè¿œç¨‹ä»“åº“çš„åœ°å€ï¼Œæ­¤æ—¶åªéœ€è¦è¾“å…¥å³å¯ï¼š\n\n```\n$ git@github.com:username/username.github.com.git\n```\n\nè¿™æ ·å°±ä¼šå°† Octopress ç”Ÿæˆçš„é™æ€ç«™ç‚¹ä¸ GitHub è¿›è¡Œç»‘å®šäº†ã€‚\n\nä¹‹åæˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« ï¼š\n\n```\nrake new_post[\"title\"]\n```\n\nç„¶åä¼šæœ‰ä¸€ä¸ªåä¸º yyyy-mm-dd-Post-Title.markdown çš„æ–‡ä»¶åœ¨ octopress/source/_posts ç›®å½•ä¸‹ç”Ÿæˆï¼Œå…¶ä¸­ yyyy-mm-dd æ˜¯ä½ å½“æ—¶çš„æ—¥æœŸã€‚ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```\ncd source/_posts/\nvim yyyy-mm-dd-Post-Title.markdown\n```\n\nå³å¯ç”¨ vim ç¼–è¾‘å™¨ç¼–è¾‘çš„åˆšæ‰çš„æ–‡ç« äº†ï¼Œå¥½å§æˆ‘çŸ¥é“ä½ ä½œä¸ºè¿™ç¯‡æ–‡ç« çš„è¯»è€…å¹¶ä¸æ˜¯ä¸€ä¸ªèƒ½ç†Ÿç»ƒä½¿ç”¨ vim çš„äººï¼Œé‚£ä¹ˆè¯·åœ¨å‘½ä»¤è¡Œè¾“å…¥ qï¼é€€å‡ºè¿™ä¸ªç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä¸æƒ³å‡è£…æ˜¯ä¸ªé»‘å®¢çš„è¯ï¼Œå…¶å®å‘å¸ƒæ–‡ç« å¹¶ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ã€‚\n\næˆ‘ä»¬ç›´æ¥æ‰“å¼€ `octopress/source/_posts` æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°åˆšæ‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç”¨ä½ å–œæ¬¢çš„ Markdown ç¼–è¾‘å™¨ï¼ˆå…è´¹çš„æˆ‘æ¨è [Mou](http://mouapp.com/)æˆ–è€…[Atom](https://atom.io)ï¼‰æˆ–è€…æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¯¹æ–‡ç« å†…å®¹è¿›è¡Œç¼–è¾‘ã€‚\n\næ‰“å¼€æ–‡ä»¶åï¼Œä½ ä¼šå‘ç°æ–‡ç« å¼€å¤´æœ‰è¿™ä¹ˆä¸€æ®µä¿¡æ¯:\n\n```\n---  \nlayout: post  \ntitle: \"Post Title\"  \ndate: yyyy-mm-dd hh:mm:ss  \ncomments: true  \ncategories:  \"\"\n---\n```\n\nè¿™å…¶å®æ˜¯è¿™ç¯‡æ–‡ç« çš„å…ƒæ•°æ®ï¼šlayout æš‚æ—¶ä¸è¦ç†ä¼šï¼›title æ˜¯è¿™ç¯‡æ–‡ç« æ˜¾ç¤ºåœ¨æœ€ç»ˆç½‘é¡µä¸Šçš„æ ‡é¢˜ï¼›date éƒ¨åˆ†æ˜¯è¯¦ç»†çš„æ–‡ä»¶ç”Ÿæˆæ—¶é—´ï¼Œå¦‚ 2014-01-28 03:35:00ï¼›comment éƒ¨åˆ†è¡¨ç¤ºæ˜¯å¦å…è®¸è¯„è®ºï¼Œç›®å‰æ˜¾ç¤ºæ˜¯å…è®¸ï¼Œå¦‚æœæƒ³å…³é—­è¯„è®ºï¼Œè¯·æ”¹ä¸º falseï¼›categories æŒ‡è¿™ç¯‡æ–‡ç« çš„åˆ†ç±»ç›®å½•ï¼Œè¯·åœ¨åé¢å¼•å·ä¸­è¾“å…¥,ä¸ç”¨å¼•å·ä¹Ÿå¯ä»¥ï¼Œå¤šä¸ªåˆ†ç±»ç”¨`ç©ºæ ¼`éš”å¼€ï¼Œå¦‚æœæ²¡æœ‰è¯¥ç›®å½•ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚è¯·ä¸è¦åˆ é™¤è¿™æ®µä¿¡æ¯ï¼Œåœ¨è¿™æ®µä¿¡æ¯ä¸‹é¢å¼€å§‹ä½ çš„æ–‡ç« å†…å®¹\n\nè¿™ä»¶äº‹æƒ…ç»™æˆ‘ä»¬çš„å¯å‘æ˜¯ï¼Œä»¥åå‘å¸ƒæ–‡ç« ï¼Œå…¶å®å¹¶ä¸éœ€è¦ä½¿ç”¨ç»ˆç«¯å‘½ä»¤è¡Œç”Ÿæˆæ–‡ä»¶ã€‚å¯ä»¥ç›´æ¥å°†è‡ªå·±å†™å¥½çš„æ–‡ç« æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå½“ç„¶è¯·æŒ‰ç…§ `yyyy-mm-dd-Post-Title.markdown` è¿™æ ·çš„æ–‡ä»¶æ ¼å¼å‘½åï¼ŒåŒæ—¶è®°å¾—åœ¨æ–‡ç« å‰é¢æ·»åŠ å…ƒæ•°æ®ä¿¡æ¯ã€‚è¿™ç§åšæ³•ç”Ÿæˆçš„æ–‡ç« ä¸ä¸Šé¢çš„æ–¹æ³•æ— å¼‚\n\nç”Ÿæˆçš„æ–°æ–‡ç« åœ¨source/_post/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åæ„æˆä¸ºæ—¶é—´å’Œæ ‡é¢˜çš„æ‹¼éŸ³ã€‚æˆ‘ä»¬å¯ä»¥ç”¨Markdownç¼–è¾‘å™¨å¯¹æ–‡ç« è¿›è¡Œä¿®æ”¹ã€‚\nä¹‹åç”Ÿæˆé™æ€ç«™ç‚¹ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\n# ç”Ÿæˆé™æ€ç«™ç‚¹\n$ rake generate\n```\n\nå¦‚æœä½ æƒ³é¢„è§ˆæœ¬åœ°çš„ç«™ç‚¹ï¼Œå¯ä»¥æ‰§è¡Œç»ˆç«¯æŒ‡ä»¤ï¼š\n\n```\n# é¢„è§ˆé™æ€ç«™ç‚¹\n$ rake preview\n```\n\næ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€`localhost:4000` æŸ¥çœ‹æ•ˆæœã€‚å¦‚æœæ²¡æœ‰é—®é¢˜å¯ä»¥å°†é™æ€ç«™ç‚¹åŒæ­¥åˆ° GitHub è¿œç¨‹ä»“åº“ä¸­ï¼Œç»ˆç«¯æ‰§è¡ŒæŒ‡ä»¤ï¼š\n\n```\n# åŒæ­¥å†…å®¹\n$ rake deploy\n```\n\nä½ ä¼šå‘ç°æˆ‘ä»¬çš„é™æ€ç«™ç‚¹å·²ç»è¢« push åˆ° GitHubä»“åº“çš„ master åˆ†æ”¯ä¸Šã€‚ç¨ç­‰å‡ åˆ†é’Ÿï¼Œè®¿é—® `username.github.io` (æˆ–è€… `username.github.com`)ï¼Œå°±ä¼šå‘ç°ä½ çš„ä¸ªäººåšå®¢ç«™å·²åˆ›å»ºæˆåŠŸäº†ã€‚\nå¦‚æœä½ è¿˜æƒ³ç»™è‡ªå·±çš„æœ¬åœ°èµ„æºæ–‡ä»¶ï¼ˆå¦‚Markdownæ–‡ä»¶ç­‰å†…å®¹ï¼‰ä¹ŸåŒæ­¥åˆ° GitHub ä¸­ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š\n\n```\n$ git add .\n$ git commit -m \"comment\"\n$ git push origin source\n```\n\nè¿™æ ·æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶å°±ä¼šåŒæ­¥åˆ° GitHub çš„ source åˆ†æ”¯äº†ã€‚\n\n### ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼ˆå¯é€‰ï¼‰\nå¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼Œå¹¶ä¸”æƒ³æŒ‡å‘è¿™ä¸ªæ–°åšå®¢çš„è¯ï¼Œè¯·é¦–å…ˆç¡®ä¿æ‰§è¡Œäº†ç¬¬ä¸‰æ­¥çš„`åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰`çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œå¯ä»¥éšæ—¶æ‰§è¡Œã€‚\nç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ³¨æ„æŠŠ your-domain.com æ¢æˆä½ è‡ªå·±çš„åŸŸåã€‚\n\n```\necho 'your-domain.com' >> source/CNAME\n```\n\nè¿™å¥è¯çš„æ„æ€æ˜¯åœ¨`source`åˆ†æ”¯ä¸‹åˆ›å»ºä¸€ä¸ªCNAMEçš„æ–‡ä»¶å¹¶ä¸”å°†`your-domain.com`å†™å…¥æ–‡ä»¶\n\nç„¶åå†æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```\nrake generate\nrake deploy\n```\n\næˆ–è€…äºŒåˆä¸€\n\n```\nrake gen_deploy\n```\n\nè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨è‡ªå·±çš„åŸŸåäº†ã€‚åŸŸåè§£æéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰é©¬ä¸Šç”Ÿæ•ˆï¼Œè¯·ä¸è¦ç€æ€¥ã€‚å¦‚æœé•¿æ—¶é—´æ²¡æœ‰ç”Ÿæ•ˆï¼Œè¯·ç¡®ä¿å®Œæ•´æ‰§è¡Œäº† `åŸŸåæŒ‡å‘ï¼ˆå¯é€‰ï¼‰`å’Œ`ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼ˆå¯é€‰ï¼‰`çš„å†…å®¹ã€‚\n\n\nç°åœ¨æˆ‘ä»¬å®Œæˆäº†ä¸ªäººåšå®¢çš„åˆçº§æ­å»ºï¼Œè¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„åŸºæœ¬éœ€æ±‚ã€‚\n\n### é”™è¯¯å¤„ç†\n\nå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š\n\n```\nPushing generated _deploy website Permission denied (publickey).\nfatal: Could not read from remote repository.\n```\n\nè¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºç¼ºå°‘`SSH` keys ï¼Œåªæœ‰æ‹¥æœ‰è¿™ä¸ªkeyæ‰æœ‰æƒé™pushåˆ°è¿œç¨‹ä»“åº“ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®ç°æƒé™å®‰å…¨æ§åˆ¶ã€‚\nè§£å†³æ–¹æ¡ˆ:[Generating SSH keys](https://help.github.com/articles/generating-ssh-keys/)\n\nå‡ºç°ä¸‹é¢é”™è¯¯ï¼š\n\n```\n## Pushing generated _deploy website\nTo git@github.com:wangruofeng/wangruofeng.github.io.git\n ! [rejected]        master -> master (non-fast-forward)\nerror: failed to push some refs to 'git@github.com:wangruofeng/wangruofeng.github.io.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Integrate the remote changes (e.g.\nhint: 'git pull ...') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\n```\n\nåŸå› ï¼Œæ˜¯ä¿®æ”¹äº†è¿œç¨‹ä»“åº“ï¼Œå¯¼è‡´æœ¬åœ°æœ¬åœ°ç‰ˆæœ¬è½åäºè¿œç¨‹ä»“åº“ç‰ˆæœ¬ã€‚\næœ€ä½³è§£å†³æ–¹æ¡ˆï¼š\n\n```\ncd octopress/_deploy\ngit pull origin master\ncd ..\nrake deploy\n```\n\nå‚è€ƒé“¾æ¥ï¼š[rake-gen-deploy-rejected-in-octopress](http://stackoverflow.com/questions/17609453/rake-gen-deploy-rejected-in-octopress)\n\n\nå‚è€ƒèµ„æ–™ï¼š\n\n* å”å·§çš„åšå®¢: [è±¡å†™ç¨‹åºä¸€æ ·å†™åšå®¢ï¼šæ­å»ºåŸºäºgithubçš„åšå®¢]ï¼ˆhttp://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/ï¼‰\n* è§…ç äºº: [ç¬¬ä¸€ç¯‡åšæ–‡ï¼šç”¨Octopressæ­å»ºåšå®¢ç³»ç»Ÿ](http://tchen.me/posts/2012-12-16-first-blog.html)\n* ç ´èˆ¹ä¹‹å®¶: [ä½ å¥½ï¼githubé¡µé¢](http://beyondvincent.com/blog/2013/07/27/107-hello-page-of-github/)\n* opoo.org: [Octopress åšå®¢ç³»ç»Ÿ â€”â€” a Blogging Framework for Hackers](http://opoo.org/octopress/)\n* Ocotpress: [Octopress Documentation](http://octopress.org/docs/)\n* Haveeâ€™s Space: [ä¸º Octopress æ·»åŠ å¤šè¯´è¯„è®ºç³»ç»Ÿ](http://havee.me/internet/2013-02/add-duoshuo-commemt-system-into-octopress.html)\n* colors4.us: [Octopressåšå®¢ä»é›¶å¼€å§‹ III](http://colors4.us/blog/2012/01/08/octopressbo-ke-cong-ling-kai-shi-iii/)\n* æµ®ç”ŸçŒè¶£:[ç”¨Octopressåœ¨Githubæ­å»ºåšå®¢ï¼Œå¹¶ç»‘å®šç‹¬ç«‹åŸŸå](http://blog.lessfun.com/blog/2013/11/27/create-blog-in-github-page-using-octopress-and-binding-domain/)\n* Aster0idçš„ä¸ªäººåšå®¢:[åˆ¶ä½œä¸ªäººåšå®¢ç«™ï¼ˆä¸€ï¼‰ï¼šMacç³»ç»Ÿä¸‹ä½¿ç”¨ Octopress + GitHub Pages æ­å»ºä¸ªäººåšå®¢](http://niumeng.me/blog/2015/08/26/create-your-website-1-init/)\n* [octopressåšå®¢æ­å»ºå’Œä¸ªæ€§åŒ–é…ç½®](http://www.jianshu.com/p/0ac2ac1a8e45)\n\nå¤‡æ³¨ï¼šæ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼ <http://blog.wangruofeng007.com>\n","tags":["Hexo"],"categories":["åšå®¢æ­å»º"]}]